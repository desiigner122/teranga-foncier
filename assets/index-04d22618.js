var oJ=Object.defineProperty;var lJ=(e,t,r)=>t in e?oJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ga=(e,t,r)=>(lJ(e,typeof t!="symbol"?t+"":t,r),r);function cJ(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var li=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Er(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uJ(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}),r}var y$={exports:{}},Xw={},b$={exports:{}},_r={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=Symbol.for("react.element"),dJ=Symbol.for("react.portal"),hJ=Symbol.for("react.fragment"),fJ=Symbol.for("react.strict_mode"),mJ=Symbol.for("react.profiler"),pJ=Symbol.for("react.provider"),gJ=Symbol.for("react.context"),xJ=Symbol.for("react.forward_ref"),vJ=Symbol.for("react.suspense"),yJ=Symbol.for("react.memo"),bJ=Symbol.for("react.lazy"),z3=Symbol.iterator;function jJ(e){return e===null||typeof e!="object"?null:(e=z3&&e[z3]||e["@@iterator"],typeof e=="function"?e:null)}var j$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w$=Object.assign,_$={};function Qg(e,t,r){this.props=e,this.context=t,this.refs=_$,this.updater=r||j$}Qg.prototype.isReactComponent={};Qg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N$(){}N$.prototype=Qg.prototype;function a4(e,t,r){this.props=e,this.context=t,this.refs=_$,this.updater=r||j$}var o4=a4.prototype=new N$;o4.constructor=a4;w$(o4,Qg.prototype);o4.isPureReactComponent=!0;var B3=Array.isArray,S$=Object.prototype.hasOwnProperty,l4={current:null},A$={key:!0,ref:!0,__self:!0,__source:!0};function P$(e,t,r){var s,i={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)S$.call(t,s)&&!A$.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:x0,type:e,key:a,ref:o,props:i,_owner:l4.current}}function wJ(e,t){return{$$typeof:x0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c4(e){return typeof e=="object"&&e!==null&&e.$$typeof===x0}function _J(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var q3=/\/+/g;function vN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_J(""+e.key):t.toString(36)}function m1(e,t,r,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case x0:case dJ:o=!0}}if(o)return o=e,i=i(o),e=s===""?"."+vN(o,0):s,B3(i)?(r="",e!=null&&(r=e.replace(q3,"$&/")+"/"),m1(i,t,r,"",function(u){return u})):i!=null&&(c4(i)&&(i=wJ(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(q3,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=s===""?".":s+":",B3(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+vN(a,l);o+=m1(a,t,r,c,i)}else if(c=jJ(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+vN(a,l++),o+=m1(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function mb(e,t,r){if(e==null)return e;var s=[],i=0;return m1(e,s,"","",function(a){return t.call(r,a,i++)}),s}function NJ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var aa={current:null},p1={transition:null},SJ={ReactCurrentDispatcher:aa,ReactCurrentBatchConfig:p1,ReactCurrentOwner:l4};function C$(){throw Error("act(...) is not supported in production builds of React.")}_r.Children={map:mb,forEach:function(e,t,r){mb(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return mb(e,function(){t++}),t},toArray:function(e){return mb(e,function(t){return t})||[]},only:function(e){if(!c4(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_r.Component=Qg;_r.Fragment=hJ;_r.Profiler=mJ;_r.PureComponent=a4;_r.StrictMode=fJ;_r.Suspense=vJ;_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SJ;_r.act=C$;_r.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=w$({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=l4.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S$.call(t,c)&&!A$.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:x0,type:e.type,key:i,ref:a,props:s,_owner:o}};_r.createContext=function(e){return e={$$typeof:gJ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pJ,_context:e},e.Consumer=e};_r.createElement=P$;_r.createFactory=function(e){var t=P$.bind(null,e);return t.type=e,t};_r.createRef=function(){return{current:null}};_r.forwardRef=function(e){return{$$typeof:xJ,render:e}};_r.isValidElement=c4;_r.lazy=function(e){return{$$typeof:bJ,_payload:{_status:-1,_result:e},_init:NJ}};_r.memo=function(e,t){return{$$typeof:yJ,type:e,compare:t===void 0?null:t}};_r.startTransition=function(e){var t=p1.transition;p1.transition={};try{e()}finally{p1.transition=t}};_r.unstable_act=C$;_r.useCallback=function(e,t){return aa.current.useCallback(e,t)};_r.useContext=function(e){return aa.current.useContext(e)};_r.useDebugValue=function(){};_r.useDeferredValue=function(e){return aa.current.useDeferredValue(e)};_r.useEffect=function(e,t){return aa.current.useEffect(e,t)};_r.useId=function(){return aa.current.useId()};_r.useImperativeHandle=function(e,t,r){return aa.current.useImperativeHandle(e,t,r)};_r.useInsertionEffect=function(e,t){return aa.current.useInsertionEffect(e,t)};_r.useLayoutEffect=function(e,t){return aa.current.useLayoutEffect(e,t)};_r.useMemo=function(e,t){return aa.current.useMemo(e,t)};_r.useReducer=function(e,t,r){return aa.current.useReducer(e,t,r)};_r.useRef=function(e){return aa.current.useRef(e)};_r.useState=function(e){return aa.current.useState(e)};_r.useSyncExternalStore=function(e,t,r){return aa.current.useSyncExternalStore(e,t,r)};_r.useTransition=function(){return aa.current.useTransition()};_r.version="18.3.1";b$.exports=_r;var x=b$.exports;const we=Er(x),u4=cJ({__proto__:null,default:we},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AJ=x,PJ=Symbol.for("react.element"),CJ=Symbol.for("react.fragment"),kJ=Object.prototype.hasOwnProperty,EJ=AJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TJ={key:!0,ref:!0,__self:!0,__source:!0};function k$(e,t,r){var s,i={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)kJ.call(t,s)&&!TJ.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:PJ,type:e,key:a,ref:o,props:i,_owner:EJ.current}}Xw.Fragment=CJ;Xw.jsx=k$;Xw.jsxs=k$;y$.exports=Xw;var n=y$.exports,xS={},E$={exports:{}},uo={},T$={exports:{}},O$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,K){var ee=G.length;G.push(K);e:for(;0<ee;){var xe=ee-1>>>1,B=G[xe];if(0<i(B,K))G[xe]=K,G[ee]=B,ee=xe;else break e}}function r(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var K=G[0],ee=G.pop();if(ee!==K){G[0]=ee;e:for(var xe=0,B=G.length,X=B>>>1;xe<X;){var ie=2*(xe+1)-1,me=G[ie],ye=ie+1,Ne=G[ye];if(0>i(me,ee))ye<B&&0>i(Ne,me)?(G[xe]=Ne,G[ye]=ee,xe=ye):(G[xe]=me,G[ie]=ee,xe=ie);else if(ye<B&&0>i(Ne,ee))G[xe]=Ne,G[ye]=ee,xe=ye;else break e}}return K}function i(G,K){var ee=G.sortIndex-K.sortIndex;return ee!==0?ee:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var K=r(u);K!==null;){if(K.callback===null)s(u);else if(K.startTime<=G)s(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=r(u)}}function A(G){if(g=!1,w(G),!v)if(r(c)!==null)v=!0,V(S);else{var K=r(u);K!==null&&ne(A,K.startTime-G)}}function S(G,K){v=!1,g&&(g=!1,j(T),T=-1),p=!0;var ee=m;try{for(w(K),h=r(c);h!==null&&(!(h.expirationTime>K)||G&&!O());){var xe=h.callback;if(typeof xe=="function"){h.callback=null,m=h.priorityLevel;var B=xe(h.expirationTime<=K);K=e.unstable_now(),typeof B=="function"?h.callback=B:h===r(c)&&s(c),w(K)}else s(c);h=r(c)}if(h!==null)var X=!0;else{var ie=r(u);ie!==null&&ne(A,ie.startTime-K),X=!1}return X}finally{h=null,m=ee,p=!1}}var P=!1,C=null,T=-1,M=5,z=-1;function O(){return!(e.unstable_now()-z<M)}function I(){if(C!==null){var G=e.unstable_now();z=G;var K=!0;try{K=C(!0,G)}finally{K?q():(P=!1,C=null)}}else P=!1}var q;if(typeof _=="function")q=function(){_(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=I,q=function(){W.postMessage(null)}}else q=function(){y(I,0)};function V(G){C=G,P||(P=!0,q())}function ne(G,K){T=y(function(){G(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,V(S))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(G){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var ee=m;m=K;try{return G()}finally{m=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ee=m;m=G;try{return K()}finally{m=ee}},e.unstable_scheduleCallback=function(G,K,ee){var xe=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?xe+ee:xe):ee=xe,G){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ee+B,G={id:d++,callback:K,priorityLevel:G,startTime:ee,expirationTime:B,sortIndex:-1},ee>xe?(G.sortIndex=ee,t(u,G),r(c)===null&&G===r(u)&&(g?(j(T),T=-1):g=!0,ne(A,ee-xe))):(G.sortIndex=B,t(c,G),v||p||(v=!0,V(S))),G},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(G){var K=m;return function(){var ee=m;m=K;try{return G.apply(this,arguments)}finally{m=ee}}}})(O$);T$.exports=O$;var OJ=T$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LJ=x,oo=OJ;function xt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L$=new Set,ny={};function dm(e,t){lg(e,t),lg(e+"Capture",t)}function lg(e,t){for(ny[e]=t,e=0;e<t.length;e++)L$.add(t[e])}var Eu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vS=Object.prototype.hasOwnProperty,MJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V3={},U3={};function IJ(e){return vS.call(U3,e)?!0:vS.call(V3,e)?!1:MJ.test(e)?U3[e]=!0:(V3[e]=!0,!1)}function RJ(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DJ(e,t,r,s){if(t===null||typeof t>"u"||RJ(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oa(e,t,r,s,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ui[e]=new oa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ui[t]=new oa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ui[e]=new oa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ui[e]=new oa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ui[e]=new oa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ui[e]=new oa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ui[e]=new oa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ui[e]=new oa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ui[e]=new oa(e,5,!1,e.toLowerCase(),null,!1,!1)});var d4=/[\-:]([a-z])/g;function h4(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d4,h4);ui[t]=new oa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d4,h4);ui[t]=new oa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d4,h4);ui[t]=new oa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ui[e]=new oa(e,1,!1,e.toLowerCase(),null,!1,!1)});ui.xlinkHref=new oa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ui[e]=new oa(e,1,!1,e.toLowerCase(),null,!0,!0)});function f4(e,t,r,s){var i=ui.hasOwnProperty(t)?ui[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DJ(t,r,i,s)&&(r=null),s||i===null?IJ(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Wu=LJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pb=Symbol.for("react.element"),vp=Symbol.for("react.portal"),yp=Symbol.for("react.fragment"),m4=Symbol.for("react.strict_mode"),yS=Symbol.for("react.profiler"),M$=Symbol.for("react.provider"),I$=Symbol.for("react.context"),p4=Symbol.for("react.forward_ref"),bS=Symbol.for("react.suspense"),jS=Symbol.for("react.suspense_list"),g4=Symbol.for("react.memo"),Id=Symbol.for("react.lazy"),R$=Symbol.for("react.offscreen"),H3=Symbol.iterator;function Gx(e){return e===null||typeof e!="object"?null:(e=H3&&e[H3]||e["@@iterator"],typeof e=="function"?e:null)}var Hn=Object.assign,yN;function wv(e){if(yN===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);yN=t&&t[1]||""}return`
`+yN+e}var bN=!1;function jN(e,t){if(!e||bN)return"";bN=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{bN=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?wv(e):""}function $J(e){switch(e.tag){case 5:return wv(e.type);case 16:return wv("Lazy");case 13:return wv("Suspense");case 19:return wv("SuspenseList");case 0:case 2:case 15:return e=jN(e.type,!1),e;case 11:return e=jN(e.type.render,!1),e;case 1:return e=jN(e.type,!0),e;default:return""}}function wS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yp:return"Fragment";case vp:return"Portal";case yS:return"Profiler";case m4:return"StrictMode";case bS:return"Suspense";case jS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case I$:return(e.displayName||"Context")+".Consumer";case M$:return(e._context.displayName||"Context")+".Provider";case p4:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g4:return t=e.displayName||null,t!==null?t:wS(e.type)||"Memo";case Id:t=e._payload,e=e._init;try{return wS(e(t))}catch{}}return null}function FJ(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wS(t);case 8:return t===m4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function D$(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zJ(e){var t=D$(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gb(e){e._valueTracker||(e._valueTracker=zJ(e))}function $$(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=D$(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function V1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _S(e,t){var r=t.checked;return Hn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function W3(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=lh(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F$(e,t){t=t.checked,t!=null&&f4(e,"checked",t,!1)}function NS(e,t){F$(e,t);var r=lh(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?SS(e,t.type,r):t.hasOwnProperty("defaultValue")&&SS(e,t.type,lh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function G3(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function SS(e,t,r){(t!=="number"||V1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _v=Array.isArray;function qp(e,t,r,s){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&s&&(e[r].defaultSelected=!0)}else{for(r=""+lh(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function AS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xt(91));return Hn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function K3(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(xt(92));if(_v(r)){if(1<r.length)throw Error(xt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:lh(r)}}function z$(e,t){var r=lh(t.value),s=lh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Z3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B$(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B$(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xb,q$=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xb=xb||document.createElement("div"),xb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Tv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BJ=["Webkit","ms","Moz","O"];Object.keys(Tv).forEach(function(e){BJ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tv[t]=Tv[e]})});function V$(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Tv.hasOwnProperty(e)&&Tv[e]?(""+t).trim():t+"px"}function U$(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=V$(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,i):e[r]=i}}var qJ=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function CS(e,t){if(t){if(qJ[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xt(62))}}function kS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ES=null;function x4(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var TS=null,Vp=null,Up=null;function X3(e){if(e=b0(e)){if(typeof TS!="function")throw Error(xt(280));var t=e.stateNode;t&&(t=t2(t),TS(e.stateNode,e.type,t))}}function H$(e){Vp?Up?Up.push(e):Up=[e]:Vp=e}function W$(){if(Vp){var e=Vp,t=Up;if(Up=Vp=null,X3(e),t)for(e=0;e<t.length;e++)X3(t[e])}}function G$(e,t){return e(t)}function K$(){}var wN=!1;function Z$(e,t,r){if(wN)return e(t,r);wN=!0;try{return G$(e,t,r)}finally{wN=!1,(Vp!==null||Up!==null)&&(K$(),W$())}}function iy(e,t){var r=e.stateNode;if(r===null)return null;var s=t2(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(xt(231,t,typeof r));return r}var OS=!1;if(Eu)try{var Kx={};Object.defineProperty(Kx,"passive",{get:function(){OS=!0}}),window.addEventListener("test",Kx,Kx),window.removeEventListener("test",Kx,Kx)}catch{OS=!1}function VJ(e,t,r,s,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ov=!1,U1=null,H1=!1,LS=null,UJ={onError:function(e){Ov=!0,U1=e}};function HJ(e,t,r,s,i,a,o,l,c){Ov=!1,U1=null,VJ.apply(UJ,arguments)}function WJ(e,t,r,s,i,a,o,l,c){if(HJ.apply(this,arguments),Ov){if(Ov){var u=U1;Ov=!1,U1=null}else throw Error(xt(198));H1||(H1=!0,LS=u)}}function hm(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function X$(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Y3(e){if(hm(e)!==e)throw Error(xt(188))}function GJ(e){var t=e.alternate;if(!t){if(t=hm(e),t===null)throw Error(xt(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Y3(i),e;if(a===s)return Y3(i),t;a=a.sibling}throw Error(xt(188))}if(r.return!==s.return)r=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o)throw Error(xt(189))}}if(r.alternate!==s)throw Error(xt(190))}if(r.tag!==3)throw Error(xt(188));return r.stateNode.current===r?e:t}function Y$(e){return e=GJ(e),e!==null?J$(e):null}function J$(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=J$(e);if(t!==null)return t;e=e.sibling}return null}var Q$=oo.unstable_scheduleCallback,J3=oo.unstable_cancelCallback,KJ=oo.unstable_shouldYield,ZJ=oo.unstable_requestPaint,os=oo.unstable_now,XJ=oo.unstable_getCurrentPriorityLevel,v4=oo.unstable_ImmediatePriority,eF=oo.unstable_UserBlockingPriority,W1=oo.unstable_NormalPriority,YJ=oo.unstable_LowPriority,tF=oo.unstable_IdlePriority,Yw=null,pc=null;function JJ(e){if(pc&&typeof pc.onCommitFiberRoot=="function")try{pc.onCommitFiberRoot(Yw,e,void 0,(e.current.flags&128)===128)}catch{}}var Al=Math.clz32?Math.clz32:tQ,QJ=Math.log,eQ=Math.LN2;function tQ(e){return e>>>=0,e===0?32:31-(QJ(e)/eQ|0)|0}var vb=64,yb=4194304;function Nv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function G1(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?s=Nv(l):(a&=o,a!==0&&(s=Nv(a)))}else o=r&~i,o!==0?s=Nv(o):a!==0&&(s=Nv(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Al(t),i=1<<r,s|=e[r],t&=~i;return s}function rQ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nQ(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Al(a),l=1<<o,c=i[o];c===-1?(!(l&r)||l&s)&&(i[o]=rQ(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function MS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rF(){var e=vb;return vb<<=1,!(vb&4194240)&&(vb=64),e}function _N(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function v0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Al(t),e[t]=r}function sQ(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Al(r),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,r&=~a}}function y4(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Al(r),i=1<<s;i&t|e[s]&t&&(e[s]|=t),r&=~i}}var tn=0;function nF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sF,b4,iF,aF,oF,IS=!1,bb=[],Zd=null,Xd=null,Yd=null,ay=new Map,oy=new Map,Fd=[],iQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q3(e,t){switch(e){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":Xd=null;break;case"mouseover":case"mouseout":Yd=null;break;case"pointerover":case"pointerout":ay.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oy.delete(t.pointerId)}}function Zx(e,t,r,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=b0(t),t!==null&&b4(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function aQ(e,t,r,s,i){switch(t){case"focusin":return Zd=Zx(Zd,e,t,r,s,i),!0;case"dragenter":return Xd=Zx(Xd,e,t,r,s,i),!0;case"mouseover":return Yd=Zx(Yd,e,t,r,s,i),!0;case"pointerover":var a=i.pointerId;return ay.set(a,Zx(ay.get(a)||null,e,t,r,s,i)),!0;case"gotpointercapture":return a=i.pointerId,oy.set(a,Zx(oy.get(a)||null,e,t,r,s,i)),!0}return!1}function lF(e){var t=Sf(e.target);if(t!==null){var r=hm(t);if(r!==null){if(t=r.tag,t===13){if(t=X$(r),t!==null){e.blockedOn=t,oF(e.priority,function(){iF(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function g1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=RS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ES=s,r.target.dispatchEvent(s),ES=null}else return t=b0(r),t!==null&&b4(t),e.blockedOn=r,!1;t.shift()}return!0}function eO(e,t,r){g1(e)&&r.delete(t)}function oQ(){IS=!1,Zd!==null&&g1(Zd)&&(Zd=null),Xd!==null&&g1(Xd)&&(Xd=null),Yd!==null&&g1(Yd)&&(Yd=null),ay.forEach(eO),oy.forEach(eO)}function Xx(e,t){e.blockedOn===t&&(e.blockedOn=null,IS||(IS=!0,oo.unstable_scheduleCallback(oo.unstable_NormalPriority,oQ)))}function ly(e){function t(i){return Xx(i,e)}if(0<bb.length){Xx(bb[0],e);for(var r=1;r<bb.length;r++){var s=bb[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Zd!==null&&Xx(Zd,e),Xd!==null&&Xx(Xd,e),Yd!==null&&Xx(Yd,e),ay.forEach(t),oy.forEach(t),r=0;r<Fd.length;r++)s=Fd[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Fd.length&&(r=Fd[0],r.blockedOn===null);)lF(r),r.blockedOn===null&&Fd.shift()}var Hp=Wu.ReactCurrentBatchConfig,K1=!0;function lQ(e,t,r,s){var i=tn,a=Hp.transition;Hp.transition=null;try{tn=1,j4(e,t,r,s)}finally{tn=i,Hp.transition=a}}function cQ(e,t,r,s){var i=tn,a=Hp.transition;Hp.transition=null;try{tn=4,j4(e,t,r,s)}finally{tn=i,Hp.transition=a}}function j4(e,t,r,s){if(K1){var i=RS(e,t,r,s);if(i===null)LN(e,t,s,Z1,r),Q3(e,s);else if(aQ(i,e,t,r,s))s.stopPropagation();else if(Q3(e,s),t&4&&-1<iQ.indexOf(e)){for(;i!==null;){var a=b0(i);if(a!==null&&sF(a),a=RS(e,t,r,s),a===null&&LN(e,t,s,Z1,r),a===i)break;i=a}i!==null&&s.stopPropagation()}else LN(e,t,s,null,r)}}var Z1=null;function RS(e,t,r,s){if(Z1=null,e=x4(s),e=Sf(e),e!==null)if(t=hm(e),t===null)e=null;else if(r=t.tag,r===13){if(e=X$(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Z1=e,null}function cF(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XJ()){case v4:return 1;case eF:return 4;case W1:case YJ:return 16;case tF:return 536870912;default:return 16}default:return 16}}var Vd=null,w4=null,x1=null;function uF(){if(x1)return x1;var e,t=w4,r=t.length,s,i="value"in Vd?Vd.value:Vd.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===i[a-s];s++);return x1=i.slice(e,1<s?1-s:void 0)}function v1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jb(){return!0}function tO(){return!1}function ho(e){function t(r,s,i,a,o){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?jb:tO,this.isPropagationStopped=tO,this}return Hn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jb)},persist:function(){},isPersistent:jb}),t}var ex={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_4=ho(ex),y0=Hn({},ex,{view:0,detail:0}),uQ=ho(y0),NN,SN,Yx,Jw=Hn({},y0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N4,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yx&&(Yx&&e.type==="mousemove"?(NN=e.screenX-Yx.screenX,SN=e.screenY-Yx.screenY):SN=NN=0,Yx=e),NN)},movementY:function(e){return"movementY"in e?e.movementY:SN}}),rO=ho(Jw),dQ=Hn({},Jw,{dataTransfer:0}),hQ=ho(dQ),fQ=Hn({},y0,{relatedTarget:0}),AN=ho(fQ),mQ=Hn({},ex,{animationName:0,elapsedTime:0,pseudoElement:0}),pQ=ho(mQ),gQ=Hn({},ex,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xQ=ho(gQ),vQ=Hn({},ex,{data:0}),nO=ho(vQ),yQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jQ[e])?!!t[e]:!1}function N4(){return wQ}var _Q=Hn({},y0,{key:function(e){if(e.key){var t=yQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=v1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N4,charCode:function(e){return e.type==="keypress"?v1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?v1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NQ=ho(_Q),SQ=Hn({},Jw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sO=ho(SQ),AQ=Hn({},y0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N4}),PQ=ho(AQ),CQ=Hn({},ex,{propertyName:0,elapsedTime:0,pseudoElement:0}),kQ=ho(CQ),EQ=Hn({},Jw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TQ=ho(EQ),OQ=[9,13,27,32],S4=Eu&&"CompositionEvent"in window,Lv=null;Eu&&"documentMode"in document&&(Lv=document.documentMode);var LQ=Eu&&"TextEvent"in window&&!Lv,dF=Eu&&(!S4||Lv&&8<Lv&&11>=Lv),iO=String.fromCharCode(32),aO=!1;function hF(e,t){switch(e){case"keyup":return OQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fF(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bp=!1;function MQ(e,t){switch(e){case"compositionend":return fF(t);case"keypress":return t.which!==32?null:(aO=!0,iO);case"textInput":return e=t.data,e===iO&&aO?null:e;default:return null}}function IQ(e,t){if(bp)return e==="compositionend"||!S4&&hF(e,t)?(e=uF(),x1=w4=Vd=null,bp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dF&&t.locale!=="ko"?null:t.data;default:return null}}var RQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RQ[e.type]:t==="textarea"}function mF(e,t,r,s){H$(s),t=X1(t,"onChange"),0<t.length&&(r=new _4("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Mv=null,cy=null;function DQ(e){SF(e,0)}function Qw(e){var t=_p(e);if($$(t))return e}function $Q(e,t){if(e==="change")return t}var pF=!1;if(Eu){var PN;if(Eu){var CN="oninput"in document;if(!CN){var lO=document.createElement("div");lO.setAttribute("oninput","return;"),CN=typeof lO.oninput=="function"}PN=CN}else PN=!1;pF=PN&&(!document.documentMode||9<document.documentMode)}function cO(){Mv&&(Mv.detachEvent("onpropertychange",gF),cy=Mv=null)}function gF(e){if(e.propertyName==="value"&&Qw(cy)){var t=[];mF(t,cy,e,x4(e)),Z$(DQ,t)}}function FQ(e,t,r){e==="focusin"?(cO(),Mv=t,cy=r,Mv.attachEvent("onpropertychange",gF)):e==="focusout"&&cO()}function zQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qw(cy)}function BQ(e,t){if(e==="click")return Qw(t)}function qQ(e,t){if(e==="input"||e==="change")return Qw(t)}function VQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var El=typeof Object.is=="function"?Object.is:VQ;function uy(e,t){if(El(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!vS.call(t,i)||!El(e[i],t[i]))return!1}return!0}function uO(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dO(e,t){var r=uO(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uO(r)}}function xF(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xF(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vF(){for(var e=window,t=V1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=V1(e.document)}return t}function A4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UQ(e){var t=vF(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xF(r.ownerDocument.documentElement,r)){if(s!==null&&A4(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=dO(r,a);var o=dO(r,s);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HQ=Eu&&"documentMode"in document&&11>=document.documentMode,jp=null,DS=null,Iv=null,$S=!1;function hO(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$S||jp==null||jp!==V1(s)||(s=jp,"selectionStart"in s&&A4(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Iv&&uy(Iv,s)||(Iv=s,s=X1(DS,"onSelect"),0<s.length&&(t=new _4("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=jp)))}function wb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wp={animationend:wb("Animation","AnimationEnd"),animationiteration:wb("Animation","AnimationIteration"),animationstart:wb("Animation","AnimationStart"),transitionend:wb("Transition","TransitionEnd")},kN={},yF={};Eu&&(yF=document.createElement("div").style,"AnimationEvent"in window||(delete wp.animationend.animation,delete wp.animationiteration.animation,delete wp.animationstart.animation),"TransitionEvent"in window||delete wp.transitionend.transition);function e2(e){if(kN[e])return kN[e];if(!wp[e])return e;var t=wp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in yF)return kN[e]=t[r];return e}var bF=e2("animationend"),jF=e2("animationiteration"),wF=e2("animationstart"),_F=e2("transitionend"),NF=new Map,fO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yh(e,t){NF.set(e,t),dm(t,[e])}for(var EN=0;EN<fO.length;EN++){var TN=fO[EN],WQ=TN.toLowerCase(),GQ=TN[0].toUpperCase()+TN.slice(1);yh(WQ,"on"+GQ)}yh(bF,"onAnimationEnd");yh(jF,"onAnimationIteration");yh(wF,"onAnimationStart");yh("dblclick","onDoubleClick");yh("focusin","onFocus");yh("focusout","onBlur");yh(_F,"onTransitionEnd");lg("onMouseEnter",["mouseout","mouseover"]);lg("onMouseLeave",["mouseout","mouseover"]);lg("onPointerEnter",["pointerout","pointerover"]);lg("onPointerLeave",["pointerout","pointerover"]);dm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dm("onBeforeInput",["compositionend","keypress","textInput","paste"]);dm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sv));function mO(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,WJ(s,t,void 0,e),e.currentTarget=null}function SF(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;mO(i,l,u),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;mO(i,l,u),a=c}}}if(H1)throw e=LS,H1=!1,LS=null,e}function Nn(e,t){var r=t[VS];r===void 0&&(r=t[VS]=new Set);var s=e+"__bubble";r.has(s)||(AF(t,e,2,!1),r.add(s))}function ON(e,t,r){var s=0;t&&(s|=4),AF(r,e,s,t)}var _b="_reactListening"+Math.random().toString(36).slice(2);function dy(e){if(!e[_b]){e[_b]=!0,L$.forEach(function(r){r!=="selectionchange"&&(KQ.has(r)||ON(r,!1,e),ON(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_b]||(t[_b]=!0,ON("selectionchange",!1,t))}}function AF(e,t,r,s){switch(cF(t)){case 1:var i=lQ;break;case 4:i=cQ;break;default:i=j4}r=i.bind(null,t,r,e),i=void 0,!OS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function LN(e,t,r,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Sf(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}Z$(function(){var u=a,d=x4(r),h=[];e:{var m=NF.get(e);if(m!==void 0){var p=_4,v=e;switch(e){case"keypress":if(v1(r)===0)break e;case"keydown":case"keyup":p=NQ;break;case"focusin":v="focus",p=AN;break;case"focusout":v="blur",p=AN;break;case"beforeblur":case"afterblur":p=AN;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PQ;break;case bF:case jF:case wF:p=pQ;break;case _F:p=kQ;break;case"scroll":p=uQ;break;case"wheel":p=TQ;break;case"copy":case"cut":case"paste":p=xQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sO}var g=(t&4)!==0,y=!g&&e==="scroll",j=g?m!==null?m+"Capture":null:m;g=[];for(var _=u,w;_!==null;){w=_;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,j!==null&&(A=iy(_,j),A!=null&&g.push(hy(_,A,w)))),y)break;_=_.return}0<g.length&&(m=new p(m,v,null,r,d),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&r!==ES&&(v=r.relatedTarget||r.fromElement)&&(Sf(v)||v[Tu]))break e;if((p||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=u,v=v?Sf(v):null,v!==null&&(y=hm(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(g=rO,A="onMouseLeave",j="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(g=sO,A="onPointerLeave",j="onPointerEnter",_="pointer"),y=p==null?m:_p(p),w=v==null?m:_p(v),m=new g(A,_+"leave",p,r,d),m.target=y,m.relatedTarget=w,A=null,Sf(d)===u&&(g=new g(j,_+"enter",v,r,d),g.target=w,g.relatedTarget=y,A=g),y=A,p&&v)t:{for(g=p,j=v,_=0,w=g;w;w=Xm(w))_++;for(w=0,A=j;A;A=Xm(A))w++;for(;0<_-w;)g=Xm(g),_--;for(;0<w-_;)j=Xm(j),w--;for(;_--;){if(g===j||j!==null&&g===j.alternate)break t;g=Xm(g),j=Xm(j)}g=null}else g=null;p!==null&&pO(h,m,p,g,!1),v!==null&&y!==null&&pO(h,y,v,g,!0)}}e:{if(m=u?_p(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=$Q;else if(oO(m))if(pF)S=qQ;else{S=zQ;var P=FQ}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=BQ);if(S&&(S=S(e,u))){mF(h,S,r,d);break e}P&&P(e,m,u),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&SS(m,"number",m.value)}switch(P=u?_p(u):window,e){case"focusin":(oO(P)||P.contentEditable==="true")&&(jp=P,DS=u,Iv=null);break;case"focusout":Iv=DS=jp=null;break;case"mousedown":$S=!0;break;case"contextmenu":case"mouseup":case"dragend":$S=!1,hO(h,r,d);break;case"selectionchange":if(HQ)break;case"keydown":case"keyup":hO(h,r,d)}var C;if(S4)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else bp?hF(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(dF&&r.locale!=="ko"&&(bp||T!=="onCompositionStart"?T==="onCompositionEnd"&&bp&&(C=uF()):(Vd=d,w4="value"in Vd?Vd.value:Vd.textContent,bp=!0)),P=X1(u,T),0<P.length&&(T=new nO(T,e,null,r,d),h.push({event:T,listeners:P}),C?T.data=C:(C=fF(r),C!==null&&(T.data=C)))),(C=LQ?MQ(e,r):IQ(e,r))&&(u=X1(u,"onBeforeInput"),0<u.length&&(d=new nO("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}SF(h,t)})}function hy(e,t,r){return{instance:e,listener:t,currentTarget:r}}function X1(e,t){for(var r=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=iy(e,r),a!=null&&s.unshift(hy(e,a,i)),a=iy(e,t),a!=null&&s.push(hy(e,a,i))),e=e.return}return s}function Xm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pO(e,t,r,s,i){for(var a=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=iy(r,a),c!=null&&o.unshift(hy(r,c,l))):i||(c=iy(r,a),c!=null&&o.push(hy(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ZQ=/\r\n?/g,XQ=/\u0000|\uFFFD/g;function gO(e){return(typeof e=="string"?e:""+e).replace(ZQ,`
`).replace(XQ,"")}function Nb(e,t,r){if(t=gO(t),gO(e)!==t&&r)throw Error(xt(425))}function Y1(){}var FS=null,zS=null;function BS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qS=typeof setTimeout=="function"?setTimeout:void 0,YQ=typeof clearTimeout=="function"?clearTimeout:void 0,xO=typeof Promise=="function"?Promise:void 0,JQ=typeof queueMicrotask=="function"?queueMicrotask:typeof xO<"u"?function(e){return xO.resolve(null).then(e).catch(QQ)}:qS;function QQ(e){setTimeout(function(){throw e})}function MN(e,t){var r=t,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){e.removeChild(i),ly(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);ly(t)}function Jd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vO(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tx=Math.random().toString(36).slice(2),cc="__reactFiber$"+tx,fy="__reactProps$"+tx,Tu="__reactContainer$"+tx,VS="__reactEvents$"+tx,eee="__reactListeners$"+tx,tee="__reactHandles$"+tx;function Sf(e){var t=e[cc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Tu]||r[cc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vO(e);e!==null;){if(r=e[cc])return r;e=vO(e)}return t}e=r,r=e.parentNode}return null}function b0(e){return e=e[cc]||e[Tu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _p(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xt(33))}function t2(e){return e[fy]||null}var US=[],Np=-1;function bh(e){return{current:e}}function Cn(e){0>Np||(e.current=US[Np],US[Np]=null,Np--)}function vn(e,t){Np++,US[Np]=e.current,e.current=t}var ch={},Mi=bh(ch),Aa=bh(!1),Vf=ch;function cg(e,t){var r=e.type.contextTypes;if(!r)return ch;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pa(e){return e=e.childContextTypes,e!=null}function J1(){Cn(Aa),Cn(Mi)}function yO(e,t,r){if(Mi.current!==ch)throw Error(xt(168));vn(Mi,t),vn(Aa,r)}function PF(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(xt(108,FJ(e)||"Unknown",i));return Hn({},r,s)}function Q1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ch,Vf=Mi.current,vn(Mi,e),vn(Aa,Aa.current),!0}function bO(e,t,r){var s=e.stateNode;if(!s)throw Error(xt(169));r?(e=PF(e,t,Vf),s.__reactInternalMemoizedMergedChildContext=e,Cn(Aa),Cn(Mi),vn(Mi,e)):Cn(Aa),vn(Aa,r)}var pu=null,r2=!1,IN=!1;function CF(e){pu===null?pu=[e]:pu.push(e)}function ree(e){r2=!0,CF(e)}function jh(){if(!IN&&pu!==null){IN=!0;var e=0,t=tn;try{var r=pu;for(tn=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}pu=null,r2=!1}catch(i){throw pu!==null&&(pu=pu.slice(e+1)),Q$(v4,jh),i}finally{tn=t,IN=!1}}return null}var Sp=[],Ap=0,ej=null,tj=0,Io=[],Ro=0,Uf=null,xu=1,vu="";function df(e,t){Sp[Ap++]=tj,Sp[Ap++]=ej,ej=e,tj=t}function kF(e,t,r){Io[Ro++]=xu,Io[Ro++]=vu,Io[Ro++]=Uf,Uf=e;var s=xu;e=vu;var i=32-Al(s)-1;s&=~(1<<i),r+=1;var a=32-Al(t)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,xu=1<<32-Al(t)+i|r<<i|s,vu=a+e}else xu=1<<a|r<<i|s,vu=e}function P4(e){e.return!==null&&(df(e,1),kF(e,1,0))}function C4(e){for(;e===ej;)ej=Sp[--Ap],Sp[Ap]=null,tj=Sp[--Ap],Sp[Ap]=null;for(;e===Uf;)Uf=Io[--Ro],Io[Ro]=null,vu=Io[--Ro],Io[Ro]=null,xu=Io[--Ro],Io[Ro]=null}var ro=null,eo=null,On=!1,wl=null;function EF(e,t){var r=$o(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function jO(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ro=e,eo=Jd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ro=e,eo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Uf!==null?{id:xu,overflow:vu}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=$o(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ro=e,eo=null,!0):!1;default:return!1}}function HS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function WS(e){if(On){var t=eo;if(t){var r=t;if(!jO(e,t)){if(HS(e))throw Error(xt(418));t=Jd(r.nextSibling);var s=ro;t&&jO(e,t)?EF(s,r):(e.flags=e.flags&-4097|2,On=!1,ro=e)}}else{if(HS(e))throw Error(xt(418));e.flags=e.flags&-4097|2,On=!1,ro=e}}}function wO(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ro=e}function Sb(e){if(e!==ro)return!1;if(!On)return wO(e),On=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!BS(e.type,e.memoizedProps)),t&&(t=eo)){if(HS(e))throw TF(),Error(xt(418));for(;t;)EF(e,t),t=Jd(t.nextSibling)}if(wO(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){eo=Jd(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}eo=null}}else eo=ro?Jd(e.stateNode.nextSibling):null;return!0}function TF(){for(var e=eo;e;)e=Jd(e.nextSibling)}function ug(){eo=ro=null,On=!1}function k4(e){wl===null?wl=[e]:wl.push(e)}var nee=Wu.ReactCurrentBatchConfig;function Jx(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xt(309));var s=r.stateNode}if(!s)throw Error(xt(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(xt(284));if(!r._owner)throw Error(xt(290,e))}return e}function Ab(e,t){throw e=Object.prototype.toString.call(t),Error(xt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _O(e){var t=e._init;return t(e._payload)}function OF(e){function t(j,_){if(e){var w=j.deletions;w===null?(j.deletions=[_],j.flags|=16):w.push(_)}}function r(j,_){if(!e)return null;for(;_!==null;)t(j,_),_=_.sibling;return null}function s(j,_){for(j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function i(j,_){return j=rh(j,_),j.index=0,j.sibling=null,j}function a(j,_,w){return j.index=w,e?(w=j.alternate,w!==null?(w=w.index,w<_?(j.flags|=2,_):w):(j.flags|=2,_)):(j.flags|=1048576,_)}function o(j){return e&&j.alternate===null&&(j.flags|=2),j}function l(j,_,w,A){return _===null||_.tag!==6?(_=qN(w,j.mode,A),_.return=j,_):(_=i(_,w),_.return=j,_)}function c(j,_,w,A){var S=w.type;return S===yp?d(j,_,w.props.children,A,w.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Id&&_O(S)===_.type)?(A=i(_,w.props),A.ref=Jx(j,_,w),A.return=j,A):(A=S1(w.type,w.key,w.props,null,j.mode,A),A.ref=Jx(j,_,w),A.return=j,A)}function u(j,_,w,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=VN(w,j.mode,A),_.return=j,_):(_=i(_,w.children||[]),_.return=j,_)}function d(j,_,w,A,S){return _===null||_.tag!==7?(_=Rf(w,j.mode,A,S),_.return=j,_):(_=i(_,w),_.return=j,_)}function h(j,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=qN(""+_,j.mode,w),_.return=j,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pb:return w=S1(_.type,_.key,_.props,null,j.mode,w),w.ref=Jx(j,null,_),w.return=j,w;case vp:return _=VN(_,j.mode,w),_.return=j,_;case Id:var A=_._init;return h(j,A(_._payload),w)}if(_v(_)||Gx(_))return _=Rf(_,j.mode,w,null),_.return=j,_;Ab(j,_)}return null}function m(j,_,w,A){var S=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(j,_,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pb:return w.key===S?c(j,_,w,A):null;case vp:return w.key===S?u(j,_,w,A):null;case Id:return S=w._init,m(j,_,S(w._payload),A)}if(_v(w)||Gx(w))return S!==null?null:d(j,_,w,A,null);Ab(j,w)}return null}function p(j,_,w,A,S){if(typeof A=="string"&&A!==""||typeof A=="number")return j=j.get(w)||null,l(_,j,""+A,S);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case pb:return j=j.get(A.key===null?w:A.key)||null,c(_,j,A,S);case vp:return j=j.get(A.key===null?w:A.key)||null,u(_,j,A,S);case Id:var P=A._init;return p(j,_,w,P(A._payload),S)}if(_v(A)||Gx(A))return j=j.get(w)||null,d(_,j,A,S,null);Ab(_,A)}return null}function v(j,_,w,A){for(var S=null,P=null,C=_,T=_=0,M=null;C!==null&&T<w.length;T++){C.index>T?(M=C,C=null):M=C.sibling;var z=m(j,C,w[T],A);if(z===null){C===null&&(C=M);break}e&&C&&z.alternate===null&&t(j,C),_=a(z,_,T),P===null?S=z:P.sibling=z,P=z,C=M}if(T===w.length)return r(j,C),On&&df(j,T),S;if(C===null){for(;T<w.length;T++)C=h(j,w[T],A),C!==null&&(_=a(C,_,T),P===null?S=C:P.sibling=C,P=C);return On&&df(j,T),S}for(C=s(j,C);T<w.length;T++)M=p(C,j,T,w[T],A),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?T:M.key),_=a(M,_,T),P===null?S=M:P.sibling=M,P=M);return e&&C.forEach(function(O){return t(j,O)}),On&&df(j,T),S}function g(j,_,w,A){var S=Gx(w);if(typeof S!="function")throw Error(xt(150));if(w=S.call(w),w==null)throw Error(xt(151));for(var P=S=null,C=_,T=_=0,M=null,z=w.next();C!==null&&!z.done;T++,z=w.next()){C.index>T?(M=C,C=null):M=C.sibling;var O=m(j,C,z.value,A);if(O===null){C===null&&(C=M);break}e&&C&&O.alternate===null&&t(j,C),_=a(O,_,T),P===null?S=O:P.sibling=O,P=O,C=M}if(z.done)return r(j,C),On&&df(j,T),S;if(C===null){for(;!z.done;T++,z=w.next())z=h(j,z.value,A),z!==null&&(_=a(z,_,T),P===null?S=z:P.sibling=z,P=z);return On&&df(j,T),S}for(C=s(j,C);!z.done;T++,z=w.next())z=p(C,j,T,z.value,A),z!==null&&(e&&z.alternate!==null&&C.delete(z.key===null?T:z.key),_=a(z,_,T),P===null?S=z:P.sibling=z,P=z);return e&&C.forEach(function(I){return t(j,I)}),On&&df(j,T),S}function y(j,_,w,A){if(typeof w=="object"&&w!==null&&w.type===yp&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case pb:e:{for(var S=w.key,P=_;P!==null;){if(P.key===S){if(S=w.type,S===yp){if(P.tag===7){r(j,P.sibling),_=i(P,w.props.children),_.return=j,j=_;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Id&&_O(S)===P.type){r(j,P.sibling),_=i(P,w.props),_.ref=Jx(j,P,w),_.return=j,j=_;break e}r(j,P);break}else t(j,P);P=P.sibling}w.type===yp?(_=Rf(w.props.children,j.mode,A,w.key),_.return=j,j=_):(A=S1(w.type,w.key,w.props,null,j.mode,A),A.ref=Jx(j,_,w),A.return=j,j=A)}return o(j);case vp:e:{for(P=w.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){r(j,_.sibling),_=i(_,w.children||[]),_.return=j,j=_;break e}else{r(j,_);break}else t(j,_);_=_.sibling}_=VN(w,j.mode,A),_.return=j,j=_}return o(j);case Id:return P=w._init,y(j,_,P(w._payload),A)}if(_v(w))return v(j,_,w,A);if(Gx(w))return g(j,_,w,A);Ab(j,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(r(j,_.sibling),_=i(_,w),_.return=j,j=_):(r(j,_),_=qN(w,j.mode,A),_.return=j,j=_),o(j)):r(j,_)}return y}var dg=OF(!0),LF=OF(!1),rj=bh(null),nj=null,Pp=null,E4=null;function T4(){E4=Pp=nj=null}function O4(e){var t=rj.current;Cn(rj),e._currentValue=t}function GS(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Wp(e,t){nj=e,E4=Pp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Na=!0),e.firstContext=null)}function qo(e){var t=e._currentValue;if(E4!==e)if(e={context:e,memoizedValue:t,next:null},Pp===null){if(nj===null)throw Error(xt(308));Pp=e,nj.dependencies={lanes:0,firstContext:e}}else Pp=Pp.next=e;return t}var Af=null;function L4(e){Af===null?Af=[e]:Af.push(e)}function MF(e,t,r,s){var i=t.interleaved;return i===null?(r.next=r,L4(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ou(e,s)}function Ou(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Rd=!1;function M4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Nu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qd(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Lr&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,Ou(e,r)}return i=s.interleaved,i===null?(t.next=t,L4(s)):(t.next=i.next,i.next=t),s.interleaved=t,Ou(e,r)}function y1(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,y4(e,r)}}function NO(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function sj(e,t,r,s){var i=e.updateQueue;Rd=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,d=u=c=null,l=a;do{var m=l.lane,p=l.eventTime;if((s&m)===m){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,g=l;switch(m=t,p=r,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(p,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,m=typeof v=="function"?v.call(p,h,m):v,m==null)break e;h=Hn({},h,m);break e;case 2:Rd=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(c=h),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Wf|=o,e.lanes=o,e.memoizedState=h}}function SO(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(xt(191,i));i.call(s)}}}var j0={},gc=bh(j0),my=bh(j0),py=bh(j0);function Pf(e){if(e===j0)throw Error(xt(174));return e}function I4(e,t){switch(vn(py,t),vn(my,e),vn(gc,j0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:PS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=PS(t,e)}Cn(gc),vn(gc,t)}function hg(){Cn(gc),Cn(my),Cn(py)}function RF(e){Pf(py.current);var t=Pf(gc.current),r=PS(t,e.type);t!==r&&(vn(my,e),vn(gc,r))}function R4(e){my.current===e&&(Cn(gc),Cn(my))}var $n=bh(0);function ij(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var RN=[];function D4(){for(var e=0;e<RN.length;e++)RN[e]._workInProgressVersionPrimary=null;RN.length=0}var b1=Wu.ReactCurrentDispatcher,DN=Wu.ReactCurrentBatchConfig,Hf=0,qn=null,Ls=null,Ws=null,aj=!1,Rv=!1,gy=0,see=0;function bi(){throw Error(xt(321))}function $4(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!El(e[r],t[r]))return!1;return!0}function F4(e,t,r,s,i,a){if(Hf=a,qn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,b1.current=e===null||e.memoizedState===null?lee:cee,e=r(s,i),Rv){a=0;do{if(Rv=!1,gy=0,25<=a)throw Error(xt(301));a+=1,Ws=Ls=null,t.updateQueue=null,b1.current=uee,e=r(s,i)}while(Rv)}if(b1.current=oj,t=Ls!==null&&Ls.next!==null,Hf=0,Ws=Ls=qn=null,aj=!1,t)throw Error(xt(300));return e}function z4(){var e=gy!==0;return gy=0,e}function oc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?qn.memoizedState=Ws=e:Ws=Ws.next=e,Ws}function Vo(){if(Ls===null){var e=qn.alternate;e=e!==null?e.memoizedState:null}else e=Ls.next;var t=Ws===null?qn.memoizedState:Ws.next;if(t!==null)Ws=t,Ls=e;else{if(e===null)throw Error(xt(310));Ls=e,e={memoizedState:Ls.memoizedState,baseState:Ls.baseState,baseQueue:Ls.baseQueue,queue:Ls.queue,next:null},Ws===null?qn.memoizedState=Ws=e:Ws=Ws.next=e}return Ws}function xy(e,t){return typeof t=="function"?t(e):t}function $N(e){var t=Vo(),r=t.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=e;var s=Ls,i=s.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Hf&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,qn.lanes|=d,Wf|=d}u=u.next}while(u!==null&&u!==a);c===null?o=s:c.next=l,El(s,t.memoizedState)||(Na=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){i=e;do a=i.lane,qn.lanes|=a,Wf|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function FN(e){var t=Vo(),r=t.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=e;var s=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);El(a,t.memoizedState)||(Na=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function DF(){}function $F(e,t){var r=qn,s=Vo(),i=t(),a=!El(s.memoizedState,i);if(a&&(s.memoizedState=i,Na=!0),s=s.queue,B4(BF.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Ws!==null&&Ws.memoizedState.tag&1){if(r.flags|=2048,vy(9,zF.bind(null,r,s,i,t),void 0,null),Xs===null)throw Error(xt(349));Hf&30||FF(r,t,i)}return i}function FF(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=qn.updateQueue,t===null?(t={lastEffect:null,stores:null},qn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function zF(e,t,r,s){t.value=r,t.getSnapshot=s,qF(t)&&VF(e)}function BF(e,t,r){return r(function(){qF(t)&&VF(e)})}function qF(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!El(e,r)}catch{return!0}}function VF(e){var t=Ou(e,1);t!==null&&Pl(t,e,1,-1)}function AO(e){var t=oc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xy,lastRenderedState:e},t.queue=e,e=e.dispatch=oee.bind(null,qn,e),[t.memoizedState,e]}function vy(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=qn.updateQueue,t===null?(t={lastEffect:null,stores:null},qn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function UF(){return Vo().memoizedState}function j1(e,t,r,s){var i=oc();qn.flags|=e,i.memoizedState=vy(1|t,r,void 0,s===void 0?null:s)}function n2(e,t,r,s){var i=Vo();s=s===void 0?null:s;var a=void 0;if(Ls!==null){var o=Ls.memoizedState;if(a=o.destroy,s!==null&&$4(s,o.deps)){i.memoizedState=vy(t,r,a,s);return}}qn.flags|=e,i.memoizedState=vy(1|t,r,a,s)}function PO(e,t){return j1(8390656,8,e,t)}function B4(e,t){return n2(2048,8,e,t)}function HF(e,t){return n2(4,2,e,t)}function WF(e,t){return n2(4,4,e,t)}function GF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function KF(e,t,r){return r=r!=null?r.concat([e]):null,n2(4,4,GF.bind(null,t,e),r)}function q4(){}function ZF(e,t){var r=Vo();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&$4(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function XF(e,t){var r=Vo();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&$4(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function YF(e,t,r){return Hf&21?(El(r,t)||(r=rF(),qn.lanes|=r,Wf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Na=!0),e.memoizedState=r)}function iee(e,t){var r=tn;tn=r!==0&&4>r?r:4,e(!0);var s=DN.transition;DN.transition={};try{e(!1),t()}finally{tn=r,DN.transition=s}}function JF(){return Vo().memoizedState}function aee(e,t,r){var s=th(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},QF(e))e7(t,r);else if(r=MF(e,t,r,s),r!==null){var i=ra();Pl(r,e,s,i),t7(r,t,s)}}function oee(e,t,r){var s=th(e),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(QF(e))e7(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,El(l,o)){var c=t.interleaved;c===null?(i.next=i,L4(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=MF(e,t,i,s),r!==null&&(i=ra(),Pl(r,e,s,i),t7(r,t,s))}}function QF(e){var t=e.alternate;return e===qn||t!==null&&t===qn}function e7(e,t){Rv=aj=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function t7(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,y4(e,r)}}var oj={readContext:qo,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},lee={readContext:qo,useCallback:function(e,t){return oc().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:PO,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,j1(4194308,4,GF.bind(null,t,e),r)},useLayoutEffect:function(e,t){return j1(4194308,4,e,t)},useInsertionEffect:function(e,t){return j1(4,2,e,t)},useMemo:function(e,t){var r=oc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=oc();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=aee.bind(null,qn,e),[s.memoizedState,e]},useRef:function(e){var t=oc();return e={current:e},t.memoizedState=e},useState:AO,useDebugValue:q4,useDeferredValue:function(e){return oc().memoizedState=e},useTransition:function(){var e=AO(!1),t=e[0];return e=iee.bind(null,e[1]),oc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=qn,i=oc();if(On){if(r===void 0)throw Error(xt(407));r=r()}else{if(r=t(),Xs===null)throw Error(xt(349));Hf&30||FF(s,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,PO(BF.bind(null,s,a,e),[e]),s.flags|=2048,vy(9,zF.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=oc(),t=Xs.identifierPrefix;if(On){var r=vu,s=xu;r=(s&~(1<<32-Al(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=gy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=see++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cee={readContext:qo,useCallback:ZF,useContext:qo,useEffect:B4,useImperativeHandle:KF,useInsertionEffect:HF,useLayoutEffect:WF,useMemo:XF,useReducer:$N,useRef:UF,useState:function(){return $N(xy)},useDebugValue:q4,useDeferredValue:function(e){var t=Vo();return YF(t,Ls.memoizedState,e)},useTransition:function(){var e=$N(xy)[0],t=Vo().memoizedState;return[e,t]},useMutableSource:DF,useSyncExternalStore:$F,useId:JF,unstable_isNewReconciler:!1},uee={readContext:qo,useCallback:ZF,useContext:qo,useEffect:B4,useImperativeHandle:KF,useInsertionEffect:HF,useLayoutEffect:WF,useMemo:XF,useReducer:FN,useRef:UF,useState:function(){return FN(xy)},useDebugValue:q4,useDeferredValue:function(e){var t=Vo();return Ls===null?t.memoizedState=e:YF(t,Ls.memoizedState,e)},useTransition:function(){var e=FN(xy)[0],t=Vo().memoizedState;return[e,t]},useMutableSource:DF,useSyncExternalStore:$F,useId:JF,unstable_isNewReconciler:!1};function pl(e,t){if(e&&e.defaultProps){t=Hn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function KS(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Hn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var s2={isMounted:function(e){return(e=e._reactInternals)?hm(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ra(),i=th(e),a=Nu(s,i);a.payload=t,r!=null&&(a.callback=r),t=Qd(e,a,i),t!==null&&(Pl(t,e,i,s),y1(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ra(),i=th(e),a=Nu(s,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Qd(e,a,i),t!==null&&(Pl(t,e,i,s),y1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ra(),s=th(e),i=Nu(r,s);i.tag=2,t!=null&&(i.callback=t),t=Qd(e,i,s),t!==null&&(Pl(t,e,s,r),y1(t,e,s))}};function CO(e,t,r,s,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!uy(r,s)||!uy(i,a):!0}function r7(e,t,r){var s=!1,i=ch,a=t.contextType;return typeof a=="object"&&a!==null?a=qo(a):(i=Pa(t)?Vf:Mi.current,s=t.contextTypes,a=(s=s!=null)?cg(e,i):ch),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=s2,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function kO(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&s2.enqueueReplaceState(t,t.state,null)}function ZS(e,t,r,s){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},M4(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=qo(a):(a=Pa(t)?Vf:Mi.current,i.context=cg(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(KS(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&s2.enqueueReplaceState(i,i.state,null),sj(e,r,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function fg(e,t){try{var r="",s=t;do r+=$J(s),s=s.return;while(s);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function zN(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function XS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dee=typeof WeakMap=="function"?WeakMap:Map;function n7(e,t,r){r=Nu(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){cj||(cj=!0,aA=s),XS(e,t)},r}function s7(e,t,r){r=Nu(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){XS(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){XS(e,t),typeof s!="function"&&(eh===null?eh=new Set([this]):eh.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function EO(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new dee;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),e=See.bind(null,e,t,r),t.then(e,e))}function TO(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OO(e,t,r,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Nu(-1,1),t.tag=2,Qd(r,t,1))),r.lanes|=1),e)}var hee=Wu.ReactCurrentOwner,Na=!1;function Ji(e,t,r,s){t.child=e===null?LF(t,null,r,s):dg(t,e.child,r,s)}function LO(e,t,r,s,i){r=r.render;var a=t.ref;return Wp(t,i),s=F4(e,t,r,s,a,i),r=z4(),e!==null&&!Na?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lu(e,t,i)):(On&&r&&P4(t),t.flags|=1,Ji(e,t,s,i),t.child)}function MO(e,t,r,s,i){if(e===null){var a=r.type;return typeof a=="function"&&!X4(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,i7(e,t,a,s,i)):(e=S1(r.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:uy,r(o,s)&&e.ref===t.ref)return Lu(e,t,i)}return t.flags|=1,e=rh(a,s),e.ref=t.ref,e.return=t,t.child=e}function i7(e,t,r,s,i){if(e!==null){var a=e.memoizedProps;if(uy(a,s)&&e.ref===t.ref)if(Na=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(Na=!0);else return t.lanes=e.lanes,Lu(e,t,i)}return YS(e,t,r,s,i)}function a7(e,t,r){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(kp,Xa),Xa|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vn(kp,Xa),Xa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,vn(kp,Xa),Xa|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,vn(kp,Xa),Xa|=s;return Ji(e,t,i,r),t.child}function o7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function YS(e,t,r,s,i){var a=Pa(r)?Vf:Mi.current;return a=cg(t,a),Wp(t,i),r=F4(e,t,r,s,a,i),s=z4(),e!==null&&!Na?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lu(e,t,i)):(On&&s&&P4(t),t.flags|=1,Ji(e,t,r,i),t.child)}function IO(e,t,r,s,i){if(Pa(r)){var a=!0;Q1(t)}else a=!1;if(Wp(t,i),t.stateNode===null)w1(e,t),r7(t,r,s),ZS(t,r,s,i),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=qo(u):(u=Pa(r)?Vf:Mi.current,u=cg(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&kO(t,o,s,u),Rd=!1;var m=t.memoizedState;o.state=m,sj(t,s,o,i),c=t.memoizedState,l!==s||m!==c||Aa.current||Rd?(typeof d=="function"&&(KS(t,r,d,s),c=t.memoizedState),(l=Rd||CO(t,r,l,s,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,IF(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:pl(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=qo(c):(c=Pa(r)?Vf:Mi.current,c=cg(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&kO(t,o,s,c),Rd=!1,m=t.memoizedState,o.state=m,sj(t,s,o,i);var v=t.memoizedState;l!==h||m!==v||Aa.current||Rd?(typeof p=="function"&&(KS(t,r,p,s),v=t.memoizedState),(u=Rd||CO(t,r,u,s,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),o.props=s,o.state=v,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return JS(e,t,r,s,a,i)}function JS(e,t,r,s,i,a){o7(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&bO(t,r,!1),Lu(e,t,a);s=t.stateNode,hee.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=dg(t,e.child,null,a),t.child=dg(t,null,l,a)):Ji(e,t,l,a),t.memoizedState=s.state,i&&bO(t,r,!0),t.child}function l7(e){var t=e.stateNode;t.pendingContext?yO(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yO(e,t.context,!1),I4(e,t.containerInfo)}function RO(e,t,r,s,i){return ug(),k4(i),t.flags|=256,Ji(e,t,r,s),t.child}var QS={dehydrated:null,treeContext:null,retryLane:0};function eA(e){return{baseLanes:e,cachePool:null,transitions:null}}function c7(e,t,r){var s=t.pendingProps,i=$n.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),vn($n,i&1),e===null)return WS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=o2(o,s,0,null),e=Rf(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=eA(r),t.memoizedState=QS,e):V4(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fee(e,t,o,s,l,i,r);if(a){a=s.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=rh(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=rh(l,a):(a=Rf(a,o,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?eA(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=QS,s}return a=e.child,e=a.sibling,s=rh(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function V4(e,t){return t=o2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Pb(e,t,r,s){return s!==null&&k4(s),dg(t,e.child,null,r),e=V4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fee(e,t,r,s,i,a,o){if(r)return t.flags&256?(t.flags&=-257,s=zN(Error(xt(422))),Pb(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=o2({mode:"visible",children:s.children},i,0,null),a=Rf(a,i,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&dg(t,e.child,null,o),t.child.memoizedState=eA(o),t.memoizedState=QS,a);if(!(t.mode&1))return Pb(e,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(xt(419)),s=zN(a,s,void 0),Pb(e,t,o,s)}if(l=(o&e.childLanes)!==0,Na||l){if(s=Xs,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ou(e,i),Pl(s,e,i,-1))}return Z4(),s=zN(Error(xt(421))),Pb(e,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Aee.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,eo=Jd(i.nextSibling),ro=t,On=!0,wl=null,e!==null&&(Io[Ro++]=xu,Io[Ro++]=vu,Io[Ro++]=Uf,xu=e.id,vu=e.overflow,Uf=t),t=V4(t,s.children),t.flags|=4096,t)}function DO(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),GS(e.return,t,r)}function BN(e,t,r,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=i)}function u7(e,t,r){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(Ji(e,t,s.children,r),s=$n.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&DO(e,r,t);else if(e.tag===19)DO(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(vn($n,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&ij(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),BN(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ij(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}BN(t,!0,r,null,a);break;case"together":BN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function w1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Wf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xt(153));if(t.child!==null){for(e=t.child,r=rh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=rh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function mee(e,t,r){switch(t.tag){case 3:l7(t),ug();break;case 5:RF(t);break;case 1:Pa(t.type)&&Q1(t);break;case 4:I4(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;vn(rj,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(vn($n,$n.current&1),t.flags|=128,null):r&t.child.childLanes?c7(e,t,r):(vn($n,$n.current&1),e=Lu(e,t,r),e!==null?e.sibling:null);vn($n,$n.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return u7(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vn($n,$n.current),s)break;return null;case 22:case 23:return t.lanes=0,a7(e,t,r)}return Lu(e,t,r)}var d7,tA,h7,f7;d7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tA=function(){};h7=function(e,t,r,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Pf(gc.current);var a=null;switch(r){case"input":i=_S(e,i),s=_S(e,s),a=[];break;case"select":i=Hn({},i,{value:void 0}),s=Hn({},s,{value:void 0}),a=[];break;case"textarea":i=AS(e,i),s=AS(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Y1)}CS(r,s);var o;r=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ny.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ny.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Nn("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};f7=function(e,t,r,s){r!==s&&(t.flags|=4)};function Qx(e,t){if(!On)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ji(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function pee(e,t,r){var s=t.pendingProps;switch(C4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(t),null;case 1:return Pa(t.type)&&J1(),ji(t),null;case 3:return s=t.stateNode,hg(),Cn(Aa),Cn(Mi),D4(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Sb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wl!==null&&(cA(wl),wl=null))),tA(e,t),ji(t),null;case 5:R4(t);var i=Pf(py.current);if(r=t.type,e!==null&&t.stateNode!=null)h7(e,t,r,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(xt(166));return ji(t),null}if(e=Pf(gc.current),Sb(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[cc]=t,s[fy]=a,e=(t.mode&1)!==0,r){case"dialog":Nn("cancel",s),Nn("close",s);break;case"iframe":case"object":case"embed":Nn("load",s);break;case"video":case"audio":for(i=0;i<Sv.length;i++)Nn(Sv[i],s);break;case"source":Nn("error",s);break;case"img":case"image":case"link":Nn("error",s),Nn("load",s);break;case"details":Nn("toggle",s);break;case"input":W3(s,a),Nn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Nn("invalid",s);break;case"textarea":K3(s,a),Nn("invalid",s)}CS(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&Nb(s.textContent,l,e),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Nb(s.textContent,l,e),i=["children",""+l]):ny.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Nn("scroll",s)}switch(r){case"input":gb(s),G3(s,a,!0);break;case"textarea":gb(s),Z3(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Y1)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B$(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[cc]=t,e[fy]=s,d7(e,t,!1,!1),t.stateNode=e;e:{switch(o=kS(r,s),r){case"dialog":Nn("cancel",e),Nn("close",e),i=s;break;case"iframe":case"object":case"embed":Nn("load",e),i=s;break;case"video":case"audio":for(i=0;i<Sv.length;i++)Nn(Sv[i],e);i=s;break;case"source":Nn("error",e),i=s;break;case"img":case"image":case"link":Nn("error",e),Nn("load",e),i=s;break;case"details":Nn("toggle",e),i=s;break;case"input":W3(e,s),i=_S(e,s),Nn("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=Hn({},s,{value:void 0}),Nn("invalid",e);break;case"textarea":K3(e,s),i=AS(e,s),Nn("invalid",e);break;default:i=s}CS(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?U$(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&q$(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&sy(e,c):typeof c=="number"&&sy(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ny.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Nn("scroll",e):c!=null&&f4(e,a,c,o))}switch(r){case"input":gb(e),G3(e,s,!1);break;case"textarea":gb(e),Z3(e);break;case"option":s.value!=null&&e.setAttribute("value",""+lh(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?qp(e,!!s.multiple,a,!1):s.defaultValue!=null&&qp(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Y1)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ji(t),null;case 6:if(e&&t.stateNode!=null)f7(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(xt(166));if(r=Pf(py.current),Pf(gc.current),Sb(t)){if(s=t.stateNode,r=t.memoizedProps,s[cc]=t,(a=s.nodeValue!==r)&&(e=ro,e!==null))switch(e.tag){case 3:Nb(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nb(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[cc]=t,t.stateNode=s}return ji(t),null;case 13:if(Cn($n),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(On&&eo!==null&&t.mode&1&&!(t.flags&128))TF(),ug(),t.flags|=98560,a=!1;else if(a=Sb(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(xt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(xt(317));a[cc]=t}else ug(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ji(t),a=!1}else wl!==null&&(cA(wl),wl=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||$n.current&1?Is===0&&(Is=3):Z4())),t.updateQueue!==null&&(t.flags|=4),ji(t),null);case 4:return hg(),tA(e,t),e===null&&dy(t.stateNode.containerInfo),ji(t),null;case 10:return O4(t.type._context),ji(t),null;case 17:return Pa(t.type)&&J1(),ji(t),null;case 19:if(Cn($n),a=t.memoizedState,a===null)return ji(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)Qx(a,!1);else{if(Is!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ij(e),o!==null){for(t.flags|=128,Qx(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return vn($n,$n.current&1|2),t.child}e=e.sibling}a.tail!==null&&os()>mg&&(t.flags|=128,s=!0,Qx(a,!1),t.lanes=4194304)}else{if(!s)if(e=ij(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qx(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!On)return ji(t),null}else 2*os()-a.renderingStartTime>mg&&r!==1073741824&&(t.flags|=128,s=!0,Qx(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=os(),t.sibling=null,r=$n.current,vn($n,s?r&1|2:r&1),t):(ji(t),null);case 22:case 23:return K4(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Xa&1073741824&&(ji(t),t.subtreeFlags&6&&(t.flags|=8192)):ji(t),null;case 24:return null;case 25:return null}throw Error(xt(156,t.tag))}function gee(e,t){switch(C4(t),t.tag){case 1:return Pa(t.type)&&J1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hg(),Cn(Aa),Cn(Mi),D4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return R4(t),null;case 13:if(Cn($n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xt(340));ug()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cn($n),null;case 4:return hg(),null;case 10:return O4(t.type._context),null;case 22:case 23:return K4(),null;case 24:return null;default:return null}}var Cb=!1,Ci=!1,xee=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Cp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Jn(e,t,s)}else r.current=null}function rA(e,t,r){try{r()}catch(s){Jn(e,t,s)}}var $O=!1;function vee(e,t){if(FS=K1,e=vF(),A4(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==r||i!==0&&h.nodeType!==3||(l=o+i),h!==a||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++u===i&&(l=o),m===a&&++d===s&&(c=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(zS={focusedElem:e,selectionRange:r},K1=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){t=Lt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,j=t.stateNode,_=j.getSnapshotBeforeUpdate(t.elementType===t.type?g:pl(t.type,g),y);j.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xt(163))}}catch(A){Jn(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}return v=$O,$O=!1,v}function Dv(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&rA(t,r,a)}i=i.next}while(i!==s)}}function i2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function nA(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function m7(e){var t=e.alternate;t!==null&&(e.alternate=null,m7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cc],delete t[fy],delete t[VS],delete t[eee],delete t[tee])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function p7(e){return e.tag===5||e.tag===3||e.tag===4}function FO(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||p7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sA(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Y1));else if(s!==4&&(e=e.child,e!==null))for(sA(e,t,r),e=e.sibling;e!==null;)sA(e,t,r),e=e.sibling}function iA(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(iA(e,t,r),e=e.sibling;e!==null;)iA(e,t,r),e=e.sibling}var ai=null,xl=!1;function Ad(e,t,r){for(r=r.child;r!==null;)g7(e,t,r),r=r.sibling}function g7(e,t,r){if(pc&&typeof pc.onCommitFiberUnmount=="function")try{pc.onCommitFiberUnmount(Yw,r)}catch{}switch(r.tag){case 5:Ci||Cp(r,t);case 6:var s=ai,i=xl;ai=null,Ad(e,t,r),ai=s,xl=i,ai!==null&&(xl?(e=ai,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ai.removeChild(r.stateNode));break;case 18:ai!==null&&(xl?(e=ai,r=r.stateNode,e.nodeType===8?MN(e.parentNode,r):e.nodeType===1&&MN(e,r),ly(e)):MN(ai,r.stateNode));break;case 4:s=ai,i=xl,ai=r.stateNode.containerInfo,xl=!0,Ad(e,t,r),ai=s,xl=i;break;case 0:case 11:case 14:case 15:if(!Ci&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&rA(r,t,o),i=i.next}while(i!==s)}Ad(e,t,r);break;case 1:if(!Ci&&(Cp(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Jn(r,t,l)}Ad(e,t,r);break;case 21:Ad(e,t,r);break;case 22:r.mode&1?(Ci=(s=Ci)||r.memoizedState!==null,Ad(e,t,r),Ci=s):Ad(e,t,r);break;default:Ad(e,t,r)}}function zO(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xee),t.forEach(function(s){var i=Pee.bind(null,e,s);r.has(s)||(r.add(s),s.then(i,i))})}}function ll(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ai=l.stateNode,xl=!1;break e;case 3:ai=l.stateNode.containerInfo,xl=!0;break e;case 4:ai=l.stateNode.containerInfo,xl=!0;break e}l=l.return}if(ai===null)throw Error(xt(160));g7(a,o,i),ai=null,xl=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Jn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x7(t,e),t=t.sibling}function x7(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ll(t,e),ic(e),s&4){try{Dv(3,e,e.return),i2(3,e)}catch(g){Jn(e,e.return,g)}try{Dv(5,e,e.return)}catch(g){Jn(e,e.return,g)}}break;case 1:ll(t,e),ic(e),s&512&&r!==null&&Cp(r,r.return);break;case 5:if(ll(t,e),ic(e),s&512&&r!==null&&Cp(r,r.return),e.flags&32){var i=e.stateNode;try{sy(i,"")}catch(g){Jn(e,e.return,g)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&F$(i,a),kS(l,o);var u=kS(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?U$(i,h):d==="dangerouslySetInnerHTML"?q$(i,h):d==="children"?sy(i,h):f4(i,d,h,u)}switch(l){case"input":NS(i,a);break;case"textarea":z$(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?qp(i,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?qp(i,!!a.multiple,a.defaultValue,!0):qp(i,!!a.multiple,a.multiple?[]:"",!1))}i[fy]=a}catch(g){Jn(e,e.return,g)}}break;case 6:if(ll(t,e),ic(e),s&4){if(e.stateNode===null)throw Error(xt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Jn(e,e.return,g)}}break;case 3:if(ll(t,e),ic(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ly(t.containerInfo)}catch(g){Jn(e,e.return,g)}break;case 4:ll(t,e),ic(e);break;case 13:ll(t,e),ic(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(W4=os())),s&4&&zO(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ci=(u=Ci)||d,ll(t,e),Ci=u):ll(t,e),ic(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Lt=e,d=e.child;d!==null;){for(h=Lt=d;Lt!==null;){switch(m=Lt,p=m.child,m.tag){case 0:case 11:case 14:case 15:Dv(4,m,m.return);break;case 1:Cp(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Jn(s,r,g)}}break;case 5:Cp(m,m.return);break;case 22:if(m.memoizedState!==null){qO(h);continue}}p!==null?(p.return=m,Lt=p):qO(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=V$("display",o))}catch(g){Jn(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Jn(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ll(t,e),ic(e),s&4&&zO(e);break;case 21:break;default:ll(t,e),ic(e)}}function ic(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(p7(r)){var s=r;break e}r=r.return}throw Error(xt(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(sy(i,""),s.flags&=-33);var a=FO(e);iA(e,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=FO(e);sA(e,l,o);break;default:throw Error(xt(161))}}catch(c){Jn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yee(e,t,r){Lt=e,v7(e)}function v7(e,t,r){for(var s=(e.mode&1)!==0;Lt!==null;){var i=Lt,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Cb;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ci;l=Cb;var u=Ci;if(Cb=o,(Ci=c)&&!u)for(Lt=i;Lt!==null;)o=Lt,c=o.child,o.tag===22&&o.memoizedState!==null?VO(i):c!==null?(c.return=o,Lt=c):VO(i);for(;a!==null;)Lt=a,v7(a),a=a.sibling;Lt=i,Cb=l,Ci=u}BO(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Lt=a):BO(e)}}function BO(e){for(;Lt!==null;){var t=Lt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ci||i2(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ci)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:pl(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&SO(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}SO(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ly(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xt(163))}Ci||t.flags&512&&nA(t)}catch(m){Jn(t,t.return,m)}}if(t===e){Lt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Lt=r;break}Lt=t.return}}function qO(e){for(;Lt!==null;){var t=Lt;if(t===e){Lt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Lt=r;break}Lt=t.return}}function VO(e){for(;Lt!==null;){var t=Lt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{i2(4,t)}catch(c){Jn(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Jn(t,i,c)}}var a=t.return;try{nA(t)}catch(c){Jn(t,a,c)}break;case 5:var o=t.return;try{nA(t)}catch(c){Jn(t,o,c)}}}catch(c){Jn(t,t.return,c)}if(t===e){Lt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Lt=l;break}Lt=t.return}}var bee=Math.ceil,lj=Wu.ReactCurrentDispatcher,U4=Wu.ReactCurrentOwner,zo=Wu.ReactCurrentBatchConfig,Lr=0,Xs=null,ys=null,ci=0,Xa=0,kp=bh(0),Is=0,yy=null,Wf=0,a2=0,H4=0,$v=null,wa=null,W4=0,mg=1/0,du=null,cj=!1,aA=null,eh=null,kb=!1,Ud=null,uj=0,Fv=0,oA=null,_1=-1,N1=0;function ra(){return Lr&6?os():_1!==-1?_1:_1=os()}function th(e){return e.mode&1?Lr&2&&ci!==0?ci&-ci:nee.transition!==null?(N1===0&&(N1=rF()),N1):(e=tn,e!==0||(e=window.event,e=e===void 0?16:cF(e.type)),e):1}function Pl(e,t,r,s){if(50<Fv)throw Fv=0,oA=null,Error(xt(185));v0(e,r,s),(!(Lr&2)||e!==Xs)&&(e===Xs&&(!(Lr&2)&&(a2|=r),Is===4&&zd(e,ci)),Ca(e,s),r===1&&Lr===0&&!(t.mode&1)&&(mg=os()+500,r2&&jh()))}function Ca(e,t){var r=e.callbackNode;nQ(e,t);var s=G1(e,e===Xs?ci:0);if(s===0)r!==null&&J3(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&J3(r),t===1)e.tag===0?ree(UO.bind(null,e)):CF(UO.bind(null,e)),JQ(function(){!(Lr&6)&&jh()}),r=null;else{switch(nF(s)){case 1:r=v4;break;case 4:r=eF;break;case 16:r=W1;break;case 536870912:r=tF;break;default:r=W1}r=A7(r,y7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function y7(e,t){if(_1=-1,N1=0,Lr&6)throw Error(xt(327));var r=e.callbackNode;if(Gp()&&e.callbackNode!==r)return null;var s=G1(e,e===Xs?ci:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=dj(e,s);else{t=s;var i=Lr;Lr|=2;var a=j7();(Xs!==e||ci!==t)&&(du=null,mg=os()+500,If(e,t));do try{_ee();break}catch(l){b7(e,l)}while(1);T4(),lj.current=a,Lr=i,ys!==null?t=0:(Xs=null,ci=0,t=Is)}if(t!==0){if(t===2&&(i=MS(e),i!==0&&(s=i,t=lA(e,i))),t===1)throw r=yy,If(e,0),zd(e,s),Ca(e,os()),r;if(t===6)zd(e,s);else{if(i=e.current.alternate,!(s&30)&&!jee(i)&&(t=dj(e,s),t===2&&(a=MS(e),a!==0&&(s=a,t=lA(e,a))),t===1))throw r=yy,If(e,0),zd(e,s),Ca(e,os()),r;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(xt(345));case 2:hf(e,wa,du);break;case 3:if(zd(e,s),(s&130023424)===s&&(t=W4+500-os(),10<t)){if(G1(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){ra(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qS(hf.bind(null,e,wa,du),t);break}hf(e,wa,du);break;case 4:if(zd(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-Al(s);a=1<<o,o=t[o],o>i&&(i=o),s&=~a}if(s=i,s=os()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*bee(s/1960))-s,10<s){e.timeoutHandle=qS(hf.bind(null,e,wa,du),s);break}hf(e,wa,du);break;case 5:hf(e,wa,du);break;default:throw Error(xt(329))}}}return Ca(e,os()),e.callbackNode===r?y7.bind(null,e):null}function lA(e,t){var r=$v;return e.current.memoizedState.isDehydrated&&(If(e,t).flags|=256),e=dj(e,t),e!==2&&(t=wa,wa=r,t!==null&&cA(t)),e}function cA(e){wa===null?wa=e:wa.push.apply(wa,e)}function jee(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],a=i.getSnapshot;i=i.value;try{if(!El(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zd(e,t){for(t&=~H4,t&=~a2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Al(t),s=1<<r;e[r]=-1,t&=~s}}function UO(e){if(Lr&6)throw Error(xt(327));Gp();var t=G1(e,0);if(!(t&1))return Ca(e,os()),null;var r=dj(e,t);if(e.tag!==0&&r===2){var s=MS(e);s!==0&&(t=s,r=lA(e,s))}if(r===1)throw r=yy,If(e,0),zd(e,t),Ca(e,os()),r;if(r===6)throw Error(xt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hf(e,wa,du),Ca(e,os()),null}function G4(e,t){var r=Lr;Lr|=1;try{return e(t)}finally{Lr=r,Lr===0&&(mg=os()+500,r2&&jh())}}function Gf(e){Ud!==null&&Ud.tag===0&&!(Lr&6)&&Gp();var t=Lr;Lr|=1;var r=zo.transition,s=tn;try{if(zo.transition=null,tn=1,e)return e()}finally{tn=s,zo.transition=r,Lr=t,!(Lr&6)&&jh()}}function K4(){Xa=kp.current,Cn(kp)}function If(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,YQ(r)),ys!==null)for(r=ys.return;r!==null;){var s=r;switch(C4(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&J1();break;case 3:hg(),Cn(Aa),Cn(Mi),D4();break;case 5:R4(s);break;case 4:hg();break;case 13:Cn($n);break;case 19:Cn($n);break;case 10:O4(s.type._context);break;case 22:case 23:K4()}r=r.return}if(Xs=e,ys=e=rh(e.current,null),ci=Xa=t,Is=0,yy=null,H4=a2=Wf=0,wa=$v=null,Af!==null){for(t=0;t<Af.length;t++)if(r=Af[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}r.pending=s}Af=null}return e}function b7(e,t){do{var r=ys;try{if(T4(),b1.current=oj,aj){for(var s=qn.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}aj=!1}if(Hf=0,Ws=Ls=qn=null,Rv=!1,gy=0,U4.current=null,r===null||r.return===null){Is=1,yy=t,ys=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=ci,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=TO(o);if(p!==null){p.flags&=-257,OO(p,o,l,a,t),p.mode&1&&EO(a,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){EO(a,u,t),Z4();break e}c=Error(xt(426))}}else if(On&&l.mode&1){var y=TO(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),OO(y,o,l,a,t),k4(fg(c,l));break e}}a=c=fg(c,l),Is!==4&&(Is=2),$v===null?$v=[a]:$v.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var j=n7(a,c,t);NO(a,j);break e;case 1:l=c;var _=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(eh===null||!eh.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var A=s7(a,l,t);NO(a,A);break e}}a=a.return}while(a!==null)}_7(r)}catch(S){t=S,ys===r&&r!==null&&(ys=r=r.return);continue}break}while(1)}function j7(){var e=lj.current;return lj.current=oj,e===null?oj:e}function Z4(){(Is===0||Is===3||Is===2)&&(Is=4),Xs===null||!(Wf&268435455)&&!(a2&268435455)||zd(Xs,ci)}function dj(e,t){var r=Lr;Lr|=2;var s=j7();(Xs!==e||ci!==t)&&(du=null,If(e,t));do try{wee();break}catch(i){b7(e,i)}while(1);if(T4(),Lr=r,lj.current=s,ys!==null)throw Error(xt(261));return Xs=null,ci=0,Is}function wee(){for(;ys!==null;)w7(ys)}function _ee(){for(;ys!==null&&!KJ();)w7(ys)}function w7(e){var t=S7(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,t===null?_7(e):ys=t,U4.current=null}function _7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gee(r,t),r!==null){r.flags&=32767,ys=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Is=6,ys=null;return}}else if(r=pee(r,t,Xa),r!==null){ys=r;return}if(t=t.sibling,t!==null){ys=t;return}ys=t=e}while(t!==null);Is===0&&(Is=5)}function hf(e,t,r){var s=tn,i=zo.transition;try{zo.transition=null,tn=1,Nee(e,t,r,s)}finally{zo.transition=i,tn=s}return null}function Nee(e,t,r,s){do Gp();while(Ud!==null);if(Lr&6)throw Error(xt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(xt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(sQ(e,a),e===Xs&&(ys=Xs=null,ci=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kb||(kb=!0,A7(W1,function(){return Gp(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=zo.transition,zo.transition=null;var o=tn;tn=1;var l=Lr;Lr|=4,U4.current=null,vee(e,r),x7(r,e),UQ(zS),K1=!!FS,zS=FS=null,e.current=r,yee(r),ZJ(),Lr=l,tn=o,zo.transition=a}else e.current=r;if(kb&&(kb=!1,Ud=e,uj=i),a=e.pendingLanes,a===0&&(eh=null),JJ(r.stateNode),Ca(e,os()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(cj)throw cj=!1,e=aA,aA=null,e;return uj&1&&e.tag!==0&&Gp(),a=e.pendingLanes,a&1?e===oA?Fv++:(Fv=0,oA=e):Fv=0,jh(),null}function Gp(){if(Ud!==null){var e=nF(uj),t=zo.transition,r=tn;try{if(zo.transition=null,tn=16>e?16:e,Ud===null)var s=!1;else{if(e=Ud,Ud=null,uj=0,Lr&6)throw Error(xt(331));var i=Lr;for(Lr|=4,Lt=e.current;Lt!==null;){var a=Lt,o=a.child;if(Lt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Lt=u;Lt!==null;){var d=Lt;switch(d.tag){case 0:case 11:case 15:Dv(8,d,a)}var h=d.child;if(h!==null)h.return=d,Lt=h;else for(;Lt!==null;){d=Lt;var m=d.sibling,p=d.return;if(m7(d),d===u){Lt=null;break}if(m!==null){m.return=p,Lt=m;break}Lt=p}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Lt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Lt=o;else e:for(;Lt!==null;){if(a=Lt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Dv(9,a,a.return)}var j=a.sibling;if(j!==null){j.return=a.return,Lt=j;break e}Lt=a.return}}var _=e.current;for(Lt=_;Lt!==null;){o=Lt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Lt=w;else e:for(o=_;Lt!==null;){if(l=Lt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:i2(9,l)}}catch(S){Jn(l,l.return,S)}if(l===o){Lt=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,Lt=A;break e}Lt=l.return}}if(Lr=i,jh(),pc&&typeof pc.onPostCommitFiberRoot=="function")try{pc.onPostCommitFiberRoot(Yw,e)}catch{}s=!0}return s}finally{tn=r,zo.transition=t}}return!1}function HO(e,t,r){t=fg(r,t),t=n7(e,t,1),e=Qd(e,t,1),t=ra(),e!==null&&(v0(e,1,t),Ca(e,t))}function Jn(e,t,r){if(e.tag===3)HO(e,e,r);else for(;t!==null;){if(t.tag===3){HO(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(eh===null||!eh.has(s))){e=fg(r,e),e=s7(t,e,1),t=Qd(t,e,1),e=ra(),t!==null&&(v0(t,1,e),Ca(t,e));break}}t=t.return}}function See(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ra(),e.pingedLanes|=e.suspendedLanes&r,Xs===e&&(ci&r)===r&&(Is===4||Is===3&&(ci&130023424)===ci&&500>os()-W4?If(e,0):H4|=r),Ca(e,t)}function N7(e,t){t===0&&(e.mode&1?(t=yb,yb<<=1,!(yb&130023424)&&(yb=4194304)):t=1);var r=ra();e=Ou(e,t),e!==null&&(v0(e,t,r),Ca(e,r))}function Aee(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),N7(e,r)}function Pee(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(xt(314))}s!==null&&s.delete(t),N7(e,r)}var S7;S7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Aa.current)Na=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Na=!1,mee(e,t,r);Na=!!(e.flags&131072)}else Na=!1,On&&t.flags&1048576&&kF(t,tj,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;w1(e,t),e=t.pendingProps;var i=cg(t,Mi.current);Wp(t,r),i=F4(null,t,s,e,i,r);var a=z4();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(s)?(a=!0,Q1(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,M4(t),i.updater=s2,t.stateNode=i,i._reactInternals=t,ZS(t,s,e,r),t=JS(null,t,s,!0,a,r)):(t.tag=0,On&&a&&P4(t),Ji(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(w1(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=kee(s),e=pl(s,e),i){case 0:t=YS(null,t,s,e,r);break e;case 1:t=IO(null,t,s,e,r);break e;case 11:t=LO(null,t,s,e,r);break e;case 14:t=MO(null,t,s,pl(s.type,e),r);break e}throw Error(xt(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:pl(s,i),YS(e,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:pl(s,i),IO(e,t,s,i,r);case 3:e:{if(l7(t),e===null)throw Error(xt(387));s=t.pendingProps,a=t.memoizedState,i=a.element,IF(e,t),sj(t,s,null,r);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=fg(Error(xt(423)),t),t=RO(e,t,s,r,i);break e}else if(s!==i){i=fg(Error(xt(424)),t),t=RO(e,t,s,r,i);break e}else for(eo=Jd(t.stateNode.containerInfo.firstChild),ro=t,On=!0,wl=null,r=LF(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ug(),s===i){t=Lu(e,t,r);break e}Ji(e,t,s,r)}t=t.child}return t;case 5:return RF(t),e===null&&WS(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,BS(s,i)?o=null:a!==null&&BS(s,a)&&(t.flags|=32),o7(e,t),Ji(e,t,o,r),t.child;case 6:return e===null&&WS(t),null;case 13:return c7(e,t,r);case 4:return I4(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=dg(t,null,s,r):Ji(e,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:pl(s,i),LO(e,t,s,i,r);case 7:return Ji(e,t,t.pendingProps,r),t.child;case 8:return Ji(e,t,t.pendingProps.children,r),t.child;case 12:return Ji(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,vn(rj,s._currentValue),s._currentValue=o,a!==null)if(El(a.value,o)){if(a.children===i.children&&!Aa.current){t=Lu(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Nu(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),GS(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(xt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),GS(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ji(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Wp(t,r),i=qo(i),s=s(i),t.flags|=1,Ji(e,t,s,r),t.child;case 14:return s=t.type,i=pl(s,t.pendingProps),i=pl(s.type,i),MO(e,t,s,i,r);case 15:return i7(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:pl(s,i),w1(e,t),t.tag=1,Pa(s)?(e=!0,Q1(t)):e=!1,Wp(t,r),r7(t,s,i),ZS(t,s,i,r),JS(null,t,s,!0,e,r);case 19:return u7(e,t,r);case 22:return a7(e,t,r)}throw Error(xt(156,t.tag))};function A7(e,t){return Q$(e,t)}function Cee(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $o(e,t,r,s){return new Cee(e,t,r,s)}function X4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kee(e){if(typeof e=="function")return X4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===p4)return 11;if(e===g4)return 14}return 2}function rh(e,t){var r=e.alternate;return r===null?(r=$o(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function S1(e,t,r,s,i,a){var o=2;if(s=e,typeof e=="function")X4(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case yp:return Rf(r.children,i,a,t);case m4:o=8,i|=8;break;case yS:return e=$o(12,r,t,i|2),e.elementType=yS,e.lanes=a,e;case bS:return e=$o(13,r,t,i),e.elementType=bS,e.lanes=a,e;case jS:return e=$o(19,r,t,i),e.elementType=jS,e.lanes=a,e;case R$:return o2(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M$:o=10;break e;case I$:o=9;break e;case p4:o=11;break e;case g4:o=14;break e;case Id:o=16,s=null;break e}throw Error(xt(130,e==null?e:typeof e,""))}return t=$o(o,r,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function Rf(e,t,r,s){return e=$o(7,e,s,t),e.lanes=r,e}function o2(e,t,r,s){return e=$o(22,e,s,t),e.elementType=R$,e.lanes=r,e.stateNode={isHidden:!1},e}function qN(e,t,r){return e=$o(6,e,null,t),e.lanes=r,e}function VN(e,t,r){return t=$o(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eee(e,t,r,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_N(0),this.expirationTimes=_N(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_N(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Y4(e,t,r,s,i,a,o,l,c){return e=new Eee(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=$o(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},M4(a),e}function Tee(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vp,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function P7(e){if(!e)return ch;e=e._reactInternals;e:{if(hm(e)!==e||e.tag!==1)throw Error(xt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xt(171))}if(e.tag===1){var r=e.type;if(Pa(r))return PF(e,r,t)}return t}function C7(e,t,r,s,i,a,o,l,c){return e=Y4(r,s,!0,e,i,a,o,l,c),e.context=P7(null),r=e.current,s=ra(),i=th(r),a=Nu(s,i),a.callback=t??null,Qd(r,a,i),e.current.lanes=i,v0(e,i,s),Ca(e,s),e}function l2(e,t,r,s){var i=t.current,a=ra(),o=th(i);return r=P7(r),t.context===null?t.context=r:t.pendingContext=r,t=Nu(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Qd(i,t,o),e!==null&&(Pl(e,i,o,a),y1(e,i,o)),o}function hj(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function WO(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function J4(e,t){WO(e,t),(e=e.alternate)&&WO(e,t)}function Oee(){return null}var k7=typeof reportError=="function"?reportError:function(e){console.error(e)};function Q4(e){this._internalRoot=e}c2.prototype.render=Q4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xt(409));l2(e,t,null,null)};c2.prototype.unmount=Q4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gf(function(){l2(null,e,null,null)}),t[Tu]=null}};function c2(e){this._internalRoot=e}c2.prototype.unstable_scheduleHydration=function(e){if(e){var t=aF();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Fd.length&&t!==0&&t<Fd[r].priority;r++);Fd.splice(r,0,e),r===0&&lF(e)}};function ek(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function GO(){}function Lee(e,t,r,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var u=hj(o);a.call(u)}}var o=C7(t,s,e,0,null,!1,!1,"",GO);return e._reactRootContainer=o,e[Tu]=o.current,dy(e.nodeType===8?e.parentNode:e),Gf(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=hj(c);l.call(u)}}var c=Y4(e,0,!1,null,null,!1,!1,"",GO);return e._reactRootContainer=c,e[Tu]=c.current,dy(e.nodeType===8?e.parentNode:e),Gf(function(){l2(t,c,r,s)}),c}function d2(e,t,r,s,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=hj(o);l.call(c)}}l2(t,o,e,i)}else o=Lee(r,t,e,i,s);return hj(o)}sF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Nv(t.pendingLanes);r!==0&&(y4(t,r|1),Ca(t,os()),!(Lr&6)&&(mg=os()+500,jh()))}break;case 13:Gf(function(){var s=Ou(e,1);if(s!==null){var i=ra();Pl(s,e,1,i)}}),J4(e,1)}};b4=function(e){if(e.tag===13){var t=Ou(e,134217728);if(t!==null){var r=ra();Pl(t,e,134217728,r)}J4(e,134217728)}};iF=function(e){if(e.tag===13){var t=th(e),r=Ou(e,t);if(r!==null){var s=ra();Pl(r,e,t,s)}J4(e,t)}};aF=function(){return tn};oF=function(e,t){var r=tn;try{return tn=e,t()}finally{tn=r}};TS=function(e,t,r){switch(t){case"input":if(NS(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var i=t2(s);if(!i)throw Error(xt(90));$$(s),NS(s,i)}}}break;case"textarea":z$(e,r);break;case"select":t=r.value,t!=null&&qp(e,!!r.multiple,t,!1)}};G$=G4;K$=Gf;var Mee={usingClientEntryPoint:!1,Events:[b0,_p,t2,H$,W$,G4]},ev={findFiberByHostInstance:Sf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iee={bundleType:ev.bundleType,version:ev.version,rendererPackageName:ev.rendererPackageName,rendererConfig:ev.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y$(e),e===null?null:e.stateNode},findFiberByHostInstance:ev.findFiberByHostInstance||Oee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eb.isDisabled&&Eb.supportsFiber)try{Yw=Eb.inject(Iee),pc=Eb}catch{}}uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mee;uo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ek(t))throw Error(xt(200));return Tee(e,t,null,r)};uo.createRoot=function(e,t){if(!ek(e))throw Error(xt(299));var r=!1,s="",i=k7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Y4(e,1,!1,null,null,r,!1,s,i),e[Tu]=t.current,dy(e.nodeType===8?e.parentNode:e),new Q4(t)};uo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xt(188)):(e=Object.keys(e).join(","),Error(xt(268,e)));return e=Y$(t),e=e===null?null:e.stateNode,e};uo.flushSync=function(e){return Gf(e)};uo.hydrate=function(e,t,r){if(!u2(t))throw Error(xt(200));return d2(null,e,t,!0,r)};uo.hydrateRoot=function(e,t,r){if(!ek(e))throw Error(xt(405));var s=r!=null&&r.hydratedSources||null,i=!1,a="",o=k7;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=C7(t,null,e,1,r??null,i,!1,a,o),e[Tu]=t.current,dy(e),s)for(e=0;e<s.length;e++)r=s[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new c2(t)};uo.render=function(e,t,r){if(!u2(t))throw Error(xt(200));return d2(null,e,t,!1,r)};uo.unmountComponentAtNode=function(e){if(!u2(e))throw Error(xt(40));return e._reactRootContainer?(Gf(function(){d2(null,null,e,!1,function(){e._reactRootContainer=null,e[Tu]=null})}),!0):!1};uo.unstable_batchedUpdates=G4;uo.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!u2(r))throw Error(xt(200));if(e==null||e._reactInternals===void 0)throw Error(xt(38));return d2(e,t,r,!1,s)};uo.version="18.3.1-next-f1338f8080-20240426";function E7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E7)}catch(e){console.error(e)}}E7(),E$.exports=uo;var wh=E$.exports;const T7=Er(wh);var KO=wh;xS.createRoot=KO.createRoot,xS.hydrateRoot=KO.hydrateRoot;const Ree="modulepreload",Dee=function(e){return"/"+e},ZO={},uh=function(t,r,s){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=Dee(a),a in ZO)return;ZO[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Ree,o||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},$ee=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uh(()=>Promise.resolve().then(()=>rx),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class tk extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Fee extends tk{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class XO extends tk{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class YO extends tk{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var uA;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(uA||(uA={}));var zee=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class Bee{constructor(t,{headers:r={},customFetch:s,region:i=uA.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=$ee(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return zee(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(g=>{throw new Fee(g)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new XO(h);if(!h.ok)throw new YO(h);let p=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return p==="application/json"?v=yield h.json():p==="application/octet-stream"?v=yield h.blob():p==="text/event-stream"?v=h:p==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof YO||i instanceof XO?i.context:void 0}}})}}var _a={},rk={},h2={},w0={},f2={},m2={},qee=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pg=qee();const Vee=pg.fetch,O7=pg.fetch.bind(pg),L7=pg.Headers,Uee=pg.Request,Hee=pg.Response,rx=Object.freeze(Object.defineProperty({__proto__:null,Headers:L7,Request:Uee,Response:Hee,default:O7,fetch:Vee},Symbol.toStringTag,{value:"Module"})),Wee=uJ(rx);var p2={};Object.defineProperty(p2,"__esModule",{value:!0});let Gee=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};p2.default=Gee;var M7=li&&li.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m2,"__esModule",{value:!0});const Kee=M7(Wee),Zee=M7(p2);let Xee=class{constructor(t){var r,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Kee.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,u;let d=null,h=null,m=null,p=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _=await a.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=_:h=JSON.parse(_))}const y=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),j=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");y&&j&&j.length>1&&(m=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const y=await a.text();try{d=JSON.parse(y),Array.isArray(d)&&a.status===404&&(h=[],d=null,p=200,v="OK")}catch{a.status===404&&y===""?(p=204,v="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,v="OK"),d&&this.shouldThrowOnError)throw new Zee.default(d)}return{error:d,data:h,count:m,status:p,statusText:v}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};m2.default=Xee;var Yee=li&&li.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(f2,"__esModule",{value:!0});const Jee=Yee(m2);let Qee=class extends Jee.default{select(t){let r=!1;const s=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,s?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};f2.default=Qee;var ete=li&&li.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(w0,"__esModule",{value:!0});const tte=ete(f2);let rte=class extends tte.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${a}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};w0.default=rte;var nte=li&&li.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h2,"__esModule",{value:!0});const tv=nte(w0);let ste=class{constructor(t,{headers:r={},schema:s,fetch:i}){this.url=t,this.headers=new Headers(r),this.schema=s,this.fetch=i}select(t,{head:r=!1,count:s}={}){const i=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new tv.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:s=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new tv.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:i,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new tv.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var s;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new tv.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var r;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new tv.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};h2.default=ste;var I7=li&&li.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rk,"__esModule",{value:!0});const ite=I7(h2),ate=I7(w0);let ote=class R7{constructor(t,{headers:r={},schema:s,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new ite.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new R7(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:i=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;s||i?(l=s?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new ate.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};rk.default=ote;var nx=li&&li.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_a,"__esModule",{value:!0});_a.PostgrestError=_a.PostgrestBuilder=_a.PostgrestTransformBuilder=_a.PostgrestFilterBuilder=_a.PostgrestQueryBuilder=_a.PostgrestClient=void 0;const D7=nx(rk);_a.PostgrestClient=D7.default;const $7=nx(h2);_a.PostgrestQueryBuilder=$7.default;const F7=nx(w0);_a.PostgrestFilterBuilder=F7.default;const z7=nx(f2);_a.PostgrestTransformBuilder=z7.default;const B7=nx(m2);_a.PostgrestBuilder=B7.default;const q7=nx(p2);_a.PostgrestError=q7.default;var lte=_a.default={PostgrestClient:D7.default,PostgrestQueryBuilder:$7.default,PostgrestFilterBuilder:F7.default,PostgrestTransformBuilder:z7.default,PostgrestBuilder:B7.default,PostgrestError:q7.default};const{PostgrestClient:cte,PostgrestQueryBuilder:_He,PostgrestFilterBuilder:NHe,PostgrestTransformBuilder:SHe,PostgrestBuilder:AHe,PostgrestError:PHe}=lte;class ute{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const dte="2.15.1",hte=`realtime-js/${dte}`,fte="1.0.0",dA=1e4,mte=1e3,pte=100;var zv;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(zv||(zv={}));var Ts;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ts||(Ts={}));var vl;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vl||(vl={}));var hA;(function(e){e.websocket="websocket"})(hA||(hA={}));var jf;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(jf||(jf={}));class gte{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(t.slice(o,o+i));o=o+i;const c=s.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class V7{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(pn||(pn={}));const JO=(e,t,r={})=>{var s;const i=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((a,o)=>(a[o]=xte(o,e,t,i),a),{})},xte=(e,t,r,s)=>{const i=t.find(l=>l.name===e),a=i==null?void 0:i.type,o=r[e];return a&&!s.includes(a)?U7(a,o):fA(o)},U7=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return jte(t,r)}switch(e){case pn.bool:return vte(t);case pn.float4:case pn.float8:case pn.int2:case pn.int4:case pn.int8:case pn.numeric:case pn.oid:return yte(t);case pn.json:case pn.jsonb:return bte(t);case pn.timestamp:return wte(t);case pn.abstime:case pn.date:case pn.daterange:case pn.int4range:case pn.int8range:case pn.money:case pn.reltime:case pn.text:case pn.time:case pn.timestamptz:case pn.timetz:case pn.tsrange:case pn.tstzrange:return fA(t);default:return fA(t)}},fA=e=>e,vte=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yte=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},bte=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},jte=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>U7(t,l))}return e},wte=e=>typeof e=="string"?e.replace(" ","T"):e,H7=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class UN{constructor(t,r,s={},i=dA){this.channel=t,this.event=r,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var QO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(QO||(QO={}));class Bv{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bv.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=Bv.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Bv.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,i){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const m=d.map(y=>y.presence_ref),p=h.map(y=>y.presence_ref),v=d.filter(y=>p.indexOf(y.presence_ref)<0),g=h.filter(y=>m.indexOf(y.presence_ref)<0);v.length>0&&(l[u]=v),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},s,i)}static syncDiff(t,r,s,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),m=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...m)}s(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,i(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const i=t[s];return"metas"in i?r[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var e6;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(e6||(e6={}));var qv;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(qv||(qv={}));var hu;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(hu||(hu={}));class nk{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Ts.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new UN(this,vl.join,this.params,this.timeout),this.rejoinTimer=new V7(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ts.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ts.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ts.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vl.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Bv(this),this.broadcastEndpointURL=H7(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ts.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[qv.PRESENCE]&&this.bindings[qv.PRESENCE].length>0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(hu.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(hu.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){t==null||t(hu.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,g=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,y=[];for(let j=0;j<g;j++){const _=v[j],{filter:{event:w,schema:A,table:S,filter:P}}=_,C=m&&m[j];if(C&&C.event===w&&C.schema===A&&C.table===S&&C.filter===P)y.push(Object.assign(Object.assign({},_),{id:C.id}));else{this.unsubscribe(),this.state=Ts.errored,t==null||t(hu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(hu.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ts.errored,t==null||t(hu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(hu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Ts.joined&&t===qv.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async send(t,r={}){var s,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ts.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vl.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new UN(this,vl.leave,{},t),s.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ts.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new UN(this,t,r,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>pte){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=vl;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var v,g,y;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(m,s)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var v,g,y,j,_,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const A=p.id,S=(v=p.filter)===null||v===void 0?void 0:v.event;return A&&((g=r.ids)===null||g===void 0?void 0:g.includes(A))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const A=(_=(j=p==null?void 0:p.filter)===null||j===void 0?void 0:j.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return A==="*"||A===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:g,table:y,commit_timestamp:j,type:_,errors:w}=v;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:j,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(v))}p.callback(m,s)})}_isClosed(){return this.state===Ts.closed}_isJoined(){return this.state===Ts.joined}_isJoining(){return this.state===Ts.joining}_isLeaving(){return this.state===Ts.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&nk.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vl.close,{},t)}_onError(t){this._on(vl.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ts.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=JO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=JO(t.columns,t.old_record)),r}}const t6=()=>{},Tb={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_te=[1e3,2e3,5e3,1e4],Nte=1e4,Ste=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ate{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dA,this.transport=null,this.heartbeatIntervalMs=Tb.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=t6,this.ref=0,this.reconnectTimer=null,this.logger=t6,this.conn=null,this.sendBuffer=[],this.serializer=new gte,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>uh(()=>Promise.resolve().then(()=>rx),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${hA.websocket}`,this.httpEndpoint=H7(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ute.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fte}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case zv.connecting:return jf.Connecting;case zv.open:return jf.Open;case zv.closing:return jf.Closing;default:return jf.Closed}}isConnected(){return this.connectionState()===jf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new nk(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:s,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(mte,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Tb.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${i} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(vl.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${s}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([Ste],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:hte};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(vl.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new V7(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tb.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,i,a,o,l,c,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:dA,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Tb.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>_te[d-1]||Nte,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class sk extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Os(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Pte extends sk{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mA extends sk{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Cte=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const W7=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uh(()=>Promise.resolve().then(()=>rx),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},kte=()=>Cte(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield uh(()=>Promise.resolve().then(()=>rx),void 0)).Response:Response}),pA=e=>{if(Array.isArray(e))return e.map(r=>pA(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=pA(s)}),t},Ete=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var fm=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const HN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Tte=(e,t,r)=>fm(void 0,void 0,void 0,function*(){const s=yield kte();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new Pte(HN(i),a,o))}).catch(i=>{t(new mA(HN(i),i))}):t(new mA(HN(e),e))}),Ote=(e,t,r,s)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?i:(Ete(s)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(s)):i.body=s,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function _0(e,t,r,s,i,a){return fm(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Ote(t,s,i,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Tte(c,l,s))})})}function fj(e,t,r,s){return fm(this,void 0,void 0,function*(){return _0(e,"GET",t,r,s)})}function lc(e,t,r,s,i){return fm(this,void 0,void 0,function*(){return _0(e,"POST",t,s,i,r)})}function gA(e,t,r,s,i){return fm(this,void 0,void 0,function*(){return _0(e,"PUT",t,s,i,r)})}function Lte(e,t,r,s){return fm(this,void 0,void 0,function*(){return _0(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function G7(e,t,r,s,i){return fm(this,void 0,void 0,function*(){return _0(e,"DELETE",t,s,i,r)})}var Zi=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const Mte={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},r6={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ite{constructor(t,r={},s,i){this.url=t,this.headers=r,this.bucketId=s,this.fetch=W7(i)}uploadOrUpdate(t,r,s,i){return Zi(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},r6),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?gA:lc)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(Os(a))return{data:null,error:a};throw a}})}upload(t,r,s){return Zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,i){return Zi(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:r6.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield gA(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(Os(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Zi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield lc(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new sk("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(Os(s))return{data:null,error:s};throw s}})}update(t,r,s){return Zi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Zi(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Os(i))return{data:null,error:i};throw i}})}copy(t,r,s){return Zi(this,void 0,void 0,function*(){try{return{data:{path:(yield lc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Os(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,s){return Zi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield lc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Os(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,s){return Zi(this,void 0,void 0,function*(){try{const i=yield lc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Os(i))return{data:null,error:i};throw i}})}download(t,r){return Zi(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield fj(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Os(l))return{data:null,error:l};throw l}})}info(t){return Zi(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield fj(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:pA(s),error:null}}catch(s){if(Os(s))return{data:null,error:s};throw s}})}exists(t){return Zi(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Lte(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Os(s)&&s instanceof mA){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(t){return Zi(this,void 0,void 0,function*(){try{return{data:yield G7(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Os(r))return{data:null,error:r};throw r}})}list(t,r,s){return Zi(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Mte),r),{prefix:t||""});return{data:yield lc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(Os(i))return{data:null,error:i};throw i}})}listV2(t,r){return Zi(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield lc(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Os(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Rte="2.11.0",Dte={"X-Client-Info":`storage-js/${Rte}`};var Ym=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class $te{constructor(t,r={},s,i){const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Dte),r),this.fetch=W7(s)}listBuckets(){return Ym(this,void 0,void 0,function*(){try{return{data:yield fj(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Os(t))return{data:null,error:t};throw t}})}getBucket(t){return Ym(this,void 0,void 0,function*(){try{return{data:yield fj(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Os(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ym(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Os(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Ym(this,void 0,void 0,function*(){try{return{data:yield gA(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Os(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Ym(this,void 0,void 0,function*(){try{return{data:yield lc(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Os(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ym(this,void 0,void 0,function*(){try{return{data:yield G7(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Os(r))return{data:null,error:r};throw r}})}}class Fte extends $te{constructor(t,r={},s,i){super(t,r,s,i)}from(t){return new Ite(this.url,this.headers,t,this.fetch)}}const zte="2.56.0";let Av="";typeof Deno<"u"?Av="deno":typeof document<"u"?Av="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Av="react-native":Av="node";const Bte={"X-Client-Info":`supabase-js-${Av}/${zte}`},qte={headers:Bte},Vte={schema:"public"},Ute={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hte={};var Wte=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const Gte=e=>{let t;return e?t=e:typeof fetch>"u"?t=O7:t=fetch,(...r)=>t(...r)},Kte=()=>typeof Headers>"u"?L7:Headers,Zte=(e,t,r)=>{const s=Gte(r),i=Kte();return(a,o)=>Wte(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},o),{headers:u}))})};var Xte=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};function Yte(e){return e.endsWith("/")?e:e+"/"}function Jte(e,t){var r,s;const{db:i,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Xte(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const K7="2.71.1",mp=30*1e3,xA=3,WN=xA*mp,Qte="http://localhost:9999",ere="supabase.auth.token",tre={"X-Client-Info":`gotrue-js/${K7}`},vA="X-Supabase-Api-Version",Z7={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rre=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nre=10*60*1e3;class ik extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function mr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class sre extends ik{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function ire(e){return mr(e)&&e.name==="AuthApiError"}class X7 extends ik{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _h extends ik{constructor(t,r,s,i){super(t,s,i),this.name=r,this.status=s}}class Td extends _h{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function are(e){return mr(e)&&e.name==="AuthSessionMissingError"}class Ob extends _h{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lb extends _h{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mb extends _h{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ore(e){return mr(e)&&e.name==="AuthImplicitGrantRedirectError"}class n6 extends _h{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yA extends _h{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function GN(e){return mr(e)&&e.name==="AuthRetryableFetchError"}class s6 extends _h{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class bA extends _h{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const mj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i6=` 	
\r=`.split(""),lre=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<i6.length;t+=1)e[i6[t].charCodeAt(0)]=-2;for(let t=0;t<mj.length;t+=1)e[mj[t].charCodeAt(0)]=t;return e})();function a6(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(mj[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(mj[s]),t.queuedBits-=6}}function Y7(e,t,r){const s=lre[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function o6(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{dre(o,s,r)};for(let o=0;o<e.length;o+=1)Y7(e.charCodeAt(o),i,a);return t.join("")}function cre(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ure(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}cre(s,t)}}function dre(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function hre(e){const t=[],r={queue:0,queuedBits:0},s=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Y7(e.charCodeAt(i),r,s);return new Uint8Array(t)}function fre(e){const t=[];return ure(e,r=>t.push(r)),new Uint8Array(t)}function mre(e){const t=[],r={queue:0,queuedBits:0},s=i=>{t.push(i)};return e.forEach(i=>a6(i,r,s)),a6(null,r,s),t.join("")}function pre(e){return Math.round(Date.now()/1e3)+e}function gre(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const fl=()=>typeof window<"u"&&typeof document<"u",nf={tested:!1,writable:!1},J7=()=>{if(!fl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nf.tested)return nf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),nf.tested=!0,nf.writable=!0}catch{nf.tested=!0,nf.writable=!1}return nf.writable};function xre(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((s,i)=>{t[i]=s}),t}const Q7=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uh(()=>Promise.resolve().then(()=>rx),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},vre=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",pp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},sf=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pd=async(e,t)=>{await e.removeItem(t)};class g2{constructor(){this.promise=new g2.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}g2.promiseConstructor=Promise;function KN(e){const t=e.split(".");if(t.length!==3)throw new bA("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!rre.test(t[s]))throw new bA("JWT not in base64url format");return{header:JSON.parse(o6(t[0])),payload:JSON.parse(o6(t[1])),signature:hre(t[2]),raw:{header:t[0],payload:t[1]}}}async function yre(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function bre(e,t){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){s(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function jre(e){return("0"+e.toString(16)).substr(-2)}function wre(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(t),Array.from(t,jre).join("")}async function _re(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Nre(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await _re(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jm(e,t,r=!1){const s=wre();let i=s;r&&(i+="/PASSWORD_RECOVERY"),await pp(e,`${t}-code-verifier`,i);const a=await Nre(s);return[a,s===a?"plain":"s256"]}const Sre=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Are(e){const t=e.headers.get(vA);if(!t||!t.match(Sre))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Pre(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Cre(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kre=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qm(e){if(!kre.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ZN(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function l6(e){return JSON.parse(JSON.stringify(e))}var Ere=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]]);return r};const ff=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Tre=[502,503,504];async function c6(e){var t;if(!vre(e))throw new yA(ff(e),0);if(Tre.includes(e.status))throw new yA(ff(e),e.status);let r;try{r=await e.json()}catch(a){throw new X7(ff(a),a)}let s;const i=Are(e);if(i&&i.getTime()>=Z7["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new s6(ff(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Td}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new s6(ff(r),e.status,r.weak_password.reasons);throw new sre(ff(r),e.status||500,s)}const Ore=(e,t,r,s)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),r))};async function yr(e,t,r,s){var i;const a=Object.assign({},s==null?void 0:s.headers);a[vA]||(a[vA]=Z7["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const o=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Lre(e,t,r+l,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Lre(e,t,r,s,i,a){const o=Ore(t,s,i,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new yA(ff(c),0)}if(l.ok||await c6(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await c6(c)}}function uu(e){var t;let r=null;Dre(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=pre(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function u6(e){const t=uu(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bd(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Mre(e){return{data:e,error:null}}function Ire(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:a}=e,o=Ere(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Rre(e){return e}function Dre(e){return e.access_token&&e.refresh_token&&e.expires_in}const XN=["global","local","others"];var $re=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]]);return r};class Fre{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Q7(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=XN[0]){if(XN.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${XN.join(", ")}`);try{return await yr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await yr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bd})}catch(s){if(mr(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=$re(t,["options"]),i=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await yr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ire,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(mr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await yr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bd})}catch(r){if(mr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,i,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await yr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Rre});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const g=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(mr(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Qm(t);try{return await yr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bd})}catch(r){if(mr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Qm(t);try{return await yr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bd})}catch(s){if(mr(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Qm(t);try{return await yr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bd})}catch(s){if(mr(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Qm(t.userId);try{const{data:r,error:s}=await yr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:s}}catch(r){if(mr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Qm(t.userId),Qm(t.id);try{return{data:await yr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}}}function d6(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function zre(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ep={debug:!!(globalThis&&J7()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ez extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Bre extends ez{}async function qre(e,t,r){ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),ep.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ep.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Bre(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ep.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}zre();const Vre={url:Qte,storageKey:ere,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tre,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function h6(e,t,r){return await r()}const tp={};class by{constructor(t){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=by.nextInstanceID,by.nextInstanceID+=1,this.instanceID>0&&fl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Vre),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Fre({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Q7(i.fetch),this.lock=i.lock||h6,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:fl()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qre:this.lock=h6,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:J7()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=d6(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=d6(this.memoryStorage)),fl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=tp[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){tp[this.storageKey]=Object.assign(Object.assign({},tp[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=tp[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tp[this.storageKey]=Object.assign(Object.assign({},tp[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${K7}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=xre(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),fl()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),ore(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return mr(r)?{error:r}:{error:new X7("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,i;try{const a=await yr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:uu}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(mr(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,s,i;try{let a;if("email"in t){const{email:d,password:h,options:m}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Jm(this.storage,this.storageKey)),a=await yr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:v},xform:uu})}else if("phone"in t){const{phone:d,password:h,options:m}=t;a=await yr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:uu})}else throw new Lb("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(mr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await yr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:u6})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await yr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:u6})}else throw new Lb("You must provide either an email or phone number and a password");const{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Ob}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(mr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,i,a,o,l,c,u,d,h,m,p;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:y,wallet:j,statement:_,options:w}=t;let A;if(fl())if(typeof j=="object")A=j;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))A=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=j}const S=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const P=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),_?{statement:_}:null));let C;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")C=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)C=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)v=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${S.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(s=w==null?void 0:w.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const P=await A.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=P}}try{const{data:y,error:j}=await yr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:mre(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:uu});if(j)throw j;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ob}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:j})}catch(y){if(mr(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await sf(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/");try{const{data:a,error:o}=await yr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:uu});if(await Pd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Ob}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(mr(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:s,token:i,access_token:a,nonce:o}=t,l=await yr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:uu}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ob}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(mr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,i,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Jm(this.storage,this.storageKey));const{error:h}=await yr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await yr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Lb("You must provide either an email or phone number.")}catch(l){if(mr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,s;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await yr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:uu});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(mr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,s,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Jm(this.storage,this.storageKey)),await yr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Mre})}catch(a){if(mr(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Td;const{error:i}=await yr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(mr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:i,options:a}=t,{error:o}=await yr(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:s,type:i,options:a}=t,{data:o,error:l}=await yr(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Lb("You must provide either an email or phone number and a type")}catch(r){if(mr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await sf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<WN:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await sf(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ZN()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await yr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bd}):await this._useSession(async r=>{var s,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Td}:await yr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Bd})})}catch(r){if(mr(r))return are(r)&&(await this._removeSession(),await Pd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new Td;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Jm(this.storage,this.storageKey));const{data:u,error:d}=await yr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Bd});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(mr(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Td;const r=Date.now()/1e3;let s=r,i=!0,a=null;const{payload:o}=KN(t.access_token);if(o.exp&&(s=o.exp,i=s<=r),i){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(mr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Td;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(mr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!fl())throw new Mb("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mb(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new n6("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mb("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new n6("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new Mb("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const p=m-d;p*1e3<=mp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:g,error:y}=await this._getUser(a);if(y)throw y;const j={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:t.type},error:null}}catch(s){if(mr(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await sf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:i,error:a}=r;if(a)return{error:a};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(ire(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Pd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=gre(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Jm(this.storage,this.storageKey,!0));try{return await yr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(mr(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:i}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await yr(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return fl()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(mr(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,i;const{data:a,error:o}=r;if(o)throw o;return await yr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(mr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await bre(async i=>(i>0&&await yre(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await yr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:uu})),(i,a)=>{const o=200*Math.pow(2,i);return a&&GN(a)&&Date.now()+o-s<mp})}catch(s){if(this._debug(r,"error",s),mr(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),fl()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await sf(this.storage,this.storageKey);if(i&&this.userStorage){let o=await sf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await pp(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ZN()}else if(i&&!i.user&&!i.user){const o=await sf(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Pd(this.storage,this.storageKey+"-user"),await pp(this.storage,this.storageKey,i)):i.user=ZN()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<WN;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${WN}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),GN(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Td;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new g2;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Td;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),mr(a)){const o={session:null,error:a};return GN(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,s=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await pp(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=l6(i);await pp(this.storage,this.storageKey,a)}else{const i=l6(r);await pp(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Pd(this.storage,this.storageKey),await Pd(this.storage,this.storageKey+"-code-verifier"),await Pd(this.storage,this.storageKey+"-user"),this.userStorage&&await Pd(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&fl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),mp);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-t)/mp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${mp}ms, refresh threshold is ${xA} ticks`),i<=xA&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ez)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const i=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,o]=await Jm(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:i,error:a}=r;return a?{data:null,error:a}:await yr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(mr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await yr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(mr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await yr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(mr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:a}=r;return a?{data:null,error:a}:await yr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(mr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=KN(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+nre>i)return s;const{data:a,error:o}=await yr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,s=a.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};s=p.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=KN(s);r!=null&&r.allowExpired||Pre(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:a,header:i,signature:o},error:null}}const d=Cre(i.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,fre(`${l}.${c}`)))throw new bA("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(s){if(mr(s))return{data:null,error:s};throw s}}}by.nextInstanceID=0;const Ure=by;class Hre extends Ure{constructor(t){super(t)}}var Wre=globalThis&&globalThis.__awaiter||function(e,t,r,s){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class Gre{constructor(t,r,s){var i,a,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Yte(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Vte,realtime:Hte,auth:Object.assign(Object.assign({},Ute),{storageKey:u}),global:qte},h=Jte(s??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Zte(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new cte(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Fte(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Bee(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Wre(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:i,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hre({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ate(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Kre=(e,t,r)=>new Gre(e,t,r);function Zre(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Zre()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f6={}.VITE_SUPABASE_URL,m6={}.VITE_SUPABASE_ANON_KEY,Xre=()=>({from:()=>({select:()=>Promise.resolve({data:[],error:null}),insert:()=>Promise.resolve({data:null,error:null}),update:()=>Promise.resolve({data:null,error:null}),delete:()=>Promise.resolve({data:null,error:null})}),auth:{signUp:()=>Promise.resolve({data:null,error:null}),signIn:()=>Promise.resolve({data:null,error:null}),signOut:()=>Promise.resolve({error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})}});let jA;!f6||!m6?jA=Xre():jA=Kre(f6,m6,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json","Accept-Profile":"public",Prefer:"return=representation"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}});const pe=jA;function p6(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function N0(...e){return t=>{let r=!1;const s=e.map(i=>{const a=p6(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():p6(e[i],null)}}}}function Gt(...e){return x.useCallback(N0(...e),e)}function Kf(e){const t=Jre(e),r=x.forwardRef((s,i)=>{const{children:a,...o}=s,l=x.Children.toArray(a),c=l.find(ene);if(c){const u=c.props.children,d=l.map(h=>h===c?x.Children.count(u)>1?x.Children.only(null):x.isValidElement(u)?u.props.children:null:h);return n.jsx(t,{...o,ref:i,children:x.isValidElement(u)?x.cloneElement(u,void 0,d):null})}return n.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}var Yre=Kf("Slot");function Jre(e){const t=x.forwardRef((r,s)=>{const{children:i,...a}=r;if(x.isValidElement(i)){const o=rne(i),l=tne(a,i.props);return i.type!==x.Fragment&&(l.ref=s?N0(s,o):o),x.cloneElement(i,l)}return x.Children.count(i)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var tz=Symbol("radix.slottable");function Qre(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=tz,t}function ene(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===tz}function tne(e,t){const r={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?r[s]=(...l)=>{const c=a(...l);return i(...l),c}:i&&(r[s]=i):s==="style"?r[s]={...i,...a}:s==="className"&&(r[s]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function rne(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function rz(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=rz(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function cr(){for(var e,t,r=0,s="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=rz(e))&&(s&&(s+=" "),s+=t);return s}const g6=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,x6=cr,sx=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return x6(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],h=a==null?void 0:a[u];if(d===null)return null;const m=g6(d)||g6(h);return i[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:m,...p}=d;return Object.entries(p).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...u,h,m]:u},[]);return x6(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};function nne(){for(var e=0,t,r,s="";e<arguments.length;)(t=arguments[e++])&&(r=nz(t))&&(s&&(s+=" "),s+=r);return s}function nz(e){if(typeof e=="string")return e;for(var t,r="",s=0;s<e.length;s++)e[s]&&(t=nz(e[s]))&&(r&&(r+=" "),r+=t);return r}var ak="-";function sne(e){var t=ane(e),r=e.conflictingClassGroups,s=e.conflictingClassGroupModifiers,i=s===void 0?{}:s;function a(l){var c=l.split(ak);return c[0]===""&&c.length!==1&&c.shift(),sz(c,t)||ine(l)}function o(l,c){var u=r[l]||[];return c&&i[l]?[].concat(u,i[l]):u}return{getClassGroupId:a,getConflictingClassGroupIds:o}}function sz(e,t){var o;if(e.length===0)return t.classGroupId;var r=e[0],s=t.nextPart.get(r),i=s?sz(e.slice(1),s):void 0;if(i)return i;if(t.validators.length!==0){var a=e.join(ak);return(o=t.validators.find(function(l){var c=l.validator;return c(a)}))==null?void 0:o.classGroupId}}var v6=/^\[(.+)\]$/;function ine(e){if(v6.test(e)){var t=v6.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function ane(e){var t=e.theme,r=e.prefix,s={nextPart:new Map,validators:[]},i=lne(Object.entries(e.classGroups),r);return i.forEach(function(a){var o=a[0],l=a[1];wA(l,s,o,t)}),s}function wA(e,t,r,s){e.forEach(function(i){if(typeof i=="string"){var a=i===""?t:y6(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(one(i)){wA(i(s),t,r,s);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(function(o){var l=o[0],c=o[1];wA(c,y6(t,l),r,s)})})}function y6(e,t){var r=e;return t.split(ak).forEach(function(s){r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r}function one(e){return e.isThemeGetter}function lne(e,t){return t?e.map(function(r){var s=r[0],i=r[1],a=i.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):o});return[s,a]}):e}function cne(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,s=new Map;function i(a,o){r.set(a,o),t++,t>e&&(t=0,s=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=s.get(o))!==void 0)return i(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):i(o,l)}}}var iz="!";function une(e){var t=e.separator||":",r=t.length===1,s=t[0],i=t.length;return function(o){for(var l=[],c=0,u=0,d,h=0;h<o.length;h++){var m=o[h];if(c===0){if(m===s&&(r||o.slice(h,h+i)===t)){l.push(o.slice(u,h)),u=h+i;continue}if(m==="/"){d=h;continue}}m==="["?c++:m==="]"&&c--}var p=l.length===0?o:o.substring(u),v=p.startsWith(iz),g=v?p.substring(1):p,y=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:y}}}function dne(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(s){var i=s[0]==="[";i?(t.push.apply(t,r.sort().concat([s])),r=[]):r.push(s)}),t.push.apply(t,r.sort()),t}function hne(e){return{cache:cne(e.cacheSize),splitModifiers:une(e),...sne(e)}}var fne=/\s+/;function mne(e,t){var r=t.splitModifiers,s=t.getClassGroupId,i=t.getConflictingClassGroupIds,a=new Set;return e.trim().split(fne).map(function(o){var l=r(o),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,h=l.maybePostfixModifierPosition,m=s(h?d.substring(0,h):d),p=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=s(d),!m)return{isTailwindClass:!1,originalClassName:o};p=!1}var v=dne(c).join(":"),g=u?v+iz:v;return{isTailwindClass:!0,modifierId:g,classGroupId:m,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=l+c;return a.has(d)?!1:(a.add(d),i(c,u).forEach(function(h){return a.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function pne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var s,i,a,o=l;function l(u){var d=t[0],h=t.slice(1),m=h.reduce(function(p,v){return v(p)},d());return s=hne(m),i=s.cache.get,a=s.cache.set,o=c,c(u)}function c(u){var d=i(u);if(d)return d;var h=mne(u,s);return a(u,h),h}return function(){return o(nne.apply(null,arguments))}}function _n(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var az=/^\[(?:([a-z-]+):)?(.+)\]$/i,gne=/^\d+\/\d+$/,xne=new Set(["px","full","screen"]),vne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bne=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function cl(e){return Cf(e)||xne.has(e)||gne.test(e)||_A(e)}function _A(e){return mm(e,"length",Ane)}function jne(e){return mm(e,"size",oz)}function wne(e){return mm(e,"position",oz)}function _ne(e){return mm(e,"url",Pne)}function Ib(e){return mm(e,"number",Cf)}function Cf(e){return!Number.isNaN(Number(e))}function Nne(e){return e.endsWith("%")&&Cf(e.slice(0,-1))}function rv(e){return b6(e)||mm(e,"number",b6)}function Pr(e){return az.test(e)}function nv(){return!0}function Cd(e){return vne.test(e)}function Sne(e){return mm(e,"",Cne)}function mm(e,t,r){var s=az.exec(e);return s?s[1]?s[1]===t:r(s[2]):!1}function Ane(e){return yne.test(e)}function oz(){return!1}function Pne(e){return e.startsWith("url(")}function b6(e){return Number.isInteger(Number(e))}function Cne(e){return bne.test(e)}function kne(){var e=_n("colors"),t=_n("spacing"),r=_n("blur"),s=_n("brightness"),i=_n("borderColor"),a=_n("borderRadius"),o=_n("borderSpacing"),l=_n("borderWidth"),c=_n("contrast"),u=_n("grayscale"),d=_n("hueRotate"),h=_n("invert"),m=_n("gap"),p=_n("gradientColorStops"),v=_n("gradientColorStopPositions"),g=_n("inset"),y=_n("margin"),j=_n("opacity"),_=_n("padding"),w=_n("saturate"),A=_n("scale"),S=_n("sepia"),P=_n("skew"),C=_n("space"),T=_n("translate"),M=function(){return["auto","contain","none"]},z=function(){return["auto","hidden","clip","visible","scroll"]},O=function(){return["auto",Pr,t]},I=function(){return[Pr,t]},q=function(){return["",cl]},F=function(){return["auto",Cf,Pr]},W=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},V=function(){return["solid","dashed","dotted","double","none"]},ne=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},G=function(){return["start","end","center","between","around","evenly","stretch"]},K=function(){return["","0",Pr]},ee=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},xe=function(){return[Cf,Ib]},B=function(){return[Cf,Pr]};return{cacheSize:500,theme:{colors:[nv],spacing:[cl],blur:["none","",Cd,Pr],brightness:xe(),borderColor:[e],borderRadius:["none","","full",Cd,Pr],borderSpacing:I(),borderWidth:q(),contrast:xe(),grayscale:K(),hueRotate:B(),invert:K(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[Nne,_A],inset:O(),margin:O(),opacity:xe(),padding:I(),saturate:xe(),scale:xe(),sepia:K(),skew:B(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Pr]}],container:["container"],columns:[{columns:[Cd]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(W(),[Pr])}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rv]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pr]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",rv]}],"grid-cols":[{"grid-cols":[nv]}],"col-start-end":[{col:["auto",{span:["full",rv]},Pr]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[nv]}],"row-start-end":[{row:["auto",{span:[rv]},Pr]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pr]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(G())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(G(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(G(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Pr,t]}],"min-w":[{"min-w":["min","max","fit",Pr,cl]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Cd]},Cd,Pr]}],h:[{h:[Pr,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Pr,cl]}],"max-h":[{"max-h":[Pr,t,"min","max","fit"]}],"font-size":[{text:["base",Cd,_A]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ib]}],"font-family":[{font:[nv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pr]}],"line-clamp":[{"line-clamp":["none",Cf,Ib]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pr,cl]}],"list-image":[{"list-image":["none",Pr]}],"list-style-type":[{list:["none","disc","decimal",Pr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(V(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",cl]}],"underline-offset":[{"underline-offset":["auto",Pr,cl]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(W(),[wne])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_ne]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[].concat(V(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:V()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(V())}],"outline-offset":[{"outline-offset":[Pr,cl]}],"outline-w":[{outline:[cl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[cl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cd,Sne]}],"shadow-color":[{shadow:[nv]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":ne()}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Cd,Pr]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pr]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Pr]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[rv,Pr]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pr]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[cl,Ib]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Ene=pne(kne);function st(...e){return Ene(cr(e))}const ok=sx("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-all duration-150 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transform active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-green-500 to-accent_brand text-white shadow-lg hover:opacity-90"},size:{default:"h-11 px-6 py-2.5",sm:"h-9 rounded-md px-3",xs:"h-8 rounded-md px-2 text-xs",lg:"h-12 rounded-md px-10",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Y=x.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...i},a)=>{const o=s?Yre:"button";return n.jsx(o,{className:st(ok({variant:t,size:r,className:e})),ref:a,...i})});Y.displayName="Button";const he=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:st("rounded-xl border bg-card text-card-foreground shadow-sm transition-shadow duration-300",e),...t}));he.displayName="Card";const Ce=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:st("flex flex-col space-y-1.5 p-4 md:p-6",e),...t}));Ce.displayName="CardHeader";const ke=x.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:st("text-lg font-semibold leading-none tracking-tight",e),...t}));ke.displayName="CardTitle";const jt=x.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:st("text-sm text-muted-foreground",e),...t}));jt.displayName="CardDescription";const ve=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:st("p-4 md:p-6 pt-0",e),...t}));ve.displayName="CardContent";const Wn=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:st("flex items-center p-4 md:p-6 pt-0",e),...t}));Wn.displayName="CardFooter";/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tne=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),One=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),j6=e=>{const t=One(e);return t.charAt(0).toUpperCase()+t.slice(1)},lz=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Lne=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mne={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ine=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...Mne,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:lz("lucide",i),...!a&&!Lne(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>x.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(e,t)=>{const r=x.forwardRef(({className:s,...i},a)=>x.createElement(Ine,{ref:a,iconNode:t,className:lz(`lucide-${Tne(j6(e))}`,`lucide-${e}`,s),...i}));return r.displayName=j6(e),r};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rne=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],pj=qe("activity",Rne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dne=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],x2=qe("archive",Dne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ne=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Fne=qe("arrow-down",$ne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zne=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vv=qe("arrow-left",zne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bne=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fn=qe("arrow-right",Bne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qne=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Vne=qe("arrow-up",qne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Une=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],lk=qe("award",Une);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hne=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wne=qe("ban",Hne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gne=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Rl=qe("banknote",Gne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kne=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],rp=qe("beaker",Kne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],cz=qe("bell-off",Zne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],uz=qe("bell-ring",Xne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Nl=qe("bell",Yne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jne=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Zf=qe("book-open",Jne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qne=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],wf=qe("bot",Qne);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zs=qe("brain",ese);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],gg=qe("briefcase",tse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],NA=qe("building-2",rse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Vn=qe("building",nse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],jy=qe("calculator",sse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],dz=qe("calendar-days",ise);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],ck=qe("calendar-plus",ase);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Sc=qe("calendar",ose);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ep=qe("camera",lse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cse=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],na=qe("chart-column",cse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],ix=qe("chart-no-axes-column-increasing",use);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],hse=qe("chart-no-axes-column",dse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fse=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],wy=qe("chart-pie",fse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],v2=qe("check-check",mse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mu=qe("check",pse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],S0=qe("chevron-down",gse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hz=qe("chevron-right",xse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yse=qe("chevron-left",vse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ds=qe("circle-alert",bse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qt=qe("circle-check-big",jse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xc=qe("circle-check",wse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ds=qe("circle-plus",_se);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uk=qe("circle-question-mark",Nse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Ase=qe("circle-user",Sse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sa=qe("circle-x",Pse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fz=qe("circle",Cse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Ese=qe("clipboard-check",kse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Xf=qe("clipboard-list",Tse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ln=qe("clock",Ose);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],Tp=qe("cloud-sun",Lse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],xg=qe("cloud-upload",Mse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]],mz=qe("cookie",Ise);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pz=qe("copy",Rse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]],$se=qe("copyright",Dse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fse=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],w6=qe("credit-card",Fse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],gz=qe("database",zse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],fs=qe("dollar-sign",Bse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Tl=qe("download",qse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],dk=qe("droplets",Vse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Hse=qe("ellipsis",Use);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wse=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],y2=qe("external-link",Wse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],SA=qe("eye-off",Gse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hr=qe("eye",Kse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3.072",key:"n6s66f"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m6.69 16.479 1.29 4.88a.5.5 0 0 1-.698.591l-1.843-.849a1 1 0 0 0-.88.001l-1.846.85a.5.5 0 0 1-.693-.593l1.29-4.88",key:"1e6yvx"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],Xse=qe("file-badge",Zse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]],Jse=qe("file-check-2",Yse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],eie=qe("file-check",Qse);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"37hlfg"}],["path",{d:"M8 14v2.2l1.6 1",key:"6m4bie"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}]],rie=qe("file-clock",tie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],sie=qe("file-down",nie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["rect",{width:"8",height:"6",x:"8",y:"12",rx:"1",key:"3yr8at"}],["path",{d:"M10 12v-2a2 2 0 1 1 4 0v2",key:"j4i8d"}]],aie=qe("file-lock",iie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oie=[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],Ac=qe("file-pen-line",oie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],xz=qe("file-search",lie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Cr=qe("file-text",cie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],die=qe("file-x",uie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hie=[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]],fie=qe("folder-archive",hie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mie=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"m9 13 2 2 4-4",key:"6343dt"}]],hk=qe("folder-check",mie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pie=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Wo=qe("funnel",pie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gie=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],A0=qe("gavel",gie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vz=qe("globe",xie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vie=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],yz=qe("handshake",vie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yie=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],A1=qe("hard-hat",yie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]],ax=qe("heart-handshake",bie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jie=[["line",{x1:"2",y1:"2",x2:"22",y2:"22",key:"1w4vcy"}],["path",{d:"M16.5 16.5 12 21l-7-7c-1.5-1.45-3-3.2-3-5.5a5.5 5.5 0 0 1 2.14-4.35",key:"3mpagl"}],["path",{d:"M8.76 3.1c1.15.22 2.13.78 3.24 1.9 1.5-1.5 2.74-2 4.5-2A5.5 5.5 0 0 1 22 8.5c0 2.12-1.3 3.78-2.67 5.17",key:"1gh3v3"}]],wie=qe("heart-off",jie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ie=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Kp=qe("heart",_ie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],AA=qe("history",Nie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Aie=qe("hotel",Sie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pie=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],P0=qe("house",Pie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],kie=qe("images",Cie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Tie=qe("inbox",Eie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Iu=qe("info",Oie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lie=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Mie=qe("key-round",Lie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iie=[["path",{d:"m12 8 6-3-6-3v10",key:"mvpnpy"}],["path",{d:"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12",key:"ek95tt"}],["path",{d:"m6.49 12.85 11.02 6.3",key:"1kt42w"}],["path",{d:"M17.51 12.85 6.5 19.15",key:"v55bdg"}]],ia=qe("land-plot",Iie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rie=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Ea=qe("landmark",Rie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Die=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],fk=qe("layers",Die);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ie=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fo=qe("layout-dashboard",$ie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fie=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],zie=qe("layout-grid",Fie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bie=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],vg=qe("leaf",Bie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],bz=qe("life-buoy",qie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vie=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],mk=qe("linkedin",Vie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uie=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Hie=qe("list-checks",Uie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wie=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]],jz=qe("list-filter",Wie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gie=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yg=qe("loader-circle",Gie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kie=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],gj=qe("lock",Kie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zie=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],wz=qe("log-in",Zie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xie=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pk=qe("log-out",Xie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yie=[["path",{d:"M22 10.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h12.5",key:"e61zoh"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M20 14v4",key:"1hm744"}],["path",{d:"M20 22v.01",key:"12bgn6"}]],Jie=qe("mail-warning",Yie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qie=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],C0=qe("mail",Qie);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jr=qe("map-pin",eae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tae=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ox=qe("map",tae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],k0=qe("maximize",rae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],gk=qe("menu",nae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],YN=qe("message-circle",sae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]],xj=qe("message-square-text",iae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Nh=qe("message-square",aae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],lae=qe("mic-off",oae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],uae=qe("mic",cae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=[["path",{d:"M5 12h14",key:"1ays0h"}]],hae=qe("minus",dae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],mae=qe("newspaper",fae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_z=qe("pen-line",pae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],_6=qe("pen-tool",gae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],vae=qe("percent",xae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Sh=qe("phone",yae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vj=qe("plus",bae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],xk=qe("receipt",jae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ta=qe("refresh-cw",wae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],Nae=qe("refresh-ccw",_ae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Aae=qe("rotate-ccw",Sae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vk=qe("save",Pae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],lx=qe("scale",Cae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Eae=qe("school",kae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],N6=qe("search-check",Tae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wr=qe("search",Oae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ol=qe("send",Lae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mae=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Nz=qe("server",Mae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Sz=qe("settings-2",Iae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rae=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Yf=qe("settings",Rae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],yk=qe("share-2",Dae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Fae=qe("shield-alert",$ae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ys=qe("shield-check",zae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ns=qe("shield",Bae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],b2=qe("shopping-cart",qae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],JN=qe("smartphone",Vae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Hae=qe("smile",Uae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Df=qe("sparkles",Wae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]],Az=qe("sprout",Gae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zae=qe("square-check-big",Kae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ah=qe("square-pen",Xae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]],Pz=qe("square-percent",Yae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yj=qe("star",Jae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],eoe=qe("store",Qae);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],roe=qe("tag",toe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_y=qe("target",noe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],ioe=qe("thermometer",soe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]],ooe=qe("tractor",aoe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],di=qe("trash-2",loe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],uoe=qe("tree-pine",coe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Cz=qe("trending-down",doe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Br=qe("trending-up",hoe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kr=qe("triangle-alert",foe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],kz=qe("truck",moe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Su=qe("upload",poe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dh=qe("user-check",goe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bk=qe("user-cog",xoe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bj=qe("user-plus",voe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],oi=qe("user",yoe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bs=qe("users",boe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["path",{d:"m7.9 7.9 2.7 2.7",key:"hpeyl3"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}],["path",{d:"m13.4 10.6 2.7-2.7",key:"264c1n"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["path",{d:"m7.9 16.1 2.7-2.7",key:"p81g5e"}],["circle",{cx:"16.5",cy:"16.5",r:".5",fill:"currentColor",key:"fubopw"}],["path",{d:"m13.4 13.4 2.7 2.7",key:"abhel3"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],woe=qe("vault",joe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Noe=qe("wind",_oe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Uv=qe("wrench",Soe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ii=qe("x",Aoe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ru=qe("zap",Poe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],koe=qe("zoom-out",Coe);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Toe=qe("zoom-in",Eoe),Tt=({size:e="md",className:t})=>{const r={sm:"h-5 w-5",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"};return n.jsx(yg,{className:st("animate-spin text-primary",r[e]||r.md,t)})},Ooe=1;let QN=0;function Loe(){return QN=(QN+1)%Number.MAX_VALUE,QN.toString()}const Xi={state:{toasts:[]},listeners:[],getState:()=>Xi.state,setState:e=>{typeof e=="function"?Xi.state=e(Xi.state):Xi.state={...Xi.state,...e},Xi.listeners.forEach(t=>t(Xi.state))},subscribe:e=>(Xi.listeners.push(e),()=>{Xi.listeners=Xi.listeners.filter(t=>t!==e)})},Moe=({...e})=>{const t=Loe(),r=i=>Xi.setState(a=>({...a,toasts:a.toasts.map(o=>o.id===t?{...o,...i}:o)})),s=()=>Xi.setState(i=>({...i,toasts:i.toasts.filter(a=>a.id!==t)}));return Xi.setState(i=>({...i,toasts:[{...e,id:t,dismiss:s},...i.toasts].slice(0,Ooe)})),{id:t,dismiss:s,update:r}};function pt(){const[e,t]=x.useState(Xi.getState());return x.useEffect(()=>Xi.subscribe(s=>{t(s)}),[]),x.useEffect(()=>{const r=[];return e.toasts.forEach(s=>{if(s.duration===1/0)return;const i=setTimeout(()=>{s.dismiss()},s.duration||5e3);r.push(i)}),()=>{r.forEach(s=>clearTimeout(s))}},[e.toasts]),{toast:Moe,toasts:e.toasts}}const Ioe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(""),{toast:o}=pt();x.useEffect(()=>{(async()=>{s(!0);const{data:u,error:d}=await pe.from("roles").select("*").eq("entity_type","banque").order("name");t(u||[]),s(!1)})()},[]);const l=async c=>{if(c.preventDefault(),!i.trim())return;const{error:u}=await pe.from("roles").insert([{name:i.trim(),entity_type:"banque"}]);if(u)o({title:"Erreur",description:u.message,variant:"destructive"});else{a(""),o({title:"Rle ajout"});const{data:d}=await pe.from("roles").select("*").eq("entity_type","banque").order("name");t(d||[])}};return n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des rles Banque"}),n.jsxs("form",{onSubmit:l,className:"flex gap-2 mb-4",children:[n.jsx("input",{value:i,onChange:c=>a(c.target.value),className:"border rounded px-2 py-1 flex-1",placeholder:"Nouveau rle..."}),n.jsx(Y,{type:"submit",children:"Ajouter"})]}),r?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-2",children:e.length===0?n.jsx("p",{children:"Aucun rle."}):e.map(c=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:c.name})}),n.jsx(ve,{children:n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",c.id]})})]},c.id))})]})},Roe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState([]),[i,a]=x.useState(!0),{toast:o}=pt();x.useEffect(()=>{(async()=>{a(!0);const{data:u}=await pe.from("users").select("id, full_name, email, role").eq("entity_type","banque"),{data:d}=await pe.from("roles").select("*").eq("entity_type","banque");t(u||[]),s(d||[]),a(!1)})()},[]);const l=async(c,u)=>{const{error:d}=await pe.from("users").update({role:u}).eq("id",c);d?o({title:"Erreur",description:d.message,variant:"destructive"}):(t(h=>h.map(m=>m.id===c?{...m,role:u}:m)),o({title:"Rle mis  jour"}))};return n.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Affectation des rles Banque"}),i?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-3",children:e.length===0?n.jsx("p",{children:"Aucun utilisateur."}):e.map(c=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:[c.full_name," ",n.jsxs("span",{className:"text-xs text-gray-400",children:["(",c.email,")"]})]})}),n.jsx(ve,{children:n.jsxs("select",{value:c.role||"",onChange:u=>l(c.id,u.target.value),className:"border rounded px-2 py-1",children:[n.jsx("option",{value:"",children:"Aucun"}),r.map(u=>n.jsx("option",{value:u.name,children:u.name},u.id))]})})]},c.id))})]})},Doe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(""),{toast:o}=pt();x.useEffect(()=>{(async()=>{s(!0);const{data:u,error:d}=await pe.from("permissions").select("*").eq("entity_type","banque").order("name");t(u||[]),s(!1)})()},[]);const l=async c=>{if(c.preventDefault(),!i.trim())return;const{error:u}=await pe.from("permissions").insert([{name:i.trim(),entity_type:"banque"}]);if(u)o({title:"Erreur",description:u.message,variant:"destructive"});else{a(""),o({title:"Permission ajoute"});const{data:d}=await pe.from("permissions").select("*").eq("entity_type","banque").order("name");t(d||[])}};return n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des permissions Banque"}),n.jsxs("form",{onSubmit:l,className:"flex gap-2 mb-4",children:[n.jsx("input",{value:i,onChange:c=>a(c.target.value),className:"border rounded px-2 py-1 flex-1",placeholder:"Nouvelle permission..."}),n.jsx(Y,{type:"submit",children:"Ajouter"})]}),r?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-2",children:e.length===0?n.jsx("p",{children:"Aucune permission."}):e.map(c=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:c.name})}),n.jsx(ve,{children:n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",c.id]})})]},c.id))})]})};var fp;let Je=(fp=class{static async _loadEventConfig(){try{const{data:t}=await pe.from("feature_flags").select("key,audience,enabled").in("key",["events_antispam_window_ms"]);if(t){const r=t.find(s=>s.key==="events_antispam_window_ms"&&s.enabled);if(r&&r.audience&&r.audience.value){const s=parseInt(r.audience.value,10);!isNaN(s)&&s>0&&s<6e4&&(this._eventWindowMs=s)}else if(r&&typeof r.audience=="object"){const s=r.audience.value||r.audience.VAL||r.audience.ms,i=parseInt(s,10);!isNaN(i)&&i>0&&i<6e4&&(this._eventWindowMs=i)}}}catch{}}static _canSendEvent(t){const r=Date.now(),s=this._eventRecentCache.get(t);if(s&&r-s<this._eventWindowMs)return!1;if(this._eventRecentCache.set(t,r),this._eventRecentCache.size>this._eventMaxQueue){const i=Array.from(this._eventRecentCache.entries()).sort((a,o)=>a[1]-o[1]);for(let a=0;a<i.length-this._eventMaxQueue;a++)this._eventRecentCache.delete(i[a][0])}return!0}static async supabaseRaw(t,r="*"){try{const{data:s,error:i}=await pe.from(t).select(r);return{data:s,error:i}}catch(s){return{data:null,error:s}}}static async getUserRegistrationsByMonth(){try{const{data:t,error:r}=await pe.from("users").select("created_at");if(r)throw r;const s=new Date,i=[];for(let a=5;a>=0;a--){const o=new Date(s.getFullYear(),s.getMonth()-a,1),l=o.toLocaleString("fr-FR",{month:"short"}),c=`${o.getFullYear()}-${o.getMonth()+1}`,u=t.filter(d=>{const h=new Date(d.created_at);return h.getFullYear()===o.getFullYear()&&h.getMonth()===o.getMonth()}).length;i.push({name:l,value:u})}return i}catch(t){return console.error("Erreur lors de la rcupration des inscriptions par mois:",t),[]}}static calculateMonthlySales(t){try{const r=new Date,s=[];for(let i=5;i>=0;i--){const a=new Date(r.getFullYear(),r.getMonth()-i,1),o=a.toLocaleString("fr-FR",{month:"short"}),c=t.filter(u=>{if(!u.created_at)return!1;const d=new Date(u.created_at);return d.getFullYear()===a.getFullYear()&&d.getMonth()===a.getMonth()}).reduce((u,d)=>u+(d.amount||0),0);s.push({name:o,amount:c})}return s}catch(r){return console.error("Erreur lors du calcul des ventes mensuelles:",r),[]}}static calculateParcelStatus(t){try{const r={};return t.forEach(s=>{const i=s.status||"Non dfini";r[i]=(r[i]||0)+1}),Object.entries(r).map(([s,i])=>({name:s,value:i,unit:"parcelles"}))}catch(r){return console.error("Erreur lors du calcul des statuts de parcelles:",r),[]}}static calculateRequestTypes(t){try{const r={};return t.forEach(s=>{const i=s.type||"Autre";r[i]=(r[i]||0)+1}),Object.entries(r).map(([s,i])=>({name:s,value:i,unit:"demandes"}))}catch(r){return console.error("Erreur lors du calcul des types de demandes:",r),[]}}static calculateActorStats(t,r,s,i){try{const a=t.filter(h=>{var m;return((m=h.type)==null?void 0:m.toLowerCase())==="vendeur"}),o=t.filter(h=>{var m;return((m=h.type)==null?void 0:m.toLowerCase())==="particulier"}),l=t.filter(h=>{var m;return((m=h.type)==null?void 0:m.toLowerCase())==="mairie"}),c=t.filter(h=>{var m;return((m=h.type)==null?void 0:m.toLowerCase())==="banque"}),u=t.filter(h=>{var m;return((m=h.type)==null?void 0:m.toLowerCase())==="notaire"}),d=t.filter(h=>{var m;return((m=h.type)==null?void 0:m.toLowerCase())==="agent"});return{vendeur:{parcellesListees:r.filter(h=>a.some(m=>m.id===h.owner_id)).length,transactionsReussies:i.filter(h=>a.some(m=>m.id===h.vendor_id)).length},particulier:{demandesSoumises:s.filter(h=>o.some(m=>m.id===h.requester_id)).length,acquisitions:i.filter(h=>o.some(m=>m.id===h.buyer_id)).length},mairie:{parcellesCommunales:r.filter(h=>l.some(m=>m.id===h.owner_id)).length,demandesTraitees:s.filter(h=>l.some(m=>m.id===h.recipient_id)&&h.status==="completed").length},banque:{pretsAccordes:i.filter(h=>h.funding_source==="loan").length,garantiesEvaluees:r.filter(h=>h.has_loan_guarantee).length},notaire:{dossiersTraites:i.filter(h=>h.notary_id).length,actesAuthentifies:i.filter(h=>h.notary_id&&h.status==="completed").length},agent:{clientsAssignes:o.filter(h=>h.agent_id).length,visitesPlanifiees:s.filter(h=>h.type==="visit"&&d.some(m=>m.id===h.assigned_to)).length}}}catch(a){return console.error("Erreur lors du calcul des statistiques par acteur:",a),{vendeur:{},particulier:{},mairie:{},banque:{},notaire:{},agent:{}}}}static async getUpcomingEvents(){try{const{data:t,error:r}=await pe.from("events").select("*").gte("event_date",new Date().toISOString()).order("event_date",{ascending:!0}).limit(3);if(r)throw r;return(t||[]).map(s=>({title:s.title,date:s.event_date.split("T")[0],time:s.event_time||"09:00"}))}catch(t){return console.error("Erreur lors de la rcupration des vnements  venir:",t),[]}}static async getAllTransactions(){try{const{data:t,error:r}=await pe.from("transactions").select("*");if(r)throw r;return t||[]}catch(t){return console.error("Erreur lors de la rcupration des transactions:",t),[]}}static async listRoles(){try{const{data:t,error:r}=await pe.from("roles").select("*").order("key");if(r)throw r;return t||[]}catch(t){return console.warn("listRoles failed:",t.message||t),[]}}static async deleteRole(t){try{const{error:r}=await pe.from("roles").delete().eq("key",t).neq("is_system",!0).neq("is_protected",!0);if(r)throw r;return!0}catch(r){throw console.error("deleteRole failed:",r.message||r),r}}static async listUserRoles(t){try{const{data:r,error:s}=await pe.from("v_user_roles").select("*").eq("user_id",t);if(s)throw s;return r||[]}catch{try{const{data:s,error:i}=await pe.from("user_roles").select("role_id, roles:role_id(key,label,description,feature_flags,default_permissions)").eq("user_id",t);if(i)throw i;return(s||[]).map(a=>{var o,l,c,u;return{user_id:t,role_key:(o=a.roles)==null?void 0:o.key,label:(l=a.roles)==null?void 0:l.label,feature_flags:(c=a.roles)==null?void 0:c.feature_flags,default_permissions:(u=a.roles)==null?void 0:u.default_permissions}})}catch(s){return console.warn("listUserRoles fallback failed:",s.message||s),[]}}}static async listAllUserRoles(){try{const{data:t,error:r}=await pe.from("v_user_roles").select("*");if(r)throw r;return t||[]}catch{try{const{data:r,error:s}=await pe.from("user_roles").select("user_id, role_id, roles:role_id(key,label,description,feature_flags,default_permissions)");if(s)throw s;return(r||[]).map(i=>{var a,o,l,c;return{user_id:i.user_id,role_key:(a=i.roles)==null?void 0:a.key,label:(o=i.roles)==null?void 0:o.label,feature_flags:(l=i.roles)==null?void 0:l.feature_flags,default_permissions:(c=i.roles)==null?void 0:c.default_permissions}})}catch(r){return console.warn("listAllUserRoles fallback failed:",r.message||r),[]}}}static async createRole({key:t,label:r,description:s=null,defaultPermissions:i=[],featureFlags:a=[]}){try{const{data:o,error:l}=await pe.rpc("create_role",{p_key:t,p_label:r,p_description:s,p_default_permissions:i,p_feature_flags:a});if(l)throw l;return o}catch(o){throw console.error("createRole failed:",o.message||o),o}}static async assignRole(t,r){try{const{error:s}=await pe.rpc("assign_role",{p_user_id:t,p_role_key:r});if(s)throw s;return!0}catch(s){throw console.error("assignRole failed:",s.message||s),s}}static async revokeRole(t,r){try{const{error:s}=await pe.rpc("revoke_role",{p_user_id:t,p_role_key:r});if(s)throw s;return!0}catch(s){throw console.error("revokeRole failed:",s.message||s),s}}static async getEffectivePermissions(t){try{const{data:r,error:s}=await pe.rpc("get_effective_permissions",{p_user:t});if(s)throw s;return r||[]}catch(r){return console.warn("getEffectivePermissions failed:",r.message||r),[]}}static async getUsers(t=null){let r=pe.from("users").select("*").eq("is_active",!0).is("deleted_at",null).order("created_at",{ascending:!1});t&&(r=r.limit(t));const{data:s,error:i}=await r;return i?(console.error("Erreur lors de la rcupration des utilisateurs:",i),[]):s||[]}static async getAllUsers({select:t="id,email,full_name,type,role,created_at,is_active,verification_status",limit:r=200,offset:s=0,search:i=null,types:a=null,activeOnly:o=!1}={}){try{r>1e3&&(r=1e3);let l=pe.from("users").select(t,{count:"exact"}).order("created_at",{ascending:!1}).range(s,s+r-1);if(o&&(l=l.eq("is_active",!0).is("deleted_at",null)),a&&Array.isArray(a)&&a.length&&(l=l.in("type",a)),i&&i.trim()){const h=i.trim();l=l.or(`full_name.ilike.%${h}%,email.ilike.%${h}%`)}const{data:c,error:u,count:d}=await l;if(u)throw u;return{data:c||[],count:d||0}}catch(l){return console.error("getAllUsers failed:",l.message||l),{data:[],count:0}}}static async getUserTypeCounts(){try{const{data:t,error:r}=await pe.from("users").select("type");if(r)throw r;const s={};return(t||[]).forEach(i=>{const a=i.type||"Inconnu";s[a]=(s[a]||0)+1}),s}catch(t){return console.error("getUserTypeCounts failed:",t.message||t),{}}}static async listRegions(){try{const{data:t,error:r}=await pe.from("regions").select("id, name, code").order("name");if(r)throw r;return t||[]}catch(t){return console.warn("listRegions fallback (table missing?)",t.message||t),[]}}static async listDepartmentsByRegion(t){if(!t)return[];try{const{data:r,error:s}=await pe.from("departments").select("id, name, code").eq("region_id",t).order("name");if(s)throw s;return r||[]}catch(r){return console.warn("listDepartmentsByRegion fallback",r.message||r),[]}}static async listCommunesByDepartment(t){if(!t)return[];try{const{data:r,error:s}=await pe.from("communes").select("id, name, code").eq("department_id",t).order("name");if(s)throw s;return r||[]}catch(r){return console.warn("listCommunesByDepartment fallback",r.message||r),[]}}static async listBanks(){try{const{data:t,error:r}=await pe.from("institution_profiles").select("name").eq("institution_type","Banque");if(r)throw r;return Array.from(new Set((t||[]).map(s=>s.name).filter(Boolean))).sort()}catch(t){return console.warn("listBanks fallback",t.message||t),[]}}static async listPaymentMethods(){try{const{data:t,error:r}=await pe.from("payment_methods").select("id, name, icon, providers");if(r)throw r;return(t||[]).map(s=>({id:s.id,name:s.name,icon:s.icon||null,providers:Array.isArray(s.providers)?s.providers:s.providers?[s.providers]:[]}))}catch{return[{id:"mobile",name:"Mobile Money",icon:"Smartphone",providers:["Wave","Orange Money"]},{id:"transfer",name:"Virement Bancaire",icon:"Landmark",providers:[]},{id:"check",name:"Chque de banque",icon:"FileCheck2",providers:[]}]}}static async listMobileMoneyProviders(){try{const{data:t,error:r}=await pe.from("mobile_money_providers").select("name").eq("enabled",!0).order("name");if(r)throw r;return(t||[]).map(s=>s.name)}catch{return["Wave","Orange Money"]}}static async listNotaireSpecialities(){try{const{data:t,error:r}=await pe.from("notaire_specialities").select("label");if(!r&&t)return t.map(s=>s.label).filter(Boolean).sort()}catch{}try{const{data:t,error:r}=await pe.from("institution_profiles").select("metadata").eq("institution_type","Notaire");if(r)throw r;const s=(t||[]).map(i=>i.metadata&&(i.metadata.notaire_speciality||i.metadata.speciality)).filter(Boolean);return Array.from(new Set(s)).sort()}catch(t){return console.warn("listNotaireSpecialities fallback",t.message||t),[]}}static async getUserById(t){const{data:r,error:s}=await pe.from("users").select("*").eq("id",t).single();return s?(console.error("Erreur lors de la rcupration de l'utilisateur:",s),null):r}static async getUsersByRole(t){const{data:r,error:s}=await pe.from("users").select("*").eq("role",t).order("created_at",{ascending:!1});return s?(console.error(`Erreur lors de la rcupration des utilisateurs ${t}:`,s),[]):r||[]}static async getParcels(t=null){let r=pe.from("parcels").select("*").order("created_at",{ascending:!1});t&&(r=r.limit(t));const{data:s,error:i}=await r;return i?(console.error("Erreur lors de la rcupration des parcelles:",i),[]):s||[]}static async getAllParcels(){return this.getParcels()}static async getParcelById(t){const{data:r,error:s}=await pe.from("parcels").select("*").eq("id",t).single();return s?(console.error("Erreur lors de la rcupration de la parcelle:",s),null):r}static async getParcelsByOwner(t){const{data:r,error:s}=await pe.from("parcels").select("*").eq("owner_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des parcelles du propritaire:",s),[]):r||[]}static async searchParcels({status:t=null,zone:r=null,type:s=null,minPrice:i=null,maxPrice:a=null,text:o=null,limit:l=50}={}){try{let c=pe.from("parcels").select("*").order("created_at",{ascending:!1}).limit(l);t&&(c=c.eq("status",t)),r&&(c=c.ilike("zone",r)),s&&(c=c.eq("type",s)),i&&(c=c.gte("price",i)),a&&(c=c.lte("price",a)),o&&(c=c.or(`reference.ilike.%${o}%,location_name.ilike.%${o}%,description.ilike.%${o}%`));const{data:u,error:d}=await c;return d?(console.error("Erreur recherche parcelles:",d),[]):u||[]}catch(c){return console.error("Erreur inattendue recherche parcelles:",c),[]}}static async getFeaturedParcels(t=6){const{data:r,error:s}=await pe.from("parcels").select("*").eq("is_featured",!0).order("updated_at",{ascending:!1}).limit(t);return s?(console.error("Erreur featured parcels:",s),[]):r||[]}static async getParcelsByZone(t,r=12){const{data:s,error:i}=await pe.from("parcels").select("*").ilike("zone",t).order("created_at",{ascending:!1}).limit(r);return i?(console.error("Erreur parcels by zone:",i),[]):s||[]}static async getRequests(t=null){let r=pe.from("requests").select(`
        *,
        users:user_id (
          id, full_name, email, phone
        )
      `).order("created_at",{ascending:!1});t&&(r=r.limit(t));const{data:s,error:i}=await r;return i?(console.error("Erreur lors de la rcupration des demandes:",i),[]):s||[]}static async getRequestById(t){const{data:r,error:s}=await pe.from("requests").select(`
        *,
        users:user_id (
          id, full_name, email, phone
        )
      `).eq("id",t).single();return s?(console.error("Erreur lors de la rcupration de la demande:",s),null):r}static async getRequestsByStatus(t){const{data:r,error:s}=await pe.from("requests").select(`
        *,
        users:user_id (
          id, full_name, email, phone
        )
      `).eq("status",t).order("created_at",{ascending:!1});return s?(console.error(`Erreur lors de la rcupration des demandes ${t}:`,s),[]):r||[]}static async getRequestsByUser(t){const{data:r,error:s}=await pe.from("requests").select(`
        *,
        users:user_id (
          id, full_name, email, phone
        )
      `).eq("user_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des demandes de l'utilisateur:",s),[]):r||[]}static async getTransactions(t=null){let r=pe.from("transactions").select(`
        *,
        users:user_id (
          id, full_name, email
        )
      `).order("created_at",{ascending:!1});t&&(r=r.limit(t));const{data:s,error:i}=await r;return i?(console.error("Erreur lors de la rcupration des transactions:",i),[]):s||[]}static async getTransactionsByUser(t){const{data:r,error:s}=await pe.from("transactions").select(`
        *,
        users:user_id (
          id, full_name, email
        )
      `).eq("user_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des transactions de l'utilisateur:",s),[]):r||[]}static async getTransactionById(t){try{const{data:r,error:s}=await pe.from("transactions").select("*").eq("id",t).single();if(s)throw s;return r}catch(r){return console.error("getTransactionById failed:",r.message||r),null}}static async payTransaction(t,r,s){try{const{data:i,error:a}=await pe.rpc("pay_transaction",{p_transaction_id:t,p_actor:r,p_method:s});if(a)throw a;return i}catch(i){throw console.error("payTransaction failed:",i.message||i),i}}static async getBlogPosts(t=null){let r=pe.from("blog_posts").select("*").eq("status","published").order("published_at",{ascending:!1});t&&(r=r.limit(t));const{data:s,error:i}=await r;return i?(console.error("Erreur lors de la rcupration des articles de blog:",i),[]):s||[]}static async getBlogPostById(t){const{data:r,error:s}=await pe.from("blog_posts").select("*").eq("id",t).single();return s?(console.error("Erreur lors de la rcupration de l'article de blog:",s),null):r}static async logParcelView(t,r,s={}){try{if(!t)return null;const i={parcel_id:t,viewer_id:r||null,metadata:s},{error:a}=await pe.from("parcel_views").insert([i]);if(a)throw a;return!0}catch(i){return console.warn("logParcelView failed",i.message||i),!1}}static async createParcelInquiry({parcelId:t,inquirerId:r,inquiryType:s="info",message:i="",metadata:a={}}){try{const{data:o,error:l}=await pe.from("parcel_inquiries").insert([{parcel_id:t,inquirer_id:r,inquiry_type:s,message:i,metadata:a}]).select().single();if(l)throw l;return this.logEvent({entityType:"parcel",entityId:t,eventType:"parcel.inquiry",actorUserId:r,data:{inquiryType:s}}),o}catch(o){throw console.error("createParcelInquiry failed",o.message||o),o}}static async listParcelInquiries(t,r=50){try{const{data:s,error:i}=await pe.from("parcel_inquiries").select("*").eq("parcel_id",t).order("created_at",{ascending:!1}).limit(r);if(i)throw i;return s||[]}catch(s){return console.warn("listParcelInquiries failed",s.message||s),[]}}static async recordUserActivity({userId:t,activityType:r,entityType:s=null,entityId:i=null,description:a=null,metadata:o={}}){if(!t||!r)return!1;try{const{error:l}=await pe.from("user_activities").insert([{user_id:t,activity_type:r,entity_type:s,entity_id:i,description:a,metadata:o}]);if(l)throw l;return!0}catch(l){return console.warn("recordUserActivity failed",l.message||l),!1}}static async listUserActivities(t,r=50){try{const{data:s,error:i}=await pe.from("user_activities").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(r);if(i)throw i;return s||[]}catch(s){return console.warn("listUserActivities failed",s.message||s),[]}}static async createConversation({subject:t,creatorId:r,participantIds:s=[]}){try{const{data:i,error:a}=await pe.from("conversations").insert([{subject:t,created_by:r}]).select().single();if(a)throw a;const o=Array.from(new Set([r,...s].filter(Boolean))).map(l=>({conversation_id:i.id,user_id:l}));return o.length&&await pe.from("conversation_participants").insert(o),this.logEvent({entityType:"conversation",entityId:i.id,eventType:"conversation.created",actorUserId:r,data:{subject:t}}),i}catch(i){throw console.error("createConversation failed",i.message||i),i}}static async sendMessage({conversationId:t,senderId:r,content:s,attachments:i=[]}){try{const{data:a,error:o}=await pe.from("messages").insert([{conversation_id:t,sender_id:r,content:s,attachments:i}]).select().single();if(o)throw o;return this.logEvent({entityType:"conversation",entityId:t,eventType:"message.sent",actorUserId:r,data:{length:s==null?void 0:s.length}}),a}catch(a){throw console.error("sendMessage failed",a.message||a),a}}static async listConversationMessages(t,r=200){try{const{data:s,error:i}=await pe.from("messages").select("*").eq("conversation_id",t).order("created_at",{ascending:!0}).limit(r);if(i)throw i;return s||[]}catch(s){return console.warn("listConversationMessages failed",s.message||s),[]}}static async markConversationMessagesRead({conversationId:t,userId:r,messageIds:s=[]}){if(!t||!r)return 0;try{if(s.length){const l=s.map(u=>({message_id:u,user_id:r})),{error:c}=await pe.from("message_reads").insert(l,{upsert:!0}).select();if(c&&!String(c.message||"").includes("duplicate"))throw c;return s.length}const{data:i,error:a}=await pe.rpc("list_unread_message_ids",{p_conversation_id:t,p_user_id:r});if(a){const{data:l}=await pe.from("messages").select("id,sender_id").eq("conversation_id",t).neq("sender_id",r),{data:c}=await pe.from("message_reads").select("message_id").eq("user_id",r),u=new Set((c||[]).map(m=>m.message_id)),d=(l||[]).filter(m=>!u.has(m.id)).map(m=>m.id);if(!d.length)return 0;const h=d.map(m=>({message_id:m,user_id:r}));return await pe.from("message_reads").insert(h).select(),d.length}if(!i||!i.length)return 0;const o=i.map(l=>({message_id:l,user_id:r}));return await pe.from("message_reads").insert(o).select(),i.length}catch(i){return console.warn("markConversationMessagesRead failed",i.message||i),0}}static async getConversationUnreadCount({conversationId:t,userId:r}){if(!t||!r)return 0;try{const{data:s,error:i}=await pe.rpc("count_unread_messages",{p_conversation_id:t,p_user_id:r});if(!i&&typeof s=="number")return s}catch{}try{const{data:s}=await pe.from("messages").select("id,sender_id").eq("conversation_id",t).neq("sender_id",r),{data:i}=await pe.from("message_reads").select("message_id").eq("user_id",r).in("message_id",(s||[]).map(o=>o.id)),a=new Set((i||[]).map(o=>o.message_id));return(s||[]).filter(o=>!a.has(o.id)).length}catch(s){return console.warn("getConversationUnreadCount failed",s.message||s),0}}static async listUserConversationsWithUnread(t,r=50){return this.listUserConversations(t,r)}static async listUserConversations(t,r=50){try{const{data:s,error:i}=await pe.rpc("list_user_conversations",{p_user_id:t});if(!i&&s)return s}catch{}try{const{data:s,error:i}=await pe.from("conversation_participants").select("conversation_id, conversations:conversation_id(*)").eq("user_id",t).limit(r);if(i)throw i;return(s||[]).map(a=>a.conversations).filter(Boolean)}catch(s){return console.warn("listUserConversations failed",s.message||s),[]}}static async createNotification({userId:t,type:r,title:s,body:i,data:a={}}){if(!t)return null;try{const{data:o,error:l}=await pe.from("notifications").insert([{user_id:t,type:r,title:s,body:i,data:a}]).select().single();if(l)throw l;return o}catch(o){return console.error("createNotification failed",o.message||o),null}}static async listNotifications(t,{unreadOnly:r=!1,limit:s=50}={}){try{let i=pe.from("notifications").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(s);r&&(i=i.eq("read",!1));const{data:a,error:o}=await i;if(o)throw o;return a||[]}catch(i){return console.warn("listNotifications failed",i.message||i),[]}}static async markNotificationRead(t){try{return await pe.from("notifications").update({read:!0,read_at:new Date().toISOString()}).eq("id",t),!0}catch{return!1}}static async getDocuments(t=null){let r=pe.from("documents").select(`
        *,
        users:user_id (
          id, full_name, email
        )
      `).order("created_at",{ascending:!1});t&&(r=r.limit(t));const{data:s,error:i}=await r;return i?(console.error("Erreur lors de la rcupration des documents:",i),[]):s||[]}static async getDocumentsByUser(t){const{data:r,error:s}=await pe.from("documents").select("*").eq("user_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des documents de l'utilisateur:",s),[]):r||[]}static async getNotifications(t=null,r=null){let s=pe.from("notifications").select("*").order("created_at",{ascending:!1});t&&(s=s.eq("user_id",t)),r&&(s=s.limit(r));const{data:i,error:a}=await s;return a?(console.error("Erreur lors de la rcupration des notifications:",a),[]):i||[]}static async getDashboardStats(){try{const[t,r,s,i]=await Promise.all([this.getUsers(),this.getParcels(),this.getRequests(),this.getTransactions()]);return{totalUsers:t.length,totalParcels:r.length,totalRequests:s.length,totalTransactions:i.length,activeUsers:t.filter(o=>o.is_active).length,verifiedUsers:t.filter(o=>o.verification_status==="verified").length,pendingRequests:s.filter(o=>o.status==="pending").length,approvedRequests:s.filter(o=>o.status==="approved").length,completedTransactions:i.filter(o=>o.status==="completed").length,usersByRole:t.reduce((o,l)=>(o[l.role]=(o[l.role]||0)+1,o),{}),requestsByType:s.reduce((o,l)=>(o[l.request_type]=(o[l.request_type]||0)+1,o),{}),recentUsers:t.slice(0,5),recentRequests:s.slice(0,5),recentTransactions:i.slice(0,5)}}catch(t){return console.error("Erreur lors de la rcupration des statistiques:",t),{totalUsers:0,totalParcels:0,totalRequests:0,totalTransactions:0}}}static async createUser(t){var r;try{const s=t.type.charAt(0).toUpperCase()+t.type.slice(1).toLowerCase();t.type=s;let{data:i,error:a}=await pe.auth.signUp({email:t.email,password:t.password,options:{data:{full_name:t.full_name,type:s,role:t.role||"user"}}});if(a||!(i!=null&&i.user)){console.warn("SignUp direct chou, tentative via edge function create-user-with-password:",a==null?void 0:a.message);try{const u=await fetch("/functions/v1/create-user-with-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password,full_name:t.full_name,type:s,role:t.role||"user"})}),d=await u.json().catch(()=>({}));if(!u.ok||d.error)throw new Error(d.error||`Edge function status ${u.status}`);i={user:{id:(r=d.user)==null?void 0:r.id,email:t.email}}}catch(u){throw console.error("Fallback edge function chou:",u),new Error(`Erreur d'authentification: ${(a==null?void 0:a.message)||u.message}`)}}const o={id:i.user.id,email:t.email,full_name:t.full_name,phone:t.phone,type:s,role:t.role||"user",metadata:{...t.metadata,creation_method:"admin_complete",password_generated:!0,created_by:"admin"},verification_status:"verified",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:l,error:c}=await pe.from("users").upsert(o,{onConflict:"id"}).select().single();if(c){console.error("Erreur cration profil:",c);try{await pe.auth.admin.deleteUser(i.user.id)}catch(u){console.warn("Impossible de nettoyer l'utilisateur auth:",u)}throw new Error(`Erreur de profil: ${c.message}`)}try{await this.createNotification({user_id:i.user.id,title:"Bienvenue sur Teranga Foncier",body:`Votre compte ${t.type} a t cr avec succs. Vous pouvez maintenant vous connecter et accder  toutes les fonctionnalits.`,type:"welcome",data:{user_type:t.type,creation_source:"admin",login_email:t.email}})}catch(u){console.warn("Notification de bienvenue choue:",u)}return{...l,auth_user:i.user,temporary_password:t.password}}catch(s){console.error("Erreur cration utilisateur:",s);try{await this.logEvent({entityType:"user",entityId:null,eventType:"user.create_failed",actorUserId:null,importance:80,source:"admin_dashboard",data:{email:t==null?void 0:t.email,type:t==null?void 0:t.type,error:s.message}})}catch{}throw s}}static async createInstitutionUser(t){var r,s;try{const i=t.type.charAt(0).toUpperCase()+t.type.slice(1).toLowerCase();t.type=i;const{data:a,error:o}=await pe.auth.signUp({email:t.email,password:t.password,options:{data:{full_name:t.full_name,type:i,role:t.role||"institution"}}});if(o)throw console.error("Erreur cration Auth:",o),new Error(`Erreur d'authentification: ${o.message}`);const l={id:a.user.id,email:t.email,full_name:t.full_name,phone:t.phone,type:i,role:t.role||"institution",metadata:{...t.metadata,location:t.location||{},creation_method:"admin_complete",password_generated:!0,institution_verified:!0,created_by:"admin"},verification_status:"verified",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:c,error:u}=await pe.from("users").upsert(l,{onConflict:"id"}).select().single();if(u){console.error("Erreur cration profil:",u);try{await pe.auth.admin.deleteUser(a.user.id)}catch(d){console.warn("Impossible de nettoyer l'utilisateur auth:",d)}throw new Error(`Erreur de profil: ${u.message}`)}try{await this.createNotification({user_id:a.user.id,title:"Bienvenue sur Teranga Foncier",body:`Votre compte ${t.type} a t cr avec succs. Vous pouvez maintenant vous connecter et accder  toutes les fonctionnalits.`,type:"institution_welcome",data:{institution_type:t.type,creation_source:"admin",login_email:t.email}})}catch(d){console.warn("Notification de bienvenue choue:",d)}try{await this.logEvent("institution_created",{institution_id:a.user.id,institution_type:t.type,institution_name:t.full_name,location:t.location,created_by:"admin",services_count:((r=t.metadata.services)==null?void 0:r.length)||((s=t.metadata.services_offered)==null?void 0:s.length)||0})}catch(d){console.warn("Log vnement chou:",d)}return{...c,auth_user:a.user,temporary_password:t.password}}catch(i){throw console.error("Erreur cration institution complte:",i),i}}static async ensureUserProfile(t){var r,s,i,a;if(!(t!=null&&t.id)||!(t!=null&&t.email))return null;try{const{data:o,error:l}=await pe.from("users").select("*").eq("id",t.id).maybeSingle();if(l)throw l;if(o)return o}catch(o){console.warn("ensureUserProfile fetch warning:",o.message||o)}try{const o={id:t.id,email:t.email,full_name:((r=t.user_metadata)==null?void 0:r.full_name)||t.email,type:((s=t.user_metadata)==null?void 0:s.type)||((i=t.user_metadata)==null?void 0:i.role_type)||"Particulier",role:((a=t.user_metadata)==null?void 0:a.role)||"user",verification_status:"not_verified",created_at:t.created_at,updated_at:new Date().toISOString()},{data:l,error:c}=await pe.from("users").upsert(o,{onConflict:"id",ignoreDuplicates:!1}).select().single();if(c)throw c;return l}catch(o){return console.error("ensureUserProfile upsert failed:",o.message||o),null}}static async createInstitutionProfile(t){try{const{data:r,error:s}=await pe.from("institution_profiles").insert([t]).select().single();if(s)throw s;return r}catch(r){return console.warn("Institution profile creation skipped/failed (table missing?)",r.message||r),null}}static async sendAuthInvitation(t,r="user"){try{const s=`${{}.VITE_EDGE_BASE_URL||""}/invite`;if(!s)throw new Error("EDGE endpoint non configur");const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,role:r})});if(!i.ok)throw new Error("chec envoi invitation");return await i.json()}catch(s){return console.warn("sendAuthInvitation fallback (non bloquant):",s.message||s),null}}static async createRequest(t){const{data:r,error:s}=await pe.from("requests").insert([t]).select().single();if(s)throw console.error("Erreur lors de la cration de la demande:",s),s;return this.logEvent({entityType:"request",entityId:r.id,eventType:"request.created",actorUserId:r.user_id,data:{type:r.request_type,status:r.status}}),r}static async createTransaction(t){const{data:r,error:s}=await pe.from("transactions").insert([t]).select().single();if(s)throw console.error("Erreur lors de la cration de la transaction:",s),s;return this.logEvent({entityType:"transaction",entityId:r.id,eventType:"transaction.created",actorUserId:r.user_id||null,data:{amount:r.amount,status:r.status}}),r}static async getVendeurProperties(t){try{const{data:r,error:s}=await pe.from("parcels").select("*").eq("owner_id",t).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(r){return console.error("Erreur rcupration biens vendeur:",r.message||r),[]}}static async createProperty(t){try{const r={...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:s,error:i}=await pe.from("parcels").insert([r]).select().single();if(i)throw i;return this.logEvent({entityType:"parcel",entityId:s.id,eventType:"parcel.created",actorUserId:s.owner_id,data:{status:s.status,price:s.price}}),s}catch(r){throw console.error("Erreur cration bien vendeur:",r.message||r),r}}static async updateProperty(t,r){try{const{data:s,error:i}=await pe.from("parcels").update({...r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return this.logEvent({entityType:"parcel",entityId:t,eventType:"parcel.updated",actorUserId:s.owner_id,data:{status:s.status,price:s.price}}),s}catch(s){throw console.error("Erreur mise  jour bien vendeur:",s.message||s),s}}static async updateParcel(t,r){return this.updateProperty(t,r)}static async getAgentClients(t){try{const{data:r,error:s}=await pe.from("users").select("id, full_name, email, type, created_at").eq("assigned_agent_id",t).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(r){return console.error("Erreur rcupration clients agent:",r.message||r),[]}}static async getAgentProperties(t){try{const{data:r,error:s}=await pe.from("parcels").select("*").eq("assigned_agent_id",t).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(r){return console.error("Erreur rcupration proprits agent:",r.message||r),[]}}static async getAgentSales(t){try{const{data:r,error:s}=await pe.from("transactions").select("*").eq("agent_id",t).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(r){return console.error("Erreur rcupration ventes agent:",r.message||r),[]}}static async getAgentAppointments(t){try{const{data:r,error:s}=await pe.from("appointments").select("*").eq("agent_id",t).gte("date",new Date(Date.now()-7776e6).toISOString()).order("date",{ascending:!1});if(s)throw s;return r||[]}catch(r){return console.error("Erreur rcupration rendez-vous agent:",r.message||r),[]}}static async getUsersByType(t){try{const{data:r,error:s}=await pe.from("users").select("id, full_name, email, type, role").eq("type",t).eq("is_active",!0).order("full_name");if(s)throw s;return r||[]}catch(r){return console.error("Erreur lors de la rcupration des utilisateurs par type:",r),[]}}static async getParcelsByOwner(t){try{const{data:r,error:s}=await pe.from("parcels").select("id, parcel_number, location, area_sqm, status").eq("owner_id",t).eq("status","disponible").order("parcel_number");if(s)throw s;return r||[]}catch(r){return console.error("Erreur lors de la rcupration des parcelles par propritaire:",r),[]}}static async getRequestsByRecipient(t,r){try{let s=pe.from("requests").select(`
          *,
          users:user_id (
            id, full_name, email, phone
          )
        `).eq("recipient_type",r).order("created_at",{ascending:!1});r==="mairie"?s=s.eq("mairie_id",t):r==="banque"&&(s=s.eq("banque_id",t));const{data:i,error:a}=await s;if(a)throw a;return i||[]}catch(s){return console.error("Erreur lors de la rcupration des demandes par destinataire:",s),[]}}static _genMunicipalRef(){const t=new Date,r=s=>String(s).padStart(2,"0");return`MR-${t.getFullYear()}${r(t.getMonth()+1)}${r(t.getDate())}-${Math.random().toString(36).substring(2,7).toUpperCase()}`}static _genListingRef(){const t=new Date,r=s=>String(s).padStart(2,"0");return`LS-${t.getFullYear()}${r(t.getMonth()+1)}${r(t.getDate())}-${Math.random().toString(36).substring(2,7).toUpperCase()}`}static async resolveMairieProfile({commune:t,department:r=null,region:s=null}){try{if(!t)return null;const i=m=>(m||"").normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase(),a=i(t),o=a.split(/[^a-z0-9]+/).filter(Boolean);let{data:l,error:c}=await pe.from("profiles").select("id, full_name, type").eq("type","mairie").ilike("full_name",`%${t}%`).limit(1);if(!c&&l&&l.length)return l[0].id;const{data:u,error:d}=await pe.from("profiles").select("id, full_name, type").eq("type","mairie").limit(200);if(d||!u)return null;const h=u.map(m=>{const p=i(m.full_name);let v=0;p.includes(a)&&(v+=15);const g=o.reduce((y,j)=>y+(p.includes(j)?1:0),0);return v+=g*3,r&&p.includes(i(r))&&(v+=3),s&&p.includes(i(s))&&(v+=1),{id:m.id,score:v}}).map(m=>m).sort((m,p)=>p.score-m.score);if(h.length&&h[0].score>=5)return h[0].id;try{const{data:m}=await pe.rpc("levenshtein_best_mairie",{target:t});if(m&&m.id)return m.id}catch{}return null}catch{return null}}static async createMunicipalRequest({requesterId:t,region:r,department:s,commune:i,requestType:a,areaSqm:o,message:l,documentIds:c=[],rawDocumentsMeta:u=[],mairieId:d=null,autoResolveMairie:h=!0}){try{const m=this._genMunicipalRef(),p={region:r,department:s,commune:i,area_sqm:o,message:l,document_ids:c,attachments_meta:u};let v=d;!v&&h&&(v=await this.resolveMairieProfile({commune:i,department:s,region:r}));const g={reference:m,requester_id:t,mairie_id:v,parcel_id:null,request_type:a,status:"Soumise",documents:p,priority:"normal",estimated_processing_time:null},{data:y,error:j}=await pe.from("municipal_requests").insert([g]).select().single();if(j)throw j;return y&&(this.logEvent({entityType:"municipal_request",entityId:y.id,eventType:"municipal_request.created",actorUserId:t,data:{region:r,department:s,commune:i,request_type:a,mairie_id:v}}),c&&c.length&&this.logEvent({entityType:"municipal_request",entityId:y.id,eventType:"municipal_request.documents_uploaded",actorUserId:t,importance:0,source:"ui",data:{count:c.length,document_ids:c}})),y}catch(m){throw console.error("Erreur cration municipal_request:",m.message||m),m}}static async logListingSubmission({userId:t=null,propertyType:r,surfaceArea:s,price:i,description:a,titleDeedNumber:o,documentsMeta:l=[],allRequiredProvided:c}){try{const u=this._genListingRef(),d={reference:u,property_type:r,surface_area:s,price:i,title_deed_number:o,description:a,documents_meta:l,all_required:c},h=await this.logEvent({entityType:"listing_submission",entityId:u,eventType:"listing.submitted",actorUserId:t,importance:1,source:"ui",data:d});return{reference:u,loggedEvent:h}}catch(u){return console.warn("logListingSubmission failed:",u.message||u),{reference:null,loggedEvent:null}}}static async createParcelSubmission({ownerId:t,reference:r,location:s,type:i="terrain",price:a=null,surface:o=null,documents:l=[],description:c=null}){try{const u=new Date().toISOString(),d={owner_id:t,reference:r||this._genListingRef(),location:s,type:i,price:a,surface:o,description:c,documents:l,status:"pending",created_at:u,updated_at:u},{data:h,error:m}=await pe.from("parcel_submissions").insert([d]).select().single();if(m)throw m;return this.logEvent({entityType:"parcel_submission",entityId:h.id,eventType:"parcel_submission.created",actorUserId:t,data:{reference:h.reference,type:i,price:a,surface:o}}),{...h,fallback:!1}}catch(u){console.warn("createParcelSubmission fallback -> events only:",u.message||u);const{reference:d}=await this.logListingSubmission({userId:t,propertyType:i,surfaceArea:o,price:a,description:c,titleDeedNumber:null,documentsMeta:l,allRequiredProvided:!1});return{id:d,reference:d,status:"pending",fallback:!0}}}static async listParcelSubmissionsByOwner(t,{status:r=null}={}){try{let s=pe.from("parcel_submissions").select("*").eq("owner_id",t).order("created_at",{ascending:!1}).limit(100);r&&(s=s.eq("status",r));const{data:i,error:a}=await s;if(a)throw a;return i||[]}catch{return[]}}static async listPendingParcelSubmissions({limit:t=200}={}){try{const{data:r,error:s}=await pe.from("parcel_submissions").select("*").eq("status","pending").order("created_at",{ascending:!1}).limit(t);if(s)throw s;return r||[]}catch{return[]}}static async listParcelSubmissions({status:t=null,limit:r=500}={}){try{let s=pe.from("parcel_submissions").select("*").order("created_at",{ascending:!1}).limit(r);t&&(s=s.eq("status",t));const{data:i,error:a}=await s;if(a)throw a;return i||[]}catch{return[]}}static async approveParcelSubmission(t,{reviewerId:r=null}={}){try{const{data:s,error:i}=await pe.from("parcel_submissions").select("*").eq("id",t).single();if(i)throw i;if(s.status!=="pending")return s;const a={reference:s.reference,location_name:s.location,type:s.type,price:s.price,area_sqm:s.surface,status:"available",owner_id:s.owner_id,owner_type:"Vendeur",verification_status:"verified"},o=await this.createProperty(a),{data:l,error:c}=await pe.from("parcel_submissions").update({status:"approved",approved_at:new Date().toISOString(),reviewer_id:r,parcel_id:o.id,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(c)throw c;this.logEvent({entityType:"parcel_submission",entityId:t,eventType:"parcel_submission.approved",actorUserId:r,data:{parcel_id:o.id}});try{this.createNotification({userId:s.owner_id,type:"parcel_submission",title:"Parcelle approuve",body:`Votre parcelle ${s.reference} est publie.`,data:{parcel_id:o.id}})}catch{}return l}catch(s){throw console.error("approveParcelSubmission failed",s.message||s),s}}static async rejectParcelSubmission(t,{reviewerId:r=null,reason:s=null}={}){try{const{data:i,error:a}=await pe.from("parcel_submissions").select("*").eq("id",t).single();if(a)throw a;if(i.status!=="pending")return i;const{data:o,error:l}=await pe.from("parcel_submissions").update({status:"rejected",rejected_at:new Date().toISOString(),rejection_reason:s,reviewer_id:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;this.logEvent({entityType:"parcel_submission",entityId:t,eventType:"parcel_submission.rejected",actorUserId:r,data:{reason:s}});try{this.createNotification({userId:i.owner_id,type:"parcel_submission",title:"Parcelle rejete",body:s||"Votre soumission de parcelle a t rejete.",data:{submission_id:t,reason:s}})}catch{}return o}catch(i){throw console.error("rejectParcelSubmission failed",i.message||i),i}}static async recordHomepageCta(t){try{await this.logEvent({entityType:"homepage",entityId:"root",eventType:"homepage.cta.click",actorUserId:null,source:"ui",importance:0,data:{label:t}})}catch{}}static async updateUser(t,r){const{data:s,error:i}=await pe.from("users").update(r).eq("id",t).select().single();if(i)throw console.error("Erreur lors de la mise  jour de l'utilisateur:",i),i;return s}static async updateRequestStatus(t,r,s=null){const i={status:r,updated_at:new Date().toISOString()};s&&(i.details=s);const{data:a,error:o}=await pe.from("requests").update(i).eq("id",t).select().single();if(o)throw console.error("Erreur lors de la mise  jour du statut de la demande:",o),o;a&&this.logEvent({entityType:"request",entityId:t,eventType:"request.status_updated",actorUserId:a.user_id,data:{new_status:r}});try{a!=null&&a.user_id&&this.createNotification({userId:a.user_id,type:"request_status",title:"Statut de votre demande mis  jour",body:`La demande #${t} est maintenant: ${r}.`,data:{request_id:t,status:r}})}catch{}return a}static async updateTransactionStatus(t,r){const{data:s,error:i}=await pe.from("transactions").update({status:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw console.error("Erreur lors de la mise  jour du statut de la transaction:",i),i;s&&this.logEvent({entityType:"transaction",entityId:t,eventType:"transaction.status_updated",actorUserId:s.user_id||null,data:{new_status:r}});try{[s==null?void 0:s.buyer_id,s==null?void 0:s.seller_id].filter(Boolean).forEach(o=>{o&&this.createNotification({userId:o,type:"transaction_status",title:"Transaction mise  jour",body:`La transaction #${t} est maintenant: ${r}.`,data:{transaction_id:t,status:r}})})}catch{}return s}static async updateBankGuaranteeStatus(t,r,s=null){try{const{data:i,error:a}=await pe.from("bank_guarantees").update({status:r,reviewed_at:new Date().toISOString(),reviewer_id:s||null,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;return this.logEvent({entityType:"bank_guarantee",entityId:t,eventType:"bank_guarantee.status_updated",actorUserId:s,data:{new_status:r}}),i!=null&&i.user_id&&this.createNotification({userId:i.user_id,type:"guarantee_status",title:"Garantie mise  jour",body:`Votre garantie #${t} est maintenant ${r}.`,data:{guarantee_id:t,status:r}}),i}catch(i){throw console.error("updateBankGuaranteeStatus failed",i.message||i),i}}static async updateFinancingRequestStatus(t,r,s=null,i=null){try{const{data:a,error:o}=await pe.from("financing_requests").update({status:r,decision_note:i,decided_at:new Date().toISOString(),reviewer_id:s||null,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(o)throw o;return this.logEvent({entityType:"financing_request",entityId:t,eventType:"financing_request.status_updated",actorUserId:s,data:{new_status:r}}),a!=null&&a.user_id&&this.createNotification({userId:a.user_id,type:"financing_status",title:"Demande de financement",body:`Votre demande #${t} est ${r}.`,data:{financing_request_id:t,status:r}}),a}catch(a){throw console.error("updateFinancingRequestStatus failed",a.message||a),a}}static async completeLandEvaluation(t,r=null,s=null,i=null){try{const a={status:"completed",completed_at:new Date().toISOString(),updated_at:new Date().toISOString()};s!==null&&(a.estimated_value=s),i&&(a.report=i),r&&(a.evaluator_id=r);const{data:o,error:l}=await pe.from("land_evaluations").update(a).eq("id",t).select().single();if(l)throw l;return this.logEvent({entityType:"land_evaluation",entityId:t,eventType:"land_evaluation.completed",actorUserId:r,data:{estimated_value:o==null?void 0:o.estimated_value}}),o}catch(a){throw console.error("completeLandEvaluation failed",a.message||a),a}}static async getUserFavorites(t){const{data:r,error:s}=await pe.from("favorites").select(`
        *,
        parcels:parcel_id (*)
      `).eq("user_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des favoris:",s),[]):r||[]}static async addToFavorites(t,r){const{data:s,error:i}=await pe.from("favorites").insert({user_id:t,parcel_id:r,created_at:new Date().toISOString()}).select().single();if(i)throw console.error("Erreur lors de l'ajout aux favoris:",i),i;this.logEvent({entityType:"parcel",entityId:r,eventType:"user.favorite_added",actorUserId:t,data:{favorite_id:s.id}});try{const{data:a}=await pe.from("parcels").select("owner_id, reference").eq("id",r).maybeSingle();a!=null&&a.owner_id&&a.owner_id!==t&&this.createNotification({userId:a.owner_id,type:"favorite_added",title:"Nouvel intrt pour votre parcelle",body:`Un utilisateur a ajout votre parcelle ${a.reference||r}  ses favoris.`,data:{parcel_id:r,favorite_id:s.id}})}catch{}return s}static async removeFromFavorites(t,r){const{error:s}=await pe.from("favorites").delete().eq("user_id",t).eq("parcel_id",r);if(s)throw console.error("Erreur lors de la suppression des favoris:",s),s;return this.logEvent({entityType:"parcel",entityId:r,eventType:"user.favorite_removed",actorUserId:t}),!0}static async isParcelFavorite(t,r){const{data:s,error:i}=await pe.from("favorites").select("id").eq("user_id",t).eq("parcel_id",r).single();return i&&i.code!=="PGRST116"?(console.error("Erreur lors de la vrification des favoris:",i),!1):!!s}static async getUserSavedSearches(t){const{data:r,error:s}=await pe.from("saved_searches").select("*").eq("user_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des recherches sauvegardes:",s),[]):r||[]}static async saveSearch(t,r){const{data:s,error:i}=await pe.from("saved_searches").insert({user_id:t,name:r.name,criteria:r.criteria,created_at:new Date().toISOString()}).select().single();if(i)throw console.error("Erreur lors de la sauvegarde de la recherche:",i),i;return s}static async deleteSavedSearch(t,r){const{error:s}=await pe.from("saved_searches").delete().eq("user_id",t).eq("id",r);if(s)throw console.error("Erreur lors de la suppression de la recherche:",s),s;return!0}static async getUserDocuments(t){const{data:r,error:s}=await pe.from("user_documents").select("*").eq("user_id",t).order("created_at",{ascending:!1});return s?(console.error("Erreur lors de la rcupration des documents:",s),[]):r||[]}static async uploadDocument(t,r){try{const s=`${t}/${Date.now()}-${r.name}`,{data:i,error:a}=await pe.storage.from("documents").upload(s,r);if(a)throw a;const{data:o,error:l}=await pe.from("user_documents").insert({user_id:t,name:r.name,file_path:i.path,file_size:r.size,mime_type:r.type,category:this.getCategoryFromFileName(r.name),verified:!1,created_at:new Date().toISOString()}).select().single();if(l)throw l;return this.logEvent({entityType:"document",entityId:o.id,eventType:"document.uploaded",actorUserId:t,source:"ui",data:{name:r.name,size:r.size,mime:r.type}}),o}catch(s){throw console.error("Erreur lors de l'upload du document:",s),this.logEvent({entityType:"document",entityId:"pending",eventType:"document.upload.failed",actorUserId:t,importance:0,source:"ui",data:{name:r==null?void 0:r.name,size:r==null?void 0:r.size,mime:r==null?void 0:r.type,error:s.message||String(s)}}),s}}static async getDocumentDownloadUrl(t){try{const{data:r,error:s}=await pe.from("user_documents").select("file_path").eq("id",t).single();if(s)throw s;const{data:i,error:a}=await pe.storage.from("documents").createSignedUrl(r.file_path,3600);if(a)throw a;return i.signedUrl}catch(r){throw console.error("Erreur lors de la gnration de l'URL:",r),r}}static getCategoryFromFileName(t){const r=t.toLowerCase();return r.includes("acte")||r.includes("notaire")?"Actes Notaris":r.includes("titre")||r.includes("propriete")?"Titres de Proprit":r.includes("plan")||r.includes("cadastre")?"Plans et Documents Techniques":r.includes("rapport")||r.includes("diligence")?"Rapports & Vrifications":"Autres Documents"}static async deleteUser(t){try{const{data:r,error:s}=await pe.from("users").update({is_active:!1,deleted_at:new Date().toISOString()}).eq("id",t).select("id");if(!s&&r&&r.length)return this.logEvent({entityType:"user",entityId:t,eventType:"user.soft_deleted",actorUserId:null,importance:1,source:"admin_ui"}),!0}catch{}try{const{error:r}=await pe.from("users").delete().eq("id",t);if(r)throw r;return this.logEvent({entityType:"user",entityId:t,eventType:"user.deleted",actorUserId:null,importance:2,source:"admin_ui"}),!0}catch(r){throw console.error("deleteUser failed:",r.message||r),r}}static async updateUserRole(t,r,s){const{data:i,error:a}=await pe.from("profiles").update({role:r,type:s,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw console.error("Erreur lors de la mise  jour du rle:",a),a;return i}static async getPromoteurProjects({promoteurId:t=null,status:r=null}={}){let s=pe.from("promoteur_projects").select("*").order("created_at",{ascending:!1});t&&(s=s.eq("promoteur_id",t)),r&&(s=s.eq("status",r));const{data:i,error:a}=await s;return a?(console.error("Erreur rcupration projets promoteur:",a.message||a),[]):i||[]}static async getPromoteurProjectById(t){const{data:r,error:s}=await pe.from("promoteur_projects").select("*").eq("id",t).single();return s?(console.error("Erreur rcupration projet promoteur:",s),null):r}static async updatePromoteurProjectStatus(t,r){try{const{data:s,error:i}=await pe.from("promoteur_projects").update({status:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return s&&this.logEvent({entityType:"promoteur_project",entityId:t,eventType:"project.status_updated",actorUserId:s.promoteur_id||null,data:{new_status:r}}),s}catch(s){throw console.error("Erreur mise  jour statut projet promoteur:",s.message||s),s}}static async getProjectUnits(t){const{data:r,error:s}=await pe.from("promoteur_project_units").select("*").eq("project_id",t).order("id");return s?(console.error("Erreur rcupration des lots du projet:",s.message||s),[]):r||[]}static async updateProjectUnitStatus(t,r){try{const{data:s,error:i}=await pe.from("promoteur_project_units").update({status:r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return s&&this.logEvent({entityType:"project_unit",entityId:t,eventType:"project_unit.status_updated",actorUserId:null,data:{new_status:r}}),s}catch(s){throw console.error("Erreur mise  jour statut lot projet:",s.message||s),s}}static async getUnitsForPromoteur(t){const{data:r,error:s}=await pe.from("promoteur_project_units").select("*, promoteur_projects!inner(id,name,promoteur_id)").eq("promoteur_projects.promoteur_id",t);return s?(console.error("Erreur rcupration des lots promoteur:",s.message||s),[]):r||[]}static async getAdminDashboardMetrics(){try{const[t,r,s,i,a]=await Promise.all([pe.from("users").select("id, created_at, role, type, assigned_agent_id, full_name, email, is_active, verification_status"),pe.from("parcels").select("id, status, area_sqm, owner_id, created_at"),pe.from("requests").select("id, request_type, status, user_id, recipient_type, created_at"),pe.from("transactions").select("id, amount, created_at, status, buyer_id, seller_id, type"),pe.from("contracts").select("id, status, user_id, parcel_id, created_at")]);for(const V of[t,r,s,i,a])if(V.error)throw V.error;const o=(t.data||[]).filter(V=>V.is_active!==!1&&!V.deleted_at&&V.status!=="deleted"),l=r.data||[],c=s.data||[],u=i.data||[],d=a.data||[],h=o.length,m=l.length,p=c.length,v=u.filter(V=>V.status==="completed").reduce((V,ne)=>V+(ne.amount||0),0),g=V=>new Date(V).toLocaleString("fr-FR",{month:"short",year:"numeric"}),y=(V,ne)=>{const G={};return V.forEach(K=>{const ee=g(K[ne]);G[ee]=(G[ee]||0)+1}),Object.entries(G).map(([K,ee])=>({name:K,value:ee})).sort((K,ee)=>new Date(K.name)-new Date(ee.name))},j=(V,ne,G)=>{const K={};return V.forEach(ee=>{const xe=g(ee[ne]);K[xe]=(K[xe]||0)+(ee[G]||0)}),Object.entries(K).map(([ee,xe])=>({name:ee,amount:xe})).sort((ee,xe)=>new Date(ee.name)-new Date(xe.name))},_=y(o,"created_at"),w=j(u.filter(V=>V.status==="completed"),"created_at","amount"),A=l.reduce((V,ne)=>(V[ne.status]=(V[ne.status]||0)+1,V),{}),S=Object.entries(A).map(([V,ne])=>({name:V,value:ne,unit:"parcelles"})),P=c.reduce((V,ne)=>(V[ne.request_type]=(V[ne.request_type]||0)+1,V),{}),C=Object.entries(P).map(([V,ne])=>({name:V,value:ne,unit:"demandes"})),T=o.filter(V=>V.type==="Vendeur"),M=o.filter(V=>V.type==="Particulier"),z=o.filter(V=>V.type==="Mairie"),O=o.filter(V=>V.type==="Banque"),I=o.filter(V=>V.type==="Notaire"),q=o.filter(V=>V.role==="agent"),F={vendeur:{parcellesListees:l.filter(V=>V.owner_id&&T.some(ne=>ne.id===V.owner_id)).length,transactionsReussies:u.filter(V=>V.status==="completed"&&V.seller_id&&T.some(ne=>ne.id===V.seller_id)).length},particulier:{demandesSoumises:c.filter(V=>V.user_id&&M.some(ne=>ne.id===V.user_id)).length,acquisitions:u.filter(V=>V.status==="completed"&&V.buyer_id&&M.some(ne=>ne.id===V.buyer_id)).length},mairie:{parcellesCommunales:l.filter(V=>V.owner_id&&z.some(ne=>ne.id===V.owner_id)).length,demandesTraitees:c.filter(V=>V.status==="completed"&&V.recipient_type==="Mairie").length},banque:{pretsAccordes:u.filter(V=>V.type==="loan"&&V.status==="completed").length,garantiesEvaluees:l.filter(V=>V.status==="evaluated_as_guarantee").length},notaire:{dossiersTraites:c.filter(V=>V.status==="completed"&&V.recipient_type==="Notaire").length,actesAuthentifies:d.filter(V=>V.status==="signed").length},agent:{clientsAssignes:o.filter(V=>V.assigned_agent_id&&q.some(ne=>ne.id===V.assigned_agent_id)).length,visitesPlanifiees:c.filter(V=>V.request_type==="visit"&&V.status==="pending").length}};let W=[];try{const{data:V,error:ne}=await pe.from("events").select("id,title,start_time,location,type").gte("start_time",new Date().toISOString()).order("start_time",{ascending:!0}).limit(5);!ne&&V&&(W=V.map(G=>({id:G.id,title:G.title,date:G.start_time,location:G.location,type:G.type})))}catch{}return{totals:{totalUsers:h,totalParcels:m,totalRequests:p,totalSalesAmount:v},charts:{userRegistrations:_,parcelStatus:S,requestTypes:C,monthlySales:w},actorStats:F,upcomingEvents:W}}catch(t){throw console.error("Erreur agrgation admin dashboard:",t),t}}static async listInstitutions({regionId:t=null,type:r=null,status:s=null,limit:i=100}={}){return this.listInstitutionsPaged({regionId:t,type:r,status:s,page:1,pageSize:i,sortBy:"created_at",sortDir:"desc"})}static async listInstitutionsPaged({regionId:t=null,type:r=null,status:s=null,page:i=1,pageSize:a=12,sortBy:o="created_at",sortDir:l="desc",createdAfter:c=null,createdBefore:u=null}={}){try{const d=(i-1)*a,h=d+a-1;["created_at","name","status"].includes(o)||(o="created_at");const p=l==="asc";let v=pe.from("institution_profiles").select(`id, user_id, institution_type, name, slug, status, created_at, region_id, department_id, commune_id, metadata,
          users:user_id (full_name, email, role, verification_status),
          regions:region_id (name),
          departments:department_id (name),
          communes:commune_id (name)
        `,{count:"exact"}).order(o,{ascending:p}).range(d,h);t&&(v=v.eq("region_id",t)),r&&(v=v.eq("institution_type",r)),s&&(v=v.eq("status",s)),c&&(v=v.gte("created_at",c)),u&&(v=v.lte("created_at",u));const{data:g,error:y,count:j}=await v;if(y)throw y;return{data:g||[],total:j||0,page:i,pageSize:a}}catch(d){return console.warn("listInstitutionsPaged fallback (table missing?):",d.message||d),{data:[],total:0,page:i,pageSize:a}}}static async getInstitutionStatusCounts({regionId:t=null,type:r=null,createdAfter:s=null,createdBefore:i=null}={}){try{let a=pe.from("institution_profiles").select("status, count:id",{group:"status"});t&&(a=a.eq("region_id",t)),r&&(a=a.eq("institution_type",r)),s&&(a=a.gte("created_at",s)),i&&(a=a.lte("created_at",i));const{data:o,error:l}=await a;if(l)throw l;const c={pending:0,active:0,suspended:0};return(o||[]).forEach(u=>{c[u.status]=u.count}),c}catch(a){return console.warn("getInstitutionStatusCounts failed:",a.message||a),{pending:0,active:0,suspended:0}}}static async listAuditLogs({page:t=1,pageSize:r=50,eventType:s=null,actorUserId:i=null,targetUserId:a=null,sortDir:o="desc",createdAfter:l=null,createdBefore:c=null}={}){try{const u=(t-1)*r,d=u+r-1;let h=pe.from("audit_logs").select("id, event_type, actor_user_id, target_user_id, target_table, target_id, metadata, created_at",{count:"exact"}).order("created_at",{ascending:o==="asc"}).range(u,d);s&&(h=h.eq("event_type",s)),i&&(h=h.eq("actor_user_id",i)),a&&(h=h.eq("target_user_id",a)),l&&(h=h.gte("created_at",l)),c&&(h=h.lte("created_at",c));const{data:m,error:p,count:v}=await h;if(p)throw p;return{data:m||[],total:v||0,page:t,pageSize:r}}catch(u){return console.warn("listAuditLogs failed:",u.message||u),{data:[],total:0,page:t,pageSize:r}}}static async listEvents({entityType:t=null,entityId:r=null,page:s=1,pageSize:i=50,eventType:a=null,importanceMin:o=null,createdAfter:l=null,createdBefore:c=null,source:u=null}={}){try{const d=(s-1)*i,h=d+i-1;let m=pe.from("events").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(d,h);t&&(m=m.eq("entity_type",t)),r&&(m=m.eq("entity_id",String(r))),a&&(m=m.eq("event_type",a)),o!=null&&(m=m.gte("importance",o)),l&&(m=m.gte("created_at",l)),c&&(m=m.lte("created_at",c)),u&&(m=m.eq("source",u));const{data:p,error:v,count:g}=await m;if(v)throw v;return{data:p||[],total:g||0,page:s,pageSize:i}}catch(d){return console.warn("listEvents failed:",d.message||d),{data:[],total:0,page:s,pageSize:i}}}static async getParcelTimeline(t,{page:r=1,pageSize:s=50}={}){try{const i=(r-1)*s,a=i+s-1;let o=!0,{data:l,error:c,count:u}=await pe.from("parcel_timeline").select("*",{count:"exact"}).eq("parcel_id",t).order("created_at",{ascending:!1}).range(i,a);if(c&&(o=!1),!o){const d=await this.listEvents({entityType:"parcel",entityId:t,page:r,pageSize:s});return{data:d.data.map(h=>({...h,source_type:"event"})),total:d.total,page:r,pageSize:s}}return{data:l||[],total:u||0,page:r,pageSize:s}}catch(i){return console.warn("getParcelTimeline failed:",i.message||i),{data:[],total:0,page:r,pageSize:s}}}static async logEvent({entityType:t,entityId:r,eventType:s,actorUserId:i=null,importance:a=0,source:o="system",data:l={}}){try{this._configLoaded||(await this._loadEventConfig(),this._configLoaded=!0);const c=`${t}|${r}|${s}|${a}`;if(!this._canSendEvent(c))return null;const u={entity_type:t,entity_id:String(r),event_type:s,actor_user_id:i,importance:a,source:o,data:l},{data:d,error:h}=await pe.from("events").insert([u]).select().single();if(h)throw h;return d}catch(c){return console.warn("logEvent failed:",c.message||c),null}}static toCSV(t,r){const s=r.map(a=>`"${a.label}"`).join(","),i=t.map(a=>r.map(o=>{let l=o.accessor(a);return l==null&&(l=""),`"${String(l).replace(/"/g,'""')}"`}).join(","));return[s,...i].join(`
`)}static downloadCSV(t,r){const s=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download=t,a.click(),setTimeout(()=>URL.revokeObjectURL(i),2e3)}},Ga(fp,"_eventRecentCache",new Map),Ga(fp,"_eventWindowMs",5e3),Ga(fp,"_eventMaxQueue",200),Ga(fp,"_configLoaded",!1),fp);const Ez=x.createContext(null),Tz=({children:e})=>{const{toast:t}=pt(),[r,s]=x.useState(null),[i,a]=x.useState(null),[o,l]=x.useState(null),[c,u]=x.useState(!0),d=x.useCallback(async p=>{var v,g,y,j,_,w,A,S,P;if(!p)return null;try{console.log("Rcupration du profil pour:",p.email,"ID:",p.id);let{data:C,error:T}=await pe.from("users").select("*").eq("id",p.id).maybeSingle();if(!C&&!T){console.log("Profil non trouv par ID, tentative par email...");const z=await pe.from("users").select("*").eq("email",p.email).maybeSingle();C=z.data,T=z.error}if(T)return console.error("Erreur lors de la rcupration du profil:",T.message),T.code==="PGRST301"||T.message.includes("406")?(console.log("Cration d'un profil de base  partir des mtadonnes utilisateur"),{id:p.id,email:p.email,full_name:((v=p.user_metadata)==null?void 0:v.full_name)||p.email,type:((g=p.user_metadata)==null?void 0:g.type)||"Particulier",role:((y=p.user_metadata)==null?void 0:y.role)||"user",verification_status:"verified",created_at:p.created_at,updated_at:new Date().toISOString()}):null;if(C){let z={...C};return C.email&&["admin@teranga.com","superadmin@teranga.com"].includes(C.email)&&(z.role="admin",z.type="Administrateur"),(C.role==="admin"||C.type==="Administrateur")&&(C.role!=="admin"||C.type!=="Administrateur")&&(z.role="admin",z.type="Administrateur"),console.log("Profil rcupr:",{email:z.email,type:z.type,role:z.role,verification_status:z.verification_status}),z}console.log("Profil introuvable, tentative ensureUserProfile");const M=await Je.ensureUserProfile(p);return M||{id:p.id,email:p.email,full_name:((j=p.user_metadata)==null?void 0:j.full_name)||p.email,type:((_=p.user_metadata)==null?void 0:_.type)||"Particulier",role:((w=p.user_metadata)==null?void 0:w.role)||"user",verification_status:"not_verified",created_at:p.created_at,updated_at:new Date().toISOString()}}catch(C){return console.error("Erreur inattendue lors de la rcupration du profil:",C),{id:p.id,email:p.email,full_name:((A=p.user_metadata)==null?void 0:A.full_name)||p.email,type:((S=p.user_metadata)==null?void 0:S.type)||"Particulier",role:((P=p.user_metadata)==null?void 0:P.role)||"user",verification_status:"not_verified",created_at:p.created_at,updated_at:new Date().toISOString()}}},[]);x.useEffect(()=>{(async()=>{const{data:{session:g}}=await pe.auth.getSession();if(l(g),g){const y=await d(g.user);s(g.user),a(y)}u(!1)})();const{data:{subscription:v}}=pe.auth.onAuthStateChange(async(g,y)=>{if(l(y),y){const j=await d(y.user);s(y.user),a(j)}else s(null),a(null);c&&u(!1)});return()=>{v==null||v.unsubscribe()}},[d,c]);const h=async p=>{if(!r)throw new Error("Utilisateur non authentifi");const{data:v,error:g}=await pe.from("users").update({full_name:p.name,phone:p.phone,updated_at:new Date().toISOString()}).eq("id",r.id).select().single();if(g)throw g;return await m.refreshUser(),v},m={session:o,user:r,profile:i,loading:c,isAuthenticated:!!r,isAdmin:(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.type)==="Administrateur",isVerified:(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.type)==="Administrateur"?!0:(i==null?void 0:i.verification_status)==="verified",needsVerification:(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.type)==="Administrateur"?!1:!!i&&!["verified","pending"].includes(i.verification_status),isPendingVerification:(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.type)==="Administrateur"?!1:(i==null?void 0:i.verification_status)==="pending",updateUserProfile:h,signOut:async()=>{try{u(!0),s(null),a(null),l(null),localStorage.clear(),sessionStorage.clear();const{error:p}=await pe.auth.signOut({scope:"global"});p&&console.error("Erreur lors de la dconnexion:",p),t({title:"Dconnexion russie",description:" bientt !",duration:2e3}),window.location.href="/"}catch(p){console.error("Erreur signOut:",p),t({variant:"destructive",title:"Erreur de dconnexion",description:"Dconnexion force effectue",duration:3e3}),s(null),a(null),l(null),localStorage.clear(),window.location.href="/"}finally{u(!1)}},refreshUser:async()=>{const{data:{user:p}}=await pe.auth.getUser();if(p){const v=await d(p);s(p),a(v)}}};return n.jsx(Ez.Provider,{value:m,children:c?n.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:n.jsx(Tt,{size:"large"})}):e})},ar=()=>{const e=x.useContext(Ez);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Oz=()=>n.jsxs("div",{className:"max-w-3xl mx-auto py-8 space-y-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Notifications Administrateur"}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Alertes Systme"}),n.jsx(jt,{children:"Notifications critiques, alertes scurit, logs importants."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",disabled:!0,children:"Aucune alerte critique (exemple)"})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Notifications Gnrales"}),n.jsx(jt,{children:"vnements, mises  jour, informations importantes pour ladmin."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",disabled:!0,children:"Aucune notification gnrale (exemple)"})})]})]}),$oe=()=>{const{toast:e}=pt();return n.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Paramtres Administrateur"}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Gestion des Accs & Rles"}),n.jsx(jt,{children:"Configurer les rles, droits et accs globaux  la plateforme."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",onClick:()=>e({title:"Fonctionnalit  venir",description:"Gestion avance des rles prochainement."}),children:"Grer les rles et accs"})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Scurit & Journalisation"}),n.jsx(jt,{children:"Configurer la scurit globale et consulter les logs dactivit."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",onClick:()=>e({title:"Fonctionnalit  venir",description:"Logs et scurit avance prochainement."}),children:"Voir les logs & options scurit"})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Configuration Systme"}),n.jsx(jt,{children:"Paramtrer les options globales de la plateforme (notifications, intgrations, etc.)."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",onClick:()=>e({title:"Fonctionnalit  venir",description:"Configuration systme prochainement."}),children:"Configurer le systme"})})]})]})},Lz=()=>{var r;const{user:e,profile:t}=ar();return n.jsxs("div",{className:"max-w-3xl mx-auto py-8 space-y-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Profil Administrateur"}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Informations du Super Admin"}),n.jsx(jt,{children:"Identit, email, rle, dernire connexion, etc."})]}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Nom :"})," ",(t==null?void 0:t.full_name)||((r=e==null?void 0:e.user_metadata)==null?void 0:r.full_name)||"---"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Email :"})," ",e==null?void 0:e.email]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Rle :"})," ",(t==null?void 0:t.role)||"admin"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Dernire connexion :"})," ",(t==null?void 0:t.last_login)||"---"]})]})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Scurit du Compte"}),n.jsx(jt,{children:"Modifier le mot de passe administrateur."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",disabled:!0,children:"Changer le mot de passe ( implmenter)"})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Logs de Connexion"}),n.jsx(jt,{children:"Historique des connexions admin ( venir)."})]}),n.jsx(ve,{children:n.jsx(Y,{variant:"outline",disabled:!0,children:"Voir les logs ( implmenter)"})})]})]})},Foe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0);return x.useEffect(()=>{(async()=>{s(!0);const{data:a,error:o}=await pe.from("audit_logs").select("id, action, actor_user_id, target_user_id, description, created_at").eq("entity_type","banque").order("created_at",{ascending:!1});t(a||[]),s(!1)})()},[]),n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Logs d'audit Banque"}),r?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-3",children:e.length===0?n.jsx("p",{children:"Aucun log trouv."}):e.map(i=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:i.action})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Par: ",i.actor_user_id," | Cible: ",i.target_user_id]}),n.jsx("div",{className:"text-sm",children:i.description}),n.jsx("div",{className:"text-xs text-gray-400",children:new Date(i.created_at).toLocaleString()})]})]},i.id))})]})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ny.apply(this,arguments)}var Hd;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hd||(Hd={}));const S6="popstate";function zoe(e){e===void 0&&(e={});function t(s,i){let{pathname:a,search:o,hash:l}=s.location;return PA("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:jj(i)}return qoe(t,r,null,e)}function Un(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Mz(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Boe(){return Math.random().toString(36).substr(2,8)}function A6(e,t){return{usr:e.state,key:e.key,idx:t}}function PA(e,t,r,s){return r===void 0&&(r=null),Ny({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?cx(t):t,{state:r,key:t&&t.key||s||Boe()})}function jj(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function cx(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function qoe(e,t,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l=Hd.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ny({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Hd.Pop;let y=d(),j=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:j})}function m(y,j){l=Hd.Push;let _=PA(g.location,y,j);r&&r(_,y),u=d()+1;let w=A6(_,u),A=g.createHref(_);try{o.pushState(w,"",A)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(A)}a&&c&&c({action:l,location:g.location,delta:1})}function p(y,j){l=Hd.Replace;let _=PA(g.location,y,j);r&&r(_,y),u=d();let w=A6(_,u),A=g.createHref(_);o.replaceState(w,"",A),a&&c&&c({action:l,location:g.location,delta:0})}function v(y){let j=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof y=="string"?y:jj(y);return _=_.replace(/ $/,"%20"),Un(j,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,j)}let g={get action(){return l},get location(){return e(i,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(S6,h),c=y,()=>{i.removeEventListener(S6,h),c=null}},createHref(y){return t(i,y)},createURL:v,encodeLocation(y){let j=v(y);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:p,go(y){return o.go(y)}};return g}var P6;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(P6||(P6={}));function Voe(e,t,r){return r===void 0&&(r="/"),Uoe(e,t,r,!1)}function Uoe(e,t,r,s){let i=typeof t=="string"?cx(t):t,a=bg(i.pathname||"/",r);if(a==null)return null;let o=Iz(e);Hoe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=rle(a);l=ele(o[c],u,s)}return l}function Iz(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Un(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=nh([s,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(Un(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Iz(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:Joe(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of Rz(a.path))i(a,o,c)}),t}function Rz(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=Rz(s.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Hoe(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Qoe(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Woe=/^:[\w-]+$/,Goe=3,Koe=2,Zoe=1,Xoe=10,Yoe=-2,C6=e=>e==="*";function Joe(e,t){let r=e.split("/"),s=r.length;return r.some(C6)&&(s+=Yoe),t&&(s+=Koe),r.filter(i=>!C6(i)).reduce((i,a)=>i+(Woe.test(a)?Goe:a===""?Zoe:Xoe),s)}function Qoe(e,t){return e.length===t.length&&e.slice(0,-1).every((s,i)=>s===t[i])?e[e.length-1]-t[t.length-1]:0}function ele(e,t,r){r===void 0&&(r=!1);let{routesMeta:s}=e,i={},a="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=wj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!s[s.length-1].route.index&&(h=wj({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:nh([a,h.pathname]),pathnameBase:ale(nh([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=nh([a,h.pathnameBase]))}return o}function wj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=tle(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let g=l[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function tle(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Mz(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),s]}function rle(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Mz(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function nle(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:i=""}=typeof e=="string"?cx(e):e;return{pathname:r?r.startsWith("/")?r:sle(r,t):t,search:ole(s),hash:lle(i)}}function sle(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function e5(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ile(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function jk(e,t){let r=ile(e);return t?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function wk(e,t,r,s){s===void 0&&(s=!1);let i;typeof e=="string"?i=cx(e):(i=Ny({},e),Un(!i.pathname||!i.pathname.includes("?"),e5("?","pathname","search",i)),Un(!i.pathname||!i.pathname.includes("#"),e5("#","pathname","hash",i)),Un(!i.search||!i.search.includes("#"),e5("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=nle(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const nh=e=>e.join("/").replace(/\/\/+/g,"/"),ale=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ole=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lle=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cle(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Dz=["post","put","patch","delete"];new Set(Dz);const ule=["get",...Dz];new Set(ule);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sy.apply(this,arguments)}const j2=x.createContext(null),$z=x.createContext(null),Gu=x.createContext(null),w2=x.createContext(null),Ec=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Fz=x.createContext(null);function dle(e,t){let{relative:r}=t===void 0?{}:t;ux()||Un(!1);let{basename:s,navigator:i}=x.useContext(Gu),{hash:a,pathname:o,search:l}=_2(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:nh([s,o])),i.createHref({pathname:c,search:l,hash:a})}function ux(){return x.useContext(w2)!=null}function Di(){return ux()||Un(!1),x.useContext(w2).location}function zz(e){x.useContext(Gu).static||x.useLayoutEffect(e)}function kn(){let{isDataRoute:e}=x.useContext(Ec);return e?Ale():hle()}function hle(){ux()||Un(!1);let e=x.useContext(j2),{basename:t,future:r,navigator:s}=x.useContext(Gu),{matches:i}=x.useContext(Ec),{pathname:a}=Di(),o=JSON.stringify(jk(i,r.v7_relativeSplatPath)),l=x.useRef(!1);return zz(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=wk(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:nh([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,o,a,e])}const fle=x.createContext(null);function mle(e){let t=x.useContext(Ec).outlet;return t&&x.createElement(fle.Provider,{value:e},t)}function _k(){let{matches:e}=x.useContext(Ec),t=e[e.length-1];return t?t.params:{}}function _2(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=x.useContext(Gu),{matches:i}=x.useContext(Ec),{pathname:a}=Di(),o=JSON.stringify(jk(i,s.v7_relativeSplatPath));return x.useMemo(()=>wk(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function ple(e,t){return gle(e,t)}function gle(e,t,r,s){ux()||Un(!1);let{navigator:i}=x.useContext(Gu),{matches:a}=x.useContext(Ec),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Di(),d;if(t){var h;let y=typeof t=="string"?cx(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||Un(!1),d=y}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=Voe(e,{pathname:p}),g=jle(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:nh([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:nh([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r,s);return t&&g?x.createElement(w2.Provider,{value:{location:Sy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Hd.Pop}},g):g}function xle(){let e=Sle(),t=cle(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:i},r):null,a)}const vle=x.createElement(xle,null);class yle extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Ec.Provider,{value:this.props.routeContext},x.createElement(Fz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ble(e){let{routeContext:t,match:r,children:s}=e,i=x.useContext(j2);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Ec.Provider,{value:t},s)}function jle(e,t,r,s){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Un(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:p}=r,v=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let p,v=!1,g=null,y=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||vle,c&&(u<0&&m===0?(Ple("route-fallback",!1),v=!0,y=null):u===m&&(v=!0,y=h.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,m+1)),_=()=>{let w;return p?w=g:v?w=y:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,x.createElement(ble,{match:h,routeContext:{outlet:d,matches:j,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?x.createElement(yle,{location:r.location,revalidation:r.revalidation,component:g,error:p,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):_()},null)}var Bz=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Bz||{}),_j=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_j||{});function wle(e){let t=x.useContext(j2);return t||Un(!1),t}function _le(e){let t=x.useContext($z);return t||Un(!1),t}function Nle(e){let t=x.useContext(Ec);return t||Un(!1),t}function qz(e){let t=Nle(),r=t.matches[t.matches.length-1];return r.route.id||Un(!1),r.route.id}function Sle(){var e;let t=x.useContext(Fz),r=_le(_j.UseRouteError),s=qz(_j.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Ale(){let{router:e}=wle(Bz.UseNavigateStable),t=qz(_j.UseNavigateStable),r=x.useRef(!1);return zz(()=>{r.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Sy({fromRouteId:t},a)))},[e,t])}const k6={};function Ple(e,t,r){!t&&!k6[e]&&(k6[e]=!0)}function Cle(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function yl(e){let{to:t,replace:r,state:s,relative:i}=e;ux()||Un(!1);let{future:a,static:o}=x.useContext(Gu),{matches:l}=x.useContext(Ec),{pathname:c}=Di(),u=kn(),d=wk(t,jk(l,a.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(h),{replace:r,state:s,relative:i}),[u,h,i,r,s]),null}function Nk(e){return mle(e.context)}function rt(e){Un(!1)}function kle(e){let{basename:t="/",children:r=null,location:s,navigationType:i=Hd.Pop,navigator:a,static:o=!1,future:l}=e;ux()&&Un(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:a,static:o,future:Sy({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof s=="string"&&(s=cx(s));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:v="default"}=s,g=x.useMemo(()=>{let y=bg(d,c);return y==null?null:{location:{pathname:y,search:h,hash:m,state:p,key:v},navigationType:i}},[c,d,h,m,p,v,i]);return g==null?null:x.createElement(Gu.Provider,{value:u},x.createElement(w2.Provider,{children:r,value:g}))}function Ele(e){let{children:t,location:r}=e;return ple(CA(t),r)}new Promise(()=>{});function CA(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(s,i)=>{if(!x.isValidElement(s))return;let a=[...t,i];if(s.type===x.Fragment){r.push.apply(r,CA(s.props.children,a));return}s.type!==rt&&Un(!1),!s.props.index||!s.props.children||Un(!1);let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=CA(s.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nj(){return Nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nj.apply(this,arguments)}function Vz(e,t){if(e==null)return{};var r={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Tle(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ole(e,t){return e.button===0&&(!t||t==="_self")&&!Tle(e)}const Lle=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Mle=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ile="6";try{window.__reactRouterVersion=Ile}catch{}const Rle=x.createContext({isTransitioning:!1}),Dle="startTransition",E6=u4[Dle];function $le(e){let{basename:t,children:r,future:s,window:i}=e,a=x.useRef();a.current==null&&(a.current=zoe({window:i,v5Compat:!0}));let o=a.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=x.useCallback(h=>{u&&E6?E6(()=>c(h)):c(h)},[c,u]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.useEffect(()=>Cle(s),[s]),x.createElement(kle,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Fle=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zle=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=x.forwardRef(function(t,r){let{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=Vz(t,Lle),{basename:p}=x.useContext(Gu),v,g=!1;if(typeof u=="string"&&zle.test(u)&&(v=u,Fle))try{let w=new URL(window.location.href),A=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=bg(A.pathname,p);A.origin===w.origin&&S!=null?u=S+A.search+A.hash:g=!0}catch{}let y=dle(u,{relative:i}),j=qle(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:h});function _(w){s&&s(w),w.defaultPrevented||j(w)}return x.createElement("a",Nj({},m,{href:v||y,onClick:g||a?s:_,ref:r,target:c}))}),gu=x.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:i=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=Vz(t,Mle),m=_2(c,{relative:h.relative}),p=Di(),v=x.useContext($z),{navigator:g,basename:y}=x.useContext(Gu),j=v!=null&&Vle(m)&&u===!0,_=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,w=p.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(w=w.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&y&&(A=bg(A,y)||A);const S=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=w===_||!o&&w.startsWith(_)&&w.charAt(S)==="/",C=A!=null&&(A===_||!o&&A.startsWith(_)&&A.charAt(_.length)==="/"),T={isActive:P,isPending:C,isTransitioning:j},M=P?s:void 0,z;typeof a=="function"?z=a(T):z=[a,P?"active":null,C?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(T):l;return x.createElement(dt,Nj({},h,{"aria-current":M,className:z,ref:r,style:O,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var kA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(kA||(kA={}));var T6;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(T6||(T6={}));function Ble(e){let t=x.useContext(j2);return t||Un(!1),t}function qle(e,t){let{target:r,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=kn(),u=Di(),d=_2(e,{relative:o});return x.useCallback(h=>{if(Ole(h,r)){h.preventDefault();let m=s!==void 0?s:jj(u)===jj(d);c(e,{replace:m,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,s,i,r,e,a,o,l])}function Vle(e,t){t===void 0&&(t={});let r=x.useContext(Rle);r==null&&Un(!1);let{basename:s}=Ble(kA.useViewTransitionState),i=_2(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=bg(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=bg(r.nextLocation.pathname,s)||r.nextLocation.pathname;return wj(i.pathname,o)!=null||wj(i.pathname,a)!=null}function ft(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Ule(e,t){const r=x.createContext(t),s=a=>{const{children:o,...l}=a,c=x.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:o})};s.displayName=e+"Provider";function i(a){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,i]}function ws(e,t=[]){let r=[];function s(a,o){const l=x.createContext(o),c=r.length;r=[...r,o];const u=h=>{var j;const{scope:m,children:p,...v}=h,g=((j=m==null?void 0:m[e])==null?void 0:j[c])||l,y=x.useMemo(()=>v,Object.values(v));return n.jsx(g.Provider,{value:y,children:p})};u.displayName=a+"Provider";function d(h,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,v=x.useContext(p);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const i=()=>{const a=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[s,Hle(i,...t)]}function Hle(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Ph(e){const t=e+"CollectionProvider",[r,s]=ws(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:j}=g,_=we.useRef(null),w=we.useRef(new Map).current;return n.jsx(i,{scope:y,itemMap:w,collectionRef:_,children:j})};o.displayName=t;const l=e+"CollectionSlot",c=Kf(l),u=we.forwardRef((g,y)=>{const{scope:j,children:_}=g,w=a(l,j),A=Gt(y,w.collectionRef);return n.jsx(c,{ref:A,children:_})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Kf(d),p=we.forwardRef((g,y)=>{const{scope:j,children:_,...w}=g,A=we.useRef(null),S=Gt(y,A),P=a(d,j);return we.useEffect(()=>(P.itemMap.set(A,{ref:A,...w}),()=>void P.itemMap.delete(A))),n.jsx(m,{[h]:"",ref:S,children:_})});p.displayName=d;function v(g){const y=a(e+"CollectionConsumer",g);return we.useCallback(()=>{const _=y.collectionRef.current;if(!_)return[];const w=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((P,C)=>w.indexOf(P.ref.current)-w.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},v,s]}var Wle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_t=Wle.reduce((e,t)=>{const r=Kf(`Primitive.${t}`),s=x.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Ay(e,t){e&&wh.flushSync(()=>e.dispatchEvent(t))}function ts(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function Gle(e,t=globalThis==null?void 0:globalThis.document){const r=ts(e);x.useEffect(()=>{const s=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var Kle="DismissableLayer",EA="dismissableLayer.update",Zle="dismissableLayer.pointerDownOutside",Xle="dismissableLayer.focusOutside",O6,Uz=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dx=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=x.useContext(Uz),[d,h]=x.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),v=Gt(t,C=>h(C)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=g.indexOf(y),_=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,A=_>=j,S=Jle(C=>{const T=C.target,M=[...u.branches].some(z=>z.contains(T));!A||M||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),P=Qle(C=>{const T=C.target;[...u.branches].some(z=>z.contains(T))||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return Gle(C=>{_===u.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),x.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(O6=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),L6(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=O6)}},[d,m,r,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),L6())},[d,u]),x.useEffect(()=>{const C=()=>p({});return document.addEventListener(EA,C),()=>document.removeEventListener(EA,C)},[]),n.jsx(_t.div,{...c,ref:v,style:{pointerEvents:w?A?"auto":"none":void 0,...e.style},onFocusCapture:ft(e.onFocusCapture,P.onFocusCapture),onBlurCapture:ft(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ft(e.onPointerDownCapture,S.onPointerDownCapture)})});dx.displayName=Kle;var Yle="DismissableLayerBranch",Hz=x.forwardRef((e,t)=>{const r=x.useContext(Uz),s=x.useRef(null),i=Gt(t,s);return x.useEffect(()=>{const a=s.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),n.jsx(_t.div,{...e,ref:i})});Hz.displayName=Yle;function Jle(e,t=globalThis==null?void 0:globalThis.document){const r=ts(e),s=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){Wz(Zle,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function Qle(e,t=globalThis==null?void 0:globalThis.document){const r=ts(e),s=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!s.current&&Wz(Xle,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function L6(){const e=new CustomEvent(EA);document.dispatchEvent(e)}function Wz(e,t,r,{discrete:s}){const i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),s?Ay(i,a):i.dispatchEvent(a)}var ece=dx,tce=Hz,Mn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},rce="Portal",E0=x.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[i,a]=x.useState(!1);Mn(()=>a(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?T7.createPortal(n.jsx(_t.div,{...s,ref:t}),o):null});E0.displayName=rce;function nce(e,t){return x.useReducer((r,s)=>t[r][s]??r,e)}var hi=e=>{const{present:t,children:r}=e,s=sce(t),i=typeof r=="function"?r({present:s.isPresent}):x.Children.only(r),a=Gt(s.ref,ice(i));return typeof r=="function"||s.isPresent?x.cloneElement(i,{ref:a}):null};hi.displayName="Presence";function sce(e){const[t,r]=x.useState(),s=x.useRef(null),i=x.useRef(e),a=x.useRef("none"),o=e?"mounted":"unmounted",[l,c]=nce(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Rb(s.current);a.current=l==="mounted"?u:"none"},[l]),Mn(()=>{const u=s.current,d=i.current;if(d!==e){const m=a.current,p=Rb(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Mn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=p=>{const g=Rb(s.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=p=>{p.target===t&&(a.current=Rb(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function Rb(e){return(e==null?void 0:e.animationName)||"none"}function ice(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ace=u4[" useInsertionEffect ".trim().toString()]||Mn;function Ri({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[i,a,o]=oce({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:i;{const d=x.useRef(e!==void 0);x.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=x.useCallback(d=>{var h;if(l){const m=lce(d)?d(e):d;m!==e&&((h=o.current)==null||h.call(o,m))}else a(d)},[l,e,a,o]);return[c,u]}function oce({defaultProp:e,onChange:t}){const[r,s]=x.useState(e),i=x.useRef(r),a=x.useRef(t);return ace(()=>{a.current=t},[t]),x.useEffect(()=>{var o;i.current!==r&&((o=a.current)==null||o.call(a,r),i.current=r)},[r,i]),[r,s,a]}function lce(e){return typeof e=="function"}var Gz=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cce="VisuallyHidden",N2=x.forwardRef((e,t)=>n.jsx(_t.span,{...e,ref:t,style:{...Gz,...e.style}}));N2.displayName=cce;var uce=N2,Sk="ToastProvider",[Ak,dce,hce]=Ph("Toast"),[Kz,kHe]=ws("Toast",[hce]),[fce,S2]=Kz(Sk),Zz=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=x.useState(null),[u,d]=x.useState(0),h=x.useRef(!1),m=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Sk}\`. Expected non-empty \`string\`.`),n.jsx(Ak.Provider,{scope:t,children:n.jsx(fce,{scope:t,label:r,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};Zz.displayName=Sk;var Xz="ToastViewport",mce=["F8"],TA="toast.viewportPause",OA="toast.viewportResume",Yz=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=mce,label:i="Notifications ({hotkey})",...a}=e,o=S2(Xz,r),l=dce(r),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),h=x.useRef(null),m=Gt(t,h,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;x.useEffect(()=>{const y=j=>{var w;s.length!==0&&s.every(A=>j[A]||j.code===A)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),x.useEffect(()=>{const y=c.current,j=h.current;if(v&&y&&j){const _=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(TA);j.dispatchEvent(P),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(OA);j.dispatchEvent(P),o.isClosePausedRef.current=!1}},A=P=>{!y.contains(P.relatedTarget)&&w()},S=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",_),y.addEventListener("focusout",A),y.addEventListener("pointermove",_),y.addEventListener("pointerleave",S),window.addEventListener("blur",_),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",_),y.removeEventListener("focusout",A),y.removeEventListener("pointermove",_),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",_),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:y})=>{const _=l().map(w=>{const A=w.ref.current,S=[A,...Pce(A)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?_.reverse():_).flat()},[l]);return x.useEffect(()=>{const y=h.current;if(y){const j=_=>{var S,P,C;const w=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!w){const T=document.activeElement,M=_.shiftKey;if(_.target===y&&M){(S=u.current)==null||S.focus();return}const I=g({tabbingDirection:M?"backwards":"forwards"}),q=I.findIndex(F=>F===T);t5(I.slice(q+1))?_.preventDefault():M?(P=u.current)==null||P.focus():(C=d.current)==null||C.focus()}};return y.addEventListener("keydown",j),()=>y.removeEventListener("keydown",j)}},[l,g]),n.jsxs(tce,{ref:c,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&n.jsx(LA,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});t5(y)}}),n.jsx(Ak.Slot,{scope:r,children:n.jsx(_t.ol,{tabIndex:-1,...a,ref:m})}),v&&n.jsx(LA,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});t5(y)}})]})});Yz.displayName=Xz;var Jz="ToastFocusProxy",LA=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...i}=e,a=S2(Jz,r);return n.jsx(N2,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&s()}})});LA.displayName=Jz;var T0="Toast",pce="toast.swipeStart",gce="toast.swipeMove",xce="toast.swipeCancel",vce="toast.swipeEnd",Qz=x.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l,c]=Ri({prop:s,defaultProp:i??!0,onChange:a,caller:T0});return n.jsx(hi,{present:r||l,children:n.jsx(jce,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:ts(e.onPause),onResume:ts(e.onResume),onSwipeStart:ft(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ft(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ft(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ft(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Qz.displayName=T0;var[yce,bce]=Kz(T0,{onClose(){}}),jce=x.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:p,...v}=e,g=S2(T0,r),[y,j]=x.useState(null),_=Gt(t,F=>j(F)),w=x.useRef(null),A=x.useRef(null),S=i||g.duration,P=x.useRef(0),C=x.useRef(S),T=x.useRef(0),{onToastAdd:M,onToastRemove:z}=g,O=ts(()=>{var W;(y==null?void 0:y.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),o()}),I=x.useCallback(F=>{!F||F===1/0||(window.clearTimeout(T.current),P.current=new Date().getTime(),T.current=window.setTimeout(O,F))},[O]);x.useEffect(()=>{const F=g.viewport;if(F){const W=()=>{I(C.current),u==null||u()},V=()=>{const ne=new Date().getTime()-P.current;C.current=C.current-ne,window.clearTimeout(T.current),c==null||c()};return F.addEventListener(TA,V),F.addEventListener(OA,W),()=>{F.removeEventListener(TA,V),F.removeEventListener(OA,W)}}},[g.viewport,S,c,u,I]),x.useEffect(()=>{a&&!g.isClosePausedRef.current&&I(S)},[a,S,g.isClosePausedRef,I]),x.useEffect(()=>(M(),()=>z()),[M,z]);const q=x.useMemo(()=>y?aB(y):null,[y]);return g.viewport?n.jsxs(n.Fragment,{children:[q&&n.jsx(wce,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:q}),n.jsx(yce,{scope:r,onClose:O,children:wh.createPortal(n.jsx(Ak.ItemSlot,{scope:r,children:n.jsx(ece,{asChild:!0,onEscapeKeyDown:ft(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(_t.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ft(e.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:ft(e.onPointerDown,F=>{F.button===0&&(w.current={x:F.clientX,y:F.clientY})}),onPointerMove:ft(e.onPointerMove,F=>{if(!w.current)return;const W=F.clientX-w.current.x,V=F.clientY-w.current.y,ne=!!A.current,G=["left","right"].includes(g.swipeDirection),K=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ee=G?K(0,W):0,xe=G?0:K(0,V),B=F.pointerType==="touch"?10:2,X={x:ee,y:xe},ie={originalEvent:F,delta:X};ne?(A.current=X,Db(gce,h,ie,{discrete:!1})):M6(X,g.swipeDirection,B)?(A.current=X,Db(pce,d,ie,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(W)>B||Math.abs(V)>B)&&(w.current=null)}),onPointerUp:ft(e.onPointerUp,F=>{const W=A.current,V=F.target;if(V.hasPointerCapture(F.pointerId)&&V.releasePointerCapture(F.pointerId),A.current=null,w.current=null,W){const ne=F.currentTarget,G={originalEvent:F,delta:W};M6(W,g.swipeDirection,g.swipeThreshold)?Db(vce,p,G,{discrete:!0}):Db(xce,m,G,{discrete:!0}),ne.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),wce=e=>{const{__scopeToast:t,children:r,...s}=e,i=S2(T0,t),[a,o]=x.useState(!1),[l,c]=x.useState(!1);return Sce(()=>o(!0)),x.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:n.jsx(E0,{asChild:!0,children:n.jsx(N2,{...s,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",r]})})})},_ce="ToastTitle",eB=x.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(_t.div,{...s,ref:t})});eB.displayName=_ce;var Nce="ToastDescription",tB=x.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(_t.div,{...s,ref:t})});tB.displayName=Nce;var rB="ToastAction",nB=x.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(iB,{altText:r,asChild:!0,children:n.jsx(Pk,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${rB}\`. Expected non-empty \`string\`.`),null)});nB.displayName=rB;var sB="ToastClose",Pk=x.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,i=bce(sB,r);return n.jsx(iB,{asChild:!0,children:n.jsx(_t.button,{type:"button",...s,ref:t,onClick:ft(e.onClick,i.onClose)})})});Pk.displayName=sB;var iB=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...i}=e;return n.jsx(_t.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function aB(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),Ace(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...aB(s))}}),t}function Db(e,t,r,{discrete:s}){const i=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),s?Ay(i,a):i.dispatchEvent(a)}var M6=(e,t,r=0)=>{const s=Math.abs(e.x),i=Math.abs(e.y),a=s>i;return t==="left"||t==="right"?a&&s>r:!a&&i>r};function Sce(e=()=>{}){const t=ts(e);Mn(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function Ace(e){return e.nodeType===e.ELEMENT_NODE}function Pce(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function t5(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Cce=Zz,oB=Yz,lB=Qz,cB=eB,uB=tB,dB=nB,hB=Pk;const kce=Cce,fB=we.forwardRef(({className:e,...t},r)=>n.jsx(oB,{ref:r,className:st("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));fB.displayName=oB.displayName;const Ece=sx("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),mB=we.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(lB,{ref:s,className:st(Ece({variant:t}),e),...r}));mB.displayName=lB.displayName;const Tce=we.forwardRef(({className:e,...t},r)=>n.jsx(dB,{ref:r,className:st("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Tce.displayName=dB.displayName;const pB=we.forwardRef(({className:e,...t},r)=>n.jsx(hB,{ref:r,className:st("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Ii,{className:"h-4 w-4"})}));pB.displayName=hB.displayName;const gB=we.forwardRef(({className:e,...t},r)=>n.jsx(cB,{ref:r,className:st("text-sm font-semibold",e),...t}));gB.displayName=cB.displayName;const xB=we.forwardRef(({className:e,...t},r)=>n.jsx(uB,{ref:r,className:st("text-sm opacity-90",e),...t}));xB.displayName=uB.displayName;function Oce(){const{toasts:e}=pt();return n.jsxs(kce,{children:[e.map(({id:t,title:r,description:s,action:i,...a})=>n.jsxs(mB,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(gB,{children:r}),s&&n.jsx(xB,{children:s})]}),i,n.jsx(pB,{})]},t)),n.jsx(fB,{})]})}const Lce=({isScrolled:e,onClick:t})=>{const r=e;return n.jsxs(dt,{to:"/",className:"flex items-center gap-2 flex-shrink-0",onClick:t,children:[n.jsx(Ys,{className:st("h-7 w-7 transition-colors duration-300","text-primary")}),n.jsx("span",{className:st("text-xl font-bold transition-colors duration-300","text-foreground"),children:"Teranga Foncier"})]})};var Mce=x.createContext(void 0);function Ch(e){const t=x.useContext(Mce);return e||t||"ltr"}var Ice=u4[" useId ".trim().toString()]||(()=>{}),Rce=0;function ka(e){const[t,r]=x.useState(Ice());return Mn(()=>{e||r(s=>s??String(Rce++))},[e]),e||(t?`radix-${t}`:"")}function hx(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var pm="NavigationMenu",[Ck,vB,Dce]=Ph(pm),[MA,$ce,Fce]=Ph(pm),[kk,EHe]=ws(pm,[Dce,Fce]),[zce,Go]=kk(pm),[Bce,qce]=kk(pm),yB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:s,onValueChange:i,defaultValue:a,delayDuration:o=200,skipDelayDuration:l=300,orientation:c="horizontal",dir:u,...d}=e,[h,m]=x.useState(null),p=Gt(t,M=>m(M)),v=Ch(u),g=x.useRef(0),y=x.useRef(0),j=x.useRef(0),[_,w]=x.useState(!0),[A,S]=Ri({prop:s,onChange:M=>{const z=M!=="",O=l>0;z?(window.clearTimeout(j.current),O&&w(!1)):(window.clearTimeout(j.current),j.current=window.setTimeout(()=>w(!0),l)),i==null||i(M)},defaultProp:a??"",caller:pm}),P=x.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>S(""),150)},[S]),C=x.useCallback(M=>{window.clearTimeout(y.current),S(M)},[S]),T=x.useCallback(M=>{A===M?window.clearTimeout(y.current):g.current=window.setTimeout(()=>{window.clearTimeout(y.current),S(M)},o)},[A,S,o]);return x.useEffect(()=>()=>{window.clearTimeout(g.current),window.clearTimeout(y.current),window.clearTimeout(j.current)},[]),n.jsx(bB,{scope:r,isRootMenu:!0,value:A,dir:v,orientation:c,rootNavigationMenu:h,onTriggerEnter:M=>{window.clearTimeout(g.current),_?T(M):C(M)},onTriggerLeave:()=>{window.clearTimeout(g.current),P()},onContentEnter:()=>window.clearTimeout(y.current),onContentLeave:P,onItemSelect:M=>{S(z=>z===M?"":M)},onItemDismiss:()=>S(""),children:n.jsx(_t.nav,{"aria-label":"Main","data-orientation":c,dir:v,...d,ref:p})})});yB.displayName=pm;var IA="NavigationMenuSub",Vce=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",...l}=e,c=Go(IA,r),[u,d]=Ri({prop:s,onChange:i,defaultProp:a??"",caller:IA});return n.jsx(bB,{scope:r,isRootMenu:!1,value:u,dir:c.dir,orientation:o,rootNavigationMenu:c.rootNavigationMenu,onTriggerEnter:h=>d(h),onItemSelect:h=>d(h),onItemDismiss:()=>d(""),children:n.jsx(_t.div,{"data-orientation":o,...l,ref:t})})});Vce.displayName=IA;var bB=e=>{const{scope:t,isRootMenu:r,rootNavigationMenu:s,dir:i,orientation:a,children:o,value:l,onItemSelect:c,onItemDismiss:u,onTriggerEnter:d,onTriggerLeave:h,onContentEnter:m,onContentLeave:p}=e,[v,g]=x.useState(null),[y,j]=x.useState(new Map),[_,w]=x.useState(null);return n.jsx(zce,{scope:t,isRootMenu:r,rootNavigationMenu:s,value:l,previousValue:hx(l),baseId:ka(),dir:i,orientation:a,viewport:v,onViewportChange:g,indicatorTrack:_,onIndicatorTrackChange:w,onTriggerEnter:ts(d),onTriggerLeave:ts(h),onContentEnter:ts(m),onContentLeave:ts(p),onItemSelect:ts(c),onItemDismiss:ts(u),onViewportContentChange:x.useCallback((A,S)=>{j(P=>(P.set(A,S),new Map(P)))},[]),onViewportContentRemove:x.useCallback(A=>{j(S=>S.has(A)?(S.delete(A),new Map(S)):S)},[]),children:n.jsx(Ck.Provider,{scope:t,children:n.jsx(Bce,{scope:t,items:y,children:o})})})},jB="NavigationMenuList",wB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...s}=e,i=Go(jB,r),a=n.jsx(_t.ul,{"data-orientation":i.orientation,...s,ref:t});return n.jsx(_t.div,{style:{position:"relative"},ref:i.onIndicatorTrackChange,children:n.jsx(Ck.Slot,{scope:r,children:i.isRootMenu?n.jsx(OB,{asChild:!0,children:a}):a})})});wB.displayName=jB;var _B="NavigationMenuItem",[Uce,NB]=kk(_B),SB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:s,...i}=e,a=ka(),o=s||a||"LEGACY_REACT_AUTO_VALUE",l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(()=>{}),h=x.useRef(!1),m=x.useCallback((v="start")=>{if(l.current){d.current();const g=DA(l.current);g.length&&Ok(v==="start"?g:g.reverse())}},[]),p=x.useCallback(()=>{if(l.current){const v=DA(l.current);v.length&&(d.current=Yce(v))}},[]);return n.jsx(Uce,{scope:r,value:o,triggerRef:c,contentRef:l,focusProxyRef:u,wasEscapeCloseRef:h,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:p,onContentFocusOutside:p,children:n.jsx(_t.li,{...i,ref:t})})});SB.displayName=_B;var RA="NavigationMenuTrigger",AB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,disabled:s,...i}=e,a=Go(RA,e.__scopeNavigationMenu),o=NB(RA,e.__scopeNavigationMenu),l=x.useRef(null),c=Gt(l,o.triggerRef,t),u=MB(a.baseId,o.value),d=IB(a.baseId,o.value),h=x.useRef(!1),m=x.useRef(!1),p=o.value===a.value;return n.jsxs(n.Fragment,{children:[n.jsx(Ck.ItemSlot,{scope:r,value:o.value,children:n.jsx(LB,{asChild:!0,children:n.jsx(_t.button,{id:u,disabled:s,"data-disabled":s?"":void 0,"data-state":Lk(p),"aria-expanded":p,"aria-controls":d,...i,ref:c,onPointerEnter:ft(e.onPointerEnter,()=>{m.current=!1,o.wasEscapeCloseRef.current=!1}),onPointerMove:ft(e.onPointerMove,Sj(()=>{s||m.current||o.wasEscapeCloseRef.current||h.current||(a.onTriggerEnter(o.value),h.current=!0)})),onPointerLeave:ft(e.onPointerLeave,Sj(()=>{s||(a.onTriggerLeave(),h.current=!1)})),onClick:ft(e.onClick,()=>{a.onItemSelect(o.value),m.current=p}),onKeyDown:ft(e.onKeyDown,v=>{const y={horizontal:"ArrowDown",vertical:a.dir==="rtl"?"ArrowLeft":"ArrowRight"}[a.orientation];p&&v.key===y&&(o.onEntryKeyDown(),v.preventDefault())})})})}),p&&n.jsxs(n.Fragment,{children:[n.jsx(uce,{"aria-hidden":!0,tabIndex:0,ref:o.focusProxyRef,onFocus:v=>{const g=o.contentRef.current,y=v.relatedTarget,j=y===l.current,_=g==null?void 0:g.contains(y);(j||!_)&&o.onFocusProxyEnter(j?"start":"end")}}),a.viewport&&n.jsx("span",{"aria-owns":d})]})]})});AB.displayName=RA;var Hce="NavigationMenuLink",I6="navigationMenu.linkSelect",PB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,active:s,onSelect:i,...a}=e;return n.jsx(LB,{asChild:!0,children:n.jsx(_t.a,{"data-active":s?"":void 0,"aria-current":s?"page":void 0,...a,ref:t,onClick:ft(e.onClick,o=>{const l=o.target,c=new CustomEvent(I6,{bubbles:!0,cancelable:!0});if(l.addEventListener(I6,u=>i==null?void 0:i(u),{once:!0}),Ay(l,c),!c.defaultPrevented&&!o.metaKey){const u=new CustomEvent(P1,{bubbles:!0,cancelable:!0});Ay(l,u)}},{checkForDefaultPrevented:!1})})})});PB.displayName=Hce;var Ek="NavigationMenuIndicator",CB=x.forwardRef((e,t)=>{const{forceMount:r,...s}=e,i=Go(Ek,e.__scopeNavigationMenu),a=!!i.value;return i.indicatorTrack?T7.createPortal(n.jsx(hi,{present:r||a,children:n.jsx(Wce,{...s,ref:t})}),i.indicatorTrack):null});CB.displayName=Ek;var Wce=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...s}=e,i=Go(Ek,r),a=vB(r),[o,l]=x.useState(null),[c,u]=x.useState(null),d=i.orientation==="horizontal",h=!!i.value;x.useEffect(()=>{var g;const v=(g=a().find(y=>y.value===i.value))==null?void 0:g.ref.current;v&&l(v)},[a,i.value]);const m=()=>{o&&u({size:d?o.offsetWidth:o.offsetHeight,offset:d?o.offsetLeft:o.offsetTop})};return $A(o,m),$A(i.indicatorTrack,m),c?n.jsx(_t.div,{"aria-hidden":!0,"data-state":h?"visible":"hidden","data-orientation":i.orientation,...s,ref:t,style:{position:"absolute",...d?{left:0,width:c.size+"px",transform:`translateX(${c.offset}px)`}:{top:0,height:c.size+"px",transform:`translateY(${c.offset}px)`},...s.style}}):null}),jg="NavigationMenuContent",kB=x.forwardRef((e,t)=>{const{forceMount:r,...s}=e,i=Go(jg,e.__scopeNavigationMenu),a=NB(jg,e.__scopeNavigationMenu),o=Gt(a.contentRef,t),l=a.value===i.value,c={value:a.value,triggerRef:a.triggerRef,focusProxyRef:a.focusProxyRef,wasEscapeCloseRef:a.wasEscapeCloseRef,onContentFocusOutside:a.onContentFocusOutside,onRootContentClose:a.onRootContentClose,...s};return i.viewport?n.jsx(Gce,{forceMount:r,...c,ref:o}):n.jsx(hi,{present:r||l,children:n.jsx(EB,{"data-state":Lk(l),...c,ref:o,onPointerEnter:ft(e.onPointerEnter,i.onContentEnter),onPointerLeave:ft(e.onPointerLeave,Sj(i.onContentLeave)),style:{pointerEvents:!l&&i.isRootMenu?"none":void 0,...c.style}})})});kB.displayName=jg;var Gce=x.forwardRef((e,t)=>{const r=Go(jg,e.__scopeNavigationMenu),{onViewportContentChange:s,onViewportContentRemove:i}=r;return Mn(()=>{s(e.value,{ref:t,...e})},[e,t,s]),Mn(()=>()=>i(e.value),[e.value,i]),null}),P1="navigationMenu.rootContentDismiss",EB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,value:s,triggerRef:i,focusProxyRef:a,wasEscapeCloseRef:o,onRootContentClose:l,onContentFocusOutside:c,...u}=e,d=Go(jg,r),h=x.useRef(null),m=Gt(h,t),p=MB(d.baseId,s),v=IB(d.baseId,s),g=vB(r),y=x.useRef(null),{onItemDismiss:j}=d;x.useEffect(()=>{const w=h.current;if(d.isRootMenu&&w){const A=()=>{var S;j(),l(),w.contains(document.activeElement)&&((S=i.current)==null||S.focus())};return w.addEventListener(P1,A),()=>w.removeEventListener(P1,A)}},[d.isRootMenu,e.value,i,j,l]);const _=x.useMemo(()=>{const A=g().map(z=>z.value);d.dir==="rtl"&&A.reverse();const S=A.indexOf(d.value),P=A.indexOf(d.previousValue),C=s===d.value,T=P===A.indexOf(s);if(!C&&!T)return y.current;const M=(()=>{if(S!==P){if(C&&P!==-1)return S>P?"from-end":"from-start";if(T&&S!==-1)return S>P?"to-start":"to-end"}return null})();return y.current=M,M},[d.previousValue,d.value,d.dir,g,s]);return n.jsx(OB,{asChild:!0,children:n.jsx(dx,{id:v,"aria-labelledby":p,"data-motion":_,"data-orientation":d.orientation,...u,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{var A;const w=new Event(P1,{bubbles:!0,cancelable:!0});(A=h.current)==null||A.dispatchEvent(w)},onFocusOutside:ft(e.onFocusOutside,w=>{var S;c();const A=w.target;(S=d.rootNavigationMenu)!=null&&S.contains(A)&&w.preventDefault()}),onPointerDownOutside:ft(e.onPointerDownOutside,w=>{var C;const A=w.target,S=g().some(T=>{var M;return(M=T.ref.current)==null?void 0:M.contains(A)}),P=d.isRootMenu&&((C=d.viewport)==null?void 0:C.contains(A));(S||P||!d.isRootMenu)&&w.preventDefault()}),onKeyDown:ft(e.onKeyDown,w=>{var P;const A=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!A){const C=DA(w.currentTarget),T=document.activeElement,M=C.findIndex(I=>I===T),O=w.shiftKey?C.slice(0,M).reverse():C.slice(M+1,C.length);Ok(O)?w.preventDefault():(P=a.current)==null||P.focus()}}),onEscapeKeyDown:ft(e.onEscapeKeyDown,w=>{o.current=!0})})})}),Tk="NavigationMenuViewport",TB=x.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=!!Go(Tk,e.__scopeNavigationMenu).value;return n.jsx(hi,{present:r||a,children:n.jsx(Kce,{...s,ref:t})})});TB.displayName=Tk;var Kce=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,children:s,...i}=e,a=Go(Tk,r),o=Gt(t,a.onViewportChange),l=qce(jg,e.__scopeNavigationMenu),[c,u]=x.useState(null),[d,h]=x.useState(null),m=c?(c==null?void 0:c.width)+"px":void 0,p=c?(c==null?void 0:c.height)+"px":void 0,v=!!a.value,g=v?a.value:a.previousValue;return $A(d,()=>{d&&u({width:d.offsetWidth,height:d.offsetHeight})}),n.jsx(_t.div,{"data-state":Lk(v),"data-orientation":a.orientation,...i,ref:o,style:{pointerEvents:!v&&a.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":p,...i.style},onPointerEnter:ft(e.onPointerEnter,a.onContentEnter),onPointerLeave:ft(e.onPointerLeave,Sj(a.onContentLeave)),children:Array.from(l.items).map(([j,{ref:_,forceMount:w,...A}])=>{const S=g===j;return n.jsx(hi,{present:w||S,children:n.jsx(EB,{...A,ref:N0(_,P=>{S&&P&&h(P)})})},j)})})}),Zce="FocusGroup",OB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...s}=e,i=Go(Zce,r);return n.jsx(MA.Provider,{scope:r,children:n.jsx(MA.Slot,{scope:r,children:n.jsx(_t.div,{dir:i.dir,...s,ref:t})})})}),R6=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],Xce="FocusGroupItem",LB=x.forwardRef((e,t)=>{const{__scopeNavigationMenu:r,...s}=e,i=$ce(r),a=Go(Xce,r);return n.jsx(MA.ItemSlot,{scope:r,children:n.jsx(_t.button,{...s,ref:t,onKeyDown:ft(e.onKeyDown,o=>{if(["Home","End",...R6].includes(o.key)){let c=i().map(h=>h.ref.current);if([a.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(o.key)&&c.reverse(),R6.includes(o.key)){const h=c.indexOf(o.currentTarget);c=c.slice(h+1)}setTimeout(()=>Ok(c)),o.preventDefault()}})})})});function DA(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Ok(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}function Yce(e){return e.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{e.forEach(t=>{const r=t.dataset.tabindex;t.setAttribute("tabindex",r)})}}function $A(e,t){const r=ts(t);Mn(()=>{let s=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(s),i.unobserve(e)}}},[e,r])}function Lk(e){return e?"open":"closed"}function MB(e,t){return`${e}-trigger-${t}`}function IB(e,t){return`${e}-content-${t}`}function Sj(e){return t=>t.pointerType==="mouse"?e(t):void 0}var RB=yB,DB=wB,Jce=SB,$B=AB,Qce=PB,FB=CB,zB=kB,BB=TB;const qB=x.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(RB,{ref:s,className:st("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...r,children:[t,n.jsx(UB,{})]}));qB.displayName=RB.displayName;const VB=x.forwardRef(({className:e,...t},r)=>n.jsx(DB,{ref:r,className:st("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));VB.displayName=DB.displayName;const af=Jce,FA=sx("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),C1=x.forwardRef(({className:e,children:t,...r},s)=>n.jsxs($B,{ref:s,className:st(FA(),"group",e),...r,children:[t," ",n.jsx(S0,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));C1.displayName=$B.displayName;const k1=x.forwardRef(({className:e,...t},r)=>n.jsx(zB,{ref:r,className:st("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto",e),...t}));k1.displayName=zB.displayName;const eue=Qce,UB=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:st("absolute left-0 top-full flex justify-center"),children:n.jsx(BB,{className:st("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:r,...t})}));UB.displayName=BB.displayName;const tue=x.forwardRef(({className:e,...t},r)=>n.jsx(FB,{ref:r,className:st("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:n.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));tue.displayName=FB.displayName;const rue=[{title:"Banques & Finances",href:"/solutions/banques",description:"valuez les garanties et analysez les risques fonciers.",icon:Rl},{title:"Promoteurs",href:"/solutions/promoteurs",description:"Identifiez des opportunits et suivez vos projets de construction.",icon:Vn},{title:"Investisseurs",href:"/solutions/investisseurs",description:"Suivez votre portefeuille et dtectez les meilleures opportunits.",icon:Br},{title:"Agriculteurs",href:"/solutions/agriculteurs",description:"Grez vos parcelles, suivez la mto et analysez vos sols.",icon:vg}],nue=[{title:"Mairies",href:"/dashboard",description:"Grez le cadastre et les permis de votre commune.",icon:Ea},{title:"Notaires",href:"/dashboard",description:"Authentifiez les actes et consultez les archives.",icon:lx},{title:"Agents Immobiliers",href:"/agent",description:"Grez vos clients, mandats et visites.",icon:ax},{title:"Particuliers",href:"/dashboard",description:"Listez votre bien et suivez vos demandes d'achat.",icon:bs}],sue=[{title:"Comment a Marche ?",href:"/how-it-works",description:"Notre processus de vrification et d'achat, tape par tape.",icon:Ac},{title:" Propos de Nous",href:"/about",description:"Dcouvrez notre mission, notre vision et l'quipe derrire Teranga Foncier.",icon:bz},{title:"Lutte Contre la Fraude",href:"/#anti-fraude",description:"Comment nous vous protgeons des arnaques foncires.",icon:kr}],iue=({isScrolled:e})=>{const t=e,r=({isActive:i})=>st(FA(),"bg-transparent text-sm font-medium",i?"text-primary":t?"text-muted-foreground hover:text-foreground":"text-foreground hover:text-foreground","hover:bg-accent/50"),s=st(FA(),"bg-transparent text-sm font-medium data-[state=open]:bg-accent/50",t?"text-muted-foreground hover:text-foreground":"text-foreground hover:text-foreground","hover:bg-accent/50");return n.jsx("div",{className:"hidden md:flex items-center gap-1",children:n.jsx(qB,{children:n.jsxs(VB,{children:[n.jsx(af,{children:n.jsx(gu,{to:"/",className:r,end:!0,children:"Accueil"})}),n.jsx(af,{children:n.jsx(Y,{asChild:!0,variant:"ghost",className:st(r({isActive:window.location.pathname.startsWith("/parcelles")}),"font-bold"),children:n.jsx(dt,{to:"/parcelles",children:"Terrains"})})}),n.jsx(af,{children:n.jsx(Y,{asChild:!0,variant:"ghost",className:st(r({isActive:window.location.pathname==="/map"}),"font-bold"),children:n.jsx(dt,{to:"/map",children:"Carte"})})}),n.jsxs(af,{children:[n.jsx(C1,{className:s,children:"Solutions"}),n.jsx(k1,{children:n.jsx("ul",{className:"grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px] ",children:rue.map(i=>n.jsx(E1,{title:i.title,href:i.href,icon:i.icon,children:i.description},i.title))})})]}),n.jsxs(af,{children:[n.jsx(C1,{className:s,children:"cosystme"}),n.jsx(k1,{children:n.jsx("ul",{className:"grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px] ",children:nue.map(i=>n.jsx(E1,{title:i.title,href:i.href,icon:i.icon,children:i.description},i.title))})})]}),n.jsxs(af,{children:[n.jsx(C1,{className:s,children:"Ressources"}),n.jsx(k1,{children:n.jsx("ul",{className:"grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px] ",children:sue.map(i=>n.jsx(E1,{title:i.title,href:i.href,icon:i.icon,children:i.description},i.title))})})]}),n.jsx(af,{children:n.jsx(gu,{to:"/contact",className:r,children:"Contact"})})]})})})},E1=x.forwardRef(({className:e,title:t,children:r,icon:s,href:i,...a},o)=>n.jsx("li",{children:n.jsx(eue,{asChild:!0,children:n.jsxs(dt,{to:i,ref:o,className:st("block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",e),...a,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[s&&n.jsx("div",{className:"p-1.5 bg-primary/10 text-primary rounded-md",children:n.jsx(s,{className:"h-5 w-5"})}),n.jsx("div",{className:"text-sm font-medium leading-none",children:t})]}),n.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground ml-10",children:r})]})})}));E1.displayName="ListItem";const aue=({isMenuOpen:e,isScrolled:t,onClick:r})=>{const s=t;return n.jsx(Y,{variant:"ghost",size:"icon",className:"md:hidden",onClick:r,children:e?n.jsx(Ii,{className:"h-6 w-6 text-foreground"}):n.jsx(gk,{className:st("h-6 w-6","text-foreground")})})};var HB={exports:{}},WB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg=x;function oue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lue=typeof Object.is=="function"?Object.is:oue,cue=wg.useState,uue=wg.useEffect,due=wg.useLayoutEffect,hue=wg.useDebugValue;function fue(e,t){var r=t(),s=cue({inst:{value:r,getSnapshot:t}}),i=s[0].inst,a=s[1];return due(function(){i.value=r,i.getSnapshot=t,r5(i)&&a({inst:i})},[e,r,t]),uue(function(){return r5(i)&&a({inst:i}),e(function(){r5(i)&&a({inst:i})})},[e]),hue(r),r}function r5(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lue(e,r)}catch{return!0}}function mue(e,t){return t()}var pue=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mue:fue;WB.useSyncExternalStore=wg.useSyncExternalStore!==void 0?wg.useSyncExternalStore:pue;HB.exports=WB;var gue=HB.exports;function xue(){return gue.useSyncExternalStore(vue,()=>!0,()=>!1)}function vue(){return()=>{}}var Mk="Avatar",[yue,THe]=ws(Mk),[bue,GB]=yue(Mk),KB=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[i,a]=x.useState("idle");return n.jsx(bue,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:n.jsx(_t.span,{...s,ref:t})})});KB.displayName=Mk;var ZB="AvatarImage",XB=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:i=()=>{},...a}=e,o=GB(ZB,r),l=jue(s,a),c=ts(u=>{i(u),o.onImageLoadingStatusChange(u)});return Mn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?n.jsx(_t.img,{...a,ref:t,src:s}):null});XB.displayName=ZB;var YB="AvatarFallback",JB=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...i}=e,a=GB(YB,r),[o,l]=x.useState(s===void 0);return x.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&a.imageLoadingStatus!=="loaded"?n.jsx(_t.span,{...i,ref:t}):null});JB.displayName=YB;function D6(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function jue(e,{referrerPolicy:t,crossOrigin:r}){const s=xue(),i=x.useRef(null),a=(()=>s?(i.current||(i.current=new window.Image),i.current):null)(),[o,l]=x.useState(()=>D6(a,e));return Mn(()=>{l(D6(a,e))},[a,e]),Mn(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,r,t]),o}var QB=KB,eq=XB,tq=JB;const Ti=x.forwardRef(({className:e,...t},r)=>n.jsx(QB,{ref:r,className:st("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ti.displayName=QB.displayName;const Py=x.forwardRef(({className:e,...t},r)=>n.jsx(eq,{ref:r,className:st("aspect-square h-full w-full",e),...t}));Py.displayName=eq.displayName;const Oi=x.forwardRef(({className:e,...t},r)=>n.jsx(tq,{ref:r,className:st("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Oi.displayName=tq.displayName;var n5=0;function Ik(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$6()),document.body.insertAdjacentElement("beforeend",e[1]??$6()),n5++,()=>{n5===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),n5--}},[])}function $6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var s5="focusScope.autoFocusOnMount",i5="focusScope.autoFocusOnUnmount",F6={bubbles:!1,cancelable:!0},wue="FocusScope",A2=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=x.useState(null),u=ts(i),d=ts(a),h=x.useRef(null),m=Gt(t,g=>c(g)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let g=function(w){if(p.paused||!l)return;const A=w.target;l.contains(A)?h.current=A:Od(h.current,{select:!0})},y=function(w){if(p.paused||!l)return;const A=w.relatedTarget;A!==null&&(l.contains(A)||Od(h.current,{select:!0}))},j=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Od(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const _=new MutationObserver(j);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),_.disconnect()}}},[s,l,p.paused]),x.useEffect(()=>{if(l){B6.add(p);const g=document.activeElement;if(!l.contains(g)){const j=new CustomEvent(s5,F6);l.addEventListener(s5,u),l.dispatchEvent(j),j.defaultPrevented||(_ue(Cue(rq(l)),{select:!0}),document.activeElement===g&&Od(l))}return()=>{l.removeEventListener(s5,u),setTimeout(()=>{const j=new CustomEvent(i5,F6);l.addEventListener(i5,d),l.dispatchEvent(j),j.defaultPrevented||Od(g??document.body,{select:!0}),l.removeEventListener(i5,d),B6.remove(p)},0)}}},[l,u,d,p]);const v=x.useCallback(g=>{if(!r&&!s||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,j=document.activeElement;if(y&&j){const _=g.currentTarget,[w,A]=Nue(_);w&&A?!g.shiftKey&&j===A?(g.preventDefault(),r&&Od(w,{select:!0})):g.shiftKey&&j===w&&(g.preventDefault(),r&&Od(A,{select:!0})):j===_&&g.preventDefault()}},[r,s,p.paused]);return n.jsx(_t.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});A2.displayName=wue;function _ue(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Od(s,{select:t}),document.activeElement!==r)return}function Nue(e){const t=rq(e),r=z6(t,e),s=z6(t.reverse(),e);return[r,s]}function rq(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function z6(e,t){for(const r of e)if(!Sue(r,{upTo:t}))return r}function Sue(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Aue(e){return e instanceof HTMLInputElement&&"select"in e}function Od(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Aue(e)&&t&&e.select()}}var B6=Pue();function Pue(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=q6(e,t),e.unshift(t)},remove(t){var r;e=q6(e,t),(r=e[0])==null||r.resume()}}}function q6(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function Cue(e){return e.filter(t=>t.tagName!=="A")}const kue=["top","right","bottom","left"],hh=Math.min,Ja=Math.max,Aj=Math.round,$b=Math.floor,vc=e=>({x:e,y:e}),Eue={left:"right",right:"left",bottom:"top",top:"bottom"},Tue={start:"end",end:"start"};function zA(e,t,r){return Ja(e,hh(t,r))}function Du(e,t){return typeof e=="function"?e(t):e}function $u(e){return e.split("-")[0]}function fx(e){return e.split("-")[1]}function Rk(e){return e==="x"?"y":"x"}function Dk(e){return e==="y"?"height":"width"}const Oue=new Set(["top","bottom"]);function dc(e){return Oue.has($u(e))?"y":"x"}function $k(e){return Rk(dc(e))}function Lue(e,t,r){r===void 0&&(r=!1);const s=fx(e),i=$k(e),a=Dk(i);let o=i==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Pj(o)),[o,Pj(o)]}function Mue(e){const t=Pj(e);return[BA(e),t,BA(t)]}function BA(e){return e.replace(/start|end/g,t=>Tue[t])}const V6=["left","right"],U6=["right","left"],Iue=["top","bottom"],Rue=["bottom","top"];function Due(e,t,r){switch(e){case"top":case"bottom":return r?t?U6:V6:t?V6:U6;case"left":case"right":return t?Iue:Rue;default:return[]}}function $ue(e,t,r,s){const i=fx(e);let a=Due($u(e),r==="start",s);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(BA)))),a}function Pj(e){return e.replace(/left|right|bottom|top/g,t=>Eue[t])}function Fue(e){return{top:0,right:0,bottom:0,left:0,...e}}function nq(e){return typeof e!="number"?Fue(e):{top:e,right:e,bottom:e,left:e}}function Cj(e){const{x:t,y:r,width:s,height:i}=e;return{width:s,height:i,top:r,left:t,right:t+s,bottom:r+i,x:t,y:r}}function H6(e,t,r){let{reference:s,floating:i}=e;const a=dc(t),o=$k(t),l=Dk(o),c=$u(t),u=a==="y",d=s.x+s.width/2-i.width/2,h=s.y+s.height/2-i.height/2,m=s[l]/2-i[l]/2;let p;switch(c){case"top":p={x:d,y:s.y-i.height};break;case"bottom":p={x:d,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:h};break;case"left":p={x:s.x-i.width,y:h};break;default:p={x:s.x,y:s.y}}switch(fx(t)){case"start":p[o]-=m*(r&&u?-1:1);break;case"end":p[o]+=m*(r&&u?-1:1);break}return p}const zue=async(e,t,r)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:h}=H6(u,s,c),m=s,p={},v=0;for(let g=0;g<l.length;g++){const{name:y,fn:j}=l[g],{x:_,y:w,data:A,reset:S}=await j({x:d,y:h,initialPlacement:s,placement:m,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=_??d,h=w??h,p={...p,[y]:{...p[y],...A}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:d,y:h}=H6(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:i,middlewareData:p}};async function Cy(e,t){var r;t===void 0&&(t={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=Du(t,e),v=nq(p),y=l[m?h==="floating"?"reference":"floating":h],j=Cj(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),_=h==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),A=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Cj(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:w,strategy:c}):_);return{top:(j.top-S.top+v.top)/A.y,bottom:(S.bottom-j.bottom+v.bottom)/A.y,left:(j.left-S.left+v.left)/A.x,right:(S.right-j.right+v.right)/A.x}}const Bue=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Du(e,t)||{};if(u==null)return{};const h=nq(d),m={x:r,y:s},p=$k(i),v=Dk(p),g=await o.getDimensions(u),y=p==="y",j=y?"top":"left",_=y?"bottom":"right",w=y?"clientHeight":"clientWidth",A=a.reference[v]+a.reference[p]-m[p]-a.floating[v],S=m[p]-a.reference[p],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=P?P[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(P)))&&(C=l.floating[w]||a.floating[v]);const T=A/2-S/2,M=C/2-g[v]/2-1,z=hh(h[j],M),O=hh(h[_],M),I=z,q=C-g[v]-O,F=C/2-g[v]/2+T,W=zA(I,F,q),V=!c.arrow&&fx(i)!=null&&F!==W&&a.reference[v]/2-(F<I?z:O)-g[v]/2<0,ne=V?F<I?F-I:F-q:0;return{[p]:m[p]+ne,data:{[p]:W,centerOffset:F-W-ne,...V&&{alignmentOffset:ne}},reset:V}}}),que=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=Du(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const j=$u(i),_=dc(l),w=$u(l)===l,A=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(w||!g?[Pj(l)]:Mue(l)),P=v!=="none";!m&&P&&S.push(...$ue(l,g,v,A));const C=[l,...S],T=await Cy(t,y),M=[];let z=((s=a.flip)==null?void 0:s.overflows)||[];if(d&&M.push(T[j]),h){const F=Lue(i,o,A);M.push(T[F[0]],T[F[1]])}if(z=[...z,{placement:i,overflows:M}],!M.every(F=>F<=0)){var O,I;const F=(((O=a.flip)==null?void 0:O.index)||0)+1,W=C[F];if(W&&(!(h==="alignment"?_!==dc(W):!1)||z.every(G=>dc(G.placement)===_?G.overflows[0]>0:!0)))return{data:{index:F,overflows:z},reset:{placement:W}};let V=(I=z.filter(ne=>ne.overflows[0]<=0).sort((ne,G)=>ne.overflows[1]-G.overflows[1])[0])==null?void 0:I.placement;if(!V)switch(p){case"bestFit":{var q;const ne=(q=z.filter(G=>{if(P){const K=dc(G.placement);return K===_||K==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(K=>K>0).reduce((K,ee)=>K+ee,0)]).sort((G,K)=>G[1]-K[1])[0])==null?void 0:q[0];ne&&(V=ne);break}case"initialPlacement":V=l;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function W6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function G6(e){return kue.some(t=>e[t]>=0)}const Vue=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...i}=Du(e,t);switch(s){case"referenceHidden":{const a=await Cy(t,{...i,elementContext:"reference"}),o=W6(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:G6(o)}}}case"escaped":{const a=await Cy(t,{...i,altBoundary:!0}),o=W6(a,r.floating);return{data:{escapedOffsets:o,escaped:G6(o)}}}default:return{}}}}},sq=new Set(["left","top"]);async function Uue(e,t){const{placement:r,platform:s,elements:i}=e,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=$u(r),l=fx(r),c=dc(r)==="y",u=sq.has(o)?-1:1,d=a&&c?-1:1,h=Du(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*d,y:m*u}:{x:m*u,y:p*d}}const Hue=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await Uue(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Wue=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:j,y:_}=y;return{x:j,y:_}}},...c}=Du(e,t),u={x:r,y:s},d=await Cy(t,c),h=dc($u(i)),m=Rk(h);let p=u[m],v=u[h];if(a){const y=m==="y"?"top":"left",j=m==="y"?"bottom":"right",_=p+d[y],w=p-d[j];p=zA(_,p,w)}if(o){const y=h==="y"?"top":"left",j=h==="y"?"bottom":"right",_=v+d[y],w=v-d[j];v=zA(_,v,w)}const g=l.fn({...t,[m]:p,[h]:v});return{...g,data:{x:g.x-r,y:g.y-s,enabled:{[m]:a,[h]:o}}}}}},Gue=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Du(e,t),d={x:r,y:s},h=dc(i),m=Rk(h);let p=d[m],v=d[h];const g=Du(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=m==="y"?"height":"width",A=a.reference[m]-a.floating[w]+y.mainAxis,S=a.reference[m]+a.reference[w]-y.mainAxis;p<A?p=A:p>S&&(p=S)}if(u){var j,_;const w=m==="y"?"width":"height",A=sq.has($u(i)),S=a.reference[h]-a.floating[w]+(A&&((j=o.offset)==null?void 0:j[h])||0)+(A?0:y.crossAxis),P=a.reference[h]+a.reference[w]+(A?0:((_=o.offset)==null?void 0:_[h])||0)-(A?y.crossAxis:0);v<S?v=S:v>P&&(v=P)}return{[m]:p,[h]:v}}}},Kue=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Du(e,t),d=await Cy(t,u),h=$u(i),m=fx(i),p=dc(i)==="y",{width:v,height:g}=a.floating;let y,j;h==="top"||h==="bottom"?(y=h,j=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=h,y=m==="end"?"top":"bottom");const _=g-d.top-d.bottom,w=v-d.left-d.right,A=hh(g-d[y],_),S=hh(v-d[j],w),P=!t.middlewareData.shift;let C=A,T=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(T=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=_),P&&!m){const z=Ja(d.left,0),O=Ja(d.right,0),I=Ja(d.top,0),q=Ja(d.bottom,0);p?T=v-2*(z!==0||O!==0?z+O:Ja(d.left,d.right)):C=g-2*(I!==0||q!==0?I+q:Ja(d.top,d.bottom))}await c({...t,availableWidth:T,availableHeight:C});const M=await o.getDimensions(l.floating);return v!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function P2(){return typeof window<"u"}function mx(e){return iq(e)?(e.nodeName||"").toLowerCase():"#document"}function no(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Tc(e){var t;return(t=(iq(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function iq(e){return P2()?e instanceof Node||e instanceof no(e).Node:!1}function Ll(e){return P2()?e instanceof Element||e instanceof no(e).Element:!1}function Pc(e){return P2()?e instanceof HTMLElement||e instanceof no(e).HTMLElement:!1}function K6(e){return!P2()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof no(e).ShadowRoot}const Zue=new Set(["inline","contents"]);function O0(e){const{overflow:t,overflowX:r,overflowY:s,display:i}=Ml(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!Zue.has(i)}const Xue=new Set(["table","td","th"]);function Yue(e){return Xue.has(mx(e))}const Jue=[":popover-open",":modal"];function C2(e){return Jue.some(t=>{try{return e.matches(t)}catch{return!1}})}const Que=["transform","translate","scale","rotate","perspective"],ede=["transform","translate","scale","rotate","perspective","filter"],tde=["paint","layout","strict","content"];function Fk(e){const t=zk(),r=Ll(e)?Ml(e):e;return Que.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||ede.some(s=>(r.willChange||"").includes(s))||tde.some(s=>(r.contain||"").includes(s))}function rde(e){let t=fh(e);for(;Pc(t)&&!_g(t);){if(Fk(t))return t;if(C2(t))return null;t=fh(t)}return null}function zk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nde=new Set(["html","body","#document"]);function _g(e){return nde.has(mx(e))}function Ml(e){return no(e).getComputedStyle(e)}function k2(e){return Ll(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fh(e){if(mx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||K6(e)&&e.host||Tc(e);return K6(t)?t.host:t}function aq(e){const t=fh(e);return _g(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pc(t)&&O0(t)?t:aq(t)}function ky(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=aq(e),a=i===((s=e.ownerDocument)==null?void 0:s.body),o=no(i);if(a){const l=qA(o);return t.concat(o,o.visualViewport||[],O0(i)?i:[],l&&r?ky(l):[])}return t.concat(i,ky(i,[],r))}function qA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oq(e){const t=Ml(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=Pc(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:s,l=Aj(r)!==a||Aj(s)!==o;return l&&(r=a,s=o),{width:r,height:s,$:l}}function Bk(e){return Ll(e)?e:e.contextElement}function Zp(e){const t=Bk(e);if(!Pc(t))return vc(1);const r=t.getBoundingClientRect(),{width:s,height:i,$:a}=oq(t);let o=(a?Aj(r.width):r.width)/s,l=(a?Aj(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const sde=vc(0);function lq(e){const t=no(e);return!zk()||!t.visualViewport?sde:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ide(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==no(e)?!1:t}function Jf(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=Bk(e);let o=vc(1);t&&(s?Ll(s)&&(o=Zp(s)):o=Zp(e));const l=ide(a,r,s)?lq(a):vc(0);let c=(i.left+l.x)/o.x,u=(i.top+l.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(a){const m=no(a),p=s&&Ll(s)?no(s):s;let v=m,g=qA(v);for(;g&&s&&p!==v;){const y=Zp(g),j=g.getBoundingClientRect(),_=Ml(g),w=j.left+(g.clientLeft+parseFloat(_.paddingLeft))*y.x,A=j.top+(g.clientTop+parseFloat(_.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=w,u+=A,v=no(g),g=qA(v)}}return Cj({width:d,height:h,x:c,y:u})}function E2(e,t){const r=k2(e).scrollLeft;return t?t.left+r:Jf(Tc(e)).left+r}function cq(e,t){const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-E2(e,r),i=r.top+t.scrollTop;return{x:s,y:i}}function ade(e){let{elements:t,rect:r,offsetParent:s,strategy:i}=e;const a=i==="fixed",o=Tc(s),l=t?C2(t.floating):!1;if(s===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=vc(1);const d=vc(0),h=Pc(s);if((h||!h&&!a)&&((mx(s)!=="body"||O0(o))&&(c=k2(s)),Pc(s))){const p=Jf(s);u=Zp(s),d.x=p.x+s.clientLeft,d.y=p.y+s.clientTop}const m=o&&!h&&!a?cq(o,c):vc(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function ode(e){return Array.from(e.getClientRects())}function lde(e){const t=Tc(e),r=k2(e),s=e.ownerDocument.body,i=Ja(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=Ja(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+E2(e);const l=-r.scrollTop;return Ml(s).direction==="rtl"&&(o+=Ja(t.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}const Z6=25;function cde(e,t){const r=no(e),s=Tc(e),i=r.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=zk();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}const u=E2(s);if(u<=0){const d=s.ownerDocument,h=d.body,m=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(s.clientWidth-h.clientWidth-p);v<=Z6&&(a-=v)}else u<=Z6&&(a+=u);return{width:a,height:o,x:l,y:c}}const ude=new Set(["absolute","fixed"]);function dde(e,t){const r=Jf(e,!0,t==="fixed"),s=r.top+e.clientTop,i=r.left+e.clientLeft,a=Pc(e)?Zp(e):vc(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,u=s*a.y;return{width:o,height:l,x:c,y:u}}function X6(e,t,r){let s;if(t==="viewport")s=cde(e,r);else if(t==="document")s=lde(Tc(e));else if(Ll(t))s=dde(t,r);else{const i=lq(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Cj(s)}function uq(e,t){const r=fh(e);return r===t||!Ll(r)||_g(r)?!1:Ml(r).position==="fixed"||uq(r,t)}function hde(e,t){const r=t.get(e);if(r)return r;let s=ky(e,[],!1).filter(l=>Ll(l)&&mx(l)!=="body"),i=null;const a=Ml(e).position==="fixed";let o=a?fh(e):e;for(;Ll(o)&&!_g(o);){const l=Ml(o),c=Fk(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&ude.has(i.position)||O0(o)&&!c&&uq(e,o))?s=s.filter(d=>d!==o):i=l,o=fh(o)}return t.set(e,s),s}function fde(e){let{element:t,boundary:r,rootBoundary:s,strategy:i}=e;const o=[...r==="clippingAncestors"?C2(t)?[]:hde(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((u,d)=>{const h=X6(t,d,i);return u.top=Ja(h.top,u.top),u.right=hh(h.right,u.right),u.bottom=hh(h.bottom,u.bottom),u.left=Ja(h.left,u.left),u},X6(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function mde(e){const{width:t,height:r}=oq(e);return{width:t,height:r}}function pde(e,t,r){const s=Pc(t),i=Tc(t),a=r==="fixed",o=Jf(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=vc(0);function u(){c.x=E2(i)}if(s||!s&&!a)if((mx(t)!=="body"||O0(i))&&(l=k2(t)),s){const p=Jf(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&u();a&&!s&&i&&u();const d=i&&!s&&!a?cq(i,l):vc(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function a5(e){return Ml(e).position==="static"}function Y6(e,t){if(!Pc(e)||Ml(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Tc(e)===r&&(r=r.ownerDocument.body),r}function dq(e,t){const r=no(e);if(C2(e))return r;if(!Pc(e)){let i=fh(e);for(;i&&!_g(i);){if(Ll(i)&&!a5(i))return i;i=fh(i)}return r}let s=Y6(e,t);for(;s&&Yue(s)&&a5(s);)s=Y6(s,t);return s&&_g(s)&&a5(s)&&!Fk(s)?r:s||rde(e)||r}const gde=async function(e){const t=this.getOffsetParent||dq,r=this.getDimensions,s=await r(e.floating);return{reference:pde(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function xde(e){return Ml(e).direction==="rtl"}const vde={convertOffsetParentRelativeRectToViewportRelativeRect:ade,getDocumentElement:Tc,getClippingRect:fde,getOffsetParent:dq,getElementRects:gde,getClientRects:ode,getDimensions:mde,getScale:Zp,isElement:Ll,isRTL:xde};function hq(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yde(e,t){let r=null,s;const i=Tc(e);function a(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:p}=u;if(l||t(),!m||!p)return;const v=$b(h),g=$b(i.clientWidth-(d+m)),y=$b(i.clientHeight-(h+p)),j=$b(d),w={rootMargin:-v+"px "+-g+"px "+-y+"px "+-j+"px",threshold:Ja(0,hh(1,c))||1};let A=!0;function S(P){const C=P[0].intersectionRatio;if(C!==c){if(!A)return o();C?o(!1,C):s=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!hq(u,e.getBoundingClientRect())&&o(),A=!1}try{r=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{r=new IntersectionObserver(S,w)}r.observe(e)}return o(!0),a}function bde(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Bk(e),d=i||a?[...u?ky(u):[],...ky(t)]:[];d.forEach(j=>{i&&j.addEventListener("scroll",r,{passive:!0}),a&&j.addEventListener("resize",r)});const h=u&&l?yde(u,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(j=>{let[_]=j;_&&_.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),u&&!c&&p.observe(u),p.observe(t));let v,g=c?Jf(e):null;c&&y();function y(){const j=Jf(e);g&&!hq(g,j)&&r(),g=j,v=requestAnimationFrame(y)}return r(),()=>{var j;d.forEach(_=>{i&&_.removeEventListener("scroll",r),a&&_.removeEventListener("resize",r)}),h==null||h(),(j=p)==null||j.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const jde=Hue,wde=Wue,_de=que,Nde=Kue,Sde=Vue,J6=Bue,Ade=Gue,Pde=(e,t,r)=>{const s=new Map,i={platform:vde,...r},a={...i.platform,_c:s};return zue(e,t,{...i,platform:a})};var Cde=typeof document<"u",kde=function(){},T1=Cde?x.useLayoutEffect:kde;function kj(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!kj(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){const a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!kj(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function fq(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Q6(e,t){const r=fq(e);return Math.round(t*r)/r}function o5(e){const t=x.useRef(e);return T1(()=>{t.current=e}),t}function Ede(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=x.useState(s);kj(m,s)||p(s);const[v,g]=x.useState(null),[y,j]=x.useState(null),_=x.useCallback(G=>{G!==P.current&&(P.current=G,g(G))},[]),w=x.useCallback(G=>{G!==C.current&&(C.current=G,j(G))},[]),A=a||v,S=o||y,P=x.useRef(null),C=x.useRef(null),T=x.useRef(d),M=c!=null,z=o5(c),O=o5(i),I=o5(u),q=x.useCallback(()=>{if(!P.current||!C.current)return;const G={placement:t,strategy:r,middleware:m};O.current&&(G.platform=O.current),Pde(P.current,C.current,G).then(K=>{const ee={...K,isPositioned:I.current!==!1};F.current&&!kj(T.current,ee)&&(T.current=ee,wh.flushSync(()=>{h(ee)}))})},[m,t,r,O,I]);T1(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(G=>({...G,isPositioned:!1})))},[u]);const F=x.useRef(!1);T1(()=>(F.current=!0,()=>{F.current=!1}),[]),T1(()=>{if(A&&(P.current=A),S&&(C.current=S),A&&S){if(z.current)return z.current(A,S,q);q()}},[A,S,q,z,M]);const W=x.useMemo(()=>({reference:P,floating:C,setReference:_,setFloating:w}),[_,w]),V=x.useMemo(()=>({reference:A,floating:S}),[A,S]),ne=x.useMemo(()=>{const G={position:r,left:0,top:0};if(!V.floating)return G;const K=Q6(V.floating,d.x),ee=Q6(V.floating,d.y);return l?{...G,transform:"translate("+K+"px, "+ee+"px)",...fq(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:K,top:ee}},[r,l,V.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:q,refs:W,elements:V,floatingStyles:ne}),[d,q,W,V,ne])}const Tde=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:i}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?J6({element:s.current,padding:i}).fn(r):{}:s?J6({element:s,padding:i}).fn(r):{}}}},Ode=(e,t)=>({...jde(e),options:[e,t]}),Lde=(e,t)=>({...wde(e),options:[e,t]}),Mde=(e,t)=>({...Ade(e),options:[e,t]}),Ide=(e,t)=>({..._de(e),options:[e,t]}),Rde=(e,t)=>({...Nde(e),options:[e,t]}),Dde=(e,t)=>({...Sde(e),options:[e,t]}),$de=(e,t)=>({...Tde(e),options:[e,t]});var Fde="Arrow",mq=x.forwardRef((e,t)=>{const{children:r,width:s=10,height:i=5,...a}=e;return n.jsx(_t.svg,{...a,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});mq.displayName=Fde;var zde=mq;function L0(e){const[t,r]=x.useState(void 0);return Mn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var qk="Popper",[pq,T2]=ws(qk),[Bde,gq]=pq(qk),xq=e=>{const{__scopePopper:t,children:r}=e,[s,i]=x.useState(null);return n.jsx(Bde,{scope:t,anchor:s,onAnchorChange:i,children:r})};xq.displayName=qk;var vq="PopperAnchor",yq=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...i}=e,a=gq(vq,r),o=x.useRef(null),l=Gt(t,o),c=x.useRef(null);return x.useEffect(()=>{const u=c.current;c.current=(s==null?void 0:s.current)||o.current,u!==c.current&&a.onAnchorChange(c.current)}),s?null:n.jsx(_t.div,{...i,ref:l})});yq.displayName=vq;var Vk="PopperContent",[qde,Vde]=pq(Vk),bq=x.forwardRef((e,t)=>{var Ne,le,Q,J,se,Z;const{__scopePopper:r,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:v,...g}=e,y=gq(Vk,r),[j,_]=x.useState(null),w=Gt(t,je=>_(je)),[A,S]=x.useState(null),P=L0(A),C=(P==null?void 0:P.width)??0,T=(P==null?void 0:P.height)??0,M=s+(a!=="center"?"-"+a:""),z=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],I=O.length>0,q={padding:z,boundary:O.filter(Hde),altBoundary:I},{refs:F,floatingStyles:W,placement:V,isPositioned:ne,middlewareData:G}=Ede({strategy:"fixed",placement:M,whileElementsMounted:(...je)=>bde(...je,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[Ode({mainAxis:i+T,alignmentAxis:o}),c&&Lde({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Mde():void 0,...q}),c&&Ide({...q}),Rde({...q,apply:({elements:je,rects:Ee,availableWidth:Pe,availableHeight:de})=>{const{width:be,height:Ve}=Ee.reference,ze=je.floating.style;ze.setProperty("--radix-popper-available-width",`${Pe}px`),ze.setProperty("--radix-popper-available-height",`${de}px`),ze.setProperty("--radix-popper-anchor-width",`${be}px`),ze.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),A&&$de({element:A,padding:l}),Wde({arrowWidth:C,arrowHeight:T}),m&&Dde({strategy:"referenceHidden",...q})]}),[K,ee]=_q(V),xe=ts(v);Mn(()=>{ne&&(xe==null||xe())},[ne,xe]);const B=(Ne=G.arrow)==null?void 0:Ne.x,X=(le=G.arrow)==null?void 0:le.y,ie=((Q=G.arrow)==null?void 0:Q.centerOffset)!==0,[me,ye]=x.useState();return Mn(()=>{j&&ye(window.getComputedStyle(j).zIndex)},[j]),n.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:ne?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(J=G.transformOrigin)==null?void 0:J.x,(se=G.transformOrigin)==null?void 0:se.y].join(" "),...((Z=G.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(qde,{scope:r,placedSide:K,onArrowChange:S,arrowX:B,arrowY:X,shouldHideArrow:ie,children:n.jsx(_t.div,{"data-side":K,"data-align":ee,...g,ref:w,style:{...g.style,animation:ne?void 0:"none"}})})})});bq.displayName=Vk;var jq="PopperArrow",Ude={top:"bottom",right:"left",bottom:"top",left:"right"},wq=x.forwardRef(function(t,r){const{__scopePopper:s,...i}=t,a=Vde(jq,s),o=Ude[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(zde,{...i,ref:r,style:{...i.style,display:"block"}})})});wq.displayName=jq;function Hde(e){return e!==null}var Wde=e=>({name:"transformOrigin",options:e,fn(t){var y,j,_;const{placement:r,rects:s,middlewareData:i}=t,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=_q(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((j=i.arrow)==null?void 0:j.x)??0)+l/2,p=(((_=i.arrow)==null?void 0:_.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=o?h:`${m}px`,g=`${-c}px`):u==="top"?(v=o?h:`${m}px`,g=`${s.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=o?h:`${p}px`):u==="left"&&(v=`${s.floating.width+c}px`,g=o?h:`${p}px`),{data:{x:v,y:g}}}});function _q(e){const[t,r="center"]=e.split("-");return[t,r]}var Nq=xq,Sq=yq,Aq=bq,Pq=wq,l5="rovingFocusGroup.onEntryFocus",Gde={bubbles:!1,cancelable:!0},M0="RovingFocusGroup",[VA,Cq,Kde]=Ph(M0),[Zde,px]=ws(M0,[Kde]),[Xde,Yde]=Zde(M0),kq=x.forwardRef((e,t)=>n.jsx(VA.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(VA.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Jde,{...e,ref:t})})}));kq.displayName=M0;var Jde=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=x.useRef(null),p=Gt(t,m),v=Ch(a),[g,y]=Ri({prop:o,defaultProp:l??null,onChange:c,caller:M0}),[j,_]=x.useState(!1),w=ts(u),A=Cq(r),S=x.useRef(!1),[P,C]=x.useState(0);return x.useEffect(()=>{const T=m.current;if(T)return T.addEventListener(l5,w),()=>T.removeEventListener(l5,w)},[w]),n.jsx(Xde,{scope:r,orientation:s,dir:v,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(T=>y(T),[y]),onItemShiftTab:x.useCallback(()=>_(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:x.useCallback(()=>C(T=>T-1),[]),children:n.jsx(_t.div,{tabIndex:j||P===0?-1:0,"data-orientation":s,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:ft(e.onMouseDown,()=>{S.current=!0}),onFocus:ft(e.onFocus,T=>{const M=!S.current;if(T.target===T.currentTarget&&M&&!j){const z=new CustomEvent(l5,Gde);if(T.currentTarget.dispatchEvent(z),!z.defaultPrevented){const O=A().filter(V=>V.focusable),I=O.find(V=>V.active),q=O.find(V=>V.id===g),W=[I,q,...O].filter(Boolean).map(V=>V.ref.current);Oq(W,d)}}S.current=!1}),onBlur:ft(e.onBlur,()=>_(!1))})})}),Eq="RovingFocusGroupItem",Tq=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:i=!1,tabStopId:a,children:o,...l}=e,c=ka(),u=a||c,d=Yde(Eq,r),h=d.currentTabStopId===u,m=Cq(r),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:g}=d;return x.useEffect(()=>{if(s)return p(),()=>v()},[s,p,v]),n.jsx(VA.ItemSlot,{scope:r,id:u,focusable:s,active:i,children:n.jsx(_t.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ft(e.onMouseDown,y=>{s?d.onItemFocus(u):y.preventDefault()}),onFocus:ft(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ft(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const j=the(y,d.orientation,d.dir);if(j!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=m().filter(A=>A.focusable).map(A=>A.ref.current);if(j==="last")w.reverse();else if(j==="prev"||j==="next"){j==="prev"&&w.reverse();const A=w.indexOf(y.currentTarget);w=d.loop?rhe(w,A+1):w.slice(A+1)}setTimeout(()=>Oq(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});Tq.displayName=Eq;var Qde={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ehe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function the(e,t,r){const s=ehe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Qde[s]}function Oq(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function rhe(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var Uk=kq,Hk=Tq,nhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},np=new WeakMap,Fb=new WeakMap,zb={},c5=0,Lq=function(e){return e&&(e.host||Lq(e.parentNode))},she=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=Lq(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ihe=function(e,t,r,s){var i=she(t,Array.isArray(e)?e:[e]);zb[r]||(zb[r]=new WeakMap);var a=zb[r],o=[],l=new Set,c=new Set(i),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};i.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var p=m.getAttribute(s),v=p!==null&&p!=="false",g=(np.get(m)||0)+1,y=(a.get(m)||0)+1;np.set(m,g),a.set(m,y),o.push(m),g===1&&v&&Fb.set(m,!0),y===1&&m.setAttribute(r,"true"),v||m.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",m,j)}})};return d(t),l.clear(),c5++,function(){o.forEach(function(h){var m=np.get(h)-1,p=a.get(h)-1;np.set(h,m),a.set(h,p),m||(Fb.has(h)||h.removeAttribute(s),Fb.delete(h)),p||h.removeAttribute(r)}),c5--,c5||(np=new WeakMap,np=new WeakMap,Fb=new WeakMap,zb={})}},Wk=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=t||nhe(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),ihe(s,i,r,"aria-hidden")):function(){return null}},uc=function(){return uc=Object.assign||function(t){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},uc.apply(this,arguments)};function Mq(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]]);return r}function ahe(e,t,r){if(r||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var O1="right-scroll-bar-position",L1="width-before-scroll-bar",ohe="with-scroll-bars-hidden",lhe="--removed-body-scroll-bar-size";function u5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function che(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var i=r.value;i!==s&&(r.value=s,r.callback(s,i))}}}})[0];return r.callback=t,r.facade}var uhe=typeof window<"u"?x.useLayoutEffect:x.useEffect,eL=new WeakMap;function dhe(e,t){var r=che(t||null,function(s){return e.forEach(function(i){return u5(i,s)})});return uhe(function(){var s=eL.get(r);if(s){var i=new Set(s),a=new Set(e),o=r.current;i.forEach(function(l){a.has(l)||u5(l,null)}),a.forEach(function(l){i.has(l)||u5(l,o)})}eL.set(r,e)},[e]),r}function hhe(e){return e}function fhe(e,t){t===void 0&&(t=hhe);var r=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return i}function mhe(e){e===void 0&&(e={});var t=fhe(null);return t.options=uc({async:!0,ssr:!1},e),t}var Iq=function(e){var t=e.sideCar,r=Mq(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,uc({},r))};Iq.isSideCarExport=!0;function phe(e,t){return e.useMedium(t),Iq}var Rq=mhe(),d5=function(){},O2=x.forwardRef(function(e,t){var r=x.useRef(null),s=x.useState({onScrollCapture:d5,onWheelCapture:d5,onTouchMoveCapture:d5}),i=s[0],a=s[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,p=e.noRelative,v=e.noIsolation,g=e.inert,y=e.allowPinchZoom,j=e.as,_=j===void 0?"div":j,w=e.gapMode,A=Mq(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,P=dhe([r,t]),C=uc(uc({},A),i);return x.createElement(x.Fragment,null,d&&x.createElement(S,{sideCar:Rq,removeScrollBar:u,shards:h,noRelative:p,noIsolation:v,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:w}),o?x.cloneElement(x.Children.only(l),uc(uc({},C),{ref:P})):x.createElement(_,uc({},C,{className:c,ref:P}),l))});O2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};O2.classNames={fullWidth:L1,zeroRight:O1};var tL,ghe=function(){if(tL)return tL;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ghe();return t&&e.setAttribute("nonce",t),e}function vhe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bhe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=xhe())&&(vhe(t,r),yhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jhe=function(){var e=bhe();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Dq=function(){var e=jhe(),t=function(r){var s=r.styles,i=r.dynamic;return e(s,i),null};return t},whe={left:0,top:0,right:0,gap:0},h5=function(e){return parseInt(e||"",10)||0},_he=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[h5(r),h5(s),h5(i)]},Nhe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return whe;var t=_he(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},She=Dq(),Xp="data-scroll-locked",Ahe=function(e,t,r,s){var i=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(ohe,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Xp,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(O1,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(L1,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(O1," .").concat(O1,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(L1," .").concat(L1,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Xp,`] {
    `).concat(lhe,": ").concat(l,`px;
  }
`)},rL=function(){var e=parseInt(document.body.getAttribute(Xp)||"0",10);return isFinite(e)?e:0},Phe=function(){x.useEffect(function(){return document.body.setAttribute(Xp,(rL()+1).toString()),function(){var e=rL()-1;e<=0?document.body.removeAttribute(Xp):document.body.setAttribute(Xp,e.toString())}},[])},Che=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;Phe();var a=x.useMemo(function(){return Nhe(i)},[i]);return x.createElement(She,{styles:Ahe(a,!t,i,r?"":"!important")})},UA=!1;if(typeof window<"u")try{var Bb=Object.defineProperty({},"passive",{get:function(){return UA=!0,!0}});window.addEventListener("test",Bb,Bb),window.removeEventListener("test",Bb,Bb)}catch{UA=!1}var sp=UA?{passive:!1}:!1,khe=function(e){return e.tagName==="TEXTAREA"},$q=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!khe(e)&&r[t]==="visible")},Ehe=function(e){return $q(e,"overflowY")},The=function(e){return $q(e,"overflowX")},nL=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=Fq(e,s);if(i){var a=zq(e,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},Ohe=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},Lhe=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},Fq=function(e,t){return e==="v"?Ehe(t):The(t)},zq=function(e,t){return e==="v"?Ohe(t):Lhe(t)},Mhe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ihe=function(e,t,r,s,i){var a=Mhe(e,window.getComputedStyle(t).direction),o=a*s,l=r.target,c=t.contains(l),u=!1,d=o>0,h=0,m=0;do{if(!l)break;var p=zq(e,l),v=p[0],g=p[1],y=p[2],j=g-y-a*v;(v||j)&&Fq(e,l)&&(h+=j,m+=v);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(i&&Math.abs(h)<1||!i&&o>h)||!d&&(i&&Math.abs(m)<1||!i&&-o>m))&&(u=!0),u},qb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},sL=function(e){return[e.deltaX,e.deltaY]},iL=function(e){return e&&"current"in e?e.current:e},Rhe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Dhe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},$he=0,ip=[];function Fhe(e){var t=x.useRef([]),r=x.useRef([0,0]),s=x.useRef(),i=x.useState($he++)[0],a=x.useState(Dq)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=ahe([e.lockRef.current],(e.shards||[]).map(iL),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var j=qb(g),_=r.current,w="deltaX"in g?g.deltaX:_[0]-j[0],A="deltaY"in g?g.deltaY:_[1]-j[1],S,P=g.target,C=Math.abs(w)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&P.type==="range")return!1;var T=nL(C,P);if(!T)return!0;if(T?S=C:(S=C==="v"?"h":"v",T=nL(C,P)),!T)return!1;if(!s.current&&"changedTouches"in g&&(w||A)&&(s.current=S),!S)return!0;var M=s.current||S;return Ihe(M,y,g,M==="h"?w:A,!0)},[]),c=x.useCallback(function(g){var y=g;if(!(!ip.length||ip[ip.length-1]!==a)){var j="deltaY"in y?sL(y):qb(y),_=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&Rhe(S.delta,j)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var w=(o.current.shards||[]).map(iL).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=w.length>0?l(y,w[0]):!o.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),u=x.useCallback(function(g,y,j,_){var w={name:g,delta:y,target:j,should:_,shadowParent:zhe(j)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(A){return A!==w})},1)},[]),d=x.useCallback(function(g){r.current=qb(g),s.current=void 0},[]),h=x.useCallback(function(g){u(g.type,sL(g),g.target,l(g,e.lockRef.current))},[]),m=x.useCallback(function(g){u(g.type,qb(g),g.target,l(g,e.lockRef.current))},[]);x.useEffect(function(){return ip.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,sp),document.addEventListener("touchmove",c,sp),document.addEventListener("touchstart",d,sp),function(){ip=ip.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,sp),document.removeEventListener("touchmove",c,sp),document.removeEventListener("touchstart",d,sp)}},[]);var p=e.removeScrollBar,v=e.inert;return x.createElement(x.Fragment,null,v?x.createElement(a,{styles:Dhe(i)}):null,p?x.createElement(Che,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function zhe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Bhe=phe(Rq,Fhe);var Bq=x.forwardRef(function(e,t){return x.createElement(O2,uc({},e,{ref:t,sideCar:Bhe}))});Bq.classNames=O2.classNames;const Gk=Bq;var HA=["Enter"," "],qhe=["ArrowDown","PageUp","Home"],qq=["ArrowUp","PageDown","End"],Vhe=[...qhe,...qq],Uhe={ltr:[...HA,"ArrowRight"],rtl:[...HA,"ArrowLeft"]},Hhe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},I0="Menu",[Ey,Whe,Ghe]=Ph(I0),[gm,Vq]=ws(I0,[Ghe,T2,px]),L2=T2(),Uq=px(),[Khe,xm]=gm(I0),[Zhe,R0]=gm(I0),Hq=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:i,onOpenChange:a,modal:o=!0}=e,l=L2(t),[c,u]=x.useState(null),d=x.useRef(!1),h=ts(a),m=Ch(i);return x.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),n.jsx(Nq,{...l,children:n.jsx(Khe,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:u,children:n.jsx(Zhe,{scope:t,onClose:x.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:s})})})};Hq.displayName=I0;var Xhe="MenuAnchor",Kk=x.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,i=L2(r);return n.jsx(Sq,{...i,...s,ref:t})});Kk.displayName=Xhe;var Zk="MenuPortal",[Yhe,Wq]=gm(Zk,{forceMount:void 0}),Gq=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:i}=e,a=xm(Zk,t);return n.jsx(Yhe,{scope:t,forceMount:r,children:n.jsx(hi,{present:r||a.open,children:n.jsx(E0,{asChild:!0,container:i,children:s})})})};Gq.displayName=Zk;var Bo="MenuContent",[Jhe,Xk]=gm(Bo),Kq=x.forwardRef((e,t)=>{const r=Wq(Bo,e.__scopeMenu),{forceMount:s=r.forceMount,...i}=e,a=xm(Bo,e.__scopeMenu),o=R0(Bo,e.__scopeMenu);return n.jsx(Ey.Provider,{scope:e.__scopeMenu,children:n.jsx(hi,{present:s||a.open,children:n.jsx(Ey.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(Qhe,{...i,ref:t}):n.jsx(efe,{...i,ref:t})})})})}),Qhe=x.forwardRef((e,t)=>{const r=xm(Bo,e.__scopeMenu),s=x.useRef(null),i=Gt(t,s);return x.useEffect(()=>{const a=s.current;if(a)return Wk(a)},[]),n.jsx(Yk,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:ft(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),efe=x.forwardRef((e,t)=>{const r=xm(Bo,e.__scopeMenu);return n.jsx(Yk,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),tfe=Kf("MenuContent.ScrollLock"),Yk=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:v,...g}=e,y=xm(Bo,r),j=R0(Bo,r),_=L2(r),w=Uq(r),A=Whe(r),[S,P]=x.useState(null),C=x.useRef(null),T=Gt(t,C,y.onContentChange),M=x.useRef(0),z=x.useRef(""),O=x.useRef(0),I=x.useRef(null),q=x.useRef("right"),F=x.useRef(0),W=v?Gk:x.Fragment,V=v?{as:tfe,allowPinchZoom:!0}:void 0,ne=K=>{var Ne,le;const ee=z.current+K,xe=A().filter(Q=>!Q.disabled),B=document.activeElement,X=(Ne=xe.find(Q=>Q.ref.current===B))==null?void 0:Ne.textValue,ie=xe.map(Q=>Q.textValue),me=ffe(ie,ee,X),ye=(le=xe.find(Q=>Q.textValue===me))==null?void 0:le.ref.current;(function Q(J){z.current=J,window.clearTimeout(M.current),J!==""&&(M.current=window.setTimeout(()=>Q(""),1e3))})(ee),ye&&setTimeout(()=>ye.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),Ik();const G=x.useCallback(K=>{var xe,B;return q.current===((xe=I.current)==null?void 0:xe.side)&&pfe(K,(B=I.current)==null?void 0:B.area)},[]);return n.jsx(Jhe,{scope:r,searchRef:z,onItemEnter:x.useCallback(K=>{G(K)&&K.preventDefault()},[G]),onItemLeave:x.useCallback(K=>{var ee;G(K)||((ee=C.current)==null||ee.focus(),P(null))},[G]),onTriggerLeave:x.useCallback(K=>{G(K)&&K.preventDefault()},[G]),pointerGraceTimerRef:O,onPointerGraceIntentChange:x.useCallback(K=>{I.current=K},[]),children:n.jsx(W,{...V,children:n.jsx(A2,{asChild:!0,trapped:i,onMountAutoFocus:ft(a,K=>{var ee;K.preventDefault(),(ee=C.current)==null||ee.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(dx,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:n.jsx(Uk,{asChild:!0,...w,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:S,onCurrentTabStopIdChange:P,onEntryFocus:ft(c,K=>{j.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(Aq,{role:"menu","aria-orientation":"vertical","data-state":u9(y.open),"data-radix-menu-content":"",dir:j.dir,..._,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:ft(g.onKeyDown,K=>{const xe=K.target.closest("[data-radix-menu-content]")===K.currentTarget,B=K.ctrlKey||K.altKey||K.metaKey,X=K.key.length===1;xe&&(K.key==="Tab"&&K.preventDefault(),!B&&X&&ne(K.key));const ie=C.current;if(K.target!==ie||!Vhe.includes(K.key))return;K.preventDefault();const ye=A().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);qq.includes(K.key)&&ye.reverse(),dfe(ye)}),onBlur:ft(e.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(M.current),z.current="")}),onPointerMove:ft(e.onPointerMove,Ty(K=>{const ee=K.target,xe=F.current!==K.clientX;if(K.currentTarget.contains(ee)&&xe){const B=K.clientX>F.current?"right":"left";q.current=B,F.current=K.clientX}}))})})})})})})});Kq.displayName=Bo;var rfe="MenuGroup",Jk=x.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(_t.div,{role:"group",...s,ref:t})});Jk.displayName=rfe;var nfe="MenuLabel",Zq=x.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(_t.div,{...s,ref:t})});Zq.displayName=nfe;var Ej="MenuItem",aL="menu.itemSelect",M2=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...i}=e,a=x.useRef(null),o=R0(Ej,e.__scopeMenu),l=Xk(Ej,e.__scopeMenu),c=Gt(t,a),u=x.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const m=new CustomEvent(aL,{bubbles:!0,cancelable:!0});h.addEventListener(aL,p=>s==null?void 0:s(p),{once:!0}),Ay(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return n.jsx(Xq,{...i,ref:c,disabled:r,onClick:ft(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:ft(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ft(e.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||HA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});M2.displayName=Ej;var Xq=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:i,...a}=e,o=Xk(Ej,r),l=Uq(r),c=x.useRef(null),u=Gt(t,c),[d,h]=x.useState(!1),[m,p]=x.useState("");return x.useEffect(()=>{const v=c.current;v&&p((v.textContent??"").trim())},[a.children]),n.jsx(Ey.ItemSlot,{scope:r,disabled:s,textValue:i??m,children:n.jsx(Hk,{asChild:!0,...l,focusable:!s,children:n.jsx(_t.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:u,onPointerMove:ft(e.onPointerMove,Ty(v=>{s?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ft(e.onPointerLeave,Ty(v=>o.onItemLeave(v))),onFocus:ft(e.onFocus,()=>h(!0)),onBlur:ft(e.onBlur,()=>h(!1))})})})}),sfe="MenuCheckboxItem",Yq=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...i}=e;return n.jsx(r9,{scope:e.__scopeMenu,checked:r,children:n.jsx(M2,{role:"menuitemcheckbox","aria-checked":Tj(r)?"mixed":r,...i,ref:t,"data-state":eE(r),onSelect:ft(i.onSelect,()=>s==null?void 0:s(Tj(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Yq.displayName=sfe;var Jq="MenuRadioGroup",[ife,afe]=gm(Jq,{value:void 0,onValueChange:()=>{}}),Qq=x.forwardRef((e,t)=>{const{value:r,onValueChange:s,...i}=e,a=ts(s);return n.jsx(ife,{scope:e.__scopeMenu,value:r,onValueChange:a,children:n.jsx(Jk,{...i,ref:t})})});Qq.displayName=Jq;var e9="MenuRadioItem",t9=x.forwardRef((e,t)=>{const{value:r,...s}=e,i=afe(e9,e.__scopeMenu),a=r===i.value;return n.jsx(r9,{scope:e.__scopeMenu,checked:a,children:n.jsx(M2,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":eE(a),onSelect:ft(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,r)},{checkForDefaultPrevented:!1})})})});t9.displayName=e9;var Qk="MenuItemIndicator",[r9,ofe]=gm(Qk,{checked:!1}),n9=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...i}=e,a=ofe(Qk,r);return n.jsx(hi,{present:s||Tj(a.checked)||a.checked===!0,children:n.jsx(_t.span,{...i,ref:t,"data-state":eE(a.checked)})})});n9.displayName=Qk;var lfe="MenuSeparator",s9=x.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(_t.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});s9.displayName=lfe;var cfe="MenuArrow",i9=x.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,i=L2(r);return n.jsx(Pq,{...i,...s,ref:t})});i9.displayName=cfe;var ufe="MenuSub",[OHe,a9]=gm(ufe),Pv="MenuSubTrigger",o9=x.forwardRef((e,t)=>{const r=xm(Pv,e.__scopeMenu),s=R0(Pv,e.__scopeMenu),i=a9(Pv,e.__scopeMenu),a=Xk(Pv,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),n.jsx(Kk,{asChild:!0,...u,children:n.jsx(Xq,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":u9(r.open),...e,ref:N0(t,i.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:ft(e.onPointerMove,Ty(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:ft(e.onPointerLeave,Ty(h=>{var p,v;d();const m=(p=r.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(v=r.content)==null?void 0:v.dataset.side,y=g==="right",j=y?-5:5,_=m[y?"left":"right"],w=m[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+j,y:h.clientY},{x:_,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:_,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ft(e.onKeyDown,h=>{var p;const m=a.searchRef.current!=="";e.disabled||m&&h.key===" "||Uhe[s.dir].includes(h.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),h.preventDefault())})})})});o9.displayName=Pv;var l9="MenuSubContent",c9=x.forwardRef((e,t)=>{const r=Wq(Bo,e.__scopeMenu),{forceMount:s=r.forceMount,...i}=e,a=xm(Bo,e.__scopeMenu),o=R0(Bo,e.__scopeMenu),l=a9(l9,e.__scopeMenu),c=x.useRef(null),u=Gt(t,c);return n.jsx(Ey.Provider,{scope:e.__scopeMenu,children:n.jsx(hi,{present:s||a.open,children:n.jsx(Ey.Slot,{scope:e.__scopeMenu,children:n.jsx(Yk,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ft(e.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ft(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ft(e.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),m=Hhe[o.dir].includes(d.key);h&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});c9.displayName=l9;function u9(e){return e?"open":"closed"}function Tj(e){return e==="indeterminate"}function eE(e){return Tj(e)?"indeterminate":e?"checked":"unchecked"}function dfe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function hfe(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function ffe(e,t,r){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=hfe(e,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function mfe(e,t){const{x:r,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>s!=m>s&&r<(h-u)*(s-d)/(m-d)+u&&(i=!i)}return i}function pfe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return mfe(r,t)}function Ty(e){return t=>t.pointerType==="mouse"?e(t):void 0}var gfe=Hq,xfe=Kk,vfe=Gq,yfe=Kq,bfe=Jk,jfe=Zq,wfe=M2,_fe=Yq,Nfe=Qq,Sfe=t9,Afe=n9,Pfe=s9,Cfe=i9,kfe=o9,Efe=c9,I2="DropdownMenu",[Tfe,LHe]=ws(I2,[Vq]),la=Vq(),[Ofe,d9]=Tfe(I2),h9=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=la(t),u=x.useRef(null),[d,h]=Ri({prop:i,defaultProp:a??!1,onChange:o,caller:I2});return n.jsx(Ofe,{scope:t,triggerId:ka(),triggerRef:u,contentId:ka(),open:d,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(m=>!m),[h]),modal:l,children:n.jsx(gfe,{...c,open:d,onOpenChange:h,dir:s,modal:l,children:r})})};h9.displayName=I2;var f9="DropdownMenuTrigger",m9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...i}=e,a=d9(f9,r),o=la(r);return n.jsx(xfe,{asChild:!0,...o,children:n.jsx(_t.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:N0(t,a.triggerRef),onPointerDown:ft(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ft(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});m9.displayName=f9;var Lfe="DropdownMenuPortal",p9=e=>{const{__scopeDropdownMenu:t,...r}=e,s=la(t);return n.jsx(vfe,{...s,...r})};p9.displayName=Lfe;var g9="DropdownMenuContent",x9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=d9(g9,r),a=la(r),o=x.useRef(!1);return n.jsx(yfe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:t,onCloseAutoFocus:ft(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ft(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!i.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});x9.displayName=g9;var Mfe="DropdownMenuGroup",Ife=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(bfe,{...i,...s,ref:t})});Ife.displayName=Mfe;var Rfe="DropdownMenuLabel",v9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(jfe,{...i,...s,ref:t})});v9.displayName=Rfe;var Dfe="DropdownMenuItem",y9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(wfe,{...i,...s,ref:t})});y9.displayName=Dfe;var $fe="DropdownMenuCheckboxItem",b9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(_fe,{...i,...s,ref:t})});b9.displayName=$fe;var Ffe="DropdownMenuRadioGroup",zfe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(Nfe,{...i,...s,ref:t})});zfe.displayName=Ffe;var Bfe="DropdownMenuRadioItem",j9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(Sfe,{...i,...s,ref:t})});j9.displayName=Bfe;var qfe="DropdownMenuItemIndicator",w9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(Afe,{...i,...s,ref:t})});w9.displayName=qfe;var Vfe="DropdownMenuSeparator",_9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(Pfe,{...i,...s,ref:t})});_9.displayName=Vfe;var Ufe="DropdownMenuArrow",Hfe=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(Cfe,{...i,...s,ref:t})});Hfe.displayName=Ufe;var Wfe="DropdownMenuSubTrigger",N9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(kfe,{...i,...s,ref:t})});N9.displayName=Wfe;var Gfe="DropdownMenuSubContent",S9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,i=la(r);return n.jsx(Efe,{...i,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S9.displayName=Gfe;var Kfe=h9,Zfe=m9,Xfe=p9,A9=x9,P9=v9,C9=y9,k9=b9,E9=j9,T9=w9,O9=_9,L9=N9,M9=S9;const tE=Kfe,rE=Zfe,Yfe=x.forwardRef(({className:e,inset:t,children:r,...s},i)=>n.jsxs(L9,{ref:i,className:st("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(hz,{className:"ml-auto h-4 w-4"})]}));Yfe.displayName=L9.displayName;const Jfe=x.forwardRef(({className:e,...t},r)=>n.jsx(M9,{ref:r,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Jfe.displayName=M9.displayName;const R2=x.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(Xfe,{children:n.jsx(A9,{ref:s,sideOffset:t,className:st("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));R2.displayName=A9.displayName;const ja=x.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(C9,{ref:s,className:st("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));ja.displayName=C9.displayName;const Qfe=x.forwardRef(({className:e,children:t,checked:r,...s},i)=>n.jsxs(k9,{ref:i,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(T9,{children:n.jsx(Mu,{className:"h-4 w-4"})})}),t]}));Qfe.displayName=k9.displayName;const eme=x.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(E9,{ref:s,className:st("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(T9,{children:n.jsx(fz,{className:"h-2 w-2 fill-current"})})}),t]}));eme.displayName=E9.displayName;const nE=x.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(P9,{ref:s,className:st("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));nE.displayName=P9.displayName;const Ng=x.forwardRef(({className:e,...t},r)=>n.jsx(O9,{ref:r,className:st("-mx-1 my-1 h-px bg-muted",e),...t}));Ng.displayName=O9.displayName;const tme=sx("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white",warning:"border-transparent bg-yellow-500 text-black",info:"border-transparent bg-blue-500 text-white"}},defaultVariants:{variant:"default"}});function Ge({className:e,variant:t,...r}){return n.jsx("div",{className:st(tme({variant:t}),e),...r})}const I9=x.createContext(),D0=()=>{const e=x.useContext(I9);if(!e)throw new Error("useMessagingNotification must be used within a MessagingNotificationProvider");return e},rme=({children:e})=>{const{user:t}=ar(),{toast:r}=pt(),[s,i]=x.useState([]),[a,o]=x.useState([]),[l,c]=x.useState({}),[u,d]=x.useState({messages:0,notifications:0}),[h,m]=x.useState(!0),[p,v]=x.useState(!0),[g,y]=x.useState(!1),[j,_]=x.useState(!1),w=x.useCallback(async()=>{if(t){y(!0);try{const F=await Je.listUserConversationsWithUnread(t.id,100),W=F.map(V=>V.id);if(W.length){const{data:V}=await pe.from("conversation_participants").select("conversation_id,user_id").in("conversation_id",W),ne=(V==null?void 0:V.reduce((K,ee)=>((K[ee.conversation_id]||(K[ee.conversation_id]=[])).push(ee.user_id),K),{}))||{},G=F.map(K=>({id:K.id,participants:ne[K.id]||[K.created_by].filter(Boolean),title:K.subject||K.title||"Conversation",parcelId:K.parcel_id||null,lastMessage:K.last_message||"",lastMessageAt:K.last_message_at||K.updated_at,updatedAt:K.updated_at||K.created_at,unreadCount:K.unread_count||0}));i(G)}else i([])}catch(F){console.error("loadConversations failed",F)}finally{y(!1),m(!1)}}},[t]);x.useEffect(()=>{w()},[w]),x.useEffect(()=>{if(!t)return;const F=pe.channel(`messaging_${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},W=>{const V=W.new;V.conversation_id&&(i(ne=>(ne.find(G=>G.id===V.conversation_id)||w(),ne)),c(ne=>{const G=ne[V.conversation_id]||[];return{...ne,[V.conversation_id]:[...G,V]}}))}).subscribe();return()=>{pe.removeChannel(F)}},[t,w]);const A=x.useCallback(async()=>{if(t){_(!0);try{const F=await Je.listNotifications(t.id,{unreadOnly:!1,limit:100});o(F)}catch(F){console.error("loadNotifications failed",F)}finally{_(!1)}}},[t]);x.useEffect(()=>{A()},[A]),x.useEffect(()=>{if(!t)return;const F=pe.channel(`notifications_${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t.id}`},W=>{const V=W.new;o(ne=>[V,...ne].slice(0,100))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${t.id}`},W=>{const V=W.new;o(ne=>ne.map(G=>G.id===V.id?V:G))}).subscribe();return()=>{pe.removeChannel(F)}},[t]);const S=x.useCallback(F=>((async()=>{try{const W=await Je.listConversationMessages(F,500);c(V=>({...V,[F]:W}))}catch(W){console.error("fetch messages failed",W)}})(),()=>{}),[]);x.useEffect(()=>{if(!t)return;const F=s.reduce((V,ne)=>V+(ne.unreadCount||0),0),W=a.filter(V=>!V.read).length;d({messages:F,notifications:W})},[s,a,t]);const q={conversations:s,notifications:a,messages:l,unreadCounts:u,loading:h,isFirebaseAvailable:p,sendMessage:async(F,W)=>{if(t)try{await Je.sendMessage({conversationId:F,senderId:t.id,content:W});const V=await Je.listConversationMessages(F,500);c(ne=>({...ne,[F]:V})),i(ne=>ne.map(G=>G.id===F?{...G,lastMessage:W,lastMessageAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:G))}catch(V){console.error("sendMessage failed",V),r({title:"Erreur",description:"Impossible d'envoyer le message",variant:"destructive"})}},createConversation:async(F,W=null,V=null)=>{if(!t)return null;try{const ne=await Je.createConversation({subject:V,creatorId:t.id,participantIds:F});if(ne)return i(G=>[{id:ne.id,participants:F.concat(t.id),title:V||"Conversation",parcelId:W,lastMessage:"",updatedAt:ne.created_at,lastMessageAt:ne.created_at,unreadCount:{}},...G]),ne.id}catch(ne){console.error("createConversation failed",ne)}return null},subscribeToMessages:S,markMessagesAsRead:async F=>{if(!(!t||!F))try{await Je.markConversationMessagesRead({conversationId:F,userId:t.id});const W=await Je.getConversationUnreadCount({conversationId:F,userId:t.id});i(V=>V.map(ne=>ne.id===F?{...ne,unreadCount:W}:ne))}catch(W){console.warn("markMessagesAsRead failed",W)}},markNotificationAsRead:async F=>{try{await Je.markNotificationRead(F),A()}catch(W){console.error("markNotificationAsRead failed",W)}},deleteNotification:async()=>{},markAllNotificationsAsRead:async()=>{try{await Promise.all(a.filter(F=>!F.read).map(F=>Je.markNotificationRead(F.id))),A()}catch(F){console.error("markAllNotificationsAsRead failed",F)}},deleteAllNotifications:async()=>{}};return n.jsx(I9.Provider,{value:q,children:e})},nme=e=>e?e.split("@")[0].substring(0,2).toUpperCase():"??",sme=({isScrolled:e})=>{const{user:t,signOut:r}=ar(),s=kn(),{toast:i}=pt(),{unreadCounts:a,isFirebaseAvailable:o}=D0()||{unreadCounts:{messages:0,notifications:0},isFirebaseAvailable:!1},l=async()=>{await r(),i({title:"Dconnexion russie"}),s("/")};return n.jsx("div",{className:"flex items-center gap-2 md:gap-3",children:t?n.jsxs(n.Fragment,{children:[n.jsx(Y,{variant:"ghost",size:"icon",className:"relative h-10 w-10",asChild:!0,children:n.jsxs(dt,{to:"/dashboard/messaging",children:[n.jsx(Nh,{className:"h-5 w-5"}),a.messages>0&&n.jsx(Ge,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs",children:a.messages>99?"99+":a.messages})]})}),n.jsxs(tE,{children:[n.jsx(rE,{asChild:!0,children:n.jsx(Y,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:n.jsxs(Ti,{className:"h-10 w-10 border-2 border-transparent hover:border-primary",children:[n.jsx(Py,{src:t.avatar_url||`https://avatar.vercel.sh/${t.email}.png`,alt:t.full_name||t.email}),n.jsx(Oi,{children:nme(t.email)})]})})}),n.jsxs(R2,{align:"end",className:"w-56",children:[n.jsxs(nE,{children:[n.jsx("p",{className:"font-semibold truncate",children:t.full_name||t.email}),n.jsx("p",{className:"text-xs text-muted-foreground font-normal capitalize",children:t.role})]}),n.jsx(Ng,{}),n.jsx(ja,{asChild:!0,children:n.jsxs(dt,{to:"/dashboard/admin",children:[n.jsx(zie,{className:"mr-2 h-4 w-4"})," Tableau de Bord"]})}),n.jsx(ja,{asChild:!0,children:n.jsxs(dt,{to:"/dashboard/profile",children:[n.jsx(oi,{className:"mr-2 h-4 w-4"})," Mon Profil"]})}),n.jsx(ja,{asChild:!0,children:n.jsxs(dt,{to:"/dashboard/settings",children:[n.jsx(Yf,{className:"mr-2 h-4 w-4"})," Paramtres"]})}),n.jsx(Ng,{}),n.jsxs(ja,{onClick:l,className:"text-red-600 focus:text-red-600",children:[n.jsx(pk,{className:"mr-2 h-4 w-4"})," Dconnexion"]})]})]})]}):n.jsx("div",{className:"hidden md:flex items-center gap-3",children:n.jsx(Y,{variant:"ghost",size:"sm",asChild:!0,children:n.jsx(dt,{to:"/login",children:"Connexion"})})})})},ime=15e3,ame=()=>{const{user:e}=ar(),[t,r]=x.useState([]),[s,i]=x.useState(0),[a,o]=x.useState(!1),{markAllNotificationsAsRead:l}=D0()||{},c=kn(),u=async()=>{if(e){o(!0);try{const h=await Je.listNotifications(e.id,{unreadOnly:!1,limit:20});r(h),i(h.filter(m=>!m.read).length)}catch{}o(!1)}};x.useEffect(()=>{u()},[e]),x.useEffect(()=>{if(!e)return;const h=setInterval(u,ime);return()=>clearInterval(h)},[e]);const d=async h=>{await Je.markNotificationRead(h),r(m=>m.map(p=>p.id===h?{...p,read:!0,read_at:new Date().toISOString()}:p)),i(m=>Math.max(0,m-1))};return e?n.jsxs(tE,{children:[n.jsx(rE,{asChild:!0,children:n.jsxs(Y,{variant:"ghost",size:"icon",className:"relative","aria-label":"Notifications",children:[n.jsx(Nl,{className:"h-5 w-5"}),s>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:s>9?"9+":s})]})}),n.jsxs(R2,{align:"end",className:"w-80 max-h-[400px] overflow-auto",children:[n.jsxs(nE,{className:"flex justify-between items-center gap-2",children:[n.jsx("span",{children:"Notifications"}),n.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[n.jsxs(Y,{variant:"ghost",size:"xs",className:"h-6 px-2 text-[10px]",disabled:s===0,onClick:h=>{h.stopPropagation(),l&&l(),i(0)},children:[n.jsx(v2,{className:"h-3 w-3 mr-1"})," Tout lu"]}),n.jsxs(Y,{variant:"ghost",size:"xs",className:"h-6 px-2 text-[10px]",onClick:h=>{h.stopPropagation(),c("/dashboard/notifications")},children:[n.jsx(y2,{className:"h-3 w-3 mr-1"})," Voir tout"]})]}),a&&n.jsx("span",{className:"text-[10px] text-muted-foreground ml-2",children:"Maj..."})]}),n.jsx(Ng,{}),t.length===0&&n.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"Aucune notification"}),t.map(h=>n.jsxs(ja,{className:"whitespace-normal flex flex-col items-start space-y-1",onClick:()=>!h.read&&d(h.id),children:[n.jsxs("div",{className:"flex w-full items-center justify-between",children:[n.jsx("span",{className:"text-xs uppercase tracking-wide text-primary font-medium",children:h.type}),!h.read&&n.jsx("span",{className:"text-[10px] bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:"Nouveau"})]}),n.jsx("p",{className:"text-sm font-medium leading-tight",children:h.title}),h.body&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:h.body}),n.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:new Date(h.created_at).toLocaleString("fr-FR")})]},h.id))]})]}):null};var D2="Collapsible",[ome,R9]=ws(D2),[lme,sE]=ome(D2),D9=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:s,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c,u]=Ri({prop:s,defaultProp:i??!1,onChange:o,caller:D2});return n.jsx(lme,{scope:r,disabled:a,contentId:ka(),open:c,onOpenToggle:x.useCallback(()=>u(d=>!d),[u]),children:n.jsx(_t.div,{"data-state":lE(c),"data-disabled":a?"":void 0,...l,ref:t})})});D9.displayName=D2;var $9="CollapsibleTrigger",iE=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,...s}=e,i=sE($9,r);return n.jsx(_t.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":lE(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:t,onClick:ft(e.onClick,i.onOpenToggle)})});iE.displayName=$9;var aE="CollapsibleContent",oE=x.forwardRef((e,t)=>{const{forceMount:r,...s}=e,i=sE(aE,e.__scopeCollapsible);return n.jsx(hi,{present:r||i.open,children:({present:a})=>n.jsx(cme,{...s,ref:t,present:a})})});oE.displayName=aE;var cme=x.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:s,children:i,...a}=e,o=sE(aE,r),[l,c]=x.useState(s),u=x.useRef(null),d=Gt(t,u),h=x.useRef(0),m=h.current,p=x.useRef(0),v=p.current,g=o.open||l,y=x.useRef(g),j=x.useRef(void 0);return x.useEffect(()=>{const _=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(_)},[]),Mn(()=>{const _=u.current;if(_){j.current=j.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const w=_.getBoundingClientRect();h.current=w.height,p.current=w.width,y.current||(_.style.transitionDuration=j.current.transitionDuration,_.style.animationName=j.current.animationName),c(s)}},[o.open,s]),n.jsx(_t.div,{"data-state":lE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:g&&i})});function lE(e){return e?"open":"closed"}var F9=D9,ume=iE,dme=oE;const z9=F9,B9=iE,q9=oE,hme=[{title:"Banques & Finances",href:"/solutions/banques",description:"valuez les garanties et analysez les risques fonciers.",icon:Rl},{title:"Promoteurs",href:"/solutions/promoteurs",description:"Identifiez des opportunits et suivez vos projets de construction.",icon:Vn},{title:"Investisseurs",href:"/solutions/investisseurs",description:"Suivez votre portefeuille et dtectez les meilleures opportunits.",icon:Br},{title:"Agriculteurs",href:"/solutions/agriculteurs",description:"Grez vos parcelles, suivez la mto et analysez vos sols.",icon:vg}],fme=[{title:"Mairies",href:"/dashboard",description:"Grez le cadastre, les permis et les demandes citoyennes.",icon:Ea},{title:"Notaires",href:"/dashboard",description:"Authentifiez les actes et consultez les archives en toute scurit.",icon:lx},{title:"Agents Immobiliers",href:"/agent",description:"Grez vos clients et mandats.",icon:ax},{title:"Particuliers",href:"/dashboard",description:"Listez votre bien et suivez vos demandes.",icon:bs},{title:"Scurisation Foncire",href:"/how-it-works",description:"Prvenez les litiges grce  des titres clairs.",icon:Ac},{title:"Dveloppement Agricole",href:"/solutions/agriculteurs",description:"Accdez  des donnes cls pour vos rendements.",icon:Az}],mme=({isOpen:e,onClose:t})=>{const{user:r}=ar(),s=a=>`block px-4 py-3 rounded-md text-base font-medium transition-colors hover:bg-accent hover:text-accent-foreground ${a?"bg-accent text-accent-foreground":"text-foreground"}`,i=({title:a,items:o})=>{const[l,c]=x.useState(!1);return n.jsxs(z9,{open:l,onOpenChange:c,children:[n.jsx(B9,{className:"w-full",children:n.jsxs("div",{className:st(s(!1),"flex justify-between items-center"),children:[n.jsx("span",{children:a}),l?n.jsx(S0,{className:"h-5 w-5"}):n.jsx(hz,{className:"h-5 w-5"})]})}),n.jsx(q9,{className:"pl-4 border-l-2 ml-4 border-primary/50",children:o.map(u=>n.jsx(gu,{to:u.href,className:({isActive:d})=>s(d),onClick:t,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(u.icon,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:u.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:u.description})]})]})},u.href))})]})};return e?n.jsx("div",{className:"md:hidden absolute top-16 left-0 right-0 bg-background border-t shadow-lg max-h-[calc(100vh-4rem)] overflow-y-auto",children:n.jsxs("div",{className:"container mx-auto px-4 space-y-2 py-4",children:[n.jsx(gu,{to:"/",className:({isActive:a})=>s(a),onClick:t,end:!0,children:"Accueil"}),n.jsx(gu,{to:"/parcelles",className:({isActive:a})=>s(a),onClick:t,children:"Terrains"}),n.jsx(i,{title:"Solutions",items:hme}),n.jsx(i,{title:"cosystme",items:fme}),n.jsx(gu,{to:"/how-it-works",className:({isActive:a})=>s(a),onClick:t,children:"Fonctionnement"}),n.jsx(gu,{to:"/contact",className:({isActive:a})=>s(a),onClick:t,children:"Contact"}),n.jsx("div",{className:"border-t pt-4 mt-4 space-y-3",children:r?n.jsx(Y,{size:"sm",className:"w-full",asChild:!0,variant:"default",onClick:t,children:n.jsx(dt,{to:"/dashboard",children:"Mon Tableau de Bord"})}):n.jsx(Y,{variant:"outline",className:"w-full",size:"sm",asChild:!0,onClick:t,children:n.jsx(dt,{to:"/login",children:"Connexion"})})})]})}):null},V9=({children:e,isDashboard:t,isSolutionDashboard:r})=>{const[s,i]=x.useState(!1),[a,o]=x.useState(!1),l=Di();x.useEffect(()=>{const h=()=>{o(window.scrollY>10)};return window.addEventListener("scroll",h,{passive:!0}),h(),()=>window.removeEventListener("scroll",h)},[]),x.useEffect(()=>{i(!1)},[l.pathname]);const c=()=>i(!s),u=t||r,d=!0;return n.jsxs("header",{className:st("fixed top-0 left-0 right-0 z-50 transition-all duration-300 h-20","bg-background/95 border-b backdrop-blur-sm shadow-sm",s&&"shadow-lg"),children:[n.jsxs("nav",{className:"container mx-auto px-4 h-full flex items-center justify-between",children:[e||n.jsx(Lce,{isScrolled:d}),!u&&n.jsx(iue,{isScrolled:d}),n.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[!u&&n.jsx(ame,{}),n.jsx(sme,{isScrolled:d}),!u&&n.jsx(aue,{isMenuOpen:s,isScrolled:d,onClick:c})]})]}),!u&&n.jsx(mme,{isOpen:s,onClose:()=>i(!1)})]})},pme=()=>{const e=new Date().getFullYear(),t=[{title:"Teranga Foncier",links:[{label:" Propos de Nous",path:"/about"},{label:"Comment a Marche ?",path:"/how-it-works"},{label:"Notre Blog",path:"/blog"},{label:"Devenir Partenaire",path:"/partners"},{label:"Tarifs & Frais",path:"/pricing"}]},{title:"Nos Solutions",links:[{label:"Pour les Banques",path:"/solutions/banques"},{label:"Pour les Promoteurs",path:"/solutions/promoteurs"},{label:"Pour les Investisseurs",path:"/solutions/investisseurs"},{label:"Pour les Agriculteurs",path:"/solutions/agriculteurs"}]},{title:"Ressources",links:[{label:"Contactez-Nous",path:"/contact"},{label:"FAQ",path:"/faq"},{label:"Glossaire du Foncier",path:"/glossary"},{label:"Guide Fiscal",path:"/tax-guide"}]},{title:"Lgal",links:[{label:"Mentions Lgales",path:"/legal"},{label:"Politique de Confidentialit",path:"/privacy"},{label:"Politique de Cookies",path:"/cookie-policy"}]}],r=[{icon:mk,path:"https://www.linkedin.com/in/abdoulaye-di%C3%A9m%C3%A9-58136a1b1/",label:"LinkedIn"}];return n.jsx("footer",{className:"bg-slate-900 text-slate-300 border-t border-slate-700",children:n.jsxs("div",{className:"container mx-auto px-4 py-12 md:py-16",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 mb-10",children:[n.jsxs("div",{className:"space-y-4 md:col-span-2 lg:col-span-1",children:[n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs(dt,{to:"/",className:"inline-block",children:[n.jsx("span",{className:"text-2xl font-bold text-primary",children:"Teranga Foncier"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Par Abdoulaye Dim"})]})}),n.jsx("p",{className:"text-sm",children:"Votre partenaire de confiance pour un investissement foncier scuris au Sngal."}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("a",{href:"https://www.google.com/maps/search/?api=1&query=Dakar,+Sngal",target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:text-primary transition-colors",children:[n.jsx(jr,{className:"h-4 w-4 mr-2 flex-shrink-0"})," Dakar, Sngal"]}),n.jsxs("div",{className:"flex items-center hover:text-primary transition-colors",children:[n.jsx(Sh,{className:"h-4 w-4 mr-2 flex-shrink-0"}),n.jsx("div",{children:n.jsx("a",{href:"tel:+221775934241",className:"block",children:"+221 77 593 42 41"})})]}),n.jsxs("div",{className:"flex items-center hover:text-primary transition-colors",children:[n.jsx(C0,{className:"h-4 w-4 mr-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("a",{href:"mailto:contact@terangafoncier.com",className:"block",children:"contact@terangafoncier.com"}),n.jsx("a",{href:"mailto:palaye122@gmail.com",className:"block text-xs",children:"palaye122@gmail.com"})]})]})]})]}),t.map(s=>n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-slate-100 mb-4",children:s.title}),n.jsx("ul",{className:"space-y-2",children:s.links.map(i=>n.jsx("li",{children:n.jsx(dt,{to:i.path,className:"text-sm hover:text-primary transition-colors",children:i.label})},i.label))})]},s.title))]}),n.jsxs("div",{className:"border-t border-slate-700 pt-8 flex flex-col md:flex-row justify-between items-center text-sm",children:[n.jsxs("p",{className:"text-slate-400 mb-4 md:mb-0",children:[" ",e," Teranga Foncier. Tous droits rservs. Conu par Abdoulaye Dim."]}),n.jsx("div",{className:"flex space-x-4",children:r.map(s=>n.jsx("a",{href:s.path,target:"_blank",rel:"noopener noreferrer","aria-label":s.label,className:"text-slate-400 hover:text-primary transition-colors",children:n.jsx(s.icon,{className:"h-5 w-5"})},s.label))})]})]})})},Vt={profile:{label:"Mon Profil",href:"/dashboard/profile",icon:oi,end:!0},notifications:{label:"Notifications",href:"/dashboard/notifications",icon:Nl,end:!0},messaging:{label:"Messagerie",href:"/dashboard/messaging",icon:Nh,end:!0}},gme=[{label:"Dashboard",href:"/dashboard/admin",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION"},{label:"Utilisateurs & Accs",icon:bs,subItems:[{label:"Tous les Utilisateurs",href:"/dashboard/admin/users",icon:bs,end:!0},{label:"Administrateurs",href:"/dashboard/admin/users?type=Administrateur",icon:ns,end:!0},{label:"Agents Fonciers",href:"/dashboard/admin/users?type=Agent",icon:dh,end:!0},{label:"Particuliers",href:"/dashboard/admin/users?type=Particulier",icon:oi,end:!0},{label:"Vendeurs",href:"/dashboard/admin/users?type=Vendeur",icon:eoe,end:!0},{label:"Mairies",href:"/dashboard/admin/users?type=Mairie",icon:Ea,end:!0},{label:"Banques",href:"/dashboard/admin/users?type=Banque",icon:Rl,end:!0},{label:"Notaires",href:"/dashboard/admin/users?type=Notaire",icon:A0,end:!0},{label:"Promoteurs",href:"/dashboard/admin/users?type=Promoteur",icon:Vn,end:!0},{label:"Agriculteurs",href:"/dashboard/admin/users?type=Agriculteur",icon:vg,end:!0},{label:"Investisseurs",href:"/dashboard/admin/users?type=Investisseur",icon:Br,end:!0}]},{label:"Parcelles",icon:ia,subItems:[{label:"Toutes les Parcelles",href:"/dashboard/admin/parcels",icon:ia,end:!0},{label:"Soumissions",href:"/dashboard/admin/parcel-submissions",icon:Xse,end:!0}]},{label:"Demandes",icon:Ac,subItems:[{label:"Toutes les Demandes",href:"/dashboard/admin/requests",icon:Ac,end:!0},{label:"Changement de Type",href:"/dashboard/admin/type-change-requests",icon:bk,end:!0}]},{label:"Contrats",href:"/dashboard/admin/contracts",icon:xk,end:!0},{label:"Transactions",href:"/dashboard/admin/transactions",icon:fs,end:!0},{isSeparator:!0},{isHeader:!0,label:"RGULATION & SURVEILLANCE"},{label:"Conformit",href:"/dashboard/admin/compliance",icon:Ys,end:!0},{label:"Rapports & Stats",href:"/dashboard/admin/reports",icon:ix,end:!0},{label:"Litiges",href:"/dashboard/admin/disputes",icon:kr,end:!0},{isSeparator:!0},{isHeader:!0,label:"OUTILS"},{label:"Assistant IA",href:"/dashboard/admin/ai-assistant",icon:bz,end:!0},{label:"Gestion du Blog",href:"/dashboard/admin/blog",icon:Zf,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.notifications,Vt.messaging,Vt.logout],xme=[{label:"Dashboard",href:"/dashboard/agent",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION QUOTIDIENNE"},{label:"Mes Clients",href:"/dashboard/agent/clients",icon:bs,end:!0},{label:"Mes Parcelles",href:"/dashboard/agent/parcels",icon:ia,end:!0},{label:"Mes Tches",href:"/dashboard/agent/tasks",icon:Xf,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],vme=[{label:"Dashboard",href:"/dashboard/particulier",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"MES BIENS & DEMANDES"},{label:"Crer une Demande",href:"/dashboard/create-request",icon:Cr,end:!0},{label:"Mes Demandes",href:"/dashboard/my-requests",icon:Ac,end:!0},{label:"Mes Annonces",href:"/dashboard/my-listings",icon:xg,end:!0},{label:"Mes Favoris",href:"/dashboard/favorites",icon:Kp,end:!0},{label:"Mon Coffre Numrique",href:"/dashboard/digital-vault",icon:fie,end:!0},{isSeparator:!0},{isHeader:!0,label:"TRANSACTIONS & PAIEMENTS"},{label:"Mes Transactions",href:"/dashboard/transactions",icon:fs,end:!0},{label:"Mes Paiements",href:"/dashboard/payment",icon:Rl,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],yme=[{label:"Dashboard",href:"/dashboard/vendeur",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"MES ANNONCES"},{label:"Mes Annonces",href:"/dashboard/my-listings",icon:xg,end:!0},{label:"Vendre une Proprit",href:"/dashboard/sell-property",icon:yz,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION DES VENTES"},{label:"Suivi des Demandes",href:"/dashboard/my-requests",icon:Ac,end:!0},{label:"Mes Transactions",href:"/dashboard/transactions",icon:fs,end:!0},{label:"Mes Contrats",href:"/dashboard/contracts",icon:xk,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],bme=[{label:"Dashboard",href:"/dashboard/investisseur",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"ANALYSE & OPPORTUNITS"},{label:"Analyse de March",href:"/dashboard/investisseur/market-analysis",icon:Br,end:!0},{label:"Opportunits",href:"/dashboard/investisseur/opportunities",icon:wr,end:!0},{label:"Calculateur ROI",href:"/dashboard/investisseur/roi-calculator",icon:jy,end:!0},{isSeparator:!0},{isHeader:!0,label:"MES INVESTISSEMENTS"},{label:"Mes Investissements",href:"/dashboard/investisseur/investissements",icon:gg,end:!0},{label:"Due Diligence",href:"/dashboard/investisseur/due-diligence",icon:Xf,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],jme=[{label:"Dashboard",href:"/dashboard/promoteur",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION DE PROJETS"},{label:"Mes Projets",href:"/dashboard/promoteur/projects",icon:Vn,end:!0},{label:"Suivi Construction",href:"/dashboard/promoteur/construction-tracking",icon:Xf,end:!0},{isSeparator:!0},{isHeader:!0,label:"VENTES & FINANCES"},{label:"Ventes",href:"/dashboard/promoteur/sales",icon:fs,end:!0},{label:"Transactions",href:"/dashboard/transactions",icon:Rl,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],wme=[{label:"Dashboard",href:"/dashboard/agriculteur",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION DES TERRES"},{label:"Mes Terres",href:"/dashboard/agriculteur/my-lands",icon:vg,end:!0},{label:"Analyse du Sol",href:"/dashboard/agriculteur/soil-analysis",icon:lx,end:!0},{label:"Mto & Climat",href:"/dashboard/agriculteur/weather",icon:Tp,end:!0},{isSeparator:!0},{isHeader:!0,label:"OPRATIONS"},{label:"Journal de Bord",href:"/dashboard/agriculteur/logbook",icon:Zf,end:!0},{label:"quipement",href:"/dashboard/agriculteur/equipment",icon:ooe,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],_me=[{label:"Dashboard",href:"/dashboard/banque",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION DES GARANTIES"},{label:"Mes Garanties",href:"/dashboard/banque/guarantees",icon:Ys,end:!0},{label:"valuation Foncire",href:"/dashboard/banque/land-valuation",icon:lx,end:!0},{label:"Demandes de Financement",href:"/dashboard/banque/funding-requests",icon:Rl,end:!0},{isSeparator:!0},{isHeader:!0,label:"CONFORMIT & RAPPORTS"},{label:"Conformit",href:"/dashboard/banque/compliance",icon:hk,end:!0},{label:"Rapports & Analyses",href:"/dashboard/banque/reports",icon:ix,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],Nme=[{label:"Dashboard",href:"/dashboard/mairie",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION FONCIRE"},{label:"Gestion des Terres",href:"/dashboard/mairie/land-management",icon:ia,end:!0},{label:"Cadastre Numrique",href:"/dashboard/mairie/cadastre",icon:ox,end:!0},{label:"Plan d'Urbanisme",href:"/dashboard/mairie/urban-plan",icon:Ea,end:!0},{isSeparator:!0},{isHeader:!0,label:"DEMANDES & LITIGES"},{label:"Gestion des Demandes",href:"/dashboard/mairie/requests",icon:Ac,end:!0},{label:"Litiges Fonciers",href:"/dashboard/mairie/disputes",icon:kr,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],Sme=[{label:"Dashboard",href:"/dashboard/notaire",icon:fo,end:!0},{isSeparator:!0},{isHeader:!0,label:"GESTION DES DOSSIERS"},{label:"Dossiers en Cours",href:"/dashboard/notaire/cases",icon:gg,end:!0},{label:"Authentification d'Actes",href:"/dashboard/notaire/authentication",icon:A0,end:!0},{label:"Archives",href:"/dashboard/notaire/archives",icon:x2,end:!0},{isSeparator:!0},{isHeader:!0,label:"OUTILS"},{label:"Vrification de Conformit",href:"/dashboard/notaire/compliance-check",icon:Ys,end:!0},{isSeparator:!0},{isHeader:!0,label:"MON COMPTE"},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout],Ame=e=>{if(!e)return[{label:"Accueil",href:"/",icon:P0,end:!0}];const t=e.role,r=e.type?e.type.charAt(0).toUpperCase()+e.type.slice(1).toLowerCase():"";if(t==="admin"||r==="Administrateur")return gme;if(t==="agent"||r==="Agent")return xme;switch(r){case"Vendeur":return yme;case"Investisseur":return bme;case"Promoteur":return jme;case"Agriculteur":return wme;case"Banque":return _me;case"Mairie":return Nme;case"Notaire":return Sme;case"Particulier":return vme;default:return[{label:"Dashboard",href:"/dashboard/particulier",icon:fo,end:!0},Vt.profile,Vt.settings,Vt.notifications,Vt.messaging,Vt.logout]}},oL=({item:e,unreadCount:t})=>n.jsxs(n.Fragment,{children:[e.icon&&we.createElement(e.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),n.jsx("span",{className:"flex-grow",children:e.label}),t>0&&n.jsx(Ge,{variant:"destructive",className:"ml-auto",children:t})]}),Pme=({isCollapsed:e,toggleSidebar:t})=>{var h,m;const{user:r,profile:s,signOut:i}=ar(),[a,o]=x.useState({}),l=Di(),c=Ame(s),{unreadCounts:u}=D0()||{unreadCounts:{messages:0,notifications:0}},d=p=>{e||o(v=>({...v,[p]:!v[p]}))};return x.useEffect(()=>{e&&o({})},[e]),x.useEffect(()=>{const p=(c||[]).filter(Boolean).find(v=>v&&v.subItems&&v.subItems.some(g=>l.pathname===g.href));p&&o(v=>({...v,[p.label]:!0}))},[l.pathname,c]),n.jsxs("aside",{className:st("fixed top-0 left-0 h-screen bg-card text-card-foreground border-r transition-all duration-300 z-40 flex flex-col",e?"w-20":"w-64"),children:[n.jsxs("div",{className:"flex items-center p-4 border-b h-16",children:[n.jsxs(dt,{to:"/",className:"flex items-center gap-2 overflow-hidden",children:[n.jsx("img",{src:"/logo.svg",alt:"Logo",className:"h-8 w-8 flex-shrink-0"}),!e&&n.jsx("span",{className:"text-lg font-bold whitespace-nowrap",children:"Teranga Foncier"})]}),n.jsx(Y,{variant:"ghost",size:"icon",className:"ml-auto hidden md:flex",onClick:t,children:n.jsx(yse,{className:"h-5 w-5"})})]}),s&&n.jsxs("div",{className:"flex items-center gap-3 p-4 border-b",children:[n.jsxs(Ti,{className:"h-10 w-10",children:[n.jsx(Py,{src:s.avatar_url||`https://avatar.vercel.sh/${s.email}.png`,alt:s.full_name||s.email}),n.jsx(Oi,{children:((h=s.full_name)==null?void 0:h.substring(0,2).toUpperCase())||((m=s.email)==null?void 0:m.substring(0,2).toUpperCase())||"??"})]}),!e&&n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:"text-sm font-semibold truncate",children:s.full_name||s.email}),n.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:s.type||s.role||"Utilisateur"})]})]}),n.jsx("nav",{className:"flex-1 overflow-y-auto overflow-x-hidden p-2 space-y-1",children:(c||[]).filter(Boolean).map((p,v)=>{if(p.isSeparator)return n.jsx("hr",{className:"my-2 border-t border-border"},`sep-${v}`);if(p.isHeader&&!e)return n.jsx("div",{className:"px-3 py-2 text-xs font-bold text-muted-foreground uppercase tracking-wider",children:p.label},`head-${v}`);if(p.subItems){const g=a[p.label]||!1;return n.jsxs(z9,{open:!e&&g,onOpenChange:()=>d(p.label),children:[n.jsx(B9,{className:"w-full",children:n.jsxs("div",{className:st("flex items-center p-3 text-sm font-medium rounded-md transition-colors w-full","text-muted-foreground hover:bg-muted hover:text-foreground"),children:[p.icon&&we.createElement(p.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),!e&&n.jsx("span",{className:"flex-grow text-left",children:p.label}),!e&&n.jsx(S0,{className:st("h-4 w-4 ml-auto transition-transform",g&&"rotate-180")})]})}),n.jsx(q9,{className:st("overflow-hidden transition-all",e?"pl-0":"pl-4"),children:p.subItems.filter(Boolean).map(y=>n.jsx(gu,{to:y.href,end:y.end,className:({isActive:j})=>st("flex items-center p-3 text-sm font-medium rounded-md transition-colors",j?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:n.jsx(oL,{item:y,unreadCount:0})},y.href))})]},p.label)}return n.jsx(gu,{to:p.href,end:p.end,className:({isActive:g})=>st("flex items-center p-3 text-sm font-medium rounded-md transition-colors",g?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:n.jsx(oL,{item:p,unreadCount:p.href&&p.href.includes("notifications")?u.notifications:p.href&&p.href.includes("messaging")?u.messages:0})},p.href)})}),n.jsx("div",{className:"p-2 border-t",children:n.jsxs(Y,{variant:"ghost",className:"w-full justify-start p-3",onClick:async()=>{await i(),window.location.href="/"},children:[n.jsx(pk,{className:"mr-3 h-5 w-5 flex-shrink-0"}),!e&&n.jsx("span",{children:"Dconnexion"})]})})]})},De=x.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:st("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));De.displayName="Input";const $2=we.forwardRef(({className:e,children:t,...r},s)=>n.jsx("div",{ref:s,className:st("relative overflow-hidden",e),...r,children:n.jsx("div",{className:"h-full w-full rounded-[inherit]",children:n.jsx("div",{className:"relative h-full w-full overflow-y-auto overflow-x-hidden",children:t})})}));$2.displayName="ScrollArea";const U9=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),F2=x.createContext({}),z2=x.createContext(null),B2=typeof document<"u",cE=B2?x.useLayoutEffect:x.useEffect,H9=x.createContext({strict:!1}),uE=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Cme="framerAppearId",W9="data-"+uE(Cme);function kme(e,t,r,s){const{visualElement:i}=x.useContext(F2),a=x.useContext(H9),o=x.useContext(z2),l=x.useContext(U9).reducedMotion,c=x.useRef();s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:i,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(r,o)});const d=x.useRef(!!(r[W9]&&!window.HandoffComplete));return cE(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Op(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Eme(e,t,r){return x.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),r&&(typeof r=="function"?r(s):Op(r)&&(r.current=s))},[t])}function Oy(e){return typeof e=="string"||Array.isArray(e)}function q2(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const dE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hE=["initial",...dE];function V2(e){return q2(e.animate)||hE.some(t=>Oy(e[t]))}function G9(e){return!!(V2(e)||e.variants)}function Tme(e,t){if(V2(e)){const{initial:r,animate:s}=e;return{initial:r===!1||Oy(r)?r:void 0,animate:Oy(s)?s:void 0}}return e.inherit!==!1?t:{}}function Ome(e){const{initial:t,animate:r}=Tme(e,x.useContext(F2));return x.useMemo(()=>({initial:t,animate:r}),[lL(t),lL(r)])}function lL(e){return Array.isArray(e)?e.join(" "):e}const cL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ly={};for(const e in cL)Ly[e]={isEnabled:t=>cL[e].some(r=>!!t[r])};function Lme(e){for(const t in e)Ly[t]={...Ly[t],...e[t]}}const fE=x.createContext({}),K9=x.createContext({}),Mme=Symbol.for("motionComponentSymbol");function Ime({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:s,Component:i}){e&&Lme(e);function a(l,c){let u;const d={...x.useContext(U9),...l,layoutId:Rme(l)},{isStatic:h}=d,m=Ome(l),p=s(l,h);if(!h&&B2){m.visualElement=kme(i,p,d,t);const v=x.useContext(K9),g=x.useContext(H9).strict;m.visualElement&&(u=m.visualElement.loadFeatures(d,g,e,v))}return x.createElement(F2.Provider,{value:m},u&&m.visualElement?x.createElement(u,{visualElement:m.visualElement,...d}):null,r(i,l,Eme(p,m.visualElement,c),p,h,m.visualElement))}const o=x.forwardRef(a);return o[Mme]=i,o}function Rme({layoutId:e}){const t=x.useContext(fE).id;return t&&e!==void 0?t+"-"+e:e}function Dme(e){function t(s,i={}){return Ime(e(s,i))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(s,i)=>(r.has(i)||r.set(i,t(i)),r.get(i))})}const $me=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mE(e){return typeof e!="string"||e.includes("-")?!1:!!($me.indexOf(e)>-1||/[A-Z]/.test(e))}const Oj={};function Fme(e){Object.assign(Oj,e)}const $0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vm=new Set($0);function Z9(e,{layout:t,layoutId:r}){return vm.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Oj[e]||e==="opacity")}const Oa=e=>!!(e&&e.getVelocity),zme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bme=$0.length;function qme(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},s,i){let a="";for(let o=0;o<Bme;o++){const l=$0[o];if(e[l]!==void 0){const c=zme[l]||l;a+=`${c}(${e[l]}) `}}return t&&!e.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(e,s?"":a):r&&s&&(a="none"),a}const X9=e=>t=>typeof t=="string"&&t.startsWith(e),Y9=X9("--"),WA=X9("var(--"),Vme=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Ume=(e,t)=>t&&typeof e=="number"?t.transform(e):e,mh=(e,t,r)=>Math.min(Math.max(r,e),t),ym={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hv={...ym,transform:e=>mh(0,1,e)},Vb={...ym,default:1},Wv=e=>Math.round(e*1e5)/1e5,U2=/(-)?([\d]*\.?[\d])+/g,J9=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Hme=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function F0(e){return typeof e=="string"}const z0=e=>({test:t=>F0(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ld=z0("deg"),yc=z0("%"),Yt=z0("px"),Wme=z0("vh"),Gme=z0("vw"),uL={...yc,parse:e=>yc.parse(e)/100,transform:e=>yc.transform(e*100)},dL={...ym,transform:Math.round},Q9={borderWidth:Yt,borderTopWidth:Yt,borderRightWidth:Yt,borderBottomWidth:Yt,borderLeftWidth:Yt,borderRadius:Yt,radius:Yt,borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomRightRadius:Yt,borderBottomLeftRadius:Yt,width:Yt,maxWidth:Yt,height:Yt,maxHeight:Yt,size:Yt,top:Yt,right:Yt,bottom:Yt,left:Yt,padding:Yt,paddingTop:Yt,paddingRight:Yt,paddingBottom:Yt,paddingLeft:Yt,margin:Yt,marginTop:Yt,marginRight:Yt,marginBottom:Yt,marginLeft:Yt,rotate:Ld,rotateX:Ld,rotateY:Ld,rotateZ:Ld,scale:Vb,scaleX:Vb,scaleY:Vb,scaleZ:Vb,skew:Ld,skewX:Ld,skewY:Ld,distance:Yt,translateX:Yt,translateY:Yt,translateZ:Yt,x:Yt,y:Yt,z:Yt,perspective:Yt,transformPerspective:Yt,opacity:Hv,originX:uL,originY:uL,originZ:Yt,zIndex:dL,fillOpacity:Hv,strokeOpacity:Hv,numOctaves:dL};function pE(e,t,r,s){const{style:i,vars:a,transform:o,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const m=t[h];if(Y9(h)){a[h]=m;continue}const p=Q9[h],v=Ume(m,p);if(vm.has(h)){if(c=!0,o[h]=v,!d)continue;m!==(p.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=v):i[h]=v}if(t.transform||(c||s?i.transform=qme(e.transform,r,d,s):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:m="50%",originZ:p=0}=l;i.transformOrigin=`${h} ${m} ${p}`}}const gE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eV(e,t,r){for(const s in t)!Oa(t[s])&&!Z9(s,r)&&(e[s]=t[s])}function Kme({transformTemplate:e},t,r){return x.useMemo(()=>{const s=gE();return pE(s,t,{enableHardwareAcceleration:!r},e),Object.assign({},s.vars,s.style)},[t])}function Zme(e,t,r){const s=e.style||{},i={};return eV(i,s,e),Object.assign(i,Kme(e,t,r)),e.transformValues?e.transformValues(i):i}function Xme(e,t,r){const s={},i=Zme(e,t,r);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=i,s}const Yme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lj(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Yme.has(e)}let tV=e=>!Lj(e);function Jme(e){e&&(tV=t=>t.startsWith("on")?!Lj(t):e(t))}try{Jme(require("@emotion/is-prop-valid").default)}catch{}function Qme(e,t,r){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(tV(i)||r===!0&&Lj(i)||!t&&!Lj(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function hL(e,t,r){return typeof e=="string"?e:Yt.transform(t+r*e)}function epe(e,t,r){const s=hL(t,e.x,e.width),i=hL(r,e.y,e.height);return`${s} ${i}`}const tpe={offset:"stroke-dashoffset",array:"stroke-dasharray"},rpe={offset:"strokeDashoffset",array:"strokeDasharray"};function npe(e,t,r=1,s=0,i=!0){e.pathLength=1;const a=i?tpe:rpe;e[a.offset]=Yt.transform(-s);const o=Yt.transform(t),l=Yt.transform(r);e[a.array]=`${o} ${l}`}function xE(e,{attrX:t,attrY:r,attrScale:s,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,h,m){if(pE(e,u,d,m),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:v,dimensions:g}=e;p.transform&&(g&&(v.transform=p.transform),delete p.transform),g&&(i!==void 0||a!==void 0||v.transform)&&(v.transformOrigin=epe(g,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),s!==void 0&&(p.scale=s),o!==void 0&&npe(p,o,l,c,!1)}const rV=()=>({...gE(),attrs:{}}),vE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function spe(e,t,r,s){const i=x.useMemo(()=>{const a=rV();return xE(a,t,{enableHardwareAcceleration:!1},vE(s),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};eV(a,e.style,e),i.style={...a,...i.style}}return i}function ipe(e=!1){return(r,s,i,{latestValues:a},o)=>{const c=(mE(r)?spe:Xme)(s,a,o,r),d={...Qme(s,typeof r=="string",e),...c,ref:i},{children:h}=s,m=x.useMemo(()=>Oa(h)?h.get():h,[h]);return x.createElement(r,{...d,children:m})}}function nV(e,{style:t,vars:r},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const a in r)e.style.setProperty(a,r[a])}const sV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iV(e,t,r,s){nV(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(sV.has(i)?i:uE(i),t.attrs[i])}function yE(e,t){const{style:r}=e,s={};for(const i in r)(Oa(r[i])||t.style&&Oa(t.style[i])||Z9(i,e))&&(s[i]=r[i]);return s}function aV(e,t){const r=yE(e,t);for(const s in e)if(Oa(e[s])||Oa(t[s])){const i=$0.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}function bE(e,t,r,s={},i={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,s,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,s,i)),t}function oV(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const Mj=e=>Array.isArray(e),ape=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),ope=e=>Mj(e)?e[e.length-1]||0:e;function M1(e){const t=Oa(e)?e.get():e;return ape(t)?t.toValue():t}function lpe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},s,i,a){const o={latestValues:cpe(s,i,a,e),renderState:t()};return r&&(o.mount=l=>r(s,l,o)),o}const lV=e=>(t,r)=>{const s=x.useContext(F2),i=x.useContext(z2),a=()=>lpe(e,t,s,i);return r?a():oV(a)};function cpe(e,t,r,s){const i={},a=s(e,{});for(const m in a)i[m]=M1(a[m]);let{initial:o,animate:l}=e;const c=V2(e),u=G9(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;return h&&typeof h!="boolean"&&!q2(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const v=bE(e,p);if(!v)return;const{transitionEnd:g,transition:y,...j}=v;for(const _ in j){let w=j[_];if(Array.isArray(w)){const A=d?w.length-1:0;w=w[A]}w!==null&&(i[_]=w)}for(const _ in g)i[_]=g[_]}),i}const rs=e=>e;class fL{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function upe(e){let t=new fL,r=new fL,s=0,i=!1,a=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&i,m=h?t:r;return u&&o.add(c),m.add(c)&&h&&i&&(s=t.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[t,r]=[r,t],r.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),e())}i=!1,a&&(a=!1,l.process(c))}};return l}const Ub=["prepare","read","update","preRender","render","postRender"],dpe=40;function hpe(e,t){let r=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=Ub.reduce((h,m)=>(h[m]=upe(()=>r=!0),h),{}),o=h=>a[h].process(i),l=()=>{const h=performance.now();r=!1,i.delta=s?1e3/60:Math.max(Math.min(h-i.timestamp,dpe),1),i.timestamp=h,i.isProcessing=!0,Ub.forEach(o),i.isProcessing=!1,r&&t&&(s=!1,e(l))},c=()=>{r=!0,s=!0,i.isProcessing||e(l)};return{schedule:Ub.reduce((h,m)=>{const p=a[m];return h[m]=(v,g=!1,y=!1)=>(r||c(),p.schedule(v,g,y)),h},{}),cancel:h=>Ub.forEach(m=>a[m].cancel(h)),state:i,steps:a}}const{schedule:yn,cancel:Fu,state:Ai,steps:f5}=hpe(typeof requestAnimationFrame<"u"?requestAnimationFrame:rs,!0),fpe={useVisualState:lV({scrapeMotionValuesFromProps:aV,createRenderState:rV,onMount:(e,t,{renderState:r,latestValues:s})=>{yn.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),yn.render(()=>{xE(r,s,{enableHardwareAcceleration:!1},vE(t.tagName),e.transformTemplate),iV(t,r)})}})},mpe={useVisualState:lV({scrapeMotionValuesFromProps:yE,createRenderState:gE})};function ppe(e,{forwardMotionProps:t=!1},r,s){return{...mE(e)?fpe:mpe,preloadedFeatures:r,useRender:ipe(t),createVisualElement:s,Component:e}}function yu(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}const cV=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function H2(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const gpe=e=>t=>cV(t)&&e(t,H2(t));function Au(e,t,r,s){return yu(e,t,gpe(r),s)}const xpe=(e,t)=>r=>t(e(r)),sh=(...e)=>e.reduce(xpe);function uV(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const mL=uV("dragHorizontal"),pL=uV("dragVertical");function dV(e){let t=!1;if(e==="y")t=pL();else if(e==="x")t=mL();else{const r=mL(),s=pL();r&&s?t=()=>{r(),s()}:(r&&r(),s&&s())}return t}function hV(){const e=dV(!0);return e?(e(),!1):!0}class kh{constructor(t){this.isMounted=!1,this.node=t}update(){}}function gL(e,t){const r="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),i=(a,o)=>{if(a.pointerType==="touch"||hV())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&yn.update(()=>l[s](a,o))};return Au(e.current,r,i,{passive:!e.getProps()[s]})}class vpe extends kh{mount(){this.unmount=sh(gL(this.node,!0),gL(this.node,!1))}unmount(){}}class ype extends kh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sh(yu(this.node.current,"focus",()=>this.onFocus()),yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fV=(e,t)=>t?e===t?!0:fV(e,t.parentElement):!1;function m5(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,H2(r))}class bpe extends kh{constructor(){super(...arguments),this.removeStartListeners=rs,this.removeEndListeners=rs,this.removeAccessibleListeners=rs,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=Au(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();yn.update(()=>{!h&&!fV(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=Au(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=sh(a,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||m5("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&yn.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=yu(this.node.current,"keyup",o),m5("down",(l,c)=>{this.startPress(l,c)})},r=yu(this.node.current,"keydown",t),s=()=>{this.isPressing&&m5("cancel",(a,o)=>this.cancelPress(a,o))},i=yu(this.node.current,"blur",s);this.removeAccessibleListeners=sh(r,i)}}startPress(t,r){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&yn.update(()=>s(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!hV()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&yn.update(()=>s(t,r))}mount(){const t=this.node.getProps(),r=Au(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=yu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=sh(r,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const GA=new WeakMap,p5=new WeakMap,jpe=e=>{const t=GA.get(e.target);t&&t(e)},wpe=e=>{e.forEach(jpe)};function _pe({root:e,...t}){const r=e||document;p5.has(r)||p5.set(r,{});const s=p5.get(r),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(wpe,{root:e,...t})),s[i]}function Npe(e,t,r){const s=_pe(t);return GA.set(e,r),s.observe(e),()=>{GA.delete(e),s.unobserve(e)}}const Spe={some:0,all:1};class Ape extends kh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:i="some",once:a}=t,o={root:r?r.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Spe[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(c)};return Npe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Ppe(t,r))&&this.startObserver()}unmount(){}}function Ppe({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Cpe={inView:{Feature:Ape},tap:{Feature:bpe},focus:{Feature:ype},hover:{Feature:vpe}};function mV(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}function kpe(e){const t={};return e.values.forEach((r,s)=>t[s]=r.get()),t}function Epe(e){const t={};return e.values.forEach((r,s)=>t[s]=r.getVelocity()),t}function W2(e,t,r){const s=e.getProps();return bE(s,t,r!==void 0?r:s.custom,kpe(e),Epe(e))}let Tpe=rs,jE=rs;const ih=e=>e*1e3,Pu=e=>e/1e3,Ope={current:!1},pV=e=>Array.isArray(e)&&typeof e[0]=="number";function gV(e){return!!(!e||typeof e=="string"&&xV[e]||pV(e)||Array.isArray(e)&&e.every(gV))}const Cv=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,xV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cv([0,.65,.55,1]),circOut:Cv([.55,0,1,.45]),backIn:Cv([.31,.01,.66,-.59]),backOut:Cv([.33,1.53,.69,.99])};function vV(e){if(e)return pV(e)?Cv(e):Array.isArray(e)?e.map(vV):xV[e]}function Lpe(e,t,r,{delay:s=0,duration:i,repeat:a=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=vV(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function Mpe(e,{repeat:t,repeatType:r="loop"}){const s=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[s]}const yV=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Ipe=1e-7,Rpe=12;function Dpe(e,t,r,s,i){let a,o,l=0;do o=t+(r-t)/2,a=yV(o,s,i)-e,a>0?r=o:t=o;while(Math.abs(a)>Ipe&&++l<Rpe);return o}function B0(e,t,r,s){if(e===t&&r===s)return rs;const i=a=>Dpe(a,0,1,e,r);return a=>a===0||a===1?a:yV(i(a),t,s)}const $pe=B0(.42,0,1,1),Fpe=B0(0,0,.58,1),bV=B0(.42,0,.58,1),zpe=e=>Array.isArray(e)&&typeof e[0]!="number",jV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wV=e=>t=>1-e(1-t),wE=e=>1-Math.sin(Math.acos(e)),_V=wV(wE),Bpe=jV(wE),NV=B0(.33,1.53,.69,.99),_E=wV(NV),qpe=jV(_E),Vpe=e=>(e*=2)<1?.5*_E(e):.5*(2-Math.pow(2,-10*(e-1))),Upe={linear:rs,easeIn:$pe,easeInOut:bV,easeOut:Fpe,circIn:wE,circInOut:Bpe,circOut:_V,backIn:_E,backInOut:qpe,backOut:NV,anticipate:Vpe},xL=e=>{if(Array.isArray(e)){jE(e.length===4);const[t,r,s,i]=e;return B0(t,r,s,i)}else if(typeof e=="string")return Upe[e];return e},NE=(e,t)=>r=>!!(F0(r)&&Hme.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),SV=(e,t,r)=>s=>{if(!F0(s))return s;const[i,a,o,l]=s.match(U2);return{[e]:parseFloat(i),[t]:parseFloat(a),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Hpe=e=>mh(0,255,e),g5={...ym,transform:e=>Math.round(Hpe(e))},kf={test:NE("rgb","red"),parse:SV("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+g5.transform(e)+", "+g5.transform(t)+", "+g5.transform(r)+", "+Wv(Hv.transform(s))+")"};function Wpe(e){let t="",r="",s="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const KA={test:NE("#"),parse:Wpe,transform:kf.transform},Lp={test:NE("hsl","hue"),parse:SV("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+yc.transform(Wv(t))+", "+yc.transform(Wv(r))+", "+Wv(Hv.transform(s))+")"},Yi={test:e=>kf.test(e)||KA.test(e)||Lp.test(e),parse:e=>kf.test(e)?kf.parse(e):Lp.test(e)?Lp.parse(e):KA.parse(e),transform:e=>F0(e)?e:e.hasOwnProperty("red")?kf.transform(e):Lp.transform(e)},zn=(e,t,r)=>-r*e+r*t+e;function x5(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Gpe({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,t/=100,r/=100;let i=0,a=0,o=0;if(!t)i=a=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;i=x5(c,l,e+1/3),a=x5(c,l,e),o=x5(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}const v5=(e,t,r)=>{const s=e*e;return Math.sqrt(Math.max(0,r*(t*t-s)+s))},Kpe=[KA,kf,Lp],Zpe=e=>Kpe.find(t=>t.test(e));function vL(e){const t=Zpe(e);let r=t.parse(e);return t===Lp&&(r=Gpe(r)),r}const AV=(e,t)=>{const r=vL(e),s=vL(t),i={...r};return a=>(i.red=v5(r.red,s.red,a),i.green=v5(r.green,s.green,a),i.blue=v5(r.blue,s.blue,a),i.alpha=zn(r.alpha,s.alpha,a),kf.transform(i))};function Xpe(e){var t,r;return isNaN(e)&&F0(e)&&(((t=e.match(U2))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(J9))===null||r===void 0?void 0:r.length)||0)>0}const PV={regex:Vme,countKey:"Vars",token:"${v}",parse:rs},CV={regex:J9,countKey:"Colors",token:"${c}",parse:Yi.parse},kV={regex:U2,countKey:"Numbers",token:"${n}",parse:ym.parse};function y5(e,{regex:t,countKey:r,token:s,parse:i}){const a=e.tokenised.match(t);a&&(e["num"+r]=a.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...a.map(i)))}function Ij(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&y5(r,PV),y5(r,CV),y5(r,kV),r}function EV(e){return Ij(e).values}function TV(e){const{values:t,numColors:r,numVars:s,tokenised:i}=Ij(e),a=t.length;return o=>{let l=i;for(let c=0;c<a;c++)c<s?l=l.replace(PV.token,o[c]):c<s+r?l=l.replace(CV.token,Yi.transform(o[c])):l=l.replace(kV.token,Wv(o[c]));return l}}const Ype=e=>typeof e=="number"?0:e;function Jpe(e){const t=EV(e);return TV(e)(t.map(Ype))}const ph={test:Xpe,parse:EV,createTransformer:TV,getAnimatableNone:Jpe},OV=(e,t)=>r=>`${r>0?t:e}`;function LV(e,t){return typeof e=="number"?r=>zn(e,t,r):Yi.test(e)?AV(e,t):e.startsWith("var(")?OV(e,t):IV(e,t)}const MV=(e,t)=>{const r=[...e],s=r.length,i=e.map((a,o)=>LV(a,t[o]));return a=>{for(let o=0;o<s;o++)r[o]=i[o](a);return r}},Qpe=(e,t)=>{const r={...e,...t},s={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(s[i]=LV(e[i],t[i]));return i=>{for(const a in s)r[a]=s[a](i);return r}},IV=(e,t)=>{const r=ph.createTransformer(t),s=Ij(e),i=Ij(t);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?sh(MV(s.values,i.values),r):OV(e,t)},My=(e,t,r)=>{const s=t-e;return s===0?1:(r-e)/s},yL=(e,t)=>r=>zn(e,t,r);function ege(e){return typeof e=="number"?yL:typeof e=="string"?Yi.test(e)?AV:IV:Array.isArray(e)?MV:typeof e=="object"?Qpe:yL}function tge(e,t,r){const s=[],i=r||ege(e[0]),a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||rs:t;l=sh(c,l)}s.push(l)}return s}function RV(e,t,{clamp:r=!0,ease:s,mixer:i}={}){const a=e.length;if(jE(a===t.length),a===1)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=tge(t,s,i),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=My(e[d],e[d+1],u);return o[d](h)};return r?u=>c(mh(e[0],e[a-1],u)):c}function rge(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const i=My(0,t,s);e.push(zn(r,1,i))}}function nge(e){const t=[0];return rge(t,e.length-1),t}function sge(e,t){return e.map(r=>r*t)}function ige(e,t){return e.map(()=>t||bV).splice(0,e.length-1)}function Rj({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const i=zpe(s)?s.map(xL):xL(s),a={done:!1,value:t[0]},o=sge(r&&r.length===t.length?r:nge(t),e),l=RV(o,t,{ease:Array.isArray(i)?i:ige(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}function DV(e,t){return t?e*(1e3/t):0}const age=5;function $V(e,t,r){const s=Math.max(t-age,0);return DV(r-e(s),t-s)}const b5=.001,oge=.01,bL=10,lge=.05,cge=1;function uge({duration:e=800,bounce:t=.25,velocity:r=0,mass:s=1}){let i,a;Tpe(e<=ih(bL));let o=1-t;o=mh(lge,cge,o),e=mh(oge,bL,Pu(e)),o<1?(i=u=>{const d=u*o,h=d*e,m=d-r,p=ZA(u,o),v=Math.exp(-h);return b5-m/p*v},a=u=>{const h=u*o*e,m=h*r+r,p=Math.pow(o,2)*Math.pow(u,2)*e,v=Math.exp(-h),g=ZA(Math.pow(u,2),o);return(-i(u)+b5>0?-1:1)*((m-p)*v)/g}):(i=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-b5+d*h},a=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=hge(i,a,l);if(e=ih(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:e}}}const dge=12;function hge(e,t,r){let s=r;for(let i=1;i<dge;i++)s=s-e(s)/t(s);return s}function ZA(e,t){return e*Math.sqrt(1-t*t)}const fge=["duration","bounce"],mge=["stiffness","damping","mass"];function jL(e,t){return t.some(r=>e[r]!==void 0)}function pge(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!jL(e,mge)&&jL(e,fge)){const r=uge(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function FV({keyframes:e,restDelta:t,restSpeed:r,...s}){const i=e[0],a=e[e.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=pge({...s,velocity:-Pu(s.velocity||0)}),p=h||0,v=c/(2*Math.sqrt(l*u)),g=a-i,y=Pu(Math.sqrt(l/u)),j=Math.abs(g)<5;r||(r=j?.01:2),t||(t=j?.005:.5);let _;if(v<1){const w=ZA(y,v);_=A=>{const S=Math.exp(-v*y*A);return a-S*((p+v*y*g)/w*Math.sin(w*A)+g*Math.cos(w*A))}}else if(v===1)_=w=>a-Math.exp(-y*w)*(g+(p+y*g)*w);else{const w=y*Math.sqrt(v*v-1);_=A=>{const S=Math.exp(-v*y*A),P=Math.min(w*A,300);return a-S*((p+v*y*g)*Math.sinh(P)+w*g*Math.cosh(P))/w}}return{calculatedDuration:m&&d||null,next:w=>{const A=_(w);if(m)o.done=w>=d;else{let S=p;w!==0&&(v<1?S=$V(_,w,A):S=0);const P=Math.abs(S)<=r,C=Math.abs(a-A)<=t;o.done=P&&C}return o.value=o.done?a:A,o}}}function wL({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},p=T=>l!==void 0&&T<l||c!==void 0&&T>c,v=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let g=r*t;const y=h+g,j=o===void 0?y:o(y);j!==y&&(g=j-h);const _=T=>-g*Math.exp(-T/s),w=T=>j+_(T),A=T=>{const M=_(T),z=w(T);m.done=Math.abs(M)<=u,m.value=m.done?j:z};let S,P;const C=T=>{p(m.value)&&(S=T,P=FV({keyframes:[m.value,v(m.value)],velocity:$V(w,T,m.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:T=>{let M=!1;return!P&&S===void 0&&(M=!0,A(T),C(T)),S!==void 0&&T>S?P.next(T-S):(!M&&A(T),m)}}}const gge=e=>{const t=({timestamp:r})=>e(r);return{start:()=>yn.update(t,!0),stop:()=>Fu(t),now:()=>Ai.isProcessing?Ai.timestamp:performance.now()}},_L=2e4;function NL(e){let t=0;const r=50;let s=e.next(t);for(;!s.done&&t<_L;)t+=r,s=e.next(t);return t>=_L?1/0:t}const xge={decay:wL,inertia:wL,tween:Rj,keyframes:Rj,spring:FV};function Dj({autoplay:e=!0,delay:t=0,driver:r=gge,keyframes:s,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...m}){let p=1,v=!1,g,y;const j=()=>{y=new Promise(xe=>{g=xe})};j();let _;const w=xge[i]||Rj;let A;w!==Rj&&typeof s[0]!="number"&&(A=RV([0,100],s,{clamp:!1}),s=[0,100]);const S=w({...m,keyframes:s});let P;l==="mirror"&&(P=w({...m,keyframes:[...s].reverse(),velocity:-(m.velocity||0)}));let C="idle",T=null,M=null,z=null;S.calculatedDuration===null&&a&&(S.calculatedDuration=NL(S));const{calculatedDuration:O}=S;let I=1/0,q=1/0;O!==null&&(I=O+o,q=I*(a+1)-o);let F=0;const W=xe=>{if(M===null)return;p>0&&(M=Math.min(M,xe)),p<0&&(M=Math.min(xe-q/p,M)),T!==null?F=T:F=Math.round(xe-M)*p;const B=F-t*(p>=0?1:-1),X=p>=0?B<0:B>q;F=Math.max(B,0),C==="finished"&&T===null&&(F=q);let ie=F,me=S;if(a){const Q=Math.min(F,q)/I;let J=Math.floor(Q),se=Q%1;!se&&Q>=1&&(se=1),se===1&&J--,J=Math.min(J,a+1),!!(J%2)&&(l==="reverse"?(se=1-se,o&&(se-=o/I)):l==="mirror"&&(me=P)),ie=mh(0,1,se)*I}const ye=X?{done:!1,value:s[0]}:me.next(ie);A&&(ye.value=A(ye.value));let{done:Ne}=ye;!X&&O!==null&&(Ne=p>=0?F>=q:F<=0);const le=T===null&&(C==="finished"||C==="running"&&Ne);return h&&h(ye.value),le&&G(),ye},V=()=>{_&&_.stop(),_=void 0},ne=()=>{C="idle",V(),g(),j(),M=z=null},G=()=>{C="finished",d&&d(),V(),g()},K=()=>{if(v)return;_||(_=r(W));const xe=_.now();c&&c(),T!==null?M=xe-T:(!M||C==="finished")&&(M=xe),C==="finished"&&j(),z=M,T=null,C="running",_.start()};e&&K();const ee={then(xe,B){return y.then(xe,B)},get time(){return Pu(F)},set time(xe){xe=ih(xe),F=xe,T!==null||!_||p===0?T=xe:M=_.now()-xe/p},get duration(){const xe=S.calculatedDuration===null?NL(S):S.calculatedDuration;return Pu(xe)},get speed(){return p},set speed(xe){xe===p||!_||(p=xe,ee.time=Pu(F))},get state(){return C},play:K,pause:()=>{C="paused",T=F},stop:()=>{v=!0,C!=="idle"&&(C="idle",u&&u(),ne())},cancel:()=>{z!==null&&W(z),ne()},complete:()=>{C="finished"},sample:xe=>(M=0,W(xe))};return ee}function vge(e){let t;return()=>(t===void 0&&(t=e()),t)}const yge=vge(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bge=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hb=10,jge=2e4,wge=(e,t)=>t.type==="spring"||e==="backgroundColor"||!gV(t.ease);function _ge(e,t,{onUpdate:r,onComplete:s,...i}){if(!(yge()&&bge.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:h,duration:m=300,ease:p,times:v}=i;if(wge(t,i)){const w=Dj({...i,repeat:0,delay:0});let A={done:!1,value:h[0]};const S=[];let P=0;for(;!A.done&&P<jge;)A=w.sample(P),S.push(A.value),P+=Hb;v=void 0,h=S,m=P-Hb,p="linear"}const g=Lpe(e.owner.current,t,h,{...i,duration:m,ease:p,times:v}),y=()=>{u=!1,g.cancel()},j=()=>{u=!0,yn.update(y),l(),d()};return g.onfinish=()=>{u||(e.set(Mpe(h,i)),s&&s(),j())},{then(w,A){return c.then(w,A)},attachTimeline(w){return g.timeline=w,g.onfinish=null,rs},get time(){return Pu(g.currentTime||0)},set time(w){g.currentTime=ih(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return Pu(m)},play:()=>{o||(g.play(),Fu(y))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const A=Dj({...i,autoplay:!1});e.setWithVelocity(A.sample(w-Hb).value,A.sample(w).value,Hb)}j()},complete:()=>{u||g.finish()},cancel:j}}function Nge({keyframes:e,delay:t,onUpdate:r,onComplete:s}){const i=()=>(r&&r(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:rs,pause:rs,stop:rs,then:a=>(a(),Promise.resolve()),cancel:rs,complete:rs});return t?Dj({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const Sge={type:"spring",stiffness:500,damping:25,restSpeed:10},Age=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Pge={type:"keyframes",duration:.8},Cge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kge=(e,{keyframes:t})=>t.length>2?Pge:vm.has(e)?e.startsWith("scale")?Age(t[1]):Sge:Cge,XA=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ph.test(t)||t==="0")&&!t.startsWith("url(")),Ege=new Set(["brightness","contrast","saturate","opacity"]);function Tge(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=r.match(U2)||[];if(!s)return e;const i=r.replace(s,"");let a=Ege.has(t)?1:0;return s!==r&&(a*=100),t+"("+a+i+")"}const Oge=/([a-z-]*)\(.*?\)/g,YA={...ph,getAnimatableNone:e=>{const t=e.match(Oge);return t?t.map(Tge).join(" "):e}},Lge={...Q9,color:Yi,backgroundColor:Yi,outlineColor:Yi,fill:Yi,stroke:Yi,borderColor:Yi,borderTopColor:Yi,borderRightColor:Yi,borderBottomColor:Yi,borderLeftColor:Yi,filter:YA,WebkitFilter:YA},SE=e=>Lge[e];function zV(e,t){let r=SE(e);return r!==YA&&(r=ph),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const BV=e=>/^0[^.\s]+$/.test(e);function Mge(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||BV(e)}function Ige(e,t,r,s){const i=XA(t,r);let a;Array.isArray(r)?a=[...r]:a=[null,r];const o=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<a.length;u++)a[u]===null&&(a[u]=u===0?o:a[u-1]),Mge(a[u])&&c.push(u),typeof a[u]=="string"&&a[u]!=="none"&&a[u]!=="0"&&(l=a[u]);if(i&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];a[d]=zV(t,l)}return a}function Rge({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function AE(e,t){return e[t]||e.default||e}const Dge={skipAnimations:!1},PE=(e,t,r,s={})=>i=>{const a=AE(s,e)||{},o=a.delay||s.delay||0;let{elapsed:l=0}=s;l=l-ih(o);const c=Ige(t,e,r,a),u=c[0],d=c[c.length-1],h=XA(e,u),m=XA(e,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:v=>{t.set(v),a.onUpdate&&a.onUpdate(v)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(Rge(a)||(p={...p,...kge(e,p)}),p.duration&&(p.duration=ih(p.duration)),p.repeatDelay&&(p.repeatDelay=ih(p.repeatDelay)),!h||!m||Ope.current||a.type===!1||Dge.skipAnimations)return Nge(p);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const v=_ge(t,e,p);if(v)return v}return Dj(p)};function $j(e){return!!(Oa(e)&&e.add)}const qV=e=>/^\-?\d*\.?\d+$/.test(e);function CE(e,t){e.indexOf(t)===-1&&e.push(t)}function kE(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class EE{constructor(){this.subscriptions=[]}add(t){return CE(this.subscriptions,t),()=>kE(this.subscriptions,t)}notify(t,r,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $ge=e=>!isNaN(parseFloat(e));class Fge{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,i=!0)=>{this.prev=this.current,this.current=s;const{delta:a,timestamp:o}=Ai;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,yn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>yn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=$ge(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new EE);const s=this.events[t].add(r);return t==="change"?()=>{s(),yn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,s){this.set(r),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?DV(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sg(e,t){return new Fge(e,t)}const VV=e=>t=>t.test(e),zge={test:e=>e==="auto",parse:e=>e},UV=[ym,Yt,yc,Ld,Gme,Wme,zge],sv=e=>UV.find(VV(e)),Bge=[...UV,Yi,ph],qge=e=>Bge.find(VV(e));function Vge(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Sg(r))}function Uge(e,t){const r=W2(e,t);let{transitionEnd:s={},transition:i={},...a}=r?e.makeTargetAnimatable(r,!1):{};a={...a,...s};for(const o in a){const l=ope(a[o]);Vge(e,o,l)}}function Hge(e,t,r){var s,i;const a=Object.keys(t).filter(l=>!e.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const c=a[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(i=(s=r[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&i!==void 0?i:t[c]),d!=null&&(typeof d=="string"&&(qV(d)||BV(d))?d=parseFloat(d):!qge(d)&&ph.test(u)&&(d=zV(c,u)),e.addValue(c,Sg(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function Wge(e,t){return t?(t[e]||t.default||t).from:void 0}function Gge(e,t,r){const s={};for(const i in e){const a=Wge(i,t);if(a!==void 0)s[i]=a;else{const o=r.getValue(i);o&&(s[i]=o.get())}}return s}function Kge({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function Zge(e,t){const r=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==r)return!0}else return r!==t}function HV(e,t,{delay:r=0,transitionOverride:s,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(a=s);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const m=e.getValue(h),p=l[h];if(!m||p===void 0||d&&Kge(d,h))continue;const v={delay:r,elapsed:0,...AE(a||{},h)};if(window.HandoffAppearAnimations){const j=e.getProps()[W9];if(j){const _=window.HandoffAppearAnimations(j,h,m,yn);_!==null&&(v.elapsed=_,v.isHandoff=!0)}}let g=!v.isHandoff&&!Zge(m,p);if(v.type==="spring"&&(m.getVelocity()||v.velocity)&&(g=!1),m.animation&&(g=!1),g)continue;m.start(PE(h,m,p,e.shouldReduceMotion&&vm.has(h)?{type:!1}:v));const y=m.animation;$j(c)&&(c.add(h),y.then(()=>c.remove(h))),u.push(y)}return o&&Promise.all(u).then(()=>{o&&Uge(e,o)}),u}function JA(e,t,r={}){const s=W2(e,t,r.custom);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const a=s?()=>Promise.all(HV(e,s,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return Xge(e,t,u+c,d,h,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(r.delay)])}function Xge(e,t,r=0,s=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*s,c=i===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(Yge).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(JA(u,t,{...a,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Yge(e,t){return e.sortNodePosition(t)}function Jge(e,t,r={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>JA(e,a,r));s=Promise.all(i)}else if(typeof t=="string")s=JA(e,t,r);else{const i=typeof t=="function"?W2(e,t,r.custom):t;s=Promise.all(HV(e,i,r))}return s.then(()=>e.notify("AnimationComplete",t))}const Qge=[...dE].reverse(),exe=dE.length;function txe(e){return t=>Promise.all(t.map(({animation:r,options:s})=>Jge(e,r,s)))}function rxe(e){let t=txe(e);const r=sxe();let s=!0;const i=(c,u)=>{const d=W2(e,u);if(d){const{transition:h,transitionEnd:m,...p}=d;c={...c,...p,...m}}return c};function a(c){t=c(e)}function o(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},m=[],p=new Set;let v={},g=1/0;for(let j=0;j<exe;j++){const _=Qge[j],w=r[_],A=d[_]!==void 0?d[_]:h[_],S=Oy(A),P=_===u?w.isActive:null;P===!1&&(g=j);let C=A===h[_]&&A!==d[_]&&S;if(C&&s&&e.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...v},!w.isActive&&P===null||!A&&!w.prevProp||q2(A)||typeof A=="boolean")continue;let M=nxe(w.prevProp,A)||_===u&&w.isActive&&!C&&S||j>g&&S,z=!1;const O=Array.isArray(A)?A:[A];let I=O.reduce(i,{});P===!1&&(I={});const{prevResolvedValues:q={}}=w,F={...q,...I},W=V=>{M=!0,p.has(V)&&(z=!0,p.delete(V)),w.needsAnimating[V]=!0};for(const V in F){const ne=I[V],G=q[V];if(v.hasOwnProperty(V))continue;let K=!1;Mj(ne)&&Mj(G)?K=!mV(ne,G):K=ne!==G,K?ne!==void 0?W(V):p.add(V):ne!==void 0&&p.has(V)?W(V):w.protectedKeys[V]=!0}w.prevProp=A,w.prevResolvedValues=I,w.isActive&&(v={...v,...I}),s&&e.blockInitialAnimation&&(M=!1),M&&(!C||z)&&m.push(...O.map(V=>({animation:V,options:{type:_,...c}})))}if(p.size){const j={};p.forEach(_=>{const w=e.getBaseTarget(_);w!==void 0&&(j[_]=w)}),m.push({animation:j})}let y=!!m.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(m):Promise.resolve()}function l(c,u,d){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(p=>{var v;return(v=p.animationState)===null||v===void 0?void 0:v.setActive(c,u)}),r[c].isActive=u;const m=o(d,c);for(const p in r)r[p].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>r}}function nxe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!mV(t,e):!1}function of(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sxe(){return{animate:of(!0),whileInView:of(),whileHover:of(),whileTap:of(),whileDrag:of(),whileFocus:of(),exit:of()}}class ixe extends kh{constructor(t){super(t),t.animationState||(t.animationState=rxe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),q2(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let axe=0;class oxe extends kh{constructor(){super(...arguments),this.id=axe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const lxe={animation:{Feature:ixe},exit:{Feature:oxe}},SL=(e,t)=>Math.abs(e-t);function cxe(e,t){const r=SL(e.x,t.x),s=SL(e.y,t.y);return Math.sqrt(r**2+s**2)}class WV{constructor(t,r,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=w5(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=cxe(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:v}=h,{timestamp:g}=Ai;this.history.push({...v,timestamp:g});const{onStart:y,onMove:j}=this.handlers;m||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=j5(m,this.transformPagePoint),yn.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=w5(h.type==="pointercancel"?this.lastMoveEventInfo:j5(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,y),v&&v(h,y)},!cV(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=s,this.contextWindow=i||window;const o=H2(t),l=j5(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ai;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,w5(l,this.history)),this.removeListeners=sh(Au(this.contextWindow,"pointermove",this.handlePointerMove),Au(this.contextWindow,"pointerup",this.handlePointerUp),Au(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Fu(this.updatePoint)}}function j5(e,t){return t?{point:t(e.point)}:e}function AL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function w5({point:e},t){return{point:e,delta:AL(e,GV(t)),offset:AL(e,uxe(t)),velocity:dxe(t,.1)}}function uxe(e){return e[0]}function GV(e){return e[e.length-1]}function dxe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const i=GV(e);for(;r>=0&&(s=e[r],!(i.timestamp-s.timestamp>ih(t)));)r--;if(!s)return{x:0,y:0};const a=Pu(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function lo(e){return e.max-e.min}function QA(e,t=0,r=.01){return Math.abs(e-t)<=r}function PL(e,t,r,s=.5){e.origin=s,e.originPoint=zn(t.min,t.max,e.origin),e.scale=lo(r)/lo(t),(QA(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=zn(r.min,r.max,e.origin)-e.originPoint,(QA(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Gv(e,t,r,s){PL(e.x,t.x,r.x,s?s.originX:void 0),PL(e.y,t.y,r.y,s?s.originY:void 0)}function CL(e,t,r){e.min=r.min+t.min,e.max=e.min+lo(t)}function hxe(e,t,r){CL(e.x,t.x,r.x),CL(e.y,t.y,r.y)}function kL(e,t,r){e.min=t.min-r.min,e.max=e.min+lo(t)}function Kv(e,t,r){kL(e.x,t.x,r.x),kL(e.y,t.y,r.y)}function fxe(e,{min:t,max:r},s){return t!==void 0&&e<t?e=s?zn(t,e,s.min):Math.max(e,t):r!==void 0&&e>r&&(e=s?zn(r,e,s.max):Math.min(e,r)),e}function EL(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function mxe(e,{top:t,left:r,bottom:s,right:i}){return{x:EL(e.x,r,i),y:EL(e.y,t,s)}}function TL(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function pxe(e,t){return{x:TL(e.x,t.x),y:TL(e.y,t.y)}}function gxe(e,t){let r=.5;const s=lo(e),i=lo(t);return i>s?r=My(t.min,t.max-s,e.min):s>i&&(r=My(e.min,e.max-i,t.min)),mh(0,1,r)}function xxe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const eP=.35;function vxe(e=eP){return e===!1?e=0:e===!0&&(e=eP),{x:OL(e,"left","right"),y:OL(e,"top","bottom")}}function OL(e,t,r){return{min:LL(e,t),max:LL(e,r)}}function LL(e,t){return typeof e=="number"?e:e[t]||0}const ML=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mp=()=>({x:ML(),y:ML()}),IL=()=>({min:0,max:0}),xs=()=>({x:IL(),y:IL()});function Lo(e){return[e("x"),e("y")]}function KV({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function yxe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function bxe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function _5(e){return e===void 0||e===1}function tP({scale:e,scaleX:t,scaleY:r}){return!_5(e)||!_5(t)||!_5(r)}function mf(e){return tP(e)||ZV(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ZV(e){return RL(e.x)||RL(e.y)}function RL(e){return e&&e!=="0%"}function Fj(e,t,r){const s=e-r,i=t*s;return r+i}function DL(e,t,r,s,i){return i!==void 0&&(e=Fj(e,i,s)),Fj(e,r,s)+t}function rP(e,t=0,r=1,s,i){e.min=DL(e.min,t,r,s,i),e.max=DL(e.max,t,r,s,i)}function XV(e,{x:t,y:r}){rP(e.x,t.translate,t.scale,t.originPoint),rP(e.y,r.translate,r.scale,r.originPoint)}function jxe(e,t,r,s=!1){const i=r.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=r[l],o=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ip(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,XV(e,o)),s&&mf(a.latestValues)&&Ip(e,a.latestValues))}t.x=$L(t.x),t.y=$L(t.y)}function $L(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Dd(e,t){e.min=e.min+t,e.max=e.max+t}function FL(e,t,[r,s,i]){const a=t[i]!==void 0?t[i]:.5,o=zn(e.min,e.max,a);rP(e,t[r],t[s],o,t.scale)}const wxe=["x","scaleX","originX"],_xe=["y","scaleY","originY"];function Ip(e,t){FL(e.x,t,wxe),FL(e.y,t,_xe)}function YV(e,t){return KV(bxe(e.getBoundingClientRect(),t))}function Nxe(e,t,r){const s=YV(e,r),{scroll:i}=t;return i&&(Dd(s.x,i.offset.x),Dd(s.y,i.offset.y)),s}const JV=({current:e})=>e?e.ownerDocument.defaultView:null,Sxe=new WeakMap;class Axe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xs(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(H2(d,"page").point)},a=(d,h)=>{const{drag:m,dragPropagation:p,onDragStart:v}=this.getProps();if(m&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dV(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lo(y=>{let j=this.getAxisMotionValue(y).get()||0;if(yc.test(j)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[y];w&&(j=lo(w)*(parseFloat(j)/100))}}this.originPoint[y]=j}),v&&yn.update(()=>v(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:v,onDrag:g}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:y}=h;if(p&&this.currentDirection===null){this.currentDirection=Pxe(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Lo(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new WV(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:JV(this.visualElement)})}stop(t,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&yn.update(()=>a(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,s){const{drag:i}=this.getProps();if(!s||!Wb(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=fxe(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;r&&Op(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=mxe(i.layoutBox,r):this.constraints=!1,this.elastic=vxe(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Lo(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=xxe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Op(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Nxe(s,i.root,this.visualElement.getTransformPagePoint());let o=pxe(i.layout.layoutBox,a);if(r){const l=r(yxe(o));this.hasMutatedConstraints=!!l,l&&(o=KV(l))}return o}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Lo(d=>{if(!Wb(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,v={type:"inertia",velocity:s?t[d]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return s.start(PE(t,s,0,r))}stopAnimation(){Lo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Lo(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),i=s[r];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Lo(r=>{const{drag:s}=this.getProps();if(!Wb(r,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[r];a.set(t[r]-zn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Op(r)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Lo(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();i[o]=gxe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Lo(o=>{if(!Wb(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(zn(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Sxe.set(this.visualElement,this);const t=this.visualElement.current,r=Au(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Op(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),s();const o=yu(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Lo(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=eP,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Wb(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Pxe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Cxe extends kh{constructor(t){super(t),this.removeGroupControls=rs,this.removeListeners=rs,this.controls=new Axe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const zL=e=>(t,r)=>{e&&yn.update(()=>e(t,r))};class kxe extends kh{constructor(){super(...arguments),this.removePointerDownListener=rs}onPointerDown(t){this.session=new WV(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JV(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:zL(t),onStart:zL(r),onMove:s,onEnd:(a,o)=>{delete this.session,i&&yn.update(()=>i(a,o))}}}mount(){this.removePointerDownListener=Au(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Exe(){const e=x.useContext(z2);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,i=x.useId();return x.useEffect(()=>s(i),[]),!t&&r?[!1,()=>r&&r(i)]:[!0]}const I1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function BL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const iv={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Yt.test(e))e=parseFloat(e);else return e;const r=BL(e,t.target.x),s=BL(e,t.target.y);return`${r}% ${s}%`}},Txe={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,i=ph.parse(e);if(i.length>5)return s;const a=ph.createTransformer(e),o=typeof i[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const u=zn(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}};class Oxe extends we.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;Fme(Lxe),a&&(r.group&&r.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),I1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:i,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||yn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function QV(e){const[t,r]=Exe(),s=x.useContext(fE);return we.createElement(Oxe,{...e,layoutGroup:s,switchLayoutGroup:x.useContext(K9),isPresent:t,safeToRemove:r})}const Lxe={borderRadius:{...iv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:iv,borderTopRightRadius:iv,borderBottomLeftRadius:iv,borderBottomRightRadius:iv,boxShadow:Txe},eU=["TopLeft","TopRight","BottomLeft","BottomRight"],Mxe=eU.length,qL=e=>typeof e=="string"?parseFloat(e):e,VL=e=>typeof e=="number"||Yt.test(e);function Ixe(e,t,r,s,i,a){i?(e.opacity=zn(0,r.opacity!==void 0?r.opacity:1,Rxe(s)),e.opacityExit=zn(t.opacity!==void 0?t.opacity:1,0,Dxe(s))):a&&(e.opacity=zn(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let o=0;o<Mxe;o++){const l=`border${eU[o]}Radius`;let c=UL(t,l),u=UL(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||VL(c)===VL(u)?(e[l]=Math.max(zn(qL(c),qL(u),s),0),(yc.test(u)||yc.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=zn(t.rotate||0,r.rotate||0,s))}function UL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Rxe=tU(0,.5,_V),Dxe=tU(.5,.95,rs);function tU(e,t,r){return s=>s<e?0:s>t?1:r(My(e,t,s))}function HL(e,t){e.min=t.min,e.max=t.max}function ko(e,t){HL(e.x,t.x),HL(e.y,t.y)}function WL(e,t,r,s,i){return e-=t,e=Fj(e,1/r,s),i!==void 0&&(e=Fj(e,1/i,s)),e}function $xe(e,t=0,r=1,s=.5,i,a=e,o=e){if(yc.test(t)&&(t=parseFloat(t),t=zn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=zn(a.min,a.max,s);e===a&&(l-=t),e.min=WL(e.min,t,r,l,i),e.max=WL(e.max,t,r,l,i)}function GL(e,t,[r,s,i],a,o){$xe(e,t[r],t[s],t[i],t.scale,a,o)}const Fxe=["x","scaleX","originX"],zxe=["y","scaleY","originY"];function KL(e,t,r,s){GL(e.x,t,Fxe,r?r.x:void 0,s?s.x:void 0),GL(e.y,t,zxe,r?r.y:void 0,s?s.y:void 0)}function ZL(e){return e.translate===0&&e.scale===1}function rU(e){return ZL(e.x)&&ZL(e.y)}function Bxe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function nU(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function XL(e){return lo(e.x)/lo(e.y)}class qxe{constructor(){this.members=[]}add(t){CE(this.members,t),t.scheduleRender()}remove(t){if(kE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let s;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YL(e,t,r){let s="";const i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(s=`translate3d(${i}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const Vxe=(e,t)=>e.depth-t.depth;class Uxe{constructor(){this.children=[],this.isDirty=!1}add(t){CE(this.children,t),this.isDirty=!0}remove(t){kE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Vxe),this.isDirty=!1,this.children.forEach(t)}}function Hxe(e,t){const r=performance.now(),s=({timestamp:i})=>{const a=i-r;a>=t&&(Fu(s),e(a-t))};return yn.read(s,!0),()=>Fu(s)}function Wxe(e){window.MotionDebug&&window.MotionDebug.record(e)}function Gxe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Kxe(e,t,r){const s=Oa(e)?e:Sg(e);return s.start(PE("",s,t,r)),s.animation}const JL=["","X","Y","Z"],Zxe={visibility:"hidden"},QL=1e3;let Xxe=0;const pf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function sU({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Xxe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pf.totalNodes=pf.resolvedTargetDeltas=pf.recalculatedProjection=0,this.nodes.forEach(Qxe),this.nodes.forEach(sve),this.nodes.forEach(ive),this.nodes.forEach(eve),Wxe(pf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Uxe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new EE),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Gxe(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Hxe(m,250),I1.hasAnimatedSinceResize&&(I1.hasAnimatedSinceResize=!1,this.nodes.forEach(tM))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||uve,{onLayoutAnimationStart:y,onLayoutAnimationComplete:j}=d.getProps(),_=!this.targetLayout||!nU(this.targetLayout,v)||p,w=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const A={...AE(g,"layout"),onPlay:y,onComplete:j};(d.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else m||tM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Fu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ave),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eM);return}this.isUpdating||this.nodes.forEach(rve),this.isUpdating=!1,this.nodes.forEach(nve),this.nodes.forEach(Yxe),this.nodes.forEach(Jxe),this.clearAllSnapshots();const l=performance.now();Ai.delta=mh(0,1e3/60,l-Ai.timestamp),Ai.timestamp=l,Ai.isProcessing=!0,f5.update.process(Ai),f5.preRender.process(Ai),f5.render.process(Ai),Ai.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(tve),this.sharedNodes.forEach(ove)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!rU(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||mf(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),dve(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return xs();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Dd(l.x,c.offset.x),Dd(l.y,c.offset.y)),l}removeElementScroll(o){const l=xs();ko(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){ko(l,o);const{scroll:m}=this.root;m&&(Dd(l.x,-m.offset.x),Dd(l.y,-m.offset.y))}Dd(l.x,d.offset.x),Dd(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=xs();ko(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ip(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),mf(d.latestValues)&&Ip(c,d.latestValues)}return mf(this.latestValues)&&Ip(c,this.latestValues),c}removeTransform(o){const l=xs();ko(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!mf(u.latestValues))continue;tP(u.latestValues)&&u.updateSnapshot();const d=xs(),h=u.measurePageBox();ko(d,h),KL(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return mf(this.latestValues)&&KL(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ai.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ai.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xs(),this.relativeTargetOrigin=xs(),Kv(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ko(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xs(),this.targetWithTransforms=xs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hxe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ko(this.target,this.layout.layoutBox),XV(this.target,this.targetDelta)):ko(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xs(),this.relativeTargetOrigin=xs(),Kv(this.relativeTargetOrigin,this.target,p.target),ko(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||tP(this.parent.latestValues)||ZV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ai.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ko(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;jxe(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:v}=l;if(!v){this.projectionTransform&&(this.projectionDelta=Mp(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Mp(),this.projectionDeltaWithTransform=Mp());const g=this.projectionTransform;Gv(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=YL(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==m||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),pf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Mp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=xs(),p=c?c.source:void 0,v=this.layout?this.layout.source:void 0,g=p!==v,y=this.getStack(),j=!y||y.members.length<=1,_=!!(g&&!j&&this.options.crossfade===!0&&!this.path.some(cve));this.animationProgress=0;let w;this.mixTargetDelta=A=>{const S=A/1e3;rM(h.x,o.x,S),rM(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kv(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lve(this.relativeTarget,this.relativeTargetOrigin,m,S),w&&Bxe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=xs()),ko(w,this.relativeTarget)),g&&(this.animationValues=d,Ixe(d,u,this.latestValues,S,_,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Fu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yn.update(()=>{I1.hasAnimatedSinceResize=!0,this.currentAnimation=Kxe(0,QL,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&iU(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||xs();const h=lo(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const m=lo(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}ko(l,c),Ip(l,d),Gv(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qxe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<JL.length;d++){const h="rotate"+JL[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Zxe;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=M1(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=M1(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!mf(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=YL(this.projectionDeltaWithTransform,this.treeScale,m),d&&(u.transform=d(m,u.transform));const{x:p,y:v}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in Oj){if(m[g]===void 0)continue;const{correct:y,applyTo:j}=Oj[g],_=u.transform==="none"?m[g]:y(m[g],h);if(j){const w=j.length;for(let A=0;A<w;A++)u[j[A]]=_}else u[g]=_}return this.options.layoutId&&(u.pointerEvents=h===this?M1(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(eM),this.root.sharedNodes.clear()}}}function Yxe(e){e.updateLayout()}function Jxe(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:a}=e.options,o=r.source!==e.layout.source;a==="size"?Lo(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],p=lo(m);m.min=s[h].min,m.max=m.min+p}):iU(a,r.layoutBox,s)&&Lo(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],p=lo(s[h]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=Mp();Gv(l,s,r.layoutBox);const c=Mp();o?Gv(c,e.applyTransform(i,!0),r.measuredBox):Gv(c,s,r.layoutBox);const u=!rU(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const v=xs();Kv(v,r.layoutBox,m.layoutBox);const g=xs();Kv(g,s,p.layoutBox),nU(v,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Qxe(e){pf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eve(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tve(e){e.clearSnapshot()}function eM(e){e.clearMeasurements()}function rve(e){e.isLayoutDirty=!1}function nve(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function tM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function sve(e){e.resolveTargetDelta()}function ive(e){e.calcProjection()}function ave(e){e.resetRotation()}function ove(e){e.removeLeadSnapshot()}function rM(e,t,r){e.translate=zn(t.translate,0,r),e.scale=zn(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nM(e,t,r,s){e.min=zn(t.min,r.min,s),e.max=zn(t.max,r.max,s)}function lve(e,t,r,s){nM(e.x,t.x,r.x,s),nM(e.y,t.y,r.y,s)}function cve(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uve={duration:.45,ease:[.4,0,.1,1]},sM=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),iM=sM("applewebkit/")&&!sM("chrome/")?Math.round:rs;function aM(e){e.min=iM(e.min),e.max=iM(e.max)}function dve(e){aM(e.x),aM(e.y)}function iU(e,t,r){return e==="position"||e==="preserve-aspect"&&!QA(XL(t),XL(r),.2)}const hve=sU({attachResizeListener:(e,t)=>yu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),N5={current:void 0},aU=sU({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!N5.current){const e=new hve({});e.mount(window),e.setOptions({layoutScroll:!0}),N5.current=e}return N5.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fve={pan:{Feature:kxe},drag:{Feature:Cxe,ProjectionNode:aU,MeasureLayout:QV}},mve=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pve(e){const t=mve.exec(e);if(!t)return[,];const[,r,s]=t;return[r,s]}function nP(e,t,r=1){const[s,i]=pve(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const o=a.trim();return qV(o)?parseFloat(o):o}else return WA(i)?nP(i,t,r+1):i}function gve(e,{...t},r){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(i=>{const a=i.get();if(!WA(a))return;const o=nP(a,s);o&&i.set(o)});for(const i in t){const a=t[i];if(!WA(a))continue;const o=nP(a,s);o&&(t[i]=o,r||(r={}),r[i]===void 0&&(r[i]=a))}return{target:t,transitionEnd:r}}const xve=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),oU=e=>xve.has(e),vve=e=>Object.keys(e).some(oU),oM=e=>e===ym||e===Yt,lM=(e,t)=>parseFloat(e.split(", ")[t]),cM=(e,t)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return lM(i[1],t);{const a=s.match(/^matrix\((.+)\)$/);return a?lM(a[1],e):0}},yve=new Set(["x","y","z"]),bve=$0.filter(e=>!yve.has(e));function jve(e){const t=[];return bve.forEach(r=>{const s=e.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ag={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:cM(4,13),y:cM(5,14)};Ag.translateX=Ag.x;Ag.translateY=Ag.y;const wve=(e,t,r)=>{const s=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),{display:o}=a,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=Ag[u](s,a)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=Ag[u](c,a)}),e},_ve=(e,t,r={},s={})=>{t={...t},s={...s};const i=Object.keys(t).filter(oU);let a=[],o=!1;const l=[];if(i.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],h=sv(d);const m=t[c];let p;if(Mj(m)){const v=m.length,g=m[0]===null?1:0;d=m[g],h=sv(d);for(let y=g;y<v&&m[y]!==null;y++)p?jE(sv(m[y])===p):p=sv(m[y])}else p=sv(m);if(h!==p)if(oM(h)&&oM(p)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&p===Yt&&(t[c]=m.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(d===0||m===0)?d===0?u.set(p.transform(d)):t[c]=h.transform(m):(o||(a=jve(e),o=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(m))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=wve(t,e,l);return a.length&&a.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),B2&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function Nve(e,t,r,s){return vve(t)?_ve(e,t,r,s):{target:t,transitionEnd:s}}const Sve=(e,t,r,s)=>{const i=gve(e,t,s);return t=i.target,s=i.transitionEnd,Nve(e,t,r,s)},sP={current:null},lU={current:!1};function Ave(){if(lU.current=!0,!!B2)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sP.current=e.matches;e.addListener(t),t()}else sP.current=!1}function Pve(e,t,r){const{willChange:s}=t;for(const i in t){const a=t[i],o=r[i];if(Oa(a))e.addValue(i,a),$j(s)&&s.add(i);else if(Oa(o))e.addValue(i,Sg(a,{owner:e})),$j(s)&&s.remove(i);else if(o!==a)if(e.hasValue(i)){const l=e.getValue(i);!l.hasAnimated&&l.set(a)}else{const l=e.getStaticValue(i);e.addValue(i,Sg(l!==void 0?l:a,{owner:e}))}}for(const i in r)t[i]===void 0&&e.removeValue(i);return t}const uM=new WeakMap,cU=Object.keys(Ly),Cve=cU.length,dM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kve=hE.length;class Eve{constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>yn.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=V2(r),this.isVariantNode=G9(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const h in d){const m=d[h];l[h]!==void 0&&Oa(m)&&(m.set(l[h],!1),$j(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,uM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),lU.current||Ave(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sP.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uM.delete(this.current),this.projection&&this.projection.unmount(),Fu(this.notifyUpdate),Fu(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const s=vm.has(t),i=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&yn.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},s,i,a){let o,l;for(let c=0;c<Cve;c++){const u=cU[c],{isEnabled:d,Feature:h,ProjectionNode:m,MeasureLayout:p}=Ly[u];m&&(o=m),d(r)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:m,layoutRoot:p}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Op(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:a,layoutScroll:m,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<dM.length;s++){const i=dM[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a=t["on"+i];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Pve(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const r={};for(let s=0;s<kve;s++){const i=hE[s],a=this.props[i];(Oy(a)||a===!1)&&(r[i]=a)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=Sg(r,{owner:this}),this.addValue(t,s)),s}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:s}=this.props,i=typeof s=="string"||typeof s=="object"?(r=bE(this.props,s))===null||r===void 0?void 0:r[t]:void 0;if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Oa(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new EE),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class uU extends Eve{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...s},{transformValues:i},a){let o=Gge(s,t||{},this);if(i&&(r&&(r=i(r)),s&&(s=i(s)),o&&(o=i(o))),a){Hge(this,s,o);const l=Sve(this,s,o,r);r=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:r,...s}}}function Tve(e){return window.getComputedStyle(e)}class Ove extends uU{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(vm.has(r)){const s=SE(r);return s&&s.default||0}else{const s=Tve(t),i=(Y9(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return YV(t,r)}build(t,r,s,i){pE(t,r,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,r){return yE(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Oa(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,s,i){nV(t,r,s,i)}}class Lve extends uU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(vm.has(r)){const s=SE(r);return s&&s.default||0}return r=sV.has(r)?r:uE(r),t.getAttribute(r)}measureInstanceViewportBox(){return xs()}scrapeMotionValuesFromProps(t,r){return aV(t,r)}build(t,r,s,i){xE(t,r,s,this.isSVGTag,i.transformTemplate)}renderInstance(t,r,s,i){iV(t,r,s,i)}mount(t){this.isSVGTag=vE(t.tagName),super.mount(t)}}const Mve=(e,t)=>mE(e)?new Lve(t,{enableHardwareAcceleration:!1}):new Ove(t,{enableHardwareAcceleration:!0}),Ive={layout:{ProjectionNode:aU,MeasureLayout:QV}},Rve={...lxe,...Cpe,...fve,...Ive},Ae=Dme((e,t)=>ppe(e,t,Rve,Mve));function dU(){const e=x.useRef(!1);return cE(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Dve(){const e=dU(),[t,r]=x.useState(0),s=x.useCallback(()=>{e.current&&r(t+1)},[t]);return[x.useCallback(()=>yn.postRender(s),[s]),t]}class $ve extends x.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Fve({children:e,isPresent:t}){const r=x.useId(),s=x.useRef(null),i=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=i.current;if(t||!s.current||!a||!o)return;s.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement($ve,{isPresent:t,childRef:s,sizeRef:i},x.cloneElement(e,{ref:s}))}const S5=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=oV(zve),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:r,custom:i,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),a?void 0:[r]);return x.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[r]),x.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),o==="popLayout"&&(e=x.createElement(Fve,{isPresent:r},e)),x.createElement(z2.Provider,{value:u},e)};function zve(){return new Map}function Bve(e){return x.useEffect(()=>()=>e(),[])}const gf=e=>e.key||"";function qve(e,t){e.forEach(r=>{const s=gf(r);t.set(s,r)})}function Vve(e){const t=[];return x.Children.forEach(e,r=>{x.isValidElement(r)&&t.push(r)}),t}const zu=({children:e,custom:t,initial:r=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=x.useContext(fE).forceRender||Dve()[0],c=dU(),u=Vve(e);let d=u;const h=x.useRef(new Map).current,m=x.useRef(d),p=x.useRef(new Map).current,v=x.useRef(!0);if(cE(()=>{v.current=!1,qve(u,p),m.current=d}),Bve(()=>{v.current=!0,p.clear(),h.clear()}),v.current)return x.createElement(x.Fragment,null,d.map(_=>x.createElement(S5,{key:gf(_),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:a,mode:o},_)));d=[...d];const g=m.current.map(gf),y=u.map(gf),j=g.length;for(let _=0;_<j;_++){const w=g[_];y.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((_,w)=>{if(y.indexOf(w)!==-1)return;const A=p.get(w);if(!A)return;const S=g.indexOf(w);let P=_;if(!P){const C=()=>{h.delete(w);const T=Array.from(p.keys()).filter(M=>!y.includes(M));if(T.forEach(M=>p.delete(M)),m.current=u.filter(M=>{const z=gf(M);return z===w||T.includes(z)}),!h.size){if(c.current===!1)return;l(),s&&s()}};P=x.createElement(S5,{key:gf(A),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:a,mode:o},A),h.set(w,P)}d.splice(S,0,P)}),d=d.map(_=>{const w=_.key;return h.has(w)?_:x.createElement(S5,{key:gf(_),isPresent:!0,presenceAffectsLayout:a,mode:o},_)}),x.createElement(x.Fragment,null,h.size?d:d.map(_=>x.cloneElement(_)))};class Uve{constructor(){this.geminiApiKey={}.VITE_GEMINI_API_KEY,this.openaiApiKey={}.VITE_OPENAI_API_KEY,this.modelStrengths={gemini:["creativity","analysis","multilingual","technical"],openai:["conversation","reasoning","general","professional"]}}selectBestModel(t,r={}){const s=t.toLowerCase(),i={openai:["conversation","explication","aide","comment","pourquoi","conseil"],gemini:["analyse","cratif","technique","recherche","valuation","calcul"]},a={openai:0,gemini:0};Object.entries(i).forEach(([l,c])=>{c.forEach(u=>{s.includes(u)&&(a[l]+=1)})}),(s.includes("prix")||s.includes("march")||s.includes("investissement"))&&(a.gemini+=2),(s.includes("aide")||s.includes("comment")||s.includes("navigation"))&&(a.openai+=2);const o=Object.entries(a).reduce((l,c)=>a[l[0]]>a[c[0]]?l:c)[0];return a[o]>0?o:"gemini"}async callGemini(t,r={}){if(!this.geminiApiKey)throw new Error("Gemini API key not configured");const i={contents:[{role:"user",parts:[{text:`Tu es l'assistant virtuel expert de Teranga Foncier, plateforme immobilire du Sngal.
    
    INSTRUCTIONS IMPORTANTES :
    - Rponds de manire claire et structure
    - Utilise des mojis pour rendre tes rponses plus visibles
    - Sois professionnel mais accessible
    - Fournis des conseils pratiques et prcis
    
    Format de rponse souhait :
    - Paragraphes bien spars
    - Points cls en vidence
    - Suggestions d'actions concrtes`}]},...t.map(c=>({role:c.sender==="user"?"user":"model",parts:[{text:c.text}]}))],generationConfig:{temperature:.7,maxOutputTokens:800,responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{text:{type:"STRING"},suggestions:{type:"ARRAY",items:{type:"STRING"}},confidence:{type:"NUMBER"}},required:["text","suggestions","confidence"]}}},a=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${this.geminiApiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok)throw new Error(`Gemini API error: ${a.status}`);const l=(await a.json()).candidates[0].content.parts[0].text;try{const c=JSON.parse(l);return{text:c.text||l,suggestions:c.suggestions||[],confidence:c.confidence||.8}}catch{return{text:l,suggestions:["Poser une autre question","Explorer les fonctionnalits","Obtenir plus d'aide"],confidence:.7}}}async callOpenAI(t,r={}){if(!this.openaiApiKey)throw new Error("OpenAI API key not configured");const s=`Tu es l'assistant virtuel de Teranga Foncier, plateforme immobilire du Sngal.

    DIRECTIVES DE RPONSE :
    - Rponds de manire claire et bien structure 
    - Utilise des mojis pour amliorer la lisibilit
    - Sois professionnel mais chaleureux
    - Fournis des informations pratiques et actionables
    - Adapte ton ton selon le contexte (formel pour business, plus dcontract pour questions gnrales)
    
    STRUCTURE DE RPONSE :
    - Introduction claire du sujet
    - Points principaux bien organiss  
    - Conclusion avec prochaines tapes suggres
    
    Format JSON obligatoire : {"text": "rponse complte", "suggestions": ["action1", "action2"], "confidence": 0.9}`,i=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${this.openaiApiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:s},...t.map(o=>({role:o.sender==="user"?"user":"assistant",content:o.text}))],response_format:{type:"json_object"},max_tokens:1e3,temperature:.7})});if(!i.ok)throw new Error(`OpenAI API error: ${i.status}`);const a=await i.json();try{const o=JSON.parse(a.choices[0].message.content);return{text:o.text||a.choices[0].message.content,suggestions:o.suggestions||[],confidence:o.confidence||.8}}catch{return{text:a.choices[0].message.content,suggestions:["Continuer la conversation","Poser une autre question","Explorer d'autres fonctionnalits"],confidence:.7}}}async generateHybridResponse(t,r=[],s={}){const i=this.selectBestModel(t,s);console.log(` Modle slectionn: ${i.toUpperCase()} pour: "${t.substring(0,50)}..."`);const a=[];this.openaiApiKey&&a.push("openai"),this.geminiApiKey&&a.push("gemini");let o=i;a.includes(i)||(o=a.length>0?a[0]:"mock",console.log(` ${i} non disponible, utilisation de ${o}`));try{let l;switch(o){case"openai":l=await this.callOpenAI([...r,{sender:"user",text:t}]);break;case"gemini":l=await this.callGemini([...r,{sender:"user",text:t}]);break;case"mock":default:l=await this.getMockResponse(t,r,s);break}return l.modelUsed=o,l.timestamp=new Date().toISOString(),l}catch(l){console.error(`Erreur avec ${o}:`,l);const c=a.filter(u=>u!==o);for(const u of c)try{console.log(` Tentative de fallback vers ${u.toUpperCase()}`);let d;switch(u){case"openai":d=await this.callOpenAI([...r,{sender:"user",text:t}]);break;case"gemini":d=await this.callGemini([...r,{sender:"user",text:t}]);break}return d.modelUsed=u,d.fallback=!0,d.originalModel=i,d}catch(d){console.error(`Erreur avec fallback ${u}:`,d);continue}return console.log(" Utilisation du mode simulation en dernier recours"),await this.getMockResponse(t,r,s)}}async getMockResponse(t,r=[],s={}){await new Promise(l=>setTimeout(l,800+Math.random()*1200));const i=t.toLowerCase(),a={prix:{text:` **VALUATION DE PRIX IMMOBILIER**

 Selon notre analyse de march :
 Prix moyen zone : 250,000 - 450,000 FCFA/m
 Tendance : +5.2% sur 12 mois
 Facteurs impactants : localisation, viabilisation, proximit services

 **RECOMMANDATIONS :**
 Vrifiez les prix comparables dans un rayon de 2km
 Considrez l'tat de la voirie et des rseaux
 valuez le potentiel d'volution du quartier

 *Cette estimation est base sur les donnes de march rcentes de Teranga Foncier*`,suggestions:["Voir proprits similaires","Calculer frais notaris","Analyser le quartier"]},recherche:{text:` **RECHERCHE DE PROPRITS**

 Notre moteur de recherche vous offre :
 **Plus de 15,000 proprits** rfrences
 **Filtres avancs** : prix, superficie, localisation
 **Cartes interactives** avec vue satellite
 **Alertes personnalises** selon vos critres

 **POUR COMMENCER :**
1 Dfinissez votre budget et zone prfre
2 Utilisez les filtres pour affiner
3 Sauvegardez vos recherches favorites
4 Activez les notifications automatiques

 *Trouvez le terrain idal en quelques clics !*`,suggestions:["Dmarrer une recherche","Configurer mes alertes","Voir les zones populaires"]},procedure:{text:` **PROCDURES ADMINISTRATIVES**

 **TAPES D'ACQUISITION FONCIRE :**
1 **Vrification juridique** - Titre foncier, hypothques
2 **Due diligence** - Bornage, servitudes, urbanisme  
3 **Ngociation** - Prix, conditions, dlais
4 **Acte authentique** - Signature chez notaire
5 **Enregistrement** - Conservation foncire

 **DLAIS MOYENS :** 45  90 jours
 **FRAIS ANNEXES :** 7  12% du prix d'achat

 *Teranga Foncier vous accompagne  chaque tape*`,suggestions:["Calculer les frais","Trouver un notaire","Vrifier un titre foncier"]},aide:{text:` **AIDE ET NAVIGATION**

 **FONCTIONNALITS PRINCIPALES :**
 **Tableau de bord** personnalis selon votre profil
 **Recherche avance** avec golocalisation
 **Comparateur de prix** en temps rel
 **Messagerie scurise** avec les professionnels
 **Suivi de dossiers** et notifications

 **ASTUCES D'UTILISATION :**
 Utilisez les raccourcis clavier (Ctrl+K pour recherche)
 Sauvegardez vos proprits favorites
 Activez les notifications push
 Consultez l'historique des prix

 *Support disponible 24h/7j via chat*`,suggestions:["Visite guide","Raccourcis clavier","Contacter le support"]},default:{text:` **ASSISTANT TERANGA FONCIER**

 Je suis votre expert immobilier virtuel, spcialis dans le march foncier sngalais.

 **MES COMPTENCES :**
 Recherche et valuation de proprits
 Analyse de march et tendances
 Conseils juridiques et administratifs  
 Stratgies d'investissement personnalises
 Navigation et formation sur la plateforme

 **POSEZ-MOI VOS QUESTIONS SUR :**
 Recherche de terrains et proprits
 valuation de prix et ngociation
 Procdures et dmarches lgales
 Conseils d'investissement immobilier

 *Je suis l pour vous accompagner dans vos projets !*`,suggestions:["Rechercher un terrain","valuer un prix","Comprendre les procdures"]}};let o=a.default;return i.includes("prix")||i.includes("cot")||i.includes("valeur")?o=a.prix:i.includes("recherch")||i.includes("trouv")||i.includes("cherch")?o=a.recherche:i.includes("procdure")||i.includes("dmarche")||i.includes("tape")?o=a.procedure:(i.includes("aide")||i.includes("comment")||i.includes("navigation"))&&(o=a.aide),{text:o.text,suggestions:o.suggestions,confidence:.85,modelUsed:"simulation-pro"}}validateAndEnhanceResponse(t,r={}){return(!t.text||t.text.length<10)&&(t.text="Je n'ai pas pu gnrer une rponse complte. Pouvez-vous reformuler votre question ?"),(!t.suggestions||t.suggestions.length===0)&&(t.suggestions=["Comment puis-je vous aider d'autre ?","Avez-vous d'autres questions ?","Voulez-vous explorer d'autres fonctionnalits ?"]),t.suggestions.length>3&&(t.suggestions=t.suggestions.slice(0,3)),t.confidence||(t.confidence=.7),t}async generateResponse(t,r=[],s={}){try{const i=await this.generateHybridResponse(t,r,s);return this.validateAndEnhanceResponse(i,s)}catch(i){return console.error("Erreur du service IA hybride:",i),{text:`Dsol, je rencontre des difficults techniques. ${i.message}. Veuillez ressayer dans quelques instants.`,suggestions:["Ressayer","Contacter le support","Voir les FAQ"],confidence:.1,error:!0}}}}const Il=new Uve,Hve=()=>{const{isAuthenticated:e,user:t}=ar(),{toast:r}=pt(),[s,i]=x.useState(!1),[a,o]=x.useState([]),[l,c]=x.useState(""),[u,d]=x.useState(!1),h=x.useRef(null),m=()=>{var y;(y=h.current)==null||y.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{m()},[a]);const p=()=>{var w,A;const y=new Date().getHours();let j=y<12?"Bonjour":y<18?"Bon aprs-midi":"Bonsoir";const _=e?` ${((w=t==null?void 0:t.full_name)==null?void 0:w.split(" ")[0])||((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])}`:"";return` ${j}${_} !

 Je suis **Teranga AI Global**, votre assistant intelligent pour la plateforme foncire.

 **MES SPCIALITS :**
 Recherche de proprits personnalise
 valuations et conseils de prix  
 Procdures et dmarches administratives
 Conseils d'investissement immobilier
 Navigation et aide sur la plateforme

 **COMMENT PUIS-JE VOUS AIDER ?**
Posez-moi vos questions en langage naturel !`};x.useEffect(()=>{s&&a.length===0&&o([{sender:"bot",text:p()}])},[s]);const v=async(y=l)=>{if(!y.trim())return;const j={sender:"user",text:y};o(_=>[..._,j]),c(""),d(!0);try{const _={isAuthenticated:e,userRole:(t==null?void 0:t.role)||(t==null?void 0:t.type),platform:"teranga-global"},w=await Il.generateResponse(y,a,_);o(A=>[...A,{sender:"bot",text:w.text,modelUsed:w.modelUsed,confidence:w.confidence}])}catch(_){console.error("Erreur IA Global:",_),o(w=>[...w,{sender:"bot",text:"Dsol, je rencontre des difficults. Veuillez ressayer.",error:!0}]),r({variant:"destructive",title:"Erreur IA Global",description:_.message})}finally{d(!1)}},g=()=>{o([{sender:"bot",text:p()}])};return n.jsxs(n.Fragment,{children:[n.jsx(Ae.div,{className:"fixed bottom-6 right-6 z-40",whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(Y,{className:st("rounded-full h-14 w-14 shadow-lg transition-all duration-300",s?"bg-gray-600 hover:bg-gray-700":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700"),size:"icon",onClick:()=>i(!s),children:n.jsx(zu,{mode:"wait",children:s?n.jsx(Ii,{className:"h-6 w-6 text-white"}):n.jsx(xj,{className:"h-6 w-6 text-white"})})})}),n.jsx(zu,{children:s&&n.jsxs(Ae.div,{initial:{opacity:0,scale:.8,x:100},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:100},className:"fixed bottom-24 right-6 z-40 w-[500px] h-[700px] bg-white border border-gray-200 rounded-xl shadow-xl flex flex-col overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-4 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-white/20 text-white",children:n.jsx(xj,{className:"h-4 w-4"})})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Teranga AI Global"}),n.jsx("p",{className:"text-xs text-white/80",children:"Chat principal"})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:g,className:"h-8 w-8 text-white hover:bg-white/20",children:n.jsx(di,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"h-8 w-8 text-white hover:bg-white/20",children:n.jsx(Ii,{className:"h-4 w-4"})})]})]})}),n.jsx($2,{className:"flex-1 p-4",children:n.jsxs("div",{className:"space-y-4",children:[a.map((y,j)=>n.jsxs("div",{className:st("flex gap-2",y.sender==="user"?"justify-end":"justify-start"),children:[y.sender==="bot"&&n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-blue-100 text-blue-600",children:n.jsx(wf,{className:"h-4 w-4"})})}),n.jsxs("div",{className:st("max-w-[85%] p-4 rounded-lg text-sm leading-relaxed",y.sender==="user"?"bg-blue-500 text-white rounded-br-sm":"bg-gray-50 text-gray-900 rounded-bl-sm border border-gray-200"),children:[n.jsx("div",{className:"whitespace-pre-wrap font-medium",children:y.text}),y.sender==="bot"&&y.modelUsed&&n.jsx("div",{className:"mt-2 text-xs text-blue-600 font-semibold bg-blue-50 px-2 py-1 rounded-full inline-block",children:y.modelUsed.toUpperCase()})]}),y.sender==="user"&&n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-gray-100 text-gray-600",children:n.jsx(oi,{className:"h-4 w-4"})})})]},j)),u&&n.jsxs("div",{className:"flex gap-2 justify-start",children:[n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-blue-100 text-blue-600",children:n.jsx(wf,{className:"h-4 w-4"})})}),n.jsx("div",{className:"bg-gray-100 p-3 rounded-lg rounded-bl-sm",children:n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(Ae.div,{className:"w-2 h-2 bg-blue-500 rounded-full",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:0}}),n.jsx(Ae.div,{className:"w-2 h-2 bg-blue-500 rounded-full",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2}}),n.jsx(Ae.div,{className:"w-2 h-2 bg-blue-500 rounded-full",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.4}})]})})]}),n.jsx("div",{ref:h})]})}),n.jsx("div",{className:"p-4 border-t",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(De,{placeholder:"Posez votre question...",value:l,onChange:y=>c(y.target.value),onKeyPress:y=>y.key==="Enter"&&!y.shiftKey&&v(),disabled:u,className:"flex-1"}),n.jsx(Y,{size:"icon",onClick:()=>v(),disabled:u||!l.trim(),className:"bg-blue-500 hover:bg-blue-600",children:n.jsx(Ol,{className:"h-4 w-4"})})]})})]})})]})},Wve=({dashboardContext:e,onAction:t,userRole:r="user"})=>{const{toast:s}=pt(),[i,a]=x.useState(!1),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState(!1),m=x.useRef(null),p=()=>{var _;(_=m.current)==null||_.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{p()},[o]);const v=()=>` ${{admin:" **Assistant IA Admin** - Je vous aide  grer la plateforme, analyser les donnes et superviser les oprations avec expertise.",notaire:" **Assistant IA Notaire** - Spcialis dans l'analyse de documents, la conformit lgale et la gestion des dossiers complexes.",particulier:" **Assistant IA Particulier** - Je vous guide dans vos recherches de proprits et vos dmarches d'acquisition avec des conseils personnaliss.",vendeur:" **Assistant IA Vendeur** - Optimisation de vos annonces, analyse de march et stratgies de vente pour maximiser vos rsultats.",banque:" **Assistant IA Banque** - valuation de risques, analyse de garanties et gestion de portefeuille avec prcision.",agent:" **Assistant IA Agent** - Gestion clientle, planification visites et suivi des transactions pour votre russite.",mairie:" **Assistant IA Mairie** - Gestion du foncier communal, urbanisme et dmarches administratives municipales."}[r]||" **Assistant IA Dashboard** - Je vous aide avec votre tableau de bord et vos tches spcialises."}

 **MON RLE :**
 Assistance spcialise selon votre profil
 Rponses expertes dans votre domaine  
 Suggestions d'actions pertinentes
 Support technique personnalis

 **PRT  VOUS AIDER !**
Utilisez les actions rapides ou posez vos questions directement.`,g=()=>({admin:[" Analyser les performances"," Rapport d'activit mensuel"," Identifier les risques"," Optimiser les processus"],notaire:[" Analyser ce dossier"," Vrifier la conformit"," valuer les risques"," Proposer des clauses"],particulier:[" Rechercher des proprits"," valuer ce terrain"," Calculer les frais"," Conseils d'investissement"],vendeur:[" Optimiser le prix"," Analyser la concurrence"," Amliorer l'annonce"," Stratgie marketing"]})[r]||[" Analyser les donnes"," Gnrer des insights"," Optimiser performance"," Conseils personnaliss"];x.useEffect(()=>{i&&o.length===0&&l([{sender:"bot",text:v()}])},[i,r]);const y=async(_=c)=>{if(!_.trim())return;const w={sender:"user",text:_};l(A=>[...A,w]),u(""),h(!0);try{const A={role:r,dashboardData:e,domain:"dashboard_assistance"},S=await Il.generateResponse(_,o,A);l(P=>[...P,{sender:"bot",text:S.text,modelUsed:S.modelUsed,confidence:S.confidence,suggestions:S.suggestions||[]}]),t&&S.actionType&&t(S.actionType,S)}catch(A){console.error("Erreur Assistant IA:",A),l(S=>[...S,{sender:"bot",text:"Erreur technique. Veuillez ressayer.",error:!0}]),s({variant:"destructive",title:"Erreur Assistant IA",description:A.message})}finally{h(!1)}},j=_=>{y(_)};return n.jsxs(n.Fragment,{children:[n.jsx(Ae.div,{className:"fixed bottom-6 left-6 z-40",whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(Y,{className:st("rounded-full h-14 w-14 shadow-lg transition-all duration-300",i?"bg-purple-600 hover:bg-purple-700":"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700"),size:"icon",onClick:()=>a(!i),children:n.jsx(zu,{mode:"wait",children:i?n.jsx(Ii,{className:"h-6 w-6 text-white"}):n.jsx(Zs,{className:"h-6 w-6 text-white"})})})}),n.jsx(zu,{children:i&&n.jsxs(Ae.div,{initial:{opacity:0,scale:.8,x:-100},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:-100},className:"fixed bottom-24 left-6 z-40 w-[500px] h-[700px] bg-white border border-gray-200 rounded-xl shadow-xl flex flex-col overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-4 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-white/20 text-white",children:n.jsx(Zs,{className:"h-4 w-4"})})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold",children:["Assistant IA ",r]}),n.jsx("p",{className:"text-xs text-white/80",children:"Spcialis dashboard"})]})]}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>a(!1),className:"h-8 w-8 text-white hover:bg-white/20",children:n.jsx(Ii,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50",children:[n.jsx("h4",{className:"text-sm font-semibold mb-3 text-purple-700",children:" Actions rapides"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:g().slice(0,4).map((_,w)=>n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>j(_),className:"text-xs h-10 justify-start border-purple-200 hover:bg-purple-100 hover:border-purple-300 transition-all",children:[n.jsx(Df,{className:"h-3 w-3 mr-2 text-purple-500"}),n.jsx("span",{className:"font-medium",children:_})]},w))})]}),n.jsx($2,{className:"flex-1 p-4",children:n.jsxs("div",{className:"space-y-4",children:[o.map((_,w)=>n.jsxs("div",{children:[n.jsxs("div",{className:st("flex gap-2",_.sender==="user"?"justify-end":"justify-start"),children:[_.sender==="bot"&&n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-purple-100 text-purple-600",children:n.jsx(Zs,{className:"h-4 w-4"})})}),n.jsxs("div",{className:st("max-w-[85%] p-4 rounded-lg text-sm leading-relaxed",_.sender==="user"?"bg-purple-500 text-white rounded-br-sm":"bg-gray-50 text-gray-900 rounded-bl-sm border border-gray-200"),children:[n.jsx("div",{className:"whitespace-pre-wrap font-medium",children:_.text}),_.sender==="bot"&&n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[_.modelUsed&&n.jsx("div",{className:"text-xs text-purple-600 font-semibold bg-purple-50 px-2 py-1 rounded-full",children:_.modelUsed.toUpperCase()}),_.confidence&&n.jsxs("div",{className:"text-xs text-green-600 font-semibold bg-green-50 px-2 py-1 rounded-full",children:[Math.round(_.confidence*100),"% confiance"]})]})]})]}),_.sender==="bot"&&_.suggestions&&_.suggestions.length>0&&n.jsx("div",{className:"mt-2 ml-10 space-y-1",children:_.suggestions.slice(0,2).map((A,S)=>n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>y(A),className:"h-6 text-xs text-purple-600 hover:text-purple-700 hover:bg-purple-50 justify-start",children:[n.jsx(Ru,{className:"h-3 w-3 mr-1"}),A]},S))})]},w)),d&&n.jsxs("div",{className:"flex gap-2 justify-start",children:[n.jsx(Ti,{className:"h-8 w-8",children:n.jsx(Oi,{className:"bg-purple-100 text-purple-600",children:n.jsx(Zs,{className:"h-4 w-4"})})}),n.jsx("div",{className:"bg-gray-100 p-3 rounded-lg rounded-bl-sm",children:n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(Ae.div,{className:"w-2 h-2 bg-purple-500 rounded-full",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:0}}),n.jsx(Ae.div,{className:"w-2 h-2 bg-purple-500 rounded-full",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2}}),n.jsx(Ae.div,{className:"w-2 h-2 bg-purple-500 rounded-full",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.4}})]})})]}),n.jsx("div",{ref:m})]})}),n.jsx("div",{className:"p-4 border-t",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(De,{placeholder:`Question ${r}...`,value:c,onChange:_=>u(_.target.value),onKeyPress:_=>_.key==="Enter"&&!_.shiftKey&&y(),disabled:d,className:"flex-1"}),n.jsx(Y,{size:"icon",onClick:()=>y(),disabled:d||!c.trim(),className:"bg-purple-500 hover:bg-purple-600",children:n.jsx(Ol,{className:"h-4 w-4"})})]})})]})})]})},Gve=({children:e})=>{const[t,r]=x.useState(!1),{profile:s}=ar(),i=Di(),a=()=>(s==null?void 0:s.role)||(s==null?void 0:s.type)||"user",o=()=>{const l=i.pathname;return l.includes("/admin")?{role:"admin",section:"administration"}:l.includes("/notaire")?{role:"notaire",section:"notarial"}:l.includes("/particulier")?{role:"particulier",section:"personal"}:l.includes("/vendeur")?{role:"vendeur",section:"sales"}:l.includes("/banque")?{role:"banque",section:"banking"}:l.includes("/agent")?{role:"agent",section:"agency"}:l.includes("/mairie")?{role:"mairie",section:"municipal"}:{role:a(),section:"general"}};return n.jsxs("div",{className:"flex min-h-screen w-full bg-muted/40",children:[n.jsx(Pme,{isCollapsed:t,toggleSidebar:()=>r(!t)}),n.jsxs("div",{className:st("flex flex-col flex-1 transition-all duration-300",t?"md:pl-20":"md:pl-64"),children:[n.jsx(V9,{children:n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>r(!t),className:"md:hidden mr-2","aria-label":"Toggle menu",children:n.jsx(gk,{className:"h-6 w-6"})})}),n.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto pt-16",children:n.jsx("div",{className:"max-w-full mx-auto p-4 sm:px-6 md:p-8",children:e||n.jsx(Nk,{})})})]}),n.jsx(Wve,{userRole:o().role,dashboardContext:o(),onAction:(l,c)=>{console.log("Dashboard AI Action:",l,c)}}),n.jsx(Hve,{})]})},hU=x.createContext(),Kve=({children:e})=>{const[t,r]=x.useState(!1),s=()=>r(!0),i=()=>r(!1),a=()=>r(o=>!o);return n.jsx(hU.Provider,{value:{isChatbotOpen:t,openChatbot:s,closeChatbot:i,toggleChatbot:a},children:e})},fU=()=>{const e=x.useContext(hU);if(e===void 0)throw new Error("useChatbot must be used within a ChatbotProvider");return e},Zve=()=>{const{openChatbot:e}=fU(),[t,r]=x.useState([]),[s,i]=x.useState([]),[a,o]=x.useState([]),[l,c]=x.useState(!0);x.useEffect(()=>{(async()=>{try{c(!0);const j=(await Je.getParcels(3)).map(P=>({id:P.id,name:P.title||`Parcelle ${P.reference}`,reference:P.reference,location:P.location||"Localisation non spcifie",area:P.area_sqm?`${P.area_sqm} m`:"Surface non spcifie",price:P.price?`${new Intl.NumberFormat("fr-SN").format(P.price)} XOF`:"Prix  ngocier",image:P.image_url||"https://placehold.co/400x250/0052A3/FFFFFF?text=Parcelle",status:P.status==="available"?"Disponible":P.status==="reserved"?"Rserve":P.status==="sold"?"Vendue":"En attente"}));r(j);const w=(await Je.getBlogPosts(3)).map(P=>{var C;return{id:P.id,title:P.title,date:new Date(P.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),description:P.excerpt||((C=P.content)==null?void 0:C.substring(0,150))+"...",image:P.featured_image_url||"https://placehold.co/400x280/FFD700/000000?text=Article",link:`/blog/${P.id}`}});i(w);const A=await Je.getUsers(3),S=A.length>0?A.map((P,C)=>{var T;return{id:P.id,name:P.full_name||"Utilisateur anonyme",role:P.role||"user",quote:u(P.role||"user"),avatar:`https://placehold.co/80x80/E0F2F7/0288D1?text=${((T=P.full_name)==null?void 0:T.substring(0,2).toUpperCase())||"UN"}`}}):[{id:"t1",name:"Fatoumata Ndiaye",role:"Particulier",quote:`"Teranga Foncier a rendu l'achat de mon terrain incroyablement simple et scuris. Une quipe trs professionnelle et une plateforme intuitive !"`,avatar:"https://placehold.co/80x80/E0F2F7/0288D1?text=FN"},{id:"t2",name:"M. Diallo",role:"Banque",quote:'"La plateforme a rvolutionn la gestion de nos actifs fonciers. Fiabilit, transparence et efficacit au rendez-vous pour nos oprations bancaires."',avatar:"https://placehold.co/80x80/D4EDDA/155724?text=MD"},{id:"t3",name:"Awa Sow",role:"Notaire",quote:'"Un service client exceptionnel et des dmarches simplifies. Teranga Foncier est un partenaire indispensable pour notre tude."',avatar:"https://placehold.co/80x80/FCE5CD/E67E22?text=AS"}];o(S)}catch(y){console.error("Erreur lors du chargement des donnes:",y),r(d()),i(h()),o(m())}finally{c(!1)}})()},[]);const u=g=>({Particulier:'"Teranga Foncier a simplifi mes dmarches foncires. Interface intuitive et quipe comptente !"',Vendeur:'"Excellent outil pour grer mes annonces de terrains. Visibilit et transparence garanties."',Banque:`"Plateforme fiable pour l'valuation et le suivi des garanties foncires. Trs professionnel."`,Notaire:'"Service remarquable pour la vrification des titres fonciers. Gain de temps considrable."',Mairie:'"Solution digitale efficace pour la gestion des terrains communaux. Recommand."',Agent:'"Outil indispensable pour accompagner mes clients dans leurs projets fonciers."'})[g]||'"Excellente exprience avec Teranga Foncier. Service de qualit !"',d=()=>[{id:"fp1",name:"Parcelle Rsidentielle  Diamniadio",reference:"REF-DIA-001",location:"Diamniadio, Dakar",area:"300 m",price:"25 000 000 XOF",image:"https://placehold.co/400x250/0052A3/FFFFFF?text=Parcelle+Diamniadio",status:"Disponible"},{id:"fp2",name:"Terrain Agricole  This",reference:"REF-THS-002",location:"This, Rgion de This",area:"5000 m",price:"15 000 000 XOF",image:"https://placehold.co/400x250/00A3AD/FFFFFF?text=Terrain+This",status:"Disponible"},{id:"fp3",name:"Parcelle Commerciale  Dakar",reference:"REF-DKR-003",location:"Plateau, Dakar",area:"150 m",price:"45 000 000 XOF",image:"https://placehold.co/400x250/F0A800/FFFFFF?text=Parcelle+Dakar",status:"Rserve"}],h=()=>[{id:"b1",title:"La numrisation du foncier : une rvolution au Sngal",date:"25 Juillet 2025",description:"Dcouvrez comment la technologie transforme l'accs et la gestion des terres au Sngal...",image:"https://placehold.co/400x280/FFD700/000000?text=Article+Numerisation",link:"/blog/article-1"},{id:"b2",title:"Acheter un terrain  Dakar : Le guide complet",date:"18 Juillet 2025",description:"Nos experts partagent leurs conseils pour scuriser votre investissement foncier dans la capitale...",image:"https://placehold.co/400x280/ADD8E6/000000?text=Article+Achat+Dakar",link:"/blog/article-2"},{id:"b3",title:"Demande de terrain en mairie : Simplifiez vos dmarches",date:"10 Juillet 2025",description:"Dcouvrez comment notre plateforme simplifie vos dmarches administratives pour l'acquisition de terrains communaux...",image:"https://placehold.co/400x280/90EE90/000000?text=Article+Mairie",link:"/blog/article-3"}],m=()=>[{id:"t1",name:"Fatou Ndiaye",role:"Particulier",quote:`"Teranga Foncier a rendu l'achat de mon terrain incroyablement simple et scuris. Une quipe trs professionnelle et une plateforme intuitive !"`,avatar:"https://placehold.co/80x80/E0F2F7/0288D1?text=FN"},{id:"t2",name:"M. Diallo",role:"Banque XYZ",quote:'"La plateforme a rvolutionn la gestion de nos actifs fonciers. Fiabilit, transparence et efficacit au rendez-vous pour nos oprations bancaires."',avatar:"https://placehold.co/80x80/D4EDDA/155724?text=MD"},{id:"t3",name:"Awa Sow",role:"Notaire",quote:'"Un service client exceptionnel et des dmarches simplifies. Teranga Foncier est un partenaire indispensable pour notre tude."',avatar:"https://placehold.co/80x80/FCE5CD/E67E22?text=AS"}],p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},v={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,duration:.5}}};return n.jsxs(Ae.div,{initial:"hidden",animate:"visible",variants:p,className:"flex flex-col min-h-screen font-inter bg-gray-50 dark:bg-background",children:[n.jsxs("section",{className:"relative w-full min-h-[700px] md:min-h-[760px] bg-cover bg-center flex items-center text-white overflow-hidden",style:{backgroundImage:"url('https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3')"},children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-950/90 via-blue-800/80 to-emerald-700/60"}),n.jsxs("div",{className:"relative z-10 container mx-auto px-4 flex flex-col items-center justify-center text-center h-full",children:[n.jsx(Ae.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"text-4xl md:text-6xl font-extrabold mb-6 leading-tight max-w-5xl",children:"Accdez aux Terrains Communaux & Scurisez Vos Transactions Foncires au Sngal"}),n.jsx(Ae.p,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,type:"spring",stiffness:100},className:"text-lg md:text-2xl mb-10 max-w-4xl mx-auto opacity-90 font-medium",children:"Demandez officiellement un terrain de votre commune, vrifiez les titres et dposez vos annonces en toute transparence grce  notre dispositif anti-fraude."}),n.jsxs(Ae.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.6,type:"spring",stiffness:100},className:"w-full max-w-3xl bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl p-8 md:p-10 border border-white/40",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[n.jsx(Ea,{className:"h-8 w-8 text-blue-700"})," Demandez un Terrain Communal"]}),n.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Slectionnez rgion, dpartement et commune sur la page ddie et suivez l'avancement de votre dossier en temps rel. Rduisez les dlais et vitez les pertes de documents."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx(dt,{onClick:()=>Je.recordHomepageCta("hero_municipal_request"),to:"/municipal-land-request-info",className:"flex-1 inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg px-8 py-5 rounded-xl shadow-md transition-all",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Dmarrer ma Demande ",n.jsx(Fn,{className:"h-5 w-5"})]})}),n.jsx(dt,{onClick:()=>Je.recordHomepageCta("hero_explore_parcels"),to:"/parcelles",className:"flex-1 inline-flex items-center justify-center bg-blue-50 text-blue-700 hover:bg-blue-100 font-semibold text-lg px-8 py-5 rounded-xl border border-blue-200 transition-all",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Explorer les Parcelles ",n.jsx(jr,{className:"h-5 w-5"})]})})]}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ns,{className:"h-5 w-5 text-emerald-600"}),n.jsx("span",{children:"Dossier horodat & suivi transparent"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Df,{className:"h-5 w-5 text-blue-600"}),n.jsx("span",{children:"Rduction des allers-retours administratifs"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(gj,{className:"h-5 w-5 text-indigo-600"}),n.jsx("span",{children:"Protection des documents fournis"})]})]})]}),n.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-10 w-full max-w-5xl",children:n.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-xl p-6 md:p-8 grid grid-cols-1 md:grid-cols-3 gap-6 shadow-xl border border-white/40",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(lk,{className:"h-8 w-8 text-amber-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Badge Vendeur Vrifi"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Soumettez les titres et pices cls pour booster la visibilit de votre annonce."})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ys,{className:"h-8 w-8 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Anti-Fraude Intgr"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Contrles croiss & journalisation des actions pour rduire les risques."})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(kr,{className:"h-8 w-8 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Alerte Anomalies"}),n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Signalement proactif des incohrences documentaires."})]})]})]})})]})]}),n.jsx("section",{className:"py-16 bg-white dark:bg-card",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 dark:text-white mb-12",children:"Comment a marche ?"}),n.jsxs(Ae.div,{variants:p,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"p-6 text-center shadow-lg rounded-xl h-full flex flex-col items-center justify-center bg-blue-50/50 dark:bg-blue-950/50 border border-blue-100 dark:border-blue-800",children:[n.jsx(ln,{className:"h-14 w-14 text-blue-600 mb-4",strokeWidth:1.5}),n.jsx(ke,{className:"text-2xl font-bold mb-2 text-gray-800 dark:text-white",children:"1. Crez votre compte"}),n.jsx(jt,{className:"text-gray-600 dark:text-gray-300",children:"Inscrivez-vous rapidement pour accder  toutes les fonctionnalits de la plateforme."})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"p-6 text-center shadow-lg rounded-xl h-full flex flex-col items-center justify-center bg-green-50/50 dark:bg-green-950/50 border border-green-100 dark:border-green-800",children:[n.jsx(Cr,{className:"h-14 w-14 text-green-600 mb-4",strokeWidth:1.5}),n.jsx(ke,{className:"text-2xl font-bold mb-2 text-gray-800 dark:text-white",children:"2. Soumettez votre demande"}),n.jsx(jt,{className:"text-gray-600 dark:text-gray-300",children:"Que ce soit pour une parcelle vrifie ou une demande en mairie, le processus est simplifi."})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"p-6 text-center shadow-lg rounded-xl h-full flex flex-col items-center justify-center bg-purple-50/50 dark:bg-purple-950/50 border border-purple-100 dark:border-purple-800",children:[n.jsx(Qt,{className:"h-14 w-14 text-purple-600 mb-4",strokeWidth:1.5}),n.jsx(ke,{className:"text-2xl font-bold mb-2 text-gray-800 dark:text-white",children:"3. Suivez et concrtisez"}),n.jsx(jt,{className:"text-gray-600 dark:text-gray-300",children:"Suivez l'tat de votre dossier en temps rel et finalisez votre acquisition en toute srnit."})]})})]}),n.jsx("div",{className:"text-center mt-12",children:n.jsx(dt,{to:"/how-it-works",className:"inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white shadow-lg rounded-lg px-8 py-6 font-bold transition-all duration-300 transform hover:scale-105",children:n.jsxs("span",{className:"flex items-center gap-2",children:["En savoir plus sur le processus ",n.jsx(Fn,{className:"ml-2 h-5 w-5"})]})})})]})}),n.jsx("section",{className:"py-16 bg-gray-100 dark:bg-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 dark:text-white mb-12",children:"Nos Engagements pour Votre Srnit"}),n.jsxs(Ae.div,{variants:p,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"p-6 text-center shadow-lg rounded-xl h-full flex flex-col items-center justify-center bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsx(Df,{className:"h-14 w-14 text-yellow-600 mb-4",strokeWidth:1.5}),n.jsx(ke,{className:"text-2xl font-bold mb-2 text-gray-800 dark:text-white",children:"Innovation"}),n.jsx(jt,{className:"text-gray-600 dark:text-gray-300",children:"Nous utilisons les dernires technologies pour simplifier et scuriser vos dmarches foncires."})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"p-6 text-center shadow-lg rounded-xl h-full flex flex-col items-center justify-center bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsx(gj,{className:"h-14 w-14 text-red-600 mb-4",strokeWidth:1.5}),n.jsx(ke,{className:"text-2xl font-bold mb-2 text-gray-800 dark:text-white",children:"Scurit"}),n.jsx(jt,{className:"text-gray-600 dark:text-gray-300",children:"Vos donnes et transactions sont protges par des protocoles de scurit avancs."})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"p-6 text-center shadow-lg rounded-xl h-full flex flex-col items-center justify-center bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsx(yz,{className:"h-14 w-14 text-blue-600 mb-4",strokeWidth:1.5}),n.jsx(ke,{className:"text-2xl font-bold mb-2 text-gray-800 dark:text-white",children:"Transparence"}),n.jsx(jt,{className:"text-gray-600 dark:text-gray-300",children:"Accdez  des informations claires et compltes pour chaque proprit."})]})})]})]})}),n.jsx("section",{className:"py-16 bg-white dark:bg-background",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-center text-gray-800 dark:text-white mb-12",children:"Nos Terrains en Vedette"}),n.jsx(Ae.div,{variants:p,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(g=>n.jsx(Ae.div,{variants:v,whileHover:{scale:1.03},transition:{type:"spring",stiffness:300},children:n.jsxs(he,{className:"h-full flex flex-col rounded-xl shadow-md overflow-hidden bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsx("img",{src:g.image,alt:g.name,className:"object-cover h-56 w-full",loading:"lazy"}),n.jsxs(Ce,{className:"flex-grow pb-2",children:[n.jsx(ke,{className:"text-2xl font-bold",children:g.name}),n.jsx(jt,{className:"text-sm text-muted-foreground",children:g.location})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:g.area}),n.jsx("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:g.price})]}),n.jsx(dt,{to:`/parcelles/${g.id}`,className:"inline-flex items-center justify-center w-full bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold py-2 px-4",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Voir les dtails ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})})]})]})},g.id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsx(dt,{to:"/parcelles",className:"inline-flex items-center justify-center text-blue-600 border-2 border-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-400 dark:hover:bg-blue-900 rounded-lg px-8 py-6 font-bold transition-all duration-300 transform hover:scale-105",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Explorer les Terrains Vrifis ",n.jsx(jr,{className:"h-6 w-6"})]})})})]})}),n.jsx("section",{className:"py-16 bg-gray-100 dark:bg-gray-900",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-center text-gray-800 dark:text-white mb-12",children:"Nos Solutions pour Chaque Profil"}),n.jsxs(Ae.div,{variants:p,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"rounded-xl hover:shadow-xl transition-shadow h-full flex flex-col p-5 bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[" /* Rduction du padding */",n.jsxs(Ce,{className:"pb-2",children:[n.jsx(Vn,{className:"h-12 w-12 text-blue-600 mb-3",strokeWidth:1.5})," /* Icnes lgrement plus petites */",n.jsx(ke,{className:"text-xl font-bold",children:"Mairies"})," /* Titre lgrement plus petit */"]}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Grez le foncier communal, les demandes citoyens et le cadastre numrique avec une efficacit ingale."}),n.jsx(dt,{to:"/solutions/mairies",className:"inline-flex items-center text-blue-600 hover:text-blue-700 text-sm font-semibold mt-4",children:n.jsxs("span",{className:"flex items-center gap-2",children:["En savoir plus ",n.jsx(Fn,{className:"ml-1 h-4 w-4"})]})})]})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"rounded-xl hover:shadow-xl transition-shadow h-full flex flex-col p-5 bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsxs(Ce,{className:"pb-2",children:[n.jsx(A0,{className:"h-12 w-12 text-green-600 mb-3",strokeWidth:1.5}),n.jsx(ke,{className:"text-xl font-bold",children:"Notaires"})]}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Simplifiez l'authentification des actes et la gestion des dossiers fonciers en toute scurit."}),n.jsx(dt,{to:"/solutions/notaires",className:"inline-flex items-center text-green-600 hover:text-green-700 text-sm font-semibold mt-4",children:n.jsxs("span",{className:"flex items-center gap-2",children:["En savoir plus ",n.jsx(Fn,{className:"ml-1 h-4 w-4"})]})})]})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"rounded-xl hover:shadow-xl transition-shadow h-full flex flex-col p-5 bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsxs(Ce,{className:"pb-2",children:[n.jsx(Rl,{className:"h-12 w-12 text-purple-600 mb-3",strokeWidth:1.5}),n.jsx(ke,{className:"text-xl font-bold",children:"Banques"})]}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Optimisez la gestion de vos garanties foncires et acclrez les demandes de financement."}),n.jsx(dt,{to:"/solutions/banques",className:"inline-flex items-center text-purple-600 hover:text-purple-700 text-sm font-semibold mt-4",children:n.jsxs("span",{className:"flex items-center gap-2",children:["En savoir plus ",n.jsx(Fn,{className:"ml-1 h-4 w-4"})]})})]})]})}),n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"rounded-xl hover:shadow-xl transition-shadow h-full flex flex-col p-5 bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsxs(Ce,{className:"pb-2",children:[n.jsx(dh,{className:"h-12 w-12 text-orange-600 mb-3",strokeWidth:1.5}),n.jsx(ke,{className:"text-xl font-bold",children:"Agents Fonciers"})]}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed",children:"Grez vos clients et parcelles efficacement, suivez vos tches quotidiennes en toute simplicit."}),n.jsx(dt,{to:"/solutions/agents",className:"inline-flex items-center text-orange-600 hover:text-orange-700 text-sm font-semibold mt-4",children:n.jsxs("span",{className:"flex items-center gap-2",children:["En savoir plus ",n.jsx(Fn,{className:"ml-1 h-4 w-4"})]})})]})]})})]})]})}),n.jsx("section",{className:"py-16 bg-white dark:bg-background",children:n.jsxs("div",{className:"container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[n.jsxs(Ae.div,{initial:{x:-100,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0,amount:.3},transition:{duration:.5},children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 dark:text-white mb-6",children:"Le Foncier Sngalais en un Coup d'il"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-normal leading-relaxed mb-4 text-lg",children:"Explorez notre carte interactive pour visualiser les opportunits foncires, les valeurs estimes et les zones de dveloppement  travers le Sngal."}),n.jsxs("ul",{className:"space-y-3 text-gray-700 dark:text-gray-300 mb-6 text-lg",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(vz,{className:"h-6 w-6 text-blue-500 mr-3"})," Accs aux donnes gospatiales prcises."]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Br,{className:"h-6 w-6 text-green-500 mr-3"})," Tendances des prix des terrains par rgion."]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Ese,{className:"h-6 w-6 text-purple-500 mr-3"})," Informations vrifies et  jour."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx(dt,{to:"/parcelles",className:"inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white shadow-lg rounded-lg px-8 py-6 font-bold transition-all duration-300 transform hover:scale-105",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Voir la Carte Interactive ",n.jsx(ox,{className:"ml-2 h-5 w-5"})]})}),n.jsx(dt,{to:"/parcelles",className:"inline-flex items-center justify-center text-blue-600 border-2 border-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-400 dark:hover:bg-blue-900 rounded-lg px-8 py-6 font-bold",children:n.jsx("span",{children:"Explorer les Terrains"})})]})]}),n.jsx(Ae.div,{initial:{x:100,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0,amount:.3},transition:{duration:.5},className:"flex justify-center",children:n.jsx(Ae.img,{src:"https://placehold.co/600x400/007bff/FFFFFF?text=Carte+du+Senegal",alt:"Carte du Sngal",className:"rounded-xl shadow-xl border-4 border-blue-100 dark:border-blue-900",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},loading:"lazy"})})]})}),n.jsx("section",{className:"py-16 bg-gray-100 dark:bg-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-center text-gray-800 dark:text-white mb-12",children:"Nos Derniers Articles et Actualits"}),n.jsx(Ae.div,{variants:p,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(g=>n.jsx(Ae.div,{variants:v,whileHover:{scale:1.03},transition:{type:"spring",stiffness:300},children:n.jsxs(he,{className:"h-full flex flex-col shadow-md rounded-xl overflow-hidden bg-white dark:bg-card border border-gray-200 dark:border-gray-700",children:[n.jsx("img",{src:g.image,alt:g.title,className:"object-cover h-56 w-full",loading:"lazy"}),n.jsxs(Ce,{className:"flex-grow pb-2",children:[n.jsx(ke,{className:"text-2xl font-bold",children:g.title}),n.jsx(jt,{className:"text-sm text-muted-foreground",children:g.date})]}),n.jsxs(ve,{children:[n.jsx("p",{className:"text-muted-foreground text-base mb-4",children:g.description}),n.jsx(dt,{to:g.link,className:"inline-flex items-center text-blue-600 hover:text-blue-700 text-base font-semibold",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Lire plus ",n.jsx(Fn,{className:"ml-1 h-4 w-4"})]})})]})]})},g.id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsx(dt,{to:"/blog",className:"inline-flex items-center justify-center text-blue-600 border-2 border-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:border-blue-400 dark:hover:bg-blue-900 rounded-lg px-8 py-6 font-bold",children:n.jsxs("span",{className:"flex items-center gap-2",children:["Voir toutes les actualits ",n.jsx(mae,{className:"ml-2 h-5 w-5"})]})})})]})}),n.jsx("section",{className:"py-16 bg-blue-50 dark:bg-blue-950",children:n.jsx("div",{className:"container mx-auto px-4 text-center",children:n.jsxs(Ae.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0,amount:.3},transition:{duration:.5},className:"bg-white dark:bg-card p-12 rounded-xl shadow-xl max-w-3xl mx-auto flex flex-col items-center",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-800 dark:text-white mb-4",children:"Une question ? Parlez  notre IA !"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg leading-relaxed mb-8 max-w-xl mx-auto",children:"Notre assistant virtuel intelligent est l pour vous guider  travers les dmarches foncires et rpondre  vos interrogations."}),n.jsxs(Y,{size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg flex items-center justify-center gap-2 rounded-lg px-8 py-6 font-bold transition-all duration-300 transform hover:scale-105",onClick:e,"aria-label":"Lancer le chatbot",children:[n.jsx(xj,{className:"h-5 w-5"})," Lancer le Chatbot"]})]})})}),n.jsx("section",{className:"py-16 bg-gray-100 dark:bg-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-extrabold text-gray-800 dark:text-white mb-12",children:"Ce que disent nos utilisateurs"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map(g=>n.jsx(Ae.div,{variants:v,whileHover:{scale:1.03},viewport:{once:!0,amount:.3},transition:{duration:.5},children:n.jsxs(he,{className:"bg-white dark:bg-card p-8 rounded-xl shadow-md flex flex-col items-center text-center border border-gray-200 dark:border-gray-700",children:[n.jsx("img",{src:g.avatar,alt:g.name,className:"rounded-full mb-4 border-2 border-blue-200"}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-200 text-lg italic mb-4 leading-relaxed",children:['"',g.quote,'"']}),n.jsxs("p",{className:"font-bold text-gray-800 dark:text-white text-base",children:["- ",g.name,", ",g.role]})]})},g.id))})]})})]})};var Xve="Label",mU=x.forwardRef((e,t)=>n.jsx(_t.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));mU.displayName=Xve;var pU=mU;const Yve=sx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$e=x.forwardRef(({className:e,...t},r)=>n.jsx(pU,{ref:r,className:st(Yve(),e),...t}));$e.displayName=pU.displayName;const Jve=e=>{var t;if(!e)return"/login";if(e.role==="admin"||e.type==="Administrateur")return"/dashboard/admin";switch((t=e.type)==null?void 0:t.toLowerCase()){case"particulier":return"/dashboard/particulier";case"vendeur":return"/dashboard/vendeur";case"banque":return"/dashboard/banque";case"mairie":return"/dashboard/mairie";case"notaire":return"/dashboard/notaire";case"promoteur":return"/dashboard/promoteur";case"agriculteur":return"/dashboard/agriculteur";case"investisseur":return"/dashboard/investisseur";case"agent":return"/dashboard/agent";case"agent_immobilier":return"/dashboard/agent";case"geometre":return"/dashboard/geometre";default:return console.warn(`Type d'utilisateur non reconnu: ${e.type}, redirection vers particulier`),"/dashboard/particulier"}},Qve=()=>{var y,j;const[e,t]=x.useState(""),[r,s]=x.useState(""),[i,a]=x.useState(!1),[o,l]=x.useState(""),c=kn(),u=Di(),{toast:d}=pt(),{user:h,profile:m,loading:p,isAuthenticated:v}=ar();(j=(y=u.state)==null?void 0:y.from)!=null&&j.pathname,x.useEffect(()=>{if(v&&m){const _=Jve(m);c(_,{replace:!0})}},[v,m,c]);const g=async _=>{_.preventDefault(),a(!0),l("");try{const{error:w}=await pe.auth.signInWithPassword({email:e,password:r});if(w)throw w}catch(w){console.error("Erreur de connexion:",w);let A="Une erreur inattendue est survenue lors de la connexion.";w.message.includes("Invalid login credentials")?A="Email ou mot de passe incorrect.":w.message.includes("Email not confirmed")?A="Veuillez confirmer votre adresse email.":A=w.message,l(A),d({title:"chec de la Connexion",description:A,variant:"destructive"})}finally{a(!1)}};return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:to-emerald-900/50 px-4 py-12",children:n.jsxs(he,{className:"w-full max-w-md shadow-xl border-border/50 bg-card/80 backdrop-blur-sm",children:[n.jsxs(Ce,{className:"text-center",children:[n.jsx(ke,{className:"text-2xl font-bold text-primary",children:"Connexion"}),n.jsx(jt,{children:"Accdez  votre espace Teranga Foncier"})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx($e,{htmlFor:"email",children:"Email"}),n.jsx(De,{id:"email",type:"email",placeholder:"nom@exemple.com",required:!0,value:e,onChange:_=>t(_.target.value),disabled:i})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx($e,{htmlFor:"password",children:"Mot de passe"}),n.jsx(dt,{to:"#",className:"text-sm text-primary hover:underline",onClick:_=>{_.preventDefault(),d({title:"Fonctionnalit  venir",description:"La rcupration de mot de passe n'est pas encore implmente."})},children:"Mot de passe oubli ?"})]}),n.jsx(De,{id:"password",type:"password",placeholder:"********",required:!0,value:r,onChange:_=>s(_.target.value),disabled:i})]}),o&&n.jsxs("div",{className:"flex items-center p-3 bg-destructive/10 text-destructive text-sm rounded-md border border-destructive/30",children:[n.jsx(ds,{className:"h-4 w-4 mr-2 flex-shrink-0"}),n.jsx("span",{children:o})]}),n.jsx(Y,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-green-600 hover:opacity-90 text-white",disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(wz,{className:"mr-2 h-4 w-4"})," Se Connecter"]})})]})}),n.jsx(Wn,{className:"text-center text-sm",children:n.jsxs("p",{className:"text-muted-foreground w-full",children:["Pas encore de compte ?"," ",n.jsx(dt,{to:"/register",className:"font-medium text-primary hover:underline",children:"S'inscrire"})]})})]})})};function zj(e,[t,r]){return Math.min(r,Math.max(t,e))}var eye=[" ","Enter","ArrowUp","ArrowDown"],tye=[" ","Enter"],Qf="Select",[G2,K2,rye]=Ph(Qf),[gx,IHe]=ws(Qf,[rye,T2]),Z2=T2(),[nye,Eh]=gx(Qf),[sye,iye]=gx(Qf),gU=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:p,form:v}=e,g=Z2(t),[y,j]=x.useState(null),[_,w]=x.useState(null),[A,S]=x.useState(!1),P=Ch(u),[C,T]=Ri({prop:s,defaultProp:i??!1,onChange:a,caller:Qf}),[M,z]=Ri({prop:o,defaultProp:l,onChange:c,caller:Qf}),O=x.useRef(null),I=y?v||!!y.closest("form"):!0,[q,F]=x.useState(new Set),W=Array.from(q).map(V=>V.props.value).join(";");return n.jsx(Nq,{...g,children:n.jsxs(nye,{required:p,scope:t,trigger:y,onTriggerChange:j,valueNode:_,onValueNodeChange:w,valueNodeHasChildren:A,onValueNodeHasChildrenChange:S,contentId:ka(),value:M,onValueChange:z,open:C,onOpenChange:T,dir:P,triggerPointerDownPosRef:O,disabled:m,children:[n.jsx(G2.Provider,{scope:t,children:n.jsx(sye,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(V=>{F(ne=>new Set(ne).add(V))},[]),onNativeOptionRemove:x.useCallback(V=>{F(ne=>{const G=new Set(ne);return G.delete(V),G})},[]),children:r})}),I?n.jsxs($U,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:M,onChange:V=>z(V.target.value),disabled:m,form:v,children:[M===void 0?n.jsx("option",{value:""}):null,Array.from(q)]},W):null]})})};gU.displayName=Qf;var xU="SelectTrigger",vU=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...i}=e,a=Z2(r),o=Eh(xU,r),l=o.disabled||s,c=Gt(t,o.onTriggerChange),u=K2(r),d=x.useRef("touch"),[h,m,p]=zU(g=>{const y=u().filter(w=>!w.disabled),j=y.find(w=>w.value===o.value),_=BU(y,g,j);_!==void 0&&o.onValueChange(_.value)}),v=g=>{l||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return n.jsx(Sq,{asChild:!0,...a,children:n.jsx(_t.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":FU(o.value)?"":void 0,...i,ref:c,onClick:ft(i.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:ft(i.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:ft(i.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(y&&g.key===" ")&&eye.includes(g.key)&&(v(),g.preventDefault())})})})});vU.displayName=xU;var yU="SelectValue",bU=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:i,children:a,placeholder:o="",...l}=e,c=Eh(yU,r),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Gt(t,c.onValueNodeChange);return Mn(()=>{u(d)},[u,d]),n.jsx(_t.span,{...l,ref:h,style:{pointerEvents:"none"},children:FU(c.value)?n.jsx(n.Fragment,{children:o}):a})});bU.displayName=yU;var aye="SelectIcon",jU=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...i}=e;return n.jsx(_t.span,{"aria-hidden":!0,...i,ref:t,children:s||""})});jU.displayName=aye;var oye="SelectPortal",wU=e=>n.jsx(E0,{asChild:!0,...e});wU.displayName=oye;var em="SelectContent",_U=x.forwardRef((e,t)=>{const r=Eh(em,e.__scopeSelect),[s,i]=x.useState();if(Mn(()=>{i(new DocumentFragment)},[]),!r.open){const a=s;return a?wh.createPortal(n.jsx(NU,{scope:e.__scopeSelect,children:n.jsx(G2.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),a):null}return n.jsx(SU,{...e,ref:t})});_U.displayName=em;var ml=10,[NU,Th]=gx(em),lye="SelectContentImpl",cye=Kf("SelectContent.RemoveScroll"),SU=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:y,...j}=e,_=Eh(em,r),[w,A]=x.useState(null),[S,P]=x.useState(null),C=Gt(t,Ne=>A(Ne)),[T,M]=x.useState(null),[z,O]=x.useState(null),I=K2(r),[q,F]=x.useState(!1),W=x.useRef(!1);x.useEffect(()=>{if(w)return Wk(w)},[w]),Ik();const V=x.useCallback(Ne=>{const[le,...Q]=I().map(Z=>Z.ref.current),[J]=Q.slice(-1),se=document.activeElement;for(const Z of Ne)if(Z===se||(Z==null||Z.scrollIntoView({block:"nearest"}),Z===le&&S&&(S.scrollTop=0),Z===J&&S&&(S.scrollTop=S.scrollHeight),Z==null||Z.focus(),document.activeElement!==se))return},[I,S]),ne=x.useCallback(()=>V([T,w]),[V,T,w]);x.useEffect(()=>{q&&ne()},[q,ne]);const{onOpenChange:G,triggerPointerDownPosRef:K}=_;x.useEffect(()=>{if(w){let Ne={x:0,y:0};const le=J=>{var se,Z;Ne={x:Math.abs(Math.round(J.pageX)-(((se=K.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(J.pageY)-(((Z=K.current)==null?void 0:Z.y)??0))}},Q=J=>{Ne.x<=10&&Ne.y<=10?J.preventDefault():w.contains(J.target)||G(!1),document.removeEventListener("pointermove",le),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",Q,{capture:!0})}}},[w,G,K]),x.useEffect(()=>{const Ne=()=>G(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[G]);const[ee,xe]=zU(Ne=>{const le=I().filter(se=>!se.disabled),Q=le.find(se=>se.ref.current===document.activeElement),J=BU(le,Ne,Q);J&&setTimeout(()=>J.ref.current.focus())}),B=x.useCallback((Ne,le,Q)=>{const J=!W.current&&!Q;(_.value!==void 0&&_.value===le||J)&&(M(Ne),J&&(W.current=!0))},[_.value]),X=x.useCallback(()=>w==null?void 0:w.focus(),[w]),ie=x.useCallback((Ne,le,Q)=>{const J=!W.current&&!Q;(_.value!==void 0&&_.value===le||J)&&O(Ne)},[_.value]),me=s==="popper"?iP:AU,ye=me===iP?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:v,hideWhenDetached:g,avoidCollisions:y}:{};return n.jsx(NU,{scope:r,content:w,viewport:S,onViewportChange:P,itemRefCallback:B,selectedItem:T,onItemLeave:X,itemTextRefCallback:ie,focusSelectedItem:ne,selectedItemText:z,position:s,isPositioned:q,searchRef:ee,children:n.jsx(Gk,{as:cye,allowPinchZoom:!0,children:n.jsx(A2,{asChild:!0,trapped:_.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:ft(i,Ne=>{var le;(le=_.trigger)==null||le.focus({preventScroll:!0}),Ne.preventDefault()}),children:n.jsx(dx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:n.jsx(me,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:Ne=>Ne.preventDefault(),...j,...ye,onPlaced:()=>F(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:ft(j.onKeyDown,Ne=>{const le=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!le&&Ne.key.length===1&&xe(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let J=I().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(J=J.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const se=Ne.target,Z=J.indexOf(se);J=J.slice(Z+1)}setTimeout(()=>V(J)),Ne.preventDefault()}})})})})})})});SU.displayName=lye;var uye="SelectItemAlignedPosition",AU=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...i}=e,a=Eh(em,r),o=Th(em,r),[l,c]=x.useState(null),[u,d]=x.useState(null),h=Gt(t,C=>d(C)),m=K2(r),p=x.useRef(!1),v=x.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:j,focusSelectedItem:_}=o,w=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&y&&j){const C=a.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),z=j.getBoundingClientRect();if(a.dir!=="rtl"){const se=z.left-T.left,Z=M.left-se,je=C.left-Z,Ee=C.width+je,Pe=Math.max(Ee,T.width),de=window.innerWidth-ml,be=zj(Z,[ml,Math.max(ml,de-Pe)]);l.style.minWidth=Ee+"px",l.style.left=be+"px"}else{const se=T.right-z.right,Z=window.innerWidth-M.right-se,je=window.innerWidth-C.right-Z,Ee=C.width+je,Pe=Math.max(Ee,T.width),de=window.innerWidth-ml,be=zj(Z,[ml,Math.max(ml,de-Pe)]);l.style.minWidth=Ee+"px",l.style.right=be+"px"}const O=m(),I=window.innerHeight-ml*2,q=g.scrollHeight,F=window.getComputedStyle(u),W=parseInt(F.borderTopWidth,10),V=parseInt(F.paddingTop,10),ne=parseInt(F.borderBottomWidth,10),G=parseInt(F.paddingBottom,10),K=W+V+q+G+ne,ee=Math.min(y.offsetHeight*5,K),xe=window.getComputedStyle(g),B=parseInt(xe.paddingTop,10),X=parseInt(xe.paddingBottom,10),ie=C.top+C.height/2-ml,me=I-ie,ye=y.offsetHeight/2,Ne=y.offsetTop+ye,le=W+V+Ne,Q=K-le;if(le<=ie){const se=O.length>0&&y===O[O.length-1].ref.current;l.style.bottom="0px";const Z=u.clientHeight-g.offsetTop-g.offsetHeight,je=Math.max(me,ye+(se?X:0)+Z+ne),Ee=le+je;l.style.height=Ee+"px"}else{const se=O.length>0&&y===O[0].ref.current;l.style.top="0px";const je=Math.max(ie,W+g.offsetTop+(se?B:0)+ye)+Q;l.style.height=je+"px",g.scrollTop=le-ie+g.offsetTop}l.style.margin=`${ml}px 0`,l.style.minHeight=ee+"px",l.style.maxHeight=I+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,g,y,j,a.dir,s]);Mn(()=>w(),[w]);const[A,S]=x.useState();Mn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const P=x.useCallback(C=>{C&&v.current===!0&&(w(),_==null||_(),v.current=!1)},[w,_]);return n.jsx(hye,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:P,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:n.jsx(_t.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});AU.displayName=uye;var dye="SelectPopperPosition",iP=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:i=ml,...a}=e,o=Z2(r);return n.jsx(Aq,{...o,...a,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});iP.displayName=dye;var[hye,TE]=gx(em,{}),aP="SelectViewport",PU=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...i}=e,a=Th(aP,r),o=TE(aP,r),l=Gt(t,a.onViewportChange),c=x.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(G2.Slot,{scope:r,children:n.jsx(_t.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ft(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const p=Math.abs(c.current-d.scrollTop);if(p>0){const v=window.innerHeight-ml*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),j=Math.max(g,y);if(j<v){const _=j+p,w=Math.min(v,_),A=_-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});PU.displayName=aP;var CU="SelectGroup",[fye,mye]=gx(CU),pye=x.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,i=ka();return n.jsx(fye,{scope:r,id:i,children:n.jsx(_t.div,{role:"group","aria-labelledby":i,...s,ref:t})})});pye.displayName=CU;var kU="SelectLabel",EU=x.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,i=mye(kU,r);return n.jsx(_t.div,{id:i.id,...s,ref:t})});EU.displayName=kU;var Bj="SelectItem",[gye,TU]=gx(Bj),OU=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:i=!1,textValue:a,...o}=e,l=Eh(Bj,r),c=Th(Bj,r),u=l.value===s,[d,h]=x.useState(a??""),[m,p]=x.useState(!1),v=Gt(t,_=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,_,s,i)}),g=ka(),y=x.useRef("touch"),j=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(gye,{scope:r,value:s,disabled:i,textId:g,isSelected:u,onItemTextChange:x.useCallback(_=>{h(w=>w||((_==null?void 0:_.textContent)??"").trim())},[]),children:n.jsx(G2.ItemSlot,{scope:r,value:s,disabled:i,textValue:d,children:n.jsx(_t.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:ft(o.onFocus,()=>p(!0)),onBlur:ft(o.onBlur,()=>p(!1)),onClick:ft(o.onClick,()=>{y.current!=="mouse"&&j()}),onPointerUp:ft(o.onPointerUp,()=>{y.current==="mouse"&&j()}),onPointerDown:ft(o.onPointerDown,_=>{y.current=_.pointerType}),onPointerMove:ft(o.onPointerMove,_=>{var w;y.current=_.pointerType,i?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ft(o.onPointerLeave,_=>{var w;_.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:ft(o.onKeyDown,_=>{var A;((A=c.searchRef)==null?void 0:A.current)!==""&&_.key===" "||(tye.includes(_.key)&&j(),_.key===" "&&_.preventDefault())})})})})});OU.displayName=Bj;var kv="SelectItemText",LU=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:i,...a}=e,o=Eh(kv,r),l=Th(kv,r),c=TU(kv,r),u=iye(kv,r),[d,h]=x.useState(null),m=Gt(t,j=>h(j),c.onItemTextChange,j=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,j,c.value,c.disabled)}),p=d==null?void 0:d.textContent,v=x.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return Mn(()=>(g(v),()=>y(v)),[g,y,v]),n.jsxs(n.Fragment,{children:[n.jsx(_t.span,{id:c.textId,...a,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wh.createPortal(a.children,o.valueNode):null]})});LU.displayName=kv;var MU="SelectItemIndicator",IU=x.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return TU(MU,r).isSelected?n.jsx(_t.span,{"aria-hidden":!0,...s,ref:t}):null});IU.displayName=MU;var oP="SelectScrollUpButton",xye=x.forwardRef((e,t)=>{const r=Th(oP,e.__scopeSelect),s=TE(oP,e.__scopeSelect),[i,a]=x.useState(!1),o=Gt(t,s.onScrollButtonChange);return Mn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?n.jsx(RU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});xye.displayName=oP;var lP="SelectScrollDownButton",vye=x.forwardRef((e,t)=>{const r=Th(lP,e.__scopeSelect),s=TE(lP,e.__scopeSelect),[i,a]=x.useState(!1),o=Gt(t,s.onScrollButtonChange);return Mn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?n.jsx(RU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});vye.displayName=lP;var RU=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...i}=e,a=Th("SelectScrollButton",r),o=x.useRef(null),l=K2(r),c=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),Mn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),n.jsx(_t.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:ft(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:ft(i.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:ft(i.onPointerLeave,()=>{c()})})}),yye="SelectSeparator",DU=x.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(_t.div,{"aria-hidden":!0,...s,ref:t})});DU.displayName=yye;var cP="SelectArrow",bye=x.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,i=Z2(r),a=Eh(cP,r),o=Th(cP,r);return a.open&&o.position==="popper"?n.jsx(Pq,{...i,...s,ref:t}):null});bye.displayName=cP;var jye="SelectBubbleInput",$U=x.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const i=x.useRef(null),a=Gt(s,i),o=hx(t);return x.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),n.jsx(_t.select,{...r,style:{...Gz,...r.style},ref:a,defaultValue:t})});$U.displayName=jye;function FU(e){return e===""||e===void 0}function zU(e){const t=ts(e),r=x.useRef(""),s=x.useRef(0),i=x.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=x.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,i,a]}function BU(e,t,r){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=wye(e,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function wye(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var _ye=gU,qU=vU,Nye=bU,Sye=jU,Aye=wU,VU=_U,Pye=PU,UU=EU,HU=OU,Cye=LU,kye=IU,WU=DU;const Ft=_ye,zt=Nye,Dt=x.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(qU,{ref:s,className:st("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:[t,n.jsx(Sye,{asChild:!0,children:n.jsx(S0,{className:"h-4 w-4 opacity-50"})})]}));Dt.displayName=qU.displayName;const $t=x.forwardRef(({className:e,children:t,position:r="popper",...s},i)=>n.jsx(Aye,{children:n.jsx(VU,{ref:i,className:st("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:n.jsx(Pye,{className:st("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})}));$t.displayName=VU.displayName;const Eye=x.forwardRef(({className:e,...t},r)=>n.jsx(UU,{ref:r,className:st("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Eye.displayName=UU.displayName;const Ke=x.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(HU,{ref:s,className:st("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(kye,{children:n.jsx(Mu,{className:"h-4 w-4"})})}),n.jsx(Cye,{children:t})]}));Ke.displayName=HU.displayName;const Tye=x.forwardRef(({className:e,...t},r)=>n.jsx(WU,{ref:r,className:st("-mx-1 my-1 h-px bg-muted",e),...t}));Tye.displayName=WU.displayName;const Oye=()=>{const[e,t]=x.useState(""),[r,s]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState(!1),{toast:d}=pt(),h=kn(),m=async p=>{if(p.preventDefault(),i!==o){d({variant:"destructive",title:"Erreur",description:"Les mots de passe ne correspondent pas."});return}u(!0);try{const v=r.trim().toLowerCase(),{data:g,error:y}=await pe.auth.signUp({email:v,password:i,options:{data:{full_name:e,type:"Particulier",role:"user"}}});if(y)throw y;if(g.user){const{error:j}=await pe.from("users").upsert({id:g.user.id,full_name:e,email:v,type:"Particulier",role:"user",verification_status:"not_verified"},{onConflict:"id",ignoreDuplicates:!1});if(j)throw j}d({title:"Inscription presque termine !",description:"Un email de confirmation a t envoy. Veuillez vrifier votre bote de rception pour activer votre compte.",duration:8e3}),h("/login")}catch(v){v.message.includes("User already registered")?d({variant:"destructive",title:"Erreur d'inscription",description:"Un utilisateur avec cet email existe dj."}):d({variant:"destructive",title:"Erreur d'inscription",description:v.message})}finally{u(!1)}};return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto flex items-center justify-center min-h-screen py-12 px-4",children:n.jsxs(he,{className:"w-full max-w-sm",children:[n.jsxs(Ce,{children:[n.jsx(ke,{className:"text-2xl",children:"Crer un Compte"}),n.jsx(jt,{children:"Rejoignez Teranga Foncier."})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:m,className:"grid gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"name",children:"Nom complet"}),n.jsx(De,{id:"name",required:!0,value:e,onChange:p=>t(p.target.value),disabled:c})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"email",children:"Email"}),n.jsx(De,{id:"email",type:"email",required:!0,value:r,onChange:p=>s(p.target.value),disabled:c})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"password",children:"Mot de passe"}),n.jsx(De,{id:"password",type:"password",required:!0,value:i,onChange:p=>a(p.target.value),disabled:c})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"confirm-password",children:"Confirmer le mot de passe"}),n.jsx(De,{id:"confirm-password",type:"password",required:!0,value:o,onChange:p=>l(p.target.value),disabled:c})]}),n.jsx(Y,{type:"submit",className:"w-full",disabled:c,children:c?"Cration...":"Crer un compte"})]})}),n.jsx(Wn,{children:n.jsxs("div",{className:"text-center w-full text-sm",children:["Dj un compte?"," ",n.jsx(dt,{to:"/login",className:"underline",children:"Connectez-vous"})]})})]})})};function GU({isOpen:e,onClose:t,children:r}){return e?n.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:1e3},children:n.jsxs("div",{style:{background:"white",margin:"10vh auto",padding:24,borderRadius:8,maxWidth:400,boxShadow:"0 2px 16px rgba(0,0,0,0.2)"},children:[n.jsx("h2",{children:"Transition vers le mode vendeur"}),r,n.jsx("button",{onClick:t,style:{marginTop:16},children:"Fermer"})]})}):null}const hM=()=>{const{profile:e,needsVerification:t,isPendingVerification:r}=ar(),s=kn(),[i,a]=x.useState(60);x.useEffect(()=>{if(!r)return;const l=setInterval(()=>a(c=>c>0?c-1:0),1e3);return()=>clearInterval(l)},[r]);const o=async()=>{var l;try{await(((l=window==null?void 0:window.appAuthRefresh)==null?void 0:l.call(window))||Promise.resolve()),window.location.reload()}catch{}};return r?n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 flex items-center justify-center p-4",children:n.jsxs(he,{className:"w-full max-w-md shadow-xl",children:[n.jsxs(Ce,{className:"text-center",children:[n.jsxs(ke,{className:"flex items-center justify-center gap-2",children:[n.jsx(ln,{className:"h-6 w-6 text-yellow-500"}),"Vrification en Cours"]}),n.jsx(jt,{children:"Votre compte est en cours de vrification par notre quipe"})]}),n.jsxs(ve,{className:"space-y-6",children:[n.jsxs("div",{className:"text-center p-6 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsx(ln,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),n.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"Documents Soumis"}),n.jsx("p",{className:"text-sm text-yellow-700",children:"Vos documents d'identit ont t reus et sont en cours d'examen. Notre quipe vous contactera sous 24-48h."}),(e==null?void 0:e.verification_submitted_at)&&n.jsxs("p",{className:"text-xs text-yellow-600 mt-2",children:["Soumis le ",new Date(e.verification_submitted_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Statut actuel:"}),n.jsx(Ge,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"En attente de vrification"})]}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Prochaines tapes:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[n.jsx("li",{children:"Examen de vos documents par notre quipe"}),n.jsx("li",{children:"Vrification de l'authenticit"}),n.jsx("li",{children:"Activation complte de votre compte"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-center text-xs text-gray-500",children:["Prochaine actualisation automatique possible dans ",i,"s"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[n.jsx(Y,{variant:"outline",onClick:()=>s("/dashboard"),children:"Tableau de bord"}),n.jsx(Y,{onClick:o,disabled:i>0,className:"bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50",children:"Rafrachir statut"})]}),n.jsx("p",{className:"text-center text-[11px] text-gray-400",children:"Vous recevrez un email ds que la vrification sera termine."})]})]})]})}):t?n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:n.jsxs(he,{className:"w-full max-w-md shadow-xl",children:[n.jsxs(Ce,{className:"text-center",children:[n.jsxs(ke,{className:"flex items-center justify-center gap-2",children:[n.jsx(kr,{className:"h-6 w-6 text-red-500"}),"Vrification Requise"]}),n.jsx(jt,{children:"Votre compte ncessite une vrification d'identit pour accder aux fonctionnalits"})]}),n.jsxs(ve,{className:"space-y-6",children:[n.jsxs("div",{className:"text-center p-6 bg-red-50 rounded-lg border border-red-200",children:[n.jsx(ns,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),n.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Action Requise"}),n.jsx("p",{className:"text-sm text-red-700",children:"Pour des raisons de scurit et de conformit, vous devez vrifier votre identit en soumettant une photo recto-verso de votre carte d'identit."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Statut actuel:"}),n.jsx(Ge,{variant:"destructive",children:"Non vrifi"})]}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Documents requis:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[n.jsx("li",{children:"Photo du recto de votre carte d'identit"}),n.jsx("li",{children:"Photo du verso de votre carte d'identit"}),n.jsx("li",{children:"Images claires et lisibles (max 5MB chacune)"})]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("h4",{className:"font-medium",children:"Accs limit:"}),n.jsx("p",{className:"text-xs text-gray-500",children:"En attendant la vrification, l'accs  certaines fonctionnalits est restreint."})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Y,{onClick:()=>s("/verification"),className:"w-full bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600",children:[n.jsx(Su,{className:"mr-2 h-4 w-4"}),"Commencer la Vrification"]}),n.jsx(Y,{variant:"outline",onClick:()=>s("/dashboard"),className:"w-full",children:"Accs Limit au Tableau de Bord"})]}),n.jsx("div",{className:"text-center",children:n.jsx("p",{className:"text-xs text-gray-500",children:"Ce processus est conforme aux rglementations de scurit et prend gnralement 24-48 heures."})})]})]})}):null},Lye=()=>{var h;const{isAuthenticated:e,user:t,profile:r,loading:s,needsVerification:i,isPendingVerification:a,isVerified:o,isAdmin:l}=ar(),c=kn();if(x.useEffect(()=>{var m,p;if(console.log("DashboardPage useEffect:",{authLoading:s,isAuthenticated:e,user:!!t,profile:!!r,profileType:r==null?void 0:r.type,profileRole:r==null?void 0:r.role}),!s&&e){if(r&&!l&&(i||a))return;let v="/dashboard/particulier";const g=(r==null?void 0:r.type)||((m=t==null?void 0:t.user_metadata)==null?void 0:m.type)||"Particulier",y=(r==null?void 0:r.role)||((p=t==null?void 0:t.user_metadata)==null?void 0:p.role)||"user";if(console.log("Determining dashboard path for:",{userType:g,userRole:y}),y==="admin"||g==="Administrateur")v="/dashboard/admin/new";else if(y==="agent"||g==="Agent")v="/dashboard/agent";else switch(g){case"Vendeur":v="/dashboard/vendeur";break;case"Mairie":v="/dashboard/mairie";break;case"Banque":v="/dashboard/banque";break;case"Notaire":v="/dashboard/notaire";break;case"Promoteur":v="/dashboard/promoteur";break;case"Agriculteur":v="/dashboard/agriculteur";break;case"Investisseur":v="/dashboard/investisseur";break;case"Particulier":default:v="/dashboard/particulier";break}console.log("Redirecting to:",v),c(v,{replace:!0})}},[s,e,t,r,c,i,a,l]),s)return n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})});if(!e)return n.jsx(yl,{to:"/login",replace:!0});if(!l&&((r==null?void 0:r.type)==="Particulier"||((h=t==null?void 0:t.user_metadata)==null?void 0:h.type)==="Particulier")){if((r==null?void 0:r.verification_status)!=="verified")return n.jsx(hM,{})}else if(!l&&(i||a))return n.jsx(hM,{});const[u,d]=x.useState(!1);return(r==null?void 0:r.type)==="Particulier"&&(r==null?void 0:r.verification_status)==="verified"?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[500px] space-y-4",children:[n.jsx(Tt,{size:"large"}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Redirection vers votre tableau de bord..."}),n.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>d(!0),children:"Passer en compte vendeur"})]}),n.jsx(GU,{isOpen:u,onClose:()=>d(!1)})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[500px] space-y-4",children:[n.jsx(Tt,{size:"large"}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Redirection vers votre tableau de bord..."}),t&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Connect en tant que: ",t.email]}),r&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Type: ",r.type||"Non dfini"," | Rle: ",r.role||"Non dfini"]}),!r&&(t==null?void 0:t.user_metadata)&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Utilisation des mtadonnes: ",t.user_metadata.type||"Particulier"]})]})]})},X2=x.createContext(),Mye=({children:e})=>{const[t,r]=x.useState(()=>{const o=localStorage.getItem("comparisonList");return o?JSON.parse(o):[]});x.useEffect(()=>{localStorage.setItem("comparisonList",JSON.stringify(t))},[t]);const s=o=>{t.length<4&&!t.includes(o)?r(l=>[...l,o]):t.length>=4&&console.warn("Maximum comparison limit reached (4 items).")},i=o=>{r(l=>l.filter(c=>c!==o))},a=()=>{r([])};return n.jsx(X2.Provider,{value:{comparisonList:t,addToCompare:s,removeFromCompare:i,clearCompare:a},children:e})};var Y2="Dialog",[KU,ZU]=ws(Y2),[Iye,Dl]=KU(Y2),XU=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=x.useRef(null),c=x.useRef(null),[u,d]=Ri({prop:s,defaultProp:i??!1,onChange:a,caller:Y2});return n.jsx(Iye,{scope:t,triggerRef:l,contentRef:c,contentId:ka(),titleId:ka(),descriptionId:ka(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};XU.displayName=Y2;var YU="DialogTrigger",JU=x.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,i=Dl(YU,r),a=Gt(t,i.triggerRef);return n.jsx(_t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ME(i.open),...s,ref:a,onClick:ft(e.onClick,i.onOpenToggle)})});JU.displayName=YU;var OE="DialogPortal",[Rye,QU]=KU(OE,{forceMount:void 0}),eH=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:i}=e,a=Dl(OE,t);return n.jsx(Rye,{scope:t,forceMount:r,children:x.Children.map(s,o=>n.jsx(hi,{present:r||a.open,children:n.jsx(E0,{asChild:!0,container:i,children:o})}))})};eH.displayName=OE;var qj="DialogOverlay",tH=x.forwardRef((e,t)=>{const r=QU(qj,e.__scopeDialog),{forceMount:s=r.forceMount,...i}=e,a=Dl(qj,e.__scopeDialog);return a.modal?n.jsx(hi,{present:s||a.open,children:n.jsx($ye,{...i,ref:t})}):null});tH.displayName=qj;var Dye=Kf("DialogOverlay.RemoveScroll"),$ye=x.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,i=Dl(qj,r);return n.jsx(Gk,{as:Dye,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(_t.div,{"data-state":ME(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),tm="DialogContent",rH=x.forwardRef((e,t)=>{const r=QU(tm,e.__scopeDialog),{forceMount:s=r.forceMount,...i}=e,a=Dl(tm,e.__scopeDialog);return n.jsx(hi,{present:s||a.open,children:a.modal?n.jsx(Fye,{...i,ref:t}):n.jsx(zye,{...i,ref:t})})});rH.displayName=tm;var Fye=x.forwardRef((e,t)=>{const r=Dl(tm,e.__scopeDialog),s=x.useRef(null),i=Gt(t,r.contentRef,s);return x.useEffect(()=>{const a=s.current;if(a)return Wk(a)},[]),n.jsx(nH,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ft(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ft(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:ft(e.onFocusOutside,a=>a.preventDefault())})}),zye=x.forwardRef((e,t)=>{const r=Dl(tm,e.__scopeDialog),s=x.useRef(!1),i=x.useRef(!1);return n.jsx(nH,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),nH=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Dl(tm,r),c=x.useRef(null),u=Gt(t,c);return Ik(),n.jsxs(n.Fragment,{children:[n.jsx(A2,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(dx,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ME(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(qye,{titleId:l.titleId}),n.jsx(Uye,{contentRef:c,descriptionId:l.descriptionId})]})]})}),LE="DialogTitle",sH=x.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,i=Dl(LE,r);return n.jsx(_t.h2,{id:i.titleId,...s,ref:t})});sH.displayName=LE;var iH="DialogDescription",aH=x.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,i=Dl(iH,r);return n.jsx(_t.p,{id:i.descriptionId,...s,ref:t})});aH.displayName=iH;var oH="DialogClose",lH=x.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,i=Dl(oH,r);return n.jsx(_t.button,{type:"button",...s,ref:t,onClick:ft(e.onClick,()=>i.onOpenChange(!1))})});lH.displayName=oH;function ME(e){return e?"open":"closed"}var cH="DialogTitleWarning",[Bye,uH]=Ule(cH,{contentName:tm,titleName:LE,docsSlug:"dialog"}),qye=({titleId:e})=>{const t=uH(cH),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Vye="DialogDescriptionWarning",Uye=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uH(Vye).contentName}}.`;return x.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},dH=XU,hH=JU,fH=eH,IE=tH,RE=rH,DE=sH,$E=aH,FE=lH;const on=dH,Hye=hH,Wye=fH,mH=x.forwardRef(({className:e,...t},r)=>n.jsx(IE,{ref:r,className:st("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));mH.displayName=IE.displayName;const Qr=x.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(Wye,{children:[n.jsx(mH,{}),n.jsxs(RE,{ref:s,className:st("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(FE,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Ii,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qr.displayName=RE.displayName;const qr=({className:e,...t})=>n.jsx("div",{className:st("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});qr.displayName="DialogHeader";const Bn=({className:e,...t})=>n.jsx("div",{className:st("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Bn.displayName="DialogFooter";const Vr=x.forwardRef(({className:e,...t},r)=>n.jsx(DE,{ref:r,className:st("text-lg font-semibold leading-none tracking-tight",e),...t}));Vr.displayName=DE.displayName;const Ur=x.forwardRef(({className:e,...t},r)=>n.jsx($E,{ref:r,className:st("text-sm text-muted-foreground",e),...t}));Ur.displayName=$E.displayName;const A5=e=>isNaN(e)?"0 FCFA":new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),pH=({isOpen:e,onClose:t,parcelPrice:r,parcelName:s})=>{pt();const[i,a]=x.useState(1),[o,l]=x.useState(!1),[c,u]=x.useState(r*.2),[d,h]=x.useState(36),[m]=x.useState(.1),[p,v]=x.useState({fullName:"",email:"",phone:"",profession:"",monthlyIncome:""}),g=r-c,y=m/12,j=g>0?g*y/(1-Math.pow(1+y,-d)):0,_=j*d+c;x.useEffect(()=>{e&&(a(1),u(r*.2),h(36),v({fullName:"",email:"",phone:"",profession:"",monthlyIncome:""}))},[e,r]);const w=P=>{const{name:C,value:T}=P.target;v(M=>({...M,[C]:T}))},A=async P=>{P.preventDefault(),l(!0),await new Promise(C=>setTimeout(C,1500)),l(!1),a(3)},S={hidden:{opacity:0,x:50},visible:{opacity:1,x:0,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,x:-50,transition:{duration:.3,ease:"easeIn"}}};return n.jsx(on,{open:e,onOpenChange:t,children:n.jsx(Qr,{className:"sm:max-w-[550px] p-0",children:n.jsxs(zu,{mode:"wait",children:[i===1&&n.jsxs(Ae.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",children:[n.jsxs(qr,{className:"p-6 pb-4",children:[n.jsxs(Vr,{className:"text-2xl flex items-center",children:[n.jsx(jy,{className:"mr-2 h-6 w-6"}),"Simulateur de Paiement"]}),n.jsxs(Ur,{children:["Estimez vos mensualits pour l'achat de : ",n.jsx("span",{className:"font-semibold text-primary",children:s})]})]}),n.jsxs("div",{className:"px-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"parcelPrice",children:"Montant du Terrain"}),n.jsx(De,{id:"parcelPrice",value:A5(r),readOnly:!0,disabled:!0})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"downPayment",children:"Apport Personnel (FCFA)"}),n.jsx(De,{id:"downPayment",type:"number",value:c,onChange:P=>u(Number(P.target.value))})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"loanTerm",children:"Dure du Crdit (mois)"}),n.jsxs(Ft,{value:String(d),onValueChange:P=>h(Number(P)),children:[n.jsx(Dt,{children:n.jsx(zt,{})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"12",children:"12 mois"}),n.jsx(Ke,{value:"24",children:"24 mois"}),n.jsx(Ke,{value:"36",children:"36 mois"}),n.jsx(Ke,{value:"48",children:"48 mois"}),n.jsx(Ke,{value:"60",children:"60 mois"})]})]})]}),n.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Mensualit Estime*"}),n.jsx("span",{className:"text-lg font-bold text-primary",children:A5(j)})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Cot Total Estim"}),n.jsx("span",{className:"font-semibold",children:A5(_)})]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["*Estimation base sur un taux annuel de ",m*100,"%. Ne constitue pas une offre de crdit."]})]}),n.jsxs(Bn,{className:"p-6",children:[n.jsx(Y,{variant:"outline",onClick:t,children:"Annuler"}),n.jsx(Y,{onClick:()=>a(2),children:"Faire une demande"})]})]},"step1"),i===2&&n.jsxs(Ae.form,{onSubmit:A,variants:S,initial:"hidden",animate:"visible",exit:"exit",children:[n.jsxs(qr,{className:"p-6 pb-4",children:[n.jsxs(Vr,{className:"text-2xl flex items-center",children:[n.jsx(Ol,{className:"mr-2 h-6 w-6"}),"Demande de Financement"]}),n.jsx(Ur,{children:"Remplissez ce formulaire pour soumettre votre demande  notre partenaire financier."})]}),n.jsxs("div",{className:"px-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"fullName",children:"Nom Complet"}),n.jsx(De,{id:"fullName",name:"fullName",required:!0,onChange:w})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"email",children:"Email"}),n.jsx(De,{id:"email",name:"email",type:"email",required:!0,onChange:w})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"phone",children:"Tlphone"}),n.jsx(De,{id:"phone",name:"phone",type:"tel",required:!0,onChange:w})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"profession",children:"Situation Professionnelle"}),n.jsx(De,{id:"profession",name:"profession",required:!0,onChange:w})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"monthlyIncome",children:"Revenu Mensuel Net (FCFA)"}),n.jsx(De,{id:"monthlyIncome",name:"monthlyIncome",type:"number",required:!0,onChange:w})]})]}),n.jsxs(Bn,{className:"p-6",children:[n.jsx(Y,{type:"button",variant:"outline",onClick:()=>a(1),children:"Retour"}),n.jsxs(Y,{type:"submit",disabled:o,children:[o&&n.jsx(yg,{className:"mr-2 h-4 w-4 animate-spin"}),"Soumettre la Demande"]})]})]},"step2"),i===3&&n.jsxs(Ae.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",className:"p-6 text-center space-y-4",children:[n.jsx(Qt,{className:"mx-auto h-16 w-16 text-green-500"}),n.jsx("h2",{className:"text-2xl font-bold",children:"Demande Envoye !"}),n.jsx("p",{className:"text-muted-foreground",children:"Votre demande de financement a t transmise  notre partenaire. Vous serez contact(e) sous 48h pour les prochaines tapes."}),n.jsx(Y,{onClick:t,className:"w-full",children:"Fermer"})]},"step3")]})})})},Gye=e=>e==null?"Prix sur demande":new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),Kye=e=>{switch(e){case"Disponible":return"success";case"Rserve":return"warning";case"Vendue":return"destructive";default:return"secondary"}},Zye=({parcel:e})=>{const{toast:t}=pt(),[r,s]=x.useState(!1),[i,a]=x.useState(!1),{comparisonList:o,addToCompare:l,removeFromCompare:c}=x.useContext(X2),u=o.includes(e.id),d=e.ownerType!=="Mairie",h=g=>{g.preventDefault(),g.stopPropagation(),s(!r),t({title:r?"Retir des favoris":"Ajout aux favoris",description:`"${e.name}" a t ${r?"retir de":"ajout "} vos favoris.`})},m=g=>{g.preventDefault(),g.stopPropagation(),u?(c(e.id),t({title:"Retir du comparateur",description:`"${e.name}" a t retir.`})):(l(e.id),t({title:"Ajout au comparateur",description:`"${e.name}" a t ajout.`}))},p=g=>{g.preventDefault(),g.stopPropagation(),a(!0)},v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return n.jsxs(n.Fragment,{children:[n.jsx(Ae.div,{variants:v,children:n.jsxs(he,{className:"h-full flex flex-col overflow-hidden bg-card shadow-md hover:shadow-xl transition-all duration-300 border border-border/50 rounded-xl group",children:[n.jsxs(Ce,{className:"p-0 relative",children:[n.jsxs(dt,{to:`/parcelles/${e.id}`,className:"block aspect-[16/10] bg-muted overflow-hidden relative",children:[n.jsx("img",{alt:e.name||"Image de parcelle",className:"w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-105",src:"https://images.unsplash.com/photo-1572402230263-c9b91177908d"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent z-10"})]}),n.jsx(Ge,{variant:Kye(e.status),className:"absolute top-3 right-3 shadow-sm z-20",children:e.status}),n.jsx(Y,{size:"icon",variant:"secondary",className:"absolute top-3 left-3 h-8 w-8 rounded-full bg-white/80 backdrop-blur-sm hover:bg-white z-20",onClick:h,children:n.jsx(Kp,{className:`h-4 w-4 ${r?"text-red-500 fill-current":"text-gray-600"}`})})]}),n.jsxs(ve,{className:"p-4 flex-grow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs(Ge,{variant:e.documentStatus==="Vrifi"?"outline_success":"secondary",className:"text-xs flex items-center gap-1",children:[n.jsx(Ys,{className:"h-3 w-3"})," ",e.documentStatus]}),n.jsx(Ge,{variant:"outline",className:"text-xs",children:e.ownerType})]}),n.jsx(dt,{to:`/parcelles/${e.id}`,className:"block",children:n.jsx("h3",{className:"font-semibold text-lg text-foreground group-hover:text-primary transition-colors truncate",title:e.name,children:e.name})}),n.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 text-sm mt-1 mb-3 text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(jr,{className:"h-3.5 w-3.5"})," ",e.zone]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(k0,{className:"h-3.5 w-3.5"})," ",e.area_sqm," m"]})]}),n.jsx("p",{className:"text-xl font-bold text-accent_brand",children:Gye(e.price)})]}),n.jsxs(Wn,{className:"p-3 bg-muted/30 border-t flex flex-col gap-2",children:[n.jsxs("div",{className:"flex w-full gap-2",children:[n.jsx(Y,{asChild:!0,className:"w-full",children:n.jsxs(dt,{to:`/parcelles/${e.id}`,children:[n.jsx(b2,{className:"mr-2 h-4 w-4"})," Acheter"]})}),d&&n.jsxs(Y,{variant:"secondary",className:"w-full",onClick:p,children:[n.jsx(Pz,{className:"mr-2 h-4 w-4"})," Simuler"]})]}),n.jsxs(Y,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:m,children:[n.jsx(fk,{className:"mr-1.5 h-3 w-3"}),u?"Retirer du comparateur":"Comparer"]})]})]})}),d&&n.jsx(pH,{isOpen:i,onClose:()=>a(!1),parcelPrice:e.price,parcelName:e.name})]})};var J2="Checkbox",[Xye,RHe]=ws(J2),[Yye,zE]=Xye(J2);function Jye(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,p]=Ri({prop:r,defaultProp:i??!1,onChange:c,caller:J2}),[v,g]=x.useState(null),[y,j]=x.useState(null),_=x.useRef(!1),w=v?!!o||!!v.closest("form"):!0,A={checked:m,disabled:a,setChecked:p,control:v,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:_,required:u,defaultChecked:ah(i)?!1:i,isFormControl:w,bubbleInput:y,setBubbleInput:j};return n.jsx(Yye,{scope:t,...A,children:Qye(h)?h(A):s})}var gH="CheckboxTrigger",xH=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},i)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:v}=zE(gH,e),g=Gt(i,d),y=x.useRef(c);return x.useEffect(()=>{const j=a==null?void 0:a.form;if(j){const _=()=>h(y.current);return j.addEventListener("reset",_),()=>j.removeEventListener("reset",_)}},[a,h]),n.jsx(_t.button,{type:"button",role:"checkbox","aria-checked":ah(c)?"mixed":c,"aria-required":u,"data-state":wH(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:g,onKeyDown:ft(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:ft(r,j=>{h(_=>ah(_)?!0:!_),v&&p&&(m.current=j.isPropagationStopped(),m.current||j.stopPropagation())})})});xH.displayName=gH;var BE=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return n.jsx(Jye,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:s,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>n.jsxs(n.Fragment,{children:[n.jsx(xH,{...h,ref:t,__scopeCheckbox:r}),m&&n.jsx(jH,{__scopeCheckbox:r})]})})});BE.displayName=J2;var vH="CheckboxIndicator",yH=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...i}=e,a=zE(vH,r);return n.jsx(hi,{present:s||ah(a.checked)||a.checked===!0,children:n.jsx(_t.span,{"data-state":wH(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});yH.displayName=vH;var bH="CheckboxBubbleInput",jH=x.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:p}=zE(bH,e),v=Gt(r,p),g=hx(a),y=L0(s);x.useEffect(()=>{const _=m;if(!_)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,P=!i.current;if(g!==a&&S){const C=new Event("click",{bubbles:P});_.indeterminate=ah(a),S.call(_,ah(a)?!1:a),_.dispatchEvent(C)}},[m,g,a,i]);const j=x.useRef(ah(a)?!1:a);return n.jsx(_t.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??j.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jH.displayName=bH;function Qye(e){return typeof e=="function"}function ah(e){return e==="indeterminate"}function wH(e){return ah(e)?"indeterminate":e?"checked":"unchecked"}const rm=x.forwardRef(({className:e,...t},r)=>n.jsx(BE,{ref:r,className:st("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(yH,{className:st("flex items-center justify-center text-current"),children:n.jsx(Mu,{className:"h-4 w-4"})})}));rm.displayName=BE.displayName;const e0e=({filters:e,onFilterChange:t,onResetFilters:r,parcelCount:s})=>{const[i,a]=x.useState(!1),[o,l]=x.useState({search:e.search||"",zone:e.zone||"all",status:e.status||"all",minPrice:e.minPrice||"",maxPrice:e.maxPrice||"",minArea:e.minArea||"",maxArea:e.maxArea||"",sortBy:e.sortBy||"date_desc",legalStatus:e.legalStatus||"all",serviced:e.serviced||!1,zoneType:e.zoneType||"all",ownerType:e.ownerType||"all"});x.useEffect(()=>{l({search:e.search||"",zone:e.zone||"all",status:e.status||"all",minPrice:e.minPrice||"",maxPrice:e.maxPrice||"",minArea:e.minArea||"",maxArea:e.maxArea||"",sortBy:e.sortBy||"date_desc",legalStatus:e.legalStatus||"all",serviced:e.serviced||!1,zoneType:e.zoneType||"all",ownerType:e.ownerType||"all"})},[e]);const c=_=>{const{name:w,value:A}=_.target;l(S=>({...S,[w]:A}))},u=(_,w)=>{l(A=>({...A,[_]:w}))},d=(_,w)=>{l(A=>({...A,[_]:w}))},h=()=>{t(o)},m=()=>{const _={search:"",zone:"all",status:"all",minPrice:"",maxPrice:"",minArea:"",maxArea:"",sortBy:"date_desc",legalStatus:"all",serviced:!1,zoneType:"all",ownerType:"all"};l(_),r?r():t(_)},p=["Dakar","This","Mbour","Saly","Diamniadio","Ziguinchor","Saint-Louis","Kaolack","Touba"],v=["Titre Foncier","Bail","Dlibration"],g=["Rsidentiel","Commercial","Agricole","Industriel","Mixte","Touristique"],y=["Particulier","Mairie","Promoteur","Investisseur","Bailleur"],j=[{value:"date_desc",label:"Plus rcents"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix dcroissant"},{value:"area_asc",label:"Surface croissante"},{value:"area_desc",label:"Surface dcroissante"}];return n.jsxs("aside",{className:"bg-card p-4 rounded-xl border shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-primary flex items-center",children:[n.jsx(jz,{className:"h-5 w-5 mr-2"})," Filtres & Tri"]}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>a(!i),className:"md:hidden",children:i?n.jsx(Ii,{className:"h-5 w-5"}):n.jsx(Wo,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:`${i?"block":"hidden"} md:block space-y-4`,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"search",className:"text-sm font-medium text-muted-foreground",children:"Recherche"}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx(De,{id:"search",name:"search",type:"search",placeholder:"Nom, rf, description...",value:o.search,onChange:c,className:"pl-10"}),n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"zone",className:"text-sm font-medium text-muted-foreground",children:"Zone"}),n.jsxs(Ft,{name:"zone",value:o.zone,onValueChange:_=>u("zone",_),children:[n.jsx(Dt,{id:"zone",className:"mt-1",children:n.jsx(zt,{placeholder:"Toutes les zones"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les zones"}),p.map(_=>n.jsx(Ke,{value:_,children:_},_))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"ownerType",className:"text-sm font-medium text-muted-foreground",children:"Type de Vendeur"}),n.jsxs(Ft,{name:"ownerType",value:o.ownerType,onValueChange:_=>u("ownerType",_),children:[n.jsx(Dt,{id:"ownerType",className:"mt-1",children:n.jsx(zt,{placeholder:"Tous types de vendeurs"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous types"}),y.map(_=>n.jsx(Ke,{value:_,children:_},_))]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"minPrice",className:"text-sm font-medium text-muted-foreground",children:"Prix Min (FCFA)"}),n.jsx(De,{id:"minPrice",name:"minPrice",type:"number",placeholder:"Ex: 5M",value:o.minPrice,onChange:c,className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"maxPrice",className:"text-sm font-medium text-muted-foreground",children:"Prix Max (FCFA)"}),n.jsx(De,{id:"maxPrice",name:"maxPrice",type:"number",placeholder:"Ex: 50M",value:o.maxPrice,onChange:c,className:"mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"minArea",className:"text-sm font-medium text-muted-foreground",children:"Surface Min (m)"}),n.jsx(De,{id:"minArea",name:"minArea",type:"number",placeholder:"Ex: 150",value:o.minArea,onChange:c,className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"maxArea",className:"text-sm font-medium text-muted-foreground",children:"Surface Max (m)"}),n.jsx(De,{id:"maxArea",name:"maxArea",type:"number",placeholder:"Ex: 1000",value:o.maxArea,onChange:c,className:"mt-1"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"legalStatus",className:"text-sm font-medium text-muted-foreground",children:"Statut Juridique"}),n.jsxs(Ft,{name:"legalStatus",value:o.legalStatus,onValueChange:_=>u("legalStatus",_),children:[n.jsx(Dt,{id:"legalStatus",className:"mt-1",children:n.jsx(zt,{placeholder:"Tous statuts"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous statuts"}),v.map(_=>n.jsx(Ke,{value:_,children:_},_))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"zoneType",className:"text-sm font-medium text-muted-foreground",children:"Type de Zone"}),n.jsxs(Ft,{name:"zoneType",value:o.zoneType,onValueChange:_=>u("zoneType",_),children:[n.jsx(Dt,{id:"zoneType",className:"mt-1",children:n.jsx(zt,{placeholder:"Tous types"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous types"}),g.map(_=>n.jsx(Ke,{value:_,children:_},_))]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[n.jsx(rm,{id:"serviced",checked:o.serviced,onCheckedChange:_=>d("serviced",_)}),n.jsx($e,{htmlFor:"serviced",className:"text-sm font-medium",children:"Terrain Viabilis"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sortBy",className:"text-sm font-medium text-muted-foreground",children:"Trier par"}),n.jsxs(Ft,{name:"sortBy",value:o.sortBy,onValueChange:_=>u("sortBy",_),children:[n.jsx(Dt,{id:"sortBy",className:"mt-1",children:n.jsx(zt,{placeholder:"Trier par"})}),n.jsx($t,{children:j.map(_=>n.jsx(Ke,{value:_.value,children:_.label},_.value))})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[n.jsx(Y,{onClick:h,className:"w-full flex-1",children:"Appliquer Filtres"}),n.jsxs(Y,{onClick:m,variant:"outline",className:"w-full flex-1",children:[n.jsx(Ii,{className:"h-4 w-4 mr-1.5"})," Rinitialiser"]})]}),s!==void 0&&n.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-3",children:[s," parcelle(s) correspondante(s)"]})]})]})};function Ct({className:e,...t}){return n.jsx("div",{className:st("animate-pulse rounded-md bg-muted",e),...t})}const t0e=()=>n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>n.jsxs(he,{className:"overflow-hidden",children:[n.jsx(Ct,{className:"aspect-video w-full"}),n.jsxs(ve,{className:"p-4",children:[n.jsx(Ct,{className:"h-6 w-3/4 mb-2"}),n.jsx(Ct,{className:"h-4 w-full mb-1"}),n.jsx(Ct,{className:"h-4 w-5/6 mb-3"}),n.jsx(Ct,{className:"h-4 w-1/2 mb-1"}),n.jsx(Ct,{className:"h-4 w-1/2"})]}),n.jsxs(Wn,{className:"p-4 border-t flex justify-between items-center",children:[n.jsx(Ct,{className:"h-6 w-1/3"}),n.jsx(Ct,{className:"h-9 w-1/4"})]})]},t))}),r0e=({onSearch:e,initialFilters:t})=>{const[r,s]=x.useState(t.search||""),[i,a]=x.useState(t.zone||"all"),o=["Dakar","This","Mbour","Saly","Diamniadio","Ziguinchor","Saint-Louis","Kaolack","Touba"],l=c=>{c.preventDefault(),e({search:r,zone:i})};return n.jsxs("div",{className:"relative bg-gradient-to-b from-background to-muted/40 pt-24 pb-16",children:[n.jsx("div",{className:"absolute inset-0 bg-grid-slate-900/[0.04] bg-[bottom_1px_center] dark:bg-grid-slate-400/[0.05] dark:bg-bottom-slate-700"}),n.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary tracking-tight",children:"Trouvez Votre Terrain Idal au Sngal"}),n.jsx("p",{className:"mt-3 max-w-2xl mx-auto text-lg text-muted-foreground",children:"Recherchez parmi des milliers de parcelles vrifies par nos experts et les mairies partenaires."})]}),n.jsxs(Ae.form,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},onSubmit:l,className:"max-w-3xl mx-auto bg-card p-4 rounded-xl shadow-lg border flex flex-col md:flex-row items-center gap-3",children:[n.jsxs("div",{className:"relative flex-grow w-full",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),n.jsx(De,{type:"search",placeholder:"Rechercher par rfrence, ville, quartier...",className:"pl-10 h-12 text-base",value:r,onChange:c=>s(c.target.value)})]}),n.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[n.jsxs("div",{className:"relative flex-grow w-full md:w-56",children:[n.jsx(jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),n.jsxs(Ft,{value:i,onValueChange:a,children:[n.jsx(Dt,{className:"pl-10 h-12 text-base",children:n.jsx(zt,{placeholder:"Toutes les villes"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les villes"}),o.map(c=>n.jsx(Ke,{value:c,children:c},c))]})]})]}),n.jsxs(Y,{type:"submit",size:"lg",className:"h-12 w-full md:w-auto",children:[n.jsx(wr,{className:"h-5 w-5 md:hidden"}),n.jsx("span",{className:"hidden md:inline",children:"Rechercher"})]})]})]})]})]})};var n0e=typeof Element<"u",s0e=typeof Map=="function",i0e=typeof Set=="function",a0e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function R1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!R1(e[s],t[s]))return!1;return!0}var a;if(s0e&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(s=a.next()).done;)if(!t.has(s.value[0]))return!1;for(a=e.entries();!(s=a.next()).done;)if(!R1(s.value[1],t.get(s.value[0])))return!1;return!0}if(i0e&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(s=a.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(a0e&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;if(n0e&&e instanceof Element)return!1;for(s=r;s--!==0;)if(!((i[s]==="_owner"||i[s]==="__v"||i[s]==="__o")&&e.$$typeof)&&!R1(e[i[s]],t[i[s]]))return!1;return!0}return e!==e&&t!==t}var o0e=function(t,r){try{return R1(t,r)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const l0e=Er(o0e);var c0e=function(e,t,r,s,i,a,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,s,i,a,o,l],d=0;c=new Error(t.replace(/%s/g,function(){return u[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},u0e=c0e;const fM=Er(u0e);var d0e=function(t,r,s,i){var a=s?s.call(i,t,r):void 0;if(a!==void 0)return!!a;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var o=Object.keys(t),l=Object.keys(r);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),u=0;u<o.length;u++){var d=o[u];if(!c(d))return!1;var h=t[d],m=r[d];if(a=s?s.call(i,h,m,d):void 0,a===!1||a===void 0&&h!==m)return!1}return!0};const h0e=Er(d0e);var _H=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(_H||{}),P5={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},mM=Object.values(_H),qE={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},f0e=Object.entries(qE).reduce((e,[t,r])=>(e[r]=t,e),{}),Sl="data-rh",Yp={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Jp=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const s=e[r];if(Object.prototype.hasOwnProperty.call(s,t))return s[t]}return null},m0e=e=>{let t=Jp(e,"title");const r=Jp(e,Yp.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const s=Jp(e,Yp.DEFAULT_TITLE);return t||s||void 0},p0e=e=>Jp(e,Yp.ON_CHANGE_CLIENT_STATE)||(()=>{}),C5=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,s)=>({...r,...s}),{}),g0e=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,s)=>{if(!r.length){const i=Object.keys(s);for(let a=0;a<i.length;a+=1){const l=i[a].toLowerCase();if(e.indexOf(l)!==-1&&s[l])return r.concat(s)}}return r},[]),x0e=e=>console&&typeof console.warn=="function"&&console.warn(e),av=(e,t,r)=>{const s={};return r.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&x0e(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,a)=>{const o={};a.filter(c=>{let u;const d=Object.keys(c);for(let m=0;m<d.length;m+=1){const p=d[m],v=p.toLowerCase();t.indexOf(v)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(v==="rel"&&c[v].toLowerCase()==="stylesheet")&&(u=v),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(u=p)}if(!u||!c[u])return!1;const h=c[u].toLowerCase();return s[u]||(s[u]={}),o[u]||(o[u]={}),s[u][h]?!1:(o[u][h]=!0,!0)}).reverse().forEach(c=>i.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const u=l[c],d={...s[u],...o[u]};s[u]=d}return i},[]).reverse()},v0e=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},y0e=e=>({baseTag:g0e(["href"],e),bodyAttributes:C5("bodyAttributes",e),defer:Jp(e,Yp.DEFER),encode:Jp(e,Yp.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:C5("htmlAttributes",e),linkTags:av("link",["rel","href"],e),metaTags:av("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:av("noscript",["innerHTML"],e),onChangeClientState:p0e(e),scriptTags:av("script",["src","innerHTML"],e),styleTags:av("style",["cssText"],e),title:m0e(e),titleAttributes:C5("titleAttributes",e),prioritizeSeoTags:v0e(e,Yp.PRIORITIZE_SEO_TAGS)}),NH=e=>Array.isArray(e)?e.join(""):e,b0e=(e,t)=>{const r=Object.keys(e);for(let s=0;s<r.length;s+=1)if(t[r[s]]&&t[r[s]].includes(e[r[s]]))return!0;return!1},k5=(e,t)=>Array.isArray(e)?e.reduce((r,s)=>(b0e(s,t)?r.priority.push(s):r.default.push(s),r),{priority:[],default:[]}):{default:e,priority:[]},pM=(e,t)=>({...e,[t]:void 0}),j0e=["noscript","script","style"],uP=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),SH=e=>Object.keys(e).reduce((t,r)=>{const s=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${s}`:s},""),w0e=(e,t,r,s)=>{const i=SH(r),a=NH(t);return i?`<${e} ${Sl}="true" ${i}>${uP(a,s)}</${e}>`:`<${e} ${Sl}="true">${uP(a,s)}</${e}>`},_0e=(e,t,r=!0)=>t.reduce((s,i)=>{const a=i,o=Object.keys(a).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const h=typeof a[d]>"u"?d:`${d}="${uP(a[d],r)}"`;return u?`${u} ${h}`:h},""),l=a.innerHTML||a.cssText||"",c=j0e.indexOf(e)===-1;return`${s}<${e} ${Sl}="true" ${o}${c?"/>":`>${l}</${e}>`}`},""),AH=(e,t={})=>Object.keys(e).reduce((r,s)=>{const i=qE[s];return r[i||s]=e[s],r},t),N0e=(e,t,r)=>{const s={key:t,[Sl]:!0},i=AH(r,s);return[we.createElement("title",i,t)]},D1=(e,t)=>t.map((r,s)=>{const i={key:s,[Sl]:!0};return Object.keys(r).forEach(a=>{const l=qE[a]||a;if(l==="innerHTML"||l==="cssText"){const c=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[l]=r[a]}),we.createElement(e,i)}),Mo=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>N0e(e,t.title,t.titleAttributes),toString:()=>w0e(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>AH(t),toString:()=>SH(t)};default:return{toComponent:()=>D1(e,t),toString:()=>_0e(e,t,r)}}},S0e=({metaTags:e,linkTags:t,scriptTags:r,encode:s})=>{const i=k5(e,P5.meta),a=k5(t,P5.link),o=k5(r,P5.script);return{priorityMethods:{toComponent:()=>[...D1("meta",i.priority),...D1("link",a.priority),...D1("script",o.priority)],toString:()=>`${Mo("meta",i.priority,s)} ${Mo("link",a.priority,s)} ${Mo("script",o.priority,s)}`},metaTags:i.default,linkTags:a.default,scriptTags:o.default}},A0e=e=>{const{baseTag:t,bodyAttributes:r,encode:s=!0,htmlAttributes:i,noscriptTags:a,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:u}=e;let{linkTags:d,metaTags:h,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:p,linkTags:d,metaTags:h,scriptTags:m}=S0e(e)),{priority:p,base:Mo("base",t,s),bodyAttributes:Mo("bodyAttributes",r,s),htmlAttributes:Mo("htmlAttributes",i,s),link:Mo("link",d,s),meta:Mo("meta",h,s),noscript:Mo("noscript",a,s),script:Mo("script",m,s),style:Mo("style",o,s),title:Mo("title",{title:l,titleAttributes:c},s)}},dP=A0e,Gb=[],PH=!!(typeof window<"u"&&window.document&&window.document.createElement),hP=class{constructor(e,t){Ga(this,"instances",[]);Ga(this,"canUseDOM",PH);Ga(this,"context");Ga(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Gb:this.instances,add:e=>{(this.canUseDOM?Gb:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Gb:this.instances).indexOf(e);(this.canUseDOM?Gb:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=dP({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},P0e={},CH=we.createContext(P0e),og,kH=(og=class extends x.Component{constructor(r){super(r);Ga(this,"helmetData");this.helmetData=new hP(this.props.context||{},og.canUseDOM)}render(){return we.createElement(CH.Provider,{value:this.helmetData.value},this.props.children)}},Ga(og,"canUseDOM",PH),og),ap=(e,t)=>{const r=document.head||document.querySelector("head"),s=r.querySelectorAll(`${e}[${Sl}]`),i=[].slice.call(s),a=[];let o;return t&&t.length&&t.forEach(l=>{const c=document.createElement(e);for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u))if(u==="innerHTML")c.innerHTML=l.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const d=u,h=typeof l[d]>"u"?"":l[d];c.setAttribute(u,h)}c.setAttribute(Sl,"true"),i.some((u,d)=>(o=d,c.isEqualNode(u)))?i.splice(o,1):a.push(c)}),i.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),a.forEach(l=>r.appendChild(l)),{oldTags:i,newTags:a}},fP=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const s=r.getAttribute(Sl),i=s?s.split(","):[],a=[...i],o=Object.keys(t);for(const l of o){const c=t[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),i.indexOf(l)===-1&&i.push(l);const u=a.indexOf(l);u!==-1&&a.splice(u,1)}for(let l=a.length-1;l>=0;l-=1)r.removeAttribute(a[l]);i.length===a.length?r.removeAttribute(Sl):r.getAttribute(Sl)!==o.join(",")&&r.setAttribute(Sl,o.join(","))},C0e=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=NH(e)),fP("title",t)},gM=(e,t)=>{const{baseTag:r,bodyAttributes:s,htmlAttributes:i,linkTags:a,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:u,styleTags:d,title:h,titleAttributes:m}=e;fP("body",s),fP("html",i),C0e(h,m);const p={baseTag:ap("base",r),linkTags:ap("link",a),metaTags:ap("meta",o),noscriptTags:ap("noscript",l),scriptTags:ap("script",u),styleTags:ap("style",d)},v={},g={};Object.keys(p).forEach(y=>{const{newTags:j,oldTags:_}=p[y];j.length&&(v[y]=j),_.length&&(g[y]=p[y].oldTags)}),t&&t(),c(e,v,g)},ov=null,k0e=e=>{ov&&cancelAnimationFrame(ov),e.defer?ov=requestAnimationFrame(()=>{gM(e,()=>{ov=null})}):(gM(e),ov=null)},E0e=k0e,xM=class extends x.Component{constructor(){super(...arguments);Ga(this,"rendered",!1)}shouldComponentUpdate(t){return!h0e(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let s=null;const i=y0e(t.get().map(a=>{const o={...a.props};return delete o.context,o}));kH.canUseDOM?E0e(i):dP&&(s=dP(i)),r(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},gS,Uo=(gS=class extends x.Component{shouldComponentUpdate(e){return!l0e(pM(this.props,"helmetData"),pM(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,s){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,s)}]}}mapObjectTypeChildren(e,t,r,s){switch(e.type){case"title":return{...t,[e.type]:s,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(s=>{r={...r,[s]:e[s]}}),r}warnOnInvalidChildren(e,t){return fM(mM.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${mM.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),fM(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return we.Children.forEach(e,s=>{if(!s||!s.props)return;const{children:i,...a}=s.props,o=Object.keys(a).reduce((c,u)=>(c[f0e[u]||u]=a[u],c),{});let{type:l}=s;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(s,i),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(s,r,o,i);break;default:t=this.mapObjectTypeChildren(s,t,o,i);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:s}=t;if(e&&(r=this.mapChildrenToProps(e,r)),s&&!(s instanceof hP)){const i=s;s=new hP(i.context,!0),delete r.helmetData}return s?we.createElement(xM,{...r,context:s.value}):we.createElement(CH.Consumer,null,i=>we.createElement(xM,{...r,context:i}))}},Ga(gS,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),gS);const T0e=()=>{const e=Di(),t=kn(),{toast:r}=pt(),[s,i]=x.useState([]),[a,o]=x.useState([]),[l,c]=x.useState(!0),[u,d]=x.useState(null),[h,m]=x.useState(!1),p=x.useMemo(()=>{const A=new URLSearchParams(e.search);return{search:A.get("search")||"",zone:A.get("zone")||"all",status:A.get("status")||"all",minPrice:A.get("minPrice")||"",maxPrice:A.get("maxPrice")||"",minArea:A.get("minArea")||"",maxArea:A.get("maxArea")||"",sortBy:A.get("sortBy")||"date_desc",legalStatus:A.get("legalStatus")||"all",serviced:A.get("serviced")==="true",verified:A.get("verified")==="true",zoneType:A.get("zoneType")||"all",ownerType:A.get("ownerType")||"all"}},[e.search]),[v,g]=x.useState(p);x.useEffect(()=>{(async()=>{c(!0),d(null);try{const S=await Je.getParcels();i(S||[])}catch(S){console.error("Erreur de chargement des parcelles:",S),d("Impossible de charger les parcelles pour le moment.")}finally{c(!1)}})()},[]),x.useEffect(()=>{let A=[...s];switch(v.search&&(A=A.filter(P=>P.name.toLowerCase().includes(v.search.toLowerCase())||P.reference.toLowerCase().includes(v.search.toLowerCase())||P.description&&P.description.toLowerCase().includes(v.search.toLowerCase()))),["zone","status","legalStatus","zoneType","ownerType"].forEach(P=>{v[P]&&v[P]!=="all"&&(A=A.filter(C=>P==="legalStatus"?C.documents.some(T=>T.name.includes(v[P])):C[P]===v[P]))}),v.serviced&&(A=A.filter(P=>P.description.toLowerCase().includes("viabilis"))),v.verified&&(A=A.filter(P=>P.verified)),v.minPrice&&(A=A.filter(P=>P.price>=parseFloat(v.minPrice))),v.maxPrice&&(A=A.filter(P=>P.price<=parseFloat(v.maxPrice))),v.minArea&&(A=A.filter(P=>P.area_sqm>=parseInt(v.minArea,10))),v.maxArea&&(A=A.filter(P=>P.area_sqm<=parseInt(v.maxArea,10))),v.sortBy){case"price_asc":A.sort((P,C)=>P.price-C.price);break;case"price_desc":A.sort((P,C)=>C.price-P.price);break;case"area_asc":A.sort((P,C)=>P.area_sqm-C.area_sqm);break;case"area_desc":A.sort((P,C)=>C.area_sqm-P.area_sqm);break;case"date_desc":default:A.sort((P,C)=>new Date(C.created_at)-new Date(P.created_at));break}o(A);const S=new URLSearchParams;Object.entries(v).forEach(([P,C])=>{C&&C!=="all"&&C!==!1&&C!==""&&S.set(P,C)}),t(`${e.pathname}?${S.toString()}`,{replace:!0})},[v,s,t,e.pathname]);const y=A=>{g(S=>({...S,...A}))},j=()=>{g({search:"",zone:"all",status:"all",minPrice:"",maxPrice:"",minArea:"",maxArea:"",sortBy:"date_desc",legalStatus:"all",serviced:!1,verified:!1,zoneType:"all",ownerType:"all"})},_=()=>{r({title:"Sauvegarder la Recherche",description:" Cette fonctionnalit est en cours de dveloppement. Bientt, vous pourrez sauvegarder vos critres et recevoir des alertes !",duration:5e3})},w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Terrains  Vendre au Sngal - Teranga Foncier"}),n.jsx("meta",{name:"description",content:"Parcourez notre catalogue de terrains et parcelles vrifis  vendre  Dakar, Saly, This et partout au Sngal. Filtrez par prix, surface et statut juridique."}),n.jsx("meta",{name:"keywords",content:"terrains  vendre, parcelles Sngal, immobilier Dakar, acheter terrain Saly, foncier This"}),n.jsx("link",{rel:"canonical",href:"https://www.terangafoncier.com/parcelles"})]}),n.jsxs("div",{className:"bg-muted/20",children:[n.jsx(r0e,{onSearch:y,initialFilters:v}),n.jsx("div",{className:"container mx-auto py-8 px-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[n.jsx("div",{className:`w-full md:w-1/3 lg:w-1/4 ${h?"block":"hidden md:block"}`,children:n.jsxs("div",{className:"sticky top-24",children:[n.jsx(e0e,{filters:v,onFilterChange:y,onResetFilters:j,parcelCount:a.length}),n.jsxs(he,{className:"mt-4 p-4 text-center bg-secondary/30",children:[n.jsxs(ke,{className:"text-base mb-2 flex items-center justify-center",children:[n.jsx(Ea,{className:"h-5 w-5 mr-2"}),"Besoin d'un terrain communal ?"]}),n.jsx(jt,{className:"text-xs mb-3",children:"Faites une demande directe auprs des mairies partenaires pour des parcelles spcifiques."}),n.jsx(Y,{asChild:!0,size:"sm",className:"w-full",children:n.jsx(dt,{to:"/request-municipal-land",children:"Faire une Demande"})})]})]})}),n.jsxs("div",{className:"w-full md:w-2/3 lg:w-3/4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:l?"Chargement...":`${a.length} parcelle(s) trouve(s).`}),n.jsxs("div",{className:"flex gap-2 flex-wrap justify-center",children:[n.jsxs(Y,{variant:"outline",onClick:()=>m(!h),className:"md:hidden",children:[n.jsx(jz,{className:"mr-2 h-4 w-4"})," ",h?"Cacher":"Afficher"," les Filtres"]}),n.jsxs(Y,{variant:"outline",onClick:_,children:[n.jsx(vk,{className:"mr-2 h-4 w-4"})," Sauvegarder"]}),n.jsx(Y,{variant:"default",asChild:!0,children:n.jsxs(dt,{to:"/map",children:[n.jsx(ox,{className:"mr-2 h-4 w-4"})," Carte"]})})]})]}),l?n.jsx(t0e,{}):u?n.jsxs("div",{className:"text-center py-10 text-red-600 bg-red-50 p-6 rounded-lg border border-red-200",children:[n.jsx(kr,{className:"h-12 w-12 mx-auto mb-3 text-red-500"}),n.jsx("p",{className:"text-lg font-medium",children:u}),n.jsx("p",{className:"text-sm",children:"Veuillez ressayer plus tard."})]}):a.length>0?n.jsx(Ae.div,{variants:w,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(A=>n.jsx(Zye,{parcel:A},A.id))}):n.jsxs("div",{className:"text-center py-16 bg-card rounded-lg border border-dashed border-border/70 shadow-sm",children:[n.jsx(wr,{className:"h-16 w-16 mx-auto text-muted-foreground/70 mb-5"}),n.jsx("h2",{className:"text-2xl font-semibold mb-2 text-foreground",children:"Aucune parcelle ne correspond  vos critres."}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Essayez d'ajuster vos filtres ou de rinitialiser la recherche."}),n.jsx(Y,{onClick:j,variant:"outline",children:"Rinitialiser les Filtres"})]})]})]})})]})]})},O0e=({images:e=[],parcelName:t,parcelId:r})=>{const s=e[0]||`Image principale pour ${t}`,i=e.length>1?e.slice(1,6):e.length===1?[]:[`Image miniature 1 pour ${t}`,`Image miniature 2 pour ${t}`,`Image miniature 3 pour ${t}`,`Image miniature 4 pour ${t}`];return n.jsx(he,{className:"overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:n.jsxs(ve,{className:"p-0",children:[n.jsx("div",{className:"aspect-video bg-muted group relative overflow-hidden",children:n.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-105",alt:s,src:"https://images.unsplash.com/photo-1542364041-2cada653f4ee"})}),i.length>0&&n.jsxs("div",{className:"p-2 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 border-t",children:[i.map((a,o)=>n.jsx("div",{className:"aspect-square bg-muted rounded overflow-hidden cursor-pointer ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 hover:opacity-90 transition-opacity",children:n.jsx("img",{className:"w-full h-full object-cover",alt:a,src:"https://images.unsplash.com/photo-1424169144302-13dcdec06242"})},o)),e.length>6&&n.jsxs("div",{className:"aspect-square bg-muted/50 rounded flex items-center justify-center text-xs text-muted-foreground border border-dashed",children:["+",e.length-i.length]})]})]})})},L0e=e=>typeof e!="number"||isNaN(e)?"Prix non disponible":new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),M0e=e=>{switch(e){case"Disponible":return"success";case"Rserve":return"warning";case"Vendue":return"destructive";default:return"secondary"}},I0e=e=>{switch(e){case"Vrifi":return"success";case"Partiellement Vrifi":return"warning";case"En attente":return"warning";case"Info Manquante":return"destructive";default:return"secondary"}},R0e=e=>{switch(e){case"Vrifi":return n.jsx(Qt,{className:"h-4 w-4 mr-1.5"});case"Partiellement Vrifi":return n.jsx(ds,{className:"h-4 w-4 mr-1.5"});case"En attente":return n.jsx(ln,{className:"h-4 w-4 mr-1.5"});case"Info Manquante":return n.jsx(ds,{className:"h-4 w-4 mr-1.5"});default:return n.jsx(ln,{className:"h-4 w-4 mr-1.5"})}},D0e=({parcel:e,isFavorite:t,isParcelInCompare:r,user:s,onToggleFavorite:i,onShare:a,onCompareChange:o})=>e?n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-1",children:[e.name," (",e.id,")"]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-muted-foreground mb-3",children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(jr,{className:"h-4 w-4 mr-1.5"})," ",e.zone]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(k0,{className:"h-4 w-4 mr-1.5"})," ",e.area," m"]}),n.jsx(Ge,{variant:M0e(e.status),children:e.status}),n.jsxs(Ge,{variant:I0e(e.documentStatus),className:"items-center",children:[R0e(e.documentStatus)," Statut Docs: ",e.documentStatus]})]}),n.jsx("p",{className:"text-3xl font-bold text-primary",children:L0e(e.price)})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 pt-2",children:[n.jsx(Y,{variant:"outline",size:"icon",onClick:i,title:t?"Retirer des favoris":"Ajouter aux favoris",children:n.jsx(Kp,{className:`h-5 w-5 ${t?"fill-red-500 text-red-500":""}`})}),n.jsx(Y,{variant:"outline",size:"icon",onClick:a,title:"Partager",children:n.jsx(yk,{className:"h-5 w-5"})}),s&&n.jsx(Y,{variant:"outline",size:"icon",asChild:!0,title:"Contacter l'agent",children:n.jsx(dt,{to:"/messaging",state:{parcelId:e.id,parcelName:e.name},children:n.jsx(Nh,{className:"h-5 w-5"})})}),n.jsxs("label",{htmlFor:`compare-detail-${e.id}`,className:"flex items-center gap-2 cursor-pointer p-2 border rounded-md bg-background hover:bg-muted transition-colors",children:[n.jsx(rm,{id:`compare-detail-${e.id}`,checked:r,onCheckedChange:o,className:"h-5 w-5","aria-label":"Comparer cette parcelle"}),n.jsx("span",{className:"text-sm font-medium",children:"Comparer"})]})]})]}):null,$0e=({description:e})=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Description"})}),n.jsx(ve,{children:n.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e})})]});function EH(e,t){const r=x.useRef(t);x.useEffect(function(){t!==r.current&&e.attributionControl!=null&&(r.current!=null&&e.attributionControl.removeAttribution(r.current),t!=null&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}const F0e=1;function z0e(e){return Object.freeze({__version:F0e,map:e})}function TH(e,t){return Object.freeze({...e,...t})}const OH=x.createContext(null),LH=OH.Provider;function Q2(){const e=x.useContext(OH);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function MH(e){function t(r,s){const{instance:i,context:a}=e(r).current;return x.useImperativeHandle(s,()=>i),r.children==null?null:we.createElement(LH,{value:a},r.children)}return x.forwardRef(t)}function B0e(e){function t(r,s){const[i,a]=x.useState(!1),{instance:o}=e(r,a).current;x.useImperativeHandle(s,()=>o),x.useEffect(function(){i&&o.update()},[o,i,r.children]);const l=o._contentNode;return l?wh.createPortal(r.children,l):null}return x.forwardRef(t)}function q0e(e){function t(r,s){const{instance:i}=e(r).current;return x.useImperativeHandle(s,()=>i),null}return x.forwardRef(t)}function VE(e,t){const r=x.useRef();x.useEffect(function(){return t!=null&&e.instance.on(t),r.current=t,function(){r.current!=null&&e.instance.off(r.current),r.current=null}},[e,t])}function e_(e,t){const r=e.pane??t.pane;return r?{...e,pane:r}:e}function V0e(e,t){return function(s,i){const a=Q2(),o=e(e_(s,a),a);return EH(a.map,s.attribution),VE(o.current,s.eventHandlers),t(o.current,a,s,i),o}}var mP={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,s){s(t)})(li,function(r){var s="1.9.4";function i(f){var b,k,D,H;for(k=1,D=arguments.length;k<D;k++){H=arguments[k];for(b in H)f[b]=H[b]}return f}var a=Object.create||function(){function f(){}return function(b){return f.prototype=b,new f}}();function o(f,b){var k=Array.prototype.slice;if(f.bind)return f.bind.apply(f,k.call(arguments,1));var D=k.call(arguments,2);return function(){return f.apply(b,D.length?D.concat(k.call(arguments)):arguments)}}var l=0;function c(f){return"_leaflet_id"in f||(f._leaflet_id=++l),f._leaflet_id}function u(f,b,k){var D,H,ce,Te;return Te=function(){D=!1,H&&(ce.apply(k,H),H=!1)},ce=function(){D?H=arguments:(f.apply(k,arguments),setTimeout(Te,b),D=!0)},ce}function d(f,b,k){var D=b[1],H=b[0],ce=D-H;return f===D&&k?f:((f-H)%ce+ce)%ce+H}function h(){return!1}function m(f,b){if(b===!1)return f;var k=Math.pow(10,b===void 0?6:b);return Math.round(f*k)/k}function p(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function v(f){return p(f).split(/\s+/)}function g(f,b){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?a(f.options):{});for(var k in b)f.options[k]=b[k];return f.options}function y(f,b,k){var D=[];for(var H in f)D.push(encodeURIComponent(k?H.toUpperCase():H)+"="+encodeURIComponent(f[H]));return(!b||b.indexOf("?")===-1?"?":"&")+D.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function _(f,b){return f.replace(j,function(k,D){var H=b[D];if(H===void 0)throw new Error("No value provided for variable "+k);return typeof H=="function"&&(H=H(b)),H})}var w=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function A(f,b){for(var k=0;k<f.length;k++)if(f[k]===b)return k;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var C=0;function T(f){var b=+new Date,k=Math.max(0,16-(b-C));return C=b+k,window.setTimeout(f,k)}var M=window.requestAnimationFrame||P("RequestAnimationFrame")||T,z=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function O(f,b,k){if(k&&M===T)f.call(b);else return M.call(window,o(f,b))}function I(f){f&&z.call(window,f)}var q={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:c,throttle:u,wrapNum:d,falseFn:h,formatNum:m,trim:p,splitWords:v,setOptions:g,getParamString:y,template:_,isArray:w,indexOf:A,emptyImageUrl:S,requestFn:M,cancelFn:z,requestAnimFrame:O,cancelAnimFrame:I};function F(){}F.extend=function(f){var b=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},k=b.__super__=this.prototype,D=a(k);D.constructor=b,b.prototype=D;for(var H in this)Object.prototype.hasOwnProperty.call(this,H)&&H!=="prototype"&&H!=="__super__"&&(b[H]=this[H]);return f.statics&&i(b,f.statics),f.includes&&(W(f.includes),i.apply(null,[D].concat(f.includes))),i(D,f),delete D.statics,delete D.includes,D.options&&(D.options=k.options?a(k.options):{},i(D.options,f.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){k.callInitHooks&&k.callInitHooks.call(this),this._initHooksCalled=!0;for(var ce=0,Te=D._initHooks.length;ce<Te;ce++)D._initHooks[ce].call(this)}},b},F.include=function(f){var b=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=b,this.mergeOptions(f.options)),this},F.mergeOptions=function(f){return i(this.prototype.options,f),this},F.addInitHook=function(f){var b=Array.prototype.slice.call(arguments,1),k=typeof f=="function"?f:function(){this[f].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(k),this};function W(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=w(f)?f:[f];for(var b=0;b<f.length;b++)f[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(f,b,k){if(typeof f=="object")for(var D in f)this._on(D,f[D],b);else{f=v(f);for(var H=0,ce=f.length;H<ce;H++)this._on(f[H],b,k)}return this},off:function(f,b,k){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var D in f)this._off(D,f[D],b);else{f=v(f);for(var H=arguments.length===1,ce=0,Te=f.length;ce<Te;ce++)H?this._off(f[ce]):this._off(f[ce],b,k)}return this},_on:function(f,b,k,D){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(f,b,k)===!1){k===this&&(k=void 0);var H={fn:b,ctx:k};D&&(H.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(H)}},_off:function(f,b,k){var D,H,ce;if(this._events&&(D=this._events[f],!!D)){if(arguments.length===1){if(this._firingCount)for(H=0,ce=D.length;H<ce;H++)D[H].fn=h;delete this._events[f];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var Te=this._listens(f,b,k);if(Te!==!1){var Ue=D[Te];this._firingCount&&(Ue.fn=h,this._events[f]=D=D.slice()),D.splice(Te,1)}}},fire:function(f,b,k){if(!this.listens(f,k))return this;var D=i({},b,{type:f,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var H=this._events[f];if(H){this._firingCount=this._firingCount+1||1;for(var ce=0,Te=H.length;ce<Te;ce++){var Ue=H[ce],Ze=Ue.fn;Ue.once&&this.off(f,Ze,Ue.ctx),Ze.call(Ue.ctx||this,D)}this._firingCount--}}return k&&this._propagateEvent(D),this},listens:function(f,b,k,D){typeof f!="string"&&console.warn('"string" type argument expected');var H=b;typeof b!="function"&&(D=!!b,H=void 0,k=void 0);var ce=this._events&&this._events[f];if(ce&&ce.length&&this._listens(f,H,k)!==!1)return!0;if(D){for(var Te in this._eventParents)if(this._eventParents[Te].listens(f,b,k,D))return!0}return!1},_listens:function(f,b,k){if(!this._events)return!1;var D=this._events[f]||[];if(!b)return!!D.length;k===this&&(k=void 0);for(var H=0,ce=D.length;H<ce;H++)if(D[H].fn===b&&D[H].ctx===k)return H;return!1},once:function(f,b,k){if(typeof f=="object")for(var D in f)this._on(D,f[D],b,!0);else{f=v(f);for(var H=0,ce=f.length;H<ce;H++)this._on(f[H],b,k,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[c(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[c(f)],this},_propagateEvent:function(f){for(var b in this._eventParents)this._eventParents[b].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var ne=F.extend(V);function G(f,b,k){this.x=k?Math.round(f):f,this.y=k?Math.round(b):b}var K=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(f){return this.clone()._add(ee(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(ee(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new G(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new G(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(f){f=ee(f);var b=f.x-this.x,k=f.y-this.y;return Math.sqrt(b*b+k*k)},equals:function(f){return f=ee(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=ee(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function ee(f,b,k){return f instanceof G?f:w(f)?new G(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new G(f.x,f.y):new G(f,b,k)}function xe(f,b){if(f)for(var k=b?[f,b]:f,D=0,H=k.length;D<H;D++)this.extend(k[D])}xe.prototype={extend:function(f){var b,k;if(!f)return this;if(f instanceof G||typeof f[0]=="number"||"x"in f)b=k=ee(f);else if(f=B(f),b=f.min,k=f.max,!b||!k)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=k.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(k.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(k.y,this.max.y)),this},getCenter:function(f){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var b,k;return typeof f[0]=="number"||f instanceof G?f=ee(f):f=B(f),f instanceof xe?(b=f.min,k=f.max):b=k=f,b.x>=this.min.x&&k.x<=this.max.x&&b.y>=this.min.y&&k.y<=this.max.y},intersects:function(f){f=B(f);var b=this.min,k=this.max,D=f.min,H=f.max,ce=H.x>=b.x&&D.x<=k.x,Te=H.y>=b.y&&D.y<=k.y;return ce&&Te},overlaps:function(f){f=B(f);var b=this.min,k=this.max,D=f.min,H=f.max,ce=H.x>b.x&&D.x<k.x,Te=H.y>b.y&&D.y<k.y;return ce&&Te},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var b=this.min,k=this.max,D=Math.abs(b.x-k.x)*f,H=Math.abs(b.y-k.y)*f;return B(ee(b.x-D,b.y-H),ee(k.x+D,k.y+H))},equals:function(f){return f?(f=B(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function B(f,b){return!f||f instanceof xe?f:new xe(f,b)}function X(f,b){if(f)for(var k=b?[f,b]:f,D=0,H=k.length;D<H;D++)this.extend(k[D])}X.prototype={extend:function(f){var b=this._southWest,k=this._northEast,D,H;if(f instanceof me)D=f,H=f;else if(f instanceof X){if(D=f._southWest,H=f._northEast,!D||!H)return this}else return f?this.extend(ye(f)||ie(f)):this;return!b&&!k?(this._southWest=new me(D.lat,D.lng),this._northEast=new me(H.lat,H.lng)):(b.lat=Math.min(D.lat,b.lat),b.lng=Math.min(D.lng,b.lng),k.lat=Math.max(H.lat,k.lat),k.lng=Math.max(H.lng,k.lng)),this},pad:function(f){var b=this._southWest,k=this._northEast,D=Math.abs(b.lat-k.lat)*f,H=Math.abs(b.lng-k.lng)*f;return new X(new me(b.lat-D,b.lng-H),new me(k.lat+D,k.lng+H))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof me||"lat"in f?f=ye(f):f=ie(f);var b=this._southWest,k=this._northEast,D,H;return f instanceof X?(D=f.getSouthWest(),H=f.getNorthEast()):D=H=f,D.lat>=b.lat&&H.lat<=k.lat&&D.lng>=b.lng&&H.lng<=k.lng},intersects:function(f){f=ie(f);var b=this._southWest,k=this._northEast,D=f.getSouthWest(),H=f.getNorthEast(),ce=H.lat>=b.lat&&D.lat<=k.lat,Te=H.lng>=b.lng&&D.lng<=k.lng;return ce&&Te},overlaps:function(f){f=ie(f);var b=this._southWest,k=this._northEast,D=f.getSouthWest(),H=f.getNorthEast(),ce=H.lat>b.lat&&D.lat<k.lat,Te=H.lng>b.lng&&D.lng<k.lng;return ce&&Te},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,b){return f?(f=ie(f),this._southWest.equals(f.getSouthWest(),b)&&this._northEast.equals(f.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(f,b){return f instanceof X?f:new X(f,b)}function me(f,b,k){if(isNaN(f)||isNaN(b))throw new Error("Invalid LatLng object: ("+f+", "+b+")");this.lat=+f,this.lng=+b,k!==void 0&&(this.alt=+k)}me.prototype={equals:function(f,b){if(!f)return!1;f=ye(f);var k=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return k<=(b===void 0?1e-9:b)},toString:function(f){return"LatLng("+m(this.lat,f)+", "+m(this.lng,f)+")"},distanceTo:function(f){return le.distance(this,ye(f))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(f){var b=180*f/40075017,k=b/Math.cos(Math.PI/180*this.lat);return ie([this.lat-b,this.lng-k],[this.lat+b,this.lng+k])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function ye(f,b,k){return f instanceof me?f:w(f)&&typeof f[0]!="object"?f.length===3?new me(f[0],f[1],f[2]):f.length===2?new me(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new me(f.lat,"lng"in f?f.lng:f.lon,f.alt):b===void 0?null:new me(f,b,k)}var Ne={latLngToPoint:function(f,b){var k=this.projection.project(f),D=this.scale(b);return this.transformation._transform(k,D)},pointToLatLng:function(f,b){var k=this.scale(b),D=this.transformation.untransform(f,k);return this.projection.unproject(D)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var b=this.projection.bounds,k=this.scale(f),D=this.transformation.transform(b.min,k),H=this.transformation.transform(b.max,k);return new xe(D,H)},infinite:!1,wrapLatLng:function(f){var b=this.wrapLng?d(f.lng,this.wrapLng,!0):f.lng,k=this.wrapLat?d(f.lat,this.wrapLat,!0):f.lat,D=f.alt;return new me(k,b,D)},wrapLatLngBounds:function(f){var b=f.getCenter(),k=this.wrapLatLng(b),D=b.lat-k.lat,H=b.lng-k.lng;if(D===0&&H===0)return f;var ce=f.getSouthWest(),Te=f.getNorthEast(),Ue=new me(ce.lat-D,ce.lng-H),Ze=new me(Te.lat-D,Te.lng-H);return new X(Ue,Ze)}},le=i({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(f,b){var k=Math.PI/180,D=f.lat*k,H=b.lat*k,ce=Math.sin((b.lat-f.lat)*k/2),Te=Math.sin((b.lng-f.lng)*k/2),Ue=ce*ce+Math.cos(D)*Math.cos(H)*Te*Te,Ze=2*Math.atan2(Math.sqrt(Ue),Math.sqrt(1-Ue));return this.R*Ze}}),Q=6378137,J={R:Q,MAX_LATITUDE:85.0511287798,project:function(f){var b=Math.PI/180,k=this.MAX_LATITUDE,D=Math.max(Math.min(k,f.lat),-k),H=Math.sin(D*b);return new G(this.R*f.lng*b,this.R*Math.log((1+H)/(1-H))/2)},unproject:function(f){var b=180/Math.PI;return new me((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*b,f.x*b/this.R)},bounds:function(){var f=Q*Math.PI;return new xe([-f,-f],[f,f])}()};function se(f,b,k,D){if(w(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=b,this._c=k,this._d=D}se.prototype={transform:function(f,b){return this._transform(f.clone(),b)},_transform:function(f,b){return b=b||1,f.x=b*(this._a*f.x+this._b),f.y=b*(this._c*f.y+this._d),f},untransform:function(f,b){return b=b||1,new G((f.x/b-this._b)/this._a,(f.y/b-this._d)/this._c)}};function Z(f,b,k,D){return new se(f,b,k,D)}var je=i({},le,{code:"EPSG:3857",projection:J,transformation:function(){var f=.5/(Math.PI*J.R);return Z(f,.5,-f,.5)}()}),Ee=i({},je,{code:"EPSG:900913"});function Pe(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function de(f,b){var k="",D,H,ce,Te,Ue,Ze;for(D=0,ce=f.length;D<ce;D++){for(Ue=f[D],H=0,Te=Ue.length;H<Te;H++)Ze=Ue[H],k+=(H?"L":"M")+Ze.x+" "+Ze.y;k+=b?St.svg?"z":"x":""}return k||"M0 0"}var be=document.documentElement.style,Ve="ActiveXObject"in window,ze=Ve&&!document.addEventListener,Xe="msLaunchUri"in navigator&&!("documentMode"in document),et=Fr("webkit"),ge=Fr("android"),Oe=Fr("android 2")||Fr("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),nt=ge&&Fr("Google")&&it<537&&!("AudioNode"in window),wt=!!window.opera,mt=!Xe&&Fr("chrome"),or=Fr("gecko")&&!et&&!wt&&!Ve,It=!mt&&Fr("safari"),Ut=Fr("phantom"),bt="OTransition"in be,cn=navigator.platform.indexOf("Win")===0,xr=Ve&&"transition"in be,Dr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,ur="MozPerspective"in be,Wr=!window.L_DISABLE_3D&&(xr||Dr||ur)&&!bt&&!Ut,fi=typeof orientation<"u"||Fr("mobile"),Mr=fi&&et,qc=fi&&Dr,jn=!window.PointerEvent&&window.MSPointerEvent,ca=!!(window.PointerEvent||jn),mo="ontouchstart"in window||!!window.TouchEvent,En=!window.L_NO_TOUCH&&(mo||ca),rr=fi&&wt,Ir=fi&&or,Vc=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_s=function(){var f=!1;try{var b=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",h,b),window.removeEventListener("testPassiveEventSupport",h,b)}catch{}return f}(),po=function(){return!!document.createElement("canvas").getContext}(),ua=!!(document.createElementNS&&Pe("svg").createSVGRect),Ht=!!ua&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fa=!ua&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var b=f.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch{return!1}}(),go=navigator.platform.indexOf("Mac")===0,mi=navigator.platform.indexOf("Linux")===0;function Fr(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var St={ie:Ve,ielt9:ze,edge:Xe,webkit:et,android:ge,android23:Oe,androidStock:nt,opera:wt,chrome:mt,gecko:or,safari:It,phantom:Ut,opera12:bt,win:cn,ie3d:xr,webkit3d:Dr,gecko3d:ur,any3d:Wr,mobile:fi,mobileWebkit:Mr,mobileWebkit3d:qc,msPointer:jn,pointer:ca,touch:En,touchNative:mo,mobileOpera:rr,mobileGecko:Ir,retina:Vc,passiveEvents:_s,canvas:po,svg:ua,vml:Fa,inlineSvg:Ht,mac:go,linux:mi},pi=St.msPointer?"MSPointerDown":"pointerdown",Uc=St.msPointer?"MSPointerMove":"pointermove",xo=St.msPointer?"MSPointerUp":"pointerup",da=St.msPointer?"MSPointerCancel":"pointercancel",$i={touchstart:pi,touchmove:Uc,touchend:xo,touchcancel:da},ha={touchstart:Mx,touchmove:Gc,touchend:Gc,touchcancel:Gc},Qs={},Fi=!1;function vo(f,b,k){return b==="touchstart"&&nd(),ha[b]?(k=ha[b].bind(this,k),f.addEventListener($i[b],k,!1),k):(console.warn("wrong event specified:",b),h)}function Hc(f,b,k){if(!$i[b]){console.warn("wrong event specified:",b);return}f.removeEventListener($i[b],k,!1)}function td(f){Qs[f.pointerId]=f}function rd(f){Qs[f.pointerId]&&(Qs[f.pointerId]=f)}function Wc(f){delete Qs[f.pointerId]}function nd(){Fi||(document.addEventListener(pi,td,!0),document.addEventListener(Uc,rd,!0),document.addEventListener(xo,Wc,!0),document.addEventListener(da,Wc,!0),Fi=!0)}function Gc(f,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var k in Qs)b.touches.push(Qs[k]);b.changedTouches=[b],f(b)}}function Mx(f,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&In(b),Gc(f,b)}function Ix(f){var b={},k,D;for(D in f)k=f[D],b[D]=k&&k.bind?k.bind(f):k;return f=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var sd=200;function Cm(f,b){f.addEventListener("dblclick",b);var k=0,D;function H(ce){if(ce.detail!==1){D=ce.detail;return}if(!(ce.pointerType==="mouse"||ce.sourceCapabilities&&!ce.sourceCapabilities.firesTouchEvents)){var Te=tl(ce);if(!(Te.some(function(Ze){return Ze instanceof HTMLLabelElement&&Ze.attributes.for})&&!Te.some(function(Ze){return Ze instanceof HTMLInputElement||Ze instanceof HTMLSelectElement}))){var Ue=Date.now();Ue-k<=sd?(D++,D===2&&b(Ix(ce))):D=1,k=Ue}}}return f.addEventListener("click",H),{dblclick:b,simDblclick:H}}function Rx(f,b){f.removeEventListener("dblclick",b.dblclick),f.removeEventListener("click",b.simDblclick)}var Kc=id(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zc=id(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Rh=Zc==="webkitTransition"||Zc==="OTransition"?Zc+"End":"transitionend";function km(f){return typeof f=="string"?document.getElementById(f):f}function yo(f,b){var k=f.style[b]||f.currentStyle&&f.currentStyle[b];if((!k||k==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(f,null);k=D?D[b]:null}return k==="auto"?null:k}function Nr(f,b,k){var D=document.createElement(f);return D.className=b||"",k&&k.appendChild(D),D}function lr(f){var b=f.parentNode;b&&b.removeChild(f)}function Xc(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Xo(f){var b=f.parentNode;b&&b.lastChild!==f&&b.appendChild(f)}function Yo(f){var b=f.parentNode;b&&b.firstChild!==f&&b.insertBefore(f,b.firstChild)}function Yc(f,b){if(f.classList!==void 0)return f.classList.contains(b);var k=Ns(f);return k.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(k)}function dr(f,b){if(f.classList!==void 0)for(var k=v(b),D=0,H=k.length;D<H;D++)f.classList.add(k[D]);else if(!Yc(f,b)){var ce=Ns(f);Vl(f,(ce?ce+" ":"")+b)}}function Tr(f,b){f.classList!==void 0?f.classList.remove(b):Vl(f,p((" "+Ns(f)+" ").replace(" "+b+" "," ")))}function Vl(f,b){f.className.baseVal===void 0?f.className=b:f.className.baseVal=b}function Ns(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function Fs(f,b){"opacity"in f.style?f.style.opacity=b:"filter"in f.style&&Em(f,b)}function Em(f,b){var k=!1,D="DXImageTransform.Microsoft.Alpha";try{k=f.filters.item(D)}catch{if(b===1)return}b=Math.round(b*100),k?(k.Enabled=b!==100,k.Opacity=b):f.style.filter+=" progid:"+D+"(opacity="+b+")"}function id(f){for(var b=document.documentElement.style,k=0;k<f.length;k++)if(f[k]in b)return f[k];return!1}function bo(f,b,k){var D=b||new G(0,0);f.style[Kc]=(St.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(k?" scale("+k+")":"")}function Tn(f,b){f._leaflet_pos=b,St.any3d?bo(f,b):(f.style.left=b.x+"px",f.style.top=b.y+"px")}function jo(f){return f._leaflet_pos||new G(0,0)}var Jc,Jo,Dh;if("onselectstart"in document)Jc=function(){nr(window,"selectstart",In)},Jo=function(){vr(window,"selectstart",In)};else{var Qc=id(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jc=function(){if(Qc){var f=document.documentElement.style;Dh=f[Qc],f[Qc]="none"}},Jo=function(){Qc&&(document.documentElement.style[Qc]=Dh,Dh=void 0)}}function $h(){nr(window,"dragstart",In)}function za(){vr(window,"dragstart",In)}var Qo,Ul;function ad(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(ss(),Qo=f,Ul=f.style.outlineStyle,f.style.outlineStyle="none",nr(window,"keydown",ss))}function ss(){Qo&&(Qo.style.outlineStyle=Ul,Qo=void 0,Ul=void 0,vr(window,"keydown",ss))}function Tm(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function od(f){var b=f.getBoundingClientRect();return{x:b.width/f.offsetWidth||1,y:b.height/f.offsetHeight||1,boundingClientRect:b}}var er={__proto__:null,TRANSFORM:Kc,TRANSITION:Zc,TRANSITION_END:Rh,get:km,getStyle:yo,create:Nr,remove:lr,empty:Xc,toFront:Xo,toBack:Yo,hasClass:Yc,addClass:dr,removeClass:Tr,setClass:Vl,getClass:Ns,setOpacity:Fs,testProp:id,setTransform:bo,setPosition:Tn,getPosition:jo,get disableTextSelection(){return Jc},get enableTextSelection(){return Jo},disableImageDrag:$h,enableImageDrag:za,preventOutline:ad,restoreOutline:ss,getSizedParentNode:Tm,getScale:od};function nr(f,b,k,D){if(b&&typeof b=="object")for(var H in b)Hl(f,H,b[H],k);else{b=v(b);for(var ce=0,Te=b.length;ce<Te;ce++)Hl(f,b[ce],k,D)}return this}var fa="_leaflet_events";function vr(f,b,k,D){if(arguments.length===1)Fh(f),delete f[fa];else if(b&&typeof b=="object")for(var H in b)eu(f,H,b[H],k);else if(b=v(b),arguments.length===2)Fh(f,function(Ue){return A(b,Ue)!==-1});else for(var ce=0,Te=b.length;ce<Te;ce++)eu(f,b[ce],k,D);return this}function Fh(f,b){for(var k in f[fa]){var D=k.split(/\d/)[0];(!b||b(D))&&eu(f,D,null,null,k)}}var ld={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Hl(f,b,k,D){var H=b+c(k)+(D?"_"+c(D):"");if(f[fa]&&f[fa][H])return this;var ce=function(Ue){return k.call(D||f,Ue||window.event)},Te=ce;!St.touchNative&&St.pointer&&b.indexOf("touch")===0?ce=vo(f,b,ce):St.touch&&b==="dblclick"?ce=Cm(f,ce):"addEventListener"in f?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?f.addEventListener(ld[b]||b,ce,St.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(ce=function(Ue){Ue=Ue||window.event,Wl(f,Ue)&&Te(Ue)},f.addEventListener(ld[b],ce,!1)):f.addEventListener(b,Te,!1):f.attachEvent("on"+b,ce),f[fa]=f[fa]||{},f[fa][H]=ce}function eu(f,b,k,D,H){H=H||b+c(k)+(D?"_"+c(D):"");var ce=f[fa]&&f[fa][H];if(!ce)return this;!St.touchNative&&St.pointer&&b.indexOf("touch")===0?Hc(f,b,ce):St.touch&&b==="dblclick"?Rx(f,ce):"removeEventListener"in f?f.removeEventListener(ld[b]||b,ce,!1):f.detachEvent("on"+b,ce),f[fa][H]=null}function el(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function zh(f){return Hl(f,"wheel",el),this}function tu(f){return nr(f,"mousedown touchstart dblclick contextmenu",el),f._leaflet_disable_click=!0,this}function In(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function zi(f){return In(f),el(f),this}function tl(f){if(f.composedPath)return f.composedPath();for(var b=[],k=f.target;k;)b.push(k),k=k.parentNode;return b}function Om(f,b){if(!b)return new G(f.clientX,f.clientY);var k=od(b),D=k.boundingClientRect;return new G((f.clientX-D.left)/k.x-b.clientLeft,(f.clientY-D.top)/k.y-b.clientTop)}var ru=St.linux&&St.chrome?window.devicePixelRatio:St.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function cd(f){return St.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/ru:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Wl(f,b){var k=b.relatedTarget;if(!k)return!0;try{for(;k&&k!==f;)k=k.parentNode}catch{return!1}return k!==f}var Lm={__proto__:null,on:nr,off:vr,stopPropagation:el,disableScrollPropagation:zh,disableClickPropagation:tu,preventDefault:In,stop:zi,getPropagationPath:tl,getMousePosition:Om,getWheelDelta:cd,isExternalTarget:Wl,addListener:nr,removeListener:vr},Bh=ne.extend({run:function(f,b,k,D){this.stop(),this._el=f,this._inProgress=!0,this._duration=k||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=jo(f),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(f){var b=+new Date-this._startTime,k=this._duration*1e3;b<k?this._runFrame(this._easeOut(b/k),f):(this._runFrame(1),this._complete())},_runFrame:function(f,b){var k=this._startPos.add(this._offset.multiplyBy(f));b&&k._round(),Tn(this._el,k),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),gr=ne.extend({options:{crs:je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,b){b=g(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(ye(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zc&&St.any3d&&!St.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nr(this._proxy,Rh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,b,k){if(b=b===void 0?this._zoom:this._limitZoom(b),f=this._limitCenter(ye(f),b,this.options.maxBounds),k=k||{},this._stop(),this._loaded&&!k.reset&&k!==!0){k.animate!==void 0&&(k.zoom=i({animate:k.animate},k.zoom),k.pan=i({animate:k.animate,duration:k.duration},k.pan));var D=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,b,k.zoom):this._tryAnimatedPan(f,k.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(f,b,k.pan&&k.pan.noMoveStart),this},setZoom:function(f,b){return this._loaded?this.setView(this.getCenter(),f,{zoom:b}):(this._zoom=f,this)},zoomIn:function(f,b){return f=f||(St.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,b)},zoomOut:function(f,b){return f=f||(St.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,b)},setZoomAround:function(f,b,k){var D=this.getZoomScale(b),H=this.getSize().divideBy(2),ce=f instanceof G?f:this.latLngToContainerPoint(f),Te=ce.subtract(H).multiplyBy(1-1/D),Ue=this.containerPointToLatLng(H.add(Te));return this.setView(Ue,b,{zoom:k})},_getBoundsCenterZoom:function(f,b){b=b||{},f=f.getBounds?f.getBounds():ie(f);var k=ee(b.paddingTopLeft||b.padding||[0,0]),D=ee(b.paddingBottomRight||b.padding||[0,0]),H=this.getBoundsZoom(f,!1,k.add(D));if(H=typeof b.maxZoom=="number"?Math.min(b.maxZoom,H):H,H===1/0)return{center:f.getCenter(),zoom:H};var ce=D.subtract(k).divideBy(2),Te=this.project(f.getSouthWest(),H),Ue=this.project(f.getNorthEast(),H),Ze=this.unproject(Te.add(Ue).divideBy(2).add(ce),H);return{center:Ze,zoom:H}},fitBounds:function(f,b){if(f=ie(f),!f.isValid())throw new Error("Bounds are not valid.");var k=this._getBoundsCenterZoom(f,b);return this.setView(k.center,k.zoom,b)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,b){return this.setView(f,this._zoom,{pan:b})},panBy:function(f,b){if(f=ee(f).round(),b=b||{},!f.x&&!f.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Bh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){dr(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,k,b.duration||.25,b.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,b,k){if(k=k||{},k.animate===!1||!St.any3d)return this.setView(f,b,k);this._stop();var D=this.project(this.getCenter()),H=this.project(f),ce=this.getSize(),Te=this._zoom;f=ye(f),b=b===void 0?Te:b;var Ue=Math.max(ce.x,ce.y),Ze=Ue*this.getZoomScale(Te,b),ct=H.distanceTo(D)||1,kt=1.42,qt=kt*kt;function pr(Xr){var ni=Xr?-1:1,aN=Xr?Ze:Ue,oN=Ze*Ze-Ue*Ue+ni*qt*qt*ct*ct,Q0=2*aN*qt*ct,Hm=oN/Q0,Bx=Math.sqrt(Hm*Hm+1)-Hm,eb=Bx<1e-9?-18:Math.log(Bx);return eb}function ri(Xr){return(Math.exp(Xr)-Math.exp(-Xr))/2}function as(Xr){return(Math.exp(Xr)+Math.exp(-Xr))/2}function va(Xr){return ri(Xr)/as(Xr)}var yi=pr(0);function bd(Xr){return Ue*(as(yi)/as(yi+kt*Xr))}function sN(Xr){return Ue*(as(yi)*va(yi+kt*Xr)-ri(yi))/qt}function nc(Xr){return 1-Math.pow(1-Xr,1.5)}var Ua=Date.now(),Po=(pr(1)-yi)/kt,iN=k.duration?1e3*k.duration:1e3*Po*.8;function zx(){var Xr=(Date.now()-Ua)/iN,ni=nc(Xr)*Po;Xr<=1?(this._flyToFrame=O(zx,this),this._move(this.unproject(D.add(H.subtract(D).multiplyBy(sN(ni)/ct)),Te),this.getScaleZoom(Ue/bd(ni),Te),{flyTo:!0})):this._move(f,b)._moveEnd(!0)}return this._moveStart(!0,k.noMoveStart),zx.call(this),this},flyToBounds:function(f,b){var k=this._getBoundsCenterZoom(f,b);return this.flyTo(k.center,k.zoom,b)},setMaxBounds:function(f){return f=ie(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var b=this.options.minZoom;return this.options.minZoom=f,this._loaded&&b!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var b=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&b!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,b){this._enforcingBounds=!0;var k=this.getCenter(),D=this._limitCenter(k,this._zoom,ie(f));return k.equals(D)||this.panTo(D,b),this._enforcingBounds=!1,this},panInside:function(f,b){b=b||{};var k=ee(b.paddingTopLeft||b.padding||[0,0]),D=ee(b.paddingBottomRight||b.padding||[0,0]),H=this.project(this.getCenter()),ce=this.project(f),Te=this.getPixelBounds(),Ue=B([Te.min.add(k),Te.max.subtract(D)]),Ze=Ue.getSize();if(!Ue.contains(ce)){this._enforcingBounds=!0;var ct=ce.subtract(Ue.getCenter()),kt=Ue.extend(ce).getSize().subtract(Ze);H.x+=ct.x<0?-kt.x:kt.x,H.y+=ct.y<0?-kt.y:kt.y,this.panTo(this.unproject(H),b),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var k=this.getSize(),D=b.divideBy(2).round(),H=k.divideBy(2).round(),ce=D.subtract(H);return!ce.x&&!ce.y?this:(f.animate&&f.pan?this.panBy(ce):(f.pan&&this._rawPanBy(ce),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:k}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=o(this._handleGeolocationResponse,this),k=o(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,k,f):navigator.geolocation.getCurrentPosition(b,k,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var b=f.code,k=f.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+k+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var b=f.coords.latitude,k=f.coords.longitude,D=new me(b,k),H=D.toBounds(f.coords.accuracy*2),ce=this._locateOptions;if(ce.setView){var Te=this.getBoundsZoom(H);this.setView(D,ce.maxZoom?Math.min(Te,ce.maxZoom):Te)}var Ue={latlng:D,bounds:H,timestamp:f.timestamp};for(var Ze in f.coords)typeof f.coords[Ze]=="number"&&(Ue[Ze]=f.coords[Ze]);this.fire("locationfound",Ue)}},addHandler:function(f,b){if(!b)return this;var k=this[f]=new b(this);return this._handlers.push(k),this.options[f]&&k.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)lr(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,b){var k="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),D=Nr("div",k,b||this._mapPane);return f&&(this._panes[f]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),b=this.unproject(f.getBottomLeft()),k=this.unproject(f.getTopRight());return new X(b,k)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,b,k){f=ie(f),k=ee(k||[0,0]);var D=this.getZoom()||0,H=this.getMinZoom(),ce=this.getMaxZoom(),Te=f.getNorthWest(),Ue=f.getSouthEast(),Ze=this.getSize().subtract(k),ct=B(this.project(Ue,D),this.project(Te,D)).getSize(),kt=St.any3d?this.options.zoomSnap:1,qt=Ze.x/ct.x,pr=Ze.y/ct.y,ri=b?Math.max(qt,pr):Math.min(qt,pr);return D=this.getScaleZoom(ri,D),kt&&(D=Math.round(D/(kt/100))*(kt/100),D=b?Math.ceil(D/kt)*kt:Math.floor(D/kt)*kt),Math.max(H,Math.min(ce,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,b){var k=this._getTopLeftPoint(f,b);return new xe(k,k.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,b){var k=this.options.crs;return b=b===void 0?this._zoom:b,k.scale(f)/k.scale(b)},getScaleZoom:function(f,b){var k=this.options.crs;b=b===void 0?this._zoom:b;var D=k.zoom(f*k.scale(b));return isNaN(D)?1/0:D},project:function(f,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(ye(f),b)},unproject:function(f,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(ee(f),b)},layerPointToLatLng:function(f){var b=ee(f).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(f){var b=this.project(ye(f))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(ye(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(ie(f))},distance:function(f,b){return this.options.crs.distance(ye(f),ye(b))},containerPointToLayerPoint:function(f){return ee(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return ee(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var b=this.containerPointToLayerPoint(ee(f));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(f)))},mouseEventToContainerPoint:function(f){return Om(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var b=this._container=km(f);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nr(b,"scroll",this._onScroll,this),this._containerId=c(b)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&St.any3d,dr(f,"leaflet-container"+(St.touch?" leaflet-touch":"")+(St.retina?" leaflet-retina":"")+(St.ielt9?" leaflet-oldie":"")+(St.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=yo(f,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tn(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(dr(f.markerPane,"leaflet-zoom-hide"),dr(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,b,k){Tn(this._mapPane,new G(0,0));var D=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var H=this._zoom!==b;this._moveStart(H,k)._move(f,b)._moveEnd(H),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(f,b){return f&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(f,b,k,D){b===void 0&&(b=this._zoom);var H=this._zoom!==b;return this._zoom=b,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),D?k&&k.pinch&&this.fire("zoom",k):((H||k&&k.pinch)&&this.fire("zoom",k),this.fire("move",k)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Tn(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[c(this._container)]=this;var b=f?vr:nr;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),St.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,b){for(var k=[],D,H=b==="mouseout"||b==="mouseover",ce=f.target||f.srcElement,Te=!1;ce;){if(D=this._targets[c(ce)],D&&(b==="click"||b==="preclick")&&this._draggableMoved(D)){Te=!0;break}if(D&&D.listens(b,!0)&&(H&&!Wl(ce,f)||(k.push(D),H))||ce===this._container)break;ce=ce.parentNode}return!k.length&&!Te&&!H&&this.listens(b,!0)&&(k=[this]),k},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var b=f.target||f.srcElement;if(!(!this._loaded||b._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(b))){var k=f.type;k==="mousedown"&&ad(b),this._fireDOMEvent(f,k)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,b,k){if(f.type==="click"){var D=i({},f);D.type="preclick",this._fireDOMEvent(D,D.type,k)}var H=this._findEventTargets(f,b);if(k){for(var ce=[],Te=0;Te<k.length;Te++)k[Te].listens(b,!0)&&ce.push(k[Te]);H=ce.concat(H)}if(H.length){b==="contextmenu"&&In(f);var Ue=H[0],Ze={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var ct=Ue.getLatLng&&(!Ue._radius||Ue._radius<=10);Ze.containerPoint=ct?this.latLngToContainerPoint(Ue.getLatLng()):this.mouseEventToContainerPoint(f),Ze.layerPoint=this.containerPointToLayerPoint(Ze.containerPoint),Ze.latlng=ct?Ue.getLatLng():this.layerPointToLatLng(Ze.layerPoint)}for(Te=0;Te<H.length;Te++)if(H[Te].fire(b,Ze,!0),Ze.originalEvent._stopped||H[Te].options.bubblingMouseEvents===!1&&A(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,b=this._handlers.length;f<b;f++)this._handlers[f].disable()},whenReady:function(f,b){return this._loaded?f.call(b||this,{target:this}):this.on("load",f,b),this},_getMapPanePos:function(){return jo(this._mapPane)||new G(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,b){var k=f&&b!==void 0?this._getNewPixelOrigin(f,b):this.getPixelOrigin();return k.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,b){var k=this.getSize()._divideBy(2);return this.project(f,b)._subtract(k)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,b,k){var D=this._getNewPixelOrigin(k,b);return this.project(f,b)._subtract(D)},_latLngBoundsToNewLayerBounds:function(f,b,k){var D=this._getNewPixelOrigin(k,b);return B([this.project(f.getSouthWest(),b)._subtract(D),this.project(f.getNorthWest(),b)._subtract(D),this.project(f.getSouthEast(),b)._subtract(D),this.project(f.getNorthEast(),b)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,b,k){if(!k)return f;var D=this.project(f,b),H=this.getSize().divideBy(2),ce=new xe(D.subtract(H),D.add(H)),Te=this._getBoundsOffset(ce,k,b);return Math.abs(Te.x)<=1&&Math.abs(Te.y)<=1?f:this.unproject(D.add(Te),b)},_limitOffset:function(f,b){if(!b)return f;var k=this.getPixelBounds(),D=new xe(k.min.add(f),k.max.add(f));return f.add(this._getBoundsOffset(D,b))},_getBoundsOffset:function(f,b,k){var D=B(this.project(b.getNorthEast(),k),this.project(b.getSouthWest(),k)),H=D.min.subtract(f.min),ce=D.max.subtract(f.max),Te=this._rebound(H.x,-ce.x),Ue=this._rebound(H.y,-ce.y);return new G(Te,Ue)},_rebound:function(f,b){return f+b>0?Math.round(f-b)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(b))},_limitZoom:function(f){var b=this.getMinZoom(),k=this.getMaxZoom(),D=St.any3d?this.options.zoomSnap:1;return D&&(f=Math.round(f/D)*D),Math.max(b,Math.min(k,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,b){var k=this._getCenterOffset(f)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(k)?!1:(this.panBy(k,b),!0)},_createAnimProxy:function(){var f=this._proxy=Nr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(b){var k=Kc,D=this._proxy.style[k];bo(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),D===this._proxy.style[k]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),b=this.getZoom();bo(this._proxy,this.project(f,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,b,k){if(this._animatingZoom)return!0;if(k=k||{},!this._zoomAnimated||k.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(b),H=this._getCenterOffset(f)._divideBy(1-1/D);return k.animate!==!0&&!this.getSize().contains(H)?!1:(O(function(){this._moveStart(!0,k.noMoveStart||!1)._animateZoom(f,b,!0)},this),!0)},_animateZoom:function(f,b,k,D){this._mapPane&&(k&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=b,dr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:b,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mm(f,b){return new gr(f,b)}var Gn=F.extend({options:{position:"topright"},initialize:function(f){g(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var b=this._map;return b&&b.removeControl(this),this.options.position=f,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var b=this._container=this.onAdd(f),k=this.getPosition(),D=f._controlCorners[k];return dr(b,"leaflet-control"),k.indexOf("bottom")!==-1?D.insertBefore(b,D.firstChild):D.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Bi=function(f){return new Gn(f)};gr.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},b="leaflet-",k=this._controlContainer=Nr("div",b+"control-container",this._container);function D(H,ce){var Te=b+H+" "+b+ce;f[H+ce]=Nr("div",Te,k)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)lr(this._controlCorners[f]);lr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Im=Gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,b,k,D){return k<D?-1:D<k?1:0}},initialize:function(f,b,k){g(this,k),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in f)this._addLayer(f[D],D);for(D in b)this._addLayer(b[D],D,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Gn.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,b){return this._addLayer(f,b),this._map?this._update():this},addOverlay:function(f,b){return this._addLayer(f,b,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var b=this._getLayer(c(f));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){dr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(dr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):Tr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",b=this._container=Nr("div",f),k=this.options.collapsed;b.setAttribute("aria-haspopup",!0),tu(b),zh(b);var D=this._section=Nr("section",f+"-list");k&&(this._map.on("click",this.collapse,this),nr(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var H=this._layersLink=Nr("a",f+"-toggle",b);H.href="#",H.title="Layers",H.setAttribute("role","button"),nr(H,{keydown:function(ce){ce.keyCode===13&&this._expandSafely()},click:function(ce){In(ce),this._expandSafely()}},this),k||this.expand(),this._baseLayersList=Nr("div",f+"-base",D),this._separator=Nr("div",f+"-separator",D),this._overlaysList=Nr("div",f+"-overlays",D),b.appendChild(D)},_getLayer:function(f){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&c(this._layers[b].layer)===f)return this._layers[b]},_addLayer:function(f,b,k){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:b,overlay:k}),this.options.sortLayers&&this._layers.sort(o(function(D,H){return this.options.sortFunction(D.layer,H.layer,D.name,H.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xc(this._baseLayersList),Xc(this._overlaysList),this._layerControlInputs=[];var f,b,k,D,H=0;for(k=0;k<this._layers.length;k++)D=this._layers[k],this._addItem(D),b=b||D.overlay,f=f||!D.overlay,H+=D.overlay?0:1;return this.options.hideSingleBase&&(f=f&&H>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=b&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var b=this._getLayer(c(f.target)),k=b.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;k&&this._map.fire(k,b)},_createRadioElement:function(f,b){var k='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(b?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=k,D.firstChild},_addItem:function(f){var b=document.createElement("label"),k=this._map.hasLayer(f.layer),D;f.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=k):D=this._createRadioElement("leaflet-base-layers_"+c(this),k),this._layerControlInputs.push(D),D.layerId=c(f.layer),nr(D,"click",this._onInputClick,this);var H=document.createElement("span");H.innerHTML=" "+f.name;var ce=document.createElement("span");b.appendChild(ce),ce.appendChild(D),ce.appendChild(H);var Te=f.overlay?this._overlaysList:this._baseLayersList;return Te.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,b,k,D=[],H=[];this._handlingClick=!0;for(var ce=f.length-1;ce>=0;ce--)b=f[ce],k=this._getLayer(b.layerId).layer,b.checked?D.push(k):b.checked||H.push(k);for(ce=0;ce<H.length;ce++)this._map.hasLayer(H[ce])&&this._map.removeLayer(H[ce]);for(ce=0;ce<D.length;ce++)this._map.hasLayer(D[ce])||this._map.addLayer(D[ce]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,b,k,D=this._map.getZoom(),H=f.length-1;H>=0;H--)b=f[H],k=this._getLayer(b.layerId).layer,b.disabled=k.options.minZoom!==void 0&&D<k.options.minZoom||k.options.maxZoom!==void 0&&D>k.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,nr(f,"click",In),this.expand();var b=this;setTimeout(function(){vr(f,"click",In),b._preventClick=!1})}}),Gl=function(f,b,k){return new Im(f,b,k)},qi=Gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var b="leaflet-control-zoom",k=Nr("div",b+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,b+"-in",k,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,b+"-out",k,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),k},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,b,k,D,H){var ce=Nr("a",k,D);return ce.innerHTML=f,ce.href="#",ce.title=b,ce.setAttribute("role","button"),ce.setAttribute("aria-label",b),tu(ce),nr(ce,"click",zi),nr(ce,"click",H,this),nr(ce,"click",this._refocusOnMap,this),ce},_updateDisabled:function(){var f=this._map,b="leaflet-disabled";Tr(this._zoomInButton,b),Tr(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(dr(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(dr(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});gr.mergeOptions({zoomControl:!0}),gr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new qi,this.addControl(this.zoomControl))});var qh=function(f){return new qi(f)},Kl=Gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var b="leaflet-control-scale",k=Nr("div",b),D=this.options;return this._addScales(D,b+"-line",k),f.on(D.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),k},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,b,k){f.metric&&(this._mScale=Nr("div",b,k)),f.imperial&&(this._iScale=Nr("div",b,k))},_update:function(){var f=this._map,b=f.getSize().y/2,k=f.distance(f.containerPointToLatLng([0,b]),f.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(k)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var b=this._getRoundNum(f),k=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,k,b/f)},_updateImperial:function(f){var b=f*3.2808399,k,D,H;b>5280?(k=b/5280,D=this._getRoundNum(k),this._updateScale(this._iScale,D+" mi",D/k)):(H=this._getRoundNum(b),this._updateScale(this._iScale,H+" ft",H/b))},_updateScale:function(f,b,k){f.style.width=Math.round(this.options.maxWidth*k)+"px",f.innerHTML=b},_getRoundNum:function(f){var b=Math.pow(10,(Math.floor(f)+"").length-1),k=f/b;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1,b*k}}),Dx=function(f){return new Kl(f)},ud='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vh=Gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(St.inlineSvg?ud+" ":"")+"Leaflet</a>"},initialize:function(f){g(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Nr("div","leaflet-control-attribution"),tu(this._container);for(var b in f._layers)f._layers[b].getAttribution&&this.addAttribution(f._layers[b].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var b in this._attributions)this._attributions[b]&&f.push(b);var k=[];this.options.prefix&&k.push(this.options.prefix),f.length&&k.push(f.join(", ")),this._container.innerHTML=k.join(' <span aria-hidden="true">|</span> ')}}});gr.mergeOptions({attributionControl:!0}),gr.addInitHook(function(){this.options.attributionControl&&new Vh().addTo(this)});var Uh=function(f){return new Vh(f)};Gn.Layers=Im,Gn.Zoom=qi,Gn.Scale=Kl,Gn.Attribution=Vh,Bi.layers=Gl,Bi.zoom=qh,Bi.scale=Dx,Bi.attribution=Uh;var gi=F.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gi.addTo=function(f,b){return f.addHandler(b,this),this};var Rm={Events:V},nu=St.touch?"touchstart mousedown":"mousedown",ma=ne.extend({options:{clickTolerance:3},initialize:function(f,b,k,D){g(this,D),this._element=f,this._dragStartTarget=b||f,this._preventOutline=k},enable:function(){this._enabled||(nr(this._dragStartTarget,nu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ma._dragging===this&&this.finishDrag(!0),vr(this._dragStartTarget,nu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!Yc(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){ma._dragging===this&&this.finishDrag();return}if(!(ma._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(ma._dragging=this,this._preventOutline&&ad(this._element),$h(),Jc(),!this._moving)){this.fire("down");var b=f.touches?f.touches[0]:f,k=Tm(this._element);this._startPoint=new G(b.clientX,b.clientY),this._startPos=jo(this._element),this._parentScale=od(k);var D=f.type==="mousedown";nr(document,D?"mousemove":"touchmove",this._onMove,this),nr(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var b=f.touches&&f.touches.length===1?f.touches[0]:f,k=new G(b.clientX,b.clientY)._subtract(this._startPoint);!k.x&&!k.y||Math.abs(k.x)+Math.abs(k.y)<this.options.clickTolerance||(k.x/=this._parentScale.x,k.y/=this._parentScale.y,In(f),this._moved||(this.fire("dragstart"),this._moved=!0,dr(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),dr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(k),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Tn(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){Tr(document.body,"leaflet-dragging"),this._lastTarget&&(Tr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vr(document,"mousemove touchmove",this._onMove,this),vr(document,"mouseup touchend touchcancel",this._onUp,this),za(),Jo();var b=this._moved&&this._moving;this._moving=!1,ma._dragging=!1,b&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function dd(f,b,k){var D,H=[1,4,2,8],ce,Te,Ue,Ze,ct,kt,qt,pr;for(ce=0,kt=f.length;ce<kt;ce++)f[ce]._code=Ye(f[ce],b);for(Ue=0;Ue<4;Ue++){for(qt=H[Ue],D=[],ce=0,kt=f.length,Te=kt-1;ce<kt;Te=ce++)Ze=f[ce],ct=f[Te],Ze._code&qt?ct._code&qt||(pr=Be(ct,Ze,qt,b,k),pr._code=Ye(pr,b),D.push(pr)):(ct._code&qt&&(pr=Be(ct,Ze,qt,b,k),pr._code=Ye(pr,b),D.push(pr)),D.push(Ze));f=D}return f}function Hh(f,b){var k,D,H,ce,Te,Ue,Ze,ct,kt;if(!f||f.length===0)throw new Error("latlngs not passed");Ot(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var qt=ye([0,0]),pr=ie(f),ri=pr.getNorthWest().distanceTo(pr.getSouthWest())*pr.getNorthEast().distanceTo(pr.getNorthWest());ri<1700&&(qt=Wh(f));var as=f.length,va=[];for(k=0;k<as;k++){var yi=ye(f[k]);va.push(b.project(ye([yi.lat-qt.lat,yi.lng-qt.lng])))}for(Ue=Ze=ct=0,k=0,D=as-1;k<as;D=k++)H=va[k],ce=va[D],Te=H.y*ce.x-ce.y*H.x,Ze+=(H.x+ce.x)*Te,ct+=(H.y+ce.y)*Te,Ue+=Te*3;Ue===0?kt=va[0]:kt=[Ze/Ue,ct/Ue];var bd=b.unproject(ee(kt));return ye([bd.lat+qt.lat,bd.lng+qt.lng])}function Wh(f){for(var b=0,k=0,D=0,H=0;H<f.length;H++){var ce=ye(f[H]);b+=ce.lat,k+=ce.lng,D++}return ye([b/D,k/D])}var hd={__proto__:null,clipPolygon:dd,polygonCenter:Hh,centroid:Wh};function Zl(f,b){if(!b||!f.length)return f.slice();var k=b*b;return f=re(f,k),f=Gh(f,k),f}function fd(f,b,k){return Math.sqrt(At(f,b,k,!0))}function Xl(f,b,k){return At(f,b,k)}function Gh(f,b){var k=f.length,D=typeof Uint8Array!=void 0+""?Uint8Array:Array,H=new D(k);H[0]=H[k-1]=1,R(f,H,b,0,k-1);var ce,Te=[];for(ce=0;ce<k;ce++)H[ce]&&Te.push(f[ce]);return Te}function R(f,b,k,D,H){var ce=0,Te,Ue,Ze;for(Ue=D+1;Ue<=H-1;Ue++)Ze=At(f[Ue],f[D],f[H],!0),Ze>ce&&(Te=Ue,ce=Ze);ce>k&&(b[Te]=1,R(f,b,k,D,Te),R(f,b,k,Te,H))}function re(f,b){for(var k=[f[0]],D=1,H=0,ce=f.length;D<ce;D++)ht(f[D],f[H])>b&&(k.push(f[D]),H=D);return H<ce-1&&k.push(f[ce-1]),k}var Se;function Le(f,b,k,D,H){var ce=D?Se:Ye(f,k),Te=Ye(b,k),Ue,Ze,ct;for(Se=Te;;){if(!(ce|Te))return[f,b];if(ce&Te)return!1;Ue=ce||Te,Ze=Be(f,b,Ue,k,H),ct=Ye(Ze,k),Ue===ce?(f=Ze,ce=ct):(b=Ze,Te=ct)}}function Be(f,b,k,D,H){var ce=b.x-f.x,Te=b.y-f.y,Ue=D.min,Ze=D.max,ct,kt;return k&8?(ct=f.x+ce*(Ze.y-f.y)/Te,kt=Ze.y):k&4?(ct=f.x+ce*(Ue.y-f.y)/Te,kt=Ue.y):k&2?(ct=Ze.x,kt=f.y+Te*(Ze.x-f.x)/ce):k&1&&(ct=Ue.x,kt=f.y+Te*(Ue.x-f.x)/ce),new G(ct,kt,H)}function Ye(f,b){var k=0;return f.x<b.min.x?k|=1:f.x>b.max.x&&(k|=2),f.y<b.min.y?k|=4:f.y>b.max.y&&(k|=8),k}function ht(f,b){var k=b.x-f.x,D=b.y-f.y;return k*k+D*D}function At(f,b,k,D){var H=b.x,ce=b.y,Te=k.x-H,Ue=k.y-ce,Ze=Te*Te+Ue*Ue,ct;return Ze>0&&(ct=((f.x-H)*Te+(f.y-ce)*Ue)/Ze,ct>1?(H=k.x,ce=k.y):ct>0&&(H+=Te*ct,ce+=Ue*ct)),Te=f.x-H,Ue=f.y-ce,D?Te*Te+Ue*Ue:new G(H,ce)}function Ot(f){return!w(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function sr(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ot(f)}function tr(f,b){var k,D,H,ce,Te,Ue,Ze,ct;if(!f||f.length===0)throw new Error("latlngs not passed");Ot(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var kt=ye([0,0]),qt=ie(f),pr=qt.getNorthWest().distanceTo(qt.getSouthWest())*qt.getNorthEast().distanceTo(qt.getNorthWest());pr<1700&&(kt=Wh(f));var ri=f.length,as=[];for(k=0;k<ri;k++){var va=ye(f[k]);as.push(b.project(ye([va.lat-kt.lat,va.lng-kt.lng])))}for(k=0,D=0;k<ri-1;k++)D+=as[k].distanceTo(as[k+1])/2;if(D===0)ct=as[0];else for(k=0,ce=0;k<ri-1;k++)if(Te=as[k],Ue=as[k+1],H=Te.distanceTo(Ue),ce+=H,ce>D){Ze=(ce-D)/H,ct=[Ue.x-Ze*(Ue.x-Te.x),Ue.y-Ze*(Ue.y-Te.y)];break}var yi=b.unproject(ee(ct));return ye([yi.lat+kt.lat,yi.lng+kt.lng])}var Sr={__proto__:null,simplify:Zl,pointToSegmentDistance:fd,closestPointOnSegment:Xl,clipSegment:Le,_getEdgeIntersection:Be,_getBitCode:Ye,_sqClosestPointOnSegment:At,isFlat:Ot,_flat:sr,polylineCenter:tr},un={project:function(f){return new G(f.lng,f.lat)},unproject:function(f){return new me(f.y,f.x)},bounds:new xe([-180,-90],[180,90])},mn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var b=Math.PI/180,k=this.R,D=f.lat*b,H=this.R_MINOR/k,ce=Math.sqrt(1-H*H),Te=ce*Math.sin(D),Ue=Math.tan(Math.PI/4-D/2)/Math.pow((1-Te)/(1+Te),ce/2);return D=-k*Math.log(Math.max(Ue,1e-10)),new G(f.lng*b*k,D)},unproject:function(f){for(var b=180/Math.PI,k=this.R,D=this.R_MINOR/k,H=Math.sqrt(1-D*D),ce=Math.exp(-f.y/k),Te=Math.PI/2-2*Math.atan(ce),Ue=0,Ze=.1,ct;Ue<15&&Math.abs(Ze)>1e-7;Ue++)ct=H*Math.sin(Te),ct=Math.pow((1-ct)/(1+ct),H/2),Ze=Math.PI/2-2*Math.atan(ce*ct)-Te,Te+=Ze;return new me(Te*b,f.x*b/k)}},Kn={__proto__:null,LonLat:un,Mercator:mn,SphericalMercator:J},zs=i({},le,{code:"EPSG:3395",projection:mn,transformation:function(){var f=.5/(Math.PI*mn.R);return Z(f,.5,-f,.5)}()}),is=i({},le,{code:"EPSG:4326",projection:un,transformation:Z(1/180,1,-1/180,.5)}),Ba=i({},Ne,{projection:un,transformation:Z(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,b){var k=b.lng-f.lng,D=b.lat-f.lat;return Math.sqrt(k*k+D*D)},infinite:!0});Ne.Earth=le,Ne.EPSG3395=zs,Ne.EPSG3857=je,Ne.EPSG900913=Ee,Ne.EPSG4326=is,Ne.Simple=Ba;var wn=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[c(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[c(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var b=f.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var k=this.getEvents();b.on(k,this),this.once("remove",function(){b.off(k,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});gr.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var b=c(f);return this._layers[b]?this:(this._layers[b]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var b=c(f);return this._layers[b]?(this._loaded&&f.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return c(f)in this._layers},eachLayer:function(f,b){for(var k in this._layers)f.call(b,this._layers[k]);return this},_addLayers:function(f){f=f?w(f)?f:[f]:[];for(var b=0,k=f.length;b<k;b++)this.addLayer(f[b])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[c(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var b=c(f);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,b=-1/0,k=this._getZoomSpan();for(var D in this._zoomBoundLayers){var H=this._zoomBoundLayers[D].options;f=H.minZoom===void 0?f:Math.min(f,H.minZoom),b=H.maxZoom===void 0?b:Math.max(b,H.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=f===1/0?void 0:f,k!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ei=wn.extend({initialize:function(f,b){g(this,b),this._layers={};var k,D;if(f)for(k=0,D=f.length;k<D;k++)this.addLayer(f[k])},addLayer:function(f){var b=this.getLayerId(f);return this._layers[b]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var b=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(f){var b=typeof f=="number"?f:this.getLayerId(f);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var b=Array.prototype.slice.call(arguments,1),k,D;for(k in this._layers)D=this._layers[k],D[f]&&D[f].apply(D,b);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,b){for(var k in this._layers)f.call(b,this._layers[k]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return c(f)}}),Dm=function(f,b){return new ei(f,b)},Vi=ei.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),ei.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),ei.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new X;for(var b in this._layers){var k=this._layers[b];f.extend(k.getBounds?k.getBounds():k.getLatLng())}return f}}),Kh=function(f,b){return new Vi(f,b)},qa=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){g(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,b){var k=this._getIconUrl(f);if(!k){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(k,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(D,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(f,b){var k=this.options,D=k[b+"Size"];typeof D=="number"&&(D=[D,D]);var H=ee(D),ce=ee(b==="shadow"&&k.shadowAnchor||k.iconAnchor||H&&H.divideBy(2,!0));f.className="leaflet-marker-"+b+" "+(k.className||""),ce&&(f.style.marginLeft=-ce.x+"px",f.style.marginTop=-ce.y+"px"),H&&(f.style.width=H.x+"px",f.style.height=H.y+"px")},_createImg:function(f,b){return b=b||document.createElement("img"),b.src=f,b},_getIconUrl:function(f){return St.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Zh(f){return new qa(f)}var rl=qa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof rl.imagePath!="string"&&(rl.imagePath=this._detectIconPath()),(this.options.imagePath||rl.imagePath)+qa.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var b=function(k,D,H){var ce=D.exec(k);return ce&&ce[H]};return f=b(f,/^url\((['"])?(.+)\1\)$/,2),f&&b(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Nr("div","leaflet-default-icon-path",document.body),b=yo(f,"background-image")||yo(f,"backgroundImage");if(document.body.removeChild(f),b=this._stripUrl(b),b)return b;var k=document.querySelector('link[href$="leaflet.css"]');return k?k.href.substring(0,k.href.length-11-1):""}}),su=gi.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new ma(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),dr(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var b=this._marker,k=b._map,D=this._marker.options.autoPanSpeed,H=this._marker.options.autoPanPadding,ce=jo(b._icon),Te=k.getPixelBounds(),Ue=k.getPixelOrigin(),Ze=B(Te.min._subtract(Ue).add(H),Te.max._subtract(Ue).subtract(H));if(!Ze.contains(ce)){var ct=ee((Math.max(Ze.max.x,ce.x)-Ze.max.x)/(Te.max.x-Ze.max.x)-(Math.min(Ze.min.x,ce.x)-Ze.min.x)/(Te.min.x-Ze.min.x),(Math.max(Ze.max.y,ce.y)-Ze.max.y)/(Te.max.y-Ze.max.y)-(Math.min(Ze.min.y,ce.y)-Ze.min.y)/(Te.min.y-Ze.min.y)).multiplyBy(D);k.panBy(ct,{animate:!1}),this._draggable._newPos._add(ct),this._draggable._startPos._add(ct),Tn(b._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=O(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,f)))},_onDrag:function(f){var b=this._marker,k=b._shadow,D=jo(b._icon),H=b._map.layerPointToLatLng(D);k&&Tn(k,D),b._latlng=H,f.latlng=H,f.oldLatLng=this._oldLatLng,b.fire("move",f).fire("drag",f)},_onDragEnd:function(f){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),Zn=wn.extend({options:{icon:new rl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,b){g(this,b),this._latlng=ye(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var b=this._latlng;return this._latlng=ye(f),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),k=f.icon.createIcon(this._icon),D=!1;k!==this._icon&&(this._icon&&this._removeIcon(),D=!0,f.title&&(k.title=f.title),k.tagName==="IMG"&&(k.alt=f.alt||"")),dr(k,b),f.keyboard&&(k.tabIndex="0",k.setAttribute("role","button")),this._icon=k,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nr(k,"focus",this._panOnFocus,this);var H=f.icon.createShadow(this._shadow),ce=!1;H!==this._shadow&&(this._removeShadow(),ce=!0),H&&(dr(H,b),H.alt=""),this._shadow=H,f.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),H&&ce&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vr(this._icon,"focus",this._panOnFocus,this),lr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lr(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Tn(this._icon,f),this._shadow&&Tn(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(dr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),su)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new su(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&Fs(this._icon,f),this._shadow&&Fs(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var b=this.options.icon.options,k=b.iconSize?ee(b.iconSize):ee(0,0),D=b.iconAnchor?ee(b.iconAnchor):ee(0,0);f.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:k.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function md(f,b){return new Zn(f,b)}var Ui=wn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return g(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nl=Ui.extend({options:{fill:!0,radius:10},initialize:function(f,b){g(this,b),this._latlng=ye(f),this._radius=this.options.radius},setLatLng:function(f){var b=this._latlng;return this._latlng=ye(f),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var b=f&&f.radius||this._radius;return Ui.prototype.setStyle.call(this,f),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,b=this._radiusY||f,k=this._clickTolerance(),D=[f+k,b+k];this._pxBounds=new xe(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Xh(f,b){return new nl(f,b)}var Bs=nl.extend({initialize:function(f,b,k){if(typeof b=="number"&&(b=i({},k,{radius:b})),g(this,b),this._latlng=ye(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new X(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:Ui.prototype.setStyle,_project:function(){var f=this._latlng.lng,b=this._latlng.lat,k=this._map,D=k.options.crs;if(D.distance===le.distance){var H=Math.PI/180,ce=this._mRadius/le.R/H,Te=k.project([b+ce,f]),Ue=k.project([b-ce,f]),Ze=Te.add(Ue).divideBy(2),ct=k.unproject(Ze).lat,kt=Math.acos((Math.cos(ce*H)-Math.sin(b*H)*Math.sin(ct*H))/(Math.cos(b*H)*Math.cos(ct*H)))/H;(isNaN(kt)||kt===0)&&(kt=ce/Math.cos(Math.PI/180*b)),this._point=Ze.subtract(k.getPixelOrigin()),this._radius=isNaN(kt)?0:Ze.x-k.project([ct,f-kt]).x,this._radiusY=Ze.y-Te.y}else{var qt=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=k.latLngToLayerPoint(this._latlng),this._radius=this._point.x-k.latLngToLayerPoint(qt).x}this._updateBounds()}});function $x(f,b,k){return new Bs(f,b,k)}var Hi=Ui.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,b){g(this,b),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var b=1/0,k=null,D=At,H,ce,Te=0,Ue=this._parts.length;Te<Ue;Te++)for(var Ze=this._parts[Te],ct=1,kt=Ze.length;ct<kt;ct++){H=Ze[ct-1],ce=Ze[ct];var qt=D(f,H,ce,!0);qt<b&&(b=qt,k=D(f,H,ce))}return k&&(k.distance=Math.sqrt(b)),k},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,b){return b=b||this._defaultShape(),f=ye(f),b.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new X,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return Ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var b=[],k=Ot(f),D=0,H=f.length;D<H;D++)k?(b[D]=ye(f[D]),this._bounds.extend(b[D])):b[D]=this._convertLatLngs(f[D]);return b},_project:function(){var f=new xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),b=new G(f,f);this._rawPxBounds&&(this._pxBounds=new xe([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(f,b,k){var D=f[0]instanceof me,H=f.length,ce,Te;if(D){for(Te=[],ce=0;ce<H;ce++)Te[ce]=this._map.latLngToLayerPoint(f[ce]),k.extend(Te[ce]);b.push(Te)}else for(ce=0;ce<H;ce++)this._projectLatlngs(f[ce],b,k)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,k,D,H,ce,Te,Ue,Ze;for(k=0,H=0,ce=this._rings.length;k<ce;k++)for(Ze=this._rings[k],D=0,Te=Ze.length;D<Te-1;D++)Ue=Le(Ze[D],Ze[D+1],f,D,!0),Ue&&(b[H]=b[H]||[],b[H].push(Ue[0]),(Ue[1]!==Ze[D+1]||D===Te-2)&&(b[H].push(Ue[1]),H++))}},_simplifyPoints:function(){for(var f=this._parts,b=this.options.smoothFactor,k=0,D=f.length;k<D;k++)f[k]=Zl(f[k],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,b){var k,D,H,ce,Te,Ue,Ze=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(k=0,ce=this._parts.length;k<ce;k++)for(Ue=this._parts[k],D=0,Te=Ue.length,H=Te-1;D<Te;H=D++)if(!(!b&&D===0)&&fd(f,Ue[H],Ue[D])<=Ze)return!0;return!1}});function $m(f,b){return new Hi(f,b)}Hi._flat=sr;var Ss=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var b=Hi.prototype._convertLatLngs.call(this,f),k=b.length;return k>=2&&b[0]instanceof me&&b[0].equals(b[k-1])&&b.pop(),b},_setLatLngs:function(f){Hi.prototype._setLatLngs.call(this,f),Ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,b=this.options.weight,k=new G(b,b);if(f=new xe(f.min.subtract(k),f.max.add(k)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,H=this._rings.length,ce;D<H;D++)ce=dd(this._rings[D],f,!0),ce.length&&this._parts.push(ce)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var b=!1,k,D,H,ce,Te,Ue,Ze,ct;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(ce=0,Ze=this._parts.length;ce<Ze;ce++)for(k=this._parts[ce],Te=0,ct=k.length,Ue=ct-1;Te<ct;Ue=Te++)D=k[Te],H=k[Ue],D.y>f.y!=H.y>f.y&&f.x<(H.x-D.x)*(f.y-D.y)/(H.y-D.y)+D.x&&(b=!b);return b||Hi.prototype._containsPoint.call(this,f,!0)}});function pd(f,b){return new Ss(f,b)}var pa=Vi.extend({initialize:function(f,b){g(this,b),this._layers={},f&&this.addData(f)},addData:function(f){var b=w(f)?f:f.features,k,D,H;if(b){for(k=0,D=b.length;k<D;k++)H=b[k],(H.geometries||H.geometry||H.features||H.coordinates)&&this.addData(H);return this}var ce=this.options;if(ce.filter&&!ce.filter(f))return this;var Te=iu(f,ce);return Te?(Te.feature=ga(f),Te.defaultOptions=Te.options,this.resetStyle(Te),ce.onEachFeature&&ce.onEachFeature(f,Te),this.addLayer(Te)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(b){this._setLayerStyle(b,f)},this)},_setLayerStyle:function(f,b){f.setStyle&&(typeof b=="function"&&(b=b(f.feature)),f.setStyle(b))}});function iu(f,b){var k=f.type==="Feature"?f.geometry:f,D=k?k.coordinates:null,H=[],ce=b&&b.pointToLayer,Te=b&&b.coordsToLatLng||il,Ue,Ze,ct,kt;if(!D&&!k)return null;switch(k.type){case"Point":return Ue=Te(D),sl(ce,f,Ue,b);case"MultiPoint":for(ct=0,kt=D.length;ct<kt;ct++)Ue=Te(D[ct]),H.push(sl(ce,f,Ue,b));return new Vi(H);case"LineString":case"MultiLineString":return Ze=As(D,k.type==="LineString"?0:1,Te),new Hi(Ze,b);case"Polygon":case"MultiPolygon":return Ze=As(D,k.type==="Polygon"?1:2,Te),new Ss(Ze,b);case"GeometryCollection":for(ct=0,kt=k.geometries.length;ct<kt;ct++){var qt=iu({geometry:k.geometries[ct],type:"Feature",properties:f.properties},b);qt&&H.push(qt)}return new Vi(H);case"FeatureCollection":for(ct=0,kt=k.features.length;ct<kt;ct++){var pr=iu(k.features[ct],b);pr&&H.push(pr)}return new Vi(H);default:throw new Error("Invalid GeoJSON object.")}}function sl(f,b,k,D){return f?f(b,k):new Zn(k,D&&D.markersInheritOptions&&D)}function il(f){return new me(f[1],f[0],f[2])}function As(f,b,k){for(var D=[],H=0,ce=f.length,Te;H<ce;H++)Te=b?As(f[H],b-1,k):(k||il)(f[H]),D.push(Te);return D}function Ps(f,b){return f=ye(f),f.alt!==void 0?[m(f.lng,b),m(f.lat,b),m(f.alt,b)]:[m(f.lng,b),m(f.lat,b)]}function Va(f,b,k,D){for(var H=[],ce=0,Te=f.length;ce<Te;ce++)H.push(b?Va(f[ce],Ot(f[ce])?0:b-1,k,D):Ps(f[ce],D));return!b&&k&&H.length>0&&H.push(H[0].slice()),H}function xi(f,b){return f.feature?i({},f.feature,{geometry:b}):ga(b)}function ga(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var Yl={toGeoJSON:function(f){return xi(this,{type:"Point",coordinates:Ps(this.getLatLng(),f)})}};Zn.include(Yl),Bs.include(Yl),nl.include(Yl),Hi.include({toGeoJSON:function(f){var b=!Ot(this._latlngs),k=Va(this._latlngs,b?1:0,!1,f);return xi(this,{type:(b?"Multi":"")+"LineString",coordinates:k})}}),Ss.include({toGeoJSON:function(f){var b=!Ot(this._latlngs),k=b&&!Ot(this._latlngs[0]),D=Va(this._latlngs,k?2:b?1:0,!0,f);return b||(D=[D]),xi(this,{type:(k?"Multi":"")+"Polygon",coordinates:D})}}),ei.include({toMultiPoint:function(f){var b=[];return this.eachLayer(function(k){b.push(k.toGeoJSON(f).geometry.coordinates)}),xi(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(f){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(f);var k=b==="GeometryCollection",D=[];return this.eachLayer(function(H){if(H.toGeoJSON){var ce=H.toGeoJSON(f);if(k)D.push(ce.geometry);else{var Te=ga(ce);Te.type==="FeatureCollection"?D.push.apply(D,Te.features):D.push(Te)}}}),k?xi(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function wo(f,b){return new pa(f,b)}var Rn=wo,Jl=wn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,b,k){this._url=f,this._bounds=ie(b),g(this,k)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(dr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Xo(this._image),this},bringToBack:function(){return this._map&&Yo(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=ie(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",b=this._image=f?this._url:Nr("img");if(dr(b,"leaflet-image-layer"),this._zoomAnimated&&dr(b,"leaflet-zoom-animated"),this.options.className&&dr(b,this.options.className),b.onselectstart=h,b.onmousemove=h,b.onload=o(this.fire,this,"load"),b.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(f){var b=this._map.getZoomScale(f.zoom),k=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;bo(this._image,k,b)},_reset:function(){var f=this._image,b=new xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),k=b.getSize();Tn(f,b.min),f.style.width=k.x+"px",f.style.height=k.y+"px"},_updateOpacity:function(){Fs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),ti=function(f,b,k){return new Jl(f,b,k)},Wi=Jl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",b=this._image=f?this._url:Nr("video");if(dr(b,"leaflet-image-layer"),this._zoomAnimated&&dr(b,"leaflet-zoom-animated"),this.options.className&&dr(b,this.options.className),b.onselectstart=h,b.onmousemove=h,b.onloadeddata=o(this.fire,this,"load"),f){for(var k=b.getElementsByTagName("source"),D=[],H=0;H<k.length;H++)D.push(k[H].src);this._url=k.length>0?D:[b.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var ce=0;ce<this._url.length;ce++){var Te=Nr("source");Te.src=this._url[ce],b.appendChild(Te)}}});function gd(f,b,k){return new Wi(f,b,k)}var Yh=Jl.extend({_initImage:function(){var f=this._image=this._url;dr(f,"leaflet-image-layer"),this._zoomAnimated&&dr(f,"leaflet-zoom-animated"),this.options.className&&dr(f,this.options.className),f.onselectstart=h,f.onmousemove=h}});function Jh(f,b,k){return new Yh(f,b,k)}var qs=wn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,b){f&&(f instanceof me||w(f))?(this._latlng=ye(f),g(this,b)):(g(this,f),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&Fs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&Fs(this._container,1),this.bringToFront(),this.options.interactive&&(dr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(Fs(this._container,0),this._removeTimeout=setTimeout(o(lr,void 0,this._container),200)):lr(this._container),this.options.interactive&&(Tr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=ye(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Xo(this._container),this},bringToBack:function(){return this._map&&Yo(this._container),this},_prepareOpen:function(f){var b=this._source;if(!b._map)return!1;if(b instanceof Vi){b=null;var k=this._source._layers;for(var D in k)if(k[D]._map){b=k[D];break}if(!b)return!1;this._source=b}if(!f)if(b.getCenter)f=b.getCenter();else if(b.getLatLng)f=b.getLatLng();else if(b.getBounds)f=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")f.innerHTML=b;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),b=ee(this.options.offset),k=this._getAnchor();this._zoomAnimated?Tn(this._container,f.add(k)):b=b.add(f).add(k);var D=this._containerBottom=-b.y,H=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=D+"px",this._container.style.left=H+"px"}},_getAnchor:function(){return[0,0]}});gr.include({_initOverlay:function(f,b,k,D){var H=b;return H instanceof f||(H=new f(D).setContent(b)),k&&H.setLatLng(k),H}}),wn.include({_initOverlay:function(f,b,k,D){var H=k;return H instanceof f?(g(H,D),H._source=this):(H=b&&!D?b:new f(D,this),H.setContent(k)),H}});var _o=qs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,qs.prototype.openOn.call(this,f)},onAdd:function(f){qs.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ui||this._source.on("preclick",el))},onRemove:function(f){qs.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ui||this._source.off("preclick",el))},getEvents:function(){var f=qs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",b=this._container=Nr("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),k=this._wrapper=Nr("div",f+"-content-wrapper",b);if(this._contentNode=Nr("div",f+"-content",k),tu(b),zh(this._contentNode),nr(b,"contextmenu",el),this._tipContainer=Nr("div",f+"-tip-container",b),this._tip=Nr("div",f+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=Nr("a",f+"-close-button",b);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',nr(D,"click",function(H){In(H),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,b=f.style;b.width="",b.whiteSpace="nowrap";var k=f.offsetWidth;k=Math.min(k,this.options.maxWidth),k=Math.max(k,this.options.minWidth),b.width=k+1+"px",b.whiteSpace="",b.height="";var D=f.offsetHeight,H=this.options.maxHeight,ce="leaflet-popup-scrolled";H&&D>H?(b.height=H+"px",dr(f,ce)):Tr(f,ce),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),k=this._getAnchor();Tn(this._container,b.add(k))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,b=parseInt(yo(this._container,"marginBottom"),10)||0,k=this._container.offsetHeight+b,D=this._containerWidth,H=new G(this._containerLeft,-k-this._containerBottom);H._add(jo(this._container));var ce=f.layerPointToContainerPoint(H),Te=ee(this.options.autoPanPadding),Ue=ee(this.options.autoPanPaddingTopLeft||Te),Ze=ee(this.options.autoPanPaddingBottomRight||Te),ct=f.getSize(),kt=0,qt=0;ce.x+D+Ze.x>ct.x&&(kt=ce.x+D-ct.x+Ze.x),ce.x-kt-Ue.x<0&&(kt=ce.x-Ue.x),ce.y+k+Ze.y>ct.y&&(qt=ce.y+k-ct.y+Ze.y),ce.y-qt-Ue.y<0&&(qt=ce.y-Ue.y),(kt||qt)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([kt,qt]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ql=function(f,b){return new _o(f,b)};gr.mergeOptions({closePopupOnClick:!0}),gr.include({openPopup:function(f,b,k){return this._initOverlay(_o,f,b,k).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),wn.include({bindPopup:function(f,b){return this._popup=this._initOverlay(_o,this._popup,f,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Vi||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){zi(f);var b=f.layer||f.target;if(this._popup._source===b&&!(b instanceof Ui)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=b,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var No=qs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){qs.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){qs.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=qs.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",b=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Nr("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var b,k,D=this._map,H=this._container,ce=D.latLngToContainerPoint(D.getCenter()),Te=D.layerPointToContainerPoint(f),Ue=this.options.direction,Ze=H.offsetWidth,ct=H.offsetHeight,kt=ee(this.options.offset),qt=this._getAnchor();Ue==="top"?(b=Ze/2,k=ct):Ue==="bottom"?(b=Ze/2,k=0):Ue==="center"?(b=Ze/2,k=ct/2):Ue==="right"?(b=0,k=ct/2):Ue==="left"?(b=Ze,k=ct/2):Te.x<ce.x?(Ue="right",b=0,k=ct/2):(Ue="left",b=Ze+(kt.x+qt.x)*2,k=ct/2),f=f.subtract(ee(b,k,!0)).add(kt).add(qt),Tr(H,"leaflet-tooltip-right"),Tr(H,"leaflet-tooltip-left"),Tr(H,"leaflet-tooltip-top"),Tr(H,"leaflet-tooltip-bottom"),dr(H,"leaflet-tooltip-"+Ue),Tn(H,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&Fs(this._container,f)},_animateZoom:function(f){var b=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(b)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),xd=function(f,b){return new No(f,b)};gr.include({openTooltip:function(f,b,k){return this._initOverlay(No,f,b,k).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),wn.include({bindTooltip:function(f,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(No,this._tooltip,f,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var b=f?"off":"on",k={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?k.add=this._openTooltip:(k.mouseover=this._openTooltip,k.mouseout=this.closeTooltip,k.click=this._openTooltip,this._map?this._addFocusListeners():k.add=this._addFocusListeners),this._tooltip.options.sticky&&(k.mousemove=this._moveTooltip),this[b](k),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Vi||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var b=typeof f.getElement=="function"&&f.getElement();b&&(nr(b,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),nr(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var b=typeof f.getElement=="function"&&f.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var b=f.latlng,k,D;this._tooltip.options.sticky&&f.originalEvent&&(k=this._map.mouseEventToContainerPoint(f.originalEvent),D=this._map.containerPointToLayerPoint(k),b=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(b)}});var ec=qa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var b=f&&f.tagName==="DIV"?f:document.createElement("div"),k=this.options;if(k.html instanceof Element?(Xc(b),b.appendChild(k.html)):b.innerHTML=k.html!==!1?k.html:"",k.bgPos){var D=ee(k.bgPos);b.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function tc(f){return new ec(f)}qa.Default=rl;var al=wn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:St.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){g(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),lr(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Xo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof G?f:new G(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var b=this.getPane().children,k=-f(-1/0,1/0),D=0,H=b.length,ce;D<H;D++)ce=b[D].style.zIndex,b[D]!==this._container&&ce&&(k=f(k,+ce));isFinite(k)&&(this.options.zIndex=k+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!St.ielt9){Fs(this._container,this.options.opacity);var f=+new Date,b=!1,k=!1;for(var D in this._tiles){var H=this._tiles[D];if(!(!H.current||!H.loaded)){var ce=Math.min(1,(f-H.loaded)/200);Fs(H.el,ce),ce<1?b=!0:(H.active?k=!0:this._onOpaqueTile(H),H.active=!0)}}k&&!this._noPrune&&this._pruneTiles(),b&&(I(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Nr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,b=this.options.maxZoom;if(f!==void 0){for(var k in this._levels)k=Number(k),this._levels[k].el.children.length||k===f?(this._levels[k].el.style.zIndex=b-Math.abs(f-k),this._onUpdateLevel(k)):(lr(this._levels[k].el),this._removeTilesAtZoom(k),this._onRemoveLevel(k),delete this._levels[k]);var D=this._levels[f],H=this._map;return D||(D=this._levels[f]={},D.el=Nr("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=b,D.origin=H.project(H.unproject(H.getPixelOrigin()),f).round(),D.zoom=f,this._setZoomTransform(D,H.getCenter(),H.getZoom()),h(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var f,b,k=this._map.getZoom();if(k>this.options.maxZoom||k<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)b=this._tiles[f],b.retain=b.current;for(f in this._tiles)if(b=this._tiles[f],b.current&&!b.active){var D=b.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var b in this._tiles)this._tiles[b].coords.z===f&&this._removeTile(b)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)lr(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,b,k,D){var H=Math.floor(f/2),ce=Math.floor(b/2),Te=k-1,Ue=new G(+H,+ce);Ue.z=+Te;var Ze=this._tileCoordsToKey(Ue),ct=this._tiles[Ze];return ct&&ct.active?(ct.retain=!0,!0):(ct&&ct.loaded&&(ct.retain=!0),Te>D?this._retainParent(H,ce,Te,D):!1)},_retainChildren:function(f,b,k,D){for(var H=2*f;H<2*f+2;H++)for(var ce=2*b;ce<2*b+2;ce++){var Te=new G(H,ce);Te.z=k+1;var Ue=this._tileCoordsToKey(Te),Ze=this._tiles[Ue];if(Ze&&Ze.active){Ze.retain=!0;continue}else Ze&&Ze.loaded&&(Ze.retain=!0);k+1<D&&this._retainChildren(H,ce,k+1,D)}},_resetView:function(f){var b=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var b=this.options;return b.minNativeZoom!==void 0&&f<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<f?b.maxNativeZoom:f},_setView:function(f,b,k,D){var H=Math.round(b);this.options.maxZoom!==void 0&&H>this.options.maxZoom||this.options.minZoom!==void 0&&H<this.options.minZoom?H=void 0:H=this._clampZoom(H);var ce=this.options.updateWhenZooming&&H!==this._tileZoom;(!D||ce)&&(this._tileZoom=H,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),H!==void 0&&this._update(f),k||this._pruneTiles(),this._noPrune=!!k),this._setZoomTransforms(f,b)},_setZoomTransforms:function(f,b){for(var k in this._levels)this._setZoomTransform(this._levels[k],f,b)},_setZoomTransform:function(f,b,k){var D=this._map.getZoomScale(k,f.zoom),H=f.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(b,k)).round();St.any3d?bo(f.el,H,D):Tn(f.el,H)},_resetGrid:function(){var f=this._map,b=f.options.crs,k=this._tileSize=this.getTileSize(),D=this._tileZoom,H=this._map.getPixelWorldBounds(this._tileZoom);H&&(this._globalTileRange=this._pxBoundsToTileRange(H)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,b.wrapLng[0]],D).x/k.x),Math.ceil(f.project([0,b.wrapLng[1]],D).x/k.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([b.wrapLat[0],0],D).y/k.x),Math.ceil(f.project([b.wrapLat[1],0],D).y/k.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var b=this._map,k=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),D=b.getZoomScale(k,this._tileZoom),H=b.project(f,this._tileZoom).floor(),ce=b.getSize().divideBy(D*2);return new xe(H.subtract(ce),H.add(ce))},_update:function(f){var b=this._map;if(b){var k=this._clampZoom(b.getZoom());if(f===void 0&&(f=b.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(f),H=this._pxBoundsToTileRange(D),ce=H.getCenter(),Te=[],Ue=this.options.keepBuffer,Ze=new xe(H.getBottomLeft().subtract([Ue,-Ue]),H.getTopRight().add([Ue,-Ue]));if(!(isFinite(H.min.x)&&isFinite(H.min.y)&&isFinite(H.max.x)&&isFinite(H.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ct in this._tiles){var kt=this._tiles[ct].coords;(kt.z!==this._tileZoom||!Ze.contains(new G(kt.x,kt.y)))&&(this._tiles[ct].current=!1)}if(Math.abs(k-this._tileZoom)>1){this._setView(f,k);return}for(var qt=H.min.y;qt<=H.max.y;qt++)for(var pr=H.min.x;pr<=H.max.x;pr++){var ri=new G(pr,qt);if(ri.z=this._tileZoom,!!this._isValidTile(ri)){var as=this._tiles[this._tileCoordsToKey(ri)];as?as.current=!0:Te.push(ri)}}if(Te.sort(function(yi,bd){return yi.distanceTo(ce)-bd.distanceTo(ce)}),Te.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var va=document.createDocumentFragment();for(pr=0;pr<Te.length;pr++)this._addTile(Te[pr],va);this._level.el.appendChild(va)}}}},_isValidTile:function(f){var b=this._map.options.crs;if(!b.infinite){var k=this._globalTileRange;if(!b.wrapLng&&(f.x<k.min.x||f.x>k.max.x)||!b.wrapLat&&(f.y<k.min.y||f.y>k.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(f);return ie(this.options.bounds).overlaps(D)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var b=this._map,k=this.getTileSize(),D=f.scaleBy(k),H=D.add(k),ce=b.unproject(D,f.z),Te=b.unproject(H,f.z);return[ce,Te]},_tileCoordsToBounds:function(f){var b=this._tileCoordsToNwSe(f),k=new X(b[0],b[1]);return this.options.noWrap||(k=this._map.wrapLatLngBounds(k)),k},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var b=f.split(":"),k=new G(+b[0],+b[1]);return k.z=+b[2],k},_removeTile:function(f){var b=this._tiles[f];b&&(lr(b.el),delete this._tiles[f],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){dr(f,"leaflet-tile");var b=this.getTileSize();f.style.width=b.x+"px",f.style.height=b.y+"px",f.onselectstart=h,f.onmousemove=h,St.ielt9&&this.options.opacity<1&&Fs(f,this.options.opacity)},_addTile:function(f,b){var k=this._getTilePos(f),D=this._tileCoordsToKey(f),H=this.createTile(this._wrapCoords(f),o(this._tileReady,this,f));this._initTile(H),this.createTile.length<2&&O(o(this._tileReady,this,f,null,H)),Tn(H,k),this._tiles[D]={el:H,coords:f,current:!0},b.appendChild(H),this.fire("tileloadstart",{tile:H,coords:f})},_tileReady:function(f,b,k){b&&this.fire("tileerror",{error:b,tile:k,coords:f});var D=this._tileCoordsToKey(f);k=this._tiles[D],k&&(k.loaded=+new Date,this._map._fadeAnimated?(Fs(k.el,0),I(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(k.active=!0,this._pruneTiles()),b||(dr(k.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:k.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),St.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var b=new G(this._wrapX?d(f.x,this._wrapX):f.x,this._wrapY?d(f.y,this._wrapY):f.y);return b.z=f.z,b},_pxBoundsToTileRange:function(f){var b=this.getTileSize();return new xe(f.min.unscaleBy(b).floor(),f.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function xa(f){return new al(f)}var Cs=al.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,b){this._url=f,b=g(this,b),b.detectRetina&&St.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,b){return this._url===f&&b===void 0&&(b=!0),this._url=f,b||this.redraw(),this},createTile:function(f,b){var k=document.createElement("img");return nr(k,"load",o(this._tileOnLoad,this,b,k)),nr(k,"error",o(this._tileOnError,this,b,k)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(k.referrerPolicy=this.options.referrerPolicy),k.alt="",k.src=this.getTileUrl(f),k},getTileUrl:function(f){var b={r:St.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var k=this._globalTileRange.max.y-f.y;this.options.tms&&(b.y=k),b["-y"]=k}return _(this._url,i(b,this.options))},_tileOnLoad:function(f,b){St.ielt9?setTimeout(o(f,this,null,b),0):f(null,b)},_tileOnError:function(f,b,k){var D=this.options.errorTileUrl;D&&b.getAttribute("src")!==D&&(b.src=D),f(k,b)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,b=this.options.maxZoom,k=this.options.zoomReverse,D=this.options.zoomOffset;return k&&(f=b-f),f+D},_getSubdomain:function(f){var b=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var f,b;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(b=this._tiles[f].el,b.onload=h,b.onerror=h,!b.complete)){b.src=S;var k=this._tiles[f].coords;lr(b),delete this._tiles[f],this.fire("tileabort",{tile:b,coords:k})}},_removeTile:function(f){var b=this._tiles[f];if(b)return b.el.setAttribute("src",S),al.prototype._removeTile.call(this,f)},_tileReady:function(f,b,k){if(!(!this._map||k&&k.getAttribute("src")===S))return al.prototype._tileReady.call(this,f,b,k)}});function Gr(f,b){return new Cs(f,b)}var Kr=Cs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,b){this._url=f;var k=i({},this.defaultWmsParams);for(var D in b)D in this.options||(k[D]=b[D]);b=g(this,b);var H=b.detectRetina&&St.retina?2:1,ce=this.getTileSize();k.width=ce.x*H,k.height=ce.y*H,this.wmsParams=k},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,Cs.prototype.onAdd.call(this,f)},getTileUrl:function(f){var b=this._tileCoordsToNwSe(f),k=this._crs,D=B(k.project(b[0]),k.project(b[1])),H=D.min,ce=D.max,Te=(this._wmsVersion>=1.3&&this._crs===is?[H.y,H.x,ce.y,ce.x]:[H.x,H.y,ce.x,ce.y]).join(","),Ue=Cs.prototype.getTileUrl.call(this,f);return Ue+y(this.wmsParams,Ue,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Te},setParams:function(f,b){return i(this.wmsParams,f),b||this.redraw(),this}});function Dn(f,b){return new Kr(f,b)}Cs.WMS=Kr,Gr.wms=Dn;var Zr=wn.extend({options:{padding:.1},initialize:function(f){g(this,f),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),dr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,b){var k=this._map.getZoomScale(b,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),H=this._map.project(this._center,b),ce=D.multiplyBy(-k).add(H).subtract(this._map._getNewPixelOrigin(f,b));St.any3d?bo(this._container,ce,k):Tn(this._container,ce)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,b=this._map.getSize(),k=this._map.containerPointToLayerPoint(b.multiplyBy(-f)).round();this._bounds=new xe(k,k.add(b.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),So=Zr.extend({options:{tolerance:0},getEvents:function(){var f=Zr.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");nr(f,"mousemove",this._onMouseMove,this),nr(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nr(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,lr(this._container),vr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var b in this._layers)f=this._layers[b],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zr.prototype._update.call(this);var f=this._bounds,b=this._container,k=f.getSize(),D=St.retina?2:1;Tn(b,f.min),b.width=D*k.x,b.height=D*k.y,b.style.width=k.x+"px",b.style.height=k.y+"px",St.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){Zr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[c(f)]=f;var b=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var b=f._order,k=b.next,D=b.prev;k?k.prev=D:this._drawLast=D,D?D.next=k:this._drawFirst=k,delete f._order,delete this._layers[c(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var b=f.options.dashArray.split(/[, ]+/),k=[],D,H;for(H=0;H<b.length;H++){if(D=Number(b[H]),isNaN(D))return;k.push(D)}f.options._dashArray=k}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var b=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xe,this._redrawBounds.extend(f._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(f._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var b=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,b=this._redrawBounds;if(this._ctx.save(),b){var k=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,k.x,k.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)f=D.layer,(!b||f._pxBounds&&f._pxBounds.intersects(b))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,b){if(this._drawing){var k,D,H,ce,Te=f._parts,Ue=Te.length,Ze=this._ctx;if(Ue){for(Ze.beginPath(),k=0;k<Ue;k++){for(D=0,H=Te[k].length;D<H;D++)ce=Te[k][D],Ze[D?"lineTo":"moveTo"](ce.x,ce.y);b&&Ze.closePath()}this._fillStroke(Ze,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var b=f._point,k=this._ctx,D=Math.max(Math.round(f._radius),1),H=(Math.max(Math.round(f._radiusY),1)||D)/D;H!==1&&(k.save(),k.scale(1,H)),k.beginPath(),k.arc(b.x,b.y/H,D,0,Math.PI*2,!1),H!==1&&k.restore(),this._fillStroke(k,f)}},_fillStroke:function(f,b){var k=b.options;k.fill&&(f.globalAlpha=k.fillOpacity,f.fillStyle=k.fillColor||k.color,f.fill(k.fillRule||"evenodd")),k.stroke&&k.weight!==0&&(f.setLineDash&&f.setLineDash(b.options&&b.options._dashArray||[]),f.globalAlpha=k.opacity,f.lineWidth=k.weight,f.strokeStyle=k.color,f.lineCap=k.lineCap,f.lineJoin=k.lineJoin,f.stroke())},_onClick:function(f){for(var b=this._map.mouseEventToLayerPoint(f),k,D,H=this._drawFirst;H;H=H.next)k=H.layer,k.options.interactive&&k._containsPoint(b)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(k))&&(D=k);this._fireEvent(D?[D]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,b)}},_handleMouseOut:function(f){var b=this._hoveredLayer;b&&(Tr(this._container,"leaflet-interactive"),this._fireEvent([b],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,b){if(!this._mouseHoverThrottled){for(var k,D,H=this._drawFirst;H;H=H.next)k=H.layer,k.options.interactive&&k._containsPoint(b)&&(D=k);D!==this._hoveredLayer&&(this._handleMouseOut(f),D&&(dr(this._container,"leaflet-interactive"),this._fireEvent([D],f,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,b,k){this._map._fireDOMEvent(b,k||b.type,f)},_bringToFront:function(f){var b=f._order;if(b){var k=b.next,D=b.prev;if(k)k.prev=D;else return;D?D.next=k:k&&(this._drawFirst=k),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(f)}},_bringToBack:function(f){var b=f._order;if(b){var k=b.next,D=b.prev;if(D)D.next=k;else return;k?k.prev=D:D&&(this._drawLast=D),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(f)}}});function vd(f){return St.canvas?new So(f):null}var Ao=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fm={_initContainer:function(){this._container=Nr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zr.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var b=f._container=Ao("shape");dr(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",f._path=Ao("path"),b.appendChild(f._path),this._updateStyle(f),this._layers[c(f)]=f},_addPath:function(f){var b=f._container;this._container.appendChild(b),f.options.interactive&&f.addInteractiveTarget(b)},_removePath:function(f){var b=f._container;lr(b),f.removeInteractiveTarget(b),delete this._layers[c(f)]},_updateStyle:function(f){var b=f._stroke,k=f._fill,D=f.options,H=f._container;H.stroked=!!D.stroke,H.filled=!!D.fill,D.stroke?(b||(b=f._stroke=Ao("stroke")),H.appendChild(b),b.weight=D.weight+"px",b.color=D.color,b.opacity=D.opacity,D.dashArray?b.dashStyle=w(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=D.lineCap.replace("butt","flat"),b.joinstyle=D.lineJoin):b&&(H.removeChild(b),f._stroke=null),D.fill?(k||(k=f._fill=Ao("fill")),H.appendChild(k),k.color=D.fillColor||D.color,k.opacity=D.fillOpacity):k&&(H.removeChild(k),f._fill=null)},_updateCircle:function(f){var b=f._point.round(),k=Math.round(f._radius),D=Math.round(f._radiusY||k);this._setPath(f,f._empty()?"M0 0":"AL "+b.x+","+b.y+" "+k+","+D+" 0,"+65535*360)},_setPath:function(f,b){f._path.v=b},_bringToFront:function(f){Xo(f._container)},_bringToBack:function(f){Yo(f._container)}},yd=St.vml?Ao:Pe,rc=Zr.extend({_initContainer:function(){this._container=yd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lr(this._container),vr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zr.prototype._update.call(this);var f=this._bounds,b=f.getSize(),k=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,k.setAttribute("width",b.x),k.setAttribute("height",b.y)),Tn(k,f.min),k.setAttribute("viewBox",[f.min.x,f.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(f){var b=f._path=yd("path");f.options.className&&dr(b,f.options.className),f.options.interactive&&dr(b,"leaflet-interactive"),this._updateStyle(f),this._layers[c(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){lr(f._path),f.removeInteractiveTarget(f._path),delete this._layers[c(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var b=f._path,k=f.options;b&&(k.stroke?(b.setAttribute("stroke",k.color),b.setAttribute("stroke-opacity",k.opacity),b.setAttribute("stroke-width",k.weight),b.setAttribute("stroke-linecap",k.lineCap),b.setAttribute("stroke-linejoin",k.lineJoin),k.dashArray?b.setAttribute("stroke-dasharray",k.dashArray):b.removeAttribute("stroke-dasharray"),k.dashOffset?b.setAttribute("stroke-dashoffset",k.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),k.fill?(b.setAttribute("fill",k.fillColor||k.color),b.setAttribute("fill-opacity",k.fillOpacity),b.setAttribute("fill-rule",k.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(f,b){this._setPath(f,de(f._parts,b))},_updateCircle:function(f){var b=f._point,k=Math.max(Math.round(f._radius),1),D=Math.max(Math.round(f._radiusY),1)||k,H="a"+k+","+D+" 0 1,0 ",ce=f._empty()?"M0 0":"M"+(b.x-k)+","+b.y+H+k*2+",0 "+H+-k*2+",0 ";this._setPath(f,ce)},_setPath:function(f,b){f._path.setAttribute("d",b)},_bringToFront:function(f){Xo(f._path)},_bringToBack:function(f){Yo(f._path)}});St.vml&&rc.include(Fm);function vi(f){return St.svg||St.vml?new rc(f):null}gr.include({getRenderer:function(f){var b=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var b=this._paneRenderers[f];return b===void 0&&(b=this._createRenderer({pane:f}),this._paneRenderers[f]=b),b},_createRenderer:function(f){return this.options.preferCanvas&&vd(f)||vi(f)}});var Gi=Ss.extend({initialize:function(f,b){Ss.prototype.initialize.call(this,this._boundsToLatLngs(f),b)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=ie(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function zm(f,b){return new Gi(f,b)}rc.create=yd,rc.pointsToPath=de,pa.geometryToLayer=iu,pa.coordsToLatLng=il,pa.coordsToLatLngs=As,pa.latLngToCoords=Ps,pa.latLngsToCoords=Va,pa.getFeature=xi,pa.asFeature=ga,gr.mergeOptions({boxZoom:!0});var Qh=gi.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){nr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Jc(),$h(),this._startPoint=this._map.mouseEventToContainerPoint(f),nr(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Nr("div","leaflet-zoom-box",this._container),dr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var b=new xe(this._point,this._startPoint),k=b.getSize();Tn(this._box,b.min),this._box.style.width=k.x+"px",this._box.style.height=k.y+"px"},_finish:function(){this._moved&&(lr(this._box),Tr(this._container,"leaflet-crosshair")),Jo(),za(),vr(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var b=new X(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});gr.addInitHook("addHandler","boxZoom",Qh),gr.mergeOptions({doubleClickZoom:!0});var Fx=gi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var b=this._map,k=b.getZoom(),D=b.options.zoomDelta,H=f.originalEvent.shiftKey?k-D:k+D;b.options.doubleClickZoom==="center"?b.setZoom(H):b.setZoomAround(f.containerPoint,H)}});gr.addInitHook("addHandler","doubleClickZoom",Fx),gr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ef=gi.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new ma(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}dr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tr(this._map._container,"leaflet-grab"),Tr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=ie(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var b=this._lastTime=+new Date,k=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(k),this._times.push(b),this._prunePositions(b)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,b){return f-(f-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;f.x<b.min.x&&(f.x=this._viscousLimit(f.x,b.min.x)),f.y<b.min.y&&(f.y=this._viscousLimit(f.y,b.min.y)),f.x>b.max.x&&(f.x=this._viscousLimit(f.x,b.max.x)),f.y>b.max.y&&(f.y=this._viscousLimit(f.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,b=Math.round(f/2),k=this._initialWorldOffset,D=this._draggable._newPos.x,H=(D-b+k)%f+b-k,ce=(D+b+k)%f-b-k,Te=Math.abs(H+k)<Math.abs(ce+k)?H:ce;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Te},_onDragEnd:function(f){var b=this._map,k=b.options,D=!k.inertia||f.noInertia||this._times.length<2;if(b.fire("dragend",f),D)b.fire("moveend");else{this._prunePositions(+new Date);var H=this._lastPos.subtract(this._positions[0]),ce=(this._lastTime-this._times[0])/1e3,Te=k.easeLinearity,Ue=H.multiplyBy(Te/ce),Ze=Ue.distanceTo([0,0]),ct=Math.min(k.inertiaMaxSpeed,Ze),kt=Ue.multiplyBy(ct/Ze),qt=ct/(k.inertiaDeceleration*Te),pr=kt.multiplyBy(-qt/2).round();!pr.x&&!pr.y?b.fire("moveend"):(pr=b._limitOffset(pr,b.options.maxBounds),O(function(){b.panBy(pr,{duration:qt,easeLinearity:Te,noMoveStart:!0,animate:!0})}))}}});gr.addInitHook("addHandler","dragging",ef),gr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tf=gi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),nr(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,b=document.documentElement,k=f.scrollTop||b.scrollTop,D=f.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(D,k)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var b=this._panKeys={},k=this.keyCodes,D,H;for(D=0,H=k.left.length;D<H;D++)b[k.left[D]]=[-1*f,0];for(D=0,H=k.right.length;D<H;D++)b[k.right[D]]=[f,0];for(D=0,H=k.down.length;D<H;D++)b[k.down[D]]=[0,f];for(D=0,H=k.up.length;D<H;D++)b[k.up[D]]=[0,-1*f]},_setZoomDelta:function(f){var b=this._zoomKeys={},k=this.keyCodes,D,H;for(D=0,H=k.zoomIn.length;D<H;D++)b[k.zoomIn[D]]=f;for(D=0,H=k.zoomOut.length;D<H;D++)b[k.zoomOut[D]]=-f},_addHooks:function(){nr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var b=f.keyCode,k=this._map,D;if(b in this._panKeys){if(!k._panAnim||!k._panAnim._inProgress)if(D=this._panKeys[b],f.shiftKey&&(D=ee(D).multiplyBy(3)),k.options.maxBounds&&(D=k._limitOffset(ee(D),k.options.maxBounds)),k.options.worldCopyJump){var H=k.wrapLatLng(k.unproject(k.project(k.getCenter()).add(D)));k.panTo(H)}else k.panBy(D)}else if(b in this._zoomKeys)k.setZoom(k.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&k._popup&&k._popup.options.closeOnEscapeKey)k.closePopup();else return;zi(f)}}});gr.addInitHook("addHandler","keyboard",tf),gr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Bm=gi.extend({addHooks:function(){nr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var b=cd(f),k=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var D=Math.max(k-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),zi(f)},_performZoom:function(){var f=this._map,b=f.getZoom(),k=this._map.options.zoomSnap||0;f._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),H=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,ce=k?Math.ceil(H/k)*k:H,Te=f._limitZoom(b+(this._delta>0?ce:-ce))-b;this._delta=0,this._startTime=null,Te&&(f.options.scrollWheelZoom==="center"?f.setZoom(b+Te):f.setZoomAround(this._lastMousePos,b+Te))}});gr.addInitHook("addHandler","scrollWheelZoom",Bm);var J0=600;gr.mergeOptions({tapHold:St.touchNative&&St.safari&&St.mobile,tapTolerance:15});var qm=gi.extend({addHooks:function(){nr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var b=f.touches[0];this._startPos=this._newPos=new G(b.clientX,b.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(nr(document,"touchend",In),nr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),J0),nr(document,"touchend touchcancel contextmenu",this._cancel,this),nr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){vr(document,"touchend",In),vr(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),vr(document,"touchend touchcancel contextmenu",this._cancel,this),vr(document,"touchmove",this._onMove,this)},_onMove:function(f){var b=f.touches[0];this._newPos=new G(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,b){var k=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});k._simulated=!0,b.target.dispatchEvent(k)}});gr.addInitHook("addHandler","tapHold",qm),gr.mergeOptions({touchZoom:St.touch,bounceAtZoomLimits:!0});var Vm=gi.extend({addHooks:function(){dr(this._map._container,"leaflet-touch-zoom"),nr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tr(this._map._container,"leaflet-touch-zoom"),vr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var b=this._map;if(!(!f.touches||f.touches.length!==2||b._animatingZoom||this._zooming)){var k=b.mouseEventToContainerPoint(f.touches[0]),D=b.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(k.add(D)._divideBy(2))),this._startDist=k.distanceTo(D),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),nr(document,"touchmove",this._onTouchMove,this),nr(document,"touchend touchcancel",this._onTouchEnd,this),In(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var b=this._map,k=b.mouseEventToContainerPoint(f.touches[0]),D=b.mouseEventToContainerPoint(f.touches[1]),H=k.distanceTo(D)/this._startDist;if(this._zoom=b.getScaleZoom(H,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&H<1||this._zoom>b.getMaxZoom()&&H>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,H===1)return}else{var ce=k._add(D)._divideBy(2)._subtract(this._centerPoint);if(H===1&&ce.x===0&&ce.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(ce),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var Te=o(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(Te,this,!0),In(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),vr(document,"touchmove",this._onTouchMove,this),vr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});gr.addInitHook("addHandler","touchZoom",Vm),gr.BoxZoom=Qh,gr.DoubleClickZoom=Fx,gr.Drag=ef,gr.Keyboard=tf,gr.ScrollWheelZoom=Bm,gr.TapHold=qm,gr.TouchZoom=Vm,r.Bounds=xe,r.Browser=St,r.CRS=Ne,r.Canvas=So,r.Circle=Bs,r.CircleMarker=nl,r.Class=F,r.Control=Gn,r.DivIcon=ec,r.DivOverlay=qs,r.DomEvent=Lm,r.DomUtil=er,r.Draggable=ma,r.Evented=ne,r.FeatureGroup=Vi,r.GeoJSON=pa,r.GridLayer=al,r.Handler=gi,r.Icon=qa,r.ImageOverlay=Jl,r.LatLng=me,r.LatLngBounds=X,r.Layer=wn,r.LayerGroup=ei,r.LineUtil=Sr,r.Map=gr,r.Marker=Zn,r.Mixin=Rm,r.Path=Ui,r.Point=G,r.PolyUtil=hd,r.Polygon=Ss,r.Polyline=Hi,r.Popup=_o,r.PosAnimation=Bh,r.Projection=Kn,r.Rectangle=Gi,r.Renderer=Zr,r.SVG=rc,r.SVGOverlay=Yh,r.TileLayer=Cs,r.Tooltip=No,r.Transformation=se,r.Util=q,r.VideoOverlay=Wi,r.bind=o,r.bounds=B,r.canvas=vd,r.circle=$x,r.circleMarker=Xh,r.control=Bi,r.divIcon=tc,r.extend=i,r.featureGroup=Kh,r.geoJSON=wo,r.geoJson=Rn,r.gridLayer=xa,r.icon=Zh,r.imageOverlay=ti,r.latLng=ye,r.latLngBounds=ie,r.layerGroup=Dm,r.map=Mm,r.marker=md,r.point=ee,r.polygon=pd,r.polyline=$m,r.popup=Ql,r.rectangle=zm,r.setOptions=g,r.stamp=c,r.svg=vi,r.svgOverlay=Jh,r.tileLayer=Gr,r.tooltip=xd,r.transformation=Z,r.version=s,r.videoOverlay=gd;var Um=window.L;r.noConflict=function(){return window.L=Um,this},window.L=r})})(mP,mP.exports);var xx=mP.exports;const bm=Er(xx);function t_(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function r_(e,t){return t==null?function(s,i){const a=x.useRef();return a.current||(a.current=e(s,i)),a}:function(s,i){const a=x.useRef();a.current||(a.current=e(s,i));const o=x.useRef(s),{instance:l}=a.current;return x.useEffect(function(){o.current!==s&&(t(l,s,o.current),o.current=s)},[l,s,i]),a}}function IH(e,t){x.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function RH(e){return function(r){const s=Q2(),i=e(e_(r,s),s);return EH(s.map,r.attribution),VE(i.current,r.eventHandlers),IH(i.current,s),i}}function U0e(e,t){const r=x.useRef();x.useEffect(function(){if(t.pathOptions!==r.current){const i=t.pathOptions??{};e.instance.setStyle(i),r.current=i}},[e,t])}function H0e(e){return function(r){const s=Q2(),i=e(e_(r,s),s);return VE(i.current,r.eventHandlers),IH(i.current,s),U0e(i.current,r),i}}function W0e(e,t){const r=r_(e,t),s=RH(r);return MH(s)}function G0e(e,t){const r=r_(e),s=V0e(r,t);return B0e(s)}function K0e(e,t){const r=r_(e,t),s=H0e(r);return MH(s)}function Z0e(e,t){const r=r_(e,t),s=RH(r);return q0e(s)}function X0e(e,t,r){const{opacity:s,zIndex:i}=t;s!=null&&s!==r.opacity&&e.setOpacity(s),i!=null&&i!==r.zIndex&&e.setZIndex(i)}function DH(){return Q2().map}const Y0e=K0e(function({data:t,...r},s){const i=new xx.GeoJSON(t,r);return t_(i,TH(s,{overlayContainer:i}))},function(t,r,s){r.style!==s.style&&(r.style==null?t.resetStyle():t.setStyle(r.style))});function pP(){return pP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pP.apply(this,arguments)}function J0e({bounds:e,boundsOptions:t,center:r,children:s,className:i,id:a,placeholder:o,style:l,whenReady:c,zoom:u,...d},h){const[m]=x.useState({className:i,id:a,style:l}),[p,v]=x.useState(null);x.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const g=x.useCallback(j=>{if(j!==null&&p===null){const _=new xx.Map(j,d);r!=null&&u!=null?_.setView(r,u):e!=null&&_.fitBounds(e,t),c!=null&&_.whenReady(c),v(z0e(_))}},[]);x.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const y=p?we.createElement(LH,{value:p},s):o??null;return we.createElement("div",pP({},m,{ref:g}),y)}const UE=x.forwardRef(J0e),HE=W0e(function({position:t,...r},s){const i=new xx.Marker(t,r);return t_(i,TH(s,{overlayContainer:i}))},function(t,r,s){r.position!==s.position&&t.setLatLng(r.position),r.icon!=null&&r.icon!==s.icon&&t.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==s.opacity&&t.setOpacity(r.opacity),t.dragging!=null&&r.draggable!==s.draggable&&(r.draggable===!0?t.dragging.enable():t.dragging.disable())}),WE=G0e(function(t,r){const s=new xx.Popup(t,r.overlayContainer);return t_(s,r)},function(t,r,{position:s},i){x.useEffect(function(){const{instance:o}=t;function l(u){u.popup===o&&(o.update(),i(!0))}function c(u){u.popup===o&&i(!1)}return r.map.on({popupopen:l,popupclose:c}),r.overlayContainer==null?(s!=null&&o.setLatLng(s),o.openOn(r.map)):r.overlayContainer.bindPopup(o),function(){var d;r.map.off({popupopen:l,popupclose:c}),(d=r.overlayContainer)==null||d.unbindPopup(),r.map.removeLayer(o)}},[t,r,i,s])}),GE=Z0e(function({url:t,...r},s){const i=new xx.TileLayer(t,e_(r,s));return t_(i,s)},function(t,r,s){X0e(t,r,s);const{url:i}=r;i!=null&&i!==s.url&&t.setUrl(i)});delete bm.Icon.Default.prototype._getIconUrl;bm.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Q0e=({lat:e,lng:t})=>{const r=DH();return we.useEffect(()=>{e&&t&&r.setView([e,t])},[e,t,r]),null},ebe=({coordinates:e,locationName:t})=>{const r=e?[e.lat,e.lng]:null;return r?n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center",children:[n.jsx(jr,{className:"mr-2 h-5 w-5"}),"Localisation"]})}),n.jsxs(ve,{children:[n.jsx("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:n.jsxs(UE,{center:r,zoom:15,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[n.jsx(GE,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),n.jsx(HE,{position:r,children:n.jsx(WE,{children:t||"Emplacement de la parcelle"})}),n.jsx(Q0e,{lat:r[0],lng:r[1]})]})}),n.jsxs("p",{className:"text-sm mt-2 text-muted-foreground",children:["Zone: ",t]})]})]}):n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center",children:[n.jsx(jr,{className:"mr-2 h-5 w-5"}),"Localisation"]})}),n.jsx(ve,{children:n.jsx("div",{className:"aspect-video bg-muted rounded flex items-center justify-center text-muted-foreground",children:"Coordonnes de localisation non disponibles."})})]})},tbe=e=>{switch(e){case"Vrifi":return"success";case"En attente":return"warning";case"Info Manquante":return"destructive";default:return"secondary"}},rbe=e=>{switch(e){case"Vrifi":return n.jsx(Qt,{className:"h-4 w-4 mr-1.5 text-green-600"});case"En attente":return n.jsx(ln,{className:"h-4 w-4 mr-1.5 text-yellow-600"});case"Info Manquante":return n.jsx(ds,{className:"h-4 w-4 mr-1.5 text-red-600"});default:return n.jsx(Cr,{className:"h-4 w-4 mr-1.5"})}},nbe=({documents:e=[]})=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Documents Disponibles"})}),n.jsx(ve,{children:e.length>0?n.jsx("ul",{className:"space-y-3",children:e.map((t,r)=>n.jsxs("li",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"flex items-center font-medium",children:[rbe(t.status),t.name," "]}),n.jsx(Ge,{variant:tbe(t.status),children:t.status})," "]},r))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun document spcifique list pour cette parcelle."})})]}),sbe=({parcel:e,onRequestInfo:t,onInitiateBuy:r,onRequestVisit:s})=>{const[i,a]=x.useState(!1),o=e.ownerType!=="Mairie";return n.jsxs(n.Fragment,{children:[n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Actions Rapides"}),n.jsx(jt,{children:"Interagissez avec cette parcelle."})]}),n.jsx(ve,{children:e.status==="Disponible"?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs(Y,{size:"lg",className:"w-full",onClick:t,children:[n.jsx(Iu,{className:"mr-2 h-4 w-4"})," Demander Plus d'Infos"]}),n.jsxs(Y,{size:"lg",className:"w-full bg-gradient-to-r from-green-600 to-accent_brand text-white hover:opacity-90",onClick:r,children:[n.jsx(b2,{className:"mr-2 h-4 w-4"})," Initier l'Achat"]}),n.jsxs(Y,{size:"lg",variant:"outline",className:"w-full",onClick:s,children:[n.jsx(ck,{className:"mr-2 h-4 w-4"})," Demander une Visite"]}),o&&n.jsxs(Y,{size:"lg",variant:"secondary",className:"w-full",onClick:()=>a(!0),children:[n.jsx(Pz,{className:"mr-2 h-4 w-4"})," Payer en plusieurs fois"]})]}):e.status==="Rserve"?n.jsx("p",{className:"text-center text-yellow-600 font-medium w-full py-4",children:"Cette parcelle est actuellement rserve. Vous pouvez toujours demander des informations."}):n.jsx("p",{className:"text-center text-destructive font-medium w-full py-4",children:"Cette parcelle a t vendue."})})]}),o&&n.jsx(pH,{isOpen:i,onClose:()=>a(!1),parcelPrice:e.price,parcelName:e.name})]})},ibe=e=>e==null?"N/A":new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),abe=e=>{switch(e){case"Disponible":return"success";case"Rserve":return"warning";case"Vendue":return"destructive";default:return"secondary"}},obe=({parcel:e})=>n.jsxs(he,{className:"h-full flex flex-col overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs(Ce,{className:"p-0 relative",children:[n.jsx("div",{className:"aspect-video bg-muted overflow-hidden",children:n.jsx("img",{className:"w-full h-full object-cover",alt:`Image pour ${e.location_name}`,src:"https://images.unsplash.com/photo-1668409061470-ba250024d416"})}),n.jsx(Ge,{variant:abe(e.status),className:"absolute top-2 right-2 text-xs",children:e.status})]}),n.jsxs(ve,{className:"p-3 flex-grow",children:[n.jsx(ke,{className:"text-base mb-1 truncate",children:e.location_name}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-0.5",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(jr,{className:"h-3 w-3 mr-1"})," ",e.zone||"N/A"]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(k0,{className:"h-3 w-3 mr-1"})," ",e.area_sqm?`${e.area_sqm} m`:"N/A"]})]})]}),n.jsxs(Wn,{className:"p-3 border-t flex justify-between items-center",children:[n.jsx("p",{className:"text-sm font-bold text-accent_brand",children:ibe(e.price)}),n.jsx(Y,{size:"xs",variant:"outline",asChild:!0,children:n.jsx(dt,{to:`/parcelles/${e.id}`,children:"Voir"})})]})]}),lbe=()=>n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>n.jsxs(he,{children:[n.jsx(Ct,{className:"aspect-video w-full"}),n.jsxs(ve,{className:"p-3 space-y-1",children:[n.jsx(Ct,{className:"h-4 w-3/4"}),n.jsx(Ct,{className:"h-3 w-1/2"}),n.jsx(Ct,{className:"h-3 w-1/2"})]}),n.jsxs(Wn,{className:"p-3 border-t flex justify-between items-center",children:[n.jsx(Ct,{className:"h-4 w-1/3"}),n.jsx(Ct,{className:"h-7 w-1/4"})]})]},t))}),cbe=({currentParcelId:e,currentParcelZone:t})=>{const[r,s]=x.useState([]),[i,a]=x.useState(!0);return x.useEffect(()=>{t&&(async()=>{a(!0);try{const c=(await Je.getParcelsByZone(t,12)).filter(u=>u.id!==e&&(u.status==="Disponible"||u.status==="available")).slice(0,4);s(c)}catch(l){console.error("Erreur chargement parcelles similaires:",l),s([])}finally{a(!1)}})()},[e,t]),i?n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Parcelles Similaires"}),n.jsx(lbe,{})]}):r.length===0?null:n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:['Parcelles Similaires dans la Zone "',t,'"']}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map(o=>n.jsx(obe,{parcel:o},o.id))})]})},ube=()=>n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(he,{children:[n.jsx(Ct,{className:"aspect-video w-full rounded-t-lg"}),n.jsx(ve,{className:"p-2 grid grid-cols-5 gap-2",children:[...Array(4)].map((e,t)=>n.jsx(Ct,{className:"aspect-square w-full rounded"},t))})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(Ct,{className:"h-6 w-1/4"})}),n.jsxs(ve,{className:"space-y-2",children:[n.jsx(Ct,{className:"h-4 w-full"}),n.jsx(Ct,{className:"h-4 w-full"}),n.jsx(Ct,{className:"h-4 w-3/4"})]})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(Ct,{className:"h-6 w-1/3"})}),n.jsxs(ve,{className:"space-y-2",children:[n.jsx(Ct,{className:"h-4 w-1/2"}),n.jsx(Ct,{className:"h-4 w-2/3"})]})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(Ct,{className:"h-6 w-1/4"})}),n.jsxs(ve,{children:[n.jsx(Ct,{className:"aspect-video w-full rounded"}),n.jsx(Ct,{className:"h-4 w-1/3 mt-2"})]})]})]}),n.jsx("div",{className:"lg:col-span-1 space-y-6",children:n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(Ct,{className:"h-8 w-3/4 mb-2"}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(Ct,{className:"h-6 w-20"}),n.jsx(Ct,{className:"h-4 w-1/3"})]})]}),n.jsxs(ve,{className:"space-y-3",children:[n.jsx(Ct,{className:"h-10 w-1/2"}),n.jsx(Ct,{className:"h-4 w-full"}),n.jsx(Ct,{className:"h-4 w-full"}),n.jsx(Ct,{className:"h-4 w-3/4"}),n.jsxs("div",{className:"flex space-x-2 pt-3 border-t mt-4",children:[n.jsx(Ct,{className:"h-9 w-9 rounded-md"}),n.jsx(Ct,{className:"h-9 w-9 rounded-md"})]})]}),n.jsxs(Wn,{className:"flex flex-col gap-2",children:[n.jsx(Ct,{className:"h-10 w-full"}),n.jsx(Ct,{className:"h-10 w-full"}),n.jsx(Ct,{className:"h-10 w-full"})]})]})})]});var $H=["PageUp","PageDown"],FH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],zH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},vx="Slider",[gP,dbe,hbe]=Ph(vx),[BH,DHe]=ws(vx,[hbe]),[fbe,n_]=BH(vx),qH=x.forwardRef((e,t)=>{const{name:r,min:s=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:v,...g}=e,y=x.useRef(new Set),j=x.useRef(0),w=o==="horizontal"?mbe:pbe,[A=[],S]=Ri({prop:d,defaultProp:u,onChange:O=>{var q;(q=[...y.current][j.current])==null||q.focus(),h(O)}}),P=x.useRef(A);function C(O){const I=bbe(A,O);z(O,I)}function T(O){z(O,j.current)}function M(){const O=P.current[j.current];A[j.current]!==O&&m(A)}function z(O,I,{commit:q}={commit:!1}){const F=Nbe(a),W=Sbe(Math.round((O-s)/a)*a+s,F),V=zj(W,[s,i]);S((ne=[])=>{const G=vbe(ne,V,I);if(_be(G,c*a)){j.current=G.indexOf(V);const K=String(G)!==String(ne);return K&&q&&m(G),K?G:ne}else return ne})}return n.jsx(fbe,{scope:e.__scopeSlider,name:r,disabled:l,min:s,max:i,valueIndexToChangeRef:j,thumbs:y.current,values:A,orientation:o,form:v,children:n.jsx(gP.Provider,{scope:e.__scopeSlider,children:n.jsx(gP.Slot,{scope:e.__scopeSlider,children:n.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:ft(g.onPointerDown,()=>{l||(P.current=A)}),min:s,max:i,inverted:p,onSlideStart:l?void 0:C,onSlideMove:l?void 0:T,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&z(s,0,{commit:!0}),onEndKeyDown:()=>!l&&z(i,A.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:I})=>{if(!l){const W=$H.includes(O.key)||O.shiftKey&&FH.includes(O.key)?10:1,V=j.current,ne=A[V],G=a*W*I;z(ne+G,V,{commit:!0})}}})})})})});qH.displayName=vx;var[VH,UH]=BH(vx,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mbe=x.forwardRef((e,t)=>{const{min:r,max:s,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[h,m]=x.useState(null),p=Gt(t,w=>m(w)),v=x.useRef(void 0),g=Ch(i),y=g==="ltr",j=y&&!a||!y&&a;function _(w){const A=v.current||h.getBoundingClientRect(),S=[0,A.width],C=KE(S,j?[r,s]:[s,r]);return v.current=A,C(w-A.left)}return n.jsx(VH,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:n.jsx(HH,{dir:g,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const A=_(w.clientX);o==null||o(A)},onSlideMove:w=>{const A=_(w.clientX);l==null||l(A)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:w=>{const S=zH[j?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:S?-1:1})}})})}),pbe=x.forwardRef((e,t)=>{const{min:r,max:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=x.useRef(null),h=Gt(t,d),m=x.useRef(void 0),p=!i;function v(g){const y=m.current||d.current.getBoundingClientRect(),j=[0,y.height],w=KE(j,p?[s,r]:[r,s]);return m.current=y,w(g-y.top)}return n.jsx(VH,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:n.jsx(HH,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=v(g.clientY);a==null||a(y)},onSlideMove:g=>{const y=v(g.clientY);o==null||o(y)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:g=>{const j=zH[p?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:j?-1:1})}})})}),HH=x.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=n_(vx,r);return n.jsx(_t.span,{...u,ref:t,onKeyDown:ft(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):$H.concat(FH).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ft(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():s(h)}),onPointerMove:ft(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:ft(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),WH="SliderTrack",GH=x.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,i=n_(WH,r);return n.jsx(_t.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});GH.displayName=WH;var xP="SliderRange",KH=x.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,i=n_(xP,r),a=UH(xP,r),o=x.useRef(null),l=Gt(t,o),c=i.values.length,u=i.values.map(m=>YH(m,i.min,i.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return n.jsx(_t.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:l,style:{...e.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});KH.displayName=xP;var vP="SliderThumb",ZH=x.forwardRef((e,t)=>{const r=dbe(e.__scopeSlider),[s,i]=x.useState(null),a=Gt(t,l=>i(l)),o=x.useMemo(()=>s?r().findIndex(l=>l.ref.current===s):-1,[r,s]);return n.jsx(gbe,{...e,ref:a,index:o})}),gbe=x.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:i,...a}=e,o=n_(vP,r),l=UH(vP,r),[c,u]=x.useState(null),d=Gt(t,_=>u(_)),h=c?o.form||!!c.closest("form"):!0,m=L0(c),p=o.values[s],v=p===void 0?0:YH(p,o.min,o.max),g=ybe(s,o.values.length),y=m==null?void 0:m[l.size],j=y?jbe(y,v,l.direction):0;return x.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${j}px)`},children:[n.jsx(gP.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(_t.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:d,style:p===void 0?{display:"none"}:e.style,onFocus:ft(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),h&&n.jsx(XH,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},s)]})});ZH.displayName=vP;var xbe="RadioBubbleInput",XH=x.forwardRef(({__scopeSlider:e,value:t,...r},s)=>{const i=x.useRef(null),a=Gt(i,s),o=hx(t);return x.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),n.jsx(_t.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});XH.displayName=xbe;function vbe(e=[],t,r){const s=[...e];return s[r]=t,s.sort((i,a)=>i-a)}function YH(e,t,r){const a=100/(r-t)*(e-t);return zj(a,[0,100])}function ybe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function bbe(e,t){if(e.length===1)return 0;const r=e.map(i=>Math.abs(i-t)),s=Math.min(...r);return r.indexOf(s)}function jbe(e,t,r){const s=e/2,a=KE([0,50],[0,s]);return(s-a(t)*r)*r}function wbe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function _be(e,t){if(t>0){const r=wbe(e);return Math.min(...r)>=t}return!0}function KE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function Nbe(e){return(String(e).split(".")[1]||"").length}function Sbe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var JH=qH,Abe=GH,Pbe=KH,Cbe=ZH;const kbe=x.forwardRef(({className:e,...t},r)=>n.jsxs(JH,{ref:r,className:st("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(Abe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(Pbe,{className:"absolute h-full bg-primary"})}),n.jsx(Cbe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));kbe.displayName=JH.displayName;const lv=e=>new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),vM=.03,yM=.05,bM=5e4,Ebe=({price:e})=>{const[t,r]=x.useState(e);x.useEffect(()=>{r(e)},[e]);const s=t*vM,i=t*yM,a=s+i+bM,o=t+a;return n.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Estimation des Frais d'Acquisition"}),n.jsxs(jt,{className:"flex items-start text-xs text-muted-foreground pt-1",children:[n.jsx(Iu,{className:"h-3.5 w-3.5 mr-1.5 mt-0.5 shrink-0"}),"Ces montants sont indicatifs et bass sur des taux standards. Consultez un notaire pour une estimation prcise."]})]}),n.jsxs(ve,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-1 text-sm border-t pt-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Prix du bien :"}),n.jsx("span",{className:"font-medium",children:lv(t)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Frais de notaire (estims ~",vM*100,"%) :"]}),n.jsx("span",{className:"font-medium",children:lv(s)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Droits d'enregistrement (estims ~",yM*100,"%) :"]}),n.jsx("span",{className:"font-medium",children:lv(i)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Timbres fiscaux (estims) :"}),n.jsx("span",{className:"font-medium",children:lv(bM)})]})]}),n.jsx("div",{className:"border-t pt-3 mt-3",children:n.jsxs("div",{className:"flex justify-between text-base font-semibold",children:[n.jsx("span",{children:"Cot total estim :"}),n.jsx("span",{className:"text-accent_brand",children:lv(o)})]})})]})]})})};function QH({parcelId:e}){const[t,r]=x.useState([]),[s,i]=x.useState(1),[a]=x.useState(25),[o,l]=x.useState(0),[c,u]=x.useState(!1),[d,h]=x.useState(null),[m,p]=x.useState(!1);x.useEffect(()=>{v(s)},[e,s]),x.useEffect(()=>{if(!e)return;const y=pe.channel(`parcel-events-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"events",filter:`entity_type=eq.parcel,entity_id=eq.${e}`},j=>{r(_=>[{...j.new,source_type:"event"},..._].slice(0,a)),l(_=>_+1),p(!0),setTimeout(()=>p(!1),5e3)}).subscribe();return()=>{pe.removeChannel(y)}},[e,a]);async function v(y){if(!e)return;u(!0),h(null);const j=await Je.getParcelTimeline(e,{page:y,pageSize:a});j&&j.data?(r(j.data),l(j.total||0)):h("Impossible de charger la timeline"),u(!1)}const g=Math.max(1,Math.ceil(o/a));return n.jsxs("div",{className:"bg-white rounded shadow p-4 mt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsxs("h3",{className:"text-lg font-semibold",children:["Timeline Parcelle ",m&&n.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded bg-red-500 text-white animate-pulse",children:"LIVE"})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[o," vnements"]})]}),c&&n.jsx("div",{className:"text-sm text-gray-500",children:"Chargement..."}),d&&n.jsx("div",{className:"text-sm text-red-600",children:d}),!c&&!d&&t.length===0&&n.jsx("div",{className:"text-sm text-gray-500",children:"Aucun vnement."}),n.jsx("ul",{className:"space-y-2 max-h-96 overflow-y-auto pr-2",children:t.map(y=>n.jsxs("li",{className:"border border-gray-200 rounded p-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:Tbe(y.event_type)}),n.jsx("span",{className:"text-xs text-gray-500",children:new Date(y.created_at).toLocaleString()})]}),Obe(y)]},`${y.source_type}-${y.timeline_id||y.id}`))}),n.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm",children:[n.jsx("button",{disabled:s<=1,onClick:()=>i(y=>Math.max(1,y-1)),className:"px-2 py-1 border rounded disabled:opacity-40",children:"Prcdent"}),n.jsxs("span",{children:["Page ",s," / ",g]}),n.jsx("button",{disabled:s>=g,onClick:()=>i(y=>Math.min(g,y+1)),className:"px-2 py-1 border rounded disabled:opacity-40",children:"Suivant"})]})]})}function Tbe(e){return e?e.replace("parcel.","Parcelle: ").replace("_"," "):"vnement"}function Obe(e){if(e.source_type==="price_history"||e.event_type==="parcel.price_changed")return n.jsx("div",{className:"text-xs mt-1",children:n.jsxs("div",{children:["Prix: ",e.old_price!=null?jM(e.old_price):"","  ",e.new_price!=null?jM(e.new_price):""]})});if(e.data){const t=Object.keys(e.data||{}).slice(0,4);if(t.length)return n.jsx("div",{className:"text-xs text-gray-600 mt-1 flex flex-wrap gap-x-2 gap-y-1",children:t.map(r=>n.jsxs("span",{children:[n.jsxs("span",{className:"font-medium",children:[r,":"]})," ",Lbe(e.data[r])]},r))})}return null}function Lbe(e){return e==null?"":typeof e=="object"?JSON.stringify(e):String(e)}function jM(e){try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e)}catch{return e}}const Mbe=()=>{const{id:e}=_k(),t=kn(),{toast:r}=pt(),{user:s}=ar(),{comparisonList:i,addToCompare:a,removeFromCompare:o}=x.useContext(X2),[l,c]=x.useState(null),[u,d]=x.useState(!0),[h,m]=x.useState(null),[p,v]=x.useState(!1),[g,y]=x.useState(!1),j=i.includes(e),_=async()=>{try{d(!0),m(null);const M=await Je.getParcelById(e);if(!M){m("Parcelle non trouve.");return}const z={id:M.id,reference:M.reference,owner_id:M.owner_id||null,name:M.name||M.title||`Parcelle ${M.reference}`,location_name:M.location_name||M.location||"Localisation non spcifie",description:M.description||"Description indisponible.",price:M.price,area:M.area_sqm||M.area||null,zone:M.zone||M.location_zone||"",status:M.status,documents:M.documents||[],images:M.images||[],coordinates:M.coordinates?typeof M.coordinates=="string"?JSON.parse(M.coordinates):M.coordinates:null,ownerType:M.owner_type||"Propritaire",documentStatus:M.document_status||(M.verified?"Vrifi":"En attente")};c(z)}catch(M){console.error("Erreur chargement parcelle:",M),m("Erreur lors du chargement de la parcelle.")}finally{d(!1)}};x.useEffect(()=>{_(),y(!1)},[e]),x.useEffect(()=>{!l||!s||g||(async()=>{try{await Je.logParcelView(l.id,s.id,{source:"parcel_detail_page"}),await Je.recordUserActivity({userId:s.id,activityType:"parcel_view",entityType:"parcel",entityId:l.id,description:`Consultation de la parcelle ${l.name}`,metadata:{zone:l.zone}})}catch(M){console.warn("Instrumentation parcel view failed",M.message||M)}finally{y(!0)}})()},[l,s,g]);const w=async(M,z={})=>{if(!s){r({title:"Connexion requise",description:"Veuillez vous connecter pour effectuer cette action."}),t("/login",{state:{redirectTo:`/parcelles/${e}`}});return}try{const O={info:`Demande d'information pour ${l.location_name}.`,visit:`Demande de visite pour ${l.location_name}.`,buy:`Initiation de la procdure d'achat pour ${l.location_name}.`},I=await Je.createParcelInquiry({parcelId:l.id,inquirerId:s.id,inquiryType:M,message:O[M]||"Demande",metadata:{...z}});await Je.recordUserActivity({userId:s.id,activityType:`parcel_inquiry_${M}`,entityType:"parcel",entityId:l.id,description:O[M]}),l.owner_id&&l.owner_id!==s.id&&Je.createNotification({userId:l.owner_id,type:"parcel_inquiry",title:"Nouvelle demande sur votre parcelle",body:`${s.email||"Un utilisateur"} a envoy une demande (${M}).`,data:{parcel_id:l.id,inquiry_id:I==null?void 0:I.id,inquiry_type:M}}).catch(()=>{}),r({title:"Demande envoye",description:O[M]}),M==="buy"&&t("/messaging",{state:{parcelId:l.id,parcelName:l.name}})}catch(O){console.error("Inquiry action failed",O),r({title:"Erreur",description:"Impossible d'enregistrer la demande pour le moment.",variant:"destructive"})}},A=M=>{M?(a(e),r({title:"Ajout au comparateur",description:`"${l.name}" a t ajout.`})):(o(e),r({title:"Retir du comparateur",description:`"${l.name}" a t retir.`}))},S=()=>{r({title:"Partage",description:"Le lien de partage a t copi dans le presse-papiers."})};x.useEffect(()=>{(async()=>{if(s&&l)try{const M=await Je.isParcelFavorite(s.id,l.id);v(M)}catch{}})()},[s,l]);const P=async()=>{if(!s){r({title:"Connexion requise",description:"Connectez-vous pour grer vos favoris."}),t("/login",{state:{redirectTo:`/parcelles/${e}`}});return}try{p?(await Je.removeFromFavorites(s.id,l.id),v(!1),r({title:"Retir des favoris"}),Je.recordUserActivity({userId:s.id,activityType:"favorite_removed",entityType:"parcel",entityId:l.id,description:`Retrait favori ${l.name}`})):(await Je.addToFavorites(s.id,l.id),v(!0),r({title:"Ajout aux favoris"}),Je.recordUserActivity({userId:s.id,activityType:"favorite_added",entityType:"parcel",entityId:l.id,description:`Ajout favori ${l.name}`}))}catch(M){console.error("Toggle favorite failed",M),r({title:"Erreur",description:"Impossible de mettre  jour le favori.",variant:"destructive"})}},C=[{icon:Eae,name:"cole Primaire (simul)",distance:"500m"},{icon:b2,name:"March Local (simul)",distance:"1.2km"},{icon:Aie,name:"Centre de Sant (simul)",distance:"2km"},{icon:jr,name:"Arrt de Bus (simul)",distance:"300m"}],T=[{icon:ax,title:"Pack Diaspora",description:"Mandataire de confiance pour visites, dmarches et signatures.",link:"/contact?subject=Pack+Diaspora"},{icon:ns,title:"Pack Scurit Juridique",description:"Accompagnement complet par un notaire partenaire, de A  Z.",link:"/contact?subject=Pack+Securite"}];return u?n.jsx("div",{className:"container mx-auto py-8 px-2 sm:px-4",children:n.jsx(ube,{})}):h?n.jsxs("div",{className:"container mx-auto py-10 text-center",children:[n.jsx("h2",{className:"text-2xl font-semibold text-red-600",children:h}),n.jsx(dt,{to:"/parcelles",className:"text-primary hover:underline mt-4 inline-block",children:"Retourner  la liste des parcelles"})]}):l?n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsxs("title",{children:[`${l.name} - ${l.zone}`," | Teranga Foncier"]}),n.jsx("meta",{name:"description",content:`Dtails pour la parcelle ${l.name} de ${l.area} m situe  ${l.zone}. Prix: ${l.price} FCFA. Statut: ${l.status}.`}),n.jsx("meta",{property:"og:title",content:`${l.name} | Teranga Foncier`}),n.jsx("meta",{property:"og:description",content:l.description}),n.jsx("meta",{property:"og:image",content:"https://images.unsplash.com/photo-1542364041-2cada653f4ee"}),n.jsx("link",{rel:"canonical",href:`https://www.terangafoncier.com/parcelles/${l.id}`})]}),n.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-muted/30",children:n.jsxs("div",{className:"container mx-auto py-8 px-2 sm:px-4",children:[n.jsx(D0e,{parcel:l,isFavorite:p,isParcelInCompare:j,user:s,onToggleFavorite:P,onShare:S,onCompareChange:A}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(Y,{variant:"outline",size:"sm",onClick:_,className:"flex items-center",children:[n.jsx(Ta,{className:"h-4 w-4 mr-2"}),"Rafrachir"]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsx(O0e,{images:l.images||[],parcelName:l.location_name,parcelId:l.id}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center",children:[n.jsx(lk,{className:"h-5 w-5 mr-2 text-primary"})," Vendeur & Confiance"]})}),n.jsxs(ve,{className:"flex items-center space-x-4",children:[n.jsx(oi,{className:"h-8 w-8 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:l.ownerType}),n.jsx(Ge,{variant:l.documentStatus==="Vrifi"?"success":"secondary",children:l.documentStatus==="Vrifi"?"Vendeur Certifi":"Vrification en cours"})]})]})]}),n.jsx($0e,{description:l.description}),n.jsx(nbe,{documents:l.documents||[]}),n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},className:"bg-card p-6 rounded-lg shadow border",children:[n.jsxs("h3",{className:"text-xl font-semibold mb-4 text-primary flex items-center",children:[n.jsx(jr,{className:"mr-2 h-5 w-5"})," Points d'Intrt  Proximit (Simul)"]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:C.map((M,z)=>n.jsxs("div",{className:"flex flex-col items-center text-center p-3 bg-muted/50 rounded-md border border-dashed",children:[n.jsx(M.icon,{className:"h-7 w-7 mb-1.5 text-primary/80"}),n.jsx("p",{className:"text-xs font-medium text-foreground",children:M.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:M.distance})]},z))})]}),n.jsx(ebe,{coordinates:l.coordinates,locationName:l.location_name}),n.jsx(QH,{parcelId:l.id})]}),n.jsxs("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24 self-start",children:[n.jsx(sbe,{parcel:l,onRequestInfo:()=>w("info"),onInitiateBuy:()=>w("buy"),onRequestVisit:()=>w("visit")}),n.jsx(Ebe,{price:l.price}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Services d'Accompagnement"})}),n.jsx(ve,{className:"space-y-4",children:T.map(M=>n.jsxs("div",{className:"flex items-start",children:[n.jsx(M.icon,{className:"h-8 w-8 mr-3 text-primary flex-shrink-0 mt-1"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:M.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:M.description}),n.jsx(Y,{asChild:!0,variant:"link",size:"sm",className:"p-0 h-auto",children:n.jsx(dt,{to:M.link,children:"En savoir plus"})})]})]},M.title))})]})]})]}),n.jsx("div",{className:"mt-12",children:n.jsx(cbe,{currentParcelId:l.id,currentParcelZone:l.zone})}),n.jsx("div",{className:"mt-12 text-center",children:n.jsx(Y,{asChild:!0,variant:"outline",size:"lg",children:n.jsxs(dt,{to:"/parcelles",children:[n.jsx(P0,{className:"mr-2 h-5 w-5"})," Retour  toutes les parcelles"]})})})]})})]}):null};var eW="AlertDialog",[Ibe,$He]=ws(eW,[ZU]),Ku=ZU(),tW=e=>{const{__scopeAlertDialog:t,...r}=e,s=Ku(t);return n.jsx(dH,{...s,...r,modal:!0})};tW.displayName=eW;var Rbe="AlertDialogTrigger",rW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,i=Ku(r);return n.jsx(hH,{...i,...s,ref:t})});rW.displayName=Rbe;var Dbe="AlertDialogPortal",nW=e=>{const{__scopeAlertDialog:t,...r}=e,s=Ku(t);return n.jsx(fH,{...s,...r})};nW.displayName=Dbe;var $be="AlertDialogOverlay",sW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,i=Ku(r);return n.jsx(IE,{...i,...s,ref:t})});sW.displayName=$be;var Qp="AlertDialogContent",[Fbe,zbe]=Ibe(Qp),Bbe=Qre("AlertDialogContent"),iW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...i}=e,a=Ku(r),o=x.useRef(null),l=Gt(t,o),c=x.useRef(null);return n.jsx(Bye,{contentName:Qp,titleName:aW,docsSlug:"alert-dialog",children:n.jsx(Fbe,{scope:r,cancelRef:c,children:n.jsxs(RE,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:ft(i.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[n.jsx(Bbe,{children:s}),n.jsx(Vbe,{contentRef:o})]})})})});iW.displayName=Qp;var aW="AlertDialogTitle",oW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,i=Ku(r);return n.jsx(DE,{...i,...s,ref:t})});oW.displayName=aW;var lW="AlertDialogDescription",cW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,i=Ku(r);return n.jsx($E,{...i,...s,ref:t})});cW.displayName=lW;var qbe="AlertDialogAction",uW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,i=Ku(r);return n.jsx(FE,{...i,...s,ref:t})});uW.displayName=qbe;var dW="AlertDialogCancel",hW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:i}=zbe(dW,r),a=Ku(r),o=Gt(t,i);return n.jsx(FE,{...a,...s,ref:o})});hW.displayName=dW;var Vbe=({contentRef:e})=>{const t=`\`${Qp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qp}\` by passing a \`${lW}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Ube=tW,Hbe=rW,Wbe=nW,fW=sW,mW=iW,pW=uW,gW=hW,xW=oW,vW=cW;const Zu=Ube,Xu=Hbe,Gbe=Wbe,yW=x.forwardRef(({className:e,...t},r)=>n.jsx(fW,{className:st("fixed inset-0 z-50 bg-black/60 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));yW.displayName=fW.displayName;const Oc=x.forwardRef(({className:e,...t},r)=>n.jsxs(Gbe,{children:[n.jsx(yW,{}),n.jsx(mW,{ref:r,className:st("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...t})]}));Oc.displayName=mW.displayName;const Lc=({className:e,...t})=>n.jsx("div",{className:st("flex flex-col space-y-2 text-center sm:text-left",e),...t});Lc.displayName="AlertDialogHeader";const Mc=({className:e,...t})=>n.jsx("div",{className:st("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Mc.displayName="AlertDialogFooter";const Ic=x.forwardRef(({className:e,...t},r)=>n.jsx(xW,{ref:r,className:st("text-lg font-semibold",e),...t}));Ic.displayName=xW.displayName;const Rc=x.forwardRef(({className:e,...t},r)=>n.jsx(vW,{ref:r,className:st("text-sm text-muted-foreground",e),...t}));Rc.displayName=vW.displayName;const Dc=x.forwardRef(({className:e,...t},r)=>n.jsx(pW,{ref:r,className:st(ok(),e),...t}));Dc.displayName=pW.displayName;const $c=x.forwardRef(({className:e,...t},r)=>n.jsx(gW,{ref:r,className:st(ok({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));$c.displayName=gW.displayName;const Kbe=()=>{const{user:e,updateUserProfile:t,logout:r}=ar(),{toast:s}=pt(),i=kn(),[a,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,m]=x.useState(""),[p,v]=x.useState(""),[g,y]=x.useState(""),[j,_]=x.useState(!1),[w,A]=x.useState(!1);x.useEffect(()=>{var z,O;e&&(o(((z=e.user_metadata)==null?void 0:z.name)||e.name||""),c(e.email||""),d(((O=e.user_metadata)==null?void 0:O.phone)||e.phone||""))},[e]);const S=async z=>{if(z.preventDefault(),!a.trim()||!l.trim()){s({variant:"destructive",title:"Erreur",description:"Le nom et l'email ne peuvent pas tre vides."});return}_(!0);try{await t({name:a,phone:u}),s({title:"Profil mis  jour",description:"Vos informations ont t sauvegardes avec succs."})}catch(O){console.error("Error updating profile:",O),s({variant:"destructive",title:"Erreur de mise  jour",description:O.message})}finally{_(!1)}},P=async z=>{if(z.preventDefault(),p!==g){s({variant:"destructive",title:"Erreur",description:"Les nouveaux mots de passe ne correspondent pas."});return}if(!p){s({variant:"destructive",title:"Erreur",description:"Le nouveau mot de passe ne peut pas tre vide."});return}A(!0);try{await t({password:p}),s({title:"Mot de passe mis  jour",description:"Votre mot de passe a t chang avec succs."}),m(""),v(""),y("")}catch(O){console.error("Error updating password:",O),s({variant:"destructive",title:"Erreur de mise  jour du mot de passe",description:O.message})}finally{A(!1)}},C=async()=>{await r(),s({title:"Dconnexion russie",description:"Vous avez t dconnect."}),i("/")},T=()=>{s({title:"Suppression de Compte",description:" La suppression de compte n'est pas encore entirement fonctionnelle. Cette action sera irrversible.",variant:"warning",duration:5e3})};if(!e)return n.jsx("div",{className:"container mx-auto py-12 text-center",children:"Chargement du profil ou redirection..."});const M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return n.jsxs(Ae.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},className:"space-y-8 max-w-3xl mx-auto py-8 px-4",children:[n.jsx(Ae.h1,{variants:M,className:"text-3xl md:text-4xl font-bold text-primary text-center",children:"Mon Espace Personnel"}),n.jsx(Ae.div,{variants:M,children:n.jsxs(he,{className:"shadow-lg hover:shadow-primary/10 transition-shadow",children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"text-xl flex items-center",children:[n.jsx(oi,{className:"mr-2 h-5 w-5 text-primary"}),"Informations Personnelles"]}),n.jsx(jt,{children:"Mettez  jour vos informations de profil."})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:S,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"profile-name",children:"Nom Complet"}),n.jsx(De,{id:"profile-name",value:a,onChange:z=>o(z.target.value),disabled:j,placeholder:"Votre nom complet",className:"h-10"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"profile-email",children:"Adresse Email"}),n.jsx(De,{id:"profile-email",type:"email",value:l,disabled:!0,placeholder:"Votre adresse email"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pour changer d'email, veuillez contacter le support."})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"profile-phone",children:"Numro de Tlphone"}),n.jsx(De,{id:"profile-phone",type:"tel",value:u,onChange:z=>d(z.target.value),disabled:j,placeholder:"+221 XX XXX XX XX",className:"h-10"})]}),n.jsxs(Y,{type:"submit",disabled:j,className:"w-full sm:w-auto",children:[n.jsx(vk,{className:"mr-2 h-4 w-4"})," ",j?"Mise  jour en cours...":"Sauvegarder les Modifications"]})]})})]})}),n.jsx(Ae.div,{variants:M,children:n.jsxs(he,{className:"shadow-lg hover:shadow-primary/10 transition-shadow",children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"text-xl flex items-center",children:[n.jsx(Mie,{className:"mr-2 h-5 w-5 text-primary"}),"Changer le Mot de Passe"]}),n.jsx(jt,{children:"Pour votre scurit, choisissez un mot de passe fort."})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:P,className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"new-password",children:"Nouveau Mot de Passe"}),n.jsx(De,{id:"new-password",type:"password",value:p,onChange:z=>v(z.target.value),disabled:w,required:!0,className:"h-10",placeholder:"Minimum 8 caractres"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx($e,{htmlFor:"confirm-new-password",children:"Confirmer le Nouveau Mot de Passe"}),n.jsx(De,{id:"confirm-new-password",type:"password",value:g,onChange:z=>y(z.target.value),disabled:w,required:!0,className:"h-10",placeholder:"Retapez votre nouveau mot de passe"})]}),n.jsxs(Y,{type:"submit",disabled:w,className:"w-full sm:w-auto",children:[n.jsx(Ys,{className:"mr-2 h-4 w-4"})," ",w?"Mise  jour en cours...":"Changer le Mot de Passe"]})]})})]})}),n.jsxs(Ae.div,{variants:M,className:"space-y-4 pt-6 border-t",children:[n.jsxs(Y,{onClick:C,variant:"outline",className:"w-full sm:w-auto",children:[n.jsx(pk,{className:"mr-2 h-4 w-4"})," Se Dconnecter"]}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsxs(Y,{variant:"destructive",className:"w-full sm:w-auto sm:ml-2",children:[n.jsx(di,{className:"mr-2 h-4 w-4"})," Supprimer mon Compte"]})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"tes-vous absolument sr ?"}),n.jsx(Rc,{children:"Cette action est irrversible et supprimera dfinitivement votre compte et toutes vos donnes associes de Teranga Foncier."})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:T,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Oui, Supprimer mon Compte"})]})]})]})]})]})},ms=x.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:st("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ms.displayName="Textarea";const Zbe=()=>{const{toast:e}=pt(),[t,r]=x.useState(!1),[s,i]=x.useState({name:"",email:"",subject:"",message:""}),a=u=>{const{id:d,value:h}=u.target;i(m=>({...m,[d]:h}))},o=async u=>{u.preventDefault(),r(!0);try{const{error:d}=await pe.from("contact_messages").insert([{name:s.name,email:s.email,subject:s.subject,message:s.message}]);if(d)throw d;e({title:"Message Envoy !",description:"Merci de nous avoir contacts. Votre message a t enregistr et nous reviendrons vers vous bientt.",className:"bg-green-500 text-white"}),u.target.reset(),i({name:"",email:"",subject:"",message:""})}catch(d){console.error("Error sending contact form:",d),e({title:"Erreur d'envoi",description:"Une erreur est survenue. Veuillez ressayer plus tard.",variant:"destructive"})}finally{r(!1)}},l={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6}}},c={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5}}};return n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Contact - Participez  la Transformation Digitale du Sngal"}),n.jsx("meta",{name:"description",content:"Contactez Teranga Foncier pour collaborer sur des projets lis  la transformation numrique du Sngal. Nous sommes ouverts aux partenariats aligns avec l'agenda C50."}),n.jsx("meta",{property:"og:title",content:"Contactez Teranga Foncier - Transformation Numrique"}),n.jsx("meta",{property:"og:description",content:"Notre quipe est disponible pour discuter de la transformation digitale du secteur foncier sngalais."}),n.jsx("link",{rel:"canonical",href:"https://www.terangafoncier.com/contact"})]}),n.jsxs(Ae.div,{variants:l,initial:"initial",animate:"animate",className:"container mx-auto py-24 px-4",children:[n.jsxs(Ae.div,{variants:c,className:"text-center mb-12 md:mb-16",children:[n.jsx(Ol,{className:"h-16 w-16 md:h-20 md:w-20 mx-auto mb-6 text-primary"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Contactez-Nous"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto",children:"Une question sur notre rle dans la transformation numrique ? Notre quipe est l pour vous accompagner."})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 md:gap-12",children:[n.jsx(Ae.div,{variants:c,className:"lg:col-span-3",children:n.jsxs(he,{className:"shadow-xl border-border/50 bg-card hover:shadow-primary/10 transition-shadow duration-300",children:[n.jsxs(Ce,{children:[n.jsx(ke,{className:"text-2xl",children:"Envoyez-nous un message direct"}),n.jsx(jt,{children:"Remplissez le formulaire ci-dessous. Votre message sera enregistr en toute scurit."})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:o,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx($e,{htmlFor:"name",className:"font-medium",children:"Nom complet"}),n.jsx(De,{id:"name",name:"name",placeholder:"Votre nom et prnom",required:!0,className:"h-11",value:s.name,onChange:a})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx($e,{htmlFor:"email",className:"font-medium",children:"Adresse Email"}),n.jsx(De,{id:"email",type:"email",name:"email",placeholder:"votre.email@exemple.com",required:!0,className:"h-11",value:s.email,onChange:a})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx($e,{htmlFor:"subject",className:"font-medium",children:"Sujet de votre message"}),n.jsx(De,{id:"subject",name:"subject",placeholder:"Ex: Partenariat transformation digitale",required:!0,className:"h-11",value:s.subject,onChange:a})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx($e,{htmlFor:"message",className:"font-medium",children:"Votre Message"}),n.jsx(ms,{id:"message",name:"message",placeholder:"crivez votre message dtaill ici...",rows:6,required:!0,value:s.message,onChange:a})]}),n.jsxs(Y,{type:"submit",size:"lg",className:"w-full sm:w-auto bg-primary text-primary-foreground hover:bg-primary/90",disabled:t,children:[t?n.jsx(yg,{className:"mr-2 h-5 w-5 animate-spin"}):n.jsx(Ol,{className:"mr-2 h-5 w-5"}),t?"Envoi en cours...":"Envoyer le Message"]})]})})]})}),n.jsxs(Ae.div,{variants:c,className:"lg:col-span-2 space-y-6",children:[n.jsxs(he,{className:"shadow-lg border-border/50 bg-card hover:shadow-accent_brand/10 transition-shadow duration-300",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"text-xl flex items-center",children:[n.jsx(Vn,{className:"mr-2 h-5 w-5 text-accent_brand"}),"Nos Coordonnes"]})}),n.jsxs(ve,{className:"space-y-5",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx(jr,{className:"h-5 w-5 mr-3 mt-1 text-accent_brand flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground",children:"Adresse"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Dakar, Sngal"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(Sh,{className:"h-5 w-5 mr-3 mt-1 text-accent_brand flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground",children:"Tlphone"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"+221 77 593 42 41"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(C0,{className:"h-5 w-5 mr-3 mt-1 text-accent_brand flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground",children:"Email"}),n.jsx("p",{className:"text-muted-foreground text-sm hover:text-primary transition-colors",children:n.jsx("a",{href:"mailto:palaye122@gmail.com",children:"palaye122@gmail.com"})})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(ln,{className:"h-5 w-5 mr-3 mt-1 text-accent_brand flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground",children:"Horaires de disponibilit"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"Lundi - Dimanche : 24h/24"})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx(mk,{className:"h-5 w-5 mr-3 mt-1 text-accent_brand flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-foreground",children:"LinkedIn"}),n.jsx("a",{href:"https://www.linkedin.com/in/abdoulaye-di%C3%A9m%C3%A9-58136a1b1/",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground text-sm hover:text-primary transition-colors",children:"Profil d'Abdoulaye Dim"})]})]})]})]}),n.jsxs(he,{className:"shadow-lg border-border/50 bg-card hover:shadow-accent_brand/10 transition-shadow duration-300",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"text-xl flex items-center",children:[n.jsx(uk,{className:"mr-2 h-5 w-5 text-accent_brand"}),"FAQ Rapide"]})}),n.jsxs(ve,{children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Consultez notre ",n.jsx("a",{href:"/faq",className:"text-primary hover:underline",children:"page FAQ"})," pour des rponses aux questions courantes."]}),n.jsx("div",{className:"aspect-[16/10] bg-muted rounded-lg mt-4 flex items-center justify-center text-muted-foreground overflow-hidden",children:n.jsx("img",{className:"w-full h-full object-cover",alt:"Illustration conceptuelle pure d'une bulle de dialogue avec un point d'interrogation, sur fond clair.",src:"https://images.unsplash.com/photo-1662394030934-dbebdb69cf6c"})})]})]})]})]})]})]})},Xbe=()=>{const e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},r={name:"Abdoulaye Dim",role:"Fondateur & CEO",imageUrl:"https://storage.googleapis.com/hostinger-horizons-assets-prod/bcc20f7d-f81b-4a6f-9229-7d6ba486204e/64ab783a30ad4c2d4b282a68a354292b.jpg",imgAlt:"Portrait d'Abdoulaye Dim, fondateur de Teranga Foncier",linkedin:"https://www.linkedin.com/in/abdoulaye-di%C3%A9m%C3%A9-58136a1b1/"},s=[{icon:Ys,title:"Intgrit",description:"Nous agissons avec honntet et transparence  chaque tape."},{icon:bs,title:"Orientation Client",description:"Votre scurit et votre satisfaction sont notre priorit absolue."},{icon:Hr,title:"Rigueur",description:"Chaque dossier est trait avec la plus grande attention aux dtails."}];return n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:" Propos - Contribution  la Transformation Digitale du Sngal"}),n.jsx("meta",{name:"description",content:"Dcouvrez comment Teranga Foncier participe  la transformation numrique du Sngal, en phase avec les ambitions du gouvernement sngalais et de l'agenda C50 pour le secteur foncier."}),n.jsx("meta",{name:"keywords",content:"mission Teranga Foncier, transformation numrique Sngal, agenda C50, Abdoulaye Dim, gouvernement Sngalais, modernisation foncier"}),n.jsx("link",{rel:"canonical",href:"https://www.terangafoncier.com/about"})]}),n.jsxs(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"bg-background",children:[n.jsxs(Ae.section,{variants:t,className:"relative pt-32 pb-20 md:pt-40 md:pb-24 text-center bg-muted/50 overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-accent_brand/10 -z-10"}),n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold text-foreground mb-4",children:"Notre mission"}),n.jsx("p",{className:"max-w-3xl mx-auto text-lg md:text-xl text-muted-foreground",children:"Acclrer la transformation digitale du secteur foncier au Sngal, en rendant l'investissement accessible, transparent et scuris pour tous."})]})]}),n.jsx(Ae.section,{variants:t,className:"py-16 md:py-24",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsx(he,{className:"overflow-hidden shadow-lg border-none",children:n.jsxs("div",{className:"grid lg:grid-cols-2 items-center",children:[n.jsx("div",{className:"relative h-96 lg:h-[500px] order-first",children:n.jsx("img",{src:r.imageUrl,alt:r.imgAlt,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"p-8 md:p-12 text-left",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-6",children:"Le mot du fondateur"}),n.jsx("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:`"J'ai fond Teranga Foncier pour relever un dfi majeur : la **lutte contre l'inscurit foncire** qui freine le dveloppement du Sngal et brise les rves de notre diaspora. Face aux arnaques et  la complexit administrative, j'ai choisi de mener ce combat en utilisant la technologie comme une arme de confiance. Notre plateforme n'est pas qu'un outil, c'est un engagement. Un engagement  protger chaque investissement,  garantir la transparence de chaque transaction et  btir un avenir o la proprit foncire est un droit scuris, pas un risque."`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg text-foreground",children:r.name}),n.jsx("p",{className:"text-primary",children:r.role}),n.jsx("div",{className:"flex gap-4 mt-4",children:n.jsx("a",{href:r.linkedin,target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn de Abdoulaye Dim",children:n.jsx(mk,{className:"h-6 w-6 text-muted-foreground hover:text-primary transition-colors"})})})]})]})]})})})}),n.jsx(Ae.section,{variants:t,className:"py-16 md:py-24 bg-muted/50",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground",children:"Nos valeurs fondamentales"}),n.jsx("p",{className:"max-w-2xl mx-auto text-lg text-muted-foreground mt-4",children:"Trois piliers qui guident notre contribution  la transformation digitale."})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:s.map((i,a)=>n.jsxs(he,{className:"text-center p-6 shadow-md hover:shadow-lg transition-shadow",children:[n.jsx(Ce,{className:"items-center p-0 mb-4",children:n.jsx("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-primary/10 text-primary mx-auto",children:n.jsx(i.icon,{className:"h-8 w-8"})})}),n.jsxs(ve,{className:"p-0",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:i.title}),n.jsx("p",{className:"text-muted-foreground",children:i.description})]})]},a))})]})}),n.jsx(Ae.section,{variants:t,className:"py-20 md:py-28",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-6",children:"Participez  la modernisation du Sngal"}),n.jsx("p",{className:"max-w-xl mx-auto text-lg text-muted-foreground mb-8",children:"Ensemble, construisons un march foncier transparent, un pilier de la transformation numrique nationale."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Y,{asChild:!0,size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg",children:n.jsxs(dt,{to:"/parcelles",children:["Explorer les terrains ",n.jsx(Fn,{className:"ml-2 h-5 w-5"})]})}),n.jsx(Y,{asChild:!0,size:"lg",variant:"outline",className:"bg-background hover:bg-accent",children:n.jsx(dt,{to:"/contact",children:"Devenir partenaire"})})]})]})})]})]})};delete bm.Icon.Default.prototype._getIconUrl;bm.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const q0=e=>new bm.Icon({iconUrl:`https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${e}.png`,shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Ybe=q0("green"),Jbe=q0("yellow"),Qbe=q0("red"),e1e=q0("grey");q0("blue");const t1e=()=>{const e=DH();return n.jsxs("div",{className:"leaflet-control leaflet-bar absolute bottom-20 right-4 z-[1000] flex flex-col gap-1.5",children:[n.jsx(Y,{size:"icon",variant:"secondary",onClick:()=>e.zoomIn(),title:"Zoomer",className:"shadow-lg border",children:n.jsx(Toe,{className:"h-5 w-5"})}),n.jsx(Y,{size:"icon",variant:"secondary",onClick:()=>e.zoomOut(),title:"Dzoomer",className:"shadow-lg border",children:n.jsx(koe,{className:"h-5 w-5"})})]})},r1e=()=>n.jsx(he,{className:"leaflet-control absolute bottom-4 left-4 z-[1000] bg-background/90 backdrop-blur-sm p-3 rounded-lg shadow-xl border",children:n.jsxs(ve,{className:"p-0",children:[n.jsx("h4",{className:"font-semibold text-sm mb-2 text-foreground",children:"Lgende des Parcelles"}),n.jsxs("ul",{className:"space-y-1.5 text-xs",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(jr,{className:"h-5 w-auto mr-2 text-green-500"})," Disponible"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(jr,{className:"h-5 w-auto mr-2 text-yellow-500"})," Rserve"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(jr,{className:"h-5 w-auto mr-2 text-red-500"})," Vendue"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(jr,{className:"h-5 w-auto mr-2 text-gray-500"})," Statut Inconnu"]})]})]})}),n1e=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(null),o=[14.7167,-17.4677],l=11,c=x.useRef();x.useEffect(()=>{(async()=>{try{s(!0);const v=(await Je.getParcels()).map(g=>({id:g.id,name:g.title||`Parcelle ${g.reference}`,reference:g.reference,location:g.location||"Dakar, Sngal",status:g.status==="available"?"Disponible":g.status==="reserved"?"Rserve":g.status==="sold"?"Vendue":"En attente",price:g.price,area:g.area_sqm,coordinates:g.coordinates?JSON.parse(g.coordinates):[14.7167+(Math.random()-.5)*.1,-17.4677+(Math.random()-.5)*.1],description:g.description,image:g.image_url||"https://placehold.co/300x200/0052A3/FFFFFF?text=Parcelle",owner:g.owner_name||"Propritaire non spcifi",created_at:g.created_at}));t(v)}catch(p){console.error("Erreur lors du chargement des parcelles:",p),a(p.message||"Erreur inconnue"),t([])}finally{s(!1)}})()},[]);const u=m=>{switch(m){case"Disponible":return Ybe;case"Rserve":return Jbe;case"Vendue":return Qbe;default:return e1e}},d=m=>m==null?"Prix non spcifi":new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(m),h=m=>{m.preventDefault();const p=m.target.elements.locationSearch.value;p&&alert(`Recherche pour "${p}" - L'intgration de l'API de Gocodage est ncessaire pour cette fonctionnalit.`)};return r?n.jsxs("div",{className:"flex items-center justify-center h-[calc(100vh-64px)]",children:[n.jsx(Tt,{size:"large"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-lg font-medium",children:"Chargement des parcelles..."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Rcupration des donnes depuis la base"})]})]}):i?n.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-64px)]",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-lg font-medium text-red-600",children:"Erreur de chargement"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Affichage des donnes de dmonstration"})]})}):n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"relative h-[calc(100vh-64px)] w-full",children:[n.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-[1000] w-full max-w-lg px-4",children:n.jsxs("form",{onSubmit:h,className:"relative",children:[n.jsx(De,{type:"search",name:"locationSearch",placeholder:"Rechercher une adresse, ville, ou rfrence de parcelle...",className:"w-full h-12 pl-12 pr-4 rounded-full bg-background/95 shadow-xl border-border focus:ring-2 focus:ring-primary text-sm"}),n.jsx(wr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})}),n.jsxs(UE,{center:o,zoom:l,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},zoomControl:!1,ref:c,children:[n.jsx(GE,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors & Teranga Foncier',url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"}),e.filter(m=>m.coordinates).map(m=>n.jsx(HE,{position:[m.coordinates.lat,m.coordinates.lng],icon:u(m.status),children:n.jsx(WE,{minWidth:220,children:n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("h3",{className:"font-bold text-base mb-1 text-primary",children:m.location_name}),n.jsxs("p",{className:"text-xs text-muted-foreground -mt-1",children:["Rf: ",m.reference]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(P0,{className:"h-4 w-4 mr-1.5 text-muted-foreground"}),n.jsx("span",{children:m.area_sqm?`${m.area_sqm} m`:"Surface N/A"})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(fs,{className:"h-4 w-4 mr-1.5 text-muted-foreground"}),n.jsx("span",{className:"font-semibold",children:d(m.price)})]}),n.jsxs("p",{className:`text-xs font-medium capitalize ${m.status==="Disponible"?"text-green-600":m.status==="Rserve"?"text-yellow-600":m.status==="Vendue"?"text-red-600":"text-gray-600"}`,children:["Statut : ",m.status]}),n.jsx(Y,{asChild:!0,size:"sm",className:"w-full mt-2.5",children:n.jsxs(dt,{to:`/parcelles/${m.id}`,children:["Voir les dtails ",n.jsx(y2,{className:"ml-2 h-3.5 w-3.5"})]})})]})})},m.id)),n.jsx(t1e,{}),n.jsx(r1e,{})]})]})},s1e=e=>e?new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Date inconnue",i1e=e=>{switch(e){case"info":return{icon:Iu,text:"Demande d'information"};case"buy":return{icon:b2,text:"Demande d'achat"};case"visit":return{icon:ck,text:"Demande de visite"};case"acquisition":return{icon:Cr,text:"Demande d'attribution"};default:return{icon:Cr,text:"Demande"}}},a1e=e=>{switch(e){case"Nouvelle":return"info";case"En instruction":case"En cours":return"warning";case"Traite":case"Approuve":return"success";case"Annule":case"Rejet":return"destructive";default:return"secondary"}},o1e=({request:e,parcelDetails:t})=>{var a;const r=i1e(e.request_type),s=r.icon,i=(a=e.payments)==null?void 0:a.find(o=>o.status==="En attente");return n.jsx(Ae.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:n.jsxs(he,{className:"shadow-sm hover:shadow-md transition-shadow",children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs(ke,{className:"text-lg flex items-center mb-1",children:[n.jsx(s,{className:"h-4 w-4 mr-2"}),r.text]}),n.jsxs(jt,{className:"text-xs flex items-center",children:[n.jsx(ln,{className:"h-3 w-3 mr-1"})," Soumise le: ",s1e(e.created_at)]})]}),n.jsx(Ge,{variant:a1e(e.status),children:e.status})]})}),n.jsxs(ve,{children:[e.parcel_id&&t?n.jsxs("div",{className:"mb-3 p-3 bg-muted/50 rounded border text-sm",children:[n.jsx("p",{className:"font-semibold mb-1",children:"Concernant la parcelle :"}),n.jsx(dt,{to:`/parcelles/${e.parcel_id}`,className:"text-primary hover:underline font-medium block truncate",children:t.name}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.zone," - ",t.area_sqm," m"]})]}):n.jsx("div",{className:"mb-3 p-3 bg-muted/50 rounded border text-sm",children:n.jsxs("p",{className:"font-semibold mb-1",children:["Demande auprs de : ",e.recipient]})}),i&&n.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 text-yellow-800 rounded-lg border border-yellow-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Rl,{className:"h-5 w-5 mr-3"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-sm",children:"Paiement Requis"}),n.jsx("p",{className:"text-xs",children:i.description})]})]}),n.jsx(Y,{asChild:!0,size:"sm",variant:"outline",className:"bg-white",children:n.jsx(dt,{to:`/payment/${i.id}`,children:"Payer"})})]})]}),n.jsx(Wn,{className:"flex justify-end",children:n.jsx(Y,{variant:"default",size:"sm",asChild:!0,children:n.jsxs(dt,{to:`/case-tracking/${e.id}`,children:["Suivre le Dossier ",n.jsx(Fn,{className:"h-4 w-4 ml-2"})]})})})]})})},l1e=()=>n.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx(Ct,{className:"h-6 w-1/2 mb-1"}),n.jsx(Ct,{className:"h-5 w-1/4"})]}),n.jsx(Ct,{className:"h-3 w-1/3"})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"mb-3 p-3 bg-muted/50 rounded border",children:[n.jsx(Ct,{className:"h-4 w-1/4 mb-1"}),n.jsx(Ct,{className:"h-5 w-3/4 mb-1"}),n.jsx(Ct,{className:"h-3 w-1/2"})]}),n.jsx(Ct,{className:"h-4 w-1/4 mb-1"}),n.jsx(Ct,{className:"h-10 w-full"})]}),n.jsx(Wn,{className:"flex justify-end",children:n.jsx(Ct,{className:"h-9 w-1/4"})})]},t))}),c1e=()=>{const{user:e}=ar(),[t,r]=x.useState([]),[s,i]=x.useState({}),[a,o]=x.useState(!0),[l,c]=x.useState(null);return pt(),x.useEffect(()=>{if(o(!0),c(null),!e){c("Veuillez vous connecter pour voir vos demandes."),o(!1);return}(async()=>{try{const u=await Je.getRequestsByUser(e.id);r(u);const d=[...new Set(u.filter(h=>h.parcel_id).map(h=>h.parcel_id))];if(d.length){const h={};for(const m of d){const p=await Je.getParcelById(m);p&&(h[m]={id:p.id,name:p.name||p.title||p.reference,zone:p.zone,area_sqm:p.area_sqm})}i(h)}else i({})}catch(u){console.error("Error loading requests:",u),c("Impossible de charger vos demandes."),r([]),i({})}finally{o(!1)}})()},[e]),n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Mes Demandes"}),n.jsx("p",{className:"text-muted-foreground",children:"Suivez l'tat de vos demandes d'information, d'achat ou de visite."})]}),a?n.jsx(l1e,{}):l?n.jsxs("div",{className:"text-center py-10 text-destructive bg-destructive/10 rounded-md",children:[n.jsx("p",{children:l}),!e&&n.jsx(Y,{asChild:!0,className:"mt-4",children:n.jsx(dt,{to:"/login",children:"Se Connecter"})})]}):t.length>0?n.jsx(Ae.div,{layout:!0,className:"space-y-6",children:t.map(u=>n.jsx(o1e,{request:u,parcelDetails:s[u.parcel_id]},u.id))}):n.jsxs("div",{className:"text-center py-16 bg-muted/50 rounded-lg border border-dashed",children:[n.jsx(Cr,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucune demande trouve"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous n'avez pas encore soumis de demande. Explorez nos parcelles !"}),n.jsx(Y,{asChild:!0,children:n.jsx(dt,{to:"/parcelles",children:"Voir les parcelles"})})]})]})},u1e=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const{data:o,error:l}=await pe.from("blog_posts").select("*").eq("status","published").order("published_at",{ascending:!1}).limit(20);if(l)throw l;t(o||[])}catch(o){console.error("Erreur chargement blog:",o),t([{id:1,title:"Transformation numrique du foncier au Sngal",description:"Comment l'agenda C50 rvolutionne la gestion foncire.",content:"Le gouvernement sngalais lance une initiative ambitieuse...",slug:"transformation-numerique-foncier-senegal",category:"Politique",tag:"Transformation",author:"quipe Teranga Foncier",published_at:new Date().toISOString(),image_url:"https://images.unsplash.com/photo-1542744173-8e7e53415bb0"}])}finally{s(!1)}})()},[]);const i={initial:{opacity:0,y:30},animate:a=>({opacity:1,y:0,transition:{delay:a*.1,duration:.5,ease:"easeOut"}})};return r?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-lg text-gray-600",children:"Chargement des articles..."})]})}):n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Blog - Actualits sur la Transformation Numrique du Foncier au Sngal"}),n.jsx("meta",{name:"description",content:"Suivez les dernires actualits sur la transformation digitale du foncier au Sngal, les avances de l'agenda C50 et les initiatives du gouvernement sngalais pour un cadastre moderne."}),n.jsx("meta",{name:"keywords",content:"blog foncier Sngal, actualits immobilires Sngal, transformation numrique, transformation digitale, agenda C50, gouvernement Sngalais"}),n.jsx("link",{rel:"canonical",href:"https://www.terangafoncier.com/blog"})]}),n.jsx("div",{className:"bg-gradient-to-br from-background to-muted/30 min-h-screen",children:n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7},className:"container mx-auto py-12 px-4 md:py-20",children:[n.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[n.jsx(Zf,{className:"h-16 w-16 text-primary mx-auto mb-4"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-foreground mb-3",children:"Le Blog de Teranga Foncier"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto",children:"Analyses sur la transformation digitale du foncier et les politiques du gouvernement sngalais."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((a,o)=>n.jsx(Ae.custom,{variants:i,initial:"initial",animate:"animate",custom:o,className:"flex",children:n.jsxs(he,{className:"flex flex-col overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 border-border/50 w-full bg-card",children:[n.jsxs("div",{className:"relative h-56 w-full overflow-hidden",children:[n.jsx("img",{className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 hover:scale-105",alt:a.title,src:"https://images.unsplash.com/photo-1504983875-d3b163aba9e6"}),n.jsx("div",{className:"absolute top-2 right-2 bg-primary/80 text-primary-foreground text-xs font-semibold px-2 py-1 rounded-full backdrop-blur-sm",children:a.category})]}),n.jsx(Ce,{className:"pb-2",children:n.jsx(ke,{className:"text-xl font-semibold leading-tight text-foreground hover:text-primary transition-colors",children:n.jsx(dt,{to:`/blog/${a.slug}`,children:a.title})})}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx(jt,{className:"text-muted-foreground line-clamp-3",children:a.excerpt}),n.jsxs("div",{className:"mt-3 flex items-center text-xs text-muted-foreground",children:[n.jsx(Sc,{className:"h-4 w-4 mr-1.5"}),n.jsx("span",{children:new Date(a.published_at).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})})]})]}),n.jsxs(Wn,{className:"flex flex-col items-start pt-3",children:[n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.tags.map(l=>n.jsxs("span",{className:"text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded-full flex items-center",children:[n.jsx(roe,{className:"h-3 w-3 mr-1"})," ",l]},l))}),n.jsx(Y,{variant:"ghost",className:"text-primary hover:text-primary/80 p-0 h-auto",asChild:!0,children:n.jsxs(dt,{to:`/blog/${a.slug}`,children:["Lire la suite ",n.jsx(Fn,{className:"h-4 w-4 ml-1.5"})]})})]})]})},a.id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsx(Y,{variant:"outline",size:"lg",onClick:()=>alert(" Fonctionnalit 'Charger plus d'articles' non implmente."),className:"border-primary text-primary hover:bg-primary/10",children:"Charger plus d'articles"})})]})})]})},d1e=()=>{const{slug:e}=_k(),[t,r]=x.useState(null),[s,i]=x.useState(!0),[a,o]=x.useState(null);return x.useEffect(()=>{(async()=>{i(!0),o(null);const{data:c,error:u}=await pe.from("blog_posts").select("*").eq("slug",e).single();u||!c?(o("Article introuvable ou erreur de chargement."),r(null)):r(c),i(!1)})()},[e]),s?n.jsx("div",{className:"flex justify-center py-16",children:n.jsx(Tt,{size:"large"})}):a?n.jsx("div",{className:"text-center text-red-600 py-16",children:a}):t?n.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4",children:[n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{className:"text-3xl font-bold mb-2",children:t.title}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[n.jsxs("span",{children:["Par ",t.author]}),n.jsx("span",{children:""}),n.jsx("span",{children:t.published_at?new Date(t.published_at).toLocaleDateString("fr-FR"):"Non publi"}),n.jsx(Ge,{variant:t.status==="published"?"success":"secondary",children:t.status})]}),t.category&&n.jsx(Ge,{className:"mb-2",children:t.category})]}),n.jsxs(ve,{children:[t.image_url&&n.jsx("img",{src:t.image_url,alt:t.title,className:"mb-4 rounded w-full max-h-96 object-cover"}),n.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:t.content}})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsx(dt,{to:"/blog",className:"text-blue-600 hover:underline",children:" Retour au blog"})})]}):null},h1e=()=>{const e={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut",staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return n.jsx(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"bg-gradient-to-b from-background to-gray-50 dark:from-background dark:to-gray-900/20 min-h-screen",children:n.jsxs("div",{className:"container mx-auto py-16 px-4 max-w-4xl",children:[n.jsxs(Ae.div,{variants:t,className:"text-center mb-12 md:mb-16",children:[n.jsx(Cr,{className:"h-16 w-16 md:h-20 md:w-20 mx-auto mb-6 text-primary"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Mentions Lgales"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground",children:"Informations importantes concernant l'utilisation de la plateforme Teranga Foncier."})]}),n.jsxs("div",{className:"space-y-10",children:[n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(Ea,{className:"mr-3 h-6 w-6 text-primary"}),"1. Informations Gnrales"]}),n.jsxs("div",{className:"space-y-2 text-muted-foreground leading-relaxed",children:[n.jsx("p",{children:'Le site web Teranga Foncier (ci-aprs "la Plateforme") est dit par Abdoulaye Dim, entrepreneur individuel.'}),n.jsxs("p",{children:["Immatriculation au Registre du Commerce et des Socits de Dakar : ",n.jsx("strong",{className:"text-foreground",children:"SN.DKR.2024.A.00000"})," (Numro fictif,  complter par l'utilisateur)."]}),n.jsx("p",{children:"Sige social : Dakar, Sngal."}),n.jsxs("p",{children:["Numro NINEA : ",n.jsx("strong",{className:"text-foreground",children:"000000000"})," (Numro fictif,  complter par l'utilisateur)."]}),n.jsx("p",{children:"Directeur de la publication : Abdoulaye Dim."}),n.jsxs("p",{children:["Contact Principal : ",n.jsx("a",{href:"mailto:contact@terangafoncier.com",className:"text-primary hover:underline",children:"contact@terangafoncier.com"}),"."]}),n.jsxs("p",{children:["Contact Secondaire : ",n.jsx("a",{href:"mailto:palaye122@gmail.com",className:"text-primary hover:underline",children:"palaye122@gmail.com"})," | ",n.jsx("a",{href:"tel:+221775934241",className:"text-primary hover:underline",children:"+221 77 593 42 41"}),"."]})]})]}),n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(Nz,{className:"mr-3 h-6 w-6 text-primary"}),"2. Hbergement"]}),n.jsx("div",{className:"space-y-2 text-muted-foreground leading-relaxed",children:n.jsx("p",{children:"La Plateforme est hberge par un fournisseur de services cloud de premier plan pour garantir la disponibilit et la scurit."})})]}),n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx($se,{className:"mr-3 h-6 w-6 text-primary"}),"3. Proprit Intellectuelle"]}),n.jsxs("div",{className:"space-y-2 text-muted-foreground leading-relaxed",children:[n.jsx("p",{children:"L'ensemble des lments constituant la Plateforme (textes, graphismes, logiciels, photographies, images, vidos, sons, plans, noms, logos, marques, crations et uvres protgeables diverses, bases de donnes, etc.) ainsi que la Plateforme elle-mme, relvent des lgislations sngalaises et internationales sur le droit d'auteur et sur les droits voisins."}),n.jsx("p",{children:"Ces lments sont la proprit exclusive de Teranga Foncier / Abdoulaye Dim, hormis les lments raliss par des intervenants extrieurs n'ayant pas cd leurs droits d'auteur. Toute reproduction, reprsentation, modification, publication, adaptation de tout ou partie des lments de la Plateforme, quel que soit le moyen ou le procd utilis, est interdite, sauf autorisation crite pralable de Teranga Foncier / Abdoulaye Dim."})]})]}),n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(kr,{className:"mr-3 h-6 w-6 text-primary"}),"4. Responsabilit"]}),n.jsxs("div",{className:"space-y-2 text-muted-foreground leading-relaxed",children:[n.jsx("p",{children:"Teranga Foncier s'efforce d'assurer au mieux de ses possibilits, l'exactitude et la mise  jour des informations diffuses sur la Plateforme. Toutefois, Teranga Foncier ne peut garantir l'exactitude, la prcision ou l'exhaustivit des informations mises  la disposition sur la Plateforme."}),n.jsx("p",{children:"En consquence, Teranga Foncier dcline toute responsabilit pour toute interruption de la Plateforme, survenance de bogues, pour toute inexactitude ou omission portant sur des informations disponibles sur la Plateforme, ou pour tous dommages rsultant d'une intrusion frauduleuse d'un tiers."}),n.jsxs("p",{children:["Les informations fournies concernant les parcelles (statut juridique, documents, etc.) sont bases sur les vrifications effectues par Teranga Foncier au moment de leur publication. ",n.jsx("strong",{className:"text-foreground",children:"Il incombe imprativement  l'acheteur de procder  ses propres vrifications complmentaires"}),", notamment auprs des autorits comptentes (Cadastre, Domaines, Mairies) et d'un notaire, avant toute transaction. Teranga Foncier agit en tant qu'intermdiaire facilitant la mise en relation et la vrification initiale, mais ne se substitue pas aux diligences lgales et notariales finales qui sont de la responsabilit de l'acheteur."]})]})]}),n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(gz,{className:"mr-3 h-6 w-6 text-primary"}),"5. Donnes Personnelles"]}),n.jsx("div",{className:"space-y-2 text-muted-foreground leading-relaxed",children:n.jsxs("p",{children:["La collecte et le traitement des donnes personnelles sont rgis par notre ",n.jsx(dt,{to:"/privacy",className:"text-primary hover:underline font-medium",children:"Politique de Confidentialit"}),", conformment  la loi sngalaise n 2008-08 du 25 janvier 2008 sur la protection des donnes  caractre personnel, et ses modifications ultrieures. Le responsable du traitement est Abdoulaye Dim."]})})]}),n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(Fae,{className:"mr-3 h-6 w-6 text-primary"}),"6. Droit Applicable et Juridiction"]}),n.jsx("div",{className:"space-y-2 text-muted-foreground leading-relaxed",children:n.jsx("p",{children:"Les prsentes mentions lgales sont rgies par le droit sngalais. En cas de litige et  dfaut d'accord amiable, la comptence est attribue aux tribunaux comptents de Dakar."})})]}),n.jsx(Ae.p,{variants:t,className:"text-sm text-muted-foreground pt-4 text-center",children:"Dernire mise  jour : 18 Juin 2025"})]})]})})},f1e=()=>{const e={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut",staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},r=({icon:s,title:i,children:a})=>n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(s,{className:"mr-3 h-7 w-7 text-primary flex-shrink-0"}),i]}),n.jsx("div",{className:"space-y-3 text-muted-foreground leading-relaxed text-sm md:text-base",children:a})]});return n.jsx(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"bg-gradient-to-b from-background to-gray-50 dark:from-background dark:to-gray-900/20 min-h-screen",children:n.jsxs("div",{className:"container mx-auto py-16 px-4 max-w-4xl",children:[n.jsxs(Ae.div,{variants:t,className:"text-center mb-12 md:mb-16",children:[n.jsx(ns,{className:"h-16 w-16 md:h-20 md:w-20 mx-auto mb-6 text-primary"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Politique de Confidentialit"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground",children:"Votre confiance est notre priorit. Dcouvrez comment nous protgeons vos donnes personnelles."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Dernire mise  jour : 18 Juin 2025"})]}),n.jsxs("div",{className:"space-y-10",children:[n.jsx(Ae.p,{variants:t,className:"text-base md:text-lg text-muted-foreground leading-relaxed",children:`Teranga Foncier ("Teranga Foncier", "nous", "notre"), dirig par Abdoulaye Dim, s'engage  protger la confidentialit de vos informations personnelles. Cette Politique de Confidentialit dcrit comment nous collectons, utilisons, divulguons et protgeons les informations que vous nous fournissez lorsque vous utilisez notre site web et nos services (collectivement, la "Plateforme").`}),n.jsxs(r,{icon:Ase,title:"1. Informations Collectes",children:[n.jsx("p",{children:"Nous collectons diverses informations pour vous offrir un service optimal :"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1.5 pl-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Identification personnelle :"})," Nom, prnom, adresse email, numro de tlphone, adresse postale, et copie de pice d'identit (uniquement si ncessaire pour une transaction ou vrification de vendeur)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Informations de compte :"})," Nom d'utilisateur, mot de passe (fortement crypt)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Donnes de transaction :"})," Dtails des parcelles consultes/demandes, changes de messages, documents que vous soumettez (pour achat ou vente), historique."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Informations sur les biens :"})," Dtails de la proprit, documents soumis pour vrification par nos quipes."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Donnes techniques de navigation :"})," Adresse IP, type de navigateur, OS, pages visites, dates/heures d'accs (via cookies et technologies similaires, voir section Cookies)."]})]})]}),n.jsxs(r,{icon:gz,title:"2. Utilisation de Vos Informations",children:[n.jsx("p",{children:"Vos donnes sont utilises pour :"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1.5 pl-4",children:[n.jsx("li",{children:"Fournir, oprer, maintenir et amliorer notre Plateforme."}),n.jsx("li",{children:"Crer, grer et scuriser votre compte utilisateur."}),n.jsx("li",{children:"Traiter efficacement vos demandes d'information, d'achat ou de vente."}),n.jsx("li",{children:"Effectuer les vrifications ncessaires des biens et des documents."}),n.jsx("li",{children:"Faciliter la mise en relation avec nos agents ou d'autres utilisateurs (acheteurs/vendeurs) dans le cadre d'une transaction."}),n.jsx("li",{children:"Communiquer avec vous concernant votre compte, vos transactions et les mises  jour importantes."}),n.jsx("li",{children:"Personnaliser votre exprience et vous proposer du contenu pertinent."}),n.jsx("li",{children:"Analyser l'utilisation de la Plateforme pour optimiser nos services et fonctionnalits."}),n.jsx("li",{children:"Prvenir la fraude, les abus et assurer la scurit de la Plateforme."}),n.jsx("li",{children:"Respecter nos obligations lgales, rglementaires et contractuelles."})]})]}),n.jsxs(r,{icon:bs,title:"3. Partage Scuris des Informations",children:[n.jsx("p",{children:"Nous ne vendons ni ne louons vos informations personnelles. Le partage est limit et scuris :"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1.5 pl-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Avec nos agents fonciers :"})," Pour traiter vos demandes et vous fournir un accompagnement personnalis."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Entre utilisateurs (Acheteur/Vendeur) :"})," Uniquement les informations ncessaires (ex: nom, contact aprs accord explicite) pour faciliter une transaction."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Partenaires de transaction :"})," Notaires, administrations (informations strictement ncessaires et avec votre consentement implicite li  la transaction)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Fournisseurs de services tiers :"})," Pour l'hbergement, l'analyse, etc., sous des accords de confidentialit stricts."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Obligations lgales :"})," Si requis par la loi, une procdure judiciaire, ou pour protger nos droits et la scurit de tous."]})]})]}),n.jsxs(r,{icon:aie,title:"4. Scurit de Vos Donnes",children:[n.jsx("p",{children:"La scurit de vos donnes est primordiale. Nous mettons en uvre des mesures techniques et organisationnelles robustes (cryptage, pare-feu, contrles d'accs, audits rguliers) pour protger vos informations contre tout accs non autoris, divulgation, altration ou destruction."}),n.jsx("p",{children:"Cependant, aucune mthode de transmission sur Internet ou de stockage lectronique n'est infaillible  100%. Nous vous encourageons  utiliser des mots de passe forts et uniques, et  ne jamais les partager."})]}),n.jsx(r,{icon:Nz,title:"5. Conservation des Donnes",children:n.jsx("p",{children:"Nous conservons vos informations personnelles uniquement le temps ncessaire pour les finalits dcrites, pour respecter nos obligations lgales (ex: comptabilit, conservation des preuves), ou pour la gestion d'ventuels litiges. Les dures de conservation peuvent varier selon la nature des donnes et les exigences lgales."})}),n.jsxs(r,{icon:_z,title:"6. Vos Droits et Contrles",children:[n.jsx("p",{children:"Conformment  la loi sngalaise n 2008-08 sur la protection des donnes personnelles, vous disposez de droits d'accs, de rectification, de suppression, de limitation et d'opposition au traitement de vos donnes. Vous pouvez galement demander la portabilit de vos donnes."}),n.jsxs("p",{children:["Exercez ces droits en contactant notre Dlgu  la Protection des Donnes (DPO)  : ",n.jsx("a",{href:"mailto:contact@terangafoncier.com",className:"text-primary hover:underline",children:"contact@terangafoncier.com"})," ou via votre espace personnel. Une vrification d'identit pourra tre demande."]})]}),n.jsx(r,{icon:mz,title:"7. Politique Relative aux Cookies",children:n.jsxs("p",{children:["Nous utilisons des cookies (essentiels, de performance, de fonctionnalit, de ciblage) pour amliorer votre exprience, analyser le trafic, scuriser la plateforme et personnaliser le contenu. Vous pouvez grer vos prfrences via notre bandeau de consentement aux cookies et les paramtres de votre navigateur. Pour plus de dtails, consultez notre ",n.jsx(dt,{to:"/cookie-policy",className:"text-primary hover:underline font-medium",children:"Politique de Cookies"}),"."]})}),n.jsx(r,{icon:Aae,title:"8. Modifications de cette Politique",children:n.jsx("p",{children:"Cette Politique de Confidentialit peut tre mise  jour. Nous vous notifierons des changements importants (par email ou notification sur la Plateforme) et indiquerons la date de dernire mise  jour en haut de cette page. Nous vous encourageons  la consulter rgulirement."})}),n.jsxs(r,{icon:Jie,title:"9. Nous Contacter",children:[n.jsx("p",{children:"Pour toute question, proccupation ou demande concernant cette Politique de Confidentialit ou vos donnes personnelles, veuillez contacter notre Dlgu  la Protection des Donnes (DPO) :"}),n.jsxs("ul",{className:"list-none space-y-1 pl-4",children:[n.jsxs("li",{children:["Email Principal: ",n.jsx("a",{href:"mailto:contact@terangafoncier.com",className:"text-primary hover:underline",children:"contact@terangafoncier.com"})]}),n.jsxs("li",{children:["Email Secondaire: ",n.jsx("a",{href:"mailto:palaye122@gmail.com",className:"text-primary hover:underline",children:"palaye122@gmail.com"})]}),n.jsx("li",{children:"Adresse Postale : DPO Teranga Foncier, Dakar, Sngal."}),n.jsxs("li",{children:["Ou via notre ",n.jsx(dt,{to:"/contact",className:"text-primary hover:underline font-medium",children:"page de contact"}),"."]})]})]})]})]})})},m1e=()=>{const e={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut",staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},r=({icon:s,title:i,children:a})=>n.jsxs(Ae.section,{variants:t,className:"p-6 bg-card border border-border/50 rounded-lg shadow-md",children:[n.jsxs("h2",{className:"text-2xl font-semibold mb-4 text-foreground flex items-center",children:[n.jsx(s,{className:"mr-3 h-7 w-7 text-primary flex-shrink-0"}),i]}),n.jsx("div",{className:"space-y-3 text-muted-foreground leading-relaxed text-sm md:text-base",children:a})]});return n.jsx(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"bg-gradient-to-b from-background to-gray-50 dark:from-background dark:to-gray-900/20 min-h-screen",children:n.jsxs("div",{className:"container mx-auto py-16 px-4 max-w-4xl",children:[n.jsxs(Ae.div,{variants:t,className:"text-center mb-12 md:mb-16",children:[n.jsx(mz,{className:"h-16 w-16 md:h-20 md:w-20 mx-auto mb-6 text-primary"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Politique Relative aux Cookies"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground",children:"Comprendre comment nous utilisons les cookies pour amliorer votre exprience sur Teranga Foncier."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Dernire mise  jour : 18 Juin 2025"})]}),n.jsxs("div",{className:"space-y-10",children:[n.jsx(Ae.p,{variants:t,className:"text-base md:text-lg text-muted-foreground leading-relaxed",children:"Cette politique explique ce que sont les cookies, comment Teranga Foncier les utilise sur sa plateforme, et les choix qui s'offrent  vous."}),n.jsxs(r,{icon:Iu,title:"1. Qu'est-ce qu'un Cookie ?",children:[n.jsx("p",{children:"Un cookie est un petit fichier texte stock sur votre ordinateur ou appareil mobile par votre navigateur web lorsque vous visitez certains sites web. Les cookies sont largement utiliss pour faire fonctionner les sites web, ou pour travailler plus efficacement, ainsi que pour fournir des informations aux propritaires du site."}),n.jsx("p",{children:"Ils permettent aux sites web de se souvenir de vos actions et prfrences (telles que la connexion, la langue, la taille de la police et d'autres prfrences d'affichage) sur une priode donne, afin que vous n'ayez pas  les saisir  nouveau chaque fois que vous revenez sur le site ou naviguez d'une page  une autre."})]}),n.jsxs(r,{icon:Ys,title:"2. Comment Teranga Foncier Utilise les Cookies ?",children:[n.jsx("p",{children:"Nous utilisons des cookies pour diverses raisons, dtailles ci-dessous :"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies Strictement Ncessaires :"})," Ces cookies sont essentiels pour vous permettre de naviguer sur la plateforme et d'utiliser ses fonctionnalits, comme l'accs aux zones scurises. Sans ces cookies, les services que vous avez demands, comme la connexion  votre compte, ne peuvent pas tre fournis.",n.jsx("span",{className:"block text-xs text-primary/80 mt-1",children:"(Ex: cookies de session, cookies d'authentification)"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies de Performance et d'Analyse :"})," Ces cookies collectent des informations sur la faon dont les visiteurs utilisent notre plateforme, par exemple quelles pages les visiteurs consultent le plus souvent, et s'ils reoivent des messages d'erreur des pages web. Ces cookies ne collectent pas d'informations permettant d'identifier un visiteur. Toutes les informations collectes par ces cookies sont agrges et donc anonymes. Ils ne sont utiliss que pour amliorer le fonctionnement de la plateforme.",n.jsx("span",{className:"block text-xs text-primary/80 mt-1",children:"(Ex: Google Analytics - anonymis)"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies de Fonctionnalit :"})," Ces cookies permettent  la plateforme de se souvenir des choix que vous faites (comme votre nom d'utilisateur, votre langue ou la rgion dans laquelle vous vous trouvez) et de fournir des fonctionnalits amliores et plus personnelles. Par exemple, ils peuvent tre utiliss pour mmoriser vos prfrences de recherche ou les parcelles que vous avez ajoutes  vos favoris.",n.jsx("span",{className:"block text-xs text-primary/80 mt-1",children:"(Ex: cookies de prfrences linguistiques, cookies de personnalisation)"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies de Ciblage ou Publicitaires (Utilisation Limite) :"})," Actuellement, Teranga Foncier n'utilise pas de cookies de ciblage ou publicitaires de tiers de manire extensive. Si cela devait changer, cette politique serait mise  jour. Nous pouvons utiliser des cookies pour mesurer l'efficacit de nos propres campagnes promotionnelles internes."]})]})]}),n.jsxs(r,{icon:Yf,title:"3. Vos Choix Concernant les Cookies",children:[n.jsx("p",{children:"Vous avez plusieurs options pour contrler ou limiter la manire dont nous et nos partenaires utilisons les cookies :"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 pl-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Paramtres du Navigateur :"})," La plupart des navigateurs web vous permettent de contrler les cookies via leurs paramtres. Vous pouvez configurer votre navigateur pour qu'il vous avertisse avant d'accepter les cookies, ou vous pouvez le configurer pour qu'il les refuse purement et simplement. Veuillez noter que si vous dsactivez les cookies, certaines fonctionnalits de notre plateforme pourraient ne pas fonctionner correctement."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Outil de Consentement aux Cookies :"})," Lors de votre premire visite sur notre plateforme, un bandeau de consentement aux cookies apparatra, vous permettant d'accepter ou de personnaliser vos prfrences en matire de cookies non essentiels."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cookies Tiers :"})," Pour certains cookies tiers (comme Google Analytics), vous pouvez souvent vous dsinscrire directement via les options fournies par ces tiers."]})]}),n.jsxs("p",{className:"mt-3",children:["Pour en savoir plus sur les cookies, y compris comment voir quels cookies ont t installs et comment les grer et les supprimer, visitez ",n.jsx("a",{href:"https://www.allaboutcookies.org/fr/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"www.allaboutcookies.org/fr/"}),"."]})]}),n.jsxs(r,{icon:Qt,title:"4. Cookies que Nous Utilisons (Exemples)",children:[n.jsx("p",{children:"Voici une liste non exhaustive des types de cookies que nous pourrions utiliser :"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm text-left",children:[n.jsx("thead",{className:"text-xs text-foreground uppercase bg-muted/50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-4 py-2",children:"Nom du Cookie (Exemple)"}),n.jsx("th",{scope:"col",className:"px-4 py-2",children:"Type"}),n.jsx("th",{scope:"col",className:"px-4 py-2",children:"Finalit"}),n.jsx("th",{scope:"col",className:"px-4 py-2",children:"Dure"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{className:"border-b border-border/30",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("code",{children:"session_id"})}),n.jsx("td",{className:"px-4 py-2",children:"Strictement Ncessaire"}),n.jsx("td",{className:"px-4 py-2",children:"Maintien de la session utilisateur"}),n.jsx("td",{className:"px-4 py-2",children:"Session"})]}),n.jsxs("tr",{className:"border-b border-border/30",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("code",{children:"tf_prefs"})}),n.jsx("td",{className:"px-4 py-2",children:"Fonctionnalit"}),n.jsx("td",{className:"px-4 py-2",children:"Sauvegarde des prfrences utilisateur"}),n.jsx("td",{className:"px-4 py-2",children:"1 an"})]}),n.jsxs("tr",{className:"border-b border-border/30",children:[n.jsxs("td",{className:"px-4 py-2",children:[n.jsx("code",{children:"_ga"})," (Google Analytics)"]}),n.jsx("td",{className:"px-4 py-2",children:"Performance/Analyse"}),n.jsx("td",{className:"px-4 py-2",children:"Analyse du trafic (anonymis)"}),n.jsx("td",{className:"px-4 py-2",children:"2 ans"})]}),n.jsxs("tr",{className:"border-b border-border/30",children:[n.jsx("td",{className:"px-4 py-2",children:n.jsx("code",{children:"cookie_consent"})}),n.jsx("td",{className:"px-4 py-2",children:"Strictement Ncessaire"}),n.jsx("td",{className:"px-4 py-2",children:"Stocke vos prfrences de consentement"}),n.jsx("td",{className:"px-4 py-2",children:"1 an"})]})]})]})}),n.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:"Cette liste est indicative et peut voluer."})]}),n.jsx(r,{icon:sa,title:"5. Modifications de cette Politique de Cookies",children:n.jsx("p",{children:"Nous pouvons mettre  jour cette Politique de Cookies de temps  autre. Nous vous encourageons  consulter cette page rgulirement pour toute modification. La date de la dernire mise  jour sera indique en haut de cette page."})}),n.jsx(Ae.div,{variants:t,className:"text-center pt-6",children:n.jsxs("p",{className:"text-muted-foreground",children:["Pour toute question concernant notre utilisation des cookies, veuillez nous contacter via notre ",n.jsx(dt,{to:"/contact",className:"text-primary hover:underline",children:"page de contact"})," ou consulter notre ",n.jsx(dt,{to:"/privacy",className:"text-primary hover:underline",children:"Politique de Confidentialit"})," complte."]})})]})]})})},p1e=[{icon:wr,title:"1. Recherche Cible & Slection Intuitive",description:"Explorez notre catalogue via des filtres puissants (zone, surface, type de bien, budget) ou naviguez sur notre carte interactive pour dcouvrir les parcelles qui correspondent prcisment  vos critres. Enregistrez vos recherches pour des alertes personnalises."},{icon:xz,title:"2. Analyse Dtaille & Informations Cls",description:"Chaque fiche parcelle offre des photos de qualit, une description complte, et l'accs aux documents vrifis disponibles (plan cadastral, certificat d'urbanisme, titre de proprit). Utilisez notre messagerie scurise pour poser vos questions  nos agents."},{icon:dh,title:"3. Demande d'Intrt & Vrification Accompagne",description:"Exprimez votre intrt pour une parcelle. Un agent Teranga Foncier ddi vous contactera rapidement pour valider votre profil, comprendre vos besoins spcifiques et planifier les prochaines tapes (visite, informations complmentaires)."},{icon:ax,title:"4. Ngociation Transparente & Accord Scuris",description:"Votre agent vous accompagne et vous conseille durant la phase de ngociation. Nous facilitons la rdaction des documents prliminaires (promesse de vente, offre d'achat) en collaboration avec les notaires partenaires pour scuriser l'accord."},{icon:Cr,title:"5. Finalisation Juridique & Administrative Sereine",description:"Nous coordonnons toutes les dmarches avec les notaires, le cadastre et les services administratifs pour la prparation et la signature de l'acte de vente authentique. Vous tes inform  chaque tape."},{icon:Hae,title:"6. Devenez Propritaire en Toute Confiance !",description:"Flicitations ! Vous recevez votre titre de proprit officiel. Teranga Foncier reste  votre disposition pour des conseils post-acquisition (mise en valeur, contacts utiles)."}],g1e=["Vrification de l'identit du vendeur","Contrle du titre de proprit (TF, Bail, Dlibration)","Vrification de la situation au Cadastre","Contrle de l'tat des droits rels (hypothques, etc.)","Vrification de la conformit au plan d'urbanisme","Recherche de litiges en cours (mairie, tribunaux)","Contrle des taxes et impts fonciers","Visite physique et bornage contradictoire du terrain","Validation du mandat de vente","Rapport de synthse de la diligence raisonnable"],x1e=()=>{const e={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7,ease:"easeOut"}}},t={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.2}}},r={hidden:{opacity:0,y:25,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:"easeOut"}}};return n.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-gradient-to-b from-background to-blue-50 dark:from-background dark:to-blue-900/20 min-h-screen",children:n.jsxs("div",{className:"container mx-auto py-16 px-4 space-y-16 md:space-y-24",children:[n.jsxs(Ae.section,{variants:e,initial:"hidden",animate:"visible",className:"text-center pt-8",children:[n.jsx(Sz,{className:"h-16 w-16 md:h-20 md:w-20 mx-auto mb-6 text-primary"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Comment a Marche ?"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto",children:"Acqurir un terrain au Sngal n'a jamais t aussi simple, transparent et scuris. Dcouvrez notre processus optimis pour vous."})]}),n.jsxs(Ae.section,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-12 text-center text-primary",children:"Les tapes Cls pour l'Acheteur"}),n.jsx(Ae.div,{variants:t,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:p1e.map((s,i)=>n.jsx(Ae.div,{variants:r,children:n.jsxs(he,{className:"h-full flex flex-col text-center p-6 border border-border/50 bg-card shadow-lg hover:shadow-primary/15 transition-all duration-300 transform hover:-translate-y-1",children:[n.jsx("div",{className:"mb-5 inline-block mx-auto p-4 bg-primary/10 text-primary rounded-full ring-4 ring-primary/20",children:n.jsx(s.icon,{className:"h-10 w-10"})}),n.jsx("h3",{className:"text-xl font-semibold mb-3 text-foreground",children:s.title}),n.jsx("p",{className:"text-muted-foreground text-sm flex-grow leading-relaxed",children:s.description})]})},i))})]}),n.jsxs(Ae.section,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"bg-gradient-to-br from-primary/5 via-primary/10 to-primary/5 dark:from-card/50 dark:via-card/70 dark:to-card/50 rounded-xl p-8 md:p-12 shadow-xl border border-primary/20",children:[n.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-10 text-center text-primary flex items-center justify-center",children:[n.jsx(Hie,{className:"mr-3 h-10 w-10"}),"Notre Processus de Vrification en 10 Points"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:g1e.map((s,i)=>n.jsxs(Ae.div,{variants:r,className:"flex items-start p-3",children:[n.jsx(Mu,{className:"h-6 w-6 text-green-600 mr-3 mt-1 flex-shrink-0"}),n.jsx("div",{children:n.jsx("p",{className:"font-medium text-foreground",children:s})})]},i))})]}),n.jsxs(Ae.section,{variants:e,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"text-center py-10",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-semibold mb-6 text-foreground",children:"Prt  trouver le terrain de vos rves ?"}),n.jsx("p",{className:"text-lg text-muted-foreground max-w-xl mx-auto mb-8",children:"Commencez votre recherche ds maintenant et dcouvrez les meilleures opportunits foncires vrifies au Sngal."}),n.jsx(Ae.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(Y,{size:"xl",asChild:!0,className:"bg-gradient-to-r from-green-500 to-primary hover:opacity-90 text-white text-lg shadow-lg px-10 py-7",children:n.jsxs(dt,{to:"/parcelles",children:["Explorer les Parcelles Disponibles ",n.jsx(Fn,{className:"ml-2.5 h-5 w-5"})]})})})]})]})})};var $l="Accordion",v1e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ZE,y1e,b1e]=Ph($l),[s_,FHe]=ws($l,[b1e,R9]),XE=R9(),bW=we.forwardRef((e,t)=>{const{type:r,...s}=e,i=s,a=s;return n.jsx(ZE.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?n.jsx(N1e,{...a,ref:t}):n.jsx(_1e,{...i,ref:t})})});bW.displayName=$l;var[jW,j1e]=s_($l),[wW,w1e]=s_($l,{collapsible:!1}),_1e=we.forwardRef((e,t)=>{const{value:r,defaultValue:s,onValueChange:i=()=>{},collapsible:a=!1,...o}=e,[l,c]=Ri({prop:r,defaultProp:s??"",onChange:i,caller:$l});return n.jsx(jW,{scope:e.__scopeAccordion,value:we.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:we.useCallback(()=>a&&c(""),[a,c]),children:n.jsx(wW,{scope:e.__scopeAccordion,collapsible:a,children:n.jsx(_W,{...o,ref:t})})})}),N1e=we.forwardRef((e,t)=>{const{value:r,defaultValue:s,onValueChange:i=()=>{},...a}=e,[o,l]=Ri({prop:r,defaultProp:s??[],onChange:i,caller:$l}),c=we.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=we.useCallback(d=>l((h=[])=>h.filter(m=>m!==d)),[l]);return n.jsx(jW,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:n.jsx(wW,{scope:e.__scopeAccordion,collapsible:!0,children:n.jsx(_W,{...a,ref:t})})})}),[S1e,i_]=s_($l),_W=we.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:s,dir:i,orientation:a="vertical",...o}=e,l=we.useRef(null),c=Gt(l,t),u=y1e(r),h=Ch(i)==="ltr",m=ft(e.onKeyDown,p=>{var T;if(!v1e.includes(p.key))return;const v=p.target,g=u().filter(M=>{var z;return!((z=M.ref.current)!=null&&z.disabled)}),y=g.findIndex(M=>M.ref.current===v),j=g.length;if(y===-1)return;p.preventDefault();let _=y;const w=0,A=j-1,S=()=>{_=y+1,_>A&&(_=w)},P=()=>{_=y-1,_<w&&(_=A)};switch(p.key){case"Home":_=w;break;case"End":_=A;break;case"ArrowRight":a==="horizontal"&&(h?S():P());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(h?P():S());break;case"ArrowUp":a==="vertical"&&P();break}const C=_%j;(T=g[C].ref.current)==null||T.focus()});return n.jsx(S1e,{scope:r,disabled:s,direction:i,orientation:a,children:n.jsx(ZE.Slot,{scope:r,children:n.jsx(_t.div,{...o,"data-orientation":a,ref:c,onKeyDown:s?void 0:m})})})}),Vj="AccordionItem",[A1e,YE]=s_(Vj),NW=we.forwardRef((e,t)=>{const{__scopeAccordion:r,value:s,...i}=e,a=i_(Vj,r),o=j1e(Vj,r),l=XE(r),c=ka(),u=s&&o.value.includes(s)||!1,d=a.disabled||e.disabled;return n.jsx(A1e,{scope:r,open:u,disabled:d,triggerId:c,children:n.jsx(F9,{"data-orientation":a.orientation,"data-state":EW(u),...l,...i,ref:t,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});NW.displayName=Vj;var SW="AccordionHeader",AW=we.forwardRef((e,t)=>{const{__scopeAccordion:r,...s}=e,i=i_($l,r),a=YE(SW,r);return n.jsx(_t.h3,{"data-orientation":i.orientation,"data-state":EW(a.open),"data-disabled":a.disabled?"":void 0,...s,ref:t})});AW.displayName=SW;var yP="AccordionTrigger",PW=we.forwardRef((e,t)=>{const{__scopeAccordion:r,...s}=e,i=i_($l,r),a=YE(yP,r),o=w1e(yP,r),l=XE(r);return n.jsx(ZE.ItemSlot,{scope:r,children:n.jsx(ume,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...s,ref:t})})});PW.displayName=yP;var CW="AccordionContent",kW=we.forwardRef((e,t)=>{const{__scopeAccordion:r,...s}=e,i=i_($l,r),a=YE(CW,r),o=XE(r);return n.jsx(dme,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...o,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});kW.displayName=CW;function EW(e){return e?"open":"closed"}var P1e=bW,C1e=NW,k1e=AW,TW=PW,OW=kW;const LW=P1e,JE=x.forwardRef(({className:e,...t},r)=>n.jsx(C1e,{ref:r,className:st("border-b",e),...t}));JE.displayName="AccordionItem";const QE=x.forwardRef(({className:e,children:t,...r},s)=>n.jsx(k1e,{className:"flex",children:n.jsxs(TW,{ref:s,className:st("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,n.jsx(S0,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));QE.displayName=TW.displayName;const eT=x.forwardRef(({className:e,children:t,...r},s)=>n.jsx(OW,{ref:s,className:st("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",e),...r,children:n.jsx("div",{className:"pb-4 pt-0",children:t})}));eT.displayName=OW.displayName;const wM=[{question:"Comment Teranga Foncier vrifie-t-il l'authenticit des parcelles ?",answer:"Notre processus est rigoureux. Chaque parcelle subit une vrification documentaire approfondie auprs des services comptents (cadastre, domaines, mairies). Nous analysons les titres de proprit (titre foncier, bail, dlibration), les plans cadastraux, et nous nous assurons de l'absence de litiges connus. Des visites sur site peuvent complter ces vrifications pour confirmer les limites et l'tat du terrain. Notre but est de vous offrir une tranquillit d'esprit maximale."},{question:"Quels sont les frais de service de Teranga Foncier et que couvrent-ils ?",answer:"La transparence est cl. Nos frais de service sont communiqus clairement avant toute transaction. Ils couvrent les cots de vrification approfondie, l'expertise de nos agents fonciers qui vous accompagnent, la scurisation du processus administratif, l'utilisation de notre plateforme technologique, et la mise en relation avec des professionnels (notaires, gomtres). Ils sont gnralement un pourcentage du prix de vente ou un forfait pour certains services. N'hsitez pas  demander un devis personnalis."},{question:"Je vis  l'tranger (diaspora), puis-je acheter un terrain via Teranga Foncier ?",answer:"Absolument ! Teranga Foncier est spcifiquement conu pour faciliter l'acquisition foncire pour la diaspora sngalaise. Nous vous guidons  travers les dmarches  distance, y compris la mise en place de procurations scurises si ncessaire, les transferts de fonds, et la reprsentation par nos agents sur place. Notre objectif est de rendre l'investissement aussi simple et sr que si vous tiez au Sngal."},{question:"Quels documents sont ncessaires pour l'achat d'un terrain ?",answer:"Les documents varient, mais typiquement : une pice d'identit en cours de validit (carte d'identit nationale ou passeport), un justificatif de domicile rcent. Pour les socits, des documents supplmentaires (registre de commerce, statuts) sont requis. Nos agents vous fourniront une liste prcise et vous aideront  rassembler tous les lments ncessaires pour le notaire."},{question:"Comment puis-je proposer mon terrain  la vente sur votre plateforme ?",answer:"C'est simple ! Crez un compte vendeur, puis utilisez la section 'Vendre un Bien' de votre tableau de bord. Vous devrez fournir des informations dtailles sur votre terrain (localisation, superficie, type de titre) et tlcharger les documents de proprit (titre foncier, bail, plan, etc.). Notre quipe vrifiera les informations avant de publier votre annonce et vous contactera pour les prochaines tapes."},{question:"Quel est le rle exact du notaire dans une transaction immobilire au Sngal ?",answer:"Le notaire est un officier public indispensable qui scurise et authentifie la transaction. Il rdige l'acte de vente final aprs avoir vrifi la conformit lgale de tous les documents, s'assure du paiement des taxes et droits d'enregistrement (droits de mutation), et inscrit la transaction au conservatoire foncier. Il protge les intrts de l'acheteur et du vendeur. Nous travaillons en troite collaboration avec un rseau de notaires partenaires de confiance."},{question:"Quelles garanties Teranga Foncier offre-t-elle contre les litiges ?",answer:"Bien que nous ne puissions garantir  100% l'absence de litiges futurs (le risque zro n'existe pas), notre processus de vrification approfondie vise  minimiser drastiquement ce risque. Nous vrifions les antcdents, l'tat des charges et hypothques potentielles. En cas de doute, nous vous en informons et pouvons suspendre la transaction. Notre mission est de vous fournir toutes les informations pour une dcision claire."}],E1e=()=>{const e={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6}}},t={initial:{opacity:0,y:20},animate:r=>({opacity:1,y:0,transition:{delay:r*.05,duration:.4}})};return n.jsxs(Ae.div,{variants:e,initial:"initial",animate:"animate",className:"container mx-auto py-16 px-4 max-w-4xl",children:[n.jsxs(Ae.div,{variants:t,custom:0,className:"text-center mb-12 md:mb-16",children:[n.jsx(uk,{className:"h-16 w-16 md:h-20 md:w-20 mx-auto mb-6 text-primary"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Questions Frquemment Poses"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground",children:"Trouvez des rponses claires  vos interrogations sur l'achat, la vente et la scurisation de terrains avec Teranga Foncier."})]}),n.jsx(LW,{type:"single",collapsible:!0,className:"w-full space-y-3",children:wM.map((r,s)=>n.jsx(Ae.custom,{variants:t,custom:s+1,children:n.jsxs(JE,{value:`item-${s+1}`,className:"bg-card border border-border/50 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[n.jsx(QE,{className:"text-lg text-left hover:no-underline px-6 py-4 text-foreground font-medium",children:r.question}),n.jsx(eT,{className:"text-base text-muted-foreground leading-relaxed px-6 pb-5",children:r.answer})]})},s))}),n.jsxs(Ae.div,{variants:t,custom:wM.length+1,className:"mt-16 text-center p-8 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 rounded-lg border border-primary/30 shadow-lg",children:[n.jsx(Nh,{className:"h-10 w-10 mx-auto mb-4 text-primary"}),n.jsx("h3",{className:"text-2xl font-semibold mb-3 text-foreground",children:"Vous ne trouvez pas votre rponse ?"}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Notre quipe d'experts est  votre coute pour vous fournir une assistance personnalise."}),n.jsx(Ae.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(Y,{asChild:!0,size:"lg",className:"bg-primary text-primary-foreground hover:bg-primary/90",children:n.jsxs(dt,{to:"/contact",children:[n.jsx(Sh,{className:"mr-2 h-5 w-5"})," Nous Contacter Directement"]})})})]})]})},T1e=[{name:"Sngindia SA",category:"Constructeur Immobilier de Rfrence",description:"Acteur majeur dans la construction de logements modernes et d'infrastructures de qualit au Sngal. Senegindia est reconnu pour ses projets innovants, son respect des normes internationales et sa vision  long terme pour un habitat durable. Ils apportent une expertise technique pointue et une capacit de ralisation prouve.",logoPlaceholder:"Logo moderne et pur de Senegindia SA",website:"#",focus:"Grands projets rsidentiels, Villes nouvelles, Infrastructures urbaines"},{name:"WinWin Afrique",category:"Amnageur & Dveloppeur Territorial",description:"Spcialis dans l'amnagement de zones rsidentielles, commerciales et industrielles, WinWin Afrique s'engage  crer des cadres de vie et d'activit agrables, fonctionnels et intgrs. Leur approche met l'accent sur la viabilisation de qualit et le respect de l'environnement.",logoPlaceholder:"Logo dynamique de WinWin Afrique, symbolisant la croissance",website:"#",focus:"Amnagement foncier, Viabilisation de terrains, Dveloppement de zones d'activits"},{name:"CDE - La Cit de l'mergence",category:"Promoteur de Projets Urbains Intgrs",description:"Dveloppeur de la Cit de l'mergence, un projet phare intgrant habitat, bureaux, commerces et loisirs. CDE est un acteur cl dans la cration d'cosystmes urbains modernes et durables, contribuant  la transformation du paysage sngalais.",logoPlaceholder:"Logo institutionnel de La Cit de l'mergence",website:"#",focus:"Projets immobiliers mixtes, Urbanisme moderne, Dveloppement de ples d'attractivit"},{name:"CSE - Compagnie Sahlienne d'Entreprises",category:"Leader en BTP & Infrastructures",description:"Figure de proue dans le secteur du BTP au Sngal et en Afrique de l'Ouest, la CSE est un partenaire essentiel pour la ralisation d'infrastructures d'envergure (routes, ponts, btiments publics) qui accompagnent et structurent le dveloppement foncier.",logoPlaceholder:"Logo de la CSE, refltant la solidit et l'expertise",website:"#",focus:"Infrastructures majeures, Travaux publics, Gnie civil"},{name:"Chambre des Notaires du Sngal",category:"Garant de la Scurit Juridique",description:"Institution officielle regroupant les notaires du Sngal, elle est le pilier de la scurit des transactions immobilires. Nous collaborons troitement avec ses membres pour assurer la validit, l'authenticit des actes et la protection des droits de proprit.",logoPlaceholder:"Sceau officiel de la Chambre des Notaires du Sngal",website:"#",focus:"Scurit juridique, Actes authentiques, Conseil notarial"},{name:"Ordre des Gomtres-Experts du Sngal",category:"Expertise Technique & Cadastrale",description:"Les gomtres-experts jouent un rle crucial dans la dlimitation prcise, le bornage des terrains et la mise  jour du cadastre. Leur expertise technique assure la fiabilit des informations foncires et prvient les litiges lis aux limites de proprit.",logoPlaceholder:"Emblme de l'Ordre des Gomtres-Experts du Sngal",website:"#",focus:"Bornage et dlimitation, Travaux cadastraux, Topographie"}],O1e=["Rputation et thique Professionnelle","Solidit Financire et Exprience Prouve","Qualit des Ralisations et Respect des Dlais","Conformit Rglementaire et Administrative","Engagement envers la Transparence et la Satisfaction Client"],L1e=({partner:e,index:t})=>{const r={hidden:{opacity:0,y:50,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{delay:t*.1,duration:.5,ease:"easeOut"}}},s=i=>i.includes("Constructeur")||i.includes("Promoteur")||i.includes("BTP")?n.jsx(Vn,{className:"h-6 w-6 text-primary"}):i.includes("Dveloppement")||i.includes("Amnageur")?n.jsx(Ea,{className:"h-6 w-6 text-primary"}):i.includes("Juridique")||i.includes("Notaires")?n.jsx(gg,{className:"h-6 w-6 text-primary"}):i.includes("Technique")||i.includes("Gomtres")?n.jsx(bs,{className:"h-6 w-6 text-primary"}):n.jsx(ax,{className:"h-6 w-6 text-primary"});return n.jsx(Ae.div,{variants:r,className:"h-full",children:n.jsxs(he,{className:"h-full flex flex-col overflow-hidden shadow-xl border-border/50 bg-card hover:shadow-primary/15 transition-all duration-300 transform hover:-translate-y-1",children:[n.jsx(Ce,{className:"pb-4",children:n.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[n.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-lg bg-muted flex items-center justify-center p-2 ring-2 ring-primary/20",children:n.jsx("img",{alt:e.logoPlaceholder,className:"max-w-full max-h-full object-contain",src:"https://images.unsplash.com/photo-1566304660263-c15041ac11c0"})}),n.jsxs("div",{className:"flex-grow",children:[n.jsx(ke,{className:"text-xl md:text-2xl font-bold text-foreground mb-1",children:e.name}),n.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s(e.category),n.jsx("span",{className:"ml-2 font-medium",children:e.category})]})]})]})}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx(jt,{className:"text-base text-muted-foreground leading-relaxed mb-3",children:e.description}),n.jsxs("p",{className:"text-sm text-primary font-semibold mt-3",children:["Domaines d'expertise cls : ",n.jsx("br",{}),n.jsx("span",{className:"text-foreground font-normal",children:e.focus})]})]}),n.jsx(Wn,{children:n.jsxs(Y,{variant:"default",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90",onClick:()=>alert(` Visite du site de ${e.name} non implmente. URL: ${e.website}`),children:["Visiter le Site Web ",n.jsx(y2,{className:"h-4 w-4 ml-2"})]})})]})})},M1e=()=>{const e={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6}}};return n.jsx(Ae.div,{variants:e,initial:"initial",animate:"animate",className:"bg-gradient-to-b from-background to-blue-50 dark:from-background dark:to-blue-900/20 min-h-screen",children:n.jsxs("div",{className:"container mx-auto py-12 px-4 md:py-20",children:[n.jsxs(Ae.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.1},className:"text-center mb-12 md:mb-16",children:[n.jsx(ax,{className:"h-16 w-16 md:h-20 md:w-20 text-primary mx-auto mb-6"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold tracking-tight text-primary mb-4",children:"Nos Partenaires Stratgiques"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto",children:"Teranga Foncier est fier de collaborer avec un rseau d'acteurs cls de l'immobilier, de la construction et du dveloppement pour vous offrir un service complet, fiable et scuris."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:T1e.map((t,r)=>n.jsx(L1e,{partner:t,index:r},t.name))}),n.jsx(Ae.section,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5,duration:.7},className:"mt-16 md:mt-20",children:n.jsxs(he,{className:"bg-card/80 backdrop-blur-sm shadow-xl border-border/50",children:[n.jsxs(Ce,{children:[n.jsx(ke,{className:"text-2xl md:text-3xl text-center text-primary",children:"Nos Critres de Slection des Partenaires"}),n.jsx(jt,{className:"text-center max-w-2xl mx-auto",children:"Pour garantir la qualit et la fiabilit de notre rseau, nous slectionnons nos partenaires sur la base de critres stricts."})]}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:O1e.map((t,r)=>n.jsxs("div",{className:"flex items-center p-3 bg-muted/50 rounded-lg",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-600 mr-3 flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:t})]},r))})})]})}),n.jsxs(Ae.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.7,duration:.7},className:"mt-16 md:mt-20 text-center p-8 md:p-12 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 rounded-xl border border-primary/30 shadow-2xl",children:[n.jsx(Sh,{className:"h-10 w-10 mx-auto mb-4 text-primary"}),n.jsx("h3",{className:"text-2xl md:text-3xl font-semibold mb-4 text-foreground",children:"Vous souhaitez devenir partenaire ?"}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Si vous partagez notre vision d'un secteur foncier transparent, thique et accessible  tous, et que votre expertise peut enrichir notre cosystme, nous serions ravis d'changer."}),n.jsx(Ae.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(Y,{asChild:!0,size:"lg",className:"bg-primary text-primary-foreground hover:bg-primary/90 text-base shadow-lg px-8 py-6",children:n.jsx(dt,{to:"/contact?subject=Partenariat",children:"Contactez Notre quipe Partenariats"})})})]})]})})},I1e=()=>{const{toast:e}=pt(),[t,r]=x.useState(1),[s,i]=x.useState({propertyType:"",location:"",surfaceArea:"",price:"",titleDeedNumber:"",description:"",contactName:"",contactPhone:"",contactEmail:""}),[a,o]=x.useState([]),[l,c]=x.useState({}),[u,d]=x.useState(null),[h,m]=x.useState(!1),p=()=>r(C=>C+1),v=()=>r(C=>C-1),g=C=>{const{name:T,value:M}=C.target;i(z=>({...z,[T]:M}))},y=(C,T)=>{i(M=>({...M,[C]:T}))},j=C=>{o(Array.from(C.target.files))},_=x.useMemo(()=>[{key:"identity",label:"Pice d'identit (CNI ou Passeport)",required:!0},{key:"title",label:"Titre Foncier / Bail / Dlibration",required:!0},{key:"plan",label:"Plan cadastral ou plan de masse",required:!0},{key:"urbanism",label:"Certificat d'urbanisme (si disponible)",required:!1},{key:"fiscal",label:"Quitus fiscal / Attestation fiscale",required:!1},{key:"litigation",label:"Attestation d'absence de litige / mainleve hypothque",required:!1}],[]),w=C=>{c(T=>({...T,[C]:!T[C]}))},A=_.filter(C=>C.required).every(C=>l[C.key]),S=async C=>{C.preventDefault(),m(!0);try{const T=a.map(z=>({name:z.name,size:z.size,type:z.type})),M=await Je.logListingSubmission({userId:null,propertyType:s.propertyType,surfaceArea:s.surfaceArea,price:s.price,description:s.description,titleDeedNumber:s.titleDeedNumber,documentsMeta:T,allRequiredProvided:A});d(M.reference),e({title:A?"Soumission complte":"Soumission partielle",description:A?"Tous les documents essentiels sont fournis. Acclration de la vrification.":"Annonce reue. Fournissez les documents manquants pour obtenir le badge de confiance.",className:A?"bg-green-600 text-white":"bg-amber-500 text-white"}),p()}catch(T){console.error(T),e({title:"Erreur",description:"La soumission a chou. Ressayez.",variant:"destructive"})}finally{m(!1)}},P=()=>{switch(t){case 1:return n.jsxs(Ae.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-center",children:"tape 1: Informations sur le Terrain"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"propertyType",children:"Type de Bien"}),n.jsxs(Ft,{name:"propertyType",onValueChange:C=>y("propertyType",C),value:s.propertyType,children:[n.jsx(Dt,{id:"propertyType",className:"w-full h-11",children:n.jsx(zt,{placeholder:"Slectionnez..."})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"terrain_nu_tf",children:"Terrain Nu (Titre Foncier)"}),n.jsx(Ke,{value:"terrain_bail",children:"Terrain (Bail)"}),n.jsx(Ke,{value:"terrain_deliberation",children:"Terrain (Dlibration)"}),n.jsx(Ke,{value:"propriete_batie",children:"Proprit Btie"})]})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"location",children:"Localisation"}),n.jsx(De,{id:"location",name:"location",placeholder:"Ex: Dakar, Almadies",value:s.location,onChange:g,required:!0,className:"h-11"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"surfaceArea",children:"Superficie (m)"}),n.jsx(De,{id:"surfaceArea",name:"surfaceArea",type:"number",placeholder:"Ex: 300",value:s.surfaceArea,onChange:g,required:!0,className:"h-11"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"price",children:"Prix Demand (FCFA)"}),n.jsx(De,{id:"price",name:"price",type:"number",placeholder:"Ex: 50000000",value:s.price,onChange:g,required:!0,className:"h-11"})]})]}),n.jsx(Y,{onClick:p,className:"w-full",size:"lg",children:"Suivant"})]});case 2:return n.jsxs(Ae.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-center",children:"tape 2: Documents & Description"}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"titleDeedNumber",children:"Numro du Titre (TF, Bail, etc.)"}),n.jsx(De,{id:"titleDeedNumber",name:"titleDeedNumber",placeholder:"Ex: TF 1234/DG",value:s.titleDeedNumber,onChange:g,className:"h-11"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"description",children:"Description Dtaille"}),n.jsx(ms,{id:"description",name:"description",placeholder:"Atouts, environnement, situation...",value:s.description,onChange:g,rows:3})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-muted/30",children:[n.jsxs("p",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(Ys,{className:"h-5 w-5 text-primary"})," Vrification Anti-Fraude"]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Cochez les documents que vous tes prt  fournir. Les lments obligatoires sont marqus (*)."}),n.jsx("ul",{className:"space-y-2 text-sm",children:_.map(C=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("input",{type:"checkbox",id:`doc-${C.key}`,checked:!!l[C.key],onChange:()=>w(C.key),className:"mt-1"}),n.jsxs("label",{htmlFor:`doc-${C.key}`,className:"cursor-pointer select-none",children:[C.label,C.required&&n.jsx("span",{className:"text-red-500",children:" *"})]})]},C.key))}),n.jsx("div",{className:"mt-3 text-xs",children:A?n.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[n.jsx(Mu,{className:"h-4 w-4"})," Pr-requis essentiels complets  Badge ligible."]}):n.jsxs("span",{className:"text-amber-600 flex items-center gap-1",children:[n.jsx(kr,{className:"h-4 w-4"})," Documents essentiels manquants  la vrification sera plus lente."]})})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(Y,{onClick:v,variant:"outline",className:"w-full",size:"lg",children:"Prcdent"}),n.jsx(Y,{onClick:p,className:"w-full",size:"lg",children:"Suivant"})]})]});case 3:return n.jsxs(Ae.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-center",children:"tape 3: Vos Coordonnes"}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"contactName",children:"Nom Complet"}),n.jsx(De,{id:"contactName",name:"contactName",placeholder:"Prnom Nom",value:s.contactName,onChange:g,required:!0,className:"h-11"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"contactPhone",children:"Tlphone"}),n.jsx(De,{id:"contactPhone",name:"contactPhone",type:"tel",placeholder:"+221 77 123 45 67",value:s.contactPhone,onChange:g,required:!0,className:"h-11"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"contactEmail",children:"Email"}),n.jsx(De,{id:"contactEmail",name:"contactEmail",type:"email",placeholder:"nom@exemple.com",value:s.contactEmail,onChange:g,required:!0,className:"h-11"})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(Y,{onClick:v,variant:"outline",className:"w-full",size:"lg",children:"Prcdent"}),n.jsx(Y,{onClick:p,className:"w-full",size:"lg",children:"Suivant"})]})]});case 4:return n.jsxs(Ae.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-center",children:"tape 4: Tlversement de Documents"}),n.jsxs("div",{children:[n.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md cursor-pointer hover:border-primary transition-colors border-border",children:n.jsxs("div",{className:"space-y-1 text-center",children:[n.jsx(xg,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("div",{className:"flex text-sm text-muted-foreground",children:n.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-medium text-primary hover:text-primary/80",children:[n.jsx("span",{children:"Cliquez pour choisir"}),n.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",multiple:!0,onChange:j})]})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pice d'identit, Titre de proprit, Plan, etc."}),a.length>0&&n.jsx("ul",{className:"mt-2 text-xs text-green-600 list-none",children:a.map(C=>n.jsxs("li",{children:[C.name," (",(C.size/1024).toFixed(1)," KB)"]},C.name))})]})}),n.jsxs("div",{className:"mt-4 p-4 bg-primary/10 rounded-lg",children:[n.jsxs("h4",{className:"font-semibold text-primary flex items-center",children:[n.jsx(lk,{className:"mr-2 h-5 w-5"}),'Obtenez le Badge "Vendeur de Confiance"']}),n.jsx("p",{className:"text-xs text-primary/80 mt-1",children:"En fournissant des documents clairs, vous acclrez la vrification et obtenez un badge qui rassure les acheteurs et augmente la visibilit de votre annonce."})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(Y,{onClick:v,variant:"outline",className:"w-full",size:"lg",children:"Prcdent"}),n.jsx(Y,{onClick:S,className:"w-full",size:"lg",disabled:h,children:h?"Soumission...":"Soumettre ma Proposition"})]})]});case 5:return n.jsxs(Ae.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[n.jsx(Mu,{className:"mx-auto h-16 w-16 text-green-500 bg-green-100 rounded-full p-2"}),n.jsx("h3",{className:"text-2xl font-bold",children:"Proposition Envoye !"}),n.jsxs("p",{className:"text-muted-foreground",children:["Merci pour votre confiance. ",u&&n.jsxs(n.Fragment,{children:[n.jsx("br",{}),"Rfrence: ",n.jsx("span",{className:"font-mono font-semibold",children:u})]}),n.jsx("br",{}),A?"Votre dossier complet sera prioris.":"Ajoutez les documents manquants pour acclrer la vrification."]}),n.jsxs("div",{className:"flex justify-center gap-4 pt-4",children:[n.jsx(Y,{asChild:!0,variant:"outline",children:n.jsx(dt,{to:"/my-listings",children:"Voir Mes Annonces"})}),n.jsx(Y,{asChild:!0,children:n.jsx(dt,{to:"/",children:"Retour  l'Accueil"})})]})]});default:return null}};return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto py-8 px-4 md:py-12 max-w-3xl",children:n.jsxs(he,{className:"shadow-xl border-border/50 bg-card",children:[n.jsxs(Ce,{className:"text-center pb-4",children:[n.jsx(Cr,{className:"h-12 w-12 mx-auto mb-3 text-primary"}),n.jsx(ke,{className:"text-3xl font-bold",children:"Vendez Votre Terrain en 5 tapes"}),n.jsx(jt,{className:"text-lg text-muted-foreground",children:"Un processus simple et guid pour une vente scurise."})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 mb-6",children:n.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${t/5*100}%`,transition:"width 0.5s ease-in-out"}})}),P()]}),n.jsxs(Wn,{className:"text-sm text-muted-foreground text-center flex-col gap-2 pt-6",children:[n.jsxs("p",{className:"text-xs",children:["En soumettant, vous acceptez nos ",n.jsx(dt,{to:"/legal",className:"underline",children:"Termes"})," et notre ",n.jsx(dt,{to:"/privacy",className:"underline",children:"Politique de Confidentialit"}),"."]}),n.jsxs("p",{children:["Pour toute question, ",n.jsx(dt,{to:"/contact",className:"underline hover:text-primary",children:"contactez-nous"}),"."]})]})]})})},R1e=x.createContext({user:null,session:null,loading:!0,signUp:async()=>{},signIn:async()=>{},signOut:async()=>{},resetPassword:async()=>{},updateProfile:async()=>{}}),yx=()=>{const e=x.useContext(R1e);if(!e)throw new Error("useAuth must be used within a SupabaseAuthProvider");return e},D1e=e=>{switch(e){case"available":return{variant:"success",icon:Qt,text:"Publi"};case"pending":return{variant:"warning",icon:ln,text:"En vrification"};case"reserved":return{variant:"info",icon:Rl,text:"Rserv"};case"sold":return{variant:"default",icon:Qt,text:"Vendu"};case"rejected":return{variant:"destructive",icon:kr,text:"Action requise"};default:return{variant:"secondary",icon:ln,text:"Inconnu"}}},$1e=e=>e==="terrain"||e==="agricultural"?n.jsx(ia,{className:"mr-1.5 h-4 w-4"}):n.jsx(Vn,{className:"mr-1.5 h-4 w-4"}),_M=e=>new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),F1e=()=>{const[e,t]=x.useState(!0),[r,s]=x.useState([]),{toast:i}=pt(),{user:a}=yx();x.useEffect(()=>{(async()=>{if(!a){t(!1);return}try{t(!0);const h=(await Je.getParcelsByOwner(a.id)).map(m=>({id:m.id,name:m.title||`Parcelle ${m.reference}`,reference:m.reference,type:m.property_type||"terrain",status:m.status||"pending",dateSubmitted:new Date(m.created_at).toLocaleDateString("fr-FR"),price:m.price||0,location:m.location,description:m.description,area_sqm:m.area_sqm,image_url:m.image_url,updated_at:m.updated_at}));s(h)}catch(d){console.error("Erreur lors du chargement des annonces:",d),s([{id:"PROP001",name:"Terrain viabilis Diamniadio",type:"terrain",status:"pending",dateSubmitted:"2025-05-01",price:3e7,reference:"REF-001",location:"Diamniadio, Dakar"},{id:"PROP002",name:"Villa R+1 Sacr Coeur",type:"residential",status:"available",dateSubmitted:"2025-04-20",price:12e7,reference:"REF-002",location:"Sacr Coeur, Dakar",parcelLink:"/parcelles/DK015"},{id:"PROP003",name:"Terrain agricole proche This",type:"agricultural",status:"rejected",dateSubmitted:"2025-04-10",price:15e6,reference:"REF-003",location:"This",message:"Document 'Titre Foncier' illisible. Veuillez re-soumettre."}]),i({variant:"destructive",title:"Erreur de chargement",description:"Impossible de charger vos annonces. Donnes de dmonstration affiches."})}finally{t(!1)}})()},[a,i]);const o=u=>{s(d=>d.filter(h=>h.id!==u)),i({title:"Bien supprim",description:`Votre bien ${u} a t retir.`})},l={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return n.jsxs(Ae.div,{initial:"hidden",animate:"visible",variants:l,className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Mes Biens en Vente"}),e?n.jsx("div",{className:"flex justify-center items-center py-20",children:n.jsx(Tt,{size:"lg"})}):r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(u=>{const d=D1e(u.status),h=d.icon;return n.jsx(Ae.div,{variants:c,children:n.jsxs(he,{className:"hover:shadow-md transition-shadow border",children:[n.jsxs(Ce,{className:"pb-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[n.jsxs(ke,{className:"text-lg flex items-center",children:[$1e(u.type)," ",u.name]}),n.jsxs(Ge,{variant:d.variant,className:"whitespace-nowrap w-fit",children:[n.jsx(h,{className:"mr-1.5 h-4 w-4"}),d.text]})]}),n.jsxs(jt,{children:["ID: ",u.id," | Soumis le: ",u.dateSubmitted," | Prix: ",_M(u.price)]})]}),n.jsxs(ve,{children:[u.status==="Action requise"&&n.jsx("p",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:u.message}),u.status==="Vendu (Paiement en cours)"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm font-medium mb-1",children:[n.jsx("span",{children:"Progression du paiement"}),n.jsxs("span",{children:[u.paymentProgress,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5 mb-2",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${u.paymentProgress}%`}})}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Montant peru: ",_M(u.totalPaid)]})]})]}),n.jsxs(Wn,{className:"pt-4 flex flex-wrap gap-2 justify-end",children:[u.status==="Publi"&&u.parcelLink&&n.jsx(Y,{variant:"link",size:"sm",asChild:!0,children:n.jsxs(dt,{to:u.parcelLink,children:["Voir l'annonce ",n.jsx(Fn,{className:"ml-1 h-3 w-3"})]})}),n.jsxs(Y,{variant:"outline",size:"sm",children:[n.jsx(Ah,{className:"mr-2 h-4 w-4"})," Modifier"]}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsxs(Y,{variant:"destructive",size:"sm",children:[n.jsx(di,{className:"mr-2 h-4 w-4"})," Supprimer"]})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"Confirmer la suppression"}),n.jsxs(Rc,{children:["tes-vous sr de vouloir supprimer dfinitivement ce bien (",u.name,") ? Cette action est irrversible."]})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>o(u.id),children:"Supprimer"})]})]})]})]})]})},u.id)})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16 bg-card border rounded-lg shadow-sm",children:[n.jsx(Vn,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucun bien soumis"}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Vous n'avez pas encore propos de bien  la vente sur notre plateforme."}),n.jsx(Y,{asChild:!0,children:n.jsxs(dt,{to:"/sell-property",children:[n.jsx(xg,{className:"mr-2 h-4 w-4"})," Proposer un Bien"]})})]})]})},z1e=async e=>{try{return await Je.getUserFavorites(e)||[]}catch(t){return console.error("Erreur rcupration favoris:",t),[]}},B1e=async(e,t)=>{try{return await Je.removeFromFavorites(e,t),!0}catch(r){return console.error("Erreur suppression favori:",r),!1}},q1e=e=>e==null?"N/A":new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),V1e=e=>{switch(e){case"Disponible":return"success";case"Rserve":return"warning";case"Vendue":return"destructive";default:return"secondary"}},U1e=({parcel:e,onRemove:t})=>n.jsx(Ae.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"h-full",children:n.jsxs(he,{className:"h-full flex flex-col overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 relative group",children:[n.jsxs(Ce,{className:"p-0 relative",children:[n.jsx("div",{className:"aspect-video bg-muted overflow-hidden",children:n.jsx("img",{className:"w-full h-full object-cover",alt:`Image principale pour ${e.location_name}`,src:"https://images.unsplash.com/photo-1675023112817-52b789fd2ef0"})}),n.jsx(Ge,{variant:V1e(e.status),className:"absolute top-2 right-2 text-xs px-2 py-0.5",children:e.status})]}),n.jsxs(ve,{className:"p-4 flex-grow",children:[n.jsx(ke,{className:"text-lg mb-2 truncate",children:e.location_name}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(jr,{className:"h-4 w-4 mr-2 flex-shrink-0"})," Zone: ",n.jsx("span",{className:"font-medium text-foreground ml-1",children:e.zone||"N/A"})]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(k0,{className:"h-4 w-4 mr-2 flex-shrink-0"})," Surface: ",n.jsx("span",{className:"font-medium text-foreground ml-1",children:e.area_sqm?`${e.area_sqm} m`:"N/A"})]})]})]}),n.jsxs(Wn,{className:"p-4 border-t flex justify-between items-center",children:[n.jsx("p",{className:"text-lg font-bold text-accent_brand",children:q1e(e.price)}),n.jsx(Y,{size:"sm",asChild:!0,children:n.jsx(dt,{to:`/parcelles/${e.id}`,children:"Voir Dtails"})})]}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsx(Y,{variant:"destructive",size:"icon",className:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity",title:"Retirer des favoris",children:n.jsx(di,{className:"h-4 w-4"})})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"Retirer des favoris ?"}),n.jsxs(Rc,{children:['Voulez-vous vraiment retirer "',e.location_name,'" de votre liste de favoris ?']})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>t(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Retirer"})]})]})]})]})}),H1e=()=>n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((e,t)=>n.jsxs(he,{className:"overflow-hidden",children:[n.jsx(Ct,{className:"aspect-video w-full"}),n.jsxs(ve,{className:"p-4",children:[n.jsx(Ct,{className:"h-6 w-3/4 mb-2"}),n.jsx(Ct,{className:"h-4 w-1/2 mb-1"}),n.jsx(Ct,{className:"h-4 w-1/2"})]}),n.jsxs(Wn,{className:"p-4 border-t flex justify-between items-center",children:[n.jsx(Ct,{className:"h-6 w-1/3"}),n.jsx(Ct,{className:"h-9 w-1/4"})]})]},t))}),W1e=()=>{const{user:e}=ar(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(null),{toast:l}=pt();x.useEffect(()=>{(async()=>{if(i(!0),o(null),!e){o("Veuillez vous connecter pour voir vos favoris."),i(!1);return}try{const d=await z1e(e.id),h=[];for(const m of d){const p=await Je.getParcelById(m.parcel_id);p&&h.push(p)}r(h)}catch(d){console.error("Erreur chargement favoris:",d),o("Impossible de charger vos parcelles favorites."),r([])}finally{i(!1)}})()},[e]);const c=async u=>{if(e)try{await B1e(e.id,u)?(r(h=>h.filter(m=>m.id!==u)),l({title:"Retir des favoris",description:"La parcelle a t retire de vos favoris."})):l({title:"Erreur",description:"Impossible de retirer la parcelle des favoris.",variant:"destructive"})}catch(d){console.error("Erreur suppression favori:",d),l({title:"Erreur",description:"Impossible de retirer la parcelle des favoris.",variant:"destructive"})}};return n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Mes Favoris"}),n.jsx("p",{className:"text-muted-foreground",children:"Retrouvez ici les parcelles que vous avez sauvegardes."})]}),s?n.jsx(H1e,{}):a?n.jsxs("div",{className:"text-center py-10 text-destructive bg-destructive/10 rounded-md",children:[n.jsx("p",{children:a}),!e&&n.jsx(Y,{asChild:!0,className:"mt-4",children:n.jsx(dt,{to:"/login",children:"Se Connecter"})})]}):t.length>0?n.jsx(Ae.div,{layout:!0,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>n.jsx(U1e,{parcel:u,onRemove:c},u.id))}):n.jsxs("div",{className:"text-center py-16 bg-muted/50 rounded-lg border border-dashed",children:[n.jsx(wie,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Votre liste de favoris est vide"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Cliquez sur l'icne  sur une parcelle pour l'ajouter ici."}),n.jsx(Y,{asChild:!0,children:n.jsx(dt,{to:"/parcelles",children:"Explorer les parcelles"})})]})]})},G1e=e=>{if(!e)return"Date inconnue";const t=new Date(e),s=Math.round((new Date-t)/1e3),i=Math.round(s/60),a=Math.round(i/60),o=Math.round(a/24);return s<60?"Il y a quelques secondes":i<60?`Il y a ${i} min`:a<24?`Il y a ${a} h`:o===1?"Hier":o<7?`Il y a ${o} jours`:t.toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"})},K1e=({notification:e,onMarkRead:t,onDelete:r})=>n.jsxs(Ae.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:st("flex items-start gap-4 p-4 border-b last:border-b-0 transition-colors",!e.read&&"bg-primary/5 hover:bg-primary/10"),children:[n.jsxs("div",{className:st("mt-1 relative",e.read?"text-muted-foreground":"text-primary"),children:[n.jsx(uz,{className:"h-5 w-5"}),!e.read&&n.jsx("span",{className:"absolute -top-1 -right-1 flex h-2 w-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("p",{className:st("text-sm",!e.read&&"font-semibold"),children:e.title||e.type}),n.jsx("span",{className:"text-xs text-muted-foreground",children:G1e(e.created_at)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 items-center",children:[e.link&&n.jsx(Y,{variant:"outline",size:"xs",asChild:!0,children:n.jsxs(dt,{to:e.link,children:["Voir ",n.jsx(Fn,{className:"h-3 w-3 ml-1"})]})}),!e.read&&n.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>t(e.id),title:"Marquer comme lu",children:n.jsx(v2,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>r(e.id),title:"Supprimer",children:n.jsx(di,{className:"h-4 w-4"})})]})]}),Z1e=()=>n.jsx("div",{className:"space-y-2",children:[...Array(4)].map((e,t)=>n.jsxs("div",{className:"flex items-start gap-4 p-4 border-b",children:[n.jsx(Ct,{className:"h-5 w-5 rounded-full mt-1"}),n.jsxs("div",{className:"flex-grow space-y-2",children:[n.jsx(Ct,{className:"h-4 w-3/4"}),n.jsx(Ct,{className:"h-3 w-1/4"})]}),n.jsx(Ct,{className:"h-8 w-16"})]},t))}),X1e=()=>{const{user:e}=ar(),{toast:t}=pt(),{notifications:r,loading:s,isFirebaseAvailable:i,markNotificationAsRead:a,deleteNotification:o,markAllNotificationsAsRead:l,deleteAllNotifications:c}=D0(),[u,d]=x.useState(null);x.useEffect(()=>{d(e?null:"Veuillez vous connecter pour voir vos notifications.")},[e]);const h=async y=>{try{await a(y),t({title:"Notification marque comme lue."})}catch(j){console.error("Error marking notification as read:",j),t({title:"Erreur",description:"Impossible de marquer la notification comme lue.",variant:"destructive"})}},m=async()=>{if(e)try{await l(),t({title:"Notifications marques comme lues."})}catch(y){console.error("Error marking all notifications as read:",y),t({title:"Erreur",description:"Impossible de marquer toutes les notifications comme lues.",variant:"destructive"})}},p=async y=>{try{await o(y),t({title:"Notification supprime."})}catch(j){console.error("Error deleting notification:",j),t({title:"Erreur",description:"Impossible de supprimer la notification.",variant:"destructive"})}},v=async()=>{if(e)try{await c(),t({title:"Toutes les notifications ont t supprimes."})}catch(y){console.error("Error deleting all notifications:",y),t({title:"Erreur",description:"Impossible de supprimer toutes les notifications.",variant:"destructive"})}},g=r.filter(y=>!y.read).length;return n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto py-8 px-4 max-w-4xl",children:[n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-primary flex items-center",children:[n.jsx(uz,{className:"h-7 w-7 mr-2"})," Notifications",g>0&&n.jsx(Ge,{variant:"destructive",className:"ml-2",children:g})]}),n.jsx("p",{className:"text-muted-foreground",children:"Restez inform des mises  jour importantes."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:m,disabled:g===0,children:[n.jsx(v2,{className:"h-4 w-4 mr-1"})," Tout marquer comme lu"]}),n.jsxs(Y,{variant:"destructive",size:"sm",onClick:v,disabled:r.length===0,children:[n.jsx(di,{className:"h-4 w-4 mr-1"})," Tout supprimer"]})]})]}),n.jsx(he,{children:n.jsx(ve,{className:"p-0",children:s?n.jsx(Z1e,{}):u?n.jsxs("div",{className:"text-center py-10 text-destructive px-4",children:[n.jsx("p",{children:u}),!e&&n.jsx(Y,{asChild:!0,className:"mt-4",children:n.jsx(dt,{to:"/login",children:"Se Connecter"})})]}):r.length>0?n.jsx(Ae.div,{layout:!0,className:"divide-y",children:r.map(y=>n.jsx(K1e,{notification:y,onMarkRead:h,onDelete:p},y.id))}):n.jsxs("div",{className:"text-center py-16 px-4",children:[n.jsx(cz,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Aucune notification"}),n.jsx("p",{className:"text-muted-foreground",children:i?"Vous n'avez aucune nouvelle notification pour le moment.":"Service de notifications non disponible."})]})})})]})};var a_="Switch",[Y1e,zHe]=ws(a_),[J1e,Q1e]=Y1e(a_),MW=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[m,p]=x.useState(null),v=Gt(t,w=>p(w)),g=x.useRef(!1),y=m?d||!!m.closest("form"):!0,[j,_]=Ri({prop:i,defaultProp:a??!1,onChange:u,caller:a_});return n.jsxs(J1e,{scope:r,checked:j,disabled:l,children:[n.jsx(_t.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":$W(j),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ft(e.onClick,w=>{_(A=>!A),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&n.jsx(DW,{control:m,bubbles:!g.current,name:s,value:c,checked:j,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});MW.displayName=a_;var IW="SwitchThumb",RW=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,i=Q1e(IW,r);return n.jsx(_t.span,{"data-state":$W(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});RW.displayName=IW;var eje="SwitchBubbleInput",DW=x.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...i},a)=>{const o=x.useRef(null),l=Gt(o,a),c=hx(r),u=L0(t);return x.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const v=new Event("click",{bubbles:s});p.call(d,r),d.dispatchEvent(v)}},[c,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});DW.displayName=eje;function $W(e){return e?"checked":"unchecked"}var FW=MW,tje=RW;const fu=x.forwardRef(({className:e,...t},r)=>n.jsx(FW,{className:st("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(tje,{className:st("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fu.displayName=FW.displayName;const rje=e=>{if(!e)return"Critres non dfinis.";const t=[];return e.search&&t.push(`Terme: "${e.search}"`),e.zone&&e.zone!=="all"&&t.push(`Zone: ${e.zone}`),e.status&&e.status!=="all"&&t.push(`Statut: ${e.status}`),e.minPrice&&t.push(`Prix min: ${new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e.minPrice)}`),e.maxPrice&&t.push(`Prix max: ${new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e.maxPrice)}`),e.minArea&&t.push(`Surface min: ${e.minArea} m`),e.maxArea&&t.push(`Surface max: ${e.maxArea} m`),t.length===0?"Tous les terrains (aucun critre spcifique).":t.join(" | ")},nje=({search:e,onToggleNotify:t,onDelete:r,onEdit:s,onViewResults:i})=>n.jsx(Ae.div,{layout:!0,initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.3,ease:"easeInOut"},children:n.jsxs(he,{className:"shadow-md hover:shadow-lg transition-shadow duration-300 bg-card border border-border/50",children:[n.jsxs(Ce,{children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[n.jsxs(ke,{className:"text-lg text-primary mb-1 sm:mb-0 flex items-center",children:[n.jsx(Wo,{className:"h-5 w-5 mr-2 flex-shrink-0"}),e.search_name||"Recherche Sans Nom"]}),n.jsxs(Ge,{variant:e.notify?"success":"secondary",className:"flex items-center self-start sm:self-center text-xs py-1 px-2",children:[e.notify?n.jsx(Nl,{className:"h-3.5 w-3.5 mr-1.5"}):n.jsx(cz,{className:"h-3.5 w-3.5 mr-1.5"}),"Notifications ",e.notify?"Actives":"Dsactives"]})]}),n.jsxs(jt,{className:"text-xs mt-1",children:["Cre le: ",new Date(e.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})]})]}),n.jsxs(ve,{children:[n.jsx("p",{className:"text-sm font-medium mb-1.5 text-foreground",children:"Critres :"}),n.jsx("p",{className:"text-sm text-muted-foreground bg-muted/40 p-3 rounded-md border border-dashed border-border/70 text-xs leading-relaxed",children:rje(e.search_parameters)})]}),n.jsxs(Wn,{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center space-x-2 self-start sm:self-center",children:[n.jsx(fu,{id:`notify-${e.id}`,checked:e.notify,onCheckedChange:a=>t(e.id,a),"aria-label":"Activer les notifications pour cette recherche"}),n.jsx($e,{htmlFor:`notify-${e.id}`,className:"text-sm text-muted-foreground cursor-pointer",children:"Recevoir les alertes"})]}),n.jsxs("div",{className:"flex gap-2 self-end sm:self-center",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>s(e),title:"Modifier cette recherche",children:n.jsx(_z,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"default",size:"sm",onClick:()=>i(e.search_parameters),title:"Voir les rsultats actuels",children:n.jsx(y2,{className:"h-4 w-4"})}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsx(Y,{variant:"destructive",size:"sm",title:"Supprimer cette recherche",children:n.jsx(di,{className:"h-4 w-4"})})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"Confirmer la Suppression"}),n.jsxs(Rc,{children:['Voulez-vous vraiment supprimer la recherche sauvegarde "',e.search_name||"Recherche Sans Nom",'" ? Cette action est irrversible et arrtera les notifications associes.']})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>r(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Oui, Supprimer"})]})]})]})]})]})]})}),sje=()=>n.jsx("div",{className:"space-y-5",children:[...Array(2)].map((e,t)=>n.jsxs(he,{className:"shadow-md",children:[n.jsxs(Ce,{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx(Ct,{className:"h-7 w-3/5 mb-1"}),n.jsx(Ct,{className:"h-6 w-1/5"})]}),n.jsx(Ct,{className:"h-4 w-2/5"})]}),n.jsxs(ve,{children:[n.jsx(Ct,{className:"h-5 w-1/4 mb-2"}),n.jsx(Ct,{className:"h-12 w-full"})]}),n.jsxs(Wn,{className:"flex justify-between items-center pt-4 border-t",children:[n.jsx(Ct,{className:"h-6 w-1/3"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ct,{className:"h-9 w-10"}),n.jsx(Ct,{className:"h-9 w-10"}),n.jsx(Ct,{className:"h-9 w-10"})]})]})]},t))}),ije=()=>{const{user:e}=ar(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(null),{toast:l}=pt();x.useEffect(()=>{if(i(!0),o(null),!e){o("Veuillez vous connecter pour grer vos recherches sauvegardes."),i(!1);return}setTimeout(()=>{try{const p=initialSampleSearches.filter(v=>v.user_id==="user1");r(p.sort((v,g)=>new Date(g.created_at)-new Date(v.created_at)))}catch(p){console.error("Erreur de chargement des recherches sauvegardes:",p),o("Impossible de charger vos recherches sauvegardes."),r([])}finally{i(!1)}},500)},[e]);const c=(p,v)=>{try{r(g=>g.map(y=>y.id===p?{...y,notify:v}:y)),l({title:`Alertes ${v?"actives":"dsactives"}`,description:`Les notifications pour cette recherche ont t ${v?"actives":"dsactives"}.`})}catch{l({title:"Erreur",description:"Impossible de modifier le statut des notifications.",variant:"destructive"})}},u=p=>{try{r(v=>v.filter(g=>g.id!==p)),l({title:"Recherche Supprime",description:"La recherche sauvegarde a t supprime avec succs."})}catch{l({title:"Erreur",description:"Impossible de supprimer la recherche.",variant:"destructive"})}},d=p=>{l({title:"Fonctionnalit  venir",description:"La modification des recherches sera bientt disponible. Pour l'instant, supprimez et recrez votre recherche."})},h=()=>{l({title:"Comment sauvegarder une recherche ?",description:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"Pour sauvegarder une nouvelle recherche :"}),n.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-1",children:[n.jsxs("li",{children:["Allez sur la ",n.jsx(dt,{to:"/parcelles",className:"text-primary underline",children:"page des parcelles"}),"."]}),n.jsx("li",{children:"Appliquez les filtres souhaits (zone, prix, surface, etc.)."}),n.jsx("li",{children:'Cliquez sur le bouton "Sauvegarder la Recherche" (bientt disponible en haut des filtres).'})]})]}),duration:8e3})},m=p=>{const v=new URLSearchParams(p).toString();window.location.href=`/parcelles?${v}`,l({title:"Redirection...",description:"Affichage des rsultats correspondants."})};return n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto py-12 px-4",children:[n.jsxs("div",{className:"mb-10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{className:"text-center sm:text-left",children:[n.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-primary flex items-center",children:[n.jsx(N6,{className:"h-8 w-8 mr-3 text-primary"})," Mes Recherches Sauvegardes"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Grez vos critres de recherche et soyez alert des nouvelles parcelles correspondantes."})]}),n.jsxs(Y,{onClick:h,variant:"default",size:"lg",className:"self-center sm:self-auto",children:[n.jsx(Ds,{className:"h-5 w-5 mr-2"})," Crer une Nouvelle Recherche"]})]}),s?n.jsx(sje,{}):a?n.jsxs("div",{className:"text-center py-12 text-destructive bg-destructive/10 rounded-lg border border-destructive/30",children:[n.jsx(Iu,{className:"h-12 w-12 mx-auto mb-3"}),n.jsx("p",{className:"text-lg font-medium",children:a}),!e&&n.jsx(Y,{asChild:!0,className:"mt-4",children:n.jsx(dt,{to:"/login",children:"Se Connecter"})})]}):t.length>0?n.jsx(Ae.div,{layout:!0,className:"space-y-6",children:t.map(p=>n.jsx(nje,{search:p,onToggleNotify:c,onDelete:u,onEdit:d,onViewResults:m},p.id))}):n.jsxs("div",{className:"text-center py-16 bg-card rounded-lg border border-dashed border-border/70 shadow-sm",children:[n.jsx(N6,{className:"h-16 w-16 mx-auto text-muted-foreground/70 mb-5"}),n.jsx("h2",{className:"text-2xl font-semibold mb-2 text-foreground",children:"Aucune recherche sauvegarde pour le moment."}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Sauvegardez vos critres de recherche depuis la page des terrains pour tre alert des nouvelles opportunits."}),n.jsx(Y,{asChild:!0,size:"lg",children:n.jsx(dt,{to:"/parcelles",children:"Explorer les parcelles et dfinir des alertes"})})]})]})},aje=e=>new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",maximumFractionDigits:0}).format(e),oje=e=>{switch(e){case"Disponible":return"success";case"Rserve":return"warning";case"Vendue":return"destructive";default:return"secondary"}},lje=()=>{const{comparisonList:e,removeFromCompare:t,clearCompare:r}=x.useContext(X2),[s,i]=x.useState([]);pt(),x.useEffect(()=>{(async()=>{const c=[];for(const u of e){const d=await Je.getParcelById(u);d&&c.push(d)}i(c)})()},[e]);const a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return n.jsxs(Ae.div,{variants:a,initial:"hidden",animate:"visible",className:"container mx-auto py-16 px-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-12 gap-4",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary text-center md:text-left",children:"Comparer les Parcelles"}),s.length>0&&n.jsxs(Y,{variant:"outline",onClick:r,children:[n.jsx(di,{className:"mr-2 h-4 w-4"})," Vider la comparaison (",s.length,")"]})]}),s.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("div",{className:"inline-grid grid-flow-col auto-cols-max gap-6 md:gap-8 min-w-full",children:[n.jsx(Ae.div,{variants:o,className:"w-48 md:w-56 flex flex-col",children:n.jsxs(he,{className:"h-full flex flex-col border-transparent shadow-none bg-transparent",children:[n.jsx(Ce,{className:"p-0 h-[200px] invisible",children:n.jsx(ke,{children:"Caractristiques"})}),n.jsxs(ve,{className:"p-5 flex-grow space-y-2 text-sm font-medium",children:[n.jsxs("div",{className:"flex items-center h-10",children:[n.jsx(jr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Zone"]}),n.jsxs("div",{className:"flex items-center h-10",children:[n.jsx(k0,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Surface"]}),n.jsxs("div",{className:"flex items-center h-10",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Statut Juridique"]}),n.jsxs("div",{className:"flex items-center h-10",children:[n.jsx(dk,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Accs Eau"]}),n.jsxs("div",{className:"flex items-center h-10",children:[n.jsx(Ru,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Accs lectricit"]}),n.jsxs("div",{className:"flex items-center h-10",children:[n.jsx(Qt,{className:"h-4 w-4 mr-2 text-muted-foreground"}),"Statut"]}),n.jsx("div",{className:"flex items-center h-10 pt-2 border-t mt-2",children:"Prix"})]}),n.jsx(Wn,{className:"p-5 pt-0 h-[52px] invisible",children:n.jsx(Y,{children:"Voir Dtails"})})]})}),s.map(l=>{var c,u,d;return n.jsx(Ae.div,{variants:o,className:"w-64 md:w-72",children:n.jsxs(he,{className:"h-full flex flex-col border shadow-sm relative overflow-hidden group",children:[n.jsx(Y,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 z-20 h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>t(l.id),title:"Retirer de la comparaison",children:n.jsx(di,{className:"h-4 w-4"})}),n.jsxs(Ce,{className:"p-0 h-[200px]",children:[n.jsx("div",{className:"aspect-video bg-muted h-full",children:n.jsx("img",{className:"w-full h-full object-cover",alt:l.name,src:"https://images.unsplash.com/photo-1694388001616-1176f534d72f"})}),n.jsx(ke,{className:"text-base font-semibold p-3 truncate",children:l.name})]}),n.jsxs(ve,{className:"p-5 flex-grow space-y-2 text-sm text-center",children:[n.jsx("div",{className:"flex items-center justify-center h-10",children:l.zone}),n.jsxs("div",{className:"flex items-center justify-center h-10",children:[l.area_sqm," m"]}),n.jsx("div",{className:"flex items-center justify-center h-10",children:((c=l.titreFoncier)==null?void 0:c.split(" ")[0])||"Non spcifi"}),n.jsx("div",{className:"flex items-center justify-center h-10",children:(u=l.serviced)!=null&&u.water?n.jsx(Qt,{className:"text-green-500"}):n.jsx(ds,{className:"text-yellow-500"})}),n.jsx("div",{className:"flex items-center justify-center h-10",children:(d=l.serviced)!=null&&d.electricity?n.jsx(Qt,{className:"text-green-500"}):n.jsx(ds,{className:"text-yellow-500"})}),n.jsx("div",{className:"flex items-center justify-center h-10",children:n.jsx(Ge,{variant:oje(l.status),children:l.status})}),n.jsx("div",{className:"flex items-center justify-center h-10 pt-2 border-t mt-2 text-lg font-bold text-primary",children:aje(l.price)})]}),n.jsx(Wn,{className:"p-5 pt-0",children:n.jsx(Y,{asChild:!0,className:"w-full",size:"sm",children:n.jsxs(dt,{to:`/parcelles/${l.id}`,children:["Voir Dtails ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})})})]})},l.id)})]})}):n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16 border border-dashed rounded-lg bg-muted/30",children:[n.jsx("p",{className:"text-xl text-muted-foreground mb-4",children:"Aucune parcelle slectionne pour la comparaison."}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Cochez la case sur les fiches des parcelles que vous souhaitez comparer."}),n.jsx(Y,{asChild:!0,children:n.jsx(dt,{to:"/parcelles",children:"Voir les parcelles"})})]})]})},NM=e=>{if(!e)return"??";const t=e.split(" ");return t.length>1?t[0][0]+t[t.length-1][0]:e.substring(0,2)},SM=e=>e?new Date(e).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"",cje=()=>{const{user:e}=ar(),t=Di(),{toast:r}=pt(),{conversations:s,messages:i,loading:a,isFirebaseAvailable:o,sendMessage:l,createConversation:c,subscribeToMessages:u,markMessagesAsRead:d}=D0(),[h,m]=x.useState(null),[p,v]=x.useState(""),[g,y]=x.useState(!1),[j,_]=x.useState(null),w=x.useRef(null),A=x.useRef(null),S=()=>{var O;(O=w.current)==null||O.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{S()},[i]),x.useEffect(()=>{if(!e)return;const{parcelId:O,parcelName:I,contactUser:q}=t.state||{};if(O&&q){const F=s.find(W=>W.parcelId===O&&W.participants.includes(q));F?m(F.id):c([e.id,q],O,`Conversation pour ${I}`).then(W=>{W&&m(W)})}},[e,o,t.state,s,c]),x.useEffect(()=>(h&&(y(!0),A.current&&A.current(),A.current=u(h),d&&d(h),y(!1)),()=>{A.current&&A.current()}),[h,o,u,d]);const P=O=>{m(O)},C=async O=>{if(O.preventDefault(),!p.trim()||!h||!e)return;const I=p.trim();v("");try{await l(h,I),r({title:"Message envoy"})}catch(q){console.error("Error sending message:",q),r({title:"Erreur",description:"Impossible d'envoyer le message",variant:"destructive"}),v(I)}};x.useEffect(()=>{_(e?null:"Veuillez vous connecter pour accder  la messagerie.")},[e]);const T=s.find(O=>O.id===h),M=h?i[h]||[]:[],z=O=>{var q;if(!O||!e)return{name:"Utilisateur Inconnu",avatar:null};const I=(q=O.participants)==null?void 0:q.find(F=>F!==e.id);return{name:O.title||`Utilisateur ${I==null?void 0:I.slice(-4)}`,avatar:null,id:I}};return n.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"h-full",children:n.jsxs("div",{className:"border rounded-lg overflow-hidden h-full flex bg-card shadow-sm",children:[n.jsxs("div",{className:st("w-full md:w-1/3 lg:w-1/4 border-r flex flex-col transition-all duration-300 ease-in-out",h&&"hidden md:flex"),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[n.jsx(bs,{className:"h-5 w-5 mr-2"})," Conversations"]})}),n.jsx("div",{className:"flex-grow overflow-y-auto",children:a?n.jsx("div",{className:"p-4 space-y-3",children:[...Array(3)].map((O,I)=>n.jsx(Ct,{className:"h-16 w-full"},I))}):j?n.jsx("p",{className:"p-4 text-destructive",children:j}):s.length===0?n.jsx("div",{className:"p-4 text-muted-foreground text-center",children:o?"Aucune conversation.":"Service de messagerie non disponible."}):s.map(O=>{const I=z(O);return n.jsxs("div",{className:st("flex items-center gap-3 p-3 cursor-pointer border-b last:border-b-0 hover:bg-muted/50",h===O.id&&"bg-muted"),onClick:()=>P(O.id),children:[n.jsxs(Ti,{className:"h-10 w-10",children:[n.jsx(Py,{src:I.avatar,alt:I.name}),n.jsx(Oi,{children:NM(I.name)})]}),n.jsxs("div",{className:"flex-grow overflow-hidden",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-semibold truncate",children:I.name}),O.unreadCount>0&&n.jsx(Ge,{variant:"destructive",className:"h-5 px-1.5 text-xs",children:O.unreadCount})]}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:O.lastMessage||"Nouvelle conversation"})]}),n.jsx("span",{className:"text-xs text-muted-foreground flex-shrink-0 ml-auto self-start pt-1",children:SM(O.lastMessageAt||O.updatedAt)})]},O.id)})})]}),n.jsx("div",{className:st("flex-grow flex flex-col",!h&&"hidden md:flex"),children:h&&T?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-3 border-b flex items-center gap-3",children:[n.jsx(Y,{variant:"ghost",size:"icon",className:"md:hidden mr-2",onClick:()=>m(null),children:n.jsx(Vv,{className:"h-5 w-5"})}),(()=>{const O=z(T);return n.jsxs(n.Fragment,{children:[n.jsxs(Ti,{className:"h-9 w-9",children:[n.jsx(Py,{src:O.avatar,alt:O.name}),n.jsx(Oi,{children:NM(O.name)})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold",children:O.name}),T.parcelId&&n.jsxs(dt,{to:`/parcelles/${T.parcelId}`,className:"text-xs text-primary hover:underline",children:["Concerne la parcelle: ",T.parcelId]})]})]})})()]}),n.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4 bg-muted/20",children:[g?n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ct,{className:"h-10 w-3/5"}),n.jsx(Ct,{className:"h-10 w-3/5 ml-auto"}),n.jsx(Ct,{className:"h-10 w-3/5"})]}):M.length===0?n.jsx("p",{className:"text-center text-muted-foreground pt-10",children:"Aucun message. Soyez le premier  en envoyer un !"}):M.map(O=>n.jsx("div",{className:st("flex",(O.sender_id||O.senderId)===e.id?"justify-end":"justify-start"),children:n.jsxs("div",{className:st("p-2 px-3 rounded-lg max-w-[75%]",(O.sender_id||O.senderId)===e.id?"bg-primary text-primary-foreground":"bg-muted"),children:[n.jsx("p",{className:"text-sm",children:O.content}),n.jsx("span",{className:st("text-xs mt-1 block text-right",O.senderId===e.id?"text-primary-foreground/70":"text-muted-foreground"),children:SM(O.created_at||O.createdAt)})]})},O.id)),n.jsx("div",{ref:w})]}),n.jsx("div",{className:"p-3 border-t bg-background",children:n.jsxs("form",{onSubmit:C,className:"flex items-center gap-2",children:[n.jsx(De,{type:"text",placeholder:"crivez votre message...",value:p,onChange:O=>v(O.target.value),className:"flex-grow",disabled:g}),n.jsx(Y,{type:"submit",size:"icon",disabled:!p.trim()||g,children:n.jsx(Ol,{className:"h-5 w-5"})})]})})]}):n.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center p-8 bg-muted/30",children:[n.jsx(Nh,{className:"h-20 w-20 text-muted-foreground/50 mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-muted-foreground",children:"Slectionnez une conversation"}),n.jsx("p",{className:"text-muted-foreground",children:"Choisissez une conversation dans la liste de gauche pour afficher les messages."})]})})]})})},Kb=({children:e,requireVerification:t=!0})=>{const{isAuthenticated:r,isVerified:s,needsVerification:i,loading:a,profile:o}=ar();if(a)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx(Tt,{size:"large"})});if(!r)return n.jsx(yl,{to:"/login",replace:!0});const l=(o==null?void 0:o.role)==="admin"||(o==null?void 0:o.type)==="Administrateur",c=o==null?void 0:o.verification_status,u=c==="rejected"||c==="failed";if(t&&!l){if(u)return n.jsx(yl,{to:"/verification",replace:!0});if(i&&c!=="pending")return n.jsx(yl,{to:"/verification",replace:!0})}return e||n.jsx(Nk,{})};function uje(){const{pathname:e}=Di();return x.useEffect(()=>{document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null}const dje=()=>{const{toast:e}=pt(),t=kn(),{user:r,isAuthenticated:s}=ar(),[i,a]=x.useState(1),[o,l]=x.useState({region:"",department:"",commune:"",requestType:"",areaSqm:"",message:""}),[c,u]=x.useState([]),[d,h]=x.useState([]),[m,p]=x.useState([]),[v,g]=x.useState(0),[y,j]=x.useState(!1),[_,w]=x.useState(null),[A,S]=x.useState(!1),[P,C]=x.useState([]),[T,M]=x.useState([]),[z,O]=x.useState([]),[I,q]=x.useState(!1),[F,W]=x.useState(null);x.useEffect(()=>{let Q=!0;return(async()=>{q(!0),W(null);try{const J=await Je.listRegions();Q&&C(J.map(se=>se.name||se.code||se.id))}catch{Q&&W("Erreur chargement rgions")}finally{Q&&q(!1)}})(),()=>{Q=!1}},[]),x.useEffect(()=>{let Q=!0;if(!o.region){M([]);return}return(async()=>{try{const se=(await Je.listRegions()).find(je=>je.name===o.region||je.code===o.region);if(!se){M([]);return}const Z=await Je.listDepartmentsByRegion(se.id);Q&&M(Z.map(je=>je.name))}catch{Q&&M([])}})(),()=>{Q=!1}},[o.region]),x.useEffect(()=>{let Q=!0;if(!o.department){O([]);return}return(async()=>{try{const se=(await Je.listRegions()).find(Pe=>Pe.name===o.region||Pe.code===o.region);if(!se){O([]);return}const je=(await Je.listDepartmentsByRegion(se.id)).find(Pe=>Pe.name===o.department||Pe.code===o.department);if(!je){O([]);return}const Ee=await Je.listCommunesByDepartment(je.id);Q&&O(Ee.map(Pe=>Pe.name))}catch{Q&&O([])}})(),()=>{Q=!1}},[o.region,o.department]);const V=Q=>{const{name:J,value:se}=Q.target;l(Z=>({...Z,[J]:se}))},ne=(Q,J)=>{l(se=>Q==="region"?{...se,region:J,department:"",commune:""}:Q==="department"?{...se,department:J,commune:""}:{...se,[Q]:J})},G=5*1024*1024,K=["application/pdf","image/jpeg","image/png"],ee=Q=>{const J=Array.from(Q.target.files||[]),se=[],Z=[],je=[];J.forEach(Ee=>{if(Ee.size>G){je.push({name:Ee.name,error:"Fichier > 5MB"});return}if(!K.includes(Ee.type)){je.push({name:Ee.name,error:"Type non autoris (PDF, JPG, PNG)"});return}se.push(Ee),Z.push({name:Ee.name,size:Ee.size,type:Ee.type})}),u(se),h(Z),p(je)},xe=Q=>{const J=c.findIndex(se=>se.name===Q);if(J!==-1){const se=[...c];se.splice(J,1),u(se),h(se.map(Z=>({name:Z.name,size:Z.size,type:Z.type})))}},B=["Permis de construire","Certificat d'urbanisme","Demande d'acquisition","Autorisation d'occupation","Projet Agricole"],X=o.region&&o.department&&o.commune,ie=o.requestType&&o.areaSqm&&Number(o.areaSqm)>0&&o.message.length>=20,me=c.length>0,ye=()=>a(Q=>Math.min(4,Q+1)),Ne=()=>a(Q=>Math.max(1,Q-1)),le=async Q=>{if(Q.preventDefault(),!s){e({title:"Connexion requise",description:"Connectez-vous pour soumettre une demande.",variant:"destructive"}),t("/login");return}S(!0);try{j(!0),g(0);let J=0;const se=c.length||1,Z=[];await Promise.allSettled(c.map(async Ee=>{try{const Pe=await Je.uploadDocument(r.id,Ee);Pe!=null&&Pe.id&&Z.push(Pe.id)}catch(Pe){console.warn("Echec upload fichier",Ee.name,Pe.message||Pe)}finally{J+=1,g(Math.round(J/se*100))}})),j(!1),g(100);const je=await Je.createMunicipalRequest({requesterId:r.id,region:o.region,department:o.department,commune:o.commune,requestType:o.requestType,areaSqm:Number(o.areaSqm),message:o.message,documentIds:Z,rawDocumentsMeta:d,mairieId:null,autoResolveMairie:!0});w(je.mairie_id||null),e({title:"Demande soumise",description:`Rfrence ${je.reference}`,className:"bg-green-600 text-white"}),t("/my-requests")}catch(J){console.error(J),e({title:"Erreur",description:"Impossible de crer la demande. Ressayez.",variant:"destructive"}),S(!1)}};return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto py-8 px-4 md:py-12 max-w-3xl",children:n.jsxs(he,{className:"shadow-xl border-border/50 bg-card",children:[n.jsxs(Ce,{className:"text-center",children:[n.jsx(Ea,{className:"h-12 w-12 mx-auto mb-3 text-primary"}),n.jsx(ke,{className:"text-3xl font-bold text-foreground",children:"Demande de Terrain Communal"}),n.jsx(jt,{className:"text-lg text-muted-foreground",children:"Slectionnez la localisation, prcisez votre projet et joignez vos pices justificatives."})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:le,className:"space-y-8",children:[n.jsx("div",{className:"flex items-center justify-between text-xs font-medium uppercase tracking-wide",children:[1,2,3,4].map(Q=>n.jsxs("div",{className:`flex-1 flex items-center ${Q!==4?"mr-2":""}`,children:[n.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full text-white text-sm font-bold ${i>=Q?"bg-primary":"bg-muted-foreground/40"}`,children:i>Q?n.jsx(xc,{className:"h-5 w-5"}):Q}),Q!==4&&n.jsx("div",{className:`flex-1 h-1 ${i>Q?"bg-primary":"bg-muted-foreground/20"} rounded`})]},Q))}),i===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(MapPin,{className:"h-5 w-5 text-primary"})," Localisation"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Rgion"}),n.jsxs(Ft,{value:o.region,onValueChange:Q=>ne("region",Q),children:[n.jsx(Dt,{className:"h-11",children:n.jsx(zt,{placeholder:"Choisir"})}),n.jsx($t,{children:P.map(Q=>n.jsx(Ke,{value:Q,children:Q},Q))})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Dpartement"}),n.jsxs(Ft,{value:o.department,onValueChange:Q=>ne("department",Q),disabled:!o.region,children:[n.jsx(Dt,{className:"h-11",children:n.jsx(zt,{placeholder:"Choisir"})}),n.jsx($t,{children:T.map(Q=>n.jsx(Ke,{value:Q,children:Q},Q))})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Commune"}),n.jsxs(Ft,{value:o.commune,onValueChange:Q=>ne("commune",Q),disabled:!o.department,children:[n.jsx(Dt,{className:"h-11",children:n.jsx(zt,{placeholder:"Choisir"})}),n.jsx($t,{children:z.map(Q=>n.jsx(Ke,{value:Q,children:Q},Q))})]})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(Y,{type:"button",onClick:ye,disabled:!X,children:["Continuer ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})})]}),i===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(Cr,{className:"h-5 w-5 text-primary"})," Dtails de la Demande"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Type de demande"}),n.jsxs(Ft,{value:o.requestType,onValueChange:Q=>ne("requestType",Q),children:[n.jsx(Dt,{className:"h-11",children:n.jsx(zt,{placeholder:"Slectionnez"})}),n.jsx($t,{children:B.map(Q=>n.jsx(Ke,{value:Q,children:Q},Q))})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Superficie souhaite (m)"}),n.jsx(De,{type:"number",name:"areaSqm",value:o.areaSqm,onChange:V,placeholder:"Ex: 300",className:"h-11"})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Motivation / Description du projet"}),n.jsx(ms,{name:"message",value:o.message,onChange:V,rows:6,placeholder:"Expliquez votre projet, l'usage prvu, l'impact conomique/social..."}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 20 caractres."})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(Y,{type:"button",variant:"outline",onClick:Ne,children:[n.jsx(Vv,{className:"mr-2 h-4 w-4"})," Retour"]}),n.jsxs(Y,{type:"button",onClick:ye,disabled:!ie,children:["Continuer ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})]})]}),i===3&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(xg,{className:"h-5 w-5 text-primary"})," Pices Jointes"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez les documents requis (PDF, JPG, PNG, max 5MB). Recommand: Pice identit, justificatif domicile, plan sommaire, financement."}),n.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-dashed rounded-md cursor-pointer hover:border-primary transition-colors border-border",children:n.jsxs("div",{className:"space-y-1 text-center",children:[n.jsx(xg,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsxs("div",{className:"flex text-sm text-muted-foreground",children:[n.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-medium text-primary hover:text-primary/80",children:[n.jsx("span",{children:"Slectionnez des fichiers"}),n.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",multiple:!0,onChange:ee})]}),n.jsx("p",{className:"pl-1",children:"ou glissez-dposez"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Max 5MB / fichier"}),m.length>0&&n.jsx("ul",{className:"mt-3 text-xs text-red-500 text-left",children:m.map(Q=>n.jsxs("li",{children:[Q.name,": ",Q.error]},Q.name))}),c.length>0&&n.jsx("ul",{className:"mt-3 text-xs text-foreground text-left max-h-40 overflow-auto space-y-1",children:c.map(Q=>n.jsxs("li",{className:"flex justify-between items-center gap-2 bg-muted/40 px-2 py-1 rounded",children:[n.jsx("span",{className:"truncate",title:Q.name,children:Q.name}),n.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[(Q.size/1024).toFixed(1)," KB"]}),n.jsx("button",{type:"button",onClick:()=>xe(Q.name),className:"text-red-600 text-[10px] font-semibold",children:"Retirer"})]},Q.name))})]})}),y&&n.jsx("div",{className:"w-full bg-muted rounded h-2 overflow-hidden",children:n.jsx("div",{className:"h-2 bg-primary transition-all",style:{width:`${v}%`}})}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(Y,{type:"button",variant:"outline",onClick:Ne,children:[n.jsx(Vv,{className:"mr-2 h-4 w-4"})," Retour"]}),n.jsxs(Y,{type:"button",onClick:ye,disabled:!me,children:["Continuer ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})]})]}),i===4&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(xc,{className:"h-5 w-5 text-primary"})," Vrification Finale"]}),n.jsxs("div",{className:"bg-muted/40 rounded-md p-4 space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Localisation:"})," ",o.commune,", ",o.department,", ",o.region]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Type de demande:"})," ",o.requestType]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Superficie demande:"})," ",o.areaSqm," m"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Motivation:"})," ",o.message.slice(0,200),o.message.length>200&&"..."]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Documents:"})," ",c.length," fichier(s) ",c.length>0&&`(${c.map(Q=>Q.name).join(", ")})`]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["En soumettant, vous acceptez le partage de ces informations avec la mairie concerne selon notre ",n.jsx(dt,{to:"/privacy",className:"underline",children:"politique de confidentialit"}),"."]}),_===null&&A&&n.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[n.jsx(Iu,{className:"h-4 w-4"})," Rsolution de la mairie associe en cours..."]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(Y,{type:"button",variant:"outline",onClick:Ne,disabled:A,children:[n.jsx(Vv,{className:"mr-2 h-4 w-4"})," Retour"]}),n.jsx(Y,{type:"submit",disabled:A,className:"bg-gradient-to-r from-primary to-green-600 text-white",children:A?y?"Tlversement...":"Envoi...":n.jsxs(n.Fragment,{children:[n.jsx(Ol,{className:"mr-2 h-5 w-5"})," Soumettre la Demande"]})})]})]})]})})]})})},hje=()=>{const{isAuthenticated:e}=ar(),t=kn(),r=()=>{t(e?"/dashboard/mairie-requests":"/login")};return n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"container mx-auto px-4 py-16 min-h-[calc(100vh-200px)]",children:[n.jsx(Ae.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-4xl md:text-5xl font-extrabold text-center text-gray-800 dark:text-white mb-12",children:"Demander un Terrain en Mairie : Le Processus"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:[n.jsxs(Ae.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center text-center p-6 bg-white dark:bg-card rounded-lg shadow-md",children:[n.jsx(Qt,{className:"h-12 w-12 text-blue-600 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"1. Comprendre vos Besoins"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Identifiez le type de terrain, la localisation et la surface souhaits. Notre plateforme vous aide  affiner votre recherche."})]}),n.jsxs(Ae.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex flex-col items-center text-center p-6 bg-white dark:bg-card rounded-lg shadow-md",children:[n.jsx(wz,{className:"h-12 w-12 text-green-600 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"2. Connectez-vous ou Inscrivez-vous"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Pour soumettre une demande officielle, vous devez tre un utilisateur enregistr sur Teranga Foncier."}),!e&&n.jsxs("div",{className:"flex gap-4 mt-4",children:[n.jsx(Y,{asChild:!0,variant:"default",children:n.jsx(dt,{to:"/login",children:"Se Connecter"})}),n.jsx(Y,{asChild:!0,variant:"outline",children:n.jsx(dt,{to:"/register",children:"S'inscrire"})})]})]}),n.jsxs(Ae.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex flex-col items-center text-center p-6 bg-white dark:bg-card rounded-lg shadow-md",children:[n.jsx(bj,{className:"h-12 w-12 text-purple-600 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"3. Soumettez votre Demande"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Accdez  votre tableau de bord et remplissez le formulaire de demande de terrain auprs de la mairie de votre choix."})]})]}),n.jsxs(Ae.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-center bg-blue-50 dark:bg-blue-950 p-8 rounded-lg shadow-inner max-w-2xl mx-auto",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Prt  faire votre demande ?"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Cliquez ci-dessous pour accder au formulaire de demande de terrain en mairie. Vous serez redirig vers la page de connexion si vous n'tes pas dj authentifi."}),n.jsxs(Y,{size:"lg",onClick:r,className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white shadow-lg",children:["Accder au Formulaire de Demande ",n.jsx(Fn,{className:"ml-2 h-5 w-5"})]})]})]})},zW=()=>{const{isAuthenticated:e,user:t}=ar(),{toast:r}=pt(),{isChatbotOpen:s,toggleChatbot:i,closeChatbot:a}=fU(),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState(!1),m=x.useRef(null),p=[{text:"Je suis un acheteur, aidez-moi.",icon:wr,category:"achat"},{text:"Je suis un vendeur, que proposez-vous ?",icon:jr,category:"vente"},{text:"Je suis une mairie, comment a marche ?",icon:YN,category:"institution"},{text:"J'ai une question lgale sur le foncier.",icon:ns,category:"legal"},{text:"Comment contacter le support ?",icon:Sh,category:"support"}],[v,g]=x.useState([]),[y,j]=x.useState("hybrid"),[_,w]=x.useState(null),A=()=>{var q,F;const M=new Date().getHours();let z,O;M<12?(z="Bonjour",O=""):M<18?(z="Bon aprs-midi",O=""):(z="Bonsoir",O="");const I=e?` ${((q=t==null?void 0:t.full_name)==null?void 0:q.split(" ")[0])||((F=t==null?void 0:t.email)==null?void 0:F.split("@")[0])}`:"";return`${z}${I} ! ${O}

Je suis **Teranga AI**, votre assistant intelligent hybride qui combine Claude, ChatGPT et Gemini pour vous offrir les meilleures rponses. 

Je peux vous aider avec :
  Recherche de terrains et proprits
  Procdures administratives et lgales
  Conseils d'investissement intelligents
  Dmarches notariales et juridiques
  Mise en relation avec nos experts
  Prvention et dtection de fraude

Mon IA hybride slectionne automatiquement le meilleur modle selon votre question !

Comment puis-je vous assister aujourd'hui ?`},S=()=>{var M;(M=m.current)==null||M.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{S()},[o]),x.useEffect(()=>{s&&o.length===0&&(l([{sender:"bot",text:A()}]),g(p))},[s]);const P=async(M=c)=>{if(!M.trim())return;const z={sender:"user",text:M};l(I=>[...I,z]),u(""),h(!0),g([]);const O=Date.now();try{const I={isAuthenticated:e,userRole:(t==null?void 0:t.role)||(t==null?void 0:t.type),userName:(t==null?void 0:t.full_name)||(t==null?void 0:t.email),platform:"teranga-foncier"},q=await Il.generateResponse(M,o,I),F=Date.now();w(F-O),j(q.modelUsed||"hybrid");const W={sender:"bot",text:q.text,confidence:q.confidence,modelUsed:q.modelUsed,timestamp:q.timestamp,fallback:q.fallback};l(V=>[...V,W]),g(q.suggestions||[]),q.fallback&&r({title:"Modle de secours utilis",description:`${q.originalModel} indisponible, ${q.modelUsed} utilis`})}catch(I){console.error("Erreur lors de l'appel  l'IA hybride:",I),l(q=>[...q,{sender:"bot",text:`Une erreur est survenue: ${I.message}. Veuillez ressayer plus tard.`,error:!0}]),r({variant:"destructive",title:"Erreur de l'assistant IA",description:`Impossible de communiquer avec l'IA. ${I.message}.`}),g(p)}finally{h(!1)}},C=()=>{l([]),u(""),h(!1),l([{sender:"bot",text:A()}]),g(p)},T=M=>{const z=typeof M=="string"?M:M.text;P(z)};return n.jsxs(n.Fragment,{children:[n.jsx(Ae.div,{className:"fixed bottom-6 right-6 z-50",whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsxs(Y,{className:st("rounded-full h-16 w-16 shadow-2xl transition-all duration-300 relative overflow-hidden",s?"bg-gray-600 hover:bg-gray-700":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700"),size:"icon",onClick:i,children:[n.jsx(zu,{mode:"wait",children:s?n.jsx(Ae.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:n.jsx(Ii,{className:"h-6 w-6"})},"close"):n.jsxs(Ae.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},className:"relative",children:[n.jsx(xj,{className:"h-6 w-6"}),n.jsx(Ae.div,{className:"absolute -top-1 -right-1 h-4 w-4 bg-green-500 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:n.jsx("div",{className:"h-2 w-2 bg-white rounded-full"})})]},"open")}),!s&&n.jsx(Ae.div,{className:"absolute inset-0 rounded-full border-2 border-blue-400",animate:{scale:[1,1.5],opacity:[.7,0]},transition:{duration:2,repeat:1/0}})]})}),n.jsx(zu,{children:s&&n.jsxs(Ae.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},transition:{duration:.3,type:"spring",stiffness:300},className:"fixed bottom-24 right-6 z-50 w-[400px] max-w-[90vw] h-[700px] max-h-[80vh] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 p-4 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ti,{className:"h-12 w-12 border-2 border-white/20",children:n.jsx(Oi,{className:"bg-white/20 text-white",children:n.jsx(Zs,{className:"h-6 w-6"})})}),n.jsx(Ae.div,{className:"absolute -bottom-1 -right-1 h-4 w-4 bg-green-400 rounded-full border-2 border-white flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:n.jsx(Ru,{className:"h-2 w-2 text-white"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg",children:"Teranga AI Hybride"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/90",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Zs,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs font-medium",children:(y==null?void 0:y.toUpperCase())||"HYBRID"})]}),_&&n.jsxs("div",{className:"text-xs text-white/70",children:[" ",_,"ms"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/80",children:[n.jsx(Df,{className:"h-3 w-3"}),n.jsx("span",{children:"Claude  ChatGPT  Gemini"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Y,{variant:"ghost",size:"icon",onClick:C,className:"text-white hover:bg-white/20 h-8 w-8","aria-label":"Effacer l'historique",children:n.jsx(di,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:a,className:"text-white hover:bg-white/20 h-8 w-8","aria-label":"Fermer le chatbot",children:n.jsx(Ii,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600",children:n.jsx("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"h-full w-full",children:n.jsx("path",{d:"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z",fill:"rgba(255,255,255,0.15)"})})})]}),n.jsx($2,{className:"flex-1 p-4 bg-gray-50 dark:bg-gray-800",children:n.jsxs("div",{className:"space-y-4",children:[o.map((M,z)=>{var O;return n.jsxs(Ae.div,{initial:{opacity:0,y:15,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.3,delay:z*.05},className:st("flex items-start gap-3",M.sender==="user"?"justify-end":"justify-start"),children:[M.sender==="bot"&&n.jsx(Ti,{className:"h-8 w-8 shrink-0 border-2 border-blue-200",children:n.jsx(Oi,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white",children:n.jsx(Zs,{className:"h-4 w-4"})})}),n.jsx("div",{className:"flex flex-col max-w-[85%]",children:n.jsxs("div",{className:st("rounded-2xl p-4 shadow-sm",M.sender==="user"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-br-md":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-bl-md border border-gray-200 dark:border-gray-600"),children:[n.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:M.text}),M.sender==="bot"&&(M.modelUsed||M.confidence)&&n.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[M.modelUsed&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Zs,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:(O=M.modelUsed)==null?void 0:O.toUpperCase()}),M.fallback&&n.jsx("span",{className:"text-orange-500",children:"(secours)"})]}),M.confidence&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:st("w-2 h-2 rounded-full",M.confidence>.8?"bg-green-500":M.confidence>.6?"bg-yellow-500":"bg-red-500")}),n.jsxs("span",{children:[Math.round(M.confidence*100),"%"]})]})]})]})}),M.sender==="user"&&n.jsx(Ti,{className:"h-8 w-8 shrink-0 border-2 border-gray-200",children:n.jsx(Oi,{className:"bg-gray-100 text-gray-600",children:n.jsx(oi,{className:"h-4 w-4"})})})]},z)}),d&&n.jsxs(Ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-3 justify-start",children:[n.jsx(Ti,{className:"h-8 w-8 shrink-0 border-2 border-blue-200",children:n.jsx(Oi,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white",children:n.jsx(Zs,{className:"h-4 w-4"})})}),n.jsx("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-2xl rounded-bl-md p-4 shadow-sm",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"flex space-x-1",children:[n.jsx(Ae.div,{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:0}}),n.jsx(Ae.div,{className:"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.2}}),n.jsx(Ae.div,{className:"w-2 h-2 bg-gradient-to-r from-pink-500 to-blue-500 rounded-full",animate:{scale:[1,1.3,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:.4}})]}),n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"L'IA hybride analyse..."})]})})]}),n.jsx("div",{ref:m})]})}),v.length>0&&n.jsxs("div",{className:"p-3 bg-gradient-to-b from-gray-50/90 to-white dark:from-gray-800/90 dark:to-gray-900 border-t border-gray-200 dark:border-gray-700 backdrop-blur-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Df,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Suggestions intelligentes"})]}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:v.slice(0,3).map((M,z)=>{const O=typeof M=="string"?{text:M,icon:YN}:M,I=O.icon||YN;return n.jsxs(Ae.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:z*.1},onClick:()=>T(M),className:"flex items-center gap-2 p-2 text-left text-xs bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg border border-gray-200 dark:border-gray-700 transition-all duration-200 group hover:shadow-sm w-full",children:[n.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/50 rounded-md group-hover:bg-blue-200 dark:group-hover:bg-blue-800/50 transition-all duration-200 flex-shrink-0",children:n.jsx(I,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"})}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 group-hover:text-blue-700 dark:group-hover:text-blue-300 flex-1 truncate",children:O.text}),n.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:n.jsx(Ol,{className:"h-3 w-3 text-blue-500"})})]},z)})})]}),n.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-2",children:[n.jsx(De,{placeholder:"crivez votre message...",value:c,onChange:M=>u(M.target.value),onKeyPress:M=>M.key==="Enter"&&!M.shiftKey&&P(),disabled:d,className:"flex-1 border-0 bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-gray-500"}),n.jsx(Ae.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsx(Y,{size:"icon",onClick:()=>P(),disabled:d||!c.trim(),className:"rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 h-10 w-10",children:n.jsx(Ol,{className:"h-4 w-4"})})})]}),n.jsxs("div",{className:"flex items-center justify-center mt-3 text-xs text-gray-500",children:[n.jsx("span",{children:"Propuls par "}),n.jsx(Df,{className:"h-3 w-3 mx-1"}),n.jsx("span",{className:"font-medium",children:"Teranga AI"})]})]})]})})]})},Ma=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:st("w-full caption-bottom text-sm",e),...t})}));Ma.displayName="Table";const Ia=x.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:st("[&_tr]:border-b",e),...t}));Ia.displayName="TableHeader";const Ra=x.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:st("[&_tr:last-child]:border-0",e),...t}));Ra.displayName="TableBody";const fje=x.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:st("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));fje.displayName="TableFooter";const rn=x.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:st("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));rn.displayName="TableRow";const yt=x.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:st("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));yt.displayName="TableHead";const vt=x.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:st("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));vt.displayName="TableCell";const mje=x.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:st("mt-4 text-sm text-muted-foreground",e),...t}));mje.displayName="TableCaption";const pje=()=>{var P,C,T,M,z,O,I,q,F;const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState("all"),[d,h]=x.useState(null),[m,p]=x.useState(!1),[v,g]=x.useState(!1);x.useEffect(()=>{y()},[t]);const y=async()=>{try{if(a(!0),t&&t.id){const W=await Je.getRequestsByRecipient(t.id,"banque");s(W)}else{const{data:W,error:V}=await pe.from("requests").select(`
            *,
            users!inner(id, full_name, email, phone),
            parcels!inner(id, name, reference, location_name, price, surface_area)
          `).eq("request_type","funding").order("created_at",{ascending:!1});if(V)throw V;s(W||[])}}catch(W){console.error("Erreur chargement demandes:",W),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les demandes de financement"})}finally{a(!1)}},j=async(W,V,ne="")=>{try{g(!0);const{error:G}=await pe.from("requests").update({status:V,processed_at:new Date().toISOString(),admin_comment:ne}).eq("id",W);if(G)throw G;e({title:"Demande mise  jour",description:`Statut chang vers: ${_(V)}`}),await y(),p(!1)}catch(G){console.error("Erreur mise  jour:",G),e({variant:"destructive",title:"Erreur",description:"Impossible de mettre  jour la demande"})}finally{g(!1)}},_=W=>({pending:"En attente",approved:"Approuv",rejected:"Rejet",completed:"Complt"})[W]||W,w=W=>{const V={pending:"default",approved:"default",rejected:"destructive",completed:"default"};return n.jsx(Ge,{variant:V[W]||"secondary",children:_(W)})},A=W=>{var K,ee;const V=((K=W.parcels)==null?void 0:K.price)||0,ne=((ee=W.data)==null?void 0:ee.amount)||0;if(V===0)return{level:"high",score:90};const G=ne/V;return G<=.7?{level:"low",score:25}:G<=.85?{level:"medium",score:55}:{level:"high",score:85}},S=r.filter(W=>{var G,K,ee,xe,B,X;const V=((K=(G=W.users)==null?void 0:G.full_name)==null?void 0:K.toLowerCase().includes(o.toLowerCase()))||((xe=(ee=W.users)==null?void 0:ee.email)==null?void 0:xe.toLowerCase().includes(o.toLowerCase()))||((X=(B=W.parcels)==null?void 0:B.reference)==null?void 0:X.toLowerCase().includes(o.toLowerCase())),ne=c==="all"||W.status===c;return V&&ne});return i?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(fs,{className:"mr-3 h-8 w-8"}),"Demandes de Financement"]})}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Filtres"})}),n.jsx(ve,{children:n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx(De,{placeholder:"Rechercher par nom, email ou rfrence parcelle...",value:o,onChange:W=>l(W.target.value),className:"max-w-md"})}),n.jsxs(Ft,{value:c,onValueChange:u,children:[n.jsx(Dt,{className:"w-48",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"pending",children:"En attente"}),n.jsx(Ke,{value:"approved",children:"Approuv"}),n.jsx(Ke,{value:"rejected",children:"Rejet"}),n.jsx(Ke,{value:"completed",children:"Complt"})]})]})]})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{children:["Demandes de Financement (",S.length,")"]}),n.jsx(jt,{children:"Grez les demandes de financement et valuez les risques"})]}),n.jsx(ve,{children:S.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune demande de financement trouve"}):n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Demandeur"}),n.jsx(yt,{children:"Parcelle"}),n.jsx(yt,{children:"Montant"}),n.jsx(yt,{children:"Risque"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Date"}),n.jsx(yt,{children:"Actions"})]})}),n.jsx(Ra,{children:S.map(W=>{var ne,G,K,ee,xe,B;const V=A(W);return n.jsxs(rn,{children:[n.jsx(vt,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((ne=W.users)==null?void 0:ne.full_name)||"N/A"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:(G=W.users)==null?void 0:G.email})]})}),n.jsx(vt,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:((K=W.parcels)==null?void 0:K.reference)||"N/A"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:(ee=W.parcels)==null?void 0:ee.location_name})]})}),n.jsxs(vt,{children:[n.jsxs("div",{className:"font-medium",children:[(((xe=W.data)==null?void 0:xe.amount)||0).toLocaleString("fr-FR")," FCFA"]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Valeur parcelle: ",(((B=W.parcels)==null?void 0:B.price)||0).toLocaleString("fr-FR")," FCFA"]})]}),n.jsx(vt,{children:n.jsxs(Ge,{variant:V.level==="low"?"default":V.level==="medium"?"secondary":"destructive",children:[V.level==="low"?"Faible":V.level==="medium"?"Moyen":"lev"," (",V.score,"%)"]})}),n.jsx(vt,{children:w(W.status)}),n.jsx(vt,{children:new Date(W.created_at).toLocaleDateString("fr-FR")}),n.jsx(vt,{children:n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>{h(W),p(!0)},children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Dtails"]})})]},W.id)})})]})})]}),n.jsx(on,{open:m,onOpenChange:p,children:n.jsxs(Qr,{className:"max-w-2xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Dtails de la Demande de Financement"}),n.jsx(Ur,{children:"Examinez et traitez cette demande de financement"})]}),d&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Demandeur"}),n.jsx("p",{className:"font-medium",children:(P=d.users)==null?void 0:P.full_name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(C=d.users)==null?void 0:C.email}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(T=d.users)==null?void 0:T.phone})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Parcelle"}),n.jsx("p",{className:"font-medium",children:(M=d.parcels)==null?void 0:M.reference}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(z=d.parcels)==null?void 0:z.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(O=d.parcels)==null?void 0:O.location_name})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Montant demand"}),n.jsxs("p",{className:"font-medium text-lg",children:[(((I=d.data)==null?void 0:I.amount)||0).toLocaleString("fr-FR")," FCFA"]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Valeur de la parcelle"}),n.jsxs("p",{className:"font-medium text-lg",children:[(((q=d.parcels)==null?void 0:q.price)||0).toLocaleString("fr-FR")," FCFA"]})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Description du projet"}),n.jsx("p",{className:"text-sm mt-1",children:((F=d.data)==null?void 0:F.description)||"Aucune description fournie"})]}),d.status==="pending"&&n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(Y,{onClick:()=>j(d.id,"approved"),disabled:v,className:"flex-1",children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Approuver"]}),n.jsxs(Y,{variant:"destructive",onClick:()=>j(d.id,"rejected"),disabled:v,className:"flex-1",children:[n.jsx(sa,{className:"h-4 w-4 mr-2"}),"Rejeter"]})]})]})]})})]})},gje=()=>{const{isAuthenticated:e}=ar(),t=kn(),r=()=>{e?t("/solutions/banques/dashboard"):t("/login",{state:{from:{pathname:"/solutions/banques/dashboard"}}})},s={hidden:{opacity:0,y:20},visible:o=>({opacity:1,y:0,transition:{delay:o*.15,duration:.5,ease:"easeOut"}})},i=[{icon:Ys,title:"valuation Fiable des Garanties Foncires",description:"Accdez  des donnes vrifies et  des analyses de march pour valuer avec prcision la valeur des terrains proposs en garantie. Rduisez vos risques et optimisez vos dcisions de crdit."},{icon:na,title:"Analyse de Portefeuille et Gestion des Risques",description:"Visualisez la composition de votre portefeuille foncier, identifiez les risques potentiels et prenez des dcisions claires grce  des tableaux de bord intuitifs et des rapports dtaills."},{icon:xz,title:"Accs Scuris aux Documents Officiels",description:"Consultez et vrifiez les titres de proprit, les plans cadastraux et autres documents lgaux directement depuis la plateforme, garantissant la conformit et la transparence."},{icon:bs,title:"Collaboration Simplifie avec les Notaires et Mairies",description:"Facilitez les changes et les validations avec les acteurs cls de l'cosystme foncier, acclrant ainsi les processus d'authentification et d'enregistrement."},{icon:Zae,title:"Conformit Rglementaire Automatise",description:"Assurez-vous que toutes vos oprations respectent les rglementations foncires sngalaises grce  des outils de vrification intgrs et des alertes en cas de non-conformit."},{icon:Sz,title:"Personnalisation et Intgration Facile",description:"Adaptez la plateforme  vos besoins spcifiques et intgrez-la facilement  vos systmes existants pour une gestion foncire centralise et efficace."}],a=[{title:"Optimisation des Processus de Crdit Immobilier",description:"Une grande banque sngalaise a rduit de 30% le temps de traitement des dossiers de crdit immobilier grce  notre solution d'valuation foncire rapide et fiable.",link:"#"},{title:"Scurisation des Portefeuilles de Garanties",description:"Une institution financire a minimis ses risques de dfaut de paiement en utilisant nos outils d'analyse prdictive pour mieux valuer la liquidit des garanties foncires.",link:"#"}];return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen bg-background text-foreground",children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Solutions pour Banques - Teranga Foncier"}),n.jsx("meta",{name:"description",content:"Dcouvrez comment Teranga Foncier aide les banques et institutions financires  scuriser leurs garanties foncires au Sngal."})]}),n.jsxs("section",{className:"relative bg-gradient-to-r from-blue-700 to-sky-500 text-white py-20 md:py-28 overflow-hidden",children:[n.jsxs("div",{className:"container mx-auto px-4 text-center relative z-10",children:[n.jsx(Ae.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight",children:"Teranga Foncier pour les Banques & Institutions Financires"}),n.jsx(Ae.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-lg md:text-xl mb-8 max-w-2xl mx-auto",children:"Scurisez vos oprations de crdit et optimisez la gestion de vos garanties foncires au Sngal."}),n.jsx(Ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.6},children:n.jsxs(Y,{size:"lg",onClick:r,className:"bg-white text-blue-700 hover:bg-blue-100 shadow-xl text-lg px-8 py-3 rounded-full",children:["Accder au Dashboard ",n.jsx(Fn,{className:"ml-2 h-5 w-5"})]})})]}),n.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:n.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid slice",children:[n.jsx("path",{d:"M0 0h100v100H0z",fill:"url(#grid)"}),n.jsx("defs",{children:n.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:n.jsx("path",{d:"M10 0L0 0 0 10",fill:"none",stroke:"white",strokeOpacity:"0.5",strokeWidth:"0.5"})})})]})})]}),n.jsx("section",{className:"py-16 md:py-20 bg-white dark:bg-gray-900",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12 text-blue-800 dark:text-blue-300",children:"Nos Solutions Cls pour les Banques"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((o,l)=>n.jsxs(Ae.div,{custom:l,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},variants:s,className:"flex flex-col items-center text-center p-6 bg-card rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 border border-border",children:[n.jsx("div",{className:"p-3 rounded-full bg-blue-100 dark:bg-blue-800 text-blue-600 dark:text-blue-300 mb-4",children:n.jsx(o.icon,{className:"h-8 w-8"})}),n.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-700 dark:text-blue-200",children:o.title}),n.jsx("p",{className:"text-muted-foreground text-sm",children:o.description})]},l))})]})}),n.jsx("section",{className:"py-16 md:py-20 bg-primary/5",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6 text-blue-700",children:"Renforcez Votre Expertise Foncire avec Nos Outils"}),n.jsx("p",{className:"text-muted-foreground mb-8 max-w-xl mx-auto",children:"Accdez  un tableau de bord ddi pour visualiser les valuations, suivre les portefeuilles et grer les risques lis aux garanties foncires."}),n.jsx(Ae.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:n.jsxs(Y,{size:"lg",onClick:r,className:"bg-gradient-to-r from-blue-600 to-sky-600 text-white shadow-lg",children:["Accder au Dashboard Banques ",n.jsx(na,{className:"ml-2 h-5 w-5"})]})}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Ou ",n.jsx(dt,{to:"/contact?subject=SolutionsBanques",className:"underline hover:text-primary",children:"contactez-nous pour un partenariat"}),"."]})]})}),n.jsx("section",{className:"py-16 md:py-20 bg-gray-50 dark:bg-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12 text-blue-800 dark:text-blue-300",children:"tudes de Cas"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:a.map((o,l)=>n.jsx(he,{className:"p-6 shadow-lg rounded-lg border border-border",children:n.jsxs(ve,{className:"p-0",children:[n.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-700 dark:text-blue-200",children:o.title}),n.jsx("p",{className:"text-muted-foreground mb-4",children:o.description}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(Y,{variant:"link",className:"text-blue-600 hover:underline p-0",children:["Lire plus d'tudes de cas ",n.jsx(Fn,{className:"ml-1 h-4 w-4"})]})})]})},l))})]})}),n.jsx("section",{className:"py-16 md:py-20 bg-blue-700 text-white text-center",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Prt  Transformer Votre Gestion Foncire ?"}),n.jsx("p",{className:"text-lg md:text-xl mb-8 max-w-xl mx-auto",children:"Contactez notre quipe pour une dmonstration personnalise de nos solutions pour les banques."}),n.jsx(Y,{asChild:!0,size:"lg",className:"bg-white text-blue-700 hover:bg-blue-100 shadow-xl text-lg px-8 py-3 rounded-full",children:n.jsxs(dt,{to:"/contact?subject=DmonstrationBanques",children:["Demander une Dmonstration ",n.jsx(yk,{className:"ml-2 h-5 w-5"})]})})]})})]})},xje=()=>{const e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},r=[{title:"Frais de Service Teranga Foncier",description:"Nos frais couvrent la vrification, l'accompagnement et la scurisation de la transaction.",price:"5% du prix de vente",note:"Payable  la signature de l'acte de vente.",features:["Vrification juridique et administrative complte","Accompagnement par un agent ddi","Accs  la plateforme et au suivi de dossier","Mise en relation avec le rseau de partenaires (notaires, etc.)"]},{title:"Frais de Notaire (Estimation)",description:"Les frais notariaux sont rglements et couvrent la rdaction de l'acte authentique et les formalits.",price:"~3-5% du prix de vente",note:"Le montant exact est calcul par le notaire.",features:["Rdaction de la promesse et de l'acte de vente","Conseil juridique impartial","Enregistrement de l'acte","Conservation du titre de proprit"]},{title:"Taxes et Impts Gouvernementaux",description:"Droits d'enregistrement et autres taxes dues  l'tat sngalais.",price:"~5-10% du prix de vente",note:"Varie selon la nature du bien et la transaction.",features:["Droits d'enregistrement","Timbres fiscaux","Conservation foncire","Plus-value immobilire (si applicable au vendeur)"]}];return n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Tarifs & Frais - Teranga Foncier"}),n.jsx("meta",{name:"description",content:"Dcouvrez notre grille tarifaire transparente pour l'achat de terrain au Sngal. Comprenez nos frais de service, les frais de notaire et les taxes gouvernementales."})]}),n.jsxs(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"container mx-auto py-16 px-4",children:[n.jsxs(Ae.div,{variants:t,className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Tarifs & Frais"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto",children:"Nous croyons en une transparence totale. Voici un aperu des cots associs  l'acquisition d'un terrain au Sngal."})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:r.map((s,i)=>n.jsx(Ae.div,{variants:t,children:n.jsxs(he,{className:`h-full flex flex-col shadow-lg ${i===0?"border-primary ring-2 ring-primary":""}`,children:[n.jsxs(Ce,{children:[n.jsx(ke,{className:"text-2xl",children:s.title}),n.jsx(jt,{children:s.description})]}),n.jsxs(ve,{className:"flex-grow",children:[n.jsx("p",{className:"text-4xl font-bold mb-2",children:s.price}),n.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:s.note}),n.jsx("ul",{className:"space-y-3",children:s.features.map((a,o)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mu,{className:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm",children:a})]},o))})]}),n.jsx(Wn,{children:n.jsx(Y,{asChild:!0,variant:i===0?"default":"outline",className:"w-full",children:n.jsxs(dt,{to:"/contact",children:["Poser une question ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})})})]})},i))}),n.jsxs(Ae.div,{variants:t,className:"mt-16 text-center p-8 bg-muted/50 rounded-lg border border-dashed",children:[n.jsx(uk,{className:"h-10 w-10 mx-auto text-primary mb-4"}),n.jsx("h3",{className:"text-2xl font-semibold mb-3",children:"Besoin d'une estimation personnalise ?"}),n.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Chaque projet est unique. Pour une estimation dtaille des frais pour un terrain spcifique, n'hsitez pas  contacter nos conseillers."}),n.jsx(Y,{asChild:!0,size:"lg",children:n.jsx(dt,{to:"/contact",children:"Contacter un conseiller"})})]})]})]})},vje=[{term:"Titre Foncier (TF)",definition:"Le Titre Foncier est l'acte de proprit dfinitif et inattaquable au Sngal. Il est dlivr par la Conservation Foncire et constitue la preuve la plus sre du droit de proprit sur un terrain. Il est inscrit au livre foncier, ce qui le rend public et opposable  tous."},{term:"Bail Emphytotique",definition:"Un bail de trs longue dure (entre 18 et 99 ans) qui confre au preneur (locataire) un droit rel sur le bien immobilier, presque quivalent  celui d'un propritaire. Le preneur peut construire, hypothquer et jouir du bien, en contrepartie d'un loyer modique appel 'canon emphytotique'."},{term:"Dlibration",definition:"Acte administratif par lequel une collectivit locale (commune, conseil rural) dcide d'attribuer un terrain de son domaine priv  une personne physique ou morale. C'est souvent la premire tape avant l'obtention d'un bail ou d'un titre foncier, mais ne constitue pas un titre de proprit dfinitif en soi."},{term:"NICAD",definition:"Numro d'Identification Cadastrale. C'est un identifiant unique attribu  chaque parcelle de terrain dans le cadastre. Il permet de localiser et d'identifier prcisment un terrain sur les plans cadastraux."},{term:"Assiette Foncire",definition:"Dsigne la parcelle de terrain elle-mme, la base physique sur laquelle porte un droit de proprit ou un projet de construction. L'expression 'l'assiette du projet' fait rfrence au terrain sur lequel le projet sera construit."},{term:"Cadastre",definition:"Ensemble de documents (plans, registres) qui recensent et dcrivent toutes les proprits foncires d'une commune ou d'une rgion. Il a une fonction principalement fiscale (calcul des impts fonciers) et technique (identification des parcelles)."},{term:"Conservation Foncire",definition:"Service administratif charg de la tenue du livre foncier. C'est l'institution qui immatricule les terrains (cre les titres fonciers) et inscrit tous les droits rels (proprit, hypothques, servitudes) qui s'y rapportent, garantissant ainsi la scurit juridique des transactions."},{term:"Viabilisation",definition:"Ensemble des travaux ncessaires pour rendre un terrain constructible. Cela inclut le raccordement aux rseaux essentiels : eau potable, lectricit, assainissement (tout--l'gout), et parfois le tlphone et le gaz. Un terrain viabilis est prt  accueillir une construction."}],yje=()=>{const e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Glossaire du Foncier - Teranga Foncier"}),n.jsx("meta",{name:"description",content:"Comprenez les termes cls du secteur foncier au Sngal : Titre Foncier, Bail, Dlibration, NICAD, et bien plus. Un guide essentiel pour votre investissement."})]}),n.jsxs(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"container mx-auto py-16 px-4",children:[n.jsxs(Ae.div,{variants:t,className:"text-center mb-12",children:[n.jsx(Zf,{className:"h-16 w-16 mx-auto text-primary mb-4"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Glossaire du Foncier"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto",children:"Dmystifiez le langage de l'immobilier au Sngal. Voici les dfinitions des termes essentiels  connatre pour un investissement clair."})]}),n.jsx(Ae.div,{variants:t,className:"max-w-3xl mx-auto",children:n.jsx(LW,{type:"single",collapsible:!0,className:"w-full",children:vje.map((r,s)=>n.jsxs(JE,{value:`item-${s}`,children:[n.jsx(QE,{className:"text-lg font-semibold hover:no-underline",children:r.term}),n.jsx(eT,{className:"text-base text-muted-foreground leading-relaxed",children:r.definition})]},s))})})]})]})},bje=[{title:"Droits d'Enregistrement",category:" l'achat",rate:"Environ 5% de la valeur du bien",description:"Ces droits sont perus par l'tat pour formaliser la vente et l'inscrire dans les registres officiels. Ils sont gnralement pays par l'acheteur chez le notaire au moment de la signature de l'acte de vente."},{title:"TVA sur Terrains Amnags",category:" l'achat",rate:"18% (si applicable)",description:"La Taxe sur la Valeur Ajoute peut s'appliquer si vous achetez un terrain viabilis auprs d'un promoteur immobilier assujetti  la TVA. Le prix affich est souvent TTC (Toutes Taxes Comprises), mais il est crucial de le vrifier."},{title:"Contribution Foncire des Proprits Bties (CFPB)",category:"Annuel",rate:"Variable (base sur la valeur locative)",description:"Une fois que vous avez construit sur votre terrain, vous tes redevable de cet impt foncier annuel. Son montant dpend de la localisation, de la taille et de la qualit de la construction."},{title:"Impt sur la Plus-Value Immobilire",category:" la revente",rate:"Variable",description:"Si vous revendez votre bien en ralisant un bnfice (plus-value), cet impt peut s'appliquer. Les rgles d'exonration (par exemple, pour la rsidence principale) et de calcul peuvent tre complexes et ncessitent souvent l'avis d'un expert."}],jje=()=>{const e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return n.jsxs(n.Fragment,{children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Guide Fiscal Foncier - Teranga Foncier"}),n.jsx("meta",{name:"description",content:"Un guide sur les impts et taxes lis  l'achat et la dtention d'un terrain au Sngal. Comprenez les droits d'enregistrement, la TVA, et la contribution foncire."})]}),n.jsxs(Ae.div,{variants:e,initial:"hidden",animate:"visible",className:"container mx-auto py-16 px-4",children:[n.jsxs(Ae.div,{variants:t,className:"text-center mb-12",children:[n.jsx(vae,{className:"h-16 w-16 mx-auto text-primary mb-4"}),n.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4",children:"Guide sur la Fiscalit Foncire"}),n.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mx-auto",children:"Comprendre les taxes et impts est essentiel pour un investissement russi. Voici un aperu des principales contributions fiscales au Sngal."})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:bje.map((r,s)=>n.jsx(Ae.div,{variants:t,children:n.jsxs(he,{className:"h-full shadow-lg",children:[n.jsxs(Ce,{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx(ke,{className:"text-xl",children:r.title}),n.jsx("span",{className:"text-xs font-semibold bg-primary/10 text-primary px-2 py-1 rounded-full",children:r.category})]}),n.jsx(jt,{className:"text-2xl font-bold text-primary pt-2",children:r.rate})]}),n.jsx(ve,{children:n.jsx("p",{className:"text-muted-foreground",children:r.description})})]})},s))}),n.jsx(Ae.div,{variants:t,className:"mt-16 p-6 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded-r-lg",children:n.jsxs("div",{className:"flex",children:[n.jsx(kr,{className:"h-6 w-6 text-yellow-500 mr-3"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Avertissement Important"}),n.jsx("p",{className:"text-sm",children:"Les informations fournies sur cette page sont  titre indicatif et ne constituent pas un conseil fiscal. La lgislation fiscale peut voluer. Nous vous recommandons vivement de consulter un notaire ou un conseiller fiscal pour obtenir des informations prcises et personnalises  votre situation."})]})]})})]})]})},wje=e=>new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),_je=e=>{switch(e){case"Nouvelle":return{icon:Cr,color:"text-blue-500"};case"En instruction":return{icon:ln,color:"text-yellow-500"};case"Approuve":case"Traite":return{icon:Qt,color:"text-green-500"};case"Rejet":return{icon:ds,color:"text-red-500"};default:return{icon:Cr,color:"text-gray-500"}}},Nje=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ct,{className:"h-10 w-3/4"}),n.jsx(Ct,{className:"h-6 w-1/2"}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(Ct,{className:"h-6 w-1/4"})}),n.jsxs(ve,{className:"space-y-4",children:[n.jsx(Ct,{className:"h-12 w-full"}),n.jsx(Ct,{className:"h-12 w-full"}),n.jsx(Ct,{className:"h-12 w-full"})]})]})]}),Sje=()=>{var c;const{id:e}=useParams(),[t,r]=x.useState(null),[s,i]=x.useState(!0),{user:a}=yx();x.useEffect(()=>{(async()=>{if(!e){i(!1);return}try{i(!0);const d=await Je.getRequestById(e);if(d){const h={id:d.id,type:d.request_type||"information",status:d.status==="pending"?"En instruction":d.status==="approved"?"Approuve":d.status==="completed"?"Traite":d.status==="rejected"?"Rejet":"Nouvelle",recipient:d.recipient_type||"Mairie",dateSubmitted:d.created_at,lastUpdated:d.updated_at,user_name:d.users?d.users.full_name:"Utilisateur non spcifi",user_email:d.users?d.users.email:"",details:d.details||{},history:o(d.status,d.created_at,d.updated_at),payments:[]};r(h)}else setError("Demande non trouve")}catch(d){console.error("Erreur lors du chargement de la demande:",d),setError("Erreur lors du chargement de la demande")}finally{i(!1)}})()},[e,a]);const o=(u,d,h)=>{const m=[{date:d,action:"Demande soumise",description:"Votre demande a t reue et enregistre dans notre systme.",status:"completed"}];return u!=="pending"&&m.push({date:h||d,action:u==="approved"?"Demande approuve":u==="completed"?"Demande traite":u==="rejected"?"Demande rejete":"Demande mise  jour",description:u==="approved"?"Votre demande a t approuve par les autorits comptentes.":u==="completed"?"Votre demande a t traite avec succs.":u==="rejected"?"Votre demande a t rejete. Veuillez consulter les dtails.":"Votre demande a t mise  jour.",status:u==="rejected"?"error":"completed"}),m};if(s)return n.jsx("div",{className:"container mx-auto py-8 px-4",children:n.jsx(Nje,{})});if(!t)return n.jsxs("div",{className:"container mx-auto py-10 text-center",children:[n.jsx("h2",{className:"text-2xl font-semibold text-destructive",children:"Demande non trouve"}),n.jsx(Link,{to:"/my-requests",className:"text-primary hover:underline mt-4 inline-block",children:"Retour  mes demandes"})]});const l=((c=t.payments)==null?void 0:c.filter(u=>u.status==="En attente"))||[];return n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},className:"container mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-primary",children:["Suivi du Dossier : ",t.id]}),n.jsx("p",{className:"text-muted-foreground",children:"Historique complet et tat actuel de votre demande."})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2 space-y-6",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Chronologie du Dossier"})}),n.jsx(ve,{children:n.jsx("ol",{className:"relative border-l border-gray-200 dark:border-gray-700",children:t.history.sort((u,d)=>new Date(d.date)-new Date(u.date)).map((u,d)=>{const h=_je(u.status);return n.jsxs(Ae.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:d*.1},className:"mb-10 ml-6",children:[n.jsx("span",{className:"absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900",children:n.jsx(h.icon,{className:`w-4 h-4 ${h.color}`})}),n.jsxs("h3",{className:"flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-white",children:[u.status,d===0&&n.jsx(Ge,{variant:"success",className:"ml-3",children:"Statut Actuel"})]}),n.jsxs("time",{className:"block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",children:["Le ",wje(u.date)," par ",n.jsx("span",{className:"font-semibold",children:u.updated_by})]}),n.jsx("p",{className:"mb-4 text-base font-normal text-gray-600 dark:text-gray-400 p-3 bg-muted/50 rounded-md border border-dashed",children:u.note})]},d)})})})]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Dtails de la Demande"})}),n.jsxs(ve,{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Type"}),n.jsx("span",{className:"font-semibold capitalize",children:t.request_type})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Destinataire"}),n.jsx("span",{className:"font-semibold",children:t.recipient})]}),t.parcel_id&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Parcelle"}),n.jsx(Link,{to:`/parcelles/${t.parcel_id}`,className:"font-semibold text-primary hover:underline",children:t.parcel_id})]})]})]}),l.length>0&&n.jsxs(he,{className:"border-primary bg-primary/5",children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"flex items-center text-primary",children:[n.jsx(Rl,{className:"mr-2"}),"Action Requise : Paiement"]}),n.jsx(jt,{children:"Un ou plusieurs paiements sont ncessaires pour faire avancer votre dossier."})]}),n.jsx(ve,{children:n.jsx("ul",{className:"space-y-2",children:l.map(u=>n.jsxs("li",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{children:u.description}),n.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF"}).format(u.amount)})]},u.id))})}),n.jsx(Wn,{children:n.jsx(Y,{asChild:!0,className:"w-full",children:n.jsxs(Link,{to:`/payment/${l[0].id}`,children:["Payer les frais requis ",n.jsx(Fn,{className:"ml-2 h-4 w-4"})]})})})]}),n.jsx("div",{className:"text-center",children:n.jsx(Y,{asChild:!0,variant:"outline",children:n.jsxs(Link,{to:"/my-requests",children:[n.jsx(P0,{className:"mr-2 h-4 w-4"})," Voir toutes mes demandes"]})})})]})]})]})},Aje=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1);x.useEffect(()=>{t&&c()},[t]);const c=async()=>{try{a(!0);const v=await Je.getUserDocuments(t.id);s(v||[])}catch(v){console.error("Erreur chargement documents:",v),e({variant:"destructive",title:"Erreur",description:"Impossible de charger vos documents"})}finally{a(!1)}},u=async(v,g)=>{try{const y=await Je.getDocumentDownloadUrl(v);if(y){const j=document.createElement("a");j.href=y,j.download=g,document.body.appendChild(j),j.click(),document.body.removeChild(j),e({title:"Tlchargement en cours",description:`Le document ${g} est en cours de tlchargement.`})}}catch(y){console.error("Erreur tlchargement:",y),e({variant:"destructive",title:"Erreur",description:"Impossible de tlcharger le document"})}},d=async v=>{const g=v.target.files[0];if(g)try{l(!0);const y=10*1024*1024;if(g.size>y)throw new Error("Le fichier est trop volumineux (max 10MB)");await Je.uploadDocument(t.id,g)&&(e({title:"Document tlvers",description:`${g.name} a t ajout  votre coffre-fort.`}),await c())}catch(y){console.error("Erreur upload:",y),e({variant:"destructive",title:"Erreur d'upload",description:y.message||"Impossible de tlverser le document"})}finally{l(!1),v.target.value=""}},h=()=>{document.getElementById("file-upload").click()};if(i)return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});const m={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsxs(Uo,{children:[n.jsx("title",{children:"Coffre-fort Numrique - Teranga Foncier"}),n.jsx("meta",{name:"description",content:"Accdez  tous vos documents fonciers importants (actes de vente, titres de proprit, plans) dans un espace scuris et confidentiel."})]}),n.jsxs(Ae.div,{variants:m,initial:"hidden",animate:"visible",className:"container mx-auto py-12 px-4",children:[n.jsxs(Ae.div,{variants:p,className:"flex flex-col sm:flex-row justify-between items-center mb-12 gap-4",children:[n.jsxs("div",{className:"text-center sm:text-left",children:[n.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold text-primary mb-4 flex items-center",children:[n.jsx(woe,{className:"h-10 w-10 mr-3"})," Coffre-fort Numrique"]}),n.jsx("p",{className:"text-lg text-muted-foreground",children:"Vos documents fonciers, scuriss et accessibles  tout moment."})]}),n.jsxs("div",{children:[n.jsxs(Y,{size:"lg",onClick:h,disabled:o,children:[n.jsx(Ds,{className:"mr-2 h-5 w-5"}),o?"Tlversement...":"Tlverser un Document"]}),n.jsx("input",{id:"file-upload",type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:d,style:{display:"none"}})]})]}),n.jsx(Ae.div,{variants:p,children:n.jsxs(he,{className:"shadow-lg",children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Mes Documents"}),n.jsx(jt,{children:"Retrouvez ici tous les documents lis  vos transactions foncires."})]}),n.jsx(ve,{children:r.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Cr,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun document"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore de documents dans votre coffre-fort."}),n.jsxs(Y,{onClick:h,children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Ajouter votre premier document"]})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-3 font-semibold",children:"Nom du Document"}),n.jsx("th",{className:"text-left p-3 font-semibold hidden md:table-cell",children:"Catgorie"}),n.jsx("th",{className:"text-left p-3 font-semibold hidden sm:table-cell",children:"Date"}),n.jsx("th",{className:"text-left p-3 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:r.map(v=>n.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Cr,{className:"h-5 w-5 mr-3 text-primary flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:v.name||v.filename}),n.jsx("p",{className:"text-xs text-muted-foreground md:hidden",children:v.category||v.document_type})]})]})}),n.jsx("td",{className:"p-3 hidden md:table-cell",children:v.category||v.document_type||"Document"}),n.jsx("td",{className:"p-3 hidden sm:table-cell",children:new Date(v.created_at||v.uploaded_at).toLocaleDateString("fr-FR")}),n.jsx("td",{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>u(v.id,v.name||v.filename),children:[n.jsx(Tl,{className:"h-4 w-4 mr-1"})," Tlcharger"]}),v.verified&&n.jsx(Ys,{className:"h-5 w-5 text-green-500",title:"Document vrifi par Teranga Foncier"})]})})]},v.id))})]})})})]})})]})]})},Pje=e=>new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF"}).format(e),Cje=e=>{switch(e){case"Pay":return n.jsx(Ge,{variant:"success",children:e});case"En attente":return n.jsx(Ge,{variant:"warning",children:e});case"chou":return n.jsx(Ge,{variant:"destructive",children:e});default:return n.jsx(Ge,{variant:"secondary",children:e})}},kje=()=>{const{toast:e}=pt(),{user:t}=ar(),r=kn(),[s,i]=x.useState(!0),[a,o]=x.useState([]);x.useEffect(()=>{let u=!0;return(async()=>{try{i(!0);let d;t!=null&&t.id?d=(await Je.getTransactions()).filter(m=>m.buyer_id===t.id||m.seller_id===t.id||m.user_id===t.id||t.role==="admin"):d=await Je.getTransactions(),u&&o(d)}catch{e({variant:"destructive",title:"Erreur",description:"Transactions indisponibles"})}finally{u&&i(!1)}})(),()=>{u=!1}},[t]);const l=u=>{r(`/payment/${u}`)},c=u=>{e({title:"Tlchargement de la facture...",description:`La facture pour la transaction ${u} est en cours de gnration.`})};return s?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-primary flex items-center",children:[n.jsx(xk,{className:"mr-2 h-8 w-8"}),"Mes Transactions"]}),n.jsx("p",{className:"text-muted-foreground",children:"Consultez l'historique de vos paiements et factures."})]}),n.jsxs(Y,{variant:"outline",children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer les transactions"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Historique des paiements"}),n.jsx(jt,{children:"Retrouvez ici toutes les transactions effectues sur la plateforme."})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Date"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Description"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Montant"}),n.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:a.map(u=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"py-4 px-4 text-sm",children:new Date(u.created_at||u.date).toLocaleDateString("fr-FR")}),n.jsxs("td",{className:"py-4 px-4",children:[n.jsx("p",{className:"font-medium",children:u.reference||u.description||"Transaction"}),u.parcel_id&&n.jsx(dt,{to:`/parcelles/${u.parcel_id}`,className:"text-xs text-primary hover:underline",children:"Voir la parcelle"})]}),n.jsx("td",{className:"py-4 px-4 font-mono text-sm",children:Pje(u.amount||u.price||0)}),n.jsx("td",{className:"py-4 px-4",children:Cje(u.status||"En cours")}),n.jsxs("td",{className:"py-4 px-4 text-right space-x-2",children:[["En attente","pending","draft"].includes(u.status)&&n.jsxs(Y,{size:"sm",onClick:()=>l(u.id),children:[n.jsx(Rl,{className:"mr-2 h-4 w-4"})," Payer"]}),["Pay","paid","completed"].includes(u.status)&&n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>c(u.id),children:[n.jsx(Tl,{className:"mr-2 h-4 w-4"})," Facture"]})]})]},u.id))})]})})})]})]})},E5=e=>new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF"}).format(e),Eje=()=>{const{transactionId:e}=_k(),t=kn(),{toast:r}=pt(),{user:s}=ar(),[i,a]=x.useState(null),[o,l]=x.useState(""),[c,u]=x.useState({}),[d,h]=x.useState(!1),[m,p]=x.useState(!1),[v,g]=x.useState(""),[y,j]=x.useState(!1),[_,w]=x.useState([]),[A,S]=x.useState([]),[P,C]=x.useState(!0);x.useEffect(()=>{let O=!0;return(async()=>{try{const q=(await Je.getTransactions()).find(F=>String(F.id)===String(e)||F.reference===e);if(!q)throw new Error("Transaction introuvable");O&&(a(q),l(q.amount<=1e5?"mobile":"transfer"),g(q.status))}catch(I){r({title:"Erreur",description:I.message||"Transaction non trouve",variant:"destructive"}),t("/transactions")}})(),()=>{O=!1}},[e,t,r]),x.useEffect(()=>{let O=!0;return(async()=>{try{const[I,q]=await Promise.all([Je.listPaymentMethods(),Je.listBanks()]);if(!O)return;w(I),S(q)}finally{O&&C(!1)}})(),()=>{O=!1}},[]);const T=async()=>{if(i){j(!0);try{const O=await Je.getTransactionById(i.id);O&&(a(O),g(O.status))}finally{j(!1)}}},M=async O=>{if(O.preventDefault(),!s){r({title:"Non connect",description:"Connectez-vous pour payer",variant:"destructive"});return}h(!0);try{const I=await Je.payTransaction(i.id,s.id,o);h(!1),p(!0),I!=null&&I.status&&g(I.status),r(I?{title:"Paiement Russi !",description:`Le paiement de ${E5(I.amount||i.amount)} pour ${I.reference||i.reference||i.description} a t enregistr.`,variant:"success"}:{title:"Paiement",description:"Transaction marque paye.",variant:"success"}),setTimeout(()=>t("/transactions"),2500)}catch(I){console.error(I),h(!1),r({title:"Erreur paiement",description:I.message||"chec du paiement",variant:"destructive"})}},z=()=>{var O,I;switch(o){case"mobile":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs(Ft,{onValueChange:q=>u({provider:q}),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Choisissez un oprateur"})}),n.jsx($t,{children:(I=(O=_.find(q=>q.id==="mobile"))==null?void 0:O.providers)==null?void 0:I.map(q=>n.jsx(Ke,{value:q,children:q},q))})]}),n.jsx(De,{type:"tel",placeholder:"Numro de tlphone (ex: 771234567)",required:!0})]});case"transfer":return n.jsxs("div",{className:"space-y-4",children:[n.jsxs(Ft,{onValueChange:q=>u({bank:q}),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Choisissez votre banque"})}),n.jsx($t,{children:A.map(q=>n.jsx(Ke,{value:q,children:q},q))})]}),n.jsx(De,{placeholder:"Numro de rfrence du virement",required:!0}),n.jsxs("p",{className:"text-xs text-muted-foreground p-3 bg-muted/50 rounded-md",children:["Veuillez effectuer un virement vers le compte IBAN ",n.jsx("span",{className:"font-mono",children:"SN012 01010 123456789012 87"})," avec la rfrence de transaction ",n.jsx("span",{className:"font-mono",children:i.id}),"."]})]});case"check":return n.jsxs("div",{className:"space-y-4",children:[n.jsx(De,{placeholder:"Numro du chque",required:!0}),n.jsx(De,{placeholder:"Banque mettrice",required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground p-3 bg-muted/50 rounded-md",children:`Le chque doit tre libell  l'ordre de "Teranga Foncier SA" et dpos  notre agence principale.`})]});default:return null}};return!i||P?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):m?n.jsxs(Ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"container mx-auto py-12 flex flex-col items-center justify-center text-center",children:[n.jsx(Qt,{className:"h-24 w-24 text-green-500 mb-6"}),n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Paiement Effectu !"}),n.jsxs("p",{className:"text-lg text-muted-foreground mb-4",children:["Votre transaction a t traite avec succs (statut: ",v||"paid",")."]}),n.jsx("p",{className:"text-sm",children:"Vous allez tre redirig vers vos transactions..."})]}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto py-8 px-4 max-w-2xl",children:[n.jsxs(Y,{variant:"ghost",onClick:()=>t(-1),className:"mb-4",children:[n.jsx(Vv,{className:"mr-2 h-4 w-4"})," Retour aux transactions"]}),n.jsxs(he,{className:"overflow-hidden",children:[n.jsxs(Ce,{className:"bg-muted/30",children:[n.jsx(ke,{className:"text-2xl",children:"Paiement Scuris"}),n.jsx(jt,{children:"Finalisez votre transaction en toute scurit."})]}),n.jsxs(ve,{className:"pt-6",children:[n.jsxs("div",{className:"border-b pb-4 mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Transaction ID"}),n.jsx("span",{className:"font-mono text-sm",children:i.id})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-muted-foreground",children:"Description"}),n.jsx("span",{className:"font-medium text-right",children:i.description})]}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Statut"}),n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-muted font-medium",children:v||i.status||"pending"}),n.jsx(Y,{type:"button",size:"icon",variant:"ghost",onClick:T,disabled:y,className:"h-6 w-6",children:n.jsx(Nae,{className:`h-3 w-3 ${y?"animate-spin":""}`})})]})]})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant  payer"}),n.jsx("p",{className:"text-4xl font-bold text-primary",children:E5(i.amount)})]}),n.jsxs("form",{onSubmit:M,children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Mthode de paiement"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mt-2",children:_.map(O=>{const I=O.icon&&typeof O.icon=="string"?O.icon==="Smartphone"?JN:O.icon==="Landmark"?Ea:O.icon==="FileCheck2"?Jse:JN:JN;return n.jsxs(Y,{type:"button",variant:o===O.id?"default":"outline",onClick:()=>l(O.id),className:"w-full justify-start",children:[n.jsx(I,{className:"mr-2 h-4 w-4"})," ",O.name]},O.id)})})]}),o&&n.jsxs(Ae.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"pt-4 border-t",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Dtails du paiement"}),z()]})]}),n.jsx(Wn,{className:"px-0 pt-8 pb-0",children:n.jsx(Y,{type:"submit",className:"w-full",size:"lg",disabled:!o||d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(yg,{className:"mr-2 h-4 w-4 animate-spin"}),"Traitement en cours..."]}):`Payer ${E5(i.amount)}`})})]})]})]})]})};var tT="Radio",[Tje,BW]=ws(tT),[Oje,Lje]=Tje(tT),qW=x.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[h,m]=x.useState(null),p=Gt(t,y=>m(y)),v=x.useRef(!1),g=h?u||!!h.closest("form"):!0;return n.jsxs(Oje,{scope:r,checked:i,disabled:o,children:[n.jsx(_t.button,{type:"button",role:"radio","aria-checked":i,"data-state":WW(i),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:p,onClick:ft(e.onClick,y=>{i||c==null||c(),g&&(v.current=y.isPropagationStopped(),v.current||y.stopPropagation())})}),g&&n.jsx(HW,{control:h,bubbles:!v.current,name:s,value:l,checked:i,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});qW.displayName=tT;var VW="RadioIndicator",UW=x.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...i}=e,a=Lje(VW,r);return n.jsx(hi,{present:s||a.checked,children:n.jsx(_t.span,{"data-state":WW(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});UW.displayName=VW;var Mje="RadioBubbleInput",HW=x.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:s=!0,...i},a)=>{const o=x.useRef(null),l=Gt(o,a),c=hx(r),u=L0(t);return x.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&p){const v=new Event("click",{bubbles:s});p.call(d,r),d.dispatchEvent(v)}},[c,r,s]),n.jsx(_t.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});HW.displayName=Mje;function WW(e){return e?"checked":"unchecked"}var Ije=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],o_="RadioGroup",[Rje,BHe]=ws(o_,[px,BW]),GW=px(),KW=BW(),[Dje,$je]=Rje(o_),ZW=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...m}=e,p=GW(r),v=Ch(u),[g,y]=Ri({prop:a,defaultProp:i??null,onChange:h,caller:o_});return n.jsx(Dje,{scope:r,name:s,required:o,disabled:l,value:g,onValueChange:y,children:n.jsx(Uk,{asChild:!0,...p,orientation:c,dir:v,loop:d,children:n.jsx(_t.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...m,ref:t})})})});ZW.displayName=o_;var XW="RadioGroupItem",YW=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...i}=e,a=$je(XW,r),o=a.disabled||s,l=GW(r),c=KW(r),u=x.useRef(null),d=Gt(t,u),h=a.value===i.value,m=x.useRef(!1);return x.useEffect(()=>{const p=g=>{Ije.includes(g.key)&&(m.current=!0)},v=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",v)}},[]),n.jsx(Hk,{asChild:!0,...l,focusable:!o,active:h,children:n.jsx(qW,{disabled:o,required:a.required,checked:h,...c,...i,name:a.name,ref:d,onCheck:()=>a.onValueChange(i.value),onKeyDown:ft(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ft(i.onFocus,()=>{var p;m.current&&((p=u.current)==null||p.click())})})})});YW.displayName=XW;var Fje="RadioGroupIndicator",JW=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,i=KW(r);return n.jsx(UW,{...i,...s,ref:t})});JW.displayName=Fje;var QW=ZW,eG=YW,zje=JW;const tG=x.forwardRef(({className:e,...t},r)=>n.jsx(QW,{className:st("grid gap-2",e),...t,ref:r}));tG.displayName=QW.displayName;const rG=x.forwardRef(({className:e,...t},r)=>n.jsx(eG,{ref:r,className:st("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(zje,{className:"flex items-center justify-center",children:n.jsx(fz,{className:"h-2.5 w-2.5 fill-current text-current"})})}));rG.displayName=eG.displayName;const cv={regions:[{code:"DK",name:"Dakar",departments:[{code:"DK_DA",name:"Dakar",communes:["Dakar-Plateau","Mdina","Fann-Point E-Amiti","Grand Dakar","Almadies","Ngor","Ouakam","Mermoz-Sacr-Cur","Sicap-Libert","Gueule Tape-Fass-Colobane","Biscuiterie","Dieuppeul-Derkl","Grand Yoff","Parcelles Assainies","Cambrne","Yoff"]},{code:"DK_GU",name:"Gudiawaye",communes:["Gudiawaye","Golf Sud","Mdina Gounass","Ndiarme Limamou Laye","Sam Notaire","Wakhinane Nimzatt"]},{code:"DK_PI",name:"Pikine",communes:["Pikine Est","Pikine Nord","Pikine Ouest","Dagoudane","Dalifort","Djeddah Thiaroye Kao","Guinaw Rail Nord","Guinaw Rail Sud","Malika","Mbao","Thiaroye Gare","Thiaroye-sur-Mer","Tivaouane Diacksao","Yeumbeul Nord","Yeumbeul Sud"]},{code:"DK_RU",name:"Rufisque",communes:["Rufisque Est","Rufisque Nord","Rufisque Ouest","Bargny","Diamniadio","Jaxaay-Parcelle-Niakoulrab","Sbikotane","Sendou","Yne"]}]},{code:"TH",name:"This",departments:[{code:"TH_TH",name:"This",communes:["This-Nord","This-Sud","This-Est","This-Ouest","Fandne","Kao","Keur Moussa","Notto","Tassette"]},{code:"TH_TI",name:"Tivaouane",communes:["Tivaouane","Mkh","Niakhne","Pambal","Taba Ndiaye"]},{code:"TH_MB",name:"Mbour",communes:["Mbour","Fissel","Joal-Fadiouth","Malicounda","Ndiaganiao","Ngukhokh","Popenguine","Sandiara","Sessne","Sindia","Somone","Thiadiaye"]}]},{code:"SL",name:"Saint-Louis",departments:[{code:"SL_SL",name:"Saint-Louis",communes:["Saint-Louis","Mpal","Fass Ngom","Gandon","Ross Bthio"]},{code:"SL_DA",name:"Dagana",communes:["Dagana","Bokhol","Mban","Richard Toll","Ross Bthio"]},{code:"SL_PO",name:"Podor",communes:["Podor","Ar Lao","Cas-Cas","Dmette","Dialar","Fanaye","Galoya","Gamadji Sar","Gud Chantier","Gud Village","Madina Ndath","Mboumba","Ndioum","Ndiayne Pendao","Pt","Walald"]}]},{code:"DI",name:"Diourbel",departments:[{code:"DI_DI",name:"Diourbel",communes:["Diourbel","Ndoulo","Pattar","Tocky Gare"]},{code:"DI_BA",name:"Bambey",communes:["Bambey","Baba Garage","Dinguiraye","Gawane","Lambaye","Ngoye","Rfane"]},{code:"DI_MB",name:"Mback",communes:["Mback","Touba","Darou Khoudoss","Ndame","Taf","Kael","Nghaye"]}]},{code:"KA",name:"Kaolack",departments:[{code:"KA_KA",name:"Kaolack",communes:["Kaolack","Gandiaye","Kahone","Keur Baka","Latmingu","Ndoffane","Nioro du Rip","Sibassor"]},{code:"KA_GU",name:"Guinguino",communes:["Guinguino","Fimela","Mbadakhoune","Ourour"]},{code:"KA_NI",name:"Nioro du Rip",communes:["Nioro du Rip","Keur Madiabel","Mdina Sabakh","Ngathie Naoud","Paoskoto","Wack Ngouna"]}]},{code:"ZI",name:"Ziguinchor",departments:[{code:"ZI_ZI",name:"Ziguinchor",communes:["Ziguinchor","Adane","Boutoupa-Camaracounda","Coubalan","Enampore","Niaguis","Nyassia","Tenghory"]},{code:"ZI_BI",name:"Bignona",communes:["Bignona","Diouloulou","Kafountine","Sindian","Tenghory","Thionck Essyl"]},{code:"ZI_OU",name:"Oussouye",communes:["Oussouye","Diembring","Loudia Ouoloff","Mlomp"]}]},{code:"FA",name:"Fatick",departments:[{code:"FA_FA",name:"Fatick",communes:["Fatick","Diakhao","Diokhoul","Fimela","Loul Sessne","Palmarin","Passy","Tattaguine"]},{code:"FA_FO",name:"Foundiougne",communes:["Foundiougne","Djilor","Karang","Niodior","Passy","Sokone","Toubacouta"]},{code:"FA_GO",name:"Gossas",communes:["Gossas","Colobane","Ouadiour","Pout"]}]},{code:"KO",name:"Kolda",departments:[{code:"KO_KO",name:"Kolda",communes:["Kolda","Bagadadji","Coumbacara","Dabo","Dialambr","Guiro Yro Bocar","Mampatim","Mdina Yro Foula","Salikgn","Tankanto Escale"]},{code:"KO_VE",name:"Vlingara",communes:["Vlingara","Bonconto","Diaob","Kounkan","Linkring","Mdina Gounass","Ouassadou","Pakour","Paroumba","Wassadou"]},{code:"KO_ME",name:"Mdina Yro Foula",communes:["Mdina Yro Foula","Fafacourou","Koulinto","Pata"]}]},{code:"TA",name:"Tambacounda",departments:[{code:"TA_TA",name:"Tambacounda",communes:["Tambacounda","Dialakoto","Kidira","Koumpentoum","Makacolibantang","Missirah","Sinthiou Malme"]},{code:"TA_BA",name:"Bakel",communes:["Bakel","Bala","Diawara","Goudiry","Kniba","Moudery","Ourossogui"]},{code:"TA_GO",name:"Goudiry",communes:["Goudiry","Bl","Dougu","Kothiary","Sinthiou Bamamb"]},{code:"TA_KO",name:"Koumpentoum",communes:["Koumpentoum","Bamba Thialne","Kahne","Maka","Payar","Sinthiou Fissa"]}]},{code:"LO",name:"Louga",departments:[{code:"LO_LO",name:"Louga",communes:["Louga","Coki","Kbmer","Sakal","Pete Ouarack"]},{code:"LO_KE",name:"Kbmer",communes:["Kbmer","Dahra","Loul Sessne","Sagatta Djoloff"]},{code:"LO_LI",name:"Lingure",communes:["Lingure","Barkedji","Daly","Dodji","Kamb","Labgar","Ouarkhokh","Thiargny","Wendou Bossab"]}]},{code:"MT",name:"Matam",departments:[{code:"MT_MT",name:"Matam",communes:["Matam","Nabadji Civol","Nguidjilogne","Ogo","Orfond","Ourossogui","Thilogne"]},{code:"MT_KA",name:"Kanel",communes:["Kanel","Dembankan","Hamady Hounar","Ndendory","Sm","Wouro Sidy"]},{code:"MT_RA",name:"Ranrou",communes:["Ranrou","Lougr Thioly","Oudalaye","Vlingara"]}]},{code:"KA2",name:"Kaffrine",departments:[{code:"KA2_KA",name:"Kaffrine",communes:["Kaffrine","Gniby","Kahi","Kathiotte"]},{code:"KA2_BI",name:"Birkelane",communes:["Birkelane","Mabo","Touba Toul"]},{code:"KA2_KO",name:"Koungheul",communes:["Koungheul","Ida Mouride","Lour Escale","Missirah Wadne"]},{code:"KA2_MA",name:"Malem-Hodar",communes:["Malem-Hodar","Darou Miname","Kab Gaye","Ndioum Ngainthe"]}]},{code:"KE",name:"Kdougou",departments:[{code:"KE_KE",name:"Kdougou",communes:["Kdougou","Bandafassi","Dindefelo","Fongolimbi"]},{code:"KE_SA",name:"Saraya",communes:["Saraya","Bembou","Dakembo","Khossanto"]},{code:"KE_SA2",name:"Salmata",communes:["Salmata","Ethiolo","Tomboronkoto"]}]},{code:"SE",name:"Sdhiou",departments:[{code:"SE_SE",name:"Sdhiou",communes:["Sdhiou","Bambali","Diannah Malary","Marsassoum"]},{code:"SE_BO",name:"Bounkiling",communes:["Bounkiling","Diaroum","Goudomp","Tankon"]},{code:"SE_GO",name:"Goudomp",communes:["Goudomp","Diattacounda","Karantaba","Samine"]}]}]},T5={getAllRegions:()=>cv.regions.map(e=>({code:e.code,name:e.name})),getDepartmentsByRegion:e=>{const t=cv.regions.find(r=>r.code===e);return t?t.departments.map(r=>({code:r.code,name:r.name})):[]},getCommunesByDepartment:(e,t)=>{const r=cv.regions.find(i=>i.code===e);if(!r)return[];const s=r.departments.find(i=>i.code===t);return s?s.communes.map(i=>({name:i,fullPath:`${r.name} > ${s.name} > ${i}`})):[]},searchCommune:e=>{const t=[];return cv.regions.forEach(r=>{r.departments.forEach(s=>{s.communes.forEach(i=>{i.toLowerCase().includes(e.toLowerCase())&&t.push({commune:i,department:s.name,region:r.name,fullPath:`${r.name} > ${s.name} > ${i}`})})})}),t},validateLocation:(e,t,r)=>{const s=cv.regions.find(a=>a.code===e);if(!s)return!1;const i=s.departments.find(a=>a.code===t);return i?i.communes.includes(r):!1}},rT=({value:e={region:"",department:"",commune:""},onChange:t,required:r=!1,showIcons:s=!0,disabled:i=!1})=>{var v,g;const[a,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]);x.useEffect(()=>{o(T5.getAllRegions())},[]),x.useEffect(()=>{if(e.region){const y=T5.getDepartmentsByRegion(e.region);c(y),y.length>0&&!y.find(j=>j.code===e.department)&&t({region:e.region,department:"",commune:""})}else c([]),d([])},[e.region]),x.useEffect(()=>{if(e.region&&e.department){const y=T5.getCommunesByDepartment(e.region,e.department);d(y),y.length>0&&!y.find(j=>j.name===e.commune)&&t({region:e.region,department:e.department,commune:""})}else d([])},[e.department]);const h=y=>{t({region:y,department:"",commune:""})},m=y=>{t({region:e.region,department:y,commune:""})},p=y=>{t({region:e.region,department:e.department,commune:y})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"region",className:"flex items-center gap-2",children:[s&&n.jsx(jr,{className:"h-4 w-4"}),"Rgion ",r&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs(Ft,{value:e.region,onValueChange:h,disabled:i,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez une rgion"})}),n.jsx($t,{children:a.map(y=>n.jsx(Ke,{value:y.code,children:y.name},y.code))})]})]}),n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"department",className:"flex items-center gap-2",children:[s&&n.jsx(Vn,{className:"h-4 w-4"}),"Dpartement ",r&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs(Ft,{value:e.department,onValueChange:m,disabled:i||!e.region,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:e.region?"Slectionnez un dpartement":"Slectionnez d'abord une rgion"})}),n.jsx($t,{children:l.map(y=>n.jsx(Ke,{value:y.code,children:y.name},y.code))})]})]}),n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"commune",className:"flex items-center gap-2",children:[s&&n.jsx(P0,{className:"h-4 w-4"}),"Commune ",r&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs(Ft,{value:e.commune,onValueChange:p,disabled:i||!e.department,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:e.department?"Slectionnez une commune":"Slectionnez d'abord un dpartement"})}),n.jsx($t,{children:u.map(y=>n.jsx(Ke,{value:y.name,children:y.name},y.name))})]})]}),e.region&&e.department&&e.commune&&n.jsx("div",{className:"mt-2 p-3 bg-muted/50 rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:"Localisation :"})," ",e.commune,", ",(v=l.find(y=>y.code===e.department))==null?void 0:v.name,", ",(g=a.find(y=>y.code===e.region))==null?void 0:g.name]})})]})},Bje=()=>{const{toast:e}=pt(),{user:t}=ar(),r=kn(),[s,i]=x.useState(!1),[a,o]=x.useState(1),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,m]=x.useState([]),[p,v]=x.useState(!1),[g,y]=x.useState({type:"",title:"",description:"",location:"",surface:"",budget:"",urgency:"normale",mairie_id:"",geographic_location:{region:"",department:"",commune:""},usage_prevu:"",duree_souhaitee:"",justification:"",banque_id:"",terrain_reference:"",parcel_id:"",montant_demande:"",objet_financement:"",revenus_mensuels:"",apport_personnel:"",situation_professionnelle:""}),j=[{id:"terrain_communal",title:"Demande de Terrain Communal",description:"Demander l'attribution d'un terrain communal pour usage personnel ou professionnel",icon:uoe,color:"bg-green-500"},{id:"financement",title:"Demande de Financement",description:"Demander un financement pour votre projet immobilier ou foncier",icon:fs,color:"bg-blue-500"}],_=[{value:"habitation",label:"Construction d'habitation"},{value:"agriculture",label:"Usage agricole"},{value:"commerce",label:"Activit commerciale"},{value:"industrie",label:"Activit industrielle"},{value:"autre",label:"Autre usage"}],w=[{value:"basse",label:"Basse",color:"text-green-600"},{value:"normale",label:"Normale",color:"text-blue-600"},{value:"haute",label:"Haute",color:"text-orange-600"},{value:"urgente",label:"Urgente",color:"text-red-600"}];x.useEffect(()=>{(async()=>{if(t){v(!0);try{const C=await Je.getUsersByType("Mairie");c(C||[]);const T=await Je.getUsersByType("Banque");d(T||[]);const M=await Je.getParcelsByOwner(t.id);m(M||[])}catch(C){console.error("Erreur chargement options:",C)}finally{v(!1)}}})()},[t]),x.useEffect(()=>{if(g.geographic_location.commune&&l.length>0){const P=l.find(C=>C.commune===g.geographic_location.commune||Array.isArray(C.communes)&&C.communes.includes(g.geographic_location.commune));y(C=>({...C,mairie_id:P?P.id:""}))}},[g.geographic_location.commune,l]);const A=async()=>{if(!g.type||!g.title||!g.description){e({variant:"destructive",title:"Erreur",description:"Veuillez remplir tous les champs obligatoires"});return}if(g.type==="terrain_communal"&&!g.mairie_id){e({variant:"destructive",title:"Erreur",description:"Veuillez slectionner une mairie destinataire"});return}if(g.type==="financement"&&(!g.banque_id||!g.parcel_id)){e({variant:"destructive",title:"Erreur",description:"Veuillez slectionner une banque et un terrain pour le financement"});return}i(!0);try{const P={user_id:t.id,request_type:g.type,title:g.title,description:g.description,location:g.location,status:"pending",urgency:g.urgency,recipient_type:g.type==="terrain_communal"?"Mairie":"Banque",recipient_id:g.type==="terrain_communal"?g.mairie_id:g.banque_id,parcel_id:g.parcel_id||null,data:{...g,created_at:new Date().toISOString()}},C=await Je.createRequest(P),T=g.type==="terrain_communal"?`Nouvelle demande de terrain communal de ${t.email}`:`Nouvelle demande de financement de ${t.email}`;await Je.createNotification({userId:g.type==="terrain_communal"?g.mairie_id:g.banque_id,type:"new_request",title:"Nouvelle demande reue",body:T,data:{request_id:C.id,request_type:g.type,requester:t.email}}),e({title:"Demande cre",description:`Votre demande a t envoye  ${g.type==="terrain_communal"?"la mairie":"la banque"} concerne. Vous recevrez une notification ds qu'elle sera traite.`}),r("/dashboard/my-requests")}catch(P){console.error("Erreur lors de la cration de la demande:",P),e({variant:"destructive",title:"Erreur",description:"Impossible de crer la demande. Veuillez ressayer."})}finally{i(!1)}},S=()=>{switch(a){case 1:return n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choisissez le type de demande"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(P=>{const C=P.icon;return n.jsx(he,{className:`cursor-pointer transition-all hover:shadow-md ${g.type===P.id?"ring-2 ring-primary border-primary":""}`,onClick:()=>y(T=>({...T,type:P.id})),children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${P.color} text-white`,children:n.jsx(C,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:P.title}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:P.description})]})]})})},P.id)})})]})});case 2:return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"title",children:"Titre de la demande *"}),n.jsx(De,{id:"title",value:g.title,onChange:P=>y(C=>({...C,title:P.target.value})),placeholder:"Ex: Demande de terrain pour construction maison familiale"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"description",children:"Description dtaille *"}),n.jsx(ms,{id:"description",rows:4,value:g.description,onChange:P=>y(C=>({...C,description:P.target.value})),placeholder:"Dcrivez votre projet en dtail..."})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"location",children:"Localisation"}),n.jsx(De,{id:"location",value:g.location,onChange:P=>y(C=>({...C,location:P.target.value})),placeholder:"Adresse ou zone gographique"})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Niveau d'urgence"}),n.jsx(tG,{value:g.urgency,onValueChange:P=>y(C=>({...C,urgency:P})),className:"flex flex-wrap gap-4 mt-2",children:w.map(P=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rG,{value:P.value,id:P.value}),n.jsx($e,{htmlFor:P.value,className:P.color,children:P.label})]},P.value))})]})]});case 3:if(g.type==="terrain_communal")return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"mairie_id",children:"Mairie destinataire *"}),n.jsxs(Ft,{value:g.mairie_id,onValueChange:P=>y(C=>({...C,mairie_id:P})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez la mairie concerne"})}),n.jsx($t,{children:l.map(P=>{var C;return n.jsxs(Ke,{value:P.id,children:[P.full_name||P.email," - ",((C=P.metadata)==null?void 0:C.commune)||"Commune non spcifie"]},P.id)})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Votre demande sera directement envoye  cette mairie"})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-md font-semibold mb-3 flex items-center gap-2",children:[n.jsx(jr,{className:"h-4 w-4"}),"Localisation du terrain demand"]}),n.jsx(rT,{value:g.geographic_location,onChange:P=>y(C=>({...C,geographic_location:P})),required:!0})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"usage_prevu",children:"Usage prvu du terrain *"}),n.jsxs(Ft,{value:g.usage_prevu,onValueChange:P=>y(C=>({...C,usage_prevu:P})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez l'usage prvu"})}),n.jsx($t,{children:_.map(P=>n.jsx(Ke,{value:P.value,children:P.label},P.value))})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"surface",children:"Surface souhaite (m)"}),n.jsx(De,{id:"surface",type:"number",value:g.surface,onChange:P=>y(C=>({...C,surface:P.target.value})),placeholder:"Ex: 500"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"duree_souhaitee",children:"Dure d'occupation souhaite"}),n.jsx(De,{id:"duree_souhaitee",value:g.duree_souhaitee,onChange:P=>y(C=>({...C,duree_souhaitee:P.target.value})),placeholder:"Ex: 10 ans, permanente, etc."})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"justification",children:"Justification de la demande *"}),n.jsx(ms,{id:"justification",rows:4,value:g.justification,onChange:P=>y(C=>({...C,justification:P.target.value})),placeholder:"Expliquez pourquoi vous avez besoin de ce terrain..."})]})]});if(g.type==="financement")return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"banque_id",children:"Banque destinataire *"}),n.jsxs(Ft,{value:g.banque_id,onValueChange:P=>y(C=>({...C,banque_id:P})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez la banque"})}),n.jsx($t,{children:u.map(P=>{var C;return n.jsxs(Ke,{value:P.id,children:[P.full_name||P.email," - ",((C=P.metadata)==null?void 0:C.bank_name)||"Banque"]},P.id)})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Votre demande de financement sera directement envoye  cette banque"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"parcel_id",children:"Terrain  financer *"}),n.jsxs(Ft,{value:g.parcel_id,onValueChange:P=>y(C=>({...C,parcel_id:P})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez le terrain concern"})}),n.jsx($t,{children:h.map(P=>n.jsxs(Ke,{value:P.id,children:[P.reference," - ",P.name," (",P.surface_area,"m)"]},P.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"La banque pourra voir tous les dtails de ce terrain"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"montant_demande",children:"Montant demand (FCFA) *"}),n.jsx(De,{id:"montant_demande",type:"number",value:g.montant_demande,onChange:P=>y(C=>({...C,montant_demande:P.target.value})),placeholder:"Ex: 5000000"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"objet_financement",children:"Objet du financement *"}),n.jsx(De,{id:"objet_financement",value:g.objet_financement,onChange:P=>y(C=>({...C,objet_financement:P.target.value})),placeholder:"Ex: Achat terrain, construction maison, etc."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"revenus_mensuels",children:"Revenus mensuels (FCFA)"}),n.jsx(De,{id:"revenus_mensuels",type:"number",value:g.revenus_mensuels,onChange:P=>y(C=>({...C,revenus_mensuels:P.target.value})),placeholder:"Ex: 200000"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"apport_personnel",children:"Apport personnel (FCFA)"}),n.jsx(De,{id:"apport_personnel",type:"number",value:g.apport_personnel,onChange:P=>y(C=>({...C,apport_personnel:P.target.value})),placeholder:"Ex: 1000000"})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"situation_professionnelle",children:"Situation professionnelle"}),n.jsx(De,{id:"situation_professionnelle",value:g.situation_professionnelle,onChange:P=>y(C=>({...C,situation_professionnelle:P.target.value})),placeholder:"Ex: Fonctionnaire, Commerant, etc."})]})]});break;default:return null}};return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto px-4 py-8 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(Cr,{className:"h-8 w-8"}),"Crer une Demande"]}),n.jsx("p",{className:"text-muted-foreground",children:"Soumettez votre demande de terrain communal ou de financement"})]}),n.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[1,2,3].map(P=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`
              flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium
              ${a>=P?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
            `,children:P}),P<3&&n.jsx("div",{className:`
                w-12 h-1 mx-2
                ${a>P?"bg-primary":"bg-muted"}
              `})]},P))}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{children:[a===1&&"Type de demande",a===2&&"Informations gnrales",a===3&&"Dtails spcifiques"]}),n.jsxs(jt,{children:[a===1&&"Slectionnez le type de demande que vous souhaitez faire",a===2&&"Renseignez les informations de base de votre demande",a===3&&"Compltez les informations spcifiques  votre demande"]})]}),n.jsx(ve,{children:S()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(Y,{variant:"outline",onClick:()=>o(P=>Math.max(1,P-1)),disabled:a===1,children:"Prcdent"}),a<3?n.jsx(Y,{onClick:()=>o(P=>P+1),disabled:a===1&&!g.type,children:"Suivant"}):n.jsx(Y,{onClick:A,disabled:s,children:s?"Cration...":"Crer la demande"})]})]})},qje=x.createContext({flags:{},loading:!0});function Vje({children:e}){const[t,r]=x.useState({}),[s,i]=x.useState(!0),a=async()=>{try{const{data:o,error:l}=await pe.from("feature_flags").select("key, enabled");if(!l&&o){const c={};o.forEach(u=>{c[u.key]=u.enabled}),r(c)}}finally{i(!1)}};return x.useEffect(()=>{a()},[]),n.jsx(qje.Provider,{value:{flags:t,loading:s,refresh:a},children:e})}var Uje="Separator",AM="horizontal",Hje=["horizontal","vertical"],nG=x.forwardRef((e,t)=>{const{decorative:r,orientation:s=AM,...i}=e,a=Wje(s)?s:AM,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return n.jsx(_t.div,{"data-orientation":a,...l,...i,ref:t})});nG.displayName=Uje;function Wje(e){return Hje.includes(e)}var sG=nG;const nT=we.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},i)=>n.jsx(sG,{ref:i,decorative:r,orientation:t,className:st("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));nT.displayName=sG.displayName;const Gje=sx("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Bu=x.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:st(Gje({variant:t}),e),...r}));Bu.displayName="Alert";const Kje=x.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:st("mb-1 font-medium leading-none tracking-tight",e),...t}));Kje.displayName="AlertTitle";const qu=x.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:st("text-sm [&_p]:leading-relaxed",e),...t}));qu.displayName="AlertDescription";const Zje=()=>{const[e,t]=x.useState(null),[r,s]=x.useState(null),[i,a]=x.useState(null),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(""),[m,p]=x.useState(1),{user:v,profile:g,refreshUser:y}=ar(),{toast:j}=pt(),_=kn(),w=x.useRef(null),A=x.useRef(null),S=(M,z)=>{const O=M.target.files[0];if(!O)return;if(O.size>5*1024*1024){j({variant:"destructive",title:"Fichier trop volumineux",description:"Veuillez choisir un fichier de moins de 5 MB."});return}if(!O.type.startsWith("image/")){j({variant:"destructive",title:"Type de fichier invalide",description:"Veuillez choisir une image (JPG, PNG, WebP)."});return}const I=new FileReader;I.onload=q=>{z==="front"?(t(O),a(q.target.result)):(s(O),l(q.target.result))},I.readAsDataURL(O)},P=M=>{M==="front"?(t(null),a(null),w.current&&(w.current.value="")):(s(null),l(null),A.current&&(A.current.value=""))},C=async(M,z)=>{var G,K;const O=M.name.split(".").pop(),I=`${v.id}/${z}-${Date.now()}.${O}`,q="identity-documents",{data:F,error:W}=await pe.storage.from(q).list(v.id,{limit:1});if(W&&((G=W.message)!=null&&G.toLowerCase().includes("not found")))throw new Error("Le bucket 'identity-documents' n'existe pas dans Supabase. Crez-le dans Storage (public ou priv) puis ressayez.");const{error:V}=await pe.storage.from(q).upload(I,M,{upsert:!1});if(V)throw(K=V.message)!=null&&K.toLowerCase().includes("bucket")?new Error("Erreur bucket: vrifiez le nom 'identity-documents' et les policies (INSERT pour authenticated)."):V;const{data:ne}=pe.storage.from(q).getPublicUrl(I);return ne.publicUrl},T=async M=>{M.preventDefault(),u(!0),h("");try{if(!e||!r)throw new Error("Veuillez fournir les deux cts de votre carte d'identit.");p(2);const z=await C(e,"front"),O=await C(r,"back"),{error:I}=await pe.from("users").update({id_card_front_url:z,id_card_back_url:O,verification_status:"pending",verification_submitted_at:new Date().toISOString()}).eq("id",v.id);if(I)throw I;await y(),p(3),j({title:"Documents envoys !",description:"Votre demande est en attente de vrification."}),setTimeout(()=>{_("/dashboard")},3e3)}catch(z){h(z.message||"Une erreur est survenue lors de l'envoi des documents."),j({variant:"destructive",title:"Erreur",description:z.message}),p(1)}finally{u(!1)}};return v?(g==null?void 0:g.verification_status)==="verified"?n.jsxs(n.Fragment,{children:[n.jsx(Uo,{children:n.jsx("title",{children:"Vrification Complte - Teranga Foncier"})}),n.jsx(Ae.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center min-h-screen px-4",children:n.jsxs(he,{className:"w-full max-w-md",children:[n.jsxs(Ce,{className:"text-center",children:[n.jsxs(ke,{className:"flex items-center justify-center gap-2",children:[n.jsx(Qt,{className:"h-6 w-6 text-green-500"}),"Vrification Complte"]}),n.jsx(jt,{children:"Votre compte est dj vrifi et oprationnel."})]}),n.jsxs(ve,{className:"text-center space-y-4",children:[n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[n.jsx(Qt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),n.jsx("p",{className:"text-green-700 font-medium",children:"Statut: Vrifi"}),n.jsx("p",{className:"text-sm text-green-600 mt-2",children:"Vous avez accs  toutes les fonctionnalits de la plateforme."})]}),n.jsx(Y,{onClick:()=>_("/dashboard"),className:"w-full",children:"Aller au tableau de bord"})]})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Uo,{children:n.jsx("title",{children:"Vrification d'Identit - Teranga Foncier"})}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-center min-h-screen px-4 py-12 bg-gradient-to-br from-green-50 to-emerald-50",children:n.jsxs("div",{className:"w-full max-w-2xl space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[n.jsxs("div",{className:`flex items-center ${m>=1?"text-primary":"text-muted-foreground"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${m>=1?"bg-primary text-white":"bg-muted text-muted-foreground"}`,children:"1"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Documents"})]}),n.jsx("div",{className:`w-16 h-1 ${m>=2?"bg-primary":"bg-muted"}`}),n.jsxs("div",{className:`flex items-center ${m>=2?"text-primary":"text-muted-foreground"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${m>=2?"bg-primary text-white":"bg-muted text-muted-foreground"}`,children:"2"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Envoi"})]}),n.jsx("div",{className:`w-16 h-1 ${m>=3?"bg-primary":"bg-muted"}`}),n.jsxs("div",{className:`flex items-center ${m>=3?"text-primary":"text-muted-foreground"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${m>=3?"bg-primary text-white":"bg-muted text-muted-foreground"}`,children:"3"}),n.jsx("span",{className:"ml-2 text-sm font-medium",children:"Confirmation"})]})]}),m===1&&n.jsxs(he,{className:"shadow-xl",children:[n.jsxs(Ce,{className:"text-center",children:[n.jsxs(ke,{className:"flex items-center justify-center gap-2",children:[n.jsx(ns,{className:"h-6 w-6"}),"Vrification d'Identit"]}),n.jsx(jt,{children:"Pour scuriser votre compte et accder  toutes les fonctionnalits, veuillez soumettre une photo recto-verso de votre carte d'identit."})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:T,className:"space-y-6",children:[n.jsxs(Bu,{children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsxs(qu,{children:[n.jsx("strong",{children:"Instructions importantes :"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm",children:[n.jsx("li",{children:"Utilisez un clairage optimal et vitez les reflets"}),n.jsx("li",{children:"Assurez-vous que tous les textes sont lisibles"}),n.jsx("li",{children:"Formats accepts : JPG, PNG, WebP (max 5 MB)"}),n.jsx("li",{children:"Les informations doivent correspondre  votre profil"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx($e,{htmlFor:"front",className:"text-base font-medium",children:"Recto de la carte d'identit *"}),n.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center hover:border-primary/50 transition-colors",children:[i?n.jsxs("div",{className:"space-y-4",children:[n.jsx("img",{src:i,alt:"Aperu recto",className:"max-w-full h-48 object-contain mx-auto rounded-lg border"}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(Y,{type:"button",variant:"outline",size:"sm",onClick:()=>{var M;return(M=w.current)==null?void 0:M.click()},children:[n.jsx(Ep,{className:"w-4 h-4 mr-2"}),"Changer"]}),n.jsx(Y,{type:"button",variant:"outline",size:"sm",onClick:()=>P("front"),children:"Supprimer"})]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx(Su,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("div",{children:n.jsxs(Y,{type:"button",variant:"outline",onClick:()=>{var M;return(M=w.current)==null?void 0:M.click()},children:[n.jsx(Ep,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Photographiez le recto de votre carte d'identit"})]}),n.jsx(De,{ref:w,id:"front",type:"file",accept:"image/*",onChange:M=>S(M,"front"),disabled:c,className:"hidden"})]})]}),n.jsx(nT,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx($e,{htmlFor:"back",className:"text-base font-medium",children:"Verso de la carte d'identit *"}),n.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center hover:border-primary/50 transition-colors",children:[o?n.jsxs("div",{className:"space-y-4",children:[n.jsx("img",{src:o,alt:"Aperu verso",className:"max-w-full h-48 object-contain mx-auto rounded-lg border"}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(Y,{type:"button",variant:"outline",size:"sm",onClick:()=>{var M;return(M=A.current)==null?void 0:M.click()},children:[n.jsx(Ep,{className:"w-4 h-4 mr-2"}),"Changer"]}),n.jsx(Y,{type:"button",variant:"outline",size:"sm",onClick:()=>P("back"),children:"Supprimer"})]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx(Su,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("div",{children:n.jsxs(Y,{type:"button",variant:"outline",onClick:()=>{var M;return(M=A.current)==null?void 0:M.click()},children:[n.jsx(Ep,{className:"w-4 h-4 mr-2"}),"Choisir une photo"]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Photographiez le verso de votre carte d'identit"})]}),n.jsx(De,{ref:A,id:"back",type:"file",accept:"image/*",onChange:M=>S(M,"back"),disabled:c,className:"hidden"})]})]}),d&&n.jsxs(Bu,{className:"border-red-200 bg-red-50",children:[n.jsx(ds,{className:"h-4 w-4 text-red-500"}),n.jsx(qu,{className:"text-red-700",children:d})]}),n.jsx(Y,{type:"submit",className:"w-full",disabled:c||!e||!r,children:c?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Envoi en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Su,{className:"mr-2 h-4 w-4"}),"Envoyer les documents"]})})]})})]}),m===2&&n.jsx(he,{className:"shadow-xl",children:n.jsxs(ve,{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-6"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Envoi en cours..."}),n.jsx("p",{className:"text-muted-foreground",children:"Vos documents sont en cours d'envoi scuris. Veuillez patienter."})]})}),m===3&&n.jsx(he,{className:"shadow-xl",children:n.jsxs(ve,{className:"text-center py-12",children:[n.jsx(Qt,{className:"h-16 w-16 text-green-500 mx-auto mb-6"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Documents envoys avec succs !"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Votre demande de vrification a t soumise. Notre quipe examinera vos documents dans les plus brefs dlais."}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-700",children:[n.jsx(ln,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"En attente de vrification"})]}),n.jsx("p",{className:"text-sm text-yellow-600 mt-2",children:"Dlai habituel : 24-48 heures ouvres"})]}),n.jsx(Y,{onClick:()=>_("/dashboard"),className:"w-full",children:"Accder au tableau de bord"})]})}),(g==null?void 0:g.verification_status)&&n.jsx(he,{children:n.jsx(ve,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium",children:"Statut actuel :"}),n.jsxs(Ge,{variant:g.verification_status==="verified"?"default":g.verification_status==="pending"?"secondary":"destructive",children:[g.verification_status==="verified"&&"Vrifi",g.verification_status==="pending"&&"En attente",g.verification_status==="rejected"&&"Rejet",!["verified","pending","rejected"].includes(g.verification_status)&&"Non vrifi"]})]})})})]})})]}):n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})},Xje=()=>{var S;const{user:e,updateUser:t}=ar(),r=kn(),[s,i]=x.useState(!1),[a,o]=x.useState(""),[l,c]=x.useState(!1),[u,d]=x.useState({recto:null,verso:null}),[h,m]=x.useState({recto:null,verso:null}),p=x.useRef(null),v=x.useRef(null),g=P=>{if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(P.type))throw new Error("Type de fichier non autoris. Utilisez JPG, PNG ou PDF.");if(P.size>5242880)throw new Error("Fichier trop volumineux. Maximum 5MB.");return!0},y=(P,C)=>{try{if(g(C),d(T=>({...T,[P]:C})),C.type.startsWith("image/")){const T=new FileReader;T.onload=M=>{m(z=>({...z,[P]:M.target.result}))},T.readAsDataURL(C)}else m(T=>({...T,[P]:null}));o("")}catch(T){o(T.message)}},j=P=>{d(C=>({...C,[P]:null})),m(C=>({...C,[P]:null})),P==="recto"&&p.current&&(p.current.value=""),P==="verso"&&v.current&&(v.current.value="")},_=async(P,C)=>{const T=P.name.split(".").pop(),M=`${e.id}/${C}_${Date.now()}.${T}`,{data:z,error:O}=await pe.storage.from("identity-documents").upload(M,P);if(O)throw O;return z.path},w=async P=>{if(P.preventDefault(),!u.recto||!u.verso){o("Veuillez tlcharger les deux faces de votre carte d'identit.");return}i(!0),o("");try{const C=await _(u.recto,"recto"),T=await _(u.verso,"verso"),{error:M}=await pe.from("users").update({identity_verification_status:"pending",identity_document_recto:C,identity_document_verso:T,identity_verification_submitted_at:new Date().toISOString()}).eq("id",e.id);if(M)throw M;await t(),c(!0),setTimeout(()=>{r("/dashboard")},3e3)}catch(C){console.error("Erreur lors de la soumission:",C),o(C.message||"Une erreur est survenue lors de la soumission.")}finally{i(!1)}},A=async()=>{if(window.confirm("tes-vous sr de vouloir passer cette tape ? Vous devrez la complter plus tard."))try{const{error:P}=await pe.from("users").update({identity_verification_status:"skipped"}).eq("id",e.id);if(P)throw P;await t(),r("/dashboard")}catch{o("Erreur lors de la mise  jour du statut.")}};return l?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:n.jsx(he,{className:"w-full max-w-md",children:n.jsxs(ve,{className:"p-6 text-center",children:[n.jsx(Qt,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Documents soumis avec succs !"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Vos documents d'identit ont t soumis pour vrification. Vous recevrez une notification une fois la vrification termine."}),n.jsx(Ge,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Vrification en cours"}),n.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Redirection automatique dans quelques secondes..."})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Cr,{className:"h-6 w-6"}),"Vrification d'identit"]}),n.jsxs("p",{className:"text-gray-600",children:["Pour accder  votre espace ",(S=e==null?void 0:e.type)==null?void 0:S.toLowerCase(),", veuillez tlcharger les deux faces de votre carte d'identit."]})]}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a&&n.jsxs(Bu,{variant:"destructive",children:[n.jsx(ds,{className:"h-4 w-4"}),n.jsx(qu,{children:a})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Face avant (recto) de votre carte d'identit *"}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 transition-colors",children:[u.recto?n.jsxs("div",{className:"space-y-3",children:[h.recto&&n.jsx("div",{className:"relative",children:n.jsx("img",{src:h.recto,alt:"Aperu recto",className:"max-w-full h-32 object-contain mx-auto rounded"})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600 truncate",children:u.recto.name}),n.jsx(Y,{type:"button",variant:"outline",size:"sm",onClick:()=>j("recto"),children:n.jsx(Ii,{className:"h-4 w-4"})})]})]}):n.jsxs("div",{className:"text-center",children:[n.jsx(Ep,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Y,{type:"button",variant:"outline",onClick:()=>{var P;return(P=p.current)==null?void 0:P.click()},children:[n.jsx(Su,{className:"h-4 w-4 mr-2"}),"Choisir un fichier"]}),n.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG ou PDF - Max 5MB"})]})]}),n.jsx("input",{ref:p,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:P=>P.target.files[0]&&y("recto",P.target.files[0]),className:"hidden"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Face arrire (verso) de votre carte d'identit *"}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-blue-400 transition-colors",children:[u.verso?n.jsxs("div",{className:"space-y-3",children:[h.verso&&n.jsx("div",{className:"relative",children:n.jsx("img",{src:h.verso,alt:"Aperu verso",className:"max-w-full h-32 object-contain mx-auto rounded"})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600 truncate",children:u.verso.name}),n.jsx(Y,{type:"button",variant:"outline",size:"sm",onClick:()=>j("verso"),children:n.jsx(Ii,{className:"h-4 w-4"})})]})]}):n.jsxs("div",{className:"text-center",children:[n.jsx(Ep,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Y,{type:"button",variant:"outline",onClick:()=>{var P;return(P=v.current)==null?void 0:P.click()},children:[n.jsx(Su,{className:"h-4 w-4 mr-2"}),"Choisir un fichier"]}),n.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG ou PDF - Max 5MB"})]})]}),n.jsx("input",{ref:v,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:P=>P.target.files[0]&&y("verso",P.target.files[0]),className:"hidden"})]})]}),n.jsxs(Bu,{children:[n.jsx(ds,{className:"h-4 w-4"}),n.jsxs(qu,{children:[n.jsx("strong",{children:"Informations importantes :"}),n.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-sm",children:[n.jsx("li",{children:"Assurez-vous que les photos sont nettes et lisibles"}),n.jsx("li",{children:"Toutes les informations doivent tre visibles"}),n.jsx("li",{children:"La vrification peut prendre 24-48h ouvres"}),n.jsx("li",{children:"Vos documents sont scuriss et crypts"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(Y,{type:"submit",disabled:s||!u.recto||!u.verso,className:"flex-1",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Soumission en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Soumettre pour vrification"]})}),n.jsx(Y,{type:"button",variant:"outline",onClick:A,disabled:s,children:"Passer cette tape"})]})]})})]})})})};class Yje{constructor(){this.riskThresholds={low:.3,medium:.6,high:.8,critical:.9}}async analyzeDocumentFraud(t,r,s){const i=[];let a=0;try{const{data:o}=await pe.from("document_fraud_history").select("*").eq("parcel_id",r),l=this.detectTemporalInconsistencies(t);l.length>0&&(i.push({type:"temporal_inconsistency",severity:"high",details:l,message:"Incohrences temporelles dtectes dans les documents"}),a+=.3);const c=await this.analyzeSignatures(t);c.suspicious&&(i.push({type:"suspicious_signature",severity:"critical",details:c,message:"Signatures potentiellement falsifies dtectes"}),a+=.4);const u=await this.checkDocumentDuplicates(t);u.hasDuplicates&&(i.push({type:"document_duplication",severity:"high",details:u,message:"Documents identiques utiliss pour plusieurs parcelles"}),a+=.35);const d=this.analyzeFileMetadata(t);return d.suspicious&&(i.push({type:"metadata_manipulation",severity:"medium",details:d,message:"Mtadonnes de fichiers suspectes"}),a+=.2),await this.logFraudAnalysis("DOCUMENT_ANALYSIS",{parcelId:r,userId:s,riskScore:a,indicators:i.length,fraudTypes:i.map(h=>h.type)}),{riskScore:Math.min(a,1),riskLevel:this.getRiskLevel(a),fraudIndicators:i,recommendations:this.generateRecommendations(i),requiresManualReview:a>this.riskThresholds.medium}}catch(o){throw console.error("Erreur analyse anti-fraude:",o),o}}async analyzeTransactionFraud(t,r){const s=[];let i=0;try{const a=await this.analyzeSuspiciousPricing(t);a.suspicious&&(s.push({type:"suspicious_pricing",severity:"high",details:a,message:`Prix ${a.deviation>0?"anormalement lev":"anormalement bas"} pour cette zone`}),i+=.3);const o=await this.detectMultipleSales(t.parcel_id);multipleSales.detected&&(s.push({type:"multiple_sales",severity:"critical",details:multipleSales,message:"Tentative de vente multiple de la mme parcelle dtecte"}),i+=.5);const l=await this.analyzeParticipants(r);l.suspicious&&(s.push({type:"suspicious_participants",severity:"medium",details:l,message:"Participants avec historique suspect"}),i+=.25);const c=await this.detectCircularTransactions(r);c.detected&&(s.push({type:"circular_transactions",severity:"high",details:c,message:"Pattern de transactions circulaires dtect"}),i+=.35);const u=this.analyzeTransactionSpeed(t);return u.suspicious&&(s.push({type:"unusual_speed",severity:"medium",details:u,message:"Transaction anormalement rapide"}),i+=.2),{riskScore:Math.min(i,1),riskLevel:this.getRiskLevel(i),fraudIndicators:s,recommendations:this.generateRecommendations(s),requiresManualReview:i>this.riskThresholds.medium,shouldBlock:i>this.riskThresholds.high}}catch(a){throw console.error("Erreur analyse transaction:",a),a}}async analyzeUserFraud(t,r){const s=[];let i=0;try{const a=await this.detectMultipleProfiles(t);a.detected&&(s.push({type:"multiple_profiles",severity:"high",details:a,message:"Utilisateur avec plusieurs profils suspects"}),i+=.4);const o=this.analyzeAbnormalActivity(r);o.suspicious&&(s.push({type:"abnormal_activity",severity:"medium",details:o,message:"Pattern d'activit anormal dtect"}),i+=.25);const l=await this.checkUserConsistency(t);l.hasInconsistencies&&(s.push({type:"inconsistent_information",severity:"medium",details:l,message:"Informations utilisateur incohrentes"}),i+=.2);const c=this.detectBotBehavior(r);return c.isBot&&(s.push({type:"bot_behavior",severity:"high",details:c,message:"Comportement automatis suspect dtect"}),i+=.35),{riskScore:Math.min(i,1),riskLevel:this.getRiskLevel(i),fraudIndicators:s,recommendations:this.generateUserRecommendations(s),requiresVerification:i>this.riskThresholds.low,shouldSuspend:i>this.riskThresholds.high}}catch(a){throw console.error("Erreur analyse utilisateur:",a),a}}async analyzeParcelFraud(t,r){const s=[];let i=0;try{const a=await this.detectOwnershipConflicts(t);a.hasConflicts&&(s.push({type:"ownership_conflict",severity:"critical",details:a,message:"Conflits de proprit dtects"}),i+=.5);const o=this.analyzeTransferHistory(r);o.suspicious&&(s.push({type:"suspicious_transfers",severity:"high",details:o,message:"Historique de transferts suspect"}),i+=.3);const l=await this.verifyParcelBoundaries(t);l.hasIssues&&(s.push({type:"boundary_issues",severity:"medium",details:l,message:"Incohrences dans les limites de la parcelle"}),i+=.25);const c=await this.detectGhostParcel(t);return c.isGhost&&(s.push({type:"ghost_parcel",severity:"critical",details:c,message:"Parcelle potentiellement inexistante"}),i+=.6),{riskScore:Math.min(i,1),riskLevel:this.getRiskLevel(i),fraudIndicators:s,recommendations:this.generateParcelRecommendations(s),requiresFieldVerification:i>this.riskThresholds.medium,shouldQuarantine:i>this.riskThresholds.high}}catch(a){throw console.error("Erreur analyse parcelle:",a),a}}async analyzeNetworkFraud(t,r){try{const s=await this.buildNetworkGraph(t,r),i=this.detectSuspiciousClusters(s),a=this.analyzeNetworkPatterns(s);return{networkSize:s.nodes.length,suspiciousClusters:i,networkPatterns:a,riskEntities:this.identifyRiskEntities(s),recommendations:this.generateNetworkRecommendations(i,a)}}catch(s){throw console.error("Erreur analyse rseau:",s),s}}detectTemporalInconsistencies(t){const r=[];return t.forEach((s,i)=>{if(s.created_date&&s.signature_date){const a=new Date(s.created_date),o=new Date(s.signature_date);o<a&&r.push({document:s.name,issue:"signature_before_creation",createdDate:a,signedDate:o})}}),r}async analyzeSignatures(t){const r=t.filter(a=>a.signatures);let s=0;const i=[];return r.forEach(a=>{a.signatures.forEach(o=>{o.variations>.3&&(s++,i.push({document:a.name,signer:o.signer_name,issue:"high_variation",confidence:o.variations}))})}),{suspicious:s>0,suspiciousCount:s,issues:i,confidence:s/Math.max(r.length,1)}}async analyzeSuspiciousPricing(t){try{const{data:r}=await pe.from("market_predictions").select("predicted_price_per_sqm, confidence_score").eq("location",t.location).order("created_at",{ascending:!1}).limit(1);if(!r||r.length===0)return{suspicious:!1,reason:"no_market_data"};const s=r[0].predicted_price_per_sqm,i=t.price/t.area_sqm,a=(i-s)/s;return{suspicious:Math.abs(a)>.5||a<-.3,deviation:a,marketPrice:s,transactionPrice:i,confidence:r[0].confidence_score,reason:a>.5?"overpriced":a<-.3?"underpriced":"normal"}}catch(r){return console.error("Erreur analyse prix:",r),{suspicious:!1,reason:"analysis_error"}}}getRiskLevel(t){return t>=this.riskThresholds.critical?"critical":t>=this.riskThresholds.high?"high":t>=this.riskThresholds.medium?"medium":t>=this.riskThresholds.low?"low":"minimal"}generateRecommendations(t){const r=[];return t.forEach(s=>{switch(s.type){case"suspicious_signature":r.push("Demander une vrification d'identit en personne"),r.push("Exiger des documents d'identit supplmentaires");break;case"multiple_sales":r.push("Bloquer immdiatement toutes les transactions lies"),r.push("Alerter les autorits comptentes");break;case"ownership_conflict":r.push("Suspendre la transaction jusqu' rsolution du conflit"),r.push("Demander une enqute cadastrale officielle");break;case"suspicious_pricing":r.push("Demander une valuation indpendante de la parcelle"),r.push("Vrifier les motivations de la transaction");break;default:r.push("Effectuer une vrification manuelle approfondie")}}),[...new Set(r)]}async logFraudAnalysis(t,r){try{await pe.from("fraud_analysis_log").insert({analysis_type:t,details:r,timestamp:new Date().toISOString(),ai_version:"1.0.0"})}catch(s){console.error("Erreur logging fraude:",s)}}async detectMultipleSales(t){const{data:r}=await pe.from("transactions").select("*").eq("parcel_id",t).eq("status","En cours");return{detected:r&&r.length>1,count:r?r.length:0,transactions:r||[]}}async detectMultipleProfiles(t){return{detected:!1,profiles:[]}}analyzeAbnormalActivity(t){return{suspicious:!1,patterns:[]}}detectBotBehavior(t){return{isBot:!1,indicators:[]}}async detectOwnershipConflicts(t){return{hasConflicts:!1,conflicts:[]}}analyzeTransferHistory(t){return{suspicious:!1,issues:[]}}}const $f=new Yje,V0=({userRole:e,dashboardContext:t})=>{const{toast:r}=pt(),[s,i]=x.useState([]),[a,o]=x.useState(!0),[l,c]=x.useState(null),[u,d]=x.useState(!1);x.useState(!1);const[h,m]=x.useState({totalAlerts:0,criticalAlerts:0,resolved:0,prevented:0});x.useEffect(()=>{p();const A=setInterval(p,3e4);return()=>clearInterval(A)},[e]);const p=async()=>{o(!0);try{const{data:A,error:S}=await pe.from("fraud_alerts").select(`
          *,
          parcels(reference, location),
          profiles(full_name, email)
        `).or(v()).eq("status","active").order("risk_score",{ascending:!1}).limit(20);if(S)throw S;i(A||[]),g(A||[])}catch(A){console.error("Erreur chargement alertes:",A)}finally{o(!1)}},v=()=>{switch(e){case"admin":return"alert_type.in.(document_fraud,transaction_fraud,user_fraud,parcel_fraud,network_fraud)";case"notaire":return"alert_type.in.(document_fraud,signature_fraud)";case"agent":return"alert_type.in.(transaction_fraud,user_fraud)";case"banque":return"alert_type.in.(transaction_fraud,user_fraud)";case"mairie":return"alert_type.in.(parcel_fraud,document_fraud)";default:return"alert_type.eq.user_fraud"}},g=A=>{const S=A.length,P=A.filter(M=>M.risk_level==="critical").length,C=A.filter(M=>M.status==="resolved").length,T=A.filter(M=>M.action_taken==="blocked").length;m({totalAlerts:S,criticalAlerts:P,resolved:C,prevented:T})},y=async(A,S)=>{try{let P={updated_at:new Date().toISOString()};switch(S){case"investigate":P.status="investigating",P.assigned_to=t.userId;break;case"resolve":P.status="resolved",P.resolved_at=new Date().toISOString();break;case"escalate":P.status="escalated",P.escalated_to="admin";break;case"dismiss":P.status="dismissed",P.dismissed_at=new Date().toISOString();break}const{error:C}=await pe.from("fraud_alerts").update(P).eq("id",A);if(C)throw C;await p(),r({title:"Action excute",description:`Alerte ${S==="resolve"?"rsolue":S==="escalate"?"escalade":"mise  jour"}`})}catch(P){console.error("Erreur action alerte:",P),r({variant:"destructive",title:"Erreur",description:"Impossible d'excuter l'action"})}},j=A=>{switch(A){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=A=>{switch(A){case"document_fraud":return die;case"transaction_fraud":return Cz;case"user_fraud":return bs;case"parcel_fraud":return jr;case"network_fraud":return Ru;default:return kr}},w=A=>{switch(A){case"document_fraud":return"Fraude Documentaire";case"transaction_fraud":return"Transaction Suspecte";case"user_fraud":return"Utilisateur Suspect";case"parcel_fraud":return"Parcelle Frauduleuse";case"network_fraud":return"Rseau de Fraude";default:return"Alerte de Scurit"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(he,{className:"border-l-4 border-red-500",children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Alertes Actives"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:h.totalAlerts})]}),n.jsx(ns,{className:"h-8 w-8 text-red-500"})]})})}),n.jsx(he,{className:"border-l-4 border-orange-500",children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Critiques"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:h.criticalAlerts})]}),n.jsx(kr,{className:"h-8 w-8 text-orange-500"})]})})}),n.jsx(he,{className:"border-l-4 border-green-500",children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rsolues"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.resolved})]}),n.jsx(Qt,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{className:"border-l-4 border-blue-500",children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Prvenus"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.prevented})]}),n.jsx(Wne,{className:"h-8 w-8 text-blue-500"})]})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(ns,{className:"h-5 w-5 text-red-500"}),"Alertes Anti-Fraude Prioritaires"]})}),n.jsx(ve,{children:a?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):s.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ns,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucune alerte de fraude active"}),n.jsx("p",{className:"text-sm text-green-600",children:"Votre plateforme est scurise"})]}):n.jsx("div",{className:"space-y-4",children:n.jsx(zu,{children:s.slice(0,5).map(A=>{const S=_(A.alert_type);return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-full ${j(A.risk_level)}`,children:n.jsx(S,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-semibold",children:w(A.alert_type)}),n.jsx(Ge,{className:j(A.risk_level),children:A.risk_level.toUpperCase()})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:A.description||"Activit suspecte dtecte par l'IA"}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(ln,{className:"h-3 w-3"}),new Date(A.created_at).toLocaleString("fr-FR")]}),n.jsxs("span",{children:["Score: ",Math.round(A.risk_score*100),"%"]}),A.target_reference&&n.jsxs("span",{children:["Rf: ",A.target_reference]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>{c(A),d(!0)},children:n.jsx(Hr,{className:"h-4 w-4"})}),e==="admin"&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{size:"sm",onClick:()=>y(A.id,"investigate"),children:"Enquter"}),n.jsx(Y,{size:"sm",variant:"destructive",onClick:()=>y(A.id,"escalate"),children:"Escalader"})]})]})]})},A.id)})})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Iu,{className:"h-5 w-5 text-blue-500"}),"Recommandations Anti-Fraude pour ",e.charAt(0).toUpperCase()+e.slice(1)]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-3",children:Jje(e).map((A,S)=>n.jsxs(Bu,{className:"border-blue-200",children:[n.jsx(Iu,{className:"h-4 w-4 text-blue-500"}),n.jsx(qu,{children:A})]},S))})})]}),n.jsx(on,{open:u,onOpenChange:d,children:n.jsxs(Qr,{className:"max-w-3xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Dtails de l'Alerte Anti-Fraude"}),n.jsx(Ur,{children:"Analyse complte de l'alerte de scurit"})]}),l&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Informations Gnrales"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{children:["Type: ",w(l.alert_type)]}),n.jsxs("div",{children:["Niveau de risque: ",l.risk_level]}),n.jsxs("div",{children:["Score: ",Math.round(l.risk_score*100),"%"]}),n.jsxs("div",{children:["Cre: ",new Date(l.created_at).toLocaleString("fr-FR")]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Cible de l'Alerte"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{children:["ID: ",l.target_id]}),n.jsxs("div",{children:["Rfrence: ",l.target_reference||"N/A"]}),n.jsxs("div",{children:["Statut: ",l.status]})]})]})]}),l.indicators&&l.indicators.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Indicateurs de Fraude"}),n.jsx("div",{className:"space-y-2",children:l.indicators.map((A,S)=>n.jsxs(Bu,{className:"border-orange-200",children:[n.jsx(kr,{className:"h-4 w-4 text-orange-500"}),n.jsxs(qu,{children:[n.jsxs("span",{className:"font-medium",children:[A.type,":"]})," ",A.message,A.severity&&n.jsx(Ge,{className:`ml-2 ${j(A.severity)}`,children:A.severity})]})]},S))})]}),l.recommendations&&l.recommendations.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Recommandations"}),n.jsx("div",{className:"space-y-1",children:l.recommendations.map((A,S)=>n.jsxs("div",{className:"text-sm flex items-center gap-2",children:[n.jsx(Qt,{className:"h-4 w-4 text-green-500"}),A]},S))})]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>d(!1),children:"Fermer"}),e==="admin"&&l&&n.jsxs(n.Fragment,{children:[n.jsxs(Y,{variant:"destructive",onClick:()=>{y(l.id,"dismiss"),d(!1)},children:[n.jsx(sa,{className:"h-4 w-4 mr-2"}),"Rejeter"]}),n.jsxs(Y,{onClick:()=>{y(l.id,"resolve"),d(!1)},children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Rsoudre"]})]})]})]})})]})},Jje=e=>({admin:["Surveillez les patterns de fraude en rseau - L'IA a dtect 3 groupes suspects ce mois","Activez la vrification en deux tapes pour tous les utilisateurs  haut risque","Planifiez des audits surprises des documents dans les zones  forte activit","Renforcez la surveillance des transactions suprieures  100M FCFA"],notaire:["Vrifiez systmatiquement les signatures avec l'analyseur IA avant authentification","Alertez immdiatement en cas de dtection de documents dupliqus","Documentez toutes les vrifications d'identit avec photos et empreintes","Utilisez la blockchain pour l'horodatage scuris des actes"],agent:["Vrifiez l'identit de vos clients avec l'outil de reconnaissance faciale","Signaler immdiatement les offres de prix anormalement leves ou basses","Utilisez le scoring IA pour valuer la crdibilit de vos prospects","Documentez tous les changes avec photos golocalises des parcelles"],banque:["Analysez les patterns de revenus avec l'IA avant approbation de crdit","Vrifiez la cohrence des garanties foncires avec les donnes cadastrales","Surveillez les demandes multiples du mme demandeur","Exigez des valuations indpendantes pour les biens de forte valeur"],mairie:["Vrifiez la cohrence des limites parcellaires avec l'IA gospatiale","Alertez en cas de demandes multiples sur la mme parcelle","Utilisez la reconnaissance d'images pour dtecter les faux documents","Croisez les donnes avec le cadastre national rgulirement"]})[e]||["Restez vigilant face aux activits suspectes","Signalez tout comportement anormal aux autorits","Vrifiez toujours l'authenticit des documents"],iG=we.forwardRef(({className:e,children:t,...r},s)=>n.jsx("div",{ref:s,className:st("relative overflow-auto",e),...r,children:t}));iG.displayName="ScrollArea";class Qje{constructor(){this.apiEndpoint={}.REACT_APP_AI_API_ENDPOINT||"https://api.openai.com/v1",this.apiKey={}.REACT_APP_OPENAI_API_KEY,this.model="gpt-4"}async processCommand(t,r={}){try{const s=await this.callAIAPI({model:this.model,messages:[{role:"system",content:`Tu es un assistant IA pour la plateforme Teranga Foncier. 
            Tu dois interprter les commandes en franais et retourner des actions structures.
            
            Contexte disponible: ${JSON.stringify(r)}
            
            Types d'actions possibles:
            - DELETE_USER: Supprimer un utilisateur
            - UPDATE_PARCEL: Modifier une parcelle
            - CREATE_TRANSACTION: Crer une transaction
            - SEARCH_DATA: Rechercher des donnes
            - GENERATE_REPORT: Gnrer un rapport
            - SEND_NOTIFICATION: Envoyer une notification
            - VALIDATE_DOCUMENT: Valider un document
            - PREDICT_PRICE: Prdire un prix
            - SCHEDULE_MEETING: Programmer un rendez-vous
            - ANALYZE_MARKET: Analyser le march
            
            Rponds UNIQUEMENT en JSON avec cette structure:
            {
              "action": "ACTION_TYPE",
              "parameters": {...},
              "confidence": 0.95,
              "explanation": "Explication de l'action"
            }`},{role:"user",content:t}],temperature:.1,max_tokens:500});return JSON.parse(s.choices[0].message.content)}catch(s){return console.error("Erreur IA:",s),{action:"ERROR",parameters:{},confidence:0,explanation:"Impossible de traiter la commande"}}}async executeAction(t,r){const{action:s,parameters:i}=t;try{switch(s){case"DELETE_USER":return await this.deleteUser(i,r);case"UPDATE_PARCEL":return await this.updateParcel(i,r);case"CREATE_TRANSACTION":return await this.createTransaction(i,r);case"SEARCH_DATA":return await this.searchData(i,r);case"GENERATE_REPORT":return await this.generateReport(i,r);case"SEND_NOTIFICATION":return await this.sendNotification(i,r);case"VALIDATE_DOCUMENT":return await this.validateDocument(i,r);case"PREDICT_PRICE":return await this.predictPrice(i,r);case"SCHEDULE_MEETING":return await this.scheduleMeeting(i,r);case"ANALYZE_MARKET":return await this.analyzeMarket(i,r);default:throw new Error(`Action non supporte: ${s}`)}}catch(a){throw console.error("Erreur excution action:",a),a}}async deleteUser(t,r){if(r!=="admin")throw new Error("Permission insuffisante pour supprimer un utilisateur");const{userId:s,email:i,name:a}=t;if(!s&&!i)throw new Error("ID utilisateur ou email requis");let o;if(s){const{data:c,error:u}=await pe.from("profiles").select("*").eq("id",s).single();if(u)throw u;o=c}else if(i){const{data:c,error:u}=await pe.from("profiles").select("*").eq("email",i).single();if(u)throw u;o=c}if(!o)throw new Error("Utilisateur non trouv");if(a&&!o.full_name.toLowerCase().includes(a.toLowerCase()))throw new Error("Le nom ne correspond pas  l'utilisateur trouv");const{error:l}=await pe.from("profiles").delete().eq("id",o.id);if(l)throw l;return await this.logAction("DELETE_USER",{deletedUser:o,executedBy:r}),{success:!0,message:`Utilisateur ${o.full_name} (${o.email}) supprim avec succs`,deletedUser:o}}async updateParcel(t,r){const{parcelId:s,updates:i}=t,{data:a,error:o}=await pe.from("parcels").update(i).eq("id",s).select().single();if(o)throw o;return await this.logAction("UPDATE_PARCEL",{parcelId:s,updates:i,executedBy:r}),{success:!0,message:"Parcelle mise  jour avec succs",updatedParcel:a}}async searchData(t,r){const{table:s,query:i,filters:a}=t;let o=pe.from(s).select("*");a&&Object.entries(a).forEach(([u,d])=>{o=o.eq(u,d)}),i&&(o=o.textSearch("full_text",i));const{data:l,error:c}=await o;if(c)throw c;return{success:!0,message:`${l.length} rsultat(s) trouv(s)`,results:l}}async generateReport(t,r){const{reportType:s,dateRange:i,filters:a}=t;let o;switch(s.toLowerCase()){case"transactions":o=await this.generateTransactionReport(i,a);break;case"utilisateurs":o=await this.generateUserReport(i,a);break;case"parcelles":o=await this.generateParcelReport(i,a);break;default:throw new Error(`Type de rapport non support: ${s}`)}return{success:!0,message:"Rapport gnr avec succs",report:o}}async predictPrice(t,r){const{parcelId:s,location:i,size:a,features:o}=t,{data:l}=await pe.from("transactions").select("*").eq("location",i).order("created_at",{ascending:!1}).limit(50),c=l.reduce((m,p)=>m+p.price/p.size,0)/l.length,u=c*a;let d=1;return o!=null&&o.includes("waterfront")&&(d+=.2),o!=null&&o.includes("roadaccess")&&(d+=.1),{success:!0,message:"Prdiction de prix calcule",prediction:{estimatedPrice:u*d,pricePerM2:c*d,confidence:.85,factors:o,basedOnTransactions:l.length}}}async analyzeMarket(t,r){const{location:s,period:i}=t,{data:a}=await pe.from("transactions").select("*").eq("location",s).gte("created_at",new Date(Date.now()-i*24*60*60*1e3).toISOString());return{success:!0,message:"Analyse de march complte",analysis:{totalTransactions:a.length,averagePrice:a.reduce((l,c)=>l+c.price,0)/a.length,priceRange:{min:Math.min(...a.map(l=>l.price)),max:Math.max(...a.map(l=>l.price))},trend:this.calculateTrend(a),recommendations:this.generateRecommendations(a)}}}async callAIAPI(t){const r=await fetch(`${this.apiEndpoint}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error(`Erreur API IA: ${r.statusText}`);return await r.json()}async logAction(t,r){await pe.from("ai_actions_log").insert({action:t,details:r,timestamp:new Date().toISOString()})}calculateTrend(t){if(t.length<2)return"insufficient_data";const r=t.sort((c,u)=>new Date(c.created_at)-new Date(u.created_at)),s=r.slice(0,Math.floor(r.length/2)),i=r.slice(Math.floor(r.length/2)),a=s.reduce((c,u)=>c+u.price,0)/s.length,l=(i.reduce((c,u)=>c+u.price,0)/i.length-a)/a*100;return l>5?"rising":l<-5?"falling":"stable"}generateRecommendations(t){const r=[],s=t.reduce((i,a)=>i+a.price,0)/t.length;return t.length<5&&r.push("March peu actif - surveiller les nouvelles opportunits"),s>1e8&&r.push("March haut de gamme - cibler les investisseurs premium"),r}async generateTransactionReport(t,r){let s=pe.from("transactions").select("*");t&&(s=s.gte("created_at",t.start).lte("created_at",t.end));const{data:i}=await s;return{totalTransactions:i.length,totalValue:i.reduce((a,o)=>a+o.price,0),averageValue:i.reduce((a,o)=>a+o.price,0)/i.length,byStatus:this.groupByField(i,"status"),byType:this.groupByField(i,"type")}}async generateUserReport(t,r){let s=pe.from("profiles").select("*");t&&(s=s.gte("created_at",t.start).lte("created_at",t.end));const{data:i}=await s;return{totalUsers:i.length,byRole:this.groupByField(i,"role"),byStatus:this.groupByField(i,"status"),activeUsers:i.filter(a=>a.last_sign_in_at>new Date(Date.now()-30*24*60*60*1e3)).length}}groupByField(t,r){return t.reduce((s,i)=>{const a=i[r]||"unknown";return s[a]=(s[a]||0)+1,s},{})}}const PM=new Qje,bx=({dashboardContext:e={},onAction:t})=>{const{toast:r}=pt(),{profile:s}=ar(),[i,a]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,h]=x.useState(!1),[m,p]=x.useState(!1),[v,g]=x.useState([]),[y,j]=x.useState([]),_=x.useRef(null),w=x.useRef(null),A={admin:["Supprimer l'utilisateur amadou.diallo@email.com","Gnrer un rapport des transactions du mois","Rechercher les parcelles en attente de validation","Analyser les tendances d'inscription des utilisateurs","Crer une notification pour tous les agents"],particulier:["Rechercher des parcelles  Almadies sous 50M FCFA","Prdire le prix d'une parcelle de 500m  Ngor","Programmer un rendez-vous avec un agent","Analyser l'volution des prix dans ma zone","Trouver des opportunits d'investissement"],agent:["Lister mes clients les plus actifs","Gnrer un rapport de mes ventes du trimestre","Programmer des relances pour les prospects","Analyser les performances de mes annonces","Rechercher des parcelles pour mon client"],vendeur:["valuer le prix de ma parcelle  Dakar","Gnrer une description attractive pour mon annonce","Analyser les vues de mes annonces","Programmer des visites avec les acheteurs","Optimiser le prix de vente"],notaire:["Vrifier la conformit du dossier DOS-001","Gnrer un acte de vente type","Rechercher l'historique d'une parcelle","Valider les documents de succession","Programmer une authentification"],banque:["valuer le risque de financement","Analyser la solvabilit du demandeur","Gnrer un rapport d'valuation foncire","Calculer les garanties ncessaires","Prdire les dfauts de paiement"],mairie:["Vrifier la conformit urbanistique","Gnrer un certificat d'urbanisme","Analyser les demandes de permis en attente","Mettre  jour le plan cadastral","Traiter les litiges fonciers"],promoteur:["Analyser la viabilit d'un projet","Calculer les cots de construction","Prdire les ventes futures","Optimiser le planning de construction","Gnrer un rapport de rentabilit"],investisseur:["Analyser le ROI d'un investissement","Rechercher les meilleures opportunits","Prdire l'volution des prix","valuer les risques du march","Optimiser mon portefeuille foncier"],agriculteur:["Analyser la qualit du sol","Optimiser l'utilisation de mes terres","Prdire les rendements agricoles","Rechercher des financements","Planifier la rotation des cultures"]};x.useEffect(()=>{s!=null&&s.role&&j(A[s.role]||A.particulier)},[s]),x.useEffect(()=>{S()},[v]);const S=()=>{var O;(O=w.current)==null||O.scrollIntoView({behavior:"smooth"})},P=async()=>{if(!c.trim()||d)return;const O={id:Date.now(),type:"user",content:c,timestamp:new Date};g(I=>[...I,O]),u(""),h(!0);try{const I=await PM.processCommand(c,{userRole:s==null?void 0:s.role,dashboardContext:e,userId:s==null?void 0:s.id}),q={id:Date.now()+1,type:"ai",content:I.explanation,action:I,timestamp:new Date};if(g(F=>[...F,q]),I.confidence>.7&&I.action!=="ERROR")try{const F=await PM.executeAction(I,s==null?void 0:s.role),W={id:Date.now()+2,type:"success",content:F.message,data:F,timestamp:new Date};g(V=>[...V,W]),t&&t(I.action,F),r({title:"Action excute",description:F.message})}catch(F){const W={id:Date.now()+2,type:"error",content:F.message,timestamp:new Date};g(V=>[...V,W]),r({variant:"destructive",title:"Erreur d'excution",description:F.message})}else if(I.confidence<=.7){const F={id:Date.now()+2,type:"clarification",content:"Je ne suis pas sr de comprendre votre demande. Pouvez-vous la reformuler ?",timestamp:new Date};g(W=>[...W,F])}}catch(I){console.error("Erreur IA:",I);const q={id:Date.now()+1,type:"error",content:"Dsol, je ne peux pas traiter votre demande pour le moment.",timestamp:new Date};g(F=>[...F,q]),r({variant:"destructive",title:"Erreur",description:"L'assistant IA n'est pas disponible"})}finally{h(!1)}},C=O=>{u(O),_.current&&_.current.focus()},T=()=>{if("speechRecognition"in window||"webkitSpeechRecognition"in window){const O=window.speechRecognition||window.webkitSpeechRecognition,I=new O;I.lang="fr-FR",I.onstart=()=>p(!0),I.onend=()=>p(!1),I.onresult=q=>{const F=q.results[0][0].transcript;u(F)},m?I.stop():I.start()}else r({variant:"destructive",title:"Non support",description:"La reconnaissance vocale n'est pas supporte par votre navigateur"})},M=O=>{switch(O){case"success":return Qt;case"error":return kr;case"clarification":return Iu;default:return wf}},z=O=>{switch(O){case"user":return"bg-blue-100 text-blue-800 border-blue-200";case"success":return"bg-green-100 text-green-800 border-green-200";case"error":return"bg-red-100 text-red-800 border-red-200";case"clarification":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return o?n.jsx(Ae.div,{initial:{scale:0},animate:{scale:1},className:"fixed bottom-4 right-4 z-50",children:n.jsx(Y,{onClick:()=>l(!1),size:"lg",className:"rounded-full h-14 w-14 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 shadow-lg",children:n.jsx(wf,{className:"h-6 w-6 text-white"})})}):n.jsxs(n.Fragment,{children:[n.jsx(Ae.div,{initial:{scale:0},animate:{scale:1},className:"fixed bottom-4 right-4 z-50",children:n.jsx(Y,{onClick:()=>a(!0),size:"lg",className:"rounded-full h-14 w-14 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 shadow-lg",children:n.jsx(wf,{className:"h-6 w-6 text-white"})})}),n.jsx(on,{open:i,onOpenChange:a,children:n.jsxs(Qr,{className:"max-w-2xl h-[600px] flex flex-col",children:[n.jsxs(qr,{children:[n.jsxs(Vr,{className:"flex items-center gap-2",children:[n.jsx(wf,{className:"h-5 w-5 text-blue-500"}),"Assistant IA Teranga",n.jsx(Ge,{variant:"secondary",children:(s==null?void 0:s.role)||"Utilisateur"})]}),n.jsx(Ur,{children:"Votre assistant intelligent pour la gestion foncire"})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[n.jsx(iG,{className:"flex-1 border rounded-lg p-4",children:n.jsxs("div",{className:"space-y-4",children:[v.length===0&&n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx(wf,{className:"h-12 w-12 mx-auto mb-2 text-blue-500"}),n.jsx("p",{children:"Bonjour ! Je suis votre assistant IA."}),n.jsx("p",{children:"Comment puis-je vous aider aujourd'hui ?"})]}),n.jsx(zu,{children:v.map(O=>{const I=M(O.type);return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex gap-3 ${O.type==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center ${z(O.type)}`,children:n.jsx(I,{className:"h-4 w-4"})}),n.jsxs("div",{className:`flex-1 rounded-lg p-3 ${z(O.type)}`,children:[n.jsx("p",{className:"text-sm",children:O.content}),O.action&&n.jsxs("div",{className:"mt-2 text-xs opacity-75",children:["Action: ",O.action.action," (Confiance: ",Math.round(O.action.confidence*100),"%)"]}),n.jsx("div",{className:"text-xs opacity-75 mt-1",children:O.timestamp.toLocaleTimeString("fr-FR")})]})]},O.id)})}),d&&n.jsxs(Ae.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[n.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsx(yg,{className:"h-4 w-4 text-blue-500 animate-spin"})}),n.jsx("div",{className:"flex-1 bg-blue-100 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-blue-800",children:"Traitement en cours..."})})]}),n.jsx("div",{ref:w})]})}),y.length>0&&v.length===0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Suggestions pour vous :"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:y.slice(0,3).map((O,I)=>n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>C(O),className:"text-xs h-auto py-1 px-2",children:O},I))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(De,{ref:_,value:c,onChange:O=>u(O.target.value),onKeyPress:O=>O.key==="Enter"&&P(),placeholder:"Tapez votre commande ou question...",disabled:d,className:"pr-12"}),n.jsx(Y,{size:"sm",variant:"ghost",onClick:T,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",disabled:d,children:m?n.jsx(lae,{className:"h-4 w-4 text-red-500"}):n.jsx(uae,{className:"h-4 w-4"})})]}),n.jsx(Y,{onClick:P,disabled:!c.trim()||d,size:"sm",children:d?n.jsx(yg,{className:"h-4 w-4 animate-spin"}):n.jsx(Ol,{className:"h-4 w-4"})})]})]})]})})]})},CM=[{key:"titre_foncier",label:"Titre foncier (scan)"},{key:"plan_cadastral",label:"Plan cadastral"},{key:"certificat_situation",label:"Certificat de situation"}],ewe=({isOpen:e,onClose:t,owner:r,onSubmitted:s})=>{const{toast:i}=pt(),[a,o]=x.useState(1),[l,c]=x.useState(!1),[u,d]=x.useState({reference:"",location:"",type:"terrain",surface:"",price:"",description:""}),[h,m]=x.useState([]),[p,v]=x.useState({}),g=x.useRef(null),[y,j]=x.useState([]);x.useEffect(()=>(e&&a===2&&y.length>0&&(g.current&&clearTimeout(g.current),g.current=setTimeout(async()=>{try{const P="parcel-docs",C=[];for(const T of y){if(!T.path){C.push(T);continue}const{data:M,error:z}=await pe.storage.from(P).createSignedUrl(T.path,3600);C.push({...T,url:z?T.url:M.signedUrl})}j(C)}catch{}},45*60*1e3)),()=>{g.current&&clearTimeout(g.current)}),[e,a,y]);const _=(P,C)=>{m(T=>[...T.filter(z=>z.key!==P),{key:P,name:C.name,file:C}])},w=()=>{const P={};return u.reference.trim()||(P.reference="Rfrence requise"),u.location.trim()||(P.location="Localisation requise"),u.surface||(P.surface="Surface requise"),v(P),Object.keys(P).length===0},A=CM.every(P=>h.some(C=>C.key===P.key)),S=async()=>{var P;if(!A){i({variant:"destructive",title:"Documents requis",description:"Merci de fournir tous les documents obligatoires."});return}c(!0);try{const C="parcel-docs",T=[];for(const z of h){const O=z.file,I=O.name.split(".").pop(),q=(u.reference||"ref").replace(/[^a-zA-Z0-9_-]/g,"_"),F=`${(r==null?void 0:r.id)||"unknown"}/${q}/${z.key}-${Date.now()}.${I}`,{error:W}=await pe.storage.from(C).upload(F,O,{upsert:!1});if(W)throw new Error(`Upload chou (${z.key}): ${W.message}`);const{data:V,error:ne}=await pe.storage.from(C).createSignedUrl(F,3600);if(ne)throw new Error(`Signature URL choue (${z.key}): ${ne.message}`);const G={key:z.key,name:z.name,url:V.signedUrl,path:F,verified:!1};T.push(G)}j(T);const M=await Je.createParcelSubmission({ownerId:r==null?void 0:r.id,reference:u.reference.trim(),location:u.location.trim(),type:u.type,price:u.price?Number(u.price):null,surface:u.surface?Number(u.surface):null,description:((P=u.description)==null?void 0:P.trim())||null,documents:T});i({title:"Soumission envoye",description:`Rfrence ${M.reference}`}),s==null||s(M),t(),o(1),d({reference:"",location:"",type:"terrain",surface:"",price:"",description:""}),m([])}catch(C){console.error(C),i({variant:"destructive",title:"Erreur",description:"Impossible de soumettre la parcelle"})}finally{c(!1)}};return n.jsx(on,{open:e,onOpenChange:P=>!l&&!P?t():null,children:n.jsxs(Qr,{className:"max-w-2xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Soumission de Parcelle"}),n.jsxs(Ur,{children:["tape ",a," sur 2. Les documents sont requis pour validation anti-fraude."]})]}),a===1&&n.jsx("div",{className:"space-y-4 py-2",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Rfrence *"}),n.jsx(De,{value:u.reference,onChange:P=>d(C=>({...C,reference:P.target.value}))}),p.reference&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:p.reference})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Localisation *"}),n.jsx(De,{value:u.location,onChange:P=>d(C=>({...C,location:P.target.value}))}),p.location&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:p.location})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Surface (m) *"}),n.jsx(De,{type:"number",value:u.surface,onChange:P=>d(C=>({...C,surface:P.target.value}))}),p.surface&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:p.surface})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Prix (XOF)"}),n.jsx(De,{type:"number",value:u.price,onChange:P=>d(C=>({...C,price:P.target.value}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx($e,{children:"Description"}),n.jsx(ms,{rows:3,value:u.description,onChange:P=>d(C=>({...C,description:P.target.value}))})]})]})}),a===2&&n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Tlversez les documents requis (images / PDF). Des URL signes temporaires sont gnres (1h) puis renouveles automatiquement."}),n.jsx("div",{className:"space-y-3",children:CM.map(P=>{const C=h.find(T=>T.key===P.key);return n.jsxs("div",{className:"flex items-center justify-between border rounded px-3 py-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-medium",children:P.label}),n.jsx("span",{className:"text-xs text-muted-foreground",children:C?C.name:"Aucun fichier"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[C?n.jsx(Ge,{className:"bg-green-100 text-green-800",children:"OK"}):n.jsx(Ge,{variant:"outline",children:"Manquant"}),n.jsxs("label",{className:"cursor-pointer text-sm font-medium text-blue-600 hover:underline",children:[n.jsx("input",{type:"file",className:"hidden",onChange:T=>{var M;return((M=T.target.files)==null?void 0:M[0])&&_(P.key,T.target.files[0])}}),C?"Remplacer":"Uploader"]})]})]},P.key)})}),n.jsx("div",{className:"pt-2 text-sm",children:A?n.jsxs("div",{className:"flex items-center text-green-600 gap-2",children:[n.jsx(xc,{className:"h-4 w-4"})," Tous les documents requis sont prsents."]}):n.jsxs("div",{className:"flex items-center text-red-600 gap-2",children:[n.jsx(sa,{className:"h-4 w-4"})," Documents manquants."]})})]}),n.jsxs(Bn,{className:"flex justify-between",children:[n.jsx("div",{children:a===2&&n.jsx(Y,{variant:"outline",disabled:l,onClick:()=>o(1),children:"Prcdent"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",disabled:l,onClick:()=>!l&&t(),children:"Annuler"}),a===1&&n.jsx(Y,{onClick:()=>w()&&o(2),children:"Suivant"}),a===2&&n.jsx(Y,{disabled:l||!A,onClick:S,children:l?"Soumission...":"Soumettre"})]})]})]})})},twe=()=>{const{toast:e}=pt(),[t,r]=x.useState(null),[s,i]=x.useState({totalListings:0,activeViews:0,totalRevenue:0,averagePrice:0,securityScore:88}),[a,o]=x.useState([]),[l,c]=x.useState({viewsThisMonth:0,inquiriesThisMonth:0,conversionRate:0,topPerformingListing:null}),[u,d]=x.useState([]),[h,m]=x.useState(!0),[p,v]=x.useState([]),[g,y]=x.useState(!1),[j,_]=x.useState(!1),[w,A]=x.useState(null),[S,P]=x.useState(!1),[C,T]=x.useState({reference:"",location:"",type:"terrain",price:"",surface:"",status:"available"}),[M,z]=x.useState(""),[O,I]=x.useState([]),q=a.filter(J=>{if(!M)return!0;const se=M.toLowerCase();return J.reference&&J.reference.toLowerCase().includes(se)||J.location&&J.location.toLowerCase().includes(se)||J.status&&J.status.toLowerCase().includes(se)});function F(){if(!q.length)return;const J=["Rfrence","Localisation","Prix","Surface","Statut"],se=q.map(de=>[de.reference,de.location,de.price,de.surface||de.area_sqm,de.status]),Z=[J,...se].map(de=>de.join(";")).join(`
`),je=new Blob([Z],{type:"text/csv"}),Ee=URL.createObjectURL(je),Pe=document.createElement("a");Pe.href=Ee,Pe.download="mes_annonces.csv",Pe.click(),URL.revokeObjectURL(Ee)}async function W(){if(O.length){for(const J of O)await ne(J);I([]),e({title:"Annonces retires",description:`${O.length} annonces retires.`})}}async function V(){if(O.length){for(const J of O)await G(J);I([]),e({title:"Annonces republies",description:`${O.length} annonces republies.`})}}async function ne(J){o(se=>se.map(Z=>Z.id===J?{...Z,status:"withdrawn"}:Z))}async function G(J){o(se=>se.map(Z=>Z.id===J?{...Z,status:"available"}:Z))}function K(J){A(J),y(!0)}x.useEffect(()=>{ee(),xe()},[]),x.useEffect(()=>{const J=pe.channel("parcel_submissions_vendor").on("postgres_changes",{event:"UPDATE",schema:"public",table:"parcel_submissions"},se=>{var Z;((Z=se==null?void 0:se.new)==null?void 0:Z.owner_id)===(t==null?void 0:t.id)&&se.new.status==="approved"&&xe()}).subscribe();return()=>{pe.removeChannel(J)}},[t]);const ee=async()=>{try{const{data:{user:J},error:se}=await pe.auth.getUser();if(se)throw se;const{data:Z}=await pe.from("users").select("*").eq("id",J.id).single();r({...J,...Z});const je=await $f.analyzeUserFraud(J.id,{sellerProfile:!0,listingHistory:!0,verificationStatus:!0});i(Ee=>({...Ee,securityScore:Math.round((1-je.riskScore)*100)}))}catch(J){console.error("Erreur chargement utilisateur:",J)}},xe=async()=>{m(!0);try{const{data:{user:J}}=await pe.auth.getUser(),{data:se}=await pe.from("parcels").select(`
          *,
          parcel_views(id, viewed_at),
          parcel_inquiries(id, created_at, inquiry_type)
        `).eq("owner_id",J.id),Z=(se||[]).filter(nt=>nt.status!=="pending_validation"),je=Z.length,Ee=Z.reduce((nt,wt)=>{var mt;return nt+(((mt=wt.parcel_views)==null?void 0:mt.length)||0)},0)||0,Pe=Z.reduce((nt,wt)=>wt.status==="sold"?nt+(wt.price||0):nt,0)||0,de=je>0?Z.reduce((nt,wt)=>nt+(wt.price||0),0)/je:0,be=new Date().getMonth(),Ve=new Date().getFullYear(),ze=(se==null?void 0:se.reduce((nt,wt)=>{var or;const mt=((or=wt.parcel_views)==null?void 0:or.filter(It=>{const Ut=new Date(It.viewed_at);return Ut.getMonth()===be&&Ut.getFullYear()===Ve}).length)||0;return nt+mt},0))||0,Xe=(se==null?void 0:se.reduce((nt,wt)=>{var or;const mt=((or=wt.parcel_inquiries)==null?void 0:or.filter(It=>{const Ut=new Date(It.created_at);return Ut.getMonth()===be&&Ut.getFullYear()===Ve}).length)||0;return nt+mt},0))||0,et=Ee>0?Xe/ze*100:0,ge=se==null?void 0:se.reduce((nt,wt)=>{var It,Ut;const mt=((It=wt.parcel_views)==null?void 0:It.length)||0,or=((Ut=nt==null?void 0:nt.parcel_views)==null?void 0:Ut.length)||0;return mt>or?wt:nt},null),Oe=await B(se);i({totalListings:je,activeViews:Ee,totalRevenue:Pe,averagePrice:de,securityScore:s.securityScore}),c({viewsThisMonth:ze,inquiriesThisMonth:Xe,conversionRate:et,topPerformingListing:ge}),o(se||[]);const it=(se||[]).map(nt=>({listingId:nt.id,reference:nt.reference,location:nt.location,inquiries:(nt.parcel_inquiries||[]).map(wt=>({id:wt.id,type:wt.inquiry_type,created_at:wt.created_at}))})).filter(nt=>nt.inquiries.length>0);v(it),d(Oe)}catch(J){console.error("Erreur chargement dashboard vendeur:",J)}finally{m(!1)}},B=async J=>{try{if(!J||J.length===0)return[{type:"tip",title:"Crez votre premire annonce",message:"Commencez par publier une annonce pour recevoir des insights personnaliss",priority:"high"}];const se=J.map(be=>be.type),Z=J.map(be=>be.price),je=J.map(be=>be.location),{data:Ee}=await pe.from("parcels").select("price, type, location, created_at").in("type",se).neq("owner_id",J[0].owner_id).gte("created_at",new Date(Date.now()-90*24*60*60*1e3).toISOString()),Pe=[];if(Ee&&Ee.length>0){const be=Ee.reduce((ze,Xe)=>ze+Xe.price,0)/Ee.length,Ve=Z.reduce((ze,Xe)=>ze+Xe,0)/Z.length;Ve>be*1.1?Pe.push({type:"warning",title:"Prix au-dessus du march",message:`Vos prix sont 10% plus levs que la moyenne du march (${be.toLocaleString()} FCFA)`,priority:"medium"}):Ve<be*.9&&Pe.push({type:"success",title:"Prix comptitifs",message:"Vos prix sont attractifs compars au march local",priority:"low"})}return J.reduce((be,Ve)=>{var ze;return be+(((ze=Ve.parcel_views)==null?void 0:ze.length)||0)},0)<J.length*10&&Pe.push({type:"tip",title:"Amliorez votre visibilit",message:"Ajoutez plus de photos et dtails pour augmenter les vues",priority:"high"}),Pe.push({type:"info",title:"Tendance saisonnire",message:"La demande immobilire augmente de 15% en cette priode",priority:"medium"}),Pe}catch(se){return console.error("Erreur gnration insights:",se),[]}},X=async J=>{try{const se=a.find(Ee=>Ee.id===J);if(!se)return;const Z=await $f.analyzeListingOptimization(se);e({title:"Analyse termine",description:`Score d'optimisation: ${Math.round(Z.score*100)}%`});const je=Z.suggestions.join(", ");e({title:"Suggestions d'amlioration",description:je,duration:5e3})}catch(se){console.error("Erreur optimisation annonce:",se),e({variant:"destructive",title:"Erreur",description:"Impossible d'analyser l'annonce"})}},ie=async()=>{try{const{data:{user:J}}=await pe.auth.getUser(),se=await $f.analyzePricingStrategy(J.id,a);e({title:"Analyse des prix termine",description:`Recommandation: ${se.recommendation}`,duration:5e3})}catch(J){console.error("Erreur analyse prix:",J),e({variant:"destructive",title:"Erreur",description:"Impossible d'analyser les prix"})}},me=J=>{switch(J){case"warning":return kr;case"success":return Qt;case"tip":return yj;case"info":return Ru;default:return _y}},ye=J=>{switch(J){case"warning":return"bg-orange-100 text-orange-800 border-orange-200";case"success":return"bg-green-100 text-green-800 border-green-200";case"tip":return"bg-blue-100 text-blue-800 border-blue-200";case"info":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ne=()=>{A(null),T({reference:"",location:"",type:"terrain",price:"",surface:"",status:"available"}),_(!0)},le=async J=>{if(J.preventDefault(),!!t)try{P(!0);const se={reference:C.reference.trim(),location:C.location.trim(),type:C.type,price:C.price?Number(C.price):0,surface:C.surface?Number(C.surface):null,status:C.status,owner_id:t.id,owner_type:"vendeur"};if(w){const Z=await Je.updateProperty(w.id,se);o(je=>je.map(Ee=>Ee.id===Z.id?{...Ee,...Z}:Ee)),e({title:"Annonce mise  jour",description:Z.reference})}else{const Z=await Je.createProperty(se);o(je=>[Z,...je]),e({title:"Annonce cre",description:Z.reference})}y(!1)}catch(se){console.error(se),e({variant:"destructive",title:"Erreur",description:"Impossible d'enregistrer l'annonce"})}finally{P(!1)}},Q=async J=>{try{const se=await Je.updateProperty(J.id,{status:"withdrawn"});o(Z=>Z.map(je=>je.id===J.id?{...je,...se}:je)),e({title:"Annonce retire"})}catch{e({variant:"destructive",title:"Erreur",description:"Retrait impossible"})}};return n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de Bord Vendeur "}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Grez vos annonces et maximisez vos ventes avec l'IA"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(Y,{onClick:ie,className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(na,{className:"h-4 w-4 mr-2"}),"Analyser les Prix"]}),n.jsxs(Y,{className:"bg-green-600 hover:bg-green-700",onClick:Ne,children:[n.jsx(Su,{className:"h-4 w-4 mr-2"}),"Nouvelle Annonce"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[n.jsx(he,{className:"border-l-4 border-blue-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mes Annonces"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.totalListings})]}),n.jsx(Cr,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{className:"border-l-4 border-green-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vues Totales"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.activeViews})]}),n.jsx(Hr,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{className:"border-l-4 border-orange-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus"}),n.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[(s.totalRevenue/1e6).toFixed(1),"M"]})]}),n.jsx(fs,{className:"h-8 w-8 text-orange-500"})]})})}),n.jsx(he,{className:"border-l-4 border-purple-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Prix Moyen"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[(s.averagePrice/1e6).toFixed(1),"M"]})]}),n.jsx(Br,{className:"h-8 w-8 text-purple-500"})]})})}),n.jsx(he,{className:"border-l-4 border-red-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scurit"}),n.jsxs("p",{className:"text-3xl font-bold text-red-600",children:[s.securityScore,"%"]})]}),n.jsx(ns,{className:"h-8 w-8 text-red-500"})]})})})]}),n.jsxs(he,{className:"mt-8",children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Mes annonces"})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"mb-2 flex gap-2 items-center",children:[n.jsx("input",{type:"text",placeholder:"Recherche...",value:M||"",onChange:J=>z(J.target.value),className:"max-w-xs border rounded px-2 py-1 text-sm"}),n.jsx(Y,{size:"sm",onClick:()=>F(),disabled:q.length===0,children:"Exporter CSV"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>I(q.map(J=>J.id)),disabled:q.length===0,children:"Tout slectionner"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>I([]),disabled:O.length===0,children:"Dslectionner"}),n.jsx(Y,{size:"sm",className:"bg-red-600 text-white",disabled:O.length===0,onClick:()=>W(),children:"Retirer slection"}),n.jsx(Y,{size:"sm",className:"bg-blue-600 text-white",disabled:O.length===0,onClick:()=>V(),children:"Republier slection"})]}),q.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune annonce"}):n.jsx("div",{className:"space-y-3",children:q.map(J=>{var se;return n.jsxs("div",{className:`border rounded p-3 text-sm ${O.includes(J.id)?"bg-blue-50":""}`,children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("input",{type:"checkbox",checked:O.includes(J.id),onChange:Z=>{I(je=>Z.target.checked?[...je,J.id]:je.filter(Ee=>Ee!==J.id))}}),n.jsx("span",{className:"font-medium",children:J.reference}),n.jsx(Ge,{variant:J.status==="available"?"secondary":J.status==="sold"?"success":"outline",children:J.status})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[J.location,"  ",(se=J.price)==null?void 0:se.toLocaleString()," XOF  ",J.surface||J.area_sqm," m"]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>K(J),children:"Modifier"}),J.status==="available"&&n.jsx(Y,{size:"xs",variant:"destructive",onClick:()=>ne(J.id),children:"Retirer"}),J.status==="withdrawn"&&n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>G(J.id),children:"Republier"})]})]},J.id)})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5 text-blue-500"}),"Performances ce Mois"]})}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Vues"}),n.jsx("span",{className:"font-bold",children:l.viewsThisMonth})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Demandes"}),n.jsx("span",{className:"font-bold",children:l.inquiriesThisMonth})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Taux de conversion"}),n.jsxs(Ge,{className:"bg-green-100 text-green-800",children:[l.conversionRate.toFixed(1),"%"]})]}),l.topPerformingListing&&n.jsxs("div",{className:"pt-3 border-t",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Meilleure annonce"}),n.jsx("p",{className:"font-medium",children:l.topPerformingListing.reference}),n.jsx("p",{className:"text-xs text-gray-500",children:l.topPerformingListing.location})]})]})})]}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(yj,{className:"h-5 w-5 text-yellow-500"}),"Insights IA du March"]})}),n.jsx(ve,{children:u.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(_y,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-gray-500",children:"Insights en cours de gnration..."})]}):n.jsx("div",{className:"space-y-3",children:u.map((J,se)=>{const Z=me(J.type);return n.jsx(Ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-3 rounded-lg border ${ye(J.type)}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Z,{className:"h-4 w-4 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:J.title}),n.jsx("p",{className:"text-sm opacity-80",children:J.message})]}),n.jsx(Ge,{variant:"outline",className:"text-xs",children:J.priority})]})},se)})})})]})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5 text-green-500"}),"Mes Annonces Actives"]})}),n.jsx(ve,{children:h?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):a.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Cr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-gray-500",children:"Aucune annonce active"}),n.jsxs(Y,{className:"mt-4",children:[n.jsx(Su,{className:"h-4 w-4 mr-2"}),"Crer une annonce"]})]}):n.jsx("div",{className:"space-y-4",children:a.slice(0,5).map(J=>{var se,Z;return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h4",{className:"font-semibold",children:J.reference}),J.status==="pending_validation"?n.jsx(Ge,{className:"bg-yellow-100 text-yellow-800",children:"En validation"}):n.jsx(Ge,{variant:J.status==="available"?"default":"secondary",children:J.status==="available"?"Disponible":J.status})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:J.location}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{className:"font-bold text-green-600",children:[(se=J.price)==null?void 0:se.toLocaleString()," FCFA"]}),n.jsxs("span",{className:"text-gray-500",children:[J.surface," m"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Hr,{className:"h-3 w-3"}),((Z=J.parcel_views)==null?void 0:Z.length)||0," vues"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>X(J.id),children:[n.jsx(Ru,{className:"h-4 w-4 mr-1"}),"Optimiser"]}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>K(J),children:"diter"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>Q(J),disabled:J.status==="withdrawn",children:J.status==="withdrawn"?"Retire":"Retirer"})]})]})},J.id)})})})]}),g&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative",children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:()=>!S&&y(!1),children:""}),n.jsx("h2",{className:"text-xl font-semibold mb-4",children:w?"Modifier l'annonce":"Nouvelle annonce"}),n.jsxs("form",{onSubmit:le,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium",children:"Rfrence"}),n.jsx("input",{className:"w-full border rounded px-2 py-2 text-sm",value:C.reference,onChange:J=>T(se=>({...se,reference:J.target.value})),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium",children:"Localisation"}),n.jsx("input",{className:"w-full border rounded px-2 py-2 text-sm",value:C.location,onChange:J=>T(se=>({...se,location:J.target.value})),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium",children:"Type"}),n.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:C.type,onChange:J=>T(se=>({...se,type:J.target.value})),children:[n.jsx("option",{value:"terrain",children:"Terrain"}),n.jsx("option",{value:"maison",children:"Maison"}),n.jsx("option",{value:"appartement",children:"Appartement"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium",children:"Prix (XOF)"}),n.jsx("input",{type:"number",min:"0",className:"w-full border rounded px-2 py-2 text-sm",value:C.price,onChange:J=>T(se=>({...se,price:J.target.value})),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium",children:"Surface (m)"}),n.jsx("input",{type:"number",min:"0",className:"w-full border rounded px-2 py-2 text-sm",value:C.surface,onChange:J=>T(se=>({...se,surface:J.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium",children:"Statut"}),n.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:C.status,onChange:J=>T(se=>({...se,status:J.target.value})),children:[n.jsx("option",{value:"available",children:"Disponible"}),n.jsx("option",{value:"reserved",children:"Rserve"}),n.jsx("option",{value:"sold",children:"Vendue"}),n.jsx("option",{value:"withdrawn",children:"Retire"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx(Y,{type:"button",variant:"ghost",disabled:S,onClick:()=>y(!1),children:"Annuler"}),n.jsx(Y,{type:"submit",disabled:S,children:S?"Enregistrement...":"Enregistrer"})]})]})]})}),n.jsx(ewe,{isOpen:j,onClose:()=>_(!1),owner:t,onSubmitted:J=>{o(se=>[{id:J.reference,reference:J.reference,location:J.location,type:J.type,price:J.price,surface:J.surface,status:"pending_validation",parcel_submission_id:J.id},...se])}}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Tie,{className:"h-5 w-5 text-indigo-500"}),"Demandes Reues"]})}),n.jsx(ve,{children:h?n.jsx("div",{className:"flex justify-center py-6",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):p.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune demande reue pour le moment."}):n.jsx("div",{className:"space-y-4",children:p.map(J=>n.jsxs("div",{className:"border rounded-md p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-semibold text-sm",children:J.reference}),n.jsxs(Ge,{variant:"outline",children:[J.inquiries.length," demande",J.inquiries.length>1?"s":""]})]}),n.jsxs("ul",{className:"space-y-2",children:[J.inquiries.slice(0,5).map(se=>n.jsxs("li",{className:"text-xs flex items-center justify-between bg-muted/40 rounded px-2 py-1",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ge,{variant:"secondary",className:"capitalize",children:se.type}),new Date(se.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"})]}),n.jsx(Y,{size:"xs",variant:"ghost",className:"h-6 text-xs",children:"Voir"})]},se.id)),J.inquiries.length>5&&n.jsxs("li",{className:"text-[11px] text-muted-foreground italic",children:["+ ",J.inquiries.length-5," autres..."]})]})]},J.listingId))})})]}),n.jsx(V0,{userRole:"vendeur",dashboardContext:{userId:t==null?void 0:t.id,userType:"vendeur",securityLevel:"enhanced",listingsCount:s.totalListings}}),n.jsx(bx,{userRole:"vendeur",context:{userId:t==null?void 0:t.id,listingsData:{total:s.totalListings,views:s.activeViews,revenue:s.totalRevenue},marketInsights:u}})]})})};var rwe=Array.isArray,Da=rwe,nwe=typeof li=="object"&&li&&li.Object===Object&&li,aG=nwe,swe=aG,iwe=typeof self=="object"&&self&&self.Object===Object&&self,awe=swe||iwe||Function("return this")(),Fc=awe,owe=Fc,lwe=owe.Symbol,U0=lwe,kM=U0,oG=Object.prototype,cwe=oG.hasOwnProperty,uwe=oG.toString,uv=kM?kM.toStringTag:void 0;function dwe(e){var t=cwe.call(e,uv),r=e[uv];try{e[uv]=void 0;var s=!0}catch{}var i=uwe.call(e);return s&&(t?e[uv]=r:delete e[uv]),i}var hwe=dwe,fwe=Object.prototype,mwe=fwe.toString;function pwe(e){return mwe.call(e)}var gwe=pwe,EM=U0,xwe=hwe,vwe=gwe,ywe="[object Null]",bwe="[object Undefined]",TM=EM?EM.toStringTag:void 0;function jwe(e){return e==null?e===void 0?bwe:ywe:TM&&TM in Object(e)?xwe(e):vwe(e)}var Yu=jwe;function wwe(e){return e!=null&&typeof e=="object"}var Ju=wwe,_we=Yu,Nwe=Ju,Swe="[object Symbol]";function Awe(e){return typeof e=="symbol"||Nwe(e)&&_we(e)==Swe}var jx=Awe,Pwe=Da,Cwe=jx,kwe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ewe=/^\w*$/;function Twe(e,t){if(Pwe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Cwe(e)?!0:Ewe.test(e)||!kwe.test(e)||t!=null&&e in Object(t)}var sT=Twe;function Owe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Oh=Owe;const wx=Er(Oh);var Lwe=Yu,Mwe=Oh,Iwe="[object AsyncFunction]",Rwe="[object Function]",Dwe="[object GeneratorFunction]",$we="[object Proxy]";function Fwe(e){if(!Mwe(e))return!1;var t=Lwe(e);return t==Rwe||t==Dwe||t==Iwe||t==$we}var iT=Fwe;const Xt=Er(iT);var zwe=Fc,Bwe=zwe["__core-js_shared__"],qwe=Bwe,O5=qwe,OM=function(){var e=/[^.]+$/.exec(O5&&O5.keys&&O5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Vwe(e){return!!OM&&OM in e}var Uwe=Vwe,Hwe=Function.prototype,Wwe=Hwe.toString;function Gwe(e){if(e!=null){try{return Wwe.call(e)}catch{}try{return e+""}catch{}}return""}var lG=Gwe,Kwe=iT,Zwe=Uwe,Xwe=Oh,Ywe=lG,Jwe=/[\\^$.*+?()[\]{}|]/g,Qwe=/^\[object .+?Constructor\]$/,e2e=Function.prototype,t2e=Object.prototype,r2e=e2e.toString,n2e=t2e.hasOwnProperty,s2e=RegExp("^"+r2e.call(n2e).replace(Jwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function i2e(e){if(!Xwe(e)||Zwe(e))return!1;var t=Kwe(e)?s2e:Qwe;return t.test(Ywe(e))}var a2e=i2e;function o2e(e,t){return e==null?void 0:e[t]}var l2e=o2e,c2e=a2e,u2e=l2e;function d2e(e,t){var r=u2e(e,t);return c2e(r)?r:void 0}var jm=d2e,h2e=jm,f2e=h2e(Object,"create"),l_=f2e,LM=l_;function m2e(){this.__data__=LM?LM(null):{},this.size=0}var p2e=m2e;function g2e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var x2e=g2e,v2e=l_,y2e="__lodash_hash_undefined__",b2e=Object.prototype,j2e=b2e.hasOwnProperty;function w2e(e){var t=this.__data__;if(v2e){var r=t[e];return r===y2e?void 0:r}return j2e.call(t,e)?t[e]:void 0}var _2e=w2e,N2e=l_,S2e=Object.prototype,A2e=S2e.hasOwnProperty;function P2e(e){var t=this.__data__;return N2e?t[e]!==void 0:A2e.call(t,e)}var C2e=P2e,k2e=l_,E2e="__lodash_hash_undefined__";function T2e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=k2e&&t===void 0?E2e:t,this}var O2e=T2e,L2e=p2e,M2e=x2e,I2e=_2e,R2e=C2e,D2e=O2e;function _x(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}_x.prototype.clear=L2e;_x.prototype.delete=M2e;_x.prototype.get=I2e;_x.prototype.has=R2e;_x.prototype.set=D2e;var $2e=_x;function F2e(){this.__data__=[],this.size=0}var z2e=F2e;function B2e(e,t){return e===t||e!==e&&t!==t}var aT=B2e,q2e=aT;function V2e(e,t){for(var r=e.length;r--;)if(q2e(e[r][0],t))return r;return-1}var c_=V2e,U2e=c_,H2e=Array.prototype,W2e=H2e.splice;function G2e(e){var t=this.__data__,r=U2e(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():W2e.call(t,r,1),--this.size,!0}var K2e=G2e,Z2e=c_;function X2e(e){var t=this.__data__,r=Z2e(t,e);return r<0?void 0:t[r][1]}var Y2e=X2e,J2e=c_;function Q2e(e){return J2e(this.__data__,e)>-1}var e_e=Q2e,t_e=c_;function r_e(e,t){var r=this.__data__,s=t_e(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var n_e=r_e,s_e=z2e,i_e=K2e,a_e=Y2e,o_e=e_e,l_e=n_e;function Nx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Nx.prototype.clear=s_e;Nx.prototype.delete=i_e;Nx.prototype.get=a_e;Nx.prototype.has=o_e;Nx.prototype.set=l_e;var u_=Nx,c_e=jm,u_e=Fc,d_e=c_e(u_e,"Map"),oT=d_e,MM=$2e,h_e=u_,f_e=oT;function m_e(){this.size=0,this.__data__={hash:new MM,map:new(f_e||h_e),string:new MM}}var p_e=m_e;function g_e(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var x_e=g_e,v_e=x_e;function y_e(e,t){var r=e.__data__;return v_e(t)?r[typeof t=="string"?"string":"hash"]:r.map}var d_=y_e,b_e=d_;function j_e(e){var t=b_e(this,e).delete(e);return this.size-=t?1:0,t}var w_e=j_e,__e=d_;function N_e(e){return __e(this,e).get(e)}var S_e=N_e,A_e=d_;function P_e(e){return A_e(this,e).has(e)}var C_e=P_e,k_e=d_;function E_e(e,t){var r=k_e(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var T_e=E_e,O_e=p_e,L_e=w_e,M_e=S_e,I_e=C_e,R_e=T_e;function Sx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Sx.prototype.clear=O_e;Sx.prototype.delete=L_e;Sx.prototype.get=M_e;Sx.prototype.has=I_e;Sx.prototype.set=R_e;var lT=Sx,cG=lT,D_e="Expected a function";function cT(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(D_e);var r=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return r.cache=a.set(i,o)||a,o};return r.cache=new(cT.Cache||cG),r}cT.Cache=cG;var uG=cT;const $_e=Er(uG);var F_e=uG,z_e=500;function B_e(e){var t=F_e(e,function(s){return r.size===z_e&&r.clear(),s}),r=t.cache;return t}var q_e=B_e,V_e=q_e,U_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H_e=/\\(\\)?/g,W_e=V_e(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(U_e,function(r,s,i,a){t.push(i?a.replace(H_e,"$1"):s||r)}),t}),G_e=W_e;function K_e(e,t){for(var r=-1,s=e==null?0:e.length,i=Array(s);++r<s;)i[r]=t(e[r],r,e);return i}var uT=K_e,IM=U0,Z_e=uT,X_e=Da,Y_e=jx,J_e=1/0,RM=IM?IM.prototype:void 0,DM=RM?RM.toString:void 0;function dG(e){if(typeof e=="string")return e;if(X_e(e))return Z_e(e,dG)+"";if(Y_e(e))return DM?DM.call(e):"";var t=e+"";return t=="0"&&1/e==-J_e?"-0":t}var Q_e=dG,eNe=Q_e;function tNe(e){return e==null?"":eNe(e)}var hG=tNe,rNe=Da,nNe=sT,sNe=G_e,iNe=hG;function aNe(e,t){return rNe(e)?e:nNe(e,t)?[e]:sNe(iNe(e))}var fG=aNe,oNe=jx,lNe=1/0;function cNe(e){if(typeof e=="string"||oNe(e))return e;var t=e+"";return t=="0"&&1/e==-lNe?"-0":t}var h_=cNe,uNe=fG,dNe=h_;function hNe(e,t){t=uNe(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[dNe(t[r++])];return r&&r==s?e:void 0}var dT=hNe,fNe=dT;function mNe(e,t,r){var s=e==null?void 0:fNe(e,t);return s===void 0?r:s}var mG=mNe;const so=Er(mG);function pNe(e){return e==null}var gNe=pNe;const ir=Er(gNe);var xNe=Yu,vNe=Da,yNe=Ju,bNe="[object String]";function jNe(e){return typeof e=="string"||!vNe(e)&&yNe(e)&&xNe(e)==bNe}var wNe=jNe;const nm=Er(wNe);var pG={exports:{}},nn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hT=Symbol.for("react.element"),fT=Symbol.for("react.portal"),f_=Symbol.for("react.fragment"),m_=Symbol.for("react.strict_mode"),p_=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),_Ne=Symbol.for("react.server_context"),v_=Symbol.for("react.forward_ref"),y_=Symbol.for("react.suspense"),b_=Symbol.for("react.suspense_list"),j_=Symbol.for("react.memo"),w_=Symbol.for("react.lazy"),NNe=Symbol.for("react.offscreen"),gG;gG=Symbol.for("react.module.reference");function Ko(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hT:switch(e=e.type,e){case f_:case p_:case m_:case y_:case b_:return e;default:switch(e=e&&e.$$typeof,e){case _Ne:case x_:case v_:case w_:case j_:case g_:return e;default:return t}}case fT:return t}}}nn.ContextConsumer=x_;nn.ContextProvider=g_;nn.Element=hT;nn.ForwardRef=v_;nn.Fragment=f_;nn.Lazy=w_;nn.Memo=j_;nn.Portal=fT;nn.Profiler=p_;nn.StrictMode=m_;nn.Suspense=y_;nn.SuspenseList=b_;nn.isAsyncMode=function(){return!1};nn.isConcurrentMode=function(){return!1};nn.isContextConsumer=function(e){return Ko(e)===x_};nn.isContextProvider=function(e){return Ko(e)===g_};nn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hT};nn.isForwardRef=function(e){return Ko(e)===v_};nn.isFragment=function(e){return Ko(e)===f_};nn.isLazy=function(e){return Ko(e)===w_};nn.isMemo=function(e){return Ko(e)===j_};nn.isPortal=function(e){return Ko(e)===fT};nn.isProfiler=function(e){return Ko(e)===p_};nn.isStrictMode=function(e){return Ko(e)===m_};nn.isSuspense=function(e){return Ko(e)===y_};nn.isSuspenseList=function(e){return Ko(e)===b_};nn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===f_||e===p_||e===m_||e===y_||e===b_||e===NNe||typeof e=="object"&&e!==null&&(e.$$typeof===w_||e.$$typeof===j_||e.$$typeof===g_||e.$$typeof===x_||e.$$typeof===v_||e.$$typeof===gG||e.getModuleId!==void 0)};nn.typeOf=Ko;pG.exports=nn;var SNe=pG.exports,ANe=Yu,PNe=Ju,CNe="[object Number]";function kNe(e){return typeof e=="number"||PNe(e)&&ANe(e)==CNe}var xG=kNe;const ENe=Er(xG);var TNe=xG;function ONe(e){return TNe(e)&&e!=+e}var LNe=ONe;const Ax=Er(LNe);var Qi=function(t){return t===0?0:t>0?1:-1},Ef=function(t){return nm(t)&&t.indexOf("%")===t.length-1},gt=function(t){return ENe(t)&&!Ax(t)},MNe=function(t){return ir(t)},Rs=function(t){return gt(t)||nm(t)},INe=0,wm=function(t){var r=++INe;return"".concat(t||"").concat(r)},ea=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!gt(t)&&!nm(t))return s;var a;if(Ef(t)){var o=t.indexOf("%");a=r*parseFloat(t.slice(0,o))/100}else a=+t;return Ax(a)&&(a=s),i&&a>r&&(a=r),a},qd=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},RNe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},i=0;i<r;i++)if(!s[t[i]])s[t[i]]=!0;else return!0;return!1},Ms=function(t,r){return gt(t)&&gt(r)?function(s){return t+s*(r-t)}:function(){return r}};function Uj(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):so(s,t))===r})}var DNe=function(t,r){return gt(t)&&gt(r)?t-r:nm(t)&&nm(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function eg(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function bP(e){"@babel/helpers - typeof";return bP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bP(e)}var $Ne=["viewBox","children"],FNe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$M=["points","pathLength"],L5={svg:$Ne,polygon:$M,polyline:$M},mT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Hj=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(x.isValidElement(t)&&(s=t.props),!wx(s))return null;var i={};return Object.keys(s).forEach(function(a){mT.includes(a)&&(i[a]=r||function(o){return s[a](s,o)})}),i},zNe=function(t,r,s){return function(i){return t(r,s,i),null}},sm=function(t,r,s){if(!wx(t)||bP(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];mT.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=zNe(o,r,s))}),i},BNe=["children"],qNe=["children"];function FM(e,t){if(e==null)return{};var r=VNe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function VNe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function jP(e){"@babel/helpers - typeof";return jP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jP(e)}var zM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},BM=null,M5=null,pT=function e(t){if(t===BM&&Array.isArray(M5))return M5;var r=[];return x.Children.forEach(t,function(s){ir(s)||(SNe.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),M5=r,BM=t,r};function io(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(i){return Cu(i)}):s=[Cu(t)],pT(e).forEach(function(i){var a=so(i,"type.displayName")||so(i,"type.name");s.indexOf(a)!==-1&&r.push(i)}),r}function Ya(e,t){var r=io(e,t);return r&&r[0]}var qM=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,i=r.height;return!(!gt(s)||s<=0||!gt(i)||i<=0)},UNe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],HNe=function(t){return t&&t.type&&nm(t.type)&&UNe.indexOf(t.type)>=0},vG=function(t){return t&&jP(t)==="object"&&"clipDot"in t},WNe=function(t,r,s,i){var a,o=(a=L5==null?void 0:L5[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Xt(t)&&(i&&o.includes(r)||FNe.includes(r))||s&&mT.includes(r)},Bt=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(x.isValidElement(t)&&(i=t.props),!wx(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;WNe((l=i)===null||l===void 0?void 0:l[o],o,r,s)&&(a[o]=i[o])}),a},wP=function e(t,r){if(t===r)return!0;var s=x.Children.count(t);if(s!==x.Children.count(r))return!1;if(s===0)return!0;if(s===1)return VM(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<s;i++){var a=t[i],o=r[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!VM(a,o))return!1}return!0},VM=function(t,r){if(ir(t)&&ir(r))return!0;if(!ir(t)&&!ir(r)){var s=t.props||{},i=s.children,a=FM(s,BNe),o=r.props||{},l=o.children,c=FM(o,qNe);return i&&l?eg(a,c)&&wP(i,l):!i&&!l?eg(a,c):!1}return!1},UM=function(t,r){var s=[],i={};return pT(t).forEach(function(a,o){if(HNe(a))s.push(a);else if(a){var l=Cu(a.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var h=u(a,l,o);s.push(h),i[l]=!0}}}),s},GNe=function(t){var r=t&&t.type;return r&&zM[r]?zM[r]:null},KNe=function(t,r){return pT(r).indexOf(t)},ZNe=["children","width","height","viewBox","className","style","title","desc"];function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_P.apply(this,arguments)}function XNe(e,t){if(e==null)return{};var r=YNe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function YNe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function NP(e){var t=e.children,r=e.width,s=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,u=XNe(e,ZNe),d=i||{width:r,height:s,x:0,y:0},h=cr("recharts-surface",a);return we.createElement("svg",_P({},Bt(u,!0,"svg"),{className:h,width:r,height:s,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),we.createElement("title",null,l),we.createElement("desc",null,c),t)}var JNe=["children","className"];function SP(){return SP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},SP.apply(this,arguments)}function QNe(e,t){if(e==null)return{};var r=e5e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function e5e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var br=we.forwardRef(function(e,t){var r=e.children,s=e.className,i=QNe(e,JNe),a=cr("recharts-layer",s);return we.createElement("g",SP({className:a},Bt(i,!0),{ref:t}),r)}),Cl=function(t,r){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]};function t5e(e,t,r){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+t];return a}var r5e=t5e,n5e=r5e;function s5e(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:n5e(e,t,r)}var i5e=s5e,a5e="\\ud800-\\udfff",o5e="\\u0300-\\u036f",l5e="\\ufe20-\\ufe2f",c5e="\\u20d0-\\u20ff",u5e=o5e+l5e+c5e,d5e="\\ufe0e\\ufe0f",h5e="\\u200d",f5e=RegExp("["+h5e+a5e+u5e+d5e+"]");function m5e(e){return f5e.test(e)}var yG=m5e;function p5e(e){return e.split("")}var g5e=p5e,bG="\\ud800-\\udfff",x5e="\\u0300-\\u036f",v5e="\\ufe20-\\ufe2f",y5e="\\u20d0-\\u20ff",b5e=x5e+v5e+y5e,j5e="\\ufe0e\\ufe0f",w5e="["+bG+"]",AP="["+b5e+"]",PP="\\ud83c[\\udffb-\\udfff]",_5e="(?:"+AP+"|"+PP+")",jG="[^"+bG+"]",wG="(?:\\ud83c[\\udde6-\\uddff]){2}",_G="[\\ud800-\\udbff][\\udc00-\\udfff]",N5e="\\u200d",NG=_5e+"?",SG="["+j5e+"]?",S5e="(?:"+N5e+"(?:"+[jG,wG,_G].join("|")+")"+SG+NG+")*",A5e=SG+NG+S5e,P5e="(?:"+[jG+AP+"?",AP,wG,_G,w5e].join("|")+")",C5e=RegExp(PP+"(?="+PP+")|"+P5e+A5e,"g");function k5e(e){return e.match(C5e)||[]}var E5e=k5e,T5e=g5e,O5e=yG,L5e=E5e;function M5e(e){return O5e(e)?L5e(e):T5e(e)}var I5e=M5e,R5e=i5e,D5e=yG,$5e=I5e,F5e=hG;function z5e(e){return function(t){t=F5e(t);var r=D5e(t)?$5e(t):void 0,s=r?r[0]:t.charAt(0),i=r?R5e(r,1).join(""):t.slice(1);return s[e]()+i}}var B5e=z5e,q5e=B5e,V5e=q5e("toUpperCase"),U5e=V5e;const __=Er(U5e);function xn(e){return function(){return e}}const AG=Math.cos,Wj=Math.sin,Fl=Math.sqrt,Gj=Math.PI,N_=2*Gj,CP=Math.PI,kP=2*CP,xf=1e-6,H5e=kP-xf;function PG(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function W5e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return PG;const r=10**t;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+s[i]}}class G5e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?PG:W5e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,i){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,r,s,i,a,o){this._append`C${+t},${+r},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,r,s,i,a){if(t=+t,r=+r,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-t,u=i-r,d=o-t,h=l-r,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>xf)if(!(Math.abs(h*c-u*d)>xf)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=s-o,v=i-l,g=c*c+u*u,y=p*p+v*v,j=Math.sqrt(g),_=Math.sqrt(m),w=a*Math.tan((CP-Math.acos((g+m-y)/(2*j*_)))/2),A=w/_,S=w/j;Math.abs(A-1)>xf&&this._append`L${t+A*d},${r+A*h}`,this._append`A${a},${a},0,0,${+(h*p>d*v)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,s,i,a,o){if(t=+t,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),u=t+l,d=r+c,h=1^o,m=o?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>xf||Math.abs(this._y1-d)>xf)&&this._append`L${u},${d}`,s&&(m<0&&(m=m%kP+kP),m>H5e?this._append`A${s},${s},0,1,${h},${t-l},${r-c}A${s},${s},0,1,${h},${this._x1=u},${this._y1=d}`:m>xf&&this._append`A${s},${s},0,${+(m>=CP)},${h},${this._x1=t+s*Math.cos(a)},${this._y1=r+s*Math.sin(a)}`)}rect(t,r,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function gT(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new G5e(t)}function xT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CG(e){this._context=e}CG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function S_(e){return new CG(e)}function kG(e){return e[0]}function EG(e){return e[1]}function TG(e,t){var r=xn(!0),s=null,i=S_,a=null,o=gT(l);e=typeof e=="function"?e:e===void 0?kG:xn(e),t=typeof t=="function"?t:t===void 0?EG:xn(t);function l(c){var u,d=(c=xT(c)).length,h,m=!1,p;for(s==null&&(a=i(p=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(h,u,c),+t(h,u,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:xn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:xn(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:xn(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function Zb(e,t,r){var s=null,i=xn(!0),a=null,o=S_,l=null,c=gT(u);e=typeof e=="function"?e:e===void 0?kG:xn(+e),t=typeof t=="function"?t:xn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?EG:xn(+r);function u(h){var m,p,v,g=(h=xT(h)).length,y,j=!1,_,w=new Array(g),A=new Array(g);for(a==null&&(l=o(_=c())),m=0;m<=g;++m){if(!(m<g&&i(y=h[m],m,h))===j)if(j=!j)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=p;--v)l.point(w[v],A[v]);l.lineEnd(),l.areaEnd()}j&&(w[m]=+e(y,m,h),A[m]=+t(y,m,h),l.point(s?+s(y,m,h):w[m],r?+r(y,m,h):A[m]))}if(_)return l=null,_+""||null}function d(){return TG().defined(i).curve(o).context(a)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:xn(+h),s=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:xn(+h),u):e},u.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:xn(+h),u):s},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:xn(+h),r=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:xn(+h),u):t},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:xn(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(s).y(t)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:xn(!!h),u):i},u.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),u):o},u.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),u):a},u}class OG{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function K5e(e){return new OG(e,!0)}function Z5e(e){return new OG(e,!1)}const vT={draw(e,t){const r=Fl(t/Gj);e.moveTo(r,0),e.arc(0,0,r,0,N_)}},X5e={draw(e,t){const r=Fl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},LG=Fl(1/3),Y5e=LG*2,J5e={draw(e,t){const r=Fl(t/Y5e),s=r*LG;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},Q5e={draw(e,t){const r=Fl(t),s=-r/2;e.rect(s,s,r,r)}},eSe=.8908130915292852,MG=Wj(Gj/10)/Wj(7*Gj/10),tSe=Wj(N_/10)*MG,rSe=-AG(N_/10)*MG,nSe={draw(e,t){const r=Fl(t*eSe),s=tSe*r,i=rSe*r;e.moveTo(0,-r),e.lineTo(s,i);for(let a=1;a<5;++a){const o=N_*a/5,l=AG(o),c=Wj(o);e.lineTo(c*r,-l*r),e.lineTo(l*s-c*i,c*s+l*i)}e.closePath()}},I5=Fl(3),sSe={draw(e,t){const r=-Fl(t/(I5*3));e.moveTo(0,r*2),e.lineTo(-I5*r,-r),e.lineTo(I5*r,-r),e.closePath()}},Eo=-.5,To=Fl(3)/2,EP=1/Fl(12),iSe=(EP/2+1)*3,aSe={draw(e,t){const r=Fl(t/iSe),s=r/2,i=r*EP,a=s,o=r*EP+r,l=-a,c=o;e.moveTo(s,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(Eo*s-To*i,To*s+Eo*i),e.lineTo(Eo*a-To*o,To*a+Eo*o),e.lineTo(Eo*l-To*c,To*l+Eo*c),e.lineTo(Eo*s+To*i,Eo*i-To*s),e.lineTo(Eo*a+To*o,Eo*o-To*a),e.lineTo(Eo*l+To*c,Eo*c-To*l),e.closePath()}};function oSe(e,t){let r=null,s=gT(i);e=typeof e=="function"?e:xn(e||vT),t=typeof t=="function"?t:xn(t===void 0?64:+t);function i(){let a;if(r||(r=a=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:xn(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:xn(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Kj(){}function Zj(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function IG(e){this._context=e}IG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zj(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lSe(e){return new IG(e)}function RG(e){this._context=e}RG.prototype={areaStart:Kj,areaEnd:Kj,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Zj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cSe(e){return new RG(e)}function DG(e){this._context=e}DG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Zj(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uSe(e){return new DG(e)}function $G(e){this._context=e}$G.prototype={areaStart:Kj,areaEnd:Kj,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function dSe(e){return new $G(e)}function HM(e){return e<0?-1:1}function WM(e,t,r){var s=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(s||i<0&&-0),o=(r-e._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(HM(a)+HM(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function GM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function R5(e,t,r){var s=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-s)/3;e._context.bezierCurveTo(s+l,i+l*t,a-l,o-l*r,a,o)}function Xj(e){this._context=e}Xj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R5(this,this._t0,GM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,R5(this,GM(this,r=WM(this,e,t)),r);break;default:R5(this,this._t0,r=WM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function FG(e){this._context=new zG(e)}(FG.prototype=Object.create(Xj.prototype)).point=function(e,t){Xj.prototype.point.call(this,t,e)};function zG(e){this._context=e}zG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,i,a){this._context.bezierCurveTo(t,e,s,r,a,i)}};function hSe(e){return new Xj(e)}function fSe(e){return new FG(e)}function BG(e){this._context=e}BG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=KM(e),i=KM(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function KM(e){var t,r=e.length-1,s,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=i[t]/a[t-1],a[t]-=s,o[t]-=s*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function mSe(e){return new BG(e)}function A_(e,t){this._context=e,this._t=t}A_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function pSe(e){return new A_(e,.5)}function gSe(e){return new A_(e,0)}function xSe(e){return new A_(e,1)}function Pg(e,t){if((o=e.length)>1)for(var r=1,s,i,a=e[t[0]],o,l=a.length;r<o;++r)for(i=a,a=e[t[r]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function TP(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function vSe(e,t){return e[t]}function ySe(e){const t=[];return t.key=e,t}function bSe(){var e=xn([]),t=TP,r=Pg,s=vSe;function i(a){var o=Array.from(e.apply(this,arguments),ySe),l,c=o.length,u=-1,d;for(const h of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+s(h,o[l].key,u,a)]).data=h;for(l=0,d=xT(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:xn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:xn(+a),i):s},i.order=function(a){return arguments.length?(t=a==null?TP:typeof a=="function"?a:xn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Pg,i):r},i}function jSe(e,t){if((s=e.length)>0){for(var r,s,i=0,a=e[0].length,o;i<a;++i){for(o=r=0;r<s;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<s;++r)e[r][i][1]/=o}Pg(e,t)}}function wSe(e,t){if((i=e.length)>0){for(var r=0,s=e[t[0]],i,a=s.length;r<a;++r){for(var o=0,l=0;o<i;++o)l+=e[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}Pg(e,t)}}function _Se(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[s][1]||0,m=d[s-1][1]||0,p=(h-m)/2,v=0;v<l;++v){var g=e[t[v]],y=g[s][1]||0,j=g[s-1][1]||0;p+=y-j}c+=h,u+=p*h}i[s-1][1]+=i[s-1][0]=r,c&&(r-=u/c)}i[s-1][1]+=i[s-1][0]=r,Pg(e,t)}}function Iy(e){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}var NSe=["type","size","sizeType"];function OP(){return OP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},OP.apply(this,arguments)}function ZM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function XM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZM(Object(r),!0).forEach(function(s){SSe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZM(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function SSe(e,t,r){return t=ASe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ASe(e){var t=PSe(e,"string");return Iy(t)=="symbol"?t:t+""}function PSe(e,t){if(Iy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Iy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CSe(e,t){if(e==null)return{};var r=kSe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function kSe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var qG={symbolCircle:vT,symbolCross:X5e,symbolDiamond:J5e,symbolSquare:Q5e,symbolStar:nSe,symbolTriangle:sSe,symbolWye:aSe},ESe=Math.PI/180,TSe=function(t){var r="symbol".concat(__(t));return qG[r]||vT},OSe=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*ESe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},LSe=function(t,r){qG["symbol".concat(__(t))]=r},yT=function(t){var r=t.type,s=r===void 0?"circle":r,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=CSe(t,NSe),u=XM(XM({},c),{},{type:s,size:a,sizeType:l}),d=function(){var y=TSe(s),j=oSe().type(y).size(OSe(a,l,s));return j()},h=u.className,m=u.cx,p=u.cy,v=Bt(u,!0);return m===+m&&p===+p&&a===+a?we.createElement("path",OP({},v,{className:cr("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(p,")"),d:d()})):null};yT.registerSymbol=LSe;function Cg(e){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cg(e)}function LP(){return LP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},LP.apply(this,arguments)}function YM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function MSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(r),!0).forEach(function(s){Ry(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YM(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ISe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JM(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,UG(s.key),s)}}function RSe(e,t,r){return t&&JM(e.prototype,t),r&&JM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function DSe(e,t,r){return t=Yj(t),$Se(e,VG()?Reflect.construct(t,r||[],Yj(e).constructor):t.apply(e,r))}function $Se(e,t){if(t&&(Cg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FSe(e)}function FSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VG(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VG=function(){return!!e})()}function Yj(e){return Yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yj(e)}function zSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},MP(e,t)}function Ry(e,t,r){return t=UG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UG(e){var t=BSe(e,"string");return Cg(t)=="symbol"?t:t+""}function BSe(e,t){if(Cg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Cg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oo=32,bT=function(e){function t(){return ISe(this,t),DSe(this,t,arguments)}return zSe(t,e),RSe(t,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=Oo/2,o=Oo/6,l=Oo/3,c=s.inactive?i:s.color;if(s.type==="plainline")return we.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:Oo,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return we.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Oo,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return we.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Oo/8,"h").concat(Oo,"v").concat(Oo*3/4,"h").concat(-Oo,"z"),className:"recharts-legend-icon"});if(we.isValidElement(s.legendIcon)){var u=MSe({},s);return delete u.legendIcon,we.cloneElement(s.legendIcon,u)}return we.createElement(yT,{fill:c,cx:a,cy:a,size:Oo,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Oo,height:Oo},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,v){var g=p.formatter||c,y=cr(Ry(Ry({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var j=Xt(p.value)?null:p.value;Cl(!Xt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=p.inactive?u:p.color;return we.createElement("li",LP({className:y,style:h,key:"legend-item-".concat(v)},sm(s.props,p,v)),we.createElement(NP,{width:o,height:o,viewBox:d,style:m},s.renderIcon(p)),we.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},g?g(j,p,v):j))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return we.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);Ry(bT,"displayName","Legend");Ry(bT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qSe=u_;function VSe(){this.__data__=new qSe,this.size=0}var USe=VSe;function HSe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var WSe=HSe;function GSe(e){return this.__data__.get(e)}var KSe=GSe;function ZSe(e){return this.__data__.has(e)}var XSe=ZSe,YSe=u_,JSe=oT,QSe=lT,eAe=200;function tAe(e,t){var r=this.__data__;if(r instanceof YSe){var s=r.__data__;if(!JSe||s.length<eAe-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new QSe(s)}return r.set(e,t),this.size=r.size,this}var rAe=tAe,nAe=u_,sAe=USe,iAe=WSe,aAe=KSe,oAe=XSe,lAe=rAe;function Px(e){var t=this.__data__=new nAe(e);this.size=t.size}Px.prototype.clear=sAe;Px.prototype.delete=iAe;Px.prototype.get=aAe;Px.prototype.has=oAe;Px.prototype.set=lAe;var HG=Px,cAe="__lodash_hash_undefined__";function uAe(e){return this.__data__.set(e,cAe),this}var dAe=uAe;function hAe(e){return this.__data__.has(e)}var fAe=hAe,mAe=lT,pAe=dAe,gAe=fAe;function Jj(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new mAe;++t<r;)this.add(e[t])}Jj.prototype.add=Jj.prototype.push=pAe;Jj.prototype.has=gAe;var WG=Jj;function xAe(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var GG=xAe;function vAe(e,t){return e.has(t)}var KG=vAe,yAe=WG,bAe=GG,jAe=KG,wAe=1,_Ae=2;function NAe(e,t,r,s,i,a){var o=r&wAe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var h=-1,m=!0,p=r&_Ae?new yAe:void 0;for(a.set(e,t),a.set(t,e);++h<l;){var v=e[h],g=t[h];if(s)var y=o?s(g,v,h,t,e,a):s(v,g,h,e,t,a);if(y!==void 0){if(y)continue;m=!1;break}if(p){if(!bAe(t,function(j,_){if(!jAe(p,_)&&(v===j||i(v,j,r,s,a)))return p.push(_)})){m=!1;break}}else if(!(v===g||i(v,g,r,s,a))){m=!1;break}}return a.delete(e),a.delete(t),m}var ZG=NAe,SAe=Fc,AAe=SAe.Uint8Array,PAe=AAe;function CAe(e){var t=-1,r=Array(e.size);return e.forEach(function(s,i){r[++t]=[i,s]}),r}var kAe=CAe;function EAe(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var jT=EAe,QM=U0,eI=PAe,TAe=aT,OAe=ZG,LAe=kAe,MAe=jT,IAe=1,RAe=2,DAe="[object Boolean]",$Ae="[object Date]",FAe="[object Error]",zAe="[object Map]",BAe="[object Number]",qAe="[object RegExp]",VAe="[object Set]",UAe="[object String]",HAe="[object Symbol]",WAe="[object ArrayBuffer]",GAe="[object DataView]",tI=QM?QM.prototype:void 0,D5=tI?tI.valueOf:void 0;function KAe(e,t,r,s,i,a,o){switch(r){case GAe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case WAe:return!(e.byteLength!=t.byteLength||!a(new eI(e),new eI(t)));case DAe:case $Ae:case BAe:return TAe(+e,+t);case FAe:return e.name==t.name&&e.message==t.message;case qAe:case UAe:return e==t+"";case zAe:var l=LAe;case VAe:var c=s&IAe;if(l||(l=MAe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;s|=RAe,o.set(e,t);var d=OAe(l(e),l(t),s,i,a,o);return o.delete(e),d;case HAe:if(D5)return D5.call(e)==D5.call(t)}return!1}var ZAe=KAe;function XAe(e,t){for(var r=-1,s=t.length,i=e.length;++r<s;)e[i+r]=t[r];return e}var XG=XAe,YAe=XG,JAe=Da;function QAe(e,t,r){var s=t(e);return JAe(e)?s:YAe(s,r(e))}var ePe=QAe;function tPe(e,t){for(var r=-1,s=e==null?0:e.length,i=0,a=[];++r<s;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}var rPe=tPe;function nPe(){return[]}var sPe=nPe,iPe=rPe,aPe=sPe,oPe=Object.prototype,lPe=oPe.propertyIsEnumerable,rI=Object.getOwnPropertySymbols,cPe=rI?function(e){return e==null?[]:(e=Object(e),iPe(rI(e),function(t){return lPe.call(e,t)}))}:aPe,uPe=cPe;function dPe(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var hPe=dPe,fPe=Yu,mPe=Ju,pPe="[object Arguments]";function gPe(e){return mPe(e)&&fPe(e)==pPe}var xPe=gPe,nI=xPe,vPe=Ju,YG=Object.prototype,yPe=YG.hasOwnProperty,bPe=YG.propertyIsEnumerable,jPe=nI(function(){return arguments}())?nI:function(e){return vPe(e)&&yPe.call(e,"callee")&&!bPe.call(e,"callee")},wT=jPe,Qj={exports:{}};function wPe(){return!1}var _Pe=wPe;Qj.exports;(function(e,t){var r=Fc,s=_Pe,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||s;e.exports=u})(Qj,Qj.exports);var JG=Qj.exports,NPe=9007199254740991,SPe=/^(?:0|[1-9]\d*)$/;function APe(e,t){var r=typeof e;return t=t??NPe,!!t&&(r=="number"||r!="symbol"&&SPe.test(e))&&e>-1&&e%1==0&&e<t}var _T=APe,PPe=9007199254740991;function CPe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=PPe}var NT=CPe,kPe=Yu,EPe=NT,TPe=Ju,OPe="[object Arguments]",LPe="[object Array]",MPe="[object Boolean]",IPe="[object Date]",RPe="[object Error]",DPe="[object Function]",$Pe="[object Map]",FPe="[object Number]",zPe="[object Object]",BPe="[object RegExp]",qPe="[object Set]",VPe="[object String]",UPe="[object WeakMap]",HPe="[object ArrayBuffer]",WPe="[object DataView]",GPe="[object Float32Array]",KPe="[object Float64Array]",ZPe="[object Int8Array]",XPe="[object Int16Array]",YPe="[object Int32Array]",JPe="[object Uint8Array]",QPe="[object Uint8ClampedArray]",eCe="[object Uint16Array]",tCe="[object Uint32Array]",Sn={};Sn[GPe]=Sn[KPe]=Sn[ZPe]=Sn[XPe]=Sn[YPe]=Sn[JPe]=Sn[QPe]=Sn[eCe]=Sn[tCe]=!0;Sn[OPe]=Sn[LPe]=Sn[HPe]=Sn[MPe]=Sn[WPe]=Sn[IPe]=Sn[RPe]=Sn[DPe]=Sn[$Pe]=Sn[FPe]=Sn[zPe]=Sn[BPe]=Sn[qPe]=Sn[VPe]=Sn[UPe]=!1;function rCe(e){return TPe(e)&&EPe(e.length)&&!!Sn[kPe(e)]}var nCe=rCe;function sCe(e){return function(t){return e(t)}}var QG=sCe,ew={exports:{}};ew.exports;(function(e,t){var r=aG,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===s,o=a&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(ew,ew.exports);var iCe=ew.exports,aCe=nCe,oCe=QG,sI=iCe,iI=sI&&sI.isTypedArray,lCe=iI?oCe(iI):aCe,eK=lCe,cCe=hPe,uCe=wT,dCe=Da,hCe=JG,fCe=_T,mCe=eK,pCe=Object.prototype,gCe=pCe.hasOwnProperty;function xCe(e,t){var r=dCe(e),s=!r&&uCe(e),i=!r&&!s&&hCe(e),a=!r&&!s&&!i&&mCe(e),o=r||s||i||a,l=o?cCe(e.length,String):[],c=l.length;for(var u in e)(t||gCe.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||fCe(u,c)))&&l.push(u);return l}var vCe=xCe,yCe=Object.prototype;function bCe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||yCe;return e===r}var jCe=bCe;function wCe(e,t){return function(r){return e(t(r))}}var tK=wCe,_Ce=tK,NCe=_Ce(Object.keys,Object),SCe=NCe,ACe=jCe,PCe=SCe,CCe=Object.prototype,kCe=CCe.hasOwnProperty;function ECe(e){if(!ACe(e))return PCe(e);var t=[];for(var r in Object(e))kCe.call(e,r)&&r!="constructor"&&t.push(r);return t}var TCe=ECe,OCe=iT,LCe=NT;function MCe(e){return e!=null&&LCe(e.length)&&!OCe(e)}var H0=MCe,ICe=vCe,RCe=TCe,DCe=H0;function $Ce(e){return DCe(e)?ICe(e):RCe(e)}var P_=$Ce,FCe=ePe,zCe=uPe,BCe=P_;function qCe(e){return FCe(e,BCe,zCe)}var VCe=qCe,aI=VCe,UCe=1,HCe=Object.prototype,WCe=HCe.hasOwnProperty;function GCe(e,t,r,s,i,a){var o=r&UCe,l=aI(e),c=l.length,u=aI(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var m=l[h];if(!(o?m in t:WCe.call(t,m)))return!1}var p=a.get(e),v=a.get(t);if(p&&v)return p==t&&v==e;var g=!0;a.set(e,t),a.set(t,e);for(var y=o;++h<c;){m=l[h];var j=e[m],_=t[m];if(s)var w=o?s(_,j,m,t,e,a):s(j,_,m,e,t,a);if(!(w===void 0?j===_||i(j,_,r,s,a):w)){g=!1;break}y||(y=m=="constructor")}if(g&&!y){var A=e.constructor,S=t.constructor;A!=S&&"constructor"in e&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof S=="function"&&S instanceof S)&&(g=!1)}return a.delete(e),a.delete(t),g}var KCe=GCe,ZCe=jm,XCe=Fc,YCe=ZCe(XCe,"DataView"),JCe=YCe,QCe=jm,e4e=Fc,t4e=QCe(e4e,"Promise"),r4e=t4e,n4e=jm,s4e=Fc,i4e=n4e(s4e,"Set"),rK=i4e,a4e=jm,o4e=Fc,l4e=a4e(o4e,"WeakMap"),c4e=l4e,IP=JCe,RP=oT,DP=r4e,$P=rK,FP=c4e,nK=Yu,Cx=lG,oI="[object Map]",u4e="[object Object]",lI="[object Promise]",cI="[object Set]",uI="[object WeakMap]",dI="[object DataView]",d4e=Cx(IP),h4e=Cx(RP),f4e=Cx(DP),m4e=Cx($P),p4e=Cx(FP),vf=nK;(IP&&vf(new IP(new ArrayBuffer(1)))!=dI||RP&&vf(new RP)!=oI||DP&&vf(DP.resolve())!=lI||$P&&vf(new $P)!=cI||FP&&vf(new FP)!=uI)&&(vf=function(e){var t=nK(e),r=t==u4e?e.constructor:void 0,s=r?Cx(r):"";if(s)switch(s){case d4e:return dI;case h4e:return oI;case f4e:return lI;case m4e:return cI;case p4e:return uI}return t});var g4e=vf,$5=HG,x4e=ZG,v4e=ZAe,y4e=KCe,hI=g4e,fI=Da,mI=JG,b4e=eK,j4e=1,pI="[object Arguments]",gI="[object Array]",Xb="[object Object]",w4e=Object.prototype,xI=w4e.hasOwnProperty;function _4e(e,t,r,s,i,a){var o=fI(e),l=fI(t),c=o?gI:hI(e),u=l?gI:hI(t);c=c==pI?Xb:c,u=u==pI?Xb:u;var d=c==Xb,h=u==Xb,m=c==u;if(m&&mI(e)){if(!mI(t))return!1;o=!0,d=!1}if(m&&!d)return a||(a=new $5),o||b4e(e)?x4e(e,t,r,s,i,a):v4e(e,t,c,r,s,i,a);if(!(r&j4e)){var p=d&&xI.call(e,"__wrapped__"),v=h&&xI.call(t,"__wrapped__");if(p||v){var g=p?e.value():e,y=v?t.value():t;return a||(a=new $5),i(g,y,r,s,a)}}return m?(a||(a=new $5),y4e(e,t,r,s,i,a)):!1}var N4e=_4e,S4e=N4e,vI=Ju;function sK(e,t,r,s,i){return e===t?!0:e==null||t==null||!vI(e)&&!vI(t)?e!==e&&t!==t:S4e(e,t,r,s,sK,i)}var ST=sK,A4e=HG,P4e=ST,C4e=1,k4e=2;function E4e(e,t,r,s){var i=r.length,a=i,o=!s;if(e==null)return!a;for(e=Object(e);i--;){var l=r[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=r[i];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new A4e;if(s)var m=s(u,d,c,e,t,h);if(!(m===void 0?P4e(d,u,C4e|k4e,s,h):m))return!1}}return!0}var T4e=E4e,O4e=Oh;function L4e(e){return e===e&&!O4e(e)}var iK=L4e,M4e=iK,I4e=P_;function R4e(e){for(var t=I4e(e),r=t.length;r--;){var s=t[r],i=e[s];t[r]=[s,i,M4e(i)]}return t}var D4e=R4e;function $4e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var aK=$4e,F4e=T4e,z4e=D4e,B4e=aK;function q4e(e){var t=z4e(e);return t.length==1&&t[0][2]?B4e(t[0][0],t[0][1]):function(r){return r===e||F4e(r,e,t)}}var V4e=q4e;function U4e(e,t){return e!=null&&t in Object(e)}var H4e=U4e,W4e=fG,G4e=wT,K4e=Da,Z4e=_T,X4e=NT,Y4e=h_;function J4e(e,t,r){t=W4e(t,e);for(var s=-1,i=t.length,a=!1;++s<i;){var o=Y4e(t[s]);if(!(a=e!=null&&r(e,o)))break;e=e[o]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&X4e(i)&&Z4e(o,i)&&(K4e(e)||G4e(e)))}var Q4e=J4e,eke=H4e,tke=Q4e;function rke(e,t){return e!=null&&tke(e,t,eke)}var nke=rke,ske=ST,ike=mG,ake=nke,oke=sT,lke=iK,cke=aK,uke=h_,dke=1,hke=2;function fke(e,t){return oke(e)&&lke(t)?cke(uke(e),t):function(r){var s=ike(r,e);return s===void 0&&s===t?ake(r,e):ske(t,s,dke|hke)}}var mke=fke;function pke(e){return e}var kx=pke;function gke(e){return function(t){return t==null?void 0:t[e]}}var xke=gke,vke=dT;function yke(e){return function(t){return vke(t,e)}}var bke=yke,jke=xke,wke=bke,_ke=sT,Nke=h_;function Ske(e){return _ke(e)?jke(Nke(e)):wke(e)}var Ake=Ske,Pke=V4e,Cke=mke,kke=kx,Eke=Da,Tke=Ake;function Oke(e){return typeof e=="function"?e:e==null?kke:typeof e=="object"?Eke(e)?Cke(e[0],e[1]):Pke(e):Tke(e)}var zc=Oke;function Lke(e,t,r,s){for(var i=e.length,a=r+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var oK=Lke;function Mke(e){return e!==e}var Ike=Mke;function Rke(e,t,r){for(var s=r-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}var Dke=Rke,$ke=oK,Fke=Ike,zke=Dke;function Bke(e,t,r){return t===t?zke(e,t,r):$ke(e,Fke,r)}var qke=Bke,Vke=qke;function Uke(e,t){var r=e==null?0:e.length;return!!r&&Vke(e,t,0)>-1}var Hke=Uke;function Wke(e,t,r){for(var s=-1,i=e==null?0:e.length;++s<i;)if(r(t,e[s]))return!0;return!1}var Gke=Wke;function Kke(){}var Zke=Kke,F5=rK,Xke=Zke,Yke=jT,Jke=1/0,Qke=F5&&1/Yke(new F5([,-0]))[1]==Jke?function(e){return new F5(e)}:Xke,eEe=Qke,tEe=WG,rEe=Hke,nEe=Gke,sEe=KG,iEe=eEe,aEe=jT,oEe=200;function lEe(e,t,r){var s=-1,i=rEe,a=e.length,o=!0,l=[],c=l;if(r)o=!1,i=nEe;else if(a>=oEe){var u=t?null:iEe(e);if(u)return aEe(u);o=!1,i=sEe,c=new tEe}else c=t?[]:l;e:for(;++s<a;){var d=e[s],h=t?t(d):d;if(d=r||d!==0?d:0,o&&h===h){for(var m=c.length;m--;)if(c[m]===h)continue e;t&&c.push(h),l.push(d)}else i(c,h,r)||(c!==l&&c.push(h),l.push(d))}return l}var cEe=lEe,uEe=zc,dEe=cEe;function hEe(e,t){return e&&e.length?dEe(e,uEe(t)):[]}var fEe=hEe;const yI=Er(fEe);function lK(e,t,r){return t===!0?yI(e,r):Xt(t)?yI(e,t):e}function kg(e){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kg(e)}var mEe=["ref"];function bI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function lu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bI(Object(r),!0).forEach(function(s){C_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jI(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uK(s.key),s)}}function gEe(e,t,r){return t&&jI(e.prototype,t),r&&jI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xEe(e,t,r){return t=tw(t),vEe(e,cK()?Reflect.construct(t,r||[],tw(e).constructor):t.apply(e,r))}function vEe(e,t){if(t&&(kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yEe(e)}function yEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cK=function(){return!!e})()}function tw(e){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tw(e)}function bEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zP(e,t)}function zP(e,t){return zP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},zP(e,t)}function C_(e,t,r){return t=uK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uK(e){var t=jEe(e,"string");return kg(t)=="symbol"?t:t+""}function jEe(e,t){if(kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wEe(e,t){if(e==null)return{};var r=_Ee(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function _Ee(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function NEe(e){return e.value}function SEe(e,t){if(we.isValidElement(e))return we.cloneElement(e,t);if(typeof e=="function")return we.createElement(e,t);t.ref;var r=wEe(t,mEe);return we.createElement(bT,r)}var wI=1,bc=function(e){function t(){var r;pEe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=xEe(this,t,[].concat(i)),C_(r,"lastBoundingBox",{width:-1,height:-1}),r}return bEe(t,e),gEe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>wI||Math.abs(i.height-this.lastBoundingBox.height)>wI)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?lu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,h,m;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();h={left:((u||0)-p.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((d||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return lu(lu({},h),m)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,h=lu(lu({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return we.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(p){s.wrapperNode=p}},SEe(a,lu(lu({},this.props),{},{payload:lK(d,u,NEe)})))}}],[{key:"getWithHeight",value:function(s,i){var a=lu(lu({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&gt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(x.PureComponent);C_(bc,"displayName","Legend");C_(bc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _I=U0,AEe=wT,PEe=Da,NI=_I?_I.isConcatSpreadable:void 0;function CEe(e){return PEe(e)||AEe(e)||!!(NI&&e&&e[NI])}var kEe=CEe,EEe=XG,TEe=kEe;function dK(e,t,r,s,i){var a=-1,o=e.length;for(r||(r=TEe),i||(i=[]);++a<o;){var l=e[a];t>0&&r(l)?t>1?dK(l,t-1,r,s,i):EEe(i,l):s||(i[i.length]=l)}return i}var hK=dK;function OEe(e){return function(t,r,s){for(var i=-1,a=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++i];if(r(a[c],c,a)===!1)break}return t}}var LEe=OEe,MEe=LEe,IEe=MEe(),REe=IEe,DEe=REe,$Ee=P_;function FEe(e,t){return e&&DEe(e,t,$Ee)}var fK=FEe,zEe=H0;function BEe(e,t){return function(r,s){if(r==null)return r;if(!zEe(r))return e(r,s);for(var i=r.length,a=t?i:-1,o=Object(r);(t?a--:++a<i)&&s(o[a],a,o)!==!1;);return r}}var qEe=BEe,VEe=fK,UEe=qEe,HEe=UEe(VEe),AT=HEe,WEe=AT,GEe=H0;function KEe(e,t){var r=-1,s=GEe(e)?Array(e.length):[];return WEe(e,function(i,a,o){s[++r]=t(i,a,o)}),s}var mK=KEe;function ZEe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var XEe=ZEe,SI=jx;function YEe(e,t){if(e!==t){var r=e!==void 0,s=e===null,i=e===e,a=SI(e),o=t!==void 0,l=t===null,c=t===t,u=SI(t);if(!l&&!u&&!a&&e>t||a&&o&&c&&!l&&!u||s&&o&&c||!r&&c||!i)return 1;if(!s&&!a&&!u&&e<t||u&&r&&i&&!s&&!a||l&&r&&i||!o&&i||!c)return-1}return 0}var JEe=YEe,QEe=JEe;function eTe(e,t,r){for(var s=-1,i=e.criteria,a=t.criteria,o=i.length,l=r.length;++s<o;){var c=QEe(i[s],a[s]);if(c){if(s>=l)return c;var u=r[s];return c*(u=="desc"?-1:1)}}return e.index-t.index}var tTe=eTe,z5=uT,rTe=dT,nTe=zc,sTe=mK,iTe=XEe,aTe=QG,oTe=tTe,lTe=kx,cTe=Da;function uTe(e,t,r){t.length?t=z5(t,function(a){return cTe(a)?function(o){return rTe(o,a.length===1?a[0]:a)}:a}):t=[lTe];var s=-1;t=z5(t,aTe(nTe));var i=sTe(e,function(a,o,l){var c=z5(t,function(u){return u(a)});return{criteria:c,index:++s,value:a}});return iTe(i,function(a,o){return oTe(a,o,r)})}var dTe=uTe;function hTe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var fTe=hTe,mTe=fTe,AI=Math.max;function pTe(e,t,r){return t=AI(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=AI(s.length-t,0),o=Array(a);++i<a;)o[i]=s[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=s[i];return l[t]=r(o),mTe(e,this,l)}}var gTe=pTe;function xTe(e){return function(){return e}}var vTe=xTe,yTe=jm,bTe=function(){try{var e=yTe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),pK=bTe,jTe=vTe,PI=pK,wTe=kx,_Te=PI?function(e,t){return PI(e,"toString",{configurable:!0,enumerable:!1,value:jTe(t),writable:!0})}:wTe,NTe=_Te,STe=800,ATe=16,PTe=Date.now;function CTe(e){var t=0,r=0;return function(){var s=PTe(),i=ATe-(s-r);if(r=s,i>0){if(++t>=STe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var kTe=CTe,ETe=NTe,TTe=kTe,OTe=TTe(ETe),LTe=OTe,MTe=kx,ITe=gTe,RTe=LTe;function DTe(e,t){return RTe(ITe(e,t,MTe),e+"")}var $Te=DTe,FTe=aT,zTe=H0,BTe=_T,qTe=Oh;function VTe(e,t,r){if(!qTe(r))return!1;var s=typeof t;return(s=="number"?zTe(r)&&BTe(t,r.length):s=="string"&&t in r)?FTe(r[t],e):!1}var k_=VTe,UTe=hK,HTe=dTe,WTe=$Te,CI=k_,GTe=WTe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&CI(e,t[0],t[1])?t=[]:r>2&&CI(t[0],t[1],t[2])&&(t=[t[0]]),HTe(e,UTe(t,1),[])}),KTe=GTe;const PT=Er(KTe);function Dy(e){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dy(e)}function BP(){return BP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},BP.apply(this,arguments)}function ZTe(e,t){return QTe(e)||JTe(e,t)||YTe(e,t)||XTe()}function XTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YTe(e,t){if(e){if(typeof e=="string")return kI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kI(e,t)}}function kI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function JTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function QTe(e){if(Array.isArray(e))return e}function EI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function B5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(r),!0).forEach(function(s){e3e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function e3e(e,t,r){return t=t3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t3e(e){var t=r3e(e,"string");return Dy(t)=="symbol"?t:t+""}function r3e(e,t){if(Dy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Dy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n3e(e){return Array.isArray(e)&&Rs(e[0])&&Rs(e[1])?e.join(" ~ "):e}var s3e=function(t){var r=t.separator,s=r===void 0?" : ":r,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,m=t.itemSorter,p=t.wrapperClassName,v=t.labelClassName,g=t.label,y=t.labelFormatter,j=t.accessibilityLayer,_=j===void 0?!1:j,w=function(){if(d&&d.length){var I={padding:0,margin:0},q=(m?PT(d,m):d).map(function(F,W){if(F.type==="none")return null;var V=B5({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},l),ne=F.formatter||h||n3e,G=F.value,K=F.name,ee=G,xe=K;if(ne&&ee!=null&&xe!=null){var B=ne(G,K,F,W,d);if(Array.isArray(B)){var X=ZTe(B,2);ee=X[0],xe=X[1]}else ee=B}return we.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:V},Rs(xe)?we.createElement("span",{className:"recharts-tooltip-item-name"},xe):null,Rs(xe)?we.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,we.createElement("span",{className:"recharts-tooltip-item-value"},ee),we.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return we.createElement("ul",{className:"recharts-tooltip-item-list",style:I},q)}return null},A=B5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),S=B5({margin:0},u),P=!ir(g),C=P?g:"",T=cr("recharts-default-tooltip",p),M=cr("recharts-tooltip-label",v);P&&y&&d!==void 0&&d!==null&&(C=y(g,d));var z=_?{role:"status","aria-live":"assertive"}:{};return we.createElement("div",BP({className:T,style:A},z),we.createElement("p",{className:M,style:S},we.isValidElement(C)?C:"".concat(C)),w())};function $y(e){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$y(e)}function Yb(e,t,r){return t=i3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i3e(e){var t=a3e(e,"string");return $y(t)=="symbol"?t:t+""}function a3e(e,t){if($y(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if($y(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dv="recharts-tooltip-wrapper",o3e={visibility:"hidden"};function l3e(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return cr(dv,Yb(Yb(Yb(Yb({},"".concat(dv,"-right"),gt(r)&&t&&gt(t.x)&&r>=t.x),"".concat(dv,"-left"),gt(r)&&t&&gt(t.x)&&r<t.x),"".concat(dv,"-bottom"),gt(s)&&t&&gt(t.y)&&s>=t.y),"".concat(dv,"-top"),gt(s)&&t&&gt(t.y)&&s<t.y))}function TI(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(a&&gt(a[s]))return a[s];var d=r[s]-l-i,h=r[s]+i;if(t[s])return o[s]?d:h;if(o[s]){var m=d,p=c[s];return m<p?Math.max(h,c[s]):Math.max(d,c[s])}var v=h+l,g=c[s]+u;return v>g?Math.max(d,c[s]):Math.max(h,c[s])}function c3e(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function u3e(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&r?(d=TI({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=TI({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=c3e({translateX:d,translateY:h,useTranslate3d:l})):u=o3e,{cssProperties:u,cssClasses:l3e({translateX:d,translateY:h,coordinate:r})}}function Eg(e){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(e)}function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function LI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(r),!0).forEach(function(s){VP(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function d3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MI(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xK(s.key),s)}}function h3e(e,t,r){return t&&MI(e.prototype,t),r&&MI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f3e(e,t,r){return t=rw(t),m3e(e,gK()?Reflect.construct(t,r||[],rw(e).constructor):t.apply(e,r))}function m3e(e,t){if(t&&(Eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p3e(e)}function p3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gK=function(){return!!e})()}function rw(e){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rw(e)}function g3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qP(e,t)}function qP(e,t){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},qP(e,t)}function VP(e,t,r){return t=xK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=x3e(e,"string");return Eg(t)=="symbol"?t:t+""}function x3e(e,t){if(Eg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Eg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var II=1,v3e=function(e){function t(){var r;d3e(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=f3e(this,t,[].concat(i)),VP(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),VP(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return g3e(t,e),h3e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>II||Math.abs(s.height-this.state.lastBoundingBox.height)>II)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,h=i.hasPayload,m=i.isAnimationActive,p=i.offset,v=i.position,g=i.reverseDirection,y=i.useTranslate3d,j=i.viewBox,_=i.wrapperStyle,w=u3e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:j}),A=w.cssClasses,S=w.cssProperties,P=LI(LI({transition:m&&a?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},_);return we.createElement("div",{tabIndex:-1,className:A,style:P,ref:function(T){s.wrapperNode=T}},u)}}])}(x.PureComponent),y3e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},kl={isSsr:y3e(),get:function(t){return kl[t]},set:function(t,r){if(typeof t=="string")kl[t]=r;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(i){kl[i]=t[i]})}}};function Tg(e){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(e)}function RI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function DI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(r),!0).forEach(function(s){CT(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function b3e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $I(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yK(s.key),s)}}function j3e(e,t,r){return t&&$I(e.prototype,t),r&&$I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function w3e(e,t,r){return t=nw(t),_3e(e,vK()?Reflect.construct(t,r||[],nw(e).constructor):t.apply(e,r))}function _3e(e,t){if(t&&(Tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N3e(e)}function N3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vK=function(){return!!e})()}function nw(e){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nw(e)}function S3e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UP(e,t)}function UP(e,t){return UP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},UP(e,t)}function CT(e,t,r){return t=yK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=A3e(e,"string");return Tg(t)=="symbol"?t:t+""}function A3e(e,t){if(Tg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Tg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P3e(e){return e.dataKey}function C3e(e,t){return we.isValidElement(e)?we.cloneElement(e,t):typeof e=="function"?we.createElement(e,t):we.createElement(s3e,t)}var es=function(e){function t(){return b3e(this,t),w3e(this,t,arguments)}return S3e(t,e),j3e(t,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,h=i.filterNull,m=i.isAnimationActive,p=i.offset,v=i.payload,g=i.payloadUniqBy,y=i.position,j=i.reverseDirection,_=i.useTranslate3d,w=i.viewBox,A=i.wrapperStyle,S=v??[];h&&S.length&&(S=lK(v.filter(function(C){return C.value!=null&&(C.hide!==!0||s.props.includeHidden)}),g,P3e));var P=S.length>0;return we.createElement(v3e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:a,coordinate:d,hasPayload:P,offset:p,position:y,reverseDirection:j,useTranslate3d:_,viewBox:w,wrapperStyle:A},C3e(u,DI(DI({},this.props),{},{payload:S})))}}])}(x.PureComponent);CT(es,"displayName","Tooltip");CT(es,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!kl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var k3e=Fc,E3e=function(){return k3e.Date.now()},T3e=E3e,O3e=/\s/;function L3e(e){for(var t=e.length;t--&&O3e.test(e.charAt(t)););return t}var M3e=L3e,I3e=M3e,R3e=/^\s+/;function D3e(e){return e&&e.slice(0,I3e(e)+1).replace(R3e,"")}var $3e=D3e,F3e=$3e,FI=Oh,z3e=jx,zI=0/0,B3e=/^[-+]0x[0-9a-f]+$/i,q3e=/^0b[01]+$/i,V3e=/^0o[0-7]+$/i,U3e=parseInt;function H3e(e){if(typeof e=="number")return e;if(z3e(e))return zI;if(FI(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=FI(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=F3e(e);var r=q3e.test(e);return r||V3e.test(e)?U3e(e.slice(2),r?2:8):B3e.test(e)?zI:+e}var bK=H3e,W3e=Oh,q5=T3e,BI=bK,G3e="Expected a function",K3e=Math.max,Z3e=Math.min;function X3e(e,t,r){var s,i,a,o,l,c,u=0,d=!1,h=!1,m=!0;if(typeof e!="function")throw new TypeError(G3e);t=BI(t)||0,W3e(r)&&(d=!!r.leading,h="maxWait"in r,a=h?K3e(BI(r.maxWait)||0,t):a,m="trailing"in r?!!r.trailing:m);function p(P){var C=s,T=i;return s=i=void 0,u=P,o=e.apply(T,C),o}function v(P){return u=P,l=setTimeout(j,t),d?p(P):o}function g(P){var C=P-c,T=P-u,M=t-C;return h?Z3e(M,a-T):M}function y(P){var C=P-c,T=P-u;return c===void 0||C>=t||C<0||h&&T>=a}function j(){var P=q5();if(y(P))return _(P);l=setTimeout(j,g(P))}function _(P){return l=void 0,m&&s?p(P):(s=i=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,s=c=i=l=void 0}function A(){return l===void 0?o:_(q5())}function S(){var P=q5(),C=y(P);if(s=arguments,i=this,c=P,C){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(j,t),p(c)}return l===void 0&&(l=setTimeout(j,t)),o}return S.cancel=w,S.flush=A,S}var Y3e=X3e,J3e=Y3e,Q3e=Oh,eOe="Expected a function";function tOe(e,t,r){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(eOe);return Q3e(r)&&(s="leading"in r?!!r.leading:s,i="trailing"in r?!!r.trailing:i),J3e(e,t,{leading:s,maxWait:t,trailing:i})}var rOe=tOe;const jK=Er(rOe);function Fy(e){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(e)}function qI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Jb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(r),!0).forEach(function(s){nOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nOe(e,t,r){return t=sOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sOe(e){var t=iOe(e,"string");return Fy(t)=="symbol"?t:t+""}function iOe(e,t){if(Fy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Fy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aOe(e,t){return uOe(e)||cOe(e,t)||lOe(e,t)||oOe()}function oOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lOe(e,t){if(e){if(typeof e=="string")return VI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VI(e,t)}}function VI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function cOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function uOe(e){if(Array.isArray(e))return e}var co=x.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,m=e.maxHeight,p=e.children,v=e.debounce,g=v===void 0?0:v,y=e.id,j=e.className,_=e.onResize,w=e.style,A=w===void 0?{}:w,S=x.useRef(null),P=x.useRef();P.current=_,x.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var C=x.useState({containerWidth:i.width,containerHeight:i.height}),T=aOe(C,2),M=T[0],z=T[1],O=x.useCallback(function(q,F){z(function(W){var V=Math.round(q),ne=Math.round(F);return W.containerWidth===V&&W.containerHeight===ne?W:{containerWidth:V,containerHeight:ne}})},[]);x.useEffect(function(){var q=function(K){var ee,xe=K[0].contentRect,B=xe.width,X=xe.height;O(B,X),(ee=P.current)===null||ee===void 0||ee.call(P,B,X)};g>0&&(q=jK(q,g,{trailing:!0,leading:!1}));var F=new ResizeObserver(q),W=S.current.getBoundingClientRect(),V=W.width,ne=W.height;return O(V,ne),F.observe(S.current),function(){F.disconnect()}},[O,g]);var I=x.useMemo(function(){var q=M.containerWidth,F=M.containerHeight;if(q<0||F<0)return null;Cl(Ef(o)||Ef(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Cl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var W=Ef(o)?q:o,V=Ef(c)?F:c;r&&r>0&&(W?V=W/r:V&&(W=V*r),m&&V>m&&(V=m)),Cl(W>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,V,o,c,d,h,r);var ne=!Array.isArray(p)&&Cu(p.type).endsWith("Chart");return we.Children.map(p,function(G){return we.isValidElement(G)?x.cloneElement(G,Jb({width:W,height:V},ne?{style:Jb({height:"100%",width:"100%",maxHeight:V,maxWidth:W},G.props.style)}:{})):G})},[r,p,c,m,h,d,M,o]);return we.createElement("div",{id:y?"".concat(y):void 0,className:cr("recharts-responsive-container",j),style:Jb(Jb({},A),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:m}),ref:S},I)}),_m=function(t){return null};_m.displayName="Cell";function zy(e){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(e)}function UI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function HP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(r),!0).forEach(function(s){dOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UI(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function dOe(e,t,r){return t=hOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hOe(e){var t=fOe(e,"string");return zy(t)=="symbol"?t:t+""}function fOe(e,t){if(zy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(zy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var op={widthCache:{},cacheCount:0},mOe=2e3,pOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HI="recharts_measurement_span";function gOe(e){var t=HP({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Zv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||kl.isSsr)return{width:0,height:0};var s=gOe(r),i=JSON.stringify({text:t,copyStyle:s});if(op.widthCache[i])return op.widthCache[i];try{var a=document.getElementById(HI);a||(a=document.createElement("span"),a.setAttribute("id",HI),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=HP(HP({},pOe),s);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return op.widthCache[i]=c,++op.cacheCount>mOe&&(op.cacheCount=0,op.widthCache={}),c}catch{return{width:0,height:0}}},xOe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}function sw(e,t){return jOe(e)||bOe(e,t)||yOe(e,t)||vOe()}function vOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yOe(e,t){if(e){if(typeof e=="string")return WI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WI(e,t)}}function WI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function bOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function jOe(e){if(Array.isArray(e))return e}function wOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GI(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NOe(s.key),s)}}function _Oe(e,t,r){return t&&GI(e.prototype,t),r&&GI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NOe(e){var t=SOe(e,"string");return By(t)=="symbol"?t:t+""}function SOe(e,t){if(By(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(By(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,POe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},COe=Object.keys(wK),Rp="NaN";function kOe(e,t){return e*wK[t]}var Qb=function(){function e(t,r){wOe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!AOe.test(r)&&(this.num=NaN,this.unit=""),COe.includes(r)&&(this.num=kOe(t,r),this.unit="px")}return _Oe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,i=(s=POe.exec(r))!==null&&s!==void 0?s:[],a=sw(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function _K(e){if(e.includes(Rp))return Rp;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=KI.exec(t))!==null&&r!==void 0?r:[],i=sw(s,4),a=i[1],o=i[2],l=i[3],c=Qb.parse(a??""),u=Qb.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Rp;t=t.replace(KI,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,m=(h=ZI.exec(t))!==null&&h!==void 0?h:[],p=sw(m,4),v=p[1],g=p[2],y=p[3],j=Qb.parse(v??""),_=Qb.parse(y??""),w=g==="+"?j.add(_):j.subtract(_);if(w.isNaN())return Rp;t=t.replace(ZI,w.toString())}return t}var XI=/\(([^()]*)\)/;function EOe(e){for(var t=e;t.includes("(");){var r=XI.exec(t),s=sw(r,2),i=s[1];t=t.replace(XI,_K(i))}return t}function TOe(e){var t=e.replace(/\s+/g,"");return t=EOe(t),t=_K(t),t}function OOe(e){try{return TOe(e)}catch{return Rp}}function V5(e){var t=OOe(e.slice(5,-1));return t===Rp?"":t}var LOe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],MOe=["dx","dy","angle","className","breakAll"];function WP(){return WP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},WP.apply(this,arguments)}function YI(e,t){if(e==null)return{};var r=IOe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function IOe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function JI(e,t){return FOe(e)||$Oe(e,t)||DOe(e,t)||ROe()}function ROe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DOe(e,t){if(e){if(typeof e=="string")return QI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QI(e,t)}}function QI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function $Oe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function FOe(e){if(Array.isArray(e))return e}var NK=/[ \f\n\r\t\v\u2028\u2029]+/,SK=function(t){var r=t.children,s=t.breakAll,i=t.style;try{var a=[];ir(r)||(s?a=r.toString().split(""):a=r.toString().split(NK));var o=a.map(function(c){return{word:c,width:Zv(c,i).width}}),l=s?0:Zv("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},zOe=function(t,r,s,i,a){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=gt(o),h=l,m=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(V,ne){var G=ne.word,K=ne.width,ee=V[V.length-1];if(ee&&(i==null||a||ee.width+K+s<Number(i)))ee.words.push(G),ee.width+=K+s;else{var xe={words:[G],width:K};V.push(xe)}return V},[])},p=m(r),v=function(W){return W.reduce(function(V,ne){return V.width>ne.width?V:ne})};if(!d)return p;for(var g="",y=function(W){var V=h.slice(0,W),ne=SK({breakAll:u,style:c,children:V+g}).wordsWithComputedWidth,G=m(ne),K=G.length>o||v(G).width>Number(i);return[K,G]},j=0,_=h.length-1,w=0,A;j<=_&&w<=h.length-1;){var S=Math.floor((j+_)/2),P=S-1,C=y(P),T=JI(C,2),M=T[0],z=T[1],O=y(S),I=JI(O,1),q=I[0];if(!M&&!q&&(j=S+1),M&&q&&(_=S-1),!M&&q){A=z;break}w++}return A||p},eR=function(t){var r=ir(t)?[]:t.toString().split(NK);return[{words:r}]},BOe=function(t){var r=t.width,s=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((r||s)&&!kl.isSsr){var c,u,d=SK({breakAll:o,children:i,style:a});if(d){var h=d.wordsWithComputedWidth,m=d.spaceWidth;c=h,u=m}else return eR(i);return zOe({breakAll:o,children:i,maxLines:l,style:a},c,u,r,s)}return eR(i)},tR="#808080",im=function(t){var r=t.x,s=r===void 0?0:r,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,m=t.textAnchor,p=m===void 0?"start":m,v=t.verticalAnchor,g=v===void 0?"end":v,y=t.fill,j=y===void 0?tR:y,_=YI(t,LOe),w=x.useMemo(function(){return BOe({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:h,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,h,_.style,_.width]),A=_.dx,S=_.dy,P=_.angle,C=_.className,T=_.breakAll,M=YI(_,MOe);if(!Rs(s)||!Rs(a))return null;var z=s+(gt(A)?A:0),O=a+(gt(S)?S:0),I;switch(g){case"start":I=V5("calc(".concat(u,")"));break;case"middle":I=V5("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=V5("calc(".concat(w.length-1," * -").concat(l,")"));break}var q=[];if(h){var F=w[0].width,W=_.width;q.push("scale(".concat((gt(W)?W/F:1)/F,")"))}return P&&q.push("rotate(".concat(P,", ").concat(z,", ").concat(O,")")),q.length&&(M.transform=q.join(" ")),we.createElement("text",WP({},Bt(M,!0),{x:z,y:O,className:cr("recharts-text",C),textAnchor:p,fill:j.includes("url")?tR:j}),w.map(function(V,ne){var G=V.words.join(T?"":" ");return we.createElement("tspan",{x:z,dy:ne===0?I:l,key:"".concat(G,"-").concat(ne)},G)}))};function oh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qOe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kT(e){let t,r,s;e.length!==2?(t=oh,r=(l,c)=>oh(e(l),c),s=(l,c)=>e(l)-c):(t=e===oh||e===qOe?e:VOe,r=e,s=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=i(l,c,u,d-1);return h>u&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:i,center:o,right:a}}function VOe(){return 0}function AK(e){return e===null?NaN:+e}function*UOe(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(yield s)}}const HOe=kT(oh),WOe=HOe.right;kT(AK).center;const W0=WOe;class rR extends Map{constructor(t,r=ZOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,i]of t)this.set(s,i)}get(t){return super.get(nR(this,t))}has(t){return super.has(nR(this,t))}set(t,r){return super.set(GOe(this,t),r)}delete(t){return super.delete(KOe(this,t))}}function nR({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function GOe({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function KOe({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function ZOe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XOe(e=oh){if(e===oh)return PK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function PK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YOe=Math.sqrt(50),JOe=Math.sqrt(10),QOe=Math.sqrt(2);function iw(e,t,r){const s=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=YOe?10:a>=JOe?5:a>=QOe?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?iw(e,t,r*2):[l,c,u]}function GP(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[i,a,o]=s?iw(t,e,r):iw(e,t,r);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function KP(e,t,r){return t=+t,e=+e,r=+r,iw(e,t,r)[2]}function ZP(e,t,r){t=+t,e=+e,r=+r;const s=t<e,i=s?KP(t,e,r):KP(e,t,r);return(s?-1:1)*(i<0?1/-i:i)}function sR(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let i of e)(i=t(i,++s,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function iR(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let i of e)(i=t(i,++s,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function CK(e,t,r=0,s=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(i=i===void 0?PK:XOe(i);s>r;){if(s-r>600){const c=s-r+1,u=t-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*h/c+m)),v=Math.min(s,Math.floor(t+(c-u)*h/c+m));CK(e,t,p,v,i)}const a=e[t];let o=r,l=s;for(hv(e,r,t),i(e[s],a)>0&&hv(e,r,s);o<l;){for(hv(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[r],a)===0?hv(e,r,l):(++l,hv(e,l,s)),l<=t&&(r=l+1),t<=l&&(s=l-1)}return e}function hv(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function e6e(e,t,r){if(e=Float64Array.from(UOe(e,r)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return iR(e);if(t>=1)return sR(e);var s,i=(s-1)*t,a=Math.floor(i),o=sR(CK(e,a).subarray(0,a+1)),l=iR(e.subarray(a+1));return o+(l-o)*(i-a)}}function t6e(e,t,r=AK){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,i=(s-1)*t,a=Math.floor(i),o=+r(e[a],a,e),l=+r(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function r6e(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var s=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++s<i;)a[s]=e+s*r;return a}function Zo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const XP=Symbol("implicit");function ET(){var e=new rR,t=[],r=[],s=XP;function i(a){let o=e.get(a);if(o===void 0){if(s!==XP)return s;e.set(a,o=t.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new rR;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return ET(t,r).unknown(s)},Zo.apply(i,arguments),i}function qy(){var e=ET().unknown(void 0),t=e.domain,r=e.range,s=0,i=1,a,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var m=t().length,p=i<s,v=p?i:s,g=p?s:i;a=(g-v)/Math.max(1,m-c+u*2),l&&(a=Math.floor(a)),v+=(g-v-a*(m-c))*d,o=a*(1-c),l&&(v=Math.round(v),o=Math.round(o));var y=r6e(m).map(function(j){return v+a*j});return r(p?y.reverse():y)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([s,i]=m,s=+s,i=+i,h()):[s,i]},e.rangeRound=function(m){return[s,i]=m,s=+s,i=+i,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},e.copy=function(){return qy(t(),[s,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Zo.apply(h(),arguments)}function kK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return kK(t())},e}function Xv(){return kK(qy.apply(null,arguments).paddingInner(1))}function TT(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function EK(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function G0(){}var Vy=.7,aw=1/Vy,tg="\\s*([+-]?\\d+)\\s*",Uy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",n6e=/^#([0-9a-f]{3,8})$/,s6e=new RegExp(`^rgb\\(${tg},${tg},${tg}\\)$`),i6e=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),a6e=new RegExp(`^rgba\\(${tg},${tg},${tg},${Uy}\\)$`),o6e=new RegExp(`^rgba\\(${jc},${jc},${jc},${Uy}\\)$`),l6e=new RegExp(`^hsl\\(${Uy},${jc},${jc}\\)$`),c6e=new RegExp(`^hsla\\(${Uy},${jc},${jc},${Uy}\\)$`),aR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};TT(G0,Hy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oR,formatHex:oR,formatHex8:u6e,formatHsl:d6e,formatRgb:lR,toString:lR});function oR(){return this.rgb().formatHex()}function u6e(){return this.rgb().formatHex8()}function d6e(){return TK(this).formatHsl()}function lR(){return this.rgb().formatRgb()}function Hy(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=n6e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cR(t):r===3?new Sa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?e1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?e1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=s6e.exec(e))?new Sa(t[1],t[2],t[3],1):(t=i6e.exec(e))?new Sa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a6e.exec(e))?e1(t[1],t[2],t[3],t[4]):(t=o6e.exec(e))?e1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=l6e.exec(e))?hR(t[1],t[2]/100,t[3]/100,1):(t=c6e.exec(e))?hR(t[1],t[2]/100,t[3]/100,t[4]):aR.hasOwnProperty(e)?cR(aR[e]):e==="transparent"?new Sa(NaN,NaN,NaN,0):null}function cR(e){return new Sa(e>>16&255,e>>8&255,e&255,1)}function e1(e,t,r,s){return s<=0&&(e=t=r=NaN),new Sa(e,t,r,s)}function h6e(e){return e instanceof G0||(e=Hy(e)),e?(e=e.rgb(),new Sa(e.r,e.g,e.b,e.opacity)):new Sa}function YP(e,t,r,s){return arguments.length===1?h6e(e):new Sa(e,t,r,s??1)}function Sa(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}TT(Sa,YP,EK(G0,{brighter(e){return e=e==null?aw:Math.pow(aw,e),new Sa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vy:Math.pow(Vy,e),new Sa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sa(Ff(this.r),Ff(this.g),Ff(this.b),ow(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uR,formatHex:uR,formatHex8:f6e,formatRgb:dR,toString:dR}));function uR(){return`#${Tf(this.r)}${Tf(this.g)}${Tf(this.b)}`}function f6e(){return`#${Tf(this.r)}${Tf(this.g)}${Tf(this.b)}${Tf((isNaN(this.opacity)?1:this.opacity)*255)}`}function dR(){const e=ow(this.opacity);return`${e===1?"rgb(":"rgba("}${Ff(this.r)}, ${Ff(this.g)}, ${Ff(this.b)}${e===1?")":`, ${e})`}`}function ow(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ff(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tf(e){return e=Ff(e),(e<16?"0":"")+e.toString(16)}function hR(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _l(e,t,r,s)}function TK(e){if(e instanceof _l)return new _l(e.h,e.s,e.l,e.opacity);if(e instanceof G0||(e=Hy(e)),!e)return new _l;if(e instanceof _l)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,i=Math.min(t,r,s),a=Math.max(t,r,s),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(r-s)/l+(r<s)*6:r===a?o=(s-t)/l+2:o=(t-r)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new _l(o,l,c,e.opacity)}function m6e(e,t,r,s){return arguments.length===1?TK(e):new _l(e,t,r,s??1)}function _l(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}TT(_l,m6e,EK(G0,{brighter(e){return e=e==null?aw:Math.pow(aw,e),new _l(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vy:Math.pow(Vy,e),new _l(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,i=2*r-s;return new Sa(U5(e>=240?e-240:e+120,i,s),U5(e,i,s),U5(e<120?e+240:e-120,i,s),this.opacity)},clamp(){return new _l(fR(this.h),t1(this.s),t1(this.l),ow(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ow(this.opacity);return`${e===1?"hsl(":"hsla("}${fR(this.h)}, ${t1(this.s)*100}%, ${t1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fR(e){return e=(e||0)%360,e<0?e+360:e}function t1(e){return Math.max(0,Math.min(1,e||0))}function U5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const OT=e=>()=>e;function p6e(e,t){return function(r){return e+r*t}}function g6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function x6e(e){return(e=+e)==1?OK:function(t,r){return r-t?g6e(t,r,e):OT(isNaN(t)?r:t)}}function OK(e,t){var r=t-e;return r?p6e(e,r):OT(isNaN(e)?t:e)}const mR=function e(t){var r=x6e(t);function s(i,a){var o=r((i=YP(i)).r,(a=YP(a)).r),l=r(i.g,a.g),c=r(i.b,a.b),u=OK(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return s.gamma=e,s}(1);function v6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),i;return function(a){for(i=0;i<r;++i)s[i]=e[i]*(1-a)+t[i]*a;return s}}function y6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function b6e(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,i=new Array(s),a=new Array(r),o;for(o=0;o<s;++o)i[o]=Ex(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function j6e(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function lw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function w6e(e,t){var r={},s={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Ex(e[i],t[i]):s[i]=t[i];return function(a){for(i in r)s[i]=r[i](a);return s}}var JP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H5=new RegExp(JP.source,"g");function _6e(e){return function(){return e}}function N6e(e){return function(t){return e(t)+""}}function S6e(e,t){var r=JP.lastIndex=H5.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=JP.exec(e))&&(i=H5.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:lw(s,i)})),r=H5.lastIndex;return r<t.length&&(a=t.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?N6e(c[0].x):_6e(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Ex(e,t){var r=typeof t,s;return t==null||r==="boolean"?OT(t):(r==="number"?lw:r==="string"?(s=Hy(t))?(t=s,mR):S6e:t instanceof Hy?mR:t instanceof Date?j6e:y6e(t)?v6e:Array.isArray(t)?b6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w6e:lw)(e,t)}function LT(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function A6e(e,t){t===void 0&&(t=e,e=Ex);for(var r=0,s=t.length-1,i=t[0],a=new Array(s<0?0:s);r<s;)a[r]=e(i,i=t[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function P6e(e){return function(){return e}}function cw(e){return+e}var pR=[0,1];function ta(e){return e}function QP(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:P6e(isNaN(t)?NaN:.5)}function C6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function k6e(e,t,r){var s=e[0],i=e[1],a=t[0],o=t[1];return i<s?(s=QP(i,s),a=r(o,a)):(s=QP(s,i),a=r(a,o)),function(l){return a(s(l))}}function E6e(e,t,r){var s=Math.min(e.length,t.length)-1,i=new Array(s),a=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)i[o]=QP(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(l){var c=W0(e,l,1,s)-1;return a[c](i[c](l))}}function K0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function E_(){var e=pR,t=pR,r=Ex,s,i,a,o=ta,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==ta&&(o=C6e(e[0],e[m-1])),l=m>2?E6e:k6e,c=u=null,h}function h(m){return m==null||isNaN(m=+m)?a:(c||(c=l(e.map(s),t,r)))(s(o(m)))}return h.invert=function(m){return o(i((u||(u=l(t,e.map(s),lw)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,cw),d()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),r=LT,d()},h.clamp=function(m){return arguments.length?(o=m?!0:ta,d()):o!==ta},h.interpolate=function(m){return arguments.length?(r=m,d()):r},h.unknown=function(m){return arguments.length?(a=m,h):a},function(m,p){return s=m,i=p,d()}}function MT(){return E_()(ta,ta)}function T6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function uw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Og(e){return e=uw(Math.abs(e)),e?e[1]:NaN}function O6e(e,t){return function(r,s){for(var i=r.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(r.substring(i-=l,i+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function L6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var M6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wy(e){if(!(t=M6e.exec(e)))throw new Error("invalid format: "+e);var t;return new IT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Wy.prototype=IT.prototype;function IT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}IT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function I6e(e){e:for(var t=e.length,r=1,s=-1,i;r<t;++r)switch(e[r]){case".":s=i=r;break;case"0":s===0&&(s=r),i=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(i+1):e}var LK;function R6e(e,t){var r=uw(e,t);if(!r)return e+"";var s=r[0],i=r[1],a=i-(LK=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+uw(e,Math.max(0,t+a-1))[0]}function gR(e,t){var r=uw(e,t);if(!r)return e+"";var s=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const xR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gR(e*100,t),r:gR,s:R6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vR(e){return e}var yR=Array.prototype.map,bR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function D6e(e){var t=e.grouping===void 0||e.thousands===void 0?vR:O6e(yR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?vR:L6e(yR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Wy(h);var m=h.fill,p=h.align,v=h.sign,g=h.symbol,y=h.zero,j=h.width,_=h.comma,w=h.precision,A=h.trim,S=h.type;S==="n"?(_=!0,S="g"):xR[S]||(w===void 0&&(w=12),A=!0,S="g"),(y||m==="0"&&p==="=")&&(y=!0,m="0",p="=");var P=g==="$"?r:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",C=g==="$"?s:/[%p]/.test(S)?o:"",T=xR[S],M=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function z(O){var I=P,q=C,F,W,V;if(S==="c")q=T(O)+q,O="";else{O=+O;var ne=O<0||1/O<0;if(O=isNaN(O)?c:T(Math.abs(O),w),A&&(O=I6e(O)),ne&&+O==0&&v!=="+"&&(ne=!1),I=(ne?v==="("?v:l:v==="-"||v==="("?"":v)+I,q=(S==="s"?bR[8+LK/3]:"")+q+(ne&&v==="("?")":""),M){for(F=-1,W=O.length;++F<W;)if(V=O.charCodeAt(F),48>V||V>57){q=(V===46?i+O.slice(F+1):O.slice(F))+q,O=O.slice(0,F);break}}}_&&!y&&(O=t(O,1/0));var G=I.length+O.length+q.length,K=G<j?new Array(j-G+1).join(m):"";switch(_&&y&&(O=t(K+O,K.length?j-q.length:1/0),K=""),p){case"<":O=I+O+q+K;break;case"=":O=I+K+O+q;break;case"^":O=K.slice(0,G=K.length>>1)+I+O+q+K.slice(G);break;default:O=K+I+O+q;break}return a(O)}return z.toString=function(){return h+""},z}function d(h,m){var p=u((h=Wy(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Og(m)/3)))*3,g=Math.pow(10,-v),y=bR[8+v/3];return function(j){return p(g*j)+y}}return{format:u,formatPrefix:d}}var r1,RT,MK;$6e({thousands:",",grouping:[3],currency:["$",""]});function $6e(e){return r1=D6e(e),RT=r1.format,MK=r1.formatPrefix,r1}function F6e(e){return Math.max(0,-Og(Math.abs(e)))}function z6e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Og(t)/3)))*3-Og(Math.abs(e)))}function B6e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Og(t)-Og(e))+1}function IK(e,t,r,s){var i=ZP(e,t,r),a;switch(s=Wy(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(a=z6e(i,o))&&(s.precision=a),MK(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=B6e(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=F6e(i))&&(s.precision=a-(s.type==="%")*2);break}}return RT(s)}function Lh(e){var t=e.domain;return e.ticks=function(r){var s=t();return GP(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var i=t();return IK(i[0],i[i.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),i=0,a=s.length-1,o=s[i],l=s[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=a,a=u);d-- >0;){if(u=KP(o,l,r),u===c)return s[i]=o,s[a]=l,t(s);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function dw(){var e=MT();return e.copy=function(){return K0(e,dw())},Zo.apply(e,arguments),Lh(e)}function RK(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,cw),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return RK(e).unknown(t)},e=arguments.length?Array.from(e,cw):[0,1],Lh(r)}function DK(e,t){e=e.slice();var r=0,s=e.length-1,i=e[r],a=e[s],o;return a<i&&(o=r,r=s,s=o,o=i,i=a,a=o),e[r]=t.floor(i),e[s]=t.ceil(a),e}function jR(e){return Math.log(e)}function wR(e){return Math.exp(e)}function q6e(e){return-Math.log(-e)}function V6e(e){return-Math.exp(-e)}function U6e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H6e(e){return e===10?U6e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function W6e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _R(e){return(t,r)=>-e(-t,r)}function DT(e){const t=e(jR,wR),r=t.domain;let s=10,i,a;function o(){return i=W6e(s),a=H6e(s),r()[0]<0?(i=_R(i),a=_R(a),e(q6e,V6e)):e(jR,wR),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let m=i(u),p=i(d),v,g;const y=l==null?10:+l;let j=[];if(!(s%1)&&p-m<y){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(v=1;v<s;++v)if(g=m<0?v/a(-m):v*a(m),!(g<u)){if(g>d)break;j.push(g)}}else for(;m<=p;++m)for(v=s-1;v>=1;--v)if(g=m>0?v/a(-m):v*a(m),!(g<u)){if(g>d)break;j.push(g)}j.length*2<y&&(j=GP(u,d,y))}else j=GP(m,p,Math.min(p-m,y)).map(a);return h?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Wy(c)).precision==null&&(c.trim=!0),c=RT(c)),l===1/0)return c;const u=Math.max(1,s*l/t.ticks().length);return d=>{let h=d/a(Math.round(i(d)));return h*s<s-.5&&(h*=s),h<=u?c(d):""}},t.nice=()=>r(DK(r(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function $K(){const e=DT(E_()).domain([1,10]);return e.copy=()=>K0(e,$K()).base(e.base()),Zo.apply(e,arguments),e}function NR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function SR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $T(e){var t=1,r=e(NR(t),SR(t));return r.constant=function(s){return arguments.length?e(NR(t=+s),SR(t)):t},Lh(r)}function FK(){var e=$T(E_());return e.copy=function(){return K0(e,FK()).constant(e.constant())},Zo.apply(e,arguments)}function AR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function G6e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function K6e(e){return e<0?-e*e:e*e}function FT(e){var t=e(ta,ta),r=1;function s(){return r===1?e(ta,ta):r===.5?e(G6e,K6e):e(AR(r),AR(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,s()):r},Lh(t)}function zT(){var e=FT(E_());return e.copy=function(){return K0(e,zT()).exponent(e.exponent())},Zo.apply(e,arguments),e}function Z6e(){return zT.apply(null,arguments).exponent(.5)}function PR(e){return Math.sign(e)*e*e}function X6e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function zK(){var e=MT(),t=[0,1],r=!1,s;function i(a){var o=X6e(e(a));return isNaN(o)?s:r?Math.round(o):o}return i.invert=function(a){return e.invert(PR(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,cw)).map(PR)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return zK(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},Zo.apply(i,arguments),Lh(i)}function BK(){var e=[],t=[],r=[],s;function i(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=t6e(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:t[W0(r,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(oh),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return r.slice()},a.copy=function(){return BK().domain(e).range(t).unknown(s)},Zo.apply(a,arguments)}function qK(){var e=0,t=1,r=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[W0(s,c,0,r)]:a}function l(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=r?[s[r-1],t]:[s[u-1],s[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return qK().domain([e,t]).range(i).unknown(a)},Zo.apply(Lh(o),arguments)}function VK(){var e=[.5],t=[0,1],r,s=1;function i(a){return a!=null&&a<=a?t[W0(e,a,0,s)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),s=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),s=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return VK().domain(e).range(t).unknown(r)},Zo.apply(i,arguments)}const W5=new Date,G5=new Date;function $s(e,t,r,s){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<o);return c},i.filter=a=>$s(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),r&&(i.count=(a,o)=>(W5.setTime(+a),G5.setTime(+o),e(W5),e(G5),Math.floor(r(W5,G5))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const hw=$s(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$s(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):hw);hw.range;const bu=1e3,Fo=bu*60,ju=Fo*60,Vu=ju*24,BT=Vu*7,CR=Vu*30,K5=Vu*365,Of=$s(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bu)},(e,t)=>(t-e)/bu,e=>e.getUTCSeconds());Of.range;const qT=$s(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bu)},(e,t)=>{e.setTime(+e+t*Fo)},(e,t)=>(t-e)/Fo,e=>e.getMinutes());qT.range;const VT=$s(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Fo)},(e,t)=>(t-e)/Fo,e=>e.getUTCMinutes());VT.range;const UT=$s(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bu-e.getMinutes()*Fo)},(e,t)=>{e.setTime(+e+t*ju)},(e,t)=>(t-e)/ju,e=>e.getHours());UT.range;const HT=$s(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ju)},(e,t)=>(t-e)/ju,e=>e.getUTCHours());HT.range;const Z0=$s(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fo)/Vu,e=>e.getDate()-1);Z0.range;const T_=$s(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vu,e=>e.getUTCDate()-1);T_.range;const UK=$s(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vu,e=>Math.floor(e/Vu));UK.range;function Nm(e){return $s(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Fo)/BT)}const O_=Nm(0),fw=Nm(1),Y6e=Nm(2),J6e=Nm(3),Lg=Nm(4),Q6e=Nm(5),eLe=Nm(6);O_.range;fw.range;Y6e.range;J6e.range;Lg.range;Q6e.range;eLe.range;function Sm(e){return $s(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/BT)}const L_=Sm(0),mw=Sm(1),tLe=Sm(2),rLe=Sm(3),Mg=Sm(4),nLe=Sm(5),sLe=Sm(6);L_.range;mw.range;tLe.range;rLe.range;Mg.range;nLe.range;sLe.range;const WT=$s(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());WT.range;const GT=$s(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());GT.range;const Uu=$s(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Uu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$s(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Uu.range;const Hu=$s(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$s(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Hu.range;function HK(e,t,r,s,i,a){const o=[[Of,1,bu],[Of,5,5*bu],[Of,15,15*bu],[Of,30,30*bu],[a,1,Fo],[a,5,5*Fo],[a,15,15*Fo],[a,30,30*Fo],[i,1,ju],[i,3,3*ju],[i,6,6*ju],[i,12,12*ju],[s,1,Vu],[s,2,2*Vu],[r,1,BT],[t,1,CR],[t,3,3*CR],[e,1,K5]];function l(u,d,h){const m=d<u;m&&([u,d]=[d,u]);const p=h&&typeof h.range=="function"?h:c(u,d,h),v=p?p.range(u,+d+1):[];return m?v.reverse():v}function c(u,d,h){const m=Math.abs(d-u)/h,p=kT(([,,y])=>y).right(o,m);if(p===o.length)return e.every(ZP(u/K5,d/K5,h));if(p===0)return hw.every(Math.max(ZP(u,d,h),1));const[v,g]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return v.every(g)}return[l,c]}const[iLe,aLe]=HK(Hu,GT,L_,UK,HT,VT),[oLe,lLe]=HK(Uu,WT,O_,Z0,UT,qT);function Z5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function X5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fv(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function cLe(e){var t=e.dateTime,r=e.date,s=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=mv(i),d=pv(i),h=mv(a),m=pv(a),p=mv(o),v=pv(o),g=mv(l),y=pv(l),j=mv(c),_=pv(c),w={a:ne,A:G,b:K,B:ee,c:null,d:MR,e:MR,f:OLe,g:qLe,G:ULe,H:kLe,I:ELe,j:TLe,L:WK,m:LLe,M:MLe,p:xe,q:B,Q:DR,s:$R,S:ILe,u:RLe,U:DLe,V:$Le,w:FLe,W:zLe,x:null,X:null,y:BLe,Y:VLe,Z:HLe,"%":RR},A={a:X,A:ie,b:me,B:ye,c:null,d:IR,e:IR,f:ZLe,g:iMe,G:oMe,H:WLe,I:GLe,j:KLe,L:KK,m:XLe,M:YLe,p:Ne,q:le,Q:DR,s:$R,S:JLe,u:QLe,U:eMe,V:tMe,w:rMe,W:nMe,x:null,X:null,y:sMe,Y:aMe,Z:lMe,"%":RR},S={a:z,A:O,b:I,B:q,c:F,d:OR,e:OR,f:SLe,g:TR,G:ER,H:LR,I:LR,j:jLe,L:NLe,m:bLe,M:wLe,p:M,q:yLe,Q:PLe,s:CLe,S:_Le,u:mLe,U:pLe,V:gLe,w:fLe,W:xLe,x:W,X:V,y:TR,Y:ER,Z:vLe,"%":ALe};w.x=P(r,w),w.X=P(s,w),w.c=P(t,w),A.x=P(r,A),A.X=P(s,A),A.c=P(t,A);function P(Q,J){return function(se){var Z=[],je=-1,Ee=0,Pe=Q.length,de,be,Ve;for(se instanceof Date||(se=new Date(+se));++je<Pe;)Q.charCodeAt(je)===37&&(Z.push(Q.slice(Ee,je)),(be=kR[de=Q.charAt(++je)])!=null?de=Q.charAt(++je):be=de==="e"?" ":"0",(Ve=J[de])&&(de=Ve(se,be)),Z.push(de),Ee=je+1);return Z.push(Q.slice(Ee,je)),Z.join("")}}function C(Q,J){return function(se){var Z=fv(1900,void 0,1),je=T(Z,Q,se+="",0),Ee,Pe;if(je!=se.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(J&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(Ee=X5(fv(Z.y,0,1)),Pe=Ee.getUTCDay(),Ee=Pe>4||Pe===0?mw.ceil(Ee):mw(Ee),Ee=T_.offset(Ee,(Z.V-1)*7),Z.y=Ee.getUTCFullYear(),Z.m=Ee.getUTCMonth(),Z.d=Ee.getUTCDate()+(Z.w+6)%7):(Ee=Z5(fv(Z.y,0,1)),Pe=Ee.getDay(),Ee=Pe>4||Pe===0?fw.ceil(Ee):fw(Ee),Ee=Z0.offset(Ee,(Z.V-1)*7),Z.y=Ee.getFullYear(),Z.m=Ee.getMonth(),Z.d=Ee.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),Pe="Z"in Z?X5(fv(Z.y,0,1)).getUTCDay():Z5(fv(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(Pe+5)%7:Z.w+Z.U*7-(Pe+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,X5(Z)):Z5(Z)}}function T(Q,J,se,Z){for(var je=0,Ee=J.length,Pe=se.length,de,be;je<Ee;){if(Z>=Pe)return-1;if(de=J.charCodeAt(je++),de===37){if(de=J.charAt(je++),be=S[de in kR?J.charAt(je++):de],!be||(Z=be(Q,se,Z))<0)return-1}else if(de!=se.charCodeAt(Z++))return-1}return Z}function M(Q,J,se){var Z=u.exec(J.slice(se));return Z?(Q.p=d.get(Z[0].toLowerCase()),se+Z[0].length):-1}function z(Q,J,se){var Z=p.exec(J.slice(se));return Z?(Q.w=v.get(Z[0].toLowerCase()),se+Z[0].length):-1}function O(Q,J,se){var Z=h.exec(J.slice(se));return Z?(Q.w=m.get(Z[0].toLowerCase()),se+Z[0].length):-1}function I(Q,J,se){var Z=j.exec(J.slice(se));return Z?(Q.m=_.get(Z[0].toLowerCase()),se+Z[0].length):-1}function q(Q,J,se){var Z=g.exec(J.slice(se));return Z?(Q.m=y.get(Z[0].toLowerCase()),se+Z[0].length):-1}function F(Q,J,se){return T(Q,t,J,se)}function W(Q,J,se){return T(Q,r,J,se)}function V(Q,J,se){return T(Q,s,J,se)}function ne(Q){return o[Q.getDay()]}function G(Q){return a[Q.getDay()]}function K(Q){return c[Q.getMonth()]}function ee(Q){return l[Q.getMonth()]}function xe(Q){return i[+(Q.getHours()>=12)]}function B(Q){return 1+~~(Q.getMonth()/3)}function X(Q){return o[Q.getUTCDay()]}function ie(Q){return a[Q.getUTCDay()]}function me(Q){return c[Q.getUTCMonth()]}function ye(Q){return l[Q.getUTCMonth()]}function Ne(Q){return i[+(Q.getUTCHours()>=12)]}function le(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var J=P(Q+="",w);return J.toString=function(){return Q},J},parse:function(Q){var J=C(Q+="",!1);return J.toString=function(){return Q},J},utcFormat:function(Q){var J=P(Q+="",A);return J.toString=function(){return Q},J},utcParse:function(Q){var J=C(Q+="",!0);return J.toString=function(){return Q},J}}}var kR={"-":"",_:" ",0:"0"},Js=/^\s*\d+/,uLe=/^%/,dLe=/[\\^$*+?|[\]().{}]/g;function Rr(e,t,r){var s=e<0?"-":"",i=(s?-e:e)+"",a=i.length;return s+(a<r?new Array(r-a+1).join(t)+i:i)}function hLe(e){return e.replace(dLe,"\\$&")}function mv(e){return new RegExp("^(?:"+e.map(hLe).join("|")+")","i")}function pv(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function fLe(e,t,r){var s=Js.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function mLe(e,t,r){var s=Js.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function pLe(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function gLe(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function xLe(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function ER(e,t,r){var s=Js.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function TR(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function vLe(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function yLe(e,t,r){var s=Js.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function bLe(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function OR(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function jLe(e,t,r){var s=Js.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function LR(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function wLe(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function _Le(e,t,r){var s=Js.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function NLe(e,t,r){var s=Js.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function SLe(e,t,r){var s=Js.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function ALe(e,t,r){var s=uLe.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function PLe(e,t,r){var s=Js.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function CLe(e,t,r){var s=Js.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function MR(e,t){return Rr(e.getDate(),t,2)}function kLe(e,t){return Rr(e.getHours(),t,2)}function ELe(e,t){return Rr(e.getHours()%12||12,t,2)}function TLe(e,t){return Rr(1+Z0.count(Uu(e),e),t,3)}function WK(e,t){return Rr(e.getMilliseconds(),t,3)}function OLe(e,t){return WK(e,t)+"000"}function LLe(e,t){return Rr(e.getMonth()+1,t,2)}function MLe(e,t){return Rr(e.getMinutes(),t,2)}function ILe(e,t){return Rr(e.getSeconds(),t,2)}function RLe(e){var t=e.getDay();return t===0?7:t}function DLe(e,t){return Rr(O_.count(Uu(e)-1,e),t,2)}function GK(e){var t=e.getDay();return t>=4||t===0?Lg(e):Lg.ceil(e)}function $Le(e,t){return e=GK(e),Rr(Lg.count(Uu(e),e)+(Uu(e).getDay()===4),t,2)}function FLe(e){return e.getDay()}function zLe(e,t){return Rr(fw.count(Uu(e)-1,e),t,2)}function BLe(e,t){return Rr(e.getFullYear()%100,t,2)}function qLe(e,t){return e=GK(e),Rr(e.getFullYear()%100,t,2)}function VLe(e,t){return Rr(e.getFullYear()%1e4,t,4)}function ULe(e,t){var r=e.getDay();return e=r>=4||r===0?Lg(e):Lg.ceil(e),Rr(e.getFullYear()%1e4,t,4)}function HLe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Rr(t/60|0,"0",2)+Rr(t%60,"0",2)}function IR(e,t){return Rr(e.getUTCDate(),t,2)}function WLe(e,t){return Rr(e.getUTCHours(),t,2)}function GLe(e,t){return Rr(e.getUTCHours()%12||12,t,2)}function KLe(e,t){return Rr(1+T_.count(Hu(e),e),t,3)}function KK(e,t){return Rr(e.getUTCMilliseconds(),t,3)}function ZLe(e,t){return KK(e,t)+"000"}function XLe(e,t){return Rr(e.getUTCMonth()+1,t,2)}function YLe(e,t){return Rr(e.getUTCMinutes(),t,2)}function JLe(e,t){return Rr(e.getUTCSeconds(),t,2)}function QLe(e){var t=e.getUTCDay();return t===0?7:t}function eMe(e,t){return Rr(L_.count(Hu(e)-1,e),t,2)}function ZK(e){var t=e.getUTCDay();return t>=4||t===0?Mg(e):Mg.ceil(e)}function tMe(e,t){return e=ZK(e),Rr(Mg.count(Hu(e),e)+(Hu(e).getUTCDay()===4),t,2)}function rMe(e){return e.getUTCDay()}function nMe(e,t){return Rr(mw.count(Hu(e)-1,e),t,2)}function sMe(e,t){return Rr(e.getUTCFullYear()%100,t,2)}function iMe(e,t){return e=ZK(e),Rr(e.getUTCFullYear()%100,t,2)}function aMe(e,t){return Rr(e.getUTCFullYear()%1e4,t,4)}function oMe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Mg(e):Mg.ceil(e),Rr(e.getUTCFullYear()%1e4,t,4)}function lMe(){return"+0000"}function RR(){return"%"}function DR(e){return+e}function $R(e){return Math.floor(+e/1e3)}var lp,XK,YK;cMe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cMe(e){return lp=cLe(e),XK=lp.format,lp.parse,YK=lp.utcFormat,lp.utcParse,lp}function uMe(e){return new Date(e)}function dMe(e){return e instanceof Date?+e:+new Date(+e)}function KT(e,t,r,s,i,a,o,l,c,u){var d=MT(),h=d.invert,m=d.domain,p=u(".%L"),v=u(":%S"),g=u("%I:%M"),y=u("%I %p"),j=u("%a %d"),_=u("%b %d"),w=u("%B"),A=u("%Y");function S(P){return(c(P)<P?p:l(P)<P?v:o(P)<P?g:a(P)<P?y:s(P)<P?i(P)<P?j:_:r(P)<P?w:A)(P)}return d.invert=function(P){return new Date(h(P))},d.domain=function(P){return arguments.length?m(Array.from(P,dMe)):m().map(uMe)},d.ticks=function(P){var C=m();return e(C[0],C[C.length-1],P??10)},d.tickFormat=function(P,C){return C==null?S:u(C)},d.nice=function(P){var C=m();return(!P||typeof P.range!="function")&&(P=t(C[0],C[C.length-1],P??10)),P?m(DK(C,P)):d},d.copy=function(){return K0(d,KT(e,t,r,s,i,a,o,l,c,u))},d}function hMe(){return Zo.apply(KT(oLe,lLe,Uu,WT,O_,Z0,UT,qT,Of,XK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fMe(){return Zo.apply(KT(iLe,aLe,Hu,GT,L_,T_,HT,VT,Of,YK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function M_(){var e=0,t=1,r,s,i,a,o=ta,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-r)*i,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,r=a(e=+e),s=a(t=+t),i=r===s?0:1/(s-r),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(m){var p,v;return arguments.length?([p,v]=m,o=h(p,v),u):[o(0),o(1)]}}return u.range=d(Ex),u.rangeRound=d(LT),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,r=h(e),s=h(t),i=r===s?0:1/(s-r),u}}function Mh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function JK(){var e=Lh(M_()(ta));return e.copy=function(){return Mh(e,JK())},Qu.apply(e,arguments)}function QK(){var e=DT(M_()).domain([1,10]);return e.copy=function(){return Mh(e,QK()).base(e.base())},Qu.apply(e,arguments)}function eZ(){var e=$T(M_());return e.copy=function(){return Mh(e,eZ()).constant(e.constant())},Qu.apply(e,arguments)}function ZT(){var e=FT(M_());return e.copy=function(){return Mh(e,ZT()).exponent(e.exponent())},Qu.apply(e,arguments)}function mMe(){return ZT.apply(null,arguments).exponent(.5)}function tZ(){var e=[],t=ta;function r(s){if(s!=null&&!isNaN(s=+s))return t((W0(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let i of s)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(oh),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,i)=>t(i/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(i,a)=>e6e(e,a/s))},r.copy=function(){return tZ(t).domain(e)},Qu.apply(r,arguments)}function I_(){var e=0,t=.5,r=1,s=1,i,a,o,l,c,u=ta,d,h=!1,m;function p(g){return isNaN(g=+g)?m:(g=.5+((g=+d(g))-a)*(s*g<s*a?l:c),u(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,i=d(e=+e),a=d(t=+t),o=d(r=+r),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(u=g,p):u};function v(g){return function(y){var j,_,w;return arguments.length?([j,_,w]=y,u=A6e(g,[j,_,w]),p):[u(0),u(.5),u(1)]}}return p.range=v(Ex),p.rangeRound=v(LT),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return d=g,i=g(e),a=g(t),o=g(r),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,p}}function rZ(){var e=Lh(I_()(ta));return e.copy=function(){return Mh(e,rZ())},Qu.apply(e,arguments)}function nZ(){var e=DT(I_()).domain([.1,1,10]);return e.copy=function(){return Mh(e,nZ()).base(e.base())},Qu.apply(e,arguments)}function sZ(){var e=$T(I_());return e.copy=function(){return Mh(e,sZ()).constant(e.constant())},Qu.apply(e,arguments)}function XT(){var e=FT(I_());return e.copy=function(){return Mh(e,XT()).exponent(e.exponent())},Qu.apply(e,arguments)}function pMe(){return XT.apply(null,arguments).exponent(.5)}const FR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qy,scaleDiverging:rZ,scaleDivergingLog:nZ,scaleDivergingPow:XT,scaleDivergingSqrt:pMe,scaleDivergingSymlog:sZ,scaleIdentity:RK,scaleImplicit:XP,scaleLinear:dw,scaleLog:$K,scaleOrdinal:ET,scalePoint:Xv,scalePow:zT,scaleQuantile:BK,scaleQuantize:qK,scaleRadial:zK,scaleSequential:JK,scaleSequentialLog:QK,scaleSequentialPow:ZT,scaleSequentialQuantile:tZ,scaleSequentialSqrt:mMe,scaleSequentialSymlog:eZ,scaleSqrt:Z6e,scaleSymlog:FK,scaleThreshold:VK,scaleTime:hMe,scaleUtc:fMe,tickFormat:IK},Symbol.toStringTag,{value:"Module"}));var gMe=jx;function xMe(e,t,r){for(var s=-1,i=e.length;++s<i;){var a=e[s],o=t(a);if(o!=null&&(l===void 0?o===o&&!gMe(o):r(o,l)))var l=o,c=a}return c}var R_=xMe;function vMe(e,t){return e>t}var iZ=vMe,yMe=R_,bMe=iZ,jMe=kx;function wMe(e){return e&&e.length?yMe(e,jMe,bMe):void 0}var _Me=wMe;const Wd=Er(_Me);function NMe(e,t){return e<t}var aZ=NMe,SMe=R_,AMe=aZ,PMe=kx;function CMe(e){return e&&e.length?SMe(e,PMe,AMe):void 0}var kMe=CMe;const D_=Er(kMe);var EMe=uT,TMe=zc,OMe=mK,LMe=Da;function MMe(e,t){var r=LMe(e)?EMe:OMe;return r(e,TMe(t))}var IMe=MMe,RMe=hK,DMe=IMe;function $Me(e,t){return RMe(DMe(e,t),1)}var FMe=$Me;const zMe=Er(FMe);var BMe=ST;function qMe(e,t){return BMe(e,t)}var VMe=qMe;const am=Er(VMe);var Tx=1e9,UMe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},JT,Ln=!0,Ho="[DecimalError] ",zf=Ho+"Invalid argument: ",YT=Ho+"Exponent out of range: ",Ox=Math.floor,yf=Math.pow,HMe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qa,Hs=1e7,An=7,oZ=9007199254740991,pw=Ox(oZ/An),Mt={};Mt.absoluteValue=Mt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Mt.comparedTo=Mt.cmp=function(e){var t,r,s,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(s=a.d.length,i=e.d.length,t=0,r=s<i?s:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*An;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Mt.dividedBy=Mt.div=function(e){return ku(this,new this.constructor(e))};Mt.dividedToIntegerBy=Mt.idiv=function(e){var t=this,r=t.constructor;return fn(ku(t,new r(e),0,1),r.precision)};Mt.equals=Mt.eq=function(e){return!this.cmp(e)};Mt.exponent=function(){return js(this)};Mt.greaterThan=Mt.gt=function(e){return this.cmp(e)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(e){return this.cmp(e)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(e){return this.cmp(e)<0};Mt.lessThanOrEqualTo=Mt.lte=function(e){return this.cmp(e)<1};Mt.logarithm=Mt.log=function(e){var t,r=this,s=r.constructor,i=s.precision,a=i+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Qa))throw Error(Ho+"NaN");if(r.s<1)throw Error(Ho+(r.s?"NaN":"-Infinity"));return r.eq(Qa)?new s(0):(Ln=!1,t=ku(Gy(r,a),Gy(e,a),a),Ln=!0,fn(t,i))};Mt.minus=Mt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uZ(t,e):lZ(t,(e.s=-e.s,e))};Mt.modulo=Mt.mod=function(e){var t,r=this,s=r.constructor,i=s.precision;if(e=new s(e),!e.s)throw Error(Ho+"NaN");return r.s?(Ln=!1,t=ku(r,e,0,1).times(e),Ln=!0,r.minus(t)):fn(new s(r),i)};Mt.naturalExponential=Mt.exp=function(){return cZ(this)};Mt.naturalLogarithm=Mt.ln=function(){return Gy(this)};Mt.negated=Mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Mt.plus=Mt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lZ(t,e):uZ(t,(e.s=-e.s,e))};Mt.precision=Mt.sd=function(e){var t,r,s,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zf+e);if(t=js(i)+1,s=i.d.length-1,r=s*An+1,s=i.d[s],s){for(;s%10==0;s/=10)r--;for(s=i.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};Mt.squareRoot=Mt.sqrt=function(){var e,t,r,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ho+"NaN")}for(e=js(l),Ln=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=hc(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Ox((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(i.toString()),r=c.precision,i=o=r+3;;)if(a=s,s=a.plus(ku(l,a,o+2)).times(.5),hc(a.d).slice(0,o)===(t=hc(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(fn(a,r+1,0),a.times(a).eq(l)){s=a;break}}else if(t!="9999")break;o+=4}return Ln=!0,fn(s,r)};Mt.times=Mt.mul=function(e){var t,r,s,i,a,o,l,c,u,d=this,h=d.constructor,m=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=p.length,c<u&&(a=m,m=p,p=a,o=c,c=u,u=o),a=[],o=c+u,s=o;s--;)a.push(0);for(s=u;--s>=0;){for(t=0,i=c+s;i>s;)l=a[i]+p[s]*m[i-s-1]+t,a[i--]=l%Hs|0,t=l/Hs|0;a[i]=(a[i]+t)%Hs|0}for(;!a[--o];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Ln?fn(e,h.precision):e};Mt.toDecimalPlaces=Mt.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(Cc(e,0,Tx),t===void 0?t=s.rounding:Cc(t,0,8),fn(r,e+js(r)+1,t))};Mt.toExponential=function(e,t){var r,s=this,i=s.constructor;return e===void 0?r=om(s,!0):(Cc(e,0,Tx),t===void 0?t=i.rounding:Cc(t,0,8),s=fn(new i(s),e+1,t),r=om(s,!0,e+1)),r};Mt.toFixed=function(e,t){var r,s,i=this,a=i.constructor;return e===void 0?om(i):(Cc(e,0,Tx),t===void 0?t=a.rounding:Cc(t,0,8),s=fn(new a(i),e+js(i)+1,t),r=om(s.abs(),!1,e+js(s)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Mt.toInteger=Mt.toint=function(){var e=this,t=e.constructor;return fn(new t(e),js(e)+1,t.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(e){var t,r,s,i,a,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Qa);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ho+"Infinity");return l}if(l.eq(Qa))return l;if(s=c.precision,e.eq(Qa))return fn(l,s);if(t=e.e,r=e.d.length-1,o=t>=r,a=l.s,o){if((r=d<0?-d:d)<=oZ){for(i=new c(Qa),t=Math.ceil(s/An+4),Ln=!1;r%2&&(i=i.times(l),BR(i.d,t)),r=Ox(r/2),r!==0;)l=l.times(l),BR(l.d,t);return Ln=!0,e.s<0?new c(Qa).div(i):fn(i,s)}}else if(a<0)throw Error(Ho+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ln=!1,i=e.times(Gy(l,s+u)),Ln=!0,i=cZ(i),i.s=a,i};Mt.toPrecision=function(e,t){var r,s,i=this,a=i.constructor;return e===void 0?(r=js(i),s=om(i,r<=a.toExpNeg||r>=a.toExpPos)):(Cc(e,1,Tx),t===void 0?t=a.rounding:Cc(t,0,8),i=fn(new a(i),e,t),r=js(i),s=om(i,e<=r||r<=a.toExpNeg,e)),s};Mt.toSignificantDigits=Mt.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Cc(e,1,Tx),t===void 0?t=s.rounding:Cc(t,0,8)),fn(new s(r),e,t)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=js(e),r=e.constructor;return om(e,t<=r.toExpNeg||t>=r.toExpPos)};function lZ(e,t){var r,s,i,a,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ln?fn(t,h):t;if(c=e.d,u=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=u.length):(s=u,i=o,l=c.length),o=Math.ceil(h/An),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,s=u,u=c,c=s),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/Hs|0,c[a]%=Hs;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,Ln?fn(t,h):t}function Cc(e,t,r){if(e!==~~e||e<t||e>r)throw Error(zf+e)}function hc(e){var t,r,s,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)s=e[t]+"",r=An-s.length,r&&(a+=$d(r)),a+=s;o=e[t],s=o+"",r=An-s.length,r&&(a+=$d(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ku=function(){function e(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%Hs|0,o=a/Hs|0;return o&&s.unshift(o),s}function t(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function r(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*Hs+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,u,d,h,m,p,v,g,y,j,_,w,A,S,P,C,T,M=s.constructor,z=s.s==i.s?1:-1,O=s.d,I=i.d;if(!s.s)return new M(s);if(!i.s)throw Error(Ho+"Division by zero");for(c=s.e-i.e,C=I.length,S=O.length,p=new M(z),v=p.d=[],u=0;I[u]==(O[u]||0);)++u;if(I[u]>(O[u]||0)&&--c,a==null?_=a=M.precision:o?_=a+(js(s)-js(i))+1:_=a,_<0)return new M(0);if(_=_/An+2|0,u=0,C==1)for(d=0,I=I[0],_++;(u<S||d)&&_--;u++)w=d*Hs+(O[u]||0),v[u]=w/I|0,d=w%I|0;else{for(d=Hs/(I[0]+1)|0,d>1&&(I=e(I,d),O=e(O,d),C=I.length,S=O.length),A=C,g=O.slice(0,C),y=g.length;y<C;)g[y++]=0;T=I.slice(),T.unshift(0),P=I[0],I[1]>=Hs/2&&++P;do d=0,l=t(I,g,C,y),l<0?(j=g[0],C!=y&&(j=j*Hs+(g[1]||0)),d=j/P|0,d>1?(d>=Hs&&(d=Hs-1),h=e(I,d),m=h.length,y=g.length,l=t(h,g,m,y),l==1&&(d--,r(h,C<m?T:I,m))):(d==0&&(l=d=1),h=I.slice()),m=h.length,m<y&&h.unshift(0),r(g,h,y),l==-1&&(y=g.length,l=t(I,g,C,y),l<1&&(d++,r(g,C<y?T:I,y))),y=g.length):l===0&&(d++,g=[0]),v[u++]=d,l&&g[0]?g[y++]=O[A]||0:(g=[O[A]],y=1);while((A++<S||g[0]!==void 0)&&_--)}return v[0]||v.shift(),p.e=c,fn(p,o?a+js(p)+1:a)}}();function cZ(e,t){var r,s,i,a,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(js(e)>16)throw Error(YT+js(e));if(!e.s)return new d(Qa);for(t==null?(Ln=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(s=Math.log(yf(2,u))/Math.LN10*2+5|0,l+=s,r=i=a=new d(Qa),d.precision=l;;){if(i=fn(i.times(e),l),r=r.times(++c),o=a.plus(ku(i,r,l)),hc(o.d).slice(0,l)===hc(a.d).slice(0,l)){for(;u--;)a=fn(a.times(a),l);return d.precision=h,t==null?(Ln=!0,fn(a,h)):a}a=o}}function js(e){for(var t=e.e*An,r=e.d[0];r>=10;r/=10)t++;return t}function Y5(e,t,r){if(t>e.LN10.sd())throw Ln=!0,r&&(e.precision=r),Error(Ho+"LN10 precision limit exceeded");return fn(new e(e.LN10),t)}function $d(e){for(var t="";e--;)t+="0";return t}function Gy(e,t){var r,s,i,a,o,l,c,u,d,h=1,m=10,p=e,v=p.d,g=p.constructor,y=g.precision;if(p.s<1)throw Error(Ho+(p.s?"NaN":"-Infinity"));if(p.eq(Qa))return new g(0);if(t==null?(Ln=!1,u=y):u=t,p.eq(10))return t==null&&(Ln=!0),Y5(g,u);if(u+=m,g.precision=u,r=hc(v),s=r.charAt(0),a=js(p),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)p=p.times(e),r=hc(p.d),s=r.charAt(0),h++;a=js(p),s>1?(p=new g("0."+r),a++):p=new g(s+"."+r.slice(1))}else return c=Y5(g,u+2,y).times(a+""),p=Gy(new g(s+"."+r.slice(1)),u-m).plus(c),g.precision=y,t==null?(Ln=!0,fn(p,y)):p;for(l=o=p=ku(p.minus(Qa),p.plus(Qa),u),d=fn(p.times(p),u),i=3;;){if(o=fn(o.times(d),u),c=l.plus(ku(o,new g(i),u)),hc(c.d).slice(0,u)===hc(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(Y5(g,u+2,y).times(a+""))),l=ku(l,new g(h),u),g.precision=y,t==null?(Ln=!0,fn(l,y)):l;l=c,i+=2}}function zR(e,t){var r,s,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(s,i),t){if(i-=s,r=r-s-1,e.e=Ox(r/An),e.d=[],s=(r+1)%An,r<0&&(s+=An),s<i){for(s&&e.d.push(+t.slice(0,s)),i-=An;s<i;)e.d.push(+t.slice(s,s+=An));t=t.slice(s),s=An-t.length}else s-=i;for(;s--;)t+="0";if(e.d.push(+t),Ln&&(e.e>pw||e.e<-pw))throw Error(YT+r)}else e.s=0,e.e=0,e.d=[0];return e}function fn(e,t,r){var s,i,a,o,l,c,u,d,h=e.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(s=t-o,s<0)s+=An,i=t,u=h[d=0];else{if(d=Math.ceil((s+1)/An),a=h.length,d>=a)return e;for(u=a=h[d],o=1;a>=10;a/=10)o++;s%=An,i=s-An+o}if(r!==void 0&&(a=yf(10,o-i-1),l=u/a%10|0,c=t<0||h[d+1]!==void 0||u%a,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(s>0?i>0?u/yf(10,o-i):0:h[d-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(a=js(e),h.length=1,t=t-a-1,h[0]=yf(10,(An-t%An)%An),e.e=Ox(-t/An)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=d,a=1,d--):(h.length=d+1,a=yf(10,An-s),h[d]=i>0?(u/yf(10,o-i)%yf(10,i)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==Hs&&(h[0]=1,++e.e);break}else{if(h[d]+=a,h[d]!=Hs)break;h[d--]=0,a=1}for(s=h.length;h[--s]===0;)h.pop();if(Ln&&(e.e>pw||e.e<-pw))throw Error(YT+js(e));return e}function uZ(e,t){var r,s,i,a,o,l,c,u,d,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Ln?fn(t,p):t;if(c=e.d,h=t.d,s=t.e,u=e.e,c=c.slice(),o=u-s,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,s=u,l=c.length),i=Math.max(Math.ceil(p/An),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=h.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}o=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Hs-1;--c[a],c[i]+=Hs}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,Ln?fn(t,p):t):new m(0)}function om(e,t,r){var s,i=js(e),a=hc(e.d),o=a.length;return t?(r&&(s=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+$d(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$d(-i-1)+a,r&&(s=r-o)>0&&(a+=$d(s))):i>=o?(a+=$d(i+1-o),r&&(s=r-i-1)>0&&(a=a+"."+$d(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),r&&(s=r-o)>0&&(i+1===o&&(a+="."),a+=$d(s))),e.s<0?"-"+a:a}function BR(e,t){if(e.length>t)return e.length=t,!0}function dZ(e){var t,r,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zf+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return zR(o,a.toString())}else if(typeof a!="string")throw Error(zf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,HMe.test(a))zR(o,a);else throw Error(zf+a)}if(i.prototype=Mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=dZ,i.config=i.set=WMe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return i.config(e),i}function WMe(e){if(!e||typeof e!="object")throw Error(Ho+"Object expected");var t,r,s,i=["precision",1,Tx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((s=e[r=i[t]])!==void 0)if(Ox(s)===s&&s>=i[t+1]&&s<=i[t+2])this[r]=s;else throw Error(zf+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(zf+r+": "+s);return this}var JT=dZ(UMe);Qa=new JT(1);const an=JT;function GMe(e){return YMe(e)||XMe(e)||ZMe(e)||KMe()}function KMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZMe(e,t){if(e){if(typeof e=="string")return eC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(e,t)}}function XMe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function YMe(e){if(Array.isArray(e))return eC(e)}function eC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var JMe=function(t){return t},hZ={"@@functional/placeholder":!0},fZ=function(t){return t===hZ},qR=function(t){return function r(){return arguments.length===0||arguments.length===1&&fZ(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},QMe=function e(t,r){return t===1?r:qR(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==hZ}).length;return o>=t?r.apply(void 0,i):e(t-o,qR(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(h){return fZ(h)?c.shift():h});return r.apply(void 0,GMe(d).concat(c))}))})},$_=function(t){return QMe(t.length,t)},tC=function(t,r){for(var s=[],i=t;i<r;++i)s[i-t]=i;return s},eIe=$_(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),tIe=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return JMe;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},rC=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},mZ=function(t){var r=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r&&a.every(function(l,c){return l===r[c]})||(r=a,s=t.apply(void 0,a)),s}};function rIe(e){var t;return e===0?t=1:t=Math.floor(new an(e).abs().log(10).toNumber())+1,t}function nIe(e,t,r){for(var s=new an(e),i=0,a=[];s.lt(t)&&i<1e5;)a.push(s.toNumber()),s=s.add(r),i++;return a}var sIe=$_(function(e,t,r){var s=+e,i=+t;return s+r*(i-s)}),iIe=$_(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),aIe=$_(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const F_={rangeStep:nIe,getDigitCount:rIe,interpolateNumber:sIe,uninterpolateNumber:iIe,uninterpolateTruncation:aIe};function nC(e){return cIe(e)||lIe(e)||pZ(e)||oIe()}function oIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lIe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function cIe(e){if(Array.isArray(e))return sC(e)}function Ky(e,t){return hIe(e)||dIe(e,t)||pZ(e,t)||uIe()}function uIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pZ(e,t){if(e){if(typeof e=="string")return sC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sC(e,t)}}function sC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function dIe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return r}}function hIe(e){if(Array.isArray(e))return e}function gZ(e){var t=Ky(e,2),r=t[0],s=t[1],i=r,a=s;return r>s&&(i=s,a=r),[i,a]}function xZ(e,t,r){if(e.lte(0))return new an(0);var s=F_.getDigitCount(e.toNumber()),i=new an(10).pow(s),a=e.div(i),o=s!==1?.05:.1,l=new an(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return t?c:new an(Math.ceil(c))}function fIe(e,t,r){var s=1,i=new an(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(s=new an(10).pow(F_.getDigitCount(e)-1),i=new an(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new an(Math.floor(e)))}else e===0?i=new an(Math.floor((t-1)/2)):r||(i=new an(Math.floor(e)));var o=Math.floor((t-1)/2),l=tIe(eIe(function(c){return i.add(new an(c-o).mul(s)).toNumber()}),tC);return l(0,t)}function vZ(e,t,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new an(0),tickMin:new an(0),tickMax:new an(0)};var a=xZ(new an(t).sub(e).div(r-1),s,i),o;e<=0&&t>=0?o=new an(0):(o=new an(e).add(t).div(2),o=o.sub(new an(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new an(t).sub(o).div(a).toNumber()),u=l+c+1;return u>r?vZ(e,t,r,s,i+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:a,tickMin:o.sub(new an(l).mul(a)),tickMax:o.add(new an(c).mul(a))})}function mIe(e){var t=Ky(e,2),r=t[0],s=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=gZ([r,s]),c=Ky(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(nC(tC(0,i-1).map(function(){return 1/0}))):[].concat(nC(tC(0,i-1).map(function(){return-1/0})),[d]);return r>s?rC(h):h}if(u===d)return fIe(u,i,a);var m=vZ(u,d,o,a),p=m.step,v=m.tickMin,g=m.tickMax,y=F_.rangeStep(v,g.add(new an(.1).mul(p)),p);return r>s?rC(y):y}function pIe(e,t){var r=Ky(e,2),s=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=gZ([s,i]),l=Ky(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[s,i];if(c===u)return[c];var d=Math.max(t,2),h=xZ(new an(u).sub(c).div(d-1),a,0),m=[].concat(nC(F_.rangeStep(new an(c),new an(u).sub(new an(.99).mul(h)),h)),[u]);return s>i?rC(m):m}var gIe=mZ(mIe),xIe=mZ(pIe),vIe=!0,J5="Invariant failed";function lm(e,t){if(!e){if(vIe)throw new Error(J5);var r=typeof t=="function"?t():t,s=r?"".concat(J5,": ").concat(r):J5;throw new Error(s)}}var yIe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gw.apply(this,arguments)}function bIe(e,t){return NIe(e)||_Ie(e,t)||wIe(e,t)||jIe()}function jIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wIe(e,t){if(e){if(typeof e=="string")return VR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VR(e,t)}}function VR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function _Ie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function NIe(e){if(Array.isArray(e))return e}function SIe(e,t){if(e==null)return{};var r=AIe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function AIe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function PIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,jZ(s.key),s)}}function CIe(e,t,r){return t&&UR(e.prototype,t),r&&UR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kIe(e,t,r){return t=xw(t),EIe(e,yZ()?Reflect.construct(t,r||[],xw(e).constructor):t.apply(e,r))}function EIe(e,t){if(t&&(Ig(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TIe(e)}function TIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yZ=function(){return!!e})()}function xw(e){return xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xw(e)}function OIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iC(e,t)}function iC(e,t){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},iC(e,t)}function bZ(e,t,r){return t=jZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jZ(e){var t=LIe(e,"string");return Ig(t)=="symbol"?t:t+""}function LIe(e,t){if(Ig(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ig(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X0=function(e){function t(){return PIe(this,t),kIe(this,t,arguments)}return OIe(t,e),CIe(t,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,u=s.dataPointFormatter,d=s.xAxis,h=s.yAxis,m=SIe(s,yIe),p=Bt(m,!1);this.props.direction==="x"&&d.type!=="number"&&lm(!1);var v=c.map(function(g){var y=u(g,l),j=y.x,_=y.y,w=y.value,A=y.errorVal;if(!A)return null;var S=[],P,C;if(Array.isArray(A)){var T=bIe(A,2);P=T[0],C=T[1]}else P=C=A;if(a==="vertical"){var M=d.scale,z=_+i,O=z+o,I=z-o,q=M(w-P),F=M(w+C);S.push({x1:F,y1:O,x2:F,y2:I}),S.push({x1:q,y1:z,x2:F,y2:z}),S.push({x1:q,y1:O,x2:q,y2:I})}else if(a==="horizontal"){var W=h.scale,V=j+i,ne=V-o,G=V+o,K=W(w-P),ee=W(w+C);S.push({x1:ne,y1:ee,x2:G,y2:ee}),S.push({x1:V,y1:K,x2:V,y2:ee}),S.push({x1:ne,y1:K,x2:G,y2:K})}return we.createElement(br,gw({className:"recharts-errorBar",key:"bar-".concat(S.map(function(xe){return"".concat(xe.x1,"-").concat(xe.x2,"-").concat(xe.y1,"-").concat(xe.y2)}))},p),S.map(function(xe){return we.createElement("line",gw({},xe,{key:"line-".concat(xe.x1,"-").concat(xe.x2,"-").concat(xe.y1,"-").concat(xe.y2)}))}))});return we.createElement(br,{className:"recharts-errorBars"},v)}}])}(we.Component);bZ(X0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});bZ(X0,"displayName","ErrorBar");function Zy(e){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(e)}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function lf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(s){MIe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function MIe(e,t,r){return t=IIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IIe(e){var t=RIe(e,"string");return Zy(t)=="symbol"?t:t+""}function RIe(e,t){if(Zy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Zy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wZ=function(t){var r=t.children,s=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=Ya(r,bc);if(!o)return null;var l=bc.defaultProps,c=l!==void 0?lf(lf({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(s||[]).reduce(function(d,h){var m=h.item,p=h.props,v=p.sectors||p.data||[];return d.concat(v.map(function(g){return{type:o.props.iconType||m.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(s||[]).map(function(d){var h=d.item,m=h.type.defaultProps,p=m!==void 0?lf(lf({},m),h.props):{},v=p.dataKey,g=p.name,y=p.legendType,j=p.hide;return{inactive:j,dataKey:v,type:c.iconType||y||"square",color:QT(h),value:g||v,payload:p}}),lf(lf(lf({},c),bc.getWithHeight(o,i)),{},{payload:u,item:o})};function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}function WR(e){return zIe(e)||FIe(e)||$Ie(e)||DIe()}function DIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ie(e,t){if(e){if(typeof e=="string")return aC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aC(e,t)}}function FIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zIe(e){if(Array.isArray(e))return aC(e)}function aC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(s){rg(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function rg(e,t,r){return t=BIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BIe(e){var t=qIe(e,"string");return Xy(t)=="symbol"?t:t+""}function qIe(e,t){if(Xy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Xy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hs(e,t,r){return ir(e)||ir(t)?r:Rs(t)?so(e,t,r):Xt(t)?t(e):r}function Yv(e,t,r,s){var i=zMe(e,function(l){return hs(l,t)});if(r==="number"){var a=i.filter(function(l){return gt(l)||parseFloat(l)});return a.length?[D_(a),Wd(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!ir(l)}):i;return o.map(function(l){return Rs(l)||l instanceof Date?l:""})}var VIe=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,h=i[u].coordinate,m=u>=l-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Qi(h-d)!==Qi(m-h)){var v=[];if(Qi(m-h)===Qi(c[1]-c[0])){p=m;var g=h+c[1]-c[0];v[0]=Math.min(g,(g+d)/2),v[1]=Math.max(g,(g+d)/2)}else{p=d;var y=m+c[1]-c[0];v[0]=Math.min(h,(y+h)/2),v[1]=Math.max(h,(y+h)/2)}var j=[Math.min(h,(p+h)/2),Math.max(h,(p+h)/2)];if(t>j[0]&&t<=j[1]||t>=v[0]&&t<=v[1]){o=i[u].index;break}}else{var _=Math.min(d,m),w=Math.max(d,m);if(t>(_+h)/2&&t<=(w+h)/2){o=i[u].index;break}}}else for(var A=0;A<l;A++)if(A===0&&t<=(s[A].coordinate+s[A+1].coordinate)/2||A>0&&A<l-1&&t>(s[A].coordinate+s[A-1].coordinate)/2&&t<=(s[A].coordinate+s[A+1].coordinate)/2||A===l-1&&t>(s[A].coordinate+s[A-1].coordinate)/2){o=s[A].index;break}return o},QT=function(t){var r,s=t,i=s.type.displayName,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Qn(Qn({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},UIe=function(t){var r=t.barSize,s=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,h=Object.keys(d),m=0,p=h.length;m<p;m++){var v=d[h[m]],g=v.items,y=v.cateAxisId,j=g.filter(function(C){return Cu(C.type).indexOf("Bar")>=0});if(j&&j.length){var _=j[0].type.defaultProps,w=_!==void 0?Qn(Qn({},_),j[0].props):j[0].props,A=w.barSize,S=w[y];o[S]||(o[S]=[]);var P=ir(A)?r:A;o[S].push({item:j[0],stackList:j.slice(1),barSize:ir(P)?void 0:ea(P,s,0)})}}return o},HIe=function(t){var r=t.barGap,s=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=ea(r,i,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=i/c,v=o.reduce(function(A,S){return A+S.barSize||0},0);v+=(c-1)*u,v>=i&&(v-=(c-1)*u,u=0),v>=i&&p>0&&(m=!0,p*=.9,v=c*p);var g=(i-v)/2>>0,y={offset:g-u,size:0};d=o.reduce(function(A,S){var P={item:S.item,position:{offset:y.offset+y.size+u,size:m?p:S.barSize}},C=[].concat(WR(A),[P]);return y=C[C.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){C.push({item:T,position:y})}),C},h)}else{var j=ea(s,i,0,!0);i-2*j-(c-1)*u<=0&&(u=0);var _=(i-2*j-(c-1)*u)/c;_>1&&(_>>=0);var w=l===+l?Math.min(_,l):_;d=o.reduce(function(A,S,P){var C=[].concat(WR(A),[{item:S.item,position:{offset:j+(_+u)*P+(_-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){C.push({item:T,position:C[C.length-1].position})}),C},h)}return d},WIe=function(t,r,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),u=wZ({children:a,legendWidth:c});if(u){var d=i||{},h=d.width,m=d.height,p=u.align,v=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&p!=="center"&&gt(t[p]))return Qn(Qn({},t),{},rg({},p,t[p]+(h||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&v!=="middle"&&gt(t[v]))return Qn(Qn({},t),{},rg({},v,t[v]+(m||0)))}return t},GIe=function(t,r,s){return ir(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},_Z=function(t,r,s,i,a){var o=r.props.children,l=io(o,X0).filter(function(u){return GIe(i,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=hs(d,s);if(ir(h))return u;var m=Array.isArray(h)?[D_(h),Wd(h)]:[h,h],p=c.reduce(function(v,g){var y=hs(d,g,0),j=m[0]-Math.abs(Array.isArray(y)?y[0]:y),_=m[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(j,v[0]),Math.max(_,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},KIe=function(t,r,s,i,a){var o=r.map(function(l){return _Z(t,l,s,a,i)}).filter(function(l){return!ir(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},NZ=function(t,r,s,i,a){var o=r.map(function(c){var u=c.props.dataKey;return s==="number"&&u&&_Z(t,c,u,i)||Yv(t,u,s,a)});if(s==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},SZ=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},AZ=function(t,r,s,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===r&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(r),o||l.push(s),l},wu=function(t,r,s){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Qi(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var m=a?a.indexOf(h):h;return{coordinate:i(m)+u,value:h,offset:u}});return d.filter(function(h){return!Ax(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,m){return{coordinate:i(h)+u,value:h,index:m,offset:u}}):i.ticks&&!s?i.ticks(t.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,m){return{coordinate:i(h)+u,value:a?a[h]:h,index:m,offset:u}})},Q5=new WeakMap,n1=function(t,r){if(typeof r!="function")return t;Q5.has(t)||Q5.set(t,new WeakMap);var s=Q5.get(t);if(s.has(r))return s.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,i),i},PZ=function(t,r,s){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:qy(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:dw(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:Xv(),realScaleType:"point"}:a==="category"?{scale:qy(),realScaleType:"band"}:{scale:dw(),realScaleType:"linear"};if(nm(i)){var c="scale".concat(__(i));return{scale:(FR[c]||Xv)(),realScaleType:FR[c]?c:"point"}}return Xt(i)?{scale:i}:{scale:Xv(),realScaleType:"point"}},KR=1e-4,CZ=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,i=t.range(),a=Math.min(i[0],i[1])-KR,o=Math.max(i[0],i[1])+KR,l=t(r[0]),c=t(r[s-1]);(l<a||l>o||c<a||c>o)&&t.domain([r[0],r[s-1]])}},ZIe=function(t,r){if(!t)return null;for(var s=0,i=t.length;s<i;s++)if(t[s].item===r)return t[s].position;return null},XIe=function(t,r){if(!r||r.length!==2||!gt(r[0])||!gt(r[1]))return t;var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[t[0],t[1]];return(!gt(t[0])||t[0]<s)&&(a[0]=s),(!gt(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},YIe=function(t){var r=t.length;if(!(r<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0,l=0;l<r;++l){var c=Ax(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=a,t[l][s][1]=a+c,a=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},JIe=function(t){var r=t.length;if(!(r<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0;o<r;++o){var l=Ax(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=a,t[o][s][1]=a+l,a=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},QIe={sign:YIe,expand:jSe,none:Pg,silhouette:wSe,wiggle:_Se,positive:JIe},eRe=function(t,r,s){var i=r.map(function(l){return l.props.dataKey}),a=QIe[s],o=bSe().keys(i).value(function(l,c){return+hs(l,c,0)}).order(TP).offset(a);return o(t)},tRe=function(t,r,s,i,a,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(h,m){var p,v=(p=m.type)!==null&&p!==void 0&&p.defaultProps?Qn(Qn({},m.type.defaultProps),m.props):m.props,g=v.stackId,y=v.hide;if(y)return h;var j=v[s],_=h[j]||{hasStack:!1,stackGroups:{}};if(Rs(g)){var w=_.stackGroups[g]||{numericAxisId:s,cateAxisId:i,items:[]};w.items.push(m),_.hasStack=!0,_.stackGroups[g]=w}else _.stackGroups[wm("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[m]};return Qn(Qn({},h),{},rg({},j,_))},c),d={};return Object.keys(u).reduce(function(h,m){var p=u[m];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,y){var j=p.stackGroups[y];return Qn(Qn({},g),{},rg({},y,{numericAxisId:s,cateAxisId:i,items:j.items,stackedData:eRe(t,j.items,a)}))},v)}return Qn(Qn({},h),{},rg({},m,p))},d)},kZ=function(t,r){var s=r.realScaleType,i=r.type,a=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=gIe(u,a,l);return t.domain([D_(d),Wd(d)]),{niceTicks:d}}if(a&&i==="number"){var h=t.domain(),m=xIe(h,a,l);return{niceTicks:m}}return null};function vw(e){var t=e.axis,r=e.ticks,s=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ir(i[t.dataKey])){var l=Uj(r,"value",i[t.dataKey]);if(l)return l.coordinate+s/2}return r[a]?r[a].coordinate+s/2:null}var c=hs(i,ir(o)?t.dataKey:o);return ir(c)?null:t.scale(c)}var ZR=function(t){var r=t.axis,s=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return s[l]?s[l].coordinate+i:null;var c=hs(o,r.dataKey,r.domain[l]);return ir(c)?null:r.scale(c)-a/2+i},rRe=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},nRe=function(t,r){var s,i=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Qn(Qn({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Rs(a)){var o=r[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},sRe=function(t){return t.reduce(function(r,s){return[D_(s.concat([r[0]]).filter(gt)),Wd(s.concat([r[1]]).filter(gt))]},[1/0,-1/0])},EZ=function(t,r,s){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(u,d){var h=sRe(d.slice(r,s+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},XR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oC=function(t,r,s){if(Xt(t))return t(r,s);if(!Array.isArray(t))return r;var i=[];if(gt(t[0]))i[0]=s?t[0]:Math.min(t[0],r[0]);else if(XR.test(t[0])){var a=+XR.exec(t[0])[1];i[0]=r[0]-a}else Xt(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(gt(t[1]))i[1]=s?t[1]:Math.max(t[1],r[1]);else if(YR.test(t[1])){var o=+YR.exec(t[1])[1];i[1]=r[1]+o}else Xt(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},yw=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!s||i>0)return i}if(t&&r&&r.length>=2){for(var a=PT(r,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},JR=function(t,r,s){return!t||!t.length||am(t,so(s,"type.defaultProps.domain"))?r:t},TZ=function(t,r){var s=t.type.defaultProps?Qn(Qn({},t.type.defaultProps),t.props):t.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,u=s.chartType,d=s.hide;return Qn(Qn({},Bt(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:QT(t),value:hs(r,i),type:c,payload:r,chartType:u,hide:d})};function Yy(e){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yy(e)}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(r),!0).forEach(function(s){OZ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function OZ(e,t,r){return t=iRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iRe(e){var t=aRe(e,"string");return Yy(t)=="symbol"?t:t+""}function aRe(e,t){if(Yy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Yy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oRe(e,t){return dRe(e)||uRe(e,t)||cRe(e,t)||lRe()}function lRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cRe(e,t){if(e){if(typeof e=="string")return eD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eD(e,t)}}function eD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function uRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function dRe(e){if(Array.isArray(e))return e}var bw=Math.PI/180,hRe=function(t){return t*180/Math.PI},bn=function(t,r,s,i){return{x:t+Math.cos(-bw*i)*s,y:r+Math.sin(-bw*i)*s}},LZ=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},fRe=function(t,r,s,i,a){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=ea(t.cx,o,o/2),h=ea(t.cy,l,l/2),m=LZ(o,l,s),p=ea(t.innerRadius,m,0),v=ea(t.outerRadius,m,m*.8),g=Object.keys(r);return g.reduce(function(y,j){var _=r[j],w=_.domain,A=_.reversed,S;if(ir(_.range))i==="angleAxis"?S=[c,u]:i==="radiusAxis"&&(S=[p,v]),A&&(S=[S[1],S[0]]);else{S=_.range;var P=S,C=oRe(P,2);c=C[0],u=C[1]}var T=PZ(_,a),M=T.realScaleType,z=T.scale;z.domain(w).range(S),CZ(z);var O=kZ(z,mu(mu({},_),{},{realScaleType:M})),I=mu(mu(mu({},_),O),{},{range:S,radius:v,realScaleType:M,scale:z,cx:d,cy:h,innerRadius:p,outerRadius:v,startAngle:c,endAngle:u});return mu(mu({},y),{},OZ({},j,I))},{})},mRe=function(t,r){var s=t.x,i=t.y,a=r.x,o=r.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},pRe=function(t,r){var s=t.x,i=t.y,a=r.cx,o=r.cy,l=mRe({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:hRe(u),angleInRadian:u}},gRe=function(t){var r=t.startAngle,s=t.endAngle,i=Math.floor(r/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:r-o*360,endAngle:s-o*360}},xRe=function(t,r){var s=r.startAngle,i=r.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},tD=function(t,r){var s=t.x,i=t.y,a=pRe({x:s,y:i},r),o=a.radius,l=a.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=gRe(r),h=d.startAngle,m=d.endAngle,p=l,v;if(h<=m){for(;p>m;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=m}else{for(;p>h;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=h}return v?mu(mu({},r),{},{radius:o,angle:xRe(p,r)}):null},MZ=function(t){return!x.isValidElement(t)&&!Xt(t)&&typeof t!="boolean"?t.className:""};function Jy(e){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jy(e)}var vRe=["offset"];function yRe(e){return _Re(e)||wRe(e)||jRe(e)||bRe()}function bRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jRe(e,t){if(e){if(typeof e=="string")return lC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lC(e,t)}}function wRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Re(e){if(Array.isArray(e))return lC(e)}function lC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function NRe(e,t){if(e==null)return{};var r=SRe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function SRe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(s){ARe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ARe(e,t,r){return t=PRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PRe(e){var t=CRe(e,"string");return Jy(t)=="symbol"?t:t+""}function CRe(e,t){if(Jy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Jy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qy.apply(this,arguments)}var kRe=function(t){var r=t.value,s=t.formatter,i=ir(t.children)?r:t.children;return Xt(s)?s(i):i},ERe=function(t,r){var s=Qi(r-t),i=Math.min(Math.abs(r-t),360);return s*i},TRe=function(t,r,s){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,m=c.outerRadius,p=c.startAngle,v=c.endAngle,g=c.clockWise,y=(h+m)/2,j=ERe(p,v),_=j>=0?1:-1,w,A;i==="insideStart"?(w=p+_*o,A=g):i==="insideEnd"?(w=v-_*o,A=!g):i==="end"&&(w=v+_*o,A=g),A=j<=0?A:!A;var S=bn(u,d,y,w),P=bn(u,d,y,w+(A?1:-1)*359),C="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(P.x,",").concat(P.y),T=ir(t.id)?wm("recharts-radial-line-"):t.id;return we.createElement("text",Qy({},s,{dominantBaseline:"central",className:cr("recharts-radial-bar-label",l)}),we.createElement("defs",null,we.createElement("path",{id:T,d:C})),we.createElement("textPath",{xlinkHref:"#".concat(T)},r))},ORe=function(t){var r=t.viewBox,s=t.offset,i=t.position,a=r,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,m=(d+h)/2;if(i==="outside"){var p=bn(o,l,u+s,m),v=p.x,g=p.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,j=bn(o,l,y,m),_=j.x,w=j.y;return{x:_,y:w,textAnchor:"middle",verticalAnchor:"middle"}},LRe=function(t){var r=t.viewBox,s=t.parentViewBox,i=t.offset,a=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,m=h*i,p=h>0?"end":"start",v=h>0?"start":"end",g=u>=0?1:-1,y=g*i,j=g>0?"end":"start",_=g>0?"start":"end";if(a==="top"){var w={x:l+u/2,y:c-h*i,textAnchor:"middle",verticalAnchor:p};return Es(Es({},w),s?{height:Math.max(c-s.y,0),width:u}:{})}if(a==="bottom"){var A={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:v};return Es(Es({},A),s?{height:Math.max(s.y+s.height-(c+d),0),width:u}:{})}if(a==="left"){var S={x:l-y,y:c+d/2,textAnchor:j,verticalAnchor:"middle"};return Es(Es({},S),s?{width:Math.max(S.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:l+u+y,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return Es(Es({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var C=s?{width:u,height:d}:{};return a==="insideLeft"?Es({x:l+y,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},C):a==="insideRight"?Es({x:l+u-y,y:c+d/2,textAnchor:j,verticalAnchor:"middle"},C):a==="insideTop"?Es({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:v},C):a==="insideBottom"?Es({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:p},C):a==="insideTopLeft"?Es({x:l+y,y:c+m,textAnchor:_,verticalAnchor:v},C):a==="insideTopRight"?Es({x:l+u-y,y:c+m,textAnchor:j,verticalAnchor:v},C):a==="insideBottomLeft"?Es({x:l+y,y:c+d-m,textAnchor:_,verticalAnchor:p},C):a==="insideBottomRight"?Es({x:l+u-y,y:c+d-m,textAnchor:j,verticalAnchor:p},C):wx(a)&&(gt(a.x)||Ef(a.x))&&(gt(a.y)||Ef(a.y))?Es({x:l+ea(a.x,u),y:c+ea(a.y,d),textAnchor:"end",verticalAnchor:"end"},C):Es({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},MRe=function(t){return"cx"in t&&gt(t.cx)};function Ks(e){var t=e.offset,r=t===void 0?5:t,s=NRe(e,vRe),i=Es({offset:r},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,h=d===void 0?"":d,m=i.textBreakAll;if(!a||ir(l)&&ir(c)&&!x.isValidElement(u)&&!Xt(u))return null;if(x.isValidElement(u))return x.cloneElement(u,i);var p;if(Xt(u)){if(p=x.createElement(u,i),x.isValidElement(p))return p}else p=kRe(i);var v=MRe(a),g=Bt(i,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return TRe(i,p,g);var y=v?ORe(i):LRe(i);return we.createElement(im,Qy({className:cr("recharts-label",h)},g,y,{breakAll:m}),p)}Ks.displayName="Label";var IZ=function(t){var r=t.cx,s=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,m=t.y,p=t.top,v=t.left,g=t.width,y=t.height,j=t.clockWise,_=t.labelViewBox;if(_)return _;if(gt(g)&&gt(y)){if(gt(h)&&gt(m))return{x:h,y:m,width:g,height:y};if(gt(p)&&gt(v))return{x:p,y:v,width:g,height:y}}return gt(h)&&gt(m)?{x:h,y:m,width:0,height:0}:gt(r)&&gt(s)?{cx:r,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},IRe=function(t,r){return t?t===!0?we.createElement(Ks,{key:"label-implicit",viewBox:r}):Rs(t)?we.createElement(Ks,{key:"label-implicit",viewBox:r,value:t}):x.isValidElement(t)?t.type===Ks?x.cloneElement(t,{key:"label-implicit",viewBox:r}):we.createElement(Ks,{key:"label-implicit",content:t,viewBox:r}):Xt(t)?we.createElement(Ks,{key:"label-implicit",content:t,viewBox:r}):wx(t)?we.createElement(Ks,Qy({viewBox:r},t,{key:"label-implicit"})):null:null},RRe=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var i=t.children,a=IZ(t),o=io(i,Ks).map(function(c,u){return x.cloneElement(c,{viewBox:r||a,key:"label-".concat(u)})});if(!s)return o;var l=IRe(t.label,r||a);return[l].concat(yRe(o))};Ks.parseViewBox=IZ;Ks.renderCallByParent=RRe;function DRe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var $Re=DRe;const FRe=Er($Re);function e0(e){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e0(e)}var zRe=["valueAccessor"],BRe=["data","dataKey","clockWise","id","textBreakAll"];function qRe(e){return WRe(e)||HRe(e)||URe(e)||VRe()}function VRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function URe(e,t){if(e){if(typeof e=="string")return cC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cC(e,t)}}function HRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WRe(e){if(Array.isArray(e))return cC(e)}function cC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jw.apply(this,arguments)}function nD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function sD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nD(Object(r),!0).forEach(function(s){GRe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function GRe(e,t,r){return t=KRe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KRe(e){var t=ZRe(e,"string");return e0(t)=="symbol"?t:t+""}function ZRe(e,t){if(e0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(e0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iD(e,t){if(e==null)return{};var r=XRe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function XRe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var YRe=function(t){return Array.isArray(t.value)?FRe(t.value):t.value};function wc(e){var t=e.valueAccessor,r=t===void 0?YRe:t,s=iD(e,zRe),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,u=iD(s,BRe);return!i||!i.length?null:we.createElement(br,{className:"recharts-label-list"},i.map(function(d,h){var m=ir(a)?r(d,h):hs(d&&d.payload,a),p=ir(l)?{}:{id:"".concat(l,"-").concat(h)};return we.createElement(Ks,jw({},Bt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Ks.parseViewBox(ir(o)?d:sD(sD({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}wc.displayName="LabelList";function JRe(e,t){return e?e===!0?we.createElement(wc,{key:"labelList-implicit",data:t}):we.isValidElement(e)||Xt(e)?we.createElement(wc,{key:"labelList-implicit",data:t,content:e}):wx(e)?we.createElement(wc,jw({data:t},e,{key:"labelList-implicit"})):null:null}function QRe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=io(s,wc).map(function(o,l){return x.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return i;var a=JRe(e.label,t);return[a].concat(qRe(i))}wc.renderCallByParent=QRe;function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(e)}function uC(){return uC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uC.apply(this,arguments)}function aD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function oD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aD(Object(r),!0).forEach(function(s){eDe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function eDe(e,t,r){return t=tDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tDe(e){var t=rDe(e,"string");return t0(t)=="symbol"?t:t+""}function rDe(e,t){if(t0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(t0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nDe=function(t,r){var s=Qi(r-t),i=Math.min(Math.abs(r-t),359.999);return s*i},s1=function(t){var r=t.cx,s=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+i,h=Math.asin(c/d)/bw,m=u?a:a+o*h,p=bn(r,s,d,m),v=bn(r,s,i,m),g=u?a-o*h:a,y=bn(r,s,d*Math.cos(h*bw),g);return{center:p,circleTangency:v,lineTangency:y,theta:h}},RZ=function(t){var r=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=nDe(o,l),u=o+c,d=bn(r,s,a,o),h=bn(r,s,a,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var p=bn(r,s,i,o),v=bn(r,s,i,u);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(s," Z");return m},sDe=function(t){var r=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=Qi(d-u),m=s1({cx:r,cy:s,radius:a,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,v=m.lineTangency,g=m.theta,y=s1({cx:r,cy:s,radius:a,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),j=y.circleTangency,_=y.lineTangency,w=y.theta,A=c?Math.abs(u-d):Math.abs(u-d)-g-w;if(A<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):RZ({cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var S="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var P=s1({cx:r,cy:s,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=P.circleTangency,T=P.lineTangency,M=P.theta,z=s1({cx:r,cy:s,radius:i,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=z.circleTangency,I=z.lineTangency,q=z.theta,F=c?Math.abs(u-d):Math.abs(u-d)-M-q;if(F<0&&o===0)return"".concat(S,"L").concat(r,",").concat(s,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(F>180),",").concat(+(h>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(T.x,",").concat(T.y,"Z")}else S+="L".concat(r,",").concat(s,"Z");return S},iDe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DZ=function(t){var r=oD(oD({},iDe),t),s=r.cx,i=r.cy,a=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,h=r.endAngle,m=r.className;if(o<a||d===h)return null;var p=cr("recharts-sector",m),v=o-a,g=ea(l,v,0,!0),y;return g>0&&Math.abs(d-h)<360?y=sDe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):y=RZ({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:d,endAngle:h}),we.createElement("path",uC({},Bt(r,!0),{className:p,d:y,role:"img"}))};function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r0(e)}function dC(){return dC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dC.apply(this,arguments)}function lD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function cD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lD(Object(r),!0).forEach(function(s){aDe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function aDe(e,t,r){return t=oDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oDe(e){var t=lDe(e,"string");return r0(t)=="symbol"?t:t+""}function lDe(e,t){if(r0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(r0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uD={curveBasisClosed:cSe,curveBasisOpen:uSe,curveBasis:lSe,curveBumpX:K5e,curveBumpY:Z5e,curveLinearClosed:dSe,curveLinear:S_,curveMonotoneX:hSe,curveMonotoneY:fSe,curveNatural:mSe,curveStep:pSe,curveStepAfter:xSe,curveStepBefore:gSe},i1=function(t){return t.x===+t.x&&t.y===+t.y},gv=function(t){return t.x},xv=function(t){return t.y},cDe=function(t,r){if(Xt(t))return t;var s="curve".concat(__(t));return(s==="curveMonotone"||s==="curveBump")&&r?uD["".concat(s).concat(r==="vertical"?"Y":"X")]:uD[s]||S_},uDe=function(t){var r=t.type,s=r===void 0?"linear":r,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=cDe(s,l),h=u?a.filter(function(g){return i1(g)}):a,m;if(Array.isArray(o)){var p=u?o.filter(function(g){return i1(g)}):o,v=h.map(function(g,y){return cD(cD({},g),{},{base:p[y]})});return l==="vertical"?m=Zb().y(xv).x1(gv).x0(function(g){return g.base.x}):m=Zb().x(gv).y1(xv).y0(function(g){return g.base.y}),m.defined(i1).curve(d),m(v)}return l==="vertical"&&gt(o)?m=Zb().y(xv).x1(gv).x0(o):gt(o)?m=Zb().x(gv).y1(xv).y0(o):m=TG().x(gv).y(xv),m.defined(i1).curve(d),m(h)},Bf=function(t){var r=t.className,s=t.points,i=t.path,a=t.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?uDe(t):i;return x.createElement("path",dC({},Bt(t,!1),Hj(t),{className:cr("recharts-curve",r),d:o,ref:a}))},$Z={exports:{}},dDe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hDe=dDe,fDe=hDe;function FZ(){}function zZ(){}zZ.resetWarningCache=FZ;var mDe=function(){function e(s,i,a,o,l,c){if(c!==fDe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zZ,resetWarningCache:FZ};return r.PropTypes=r,r};$Z.exports=mDe();var pDe=$Z.exports;const zr=Er(pDe);var gDe=Object.getOwnPropertyNames,xDe=Object.getOwnPropertySymbols,vDe=Object.prototype.hasOwnProperty;function dD(e,t){return function(s,i,a){return e(s,i,a)&&t(s,i,a)}}function a1(e){return function(r,s,i){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,i);var a=i.cache,o=a.get(r),l=a.get(s);if(o&&l)return o===s&&l===r;a.set(r,s),a.set(s,r);var c=e(r,s,i);return a.delete(r),a.delete(s),c}}function hD(e){return gDe(e).concat(xDe(e))}var yDe=Object.hasOwn||function(e,t){return vDe.call(e,t)};function Am(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var bDe="__v",jDe="__o",wDe="_owner",fD=Object.getOwnPropertyDescriptor,mD=Object.keys;function _De(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function NDe(e,t){return Am(e.getTime(),t.getTime())}function SDe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ADe(e,t){return e===t}function pD(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(i[h]){h++;continue}var m=o.value,p=l.value;if(r.equals(m[0],p[0],c,h,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){d=i[h]=!0;break}h++}if(!d)return!1;c++}return!0}var PDe=Am;function CDe(e,t,r){var s=mD(e),i=s.length;if(mD(t).length!==i)return!1;for(;i-- >0;)if(!BZ(e,t,r,s[i]))return!1;return!0}function vv(e,t,r){var s=hD(e),i=s.length;if(hD(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!BZ(e,t,r,a)||(o=fD(e,a),l=fD(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function kDe(e,t){return Am(e.valueOf(),t.valueOf())}function EDe(e,t){return e.source===t.source&&e.flags===t.flags}function gD(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function TDe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function ODe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function BZ(e,t,r,s){return(s===wDe||s===jDe||s===bDe)&&(e.$$typeof||t.$$typeof)?!0:yDe(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var LDe="[object Arguments]",MDe="[object Boolean]",IDe="[object Date]",RDe="[object Error]",DDe="[object Map]",$De="[object Number]",FDe="[object Object]",zDe="[object RegExp]",BDe="[object Set]",qDe="[object String]",VDe="[object URL]",UDe=Array.isArray,xD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,vD=Object.assign,HDe=Object.prototype.toString.call.bind(Object.prototype.toString);function WDe(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(v,g,y){if(v===g)return!0;if(v==null||g==null)return!1;var j=typeof v;if(j!==typeof g)return!1;if(j!=="object")return j==="number"?o(v,g,y):j==="function"?i(v,g,y):!1;var _=v.constructor;if(_!==g.constructor)return!1;if(_===Object)return l(v,g,y);if(UDe(v))return t(v,g,y);if(xD!=null&&xD(v))return h(v,g,y);if(_===Date)return r(v,g,y);if(_===RegExp)return u(v,g,y);if(_===Map)return a(v,g,y);if(_===Set)return d(v,g,y);var w=HDe(v);return w===IDe?r(v,g,y):w===zDe?u(v,g,y):w===DDe?a(v,g,y):w===BDe?d(v,g,y):w===FDe?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,y):w===VDe?m(v,g,y):w===RDe?s(v,g,y):w===LDe?l(v,g,y):w===MDe||w===$De||w===qDe?c(v,g,y):!1}}function GDe(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,i={areArraysEqual:s?vv:_De,areDatesEqual:NDe,areErrorsEqual:SDe,areFunctionsEqual:ADe,areMapsEqual:s?dD(pD,vv):pD,areNumbersEqual:PDe,areObjectsEqual:s?vv:CDe,arePrimitiveWrappersEqual:kDe,areRegExpsEqual:EDe,areSetsEqual:s?dD(gD,vv):gD,areTypedArraysEqual:s?vv:TDe,areUrlsEqual:ODe};if(r&&(i=vD({},i,r(i))),t){var a=a1(i.areArraysEqual),o=a1(i.areMapsEqual),l=a1(i.areObjectsEqual),c=a1(i.areSetsEqual);i=vD({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function KDe(e){return function(t,r,s,i,a,o,l){return e(t,r,l)}}function ZDe(e){var t=e.circular,r=e.comparator,s=e.createState,i=e.equals,a=e.strict;if(s)return function(c,u){var d=s(),h=d.cache,m=h===void 0?t?new WeakMap:void 0:h,p=d.meta;return r(c,u,{cache:m,equals:i,meta:p,strict:a})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return r(c,u,o)}}var XDe=Ih();Ih({strict:!0});Ih({circular:!0});Ih({circular:!0,strict:!0});Ih({createInternalComparator:function(){return Am}});Ih({strict:!0,createInternalComparator:function(){return Am}});Ih({circular:!0,createInternalComparator:function(){return Am}});Ih({circular:!0,createInternalComparator:function(){return Am},strict:!0});function Ih(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=GDe(e),c=WDe(l),u=s?s(c):KDe(c);return ZDe({circular:r,comparator:c,createState:i,equals:u,strict:o})}function YDe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function yD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function i(a){r<0&&(r=a),a-r>t?(e(a),r=-1):YDe(i)};requestAnimationFrame(s)}function hC(e){"@babel/helpers - typeof";return hC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hC(e)}function JDe(e){return r8e(e)||t8e(e)||e8e(e)||QDe()}function QDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e8e(e,t){if(e){if(typeof e=="string")return bD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bD(e,t)}}function bD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function t8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function r8e(e){if(Array.isArray(e))return e}function n8e(){var e={},t=function(){return null},r=!1,s=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,l=JDe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){yD(i.bind(null,u),c);return}i(c),yD(i.bind(null,u));return}hC(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,s(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}function jD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function wD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jD(Object(r),!0).forEach(function(s){qZ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function qZ(e,t,r){return t=s8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s8e(e){var t=i8e(e,"string");return n0(t)==="symbol"?t:String(t)}function i8e(e,t){if(n0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(n0(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a8e=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},o8e=function(t){return t},l8e=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Jv=function(t,r){return Object.keys(r).reduce(function(s,i){return wD(wD({},s),{},qZ({},i,t(i,r[i])))},{})},_D=function(t,r,s){return t.map(function(i){return"".concat(l8e(i)," ").concat(r,"ms ").concat(s)}).join(",")};function c8e(e,t){return h8e(e)||d8e(e,t)||VZ(e,t)||u8e()}function u8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function h8e(e){if(Array.isArray(e))return e}function f8e(e){return g8e(e)||p8e(e)||VZ(e)||m8e()}function m8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VZ(e,t){if(e){if(typeof e=="string")return fC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fC(e,t)}}function p8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g8e(e){if(Array.isArray(e))return fC(e)}function fC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var ww=1e-4,UZ=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},HZ=function(t,r){return t.map(function(s,i){return s*Math.pow(r,i)}).reduce(function(s,i){return s+i})},ND=function(t,r){return function(s){var i=UZ(t,r);return HZ(i,s)}},x8e=function(t,r){return function(s){var i=UZ(t,r),a=[].concat(f8e(i.map(function(o,l){return o*l}).slice(1)),[0]);return HZ(a,s)}},SD=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i=r[0],a=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=c8e(u,4);i=d[0],a=d[1],o=d[2],l=d[3]}}}var h=ND(i,o),m=ND(a,l),p=x8e(i,o),v=function(j){return j>1?1:j<0?0:j},g=function(j){for(var _=j>1?1:j,w=_,A=0;A<8;++A){var S=h(w)-_,P=p(w);if(Math.abs(S-_)<ww||P<ww)return m(w);w=v(w-S/P)}return m(w)};return g.isStepper=!1,g},v8e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(d,h,m){var p=-(d-h)*s,v=m*a,g=m+(p-v)*l/1e3,y=m*l/1e3+d;return Math.abs(y-h)<ww&&Math.abs(g)<ww?[h,0]:[y,g]};return c.isStepper=!0,c.dt=l,c},y8e=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SD(i);case"spring":return v8e();default:if(i.split("(")[0]==="cubic-bezier")return SD(i)}return typeof i=="function"?i:null};function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s0(e)}function AD(e){return w8e(e)||j8e(e)||WZ(e)||b8e()}function b8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w8e(e){if(Array.isArray(e))return pC(e)}function PD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PD(Object(r),!0).forEach(function(s){mC(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function mC(e,t,r){return t=_8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _8e(e){var t=N8e(e,"string");return s0(t)==="symbol"?t:String(t)}function N8e(e,t){if(s0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(s0(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S8e(e,t){return C8e(e)||P8e(e,t)||WZ(e,t)||A8e()}function A8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WZ(e,t){if(e){if(typeof e=="string")return pC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pC(e,t)}}function pC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function P8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function C8e(e){if(Array.isArray(e))return e}var _w=function(t,r,s){return t+(r-t)*s},gC=function(t){var r=t.from,s=t.to;return r!==s},k8e=function e(t,r,s){var i=Jv(function(a,o){if(gC(o)){var l=t(o.from,o.to,o.velocity),c=S8e(l,2),u=c[0],d=c[1];return ii(ii({},o),{},{from:u,velocity:d})}return o},r);return s<1?Jv(function(a,o){return gC(o)?ii(ii({},o),{},{velocity:_w(o.velocity,i[a].velocity,s),from:_w(o.from,i[a].from,s)}):o},r):e(t,i,s-1)};const E8e=function(e,t,r,s,i){var a=a8e(e,t),o=a.reduce(function(y,j){return ii(ii({},y),{},mC({},j,[e[j],t[j]]))},{}),l=a.reduce(function(y,j){return ii(ii({},y),{},mC({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,u,d,h=function(){return null},m=function(){return Jv(function(j,_){return _.from},l)},p=function(){return!Object.values(l).filter(gC).length},v=function(j){u||(u=j);var _=j-u,w=_/r.dt;l=k8e(r,l,w),i(ii(ii(ii({},e),t),m())),u=j,p()||(c=requestAnimationFrame(h))},g=function(j){d||(d=j);var _=(j-d)/s,w=Jv(function(S,P){return _w.apply(void 0,AD(P).concat([r(_)]))},o);if(i(ii(ii(ii({},e),t),w)),_<1)c=requestAnimationFrame(h);else{var A=Jv(function(S,P){return _w.apply(void 0,AD(P).concat([r(1)]))},o);i(ii(ii(ii({},e),t),A))}};return h=r.isStepper?v:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Rg(e){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rg(e)}var T8e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function O8e(e,t){if(e==null)return{};var r=L8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function L8e(e,t){if(e==null)return{};var r={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function eS(e){return D8e(e)||R8e(e)||I8e(e)||M8e()}function M8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8e(e,t){if(e){if(typeof e=="string")return xC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xC(e,t)}}function R8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D8e(e){if(Array.isArray(e))return xC(e)}function xC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function CD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function ul(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CD(Object(r),!0).forEach(function(s){Ev(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ev(e,t,r){return t=GZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,GZ(s.key),s)}}function F8e(e,t,r){return t&&kD(e.prototype,t),r&&kD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e){var t=z8e(e,"string");return Rg(t)==="symbol"?t:String(t)}function z8e(e,t){if(Rg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Rg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vC(e,t)}function vC(e,t){return vC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},vC(e,t)}function q8e(e){var t=V8e();return function(){var s=Nw(e),i;if(t){var a=Nw(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return yC(this,i)}}function yC(e,t){if(t&&(Rg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bC(e)}function bC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V8e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nw(e){return Nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nw(e)}var z_=function(e){B8e(r,e);var t=q8e(r);function r(s,i){var a;$8e(this,r),a=t.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,m=o.children,p=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(bC(a)),a.changeStyle=a.changeStyle.bind(bC(a)),!l||p<=0)return a.state={style:{}},typeof m=="function"&&(a.state={style:d}),yC(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof m=="function")return a.state={style:u},yC(a);a.state={style:c?Ev({},c,u):u}}else a.state={style:{}};return a}return F8e(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,m=this.state.style;if(l){if(!o){var p={style:c?Ev({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(p);return}if(!(XDe(i.to,d)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||u?h:i.to;if(this.state&&m){var y={style:c?Ev({},c,g):g};(c&&m[c]!==g||!c&&m!==g)&&this.setState(y)}this.runAnimation(ul(ul({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,h=i.onAnimationEnd,m=i.onAnimationStart,p=E8e(o,l,y8e(u),c,this.changeStyle),v=function(){a.stopJSAnimation=p()};this.manager.start([m,d,v,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,h=u.duration,m=h===void 0?0:h,p=function(g,y,j){if(j===0)return g;var _=y.duration,w=y.easing,A=w===void 0?"ease":w,S=y.style,P=y.properties,C=y.onAnimationEnd,T=j>0?o[j-1]:y,M=P||Object.keys(S);if(typeof A=="function"||A==="spring")return[].concat(eS(g),[a.runJSAnimation.bind(a,{from:T.style,to:S,duration:_,easing:A}),_]);var z=_D(M,_,A),O=ul(ul(ul({},T.style),S),{},{transition:z});return[].concat(eS(g),[O,_,C]).filter(o8e)};return this.manager.start([c].concat(eS(o.reduce(p,[d,Math.max(m,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=n8e());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,h=i.onAnimationEnd,m=i.steps,p=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var g=l?Ev({},l,c):c,y=_D(Object.keys(g),o,u);v.start([d,a,ul(ul({},g),{},{transition:y}),o,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=O8e(i,T8e),u=x.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var h=function(p){var v=p.props,g=v.style,y=g===void 0?{}:g,j=v.className,_=x.cloneElement(p,ul(ul({},c),{},{style:ul(ul({},y),d),className:j}));return _};return u===1?h(x.Children.only(a)):we.createElement("div",null,x.Children.map(a,function(m){return h(m)}))}}]),r}(x.PureComponent);z_.displayName="Animate";z_.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};z_.propTypes={from:zr.oneOfType([zr.object,zr.string]),to:zr.oneOfType([zr.object,zr.string]),attributeName:zr.string,duration:zr.number,begin:zr.number,easing:zr.oneOfType([zr.string,zr.func]),steps:zr.arrayOf(zr.shape({duration:zr.number.isRequired,style:zr.object.isRequired,easing:zr.oneOfType([zr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zr.func]),properties:zr.arrayOf("string"),onAnimationEnd:zr.func})),children:zr.oneOfType([zr.node,zr.func]),isActive:zr.bool,canBegin:zr.bool,onAnimationEnd:zr.func,shouldReAnimate:zr.bool,onAnimationStart:zr.func,onAnimationReStart:zr.func};const gh=z_;function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sw.apply(this,arguments)}function U8e(e,t){return K8e(e)||G8e(e,t)||W8e(e,t)||H8e()}function H8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W8e(e,t){if(e){if(typeof e=="string")return ED(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ED(e,t)}}function ED(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function G8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function K8e(e){if(Array.isArray(e))return e}function TD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function OD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TD(Object(r),!0).forEach(function(s){Z8e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Z8e(e,t,r){return t=X8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X8e(e){var t=Y8e(e,"string");return i0(t)=="symbol"?t:t+""}function Y8e(e,t){if(i0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(i0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LD=function(t,r,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,u=i>=0&&s>=0||i<0&&s<0?1:0,d;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],m=0,p=4;m<p;m++)h[m]=a[m]>o?o:a[m];d="M".concat(t,",").concat(r+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(r)),d+="L ".concat(t+s-c*h[1],",").concat(r),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+s,",").concat(r+l*h[1])),d+="L ".concat(t+s,",").concat(r+i-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+s-c*h[2],",").concat(r+i)),d+="L ".concat(t+c*h[3],",").concat(r+i),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-l*h[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);d="M ".concat(t,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(r,`
            L `).concat(t+s-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+s,",").concat(r+l*v,`
            L `).concat(t+s,",").concat(r+i-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+s-c*v,",").concat(r+i,`
            L `).concat(t+c*v,",").concat(r+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(r+i-l*v," Z")}else d="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return d},J8e=function(t,r){if(!t||!r)return!1;var s=t.x,i=t.y,a=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return s>=u&&s<=d&&i>=h&&i<=m}return!1},Q8e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},e3=function(t){var r=OD(OD({},Q8e),t),s=x.useRef(),i=x.useState(-1),a=U8e(i,2),o=a[0],l=a[1];x.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var A=s.current.getTotalLength();A&&l(A)}catch{}},[]);var c=r.x,u=r.y,d=r.width,h=r.height,m=r.radius,p=r.className,v=r.animationEasing,g=r.animationDuration,y=r.animationBegin,j=r.isAnimationActive,_=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=cr("recharts-rectangle",p);return _?we.createElement(gh,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:v,isActive:_},function(A){var S=A.width,P=A.height,C=A.x,T=A.y;return we.createElement(gh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:j,easing:v},we.createElement("path",Sw({},Bt(r,!0),{className:w,d:LD(C,T,S,P,m),ref:s})))}):we.createElement("path",Sw({},Bt(r,!0),{className:w,d:LD(c,u,d,h,m)}))},e$e=["points","className","baseLinePoints","connectNulls"];function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Dp.apply(this,arguments)}function t$e(e,t){if(e==null)return{};var r=r$e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function r$e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function MD(e){return a$e(e)||i$e(e)||s$e(e)||n$e()}function n$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s$e(e,t){if(e){if(typeof e=="string")return jC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jC(e,t)}}function i$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a$e(e){if(Array.isArray(e))return jC(e)}function jC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var ID=function(t){return t&&t.x===+t.x&&t.y===+t.y},o$e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(s){ID(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),ID(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Qv=function(t,r){var s=o$e(t);r&&(s=[s.reduce(function(a,o){return[].concat(MD(a),MD(o))},[])]);var i=s.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(i,"Z"):i},l$e=function(t,r,s){var i=Qv(t,s);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Qv(r.reverse(),s).slice(1))},c$e=function(t){var r=t.points,s=t.className,i=t.baseLinePoints,a=t.connectNulls,o=t$e(t,e$e);if(!r||!r.length)return null;var l=cr("recharts-polygon",s);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=l$e(r,i,a);return we.createElement("g",{className:l},we.createElement("path",Dp({},Bt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?we.createElement("path",Dp({},Bt(o,!0),{fill:"none",d:Qv(r,a)})):null,c?we.createElement("path",Dp({},Bt(o,!0),{fill:"none",d:Qv(i,a)})):null)}var d=Qv(r,a);return we.createElement("path",Dp({},Bt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function wC(){return wC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wC.apply(this,arguments)}var Y0=function(t){var r=t.cx,s=t.cy,i=t.r,a=t.className,o=cr("recharts-dot",a);return r===+r&&s===+s&&i===+i?x.createElement("circle",wC({},Bt(t,!1),Hj(t),{className:o,cx:r,cy:s,r:i})):null};function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}var u$e=["x","y","top","left","width","height","className"];function _C(){return _C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_C.apply(this,arguments)}function RD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function d$e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RD(Object(r),!0).forEach(function(s){h$e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function h$e(e,t,r){return t=f$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$e(e){var t=m$e(e,"string");return a0(t)=="symbol"?t:t+""}function m$e(e,t){if(a0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(a0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p$e(e,t){if(e==null)return{};var r=g$e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function g$e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var x$e=function(t,r,s,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(s)},v$e=function(t){var r=t.x,s=r===void 0?0:r,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,m=t.height,p=m===void 0?0:m,v=t.className,g=p$e(t,u$e),y=d$e({x:s,y:a,top:l,left:u,width:h,height:p},g);return!gt(s)||!gt(a)||!gt(h)||!gt(p)||!gt(l)||!gt(u)?null:we.createElement("path",_C({},Bt(y,!0),{className:cr("recharts-cross",v),d:x$e(s,a,h,p,l,u)}))},y$e=R_,b$e=iZ,j$e=zc;function w$e(e,t){return e&&e.length?y$e(e,j$e(t),b$e):void 0}var _$e=w$e;const N$e=Er(_$e);var S$e=R_,A$e=zc,P$e=aZ;function C$e(e,t){return e&&e.length?S$e(e,A$e(t),P$e):void 0}var k$e=C$e;const E$e=Er(k$e);var T$e=["cx","cy","angle","ticks","axisLine"],O$e=["ticks","tick","angle","tickFormatter","stroke"];function Dg(e){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dg(e)}function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ey.apply(this,arguments)}function DD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DD(Object(r),!0).forEach(function(s){B_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function $D(e,t){if(e==null)return{};var r=L$e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function L$e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function M$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ZZ(s.key),s)}}function I$e(e,t,r){return t&&FD(e.prototype,t),r&&FD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R$e(e,t,r){return t=Aw(t),D$e(e,KZ()?Reflect.construct(t,r||[],Aw(e).constructor):t.apply(e,r))}function D$e(e,t){if(t&&(Dg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $$e(e)}function $$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KZ=function(){return!!e})()}function Aw(e){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Aw(e)}function F$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NC(e,t)}function NC(e,t){return NC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},NC(e,t)}function B_(e,t,r){return t=ZZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZZ(e){var t=z$e(e,"string");return Dg(t)=="symbol"?t:t+""}function z$e(e,t){if(Dg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Dg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q_=function(e){function t(){return M$e(this,t),R$e(this,t,arguments)}return F$e(t,e),I$e(t,[{key:"getTickValueCoord",value:function(s){var i=s.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return bn(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,i;switch(s){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=N$e(l,function(d){return d.coordinate||0}),u=E$e(l,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,u=$D(s,T$e),d=l.reduce(function(v,g){return[Math.min(v[0],g.coordinate),Math.max(v[1],g.coordinate)]},[1/0,-1/0]),h=bn(i,a,d[0],o),m=bn(i,a,d[1],o),p=cf(cf(cf({},Bt(u,!1)),{},{fill:"none"},Bt(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return we.createElement("line",ey({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=$D(i,O$e),h=this.getTickTextAnchor(),m=Bt(d,!1),p=Bt(o,!1),v=a.map(function(g,y){var j=s.getTickValueCoord(g),_=cf(cf(cf(cf({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},m),{},{stroke:"none",fill:u},p),{},{index:y},j),{},{payload:g});return we.createElement(br,ey({className:cr("recharts-polar-radius-axis-tick",MZ(o)),key:"tick-".concat(g.coordinate)},sm(s.props,g,y)),t.renderTickItem(o,_,c?c(g.value,y):g.value))});return we.createElement(br,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.axisLine,o=s.tick;return!i||!i.length?null:we.createElement(br,{className:cr("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Ks.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return we.isValidElement(s)?o=we.cloneElement(s,i):Xt(s)?o=s(i):o=we.createElement(im,ey({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(x.PureComponent);B_(q_,"displayName","PolarRadiusAxis");B_(q_,"axisType","radiusAxis");B_(q_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $g(e){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$g(e)}function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},_f.apply(this,arguments)}function zD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zD(Object(r),!0).forEach(function(s){V_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function B$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,YZ(s.key),s)}}function q$e(e,t,r){return t&&BD(e.prototype,t),r&&BD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V$e(e,t,r){return t=Pw(t),U$e(e,XZ()?Reflect.construct(t,r||[],Pw(e).constructor):t.apply(e,r))}function U$e(e,t){if(t&&($g(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H$e(e)}function H$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XZ=function(){return!!e})()}function Pw(e){return Pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pw(e)}function W$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SC(e,t)}function SC(e,t){return SC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},SC(e,t)}function V_(e,t,r){return t=YZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YZ(e){var t=G$e(e,"string");return $g(t)=="symbol"?t:t+""}function G$e(e,t){if($g(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if($g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K$e=Math.PI/180,qD=1e-5,U_=function(e){function t(){return B$e(this,t),V$e(this,t,arguments)}return W$e(t,e),q$e(t,[{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,h=bn(a,o,l,s.coordinate),m=bn(a,o,l+(c==="inner"?-1:1)*d,s.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(s){var i=this.props.orientation,a=Math.cos(-s.coordinate*K$e),o;return a>qD?o=i==="outer"?"start":"end":a<-qD?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,u=uf(uf({},Bt(this.props,!1)),{},{fill:"none"},Bt(l,!1));if(c==="circle")return we.createElement(Y0,_f({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:o}));var d=this.props.ticks,h=d.map(function(m){return bn(i,a,o,m.coordinate)});return we.createElement(c$e,_f({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=Bt(this.props,!1),h=Bt(o,!1),m=uf(uf({},d),{},{fill:"none"},Bt(l,!1)),p=a.map(function(v,g){var y=s.getTickLineCoord(v),j=s.getTickTextAnchor(v),_=uf(uf(uf({textAnchor:j},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:v,x:y.x2,y:y.y2});return we.createElement(br,_f({className:cr("recharts-polar-angle-axis-tick",MZ(o)),key:"tick-".concat(v.coordinate)},sm(s.props,v,g)),l&&we.createElement("line",_f({className:"recharts-polar-angle-axis-tick-line"},m,y)),o&&t.renderTickItem(o,_,c?c(v.value,g):v.value))});return we.createElement(br,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.radius,o=s.axisLine;return a<=0||!i||!i.length?null:we.createElement(br,{className:cr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,i,a){var o;return we.isValidElement(s)?o=we.cloneElement(s,i):Xt(s)?o=s(i):o=we.createElement(im,_f({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(x.PureComponent);V_(U_,"displayName","PolarAngleAxis");V_(U_,"axisType","angleAxis");V_(U_,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Z$e=tK,X$e=Z$e(Object.getPrototypeOf,Object),Y$e=X$e,J$e=Yu,Q$e=Y$e,eFe=Ju,tFe="[object Object]",rFe=Function.prototype,nFe=Object.prototype,JZ=rFe.toString,sFe=nFe.hasOwnProperty,iFe=JZ.call(Object);function aFe(e){if(!eFe(e)||J$e(e)!=tFe)return!1;var t=Q$e(e);if(t===null)return!0;var r=sFe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&JZ.call(r)==iFe}var oFe=aFe;const lFe=Er(oFe);var cFe=Yu,uFe=Ju,dFe="[object Boolean]";function hFe(e){return e===!0||e===!1||uFe(e)&&cFe(e)==dFe}var fFe=hFe;const mFe=Er(fFe);function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o0(e)}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Cw.apply(this,arguments)}function pFe(e,t){return yFe(e)||vFe(e,t)||xFe(e,t)||gFe()}function gFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xFe(e,t){if(e){if(typeof e=="string")return VD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VD(e,t)}}function VD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function vFe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function yFe(e){if(Array.isArray(e))return e}function UD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function HD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UD(Object(r),!0).forEach(function(s){bFe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function bFe(e,t,r){return t=jFe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jFe(e){var t=wFe(e,"string");return o0(t)=="symbol"?t:t+""}function wFe(e,t){if(o0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(o0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WD=function(t,r,s,i,a){var o=s-i,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+s,",").concat(r),l+="L ".concat(t+s-o/2,",").concat(r+a),l+="L ".concat(t+s-o/2-i,",").concat(r+a),l+="L ".concat(t,",").concat(r," Z"),l},_Fe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NFe=function(t){var r=HD(HD({},_Fe),t),s=x.useRef(),i=x.useState(-1),a=pFe(i,2),o=a[0],l=a[1];x.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var w=s.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,h=r.lowerWidth,m=r.height,p=r.className,v=r.animationEasing,g=r.animationDuration,y=r.animationBegin,j=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||m!==+m||d===0&&h===0||m===0)return null;var _=cr("recharts-trapezoid",p);return j?we.createElement(gh,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:m,x:c,y:u},duration:g,animationEasing:v,isActive:j},function(w){var A=w.upperWidth,S=w.lowerWidth,P=w.height,C=w.x,T=w.y;return we.createElement(gh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:v},we.createElement("path",Cw({},Bt(r,!0),{className:_,d:WD(C,T,A,S,P),ref:s})))}):we.createElement("g",null,we.createElement("path",Cw({},Bt(r,!0),{className:_,d:WD(c,u,d,h,m)})))},SFe=["option","shapeType","propTransformer","activeClassName","isActive"];function l0(e){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l0(e)}function AFe(e,t){if(e==null)return{};var r=PFe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function PFe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function GD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GD(Object(r),!0).forEach(function(s){CFe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function CFe(e,t,r){return t=kFe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kFe(e){var t=EFe(e,"string");return l0(t)=="symbol"?t:t+""}function EFe(e,t){if(l0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(l0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TFe(e,t){return kw(kw({},t),e)}function OFe(e,t){return e==="symbols"}function KD(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return we.createElement(e3,r);case"trapezoid":return we.createElement(NFe,r);case"sector":return we.createElement(DZ,r);case"symbols":if(OFe(t))return we.createElement(yT,r);break;default:return null}}function LFe(e){return x.isValidElement(e)?e.props:e}function QZ(e){var t=e.option,r=e.shapeType,s=e.propTransformer,i=s===void 0?TFe:s,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=AFe(e,SFe),u;if(x.isValidElement(t))u=x.cloneElement(t,kw(kw({},c),LFe(t)));else if(Xt(t))u=t(c);else if(lFe(t)&&!mFe(t)){var d=i(t,c);u=we.createElement(KD,{shapeType:r,elementProps:d})}else{var h=c;u=we.createElement(KD,{shapeType:r,elementProps:h})}return l?we.createElement(br,{className:o},u):u}function H_(e,t){return t!=null&&"trapezoids"in e.props}function W_(e,t){return t!=null&&"sectors"in e.props}function c0(e,t){return t!=null&&"points"in e.props}function MFe(e,t){var r,s,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,a=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return i&&a}function IFe(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function RFe(e,t){var r=e.x===t.x,s=e.y===t.y,i=e.z===t.z;return r&&s&&i}function DFe(e,t){var r;return H_(e,t)?r=MFe:W_(e,t)?r=IFe:c0(e,t)&&(r=RFe),r}function $Fe(e,t){var r;return H_(e,t)?r="trapezoids":W_(e,t)?r="sectors":c0(e,t)&&(r="points"),r}function FFe(e,t){if(H_(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(W_(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return c0(e,t)?t.payload:{}}function zFe(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,i=$Fe(r,t),a=FFe(r,t),o=s.filter(function(c,u){var d=am(a,c),h=r.props[i].filter(function(v){var g=DFe(r,t);return g(v,t)}),m=r.props[i].indexOf(h[h.length-1]),p=u===m;return d&&p}),l=s.indexOf(o[o.length-1]);return l}var $1;function Fg(e){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fg(e)}function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$p.apply(this,arguments)}function ZD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZD(Object(r),!0).forEach(function(s){Do(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function BFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XD(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,tX(s.key),s)}}function qFe(e,t,r){return t&&XD(e.prototype,t),r&&XD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VFe(e,t,r){return t=Ew(t),UFe(e,eX()?Reflect.construct(t,r||[],Ew(e).constructor):t.apply(e,r))}function UFe(e,t){if(t&&(Fg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HFe(e)}function HFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eX=function(){return!!e})()}function Ew(e){return Ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ew(e)}function WFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AC(e,t)}function AC(e,t){return AC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},AC(e,t)}function Do(e,t,r){return t=tX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tX(e){var t=GFe(e,"string");return Fg(t)=="symbol"?t:t+""}function GFe(e,t){if(Fg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Fg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zl=function(e){function t(r){var s;return BFe(this,t),s=VFe(this,t,[r]),Do(s,"pieRef",null),Do(s,"sectorRefs",[]),Do(s,"id",wm("recharts-pie-")),Do(s,"handleAnimationEnd",function(){var i=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Xt(i)&&i()}),Do(s,"handleAnimationStart",function(){var i=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Xt(i)&&i()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return WFe(t,e),qFe(t,[{key:"isActiveIndex",value:function(s){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(s)!==-1:s===i}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=Bt(this.props,!1),h=Bt(o,!1),m=Bt(l,!1),p=o&&o.offsetRadius||20,v=s.map(function(g,y){var j=(g.startAngle+g.endAngle)/2,_=bn(g.cx,g.cy,g.outerRadius+p,j),w=gn(gn(gn(gn({},d),g),{},{stroke:"none"},h),{},{index:y,textAnchor:t.getTextAnchor(_.x,g.cx)},_),A=gn(gn(gn(gn({},d),g),{},{fill:"none",stroke:g.fill},m),{},{index:y,points:[bn(g.cx,g.cy,g.outerRadius,j),_]}),S=c;return ir(c)&&ir(u)?S="value":ir(c)&&(S=u),we.createElement(br,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,A,"line"),t.renderLabelItem(o,w,hs(g,S)))});return we.createElement(br,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(s){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return s.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&s.length!==1)return null;var h=i.isActiveIndex(d),m=c&&i.hasActiveIndex()?c:null,p=h?o:m,v=gn(gn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return we.createElement(br,$p({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},sm(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),we.createElement(QZ,$p({option:p,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state,m=h.prevSectors,p=h.prevIsAnimationActive;return we.createElement(gh,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var g=v.t,y=[],j=a&&a[0],_=j.startAngle;return a.forEach(function(w,A){var S=m&&m[A],P=A>0?so(w,"paddingAngle",0):0;if(S){var C=Ms(S.endAngle-S.startAngle,w.endAngle-w.startAngle),T=gn(gn({},w),{},{startAngle:_+P,endAngle:_+C(g)+P});y.push(T),_=T.endAngle}else{var M=w.endAngle,z=w.startAngle,O=Ms(0,M-z),I=O(g),q=gn(gn({},w),{},{startAngle:_+P,endAngle:_+I+P});y.push(q),_=q.endAngle}}),we.createElement(br,null,s.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(s){var i=this;s.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,i=s.sectors,a=s.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!am(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,h=i.innerRadius,m=i.outerRadius,p=i.isAnimationActive,v=this.state.isAnimationFinished;if(a||!o||!o.length||!gt(u)||!gt(d)||!gt(h)||!gt(m))return null;var g=cr("recharts-pie",l);return we.createElement(br,{tabIndex:this.props.rootTabIndex,className:g,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(o),Ks.renderCallByParent(this.props,null,!1),(!p||v)&&wc.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return i.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:s.sectors!==i.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,i){return s>i?"start":s<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,i,a){if(we.isValidElement(s))return we.cloneElement(s,i);if(Xt(s))return s(i);var o=cr("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return we.createElement(Bf,$p({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,i,a){if(we.isValidElement(s))return we.cloneElement(s,i);var o=a;if(Xt(s)&&(o=s(i),we.isValidElement(o)))return o;var l=cr("recharts-pie-label-text",typeof s!="boolean"&&!Xt(s)?s.className:"");return we.createElement(im,$p({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(x.PureComponent);$1=zl;Do(zl,"displayName","Pie");Do(zl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!kl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Do(zl,"parseDeltaAngle",function(e,t){var r=Qi(t-e),s=Math.min(Math.abs(t-e),360);return r*s});Do(zl,"getRealPieData",function(e){var t=e.data,r=e.children,s=Bt(e,!1),i=io(r,_m);return t&&t.length?t.map(function(a,o){return gn(gn(gn({payload:a},s),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return gn(gn({},s),a.props)}):[]});Do(zl,"parseCoordinateOfPie",function(e,t){var r=t.top,s=t.left,i=t.width,a=t.height,o=LZ(i,a),l=s+ea(e.cx,i,i/2),c=r+ea(e.cy,a,a/2),u=ea(e.innerRadius,o,0),d=ea(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});Do(zl,"getComposedData",function(e){var t=e.item,r=e.offset,s=t.type.defaultProps!==void 0?gn(gn({},t.type.defaultProps),t.props):t.props,i=$1.getRealPieData(s);if(!i||!i.length)return null;var a=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,u=s.dataKey,d=s.nameKey,h=s.valueKey,m=s.tooltipType,p=Math.abs(s.minAngle),v=$1.parseCoordinateOfPie(s,r),g=$1.parseDeltaAngle(o,l),y=Math.abs(g),j=u;ir(u)&&ir(h)?(Cl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):ir(u)&&(Cl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=h);var _=i.filter(function(T){return hs(T,j,0)!==0}).length,w=(y>=360?_:_-1)*c,A=y-_*p-w,S=i.reduce(function(T,M){var z=hs(M,j,0);return T+(gt(z)?z:0)},0),P;if(S>0){var C;P=i.map(function(T,M){var z=hs(T,j,0),O=hs(T,d,M),I=(gt(z)?z:0)/S,q;M?q=C.endAngle+Qi(g)*c*(z!==0?1:0):q=o;var F=q+Qi(g)*((z!==0?p:0)+I*A),W=(q+F)/2,V=(v.innerRadius+v.outerRadius)/2,ne=[{name:O,value:z,payload:T,dataKey:j,type:m}],G=bn(v.cx,v.cy,V,W);return C=gn(gn(gn({percent:I,cornerRadius:a,name:O,tooltipPayload:ne,midAngle:W,middleRadius:V,tooltipPosition:G},T),v),{},{value:hs(T,j),startAngle:q,endAngle:F,payload:T,paddingAngle:Qi(g)*c}),C})}return gn(gn({},v),{},{sectors:P,data:i})});var KFe=Math.ceil,ZFe=Math.max;function XFe(e,t,r,s){for(var i=-1,a=ZFe(KFe((t-e)/(r||1)),0),o=Array(a);a--;)o[s?a:++i]=e,e+=r;return o}var YFe=XFe,JFe=bK,YD=1/0,QFe=17976931348623157e292;function e7e(e){if(!e)return e===0?e:0;if(e=JFe(e),e===YD||e===-YD){var t=e<0?-1:1;return t*QFe}return e===e?e:0}var rX=e7e,t7e=YFe,r7e=k_,tS=rX;function n7e(e){return function(t,r,s){return s&&typeof s!="number"&&r7e(t,r,s)&&(r=s=void 0),t=tS(t),r===void 0?(r=t,t=0):r=tS(r),s=s===void 0?t<r?1:-1:tS(s),t7e(t,r,s,e)}}var s7e=n7e,i7e=s7e,a7e=i7e(),o7e=a7e;const Tw=Er(o7e);function u0(e){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u0(e)}function JD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function QD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JD(Object(r),!0).forEach(function(s){nX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JD(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nX(e,t,r){return t=l7e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7e(e){var t=c7e(e,"string");return u0(t)=="symbol"?t:t+""}function c7e(e,t){if(u0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(u0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u7e=["Webkit","Moz","O","ms"],d7e=function(t,r){if(!t)return null;var s=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=u7e.reduce(function(a,o){return QD(QD({},a),{},nX({},o+s,r))},{});return i[t]=r,i};function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(e)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ow.apply(this,arguments)}function e8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function rS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(r),!0).forEach(function(s){Za(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function h7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,iX(s.key),s)}}function f7e(e,t,r){return t&&t8(e.prototype,t),r&&t8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m7e(e,t,r){return t=Lw(t),p7e(e,sX()?Reflect.construct(t,r||[],Lw(e).constructor):t.apply(e,r))}function p7e(e,t){if(t&&(zg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g7e(e)}function g7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!e})()}function Lw(e){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lw(e)}function x7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PC(e,t)}function PC(e,t){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},PC(e,t)}function Za(e,t,r){return t=iX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iX(e){var t=v7e(e,"string");return zg(t)=="symbol"?t:t+""}function v7e(e,t){if(zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(zg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y7e=function(t){var r=t.data,s=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Xv().domain(Tw(0,c)).range([a,a+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(s),endX:u(i),scale:u,scaleValues:d}},r8=function(t){return t.changedTouches&&!!t.changedTouches.length},Bg=function(e){function t(r){var s;return h7e(this,t),s=m7e(this,t,[r]),Za(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),Za(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),Za(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),Za(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Za(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Za(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Za(s,"handleSlideDragStart",function(i){var a=r8(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return x7e(t,e),f7e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(i,a),m=Math.max(i,a),p=t.getIndexInRange(o,h),v=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=hs(a[s],l,s);return Xt(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,m=c.startIndex,p=c.endIndex,v=c.onChange,g=s.pageX-a;g>0?g=Math.min(g,u+d-h-l,u+d-h-o):g<0&&(g=Math.max(g,u-o,u-l));var y=this.getIndex({startX:o+g,endX:l+g});(y.startIndex!==m||y.endIndex!==p)&&v&&v(y),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=r8(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,h=d.x,m=d.width,p=d.travellerWidth,v=d.onChange,g=d.gap,y=d.data,j={startX:this.state.startX,endX:this.state.endX},_=s.pageX-a;_>0?_=Math.min(_,h+m-p-u):_<0&&(_=Math.max(_,h-u)),j[o]=u+_;var w=this.getIndex(j),A=w.startIndex,S=w.endIndex,P=function(){var T=y.length-1;return o==="startX"&&(l>c?A%g===0:S%g===0)||l<c&&S===T||o==="endX"&&(l>c?S%g===0:A%g===0)||l>c&&S===T};this.setState(Za(Za({},o,u+_),"brushMoveStartX",s.pageX),function(){v&&P()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],h=l.indexOf(d);if(h!==-1){var m=h+s;if(!(m===-1||m>=l.length)){var p=l[m];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(Za({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,u=s.stroke;return we.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,u=s.children,d=s.padding,h=x.Children.only(u);return h?we.cloneElement(h,{x:i,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,m=c.traveller,p=c.ariaLabel,v=c.data,g=c.startIndex,y=c.endIndex,j=Math.max(s,this.props.x),_=rS(rS({},Bt(this.props,!1)),{},{x:j,y:u,width:d,height:h}),w=p||"Min value: ".concat((a=v[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[y])===null||o===void 0?void 0:o.name);return we.createElement(br,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,_))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(s,i)+u,h=Math.max(Math.abs(i-s)-u,0);return we.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,u=s.stroke,d=this.state,h=d.startX,m=d.endX,p=5,v={pointerEvents:"none",fill:u};return we.createElement(br,{className:"recharts-brush-texts"},we.createElement(im,Ow({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-p,y:o+l/2},v),this.getTextOfTick(i)),we.createElement(im,Ow({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+p,y:o+l/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,u=s.width,d=s.height,h=s.alwaysShowText,m=this.state,p=m.startX,v=m.endX,g=m.isTextActive,y=m.isSlideMoving,j=m.isTravellerMoving,_=m.isTravellerFocused;if(!i||!i.length||!gt(l)||!gt(c)||!gt(u)||!gt(d)||u<=0||d<=0)return null;var w=cr("recharts-brush",a),A=we.Children.count(o)===1,S=d7e("userSelect","none");return we.createElement(br,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(g||y||j||_||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,u=Math.floor(a+l/2)-1;return we.createElement(we.Fragment,null,we.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),we.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),we.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return we.isValidElement(s)?a=we.cloneElement(s,i):Xt(s)?a=s(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,u=s.updateId,d=s.startIndex,h=s.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return rS({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?y7e({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var m=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(x.PureComponent);Za(Bg,"displayName","Brush");Za(Bg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var b7e=AT;function j7e(e,t){var r;return b7e(e,function(s,i,a){return r=t(s,i,a),!r}),!!r}var w7e=j7e,_7e=GG,N7e=zc,S7e=w7e,A7e=Da,P7e=k_;function C7e(e,t,r){var s=A7e(e)?_7e:S7e;return r&&P7e(e,t,r)&&(t=void 0),s(e,N7e(t))}var k7e=C7e;const E7e=Er(k7e);var _c=function(t,r){var s=t.alwaysShow,i=t.ifOverflow;return s&&(i="extendDomain"),i===r},n8=pK;function T7e(e,t,r){t=="__proto__"&&n8?n8(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var O7e=T7e,L7e=O7e,M7e=fK,I7e=zc;function R7e(e,t){var r={};return t=I7e(t),M7e(e,function(s,i,a){L7e(r,i,t(s,i,a))}),r}var D7e=R7e;const $7e=Er(D7e);function F7e(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!t(e[r],r,e))return!1;return!0}var z7e=F7e,B7e=AT;function q7e(e,t){var r=!0;return B7e(e,function(s,i,a){return r=!!t(s,i,a),r}),r}var V7e=q7e,U7e=z7e,H7e=V7e,W7e=zc,G7e=Da,K7e=k_;function Z7e(e,t,r){var s=G7e(e)?U7e:H7e;return r&&K7e(e,t,r)&&(t=void 0),s(e,W7e(t))}var X7e=Z7e;const aX=Er(X7e);var Y7e=["x","y"];function d0(e){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d0(e)}function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},CC.apply(this,arguments)}function s8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function yv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s8(Object(r),!0).forEach(function(s){J7e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function J7e(e,t,r){return t=Q7e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q7e(e){var t=eze(e,"string");return d0(t)=="symbol"?t:t+""}function eze(e,t){if(d0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(d0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tze(e,t){if(e==null)return{};var r=rze(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function rze(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function nze(e,t){var r=e.x,s=e.y,i=tze(e,Y7e),a="".concat(r),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),u="".concat(t.height||i.height),d=parseInt(u,10),h="".concat(t.width||i.width),m=parseInt(h,10);return yv(yv(yv(yv(yv({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function i8(e){return we.createElement(QZ,CC({shapeType:"rectangle",propTransformer:nze,activeClassName:"recharts-active-bar"},e))}var sze=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof t=="number")return t;var a=gt(s)||MNe(s);return a?t(s,i):(a||lm(!1),r)}},ize=["value","background"],oX;function qg(e){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(e)}function aze(e,t){if(e==null)return{};var r=oze(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function oze(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mw.apply(this,arguments)}function a8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a8(Object(r),!0).forEach(function(s){Gd(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cX(s.key),s)}}function cze(e,t,r){return t&&o8(e.prototype,t),r&&o8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uze(e,t,r){return t=Iw(t),dze(e,lX()?Reflect.construct(t,r||[],Iw(e).constructor):t.apply(e,r))}function dze(e,t){if(t&&(qg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hze(e)}function hze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lX=function(){return!!e})()}function Iw(e){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iw(e)}function fze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kC(e,t)}function kC(e,t){return kC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},kC(e,t)}function Gd(e,t,r){return t=cX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=mze(e,"string");return qg(t)=="symbol"?t:t+""}function mze(e,t){if(qg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(qg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ao=function(e){function t(){var r;lze(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=uze(this,t,[].concat(i)),Gd(r,"state",{isAnimationFinished:!1}),Gd(r,"id",wm("recharts-bar-")),Gd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Gd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return fze(t,e),cze(t,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=Bt(this.props,!1);return s&&s.map(function(h,m){var p=m===c,v=p?u:o,g=vs(vs(vs({},d),h),{},{isActive:p,option:v,index:m,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return we.createElement(br,Mw({className:"recharts-bar-rectangle"},sm(i.props,h,m),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(m)}),we.createElement(i8,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,m=this.state.prevData;return we.createElement(gh,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,g=a.map(function(y,j){var _=m&&m[j];if(_){var w=Ms(_.x,y.x),A=Ms(_.y,y.y),S=Ms(_.width,y.width),P=Ms(_.height,y.height);return vs(vs({},y),{},{x:w(v),y:A(v),width:S(v),height:P(v)})}if(o==="horizontal"){var C=Ms(0,y.height),T=C(v);return vs(vs({},y),{},{y:y.y+y.height-T,height:T})}var M=Ms(0,y.width),z=M(v);return vs(vs({},y),{},{width:z})});return we.createElement(br,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!am(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=Bt(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,m=aze(u,ize);if(!h)return null;var p=vs(vs(vs(vs(vs({},m),{},{fill:"#eee"},h),c),sm(s.props,u,d)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return we.createElement(i8,Mw({key:"background-bar-".concat(d),option:s.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=io(d,X0);if(!h)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(y,j){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:hs(y,j)}},v={clipPath:s?"url(#clipPath-".concat(i,")"):null};return we.createElement(br,v,h.map(function(g){return we.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,u=s.left,d=s.top,h=s.width,m=s.height,p=s.isAnimationActive,v=s.background,g=s.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,j=cr("recharts-bar",o),_=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,A=_||w,S=ir(g)?this.id:g;return we.createElement(br,{className:j},_||w?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(S)},we.createElement("rect",{x:_?u:u-h/2,y:w?d:d-m/2,width:_?h:h*2,height:w?m:m*2}))):null,we.createElement(br,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(S,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,S),(!p||y)&&wc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(x.PureComponent);oX=ao;Gd(ao,"displayName","Bar");Gd(ao,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!kl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Gd(ao,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,p=ZIe(s,r);if(!p)return null;var v=t.layout,g=r.type.defaultProps,y=g!==void 0?vs(vs({},g),r.props):r.props,j=y.dataKey,_=y.children,w=y.minPointSize,A=v==="horizontal"?o:a,S=u?A.scale.domain():null,P=rRe({numericAxis:A}),C=io(_,_m),T=h.map(function(M,z){var O,I,q,F,W,V;u?O=XIe(u[d+z],S):(O=hs(M,j),Array.isArray(O)||(O=[P,O]));var ne=sze(w,oX.defaultProps.minPointSize)(O[1],z);if(v==="horizontal"){var G,K=[o.scale(O[0]),o.scale(O[1])],ee=K[0],xe=K[1];I=ZR({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:M,index:z}),q=(G=xe??ee)!==null&&G!==void 0?G:void 0,F=p.size;var B=ee-xe;if(W=Number.isNaN(B)?0:B,V={x:I,y:o.y,width:F,height:o.height},Math.abs(ne)>0&&Math.abs(W)<Math.abs(ne)){var X=Qi(W||ne)*(Math.abs(ne)-Math.abs(W));q-=X,W+=X}}else{var ie=[a.scale(O[0]),a.scale(O[1])],me=ie[0],ye=ie[1];if(I=me,q=ZR({axis:o,ticks:c,bandSize:i,offset:p.offset,entry:M,index:z}),F=ye-me,W=p.size,V={x:a.x,y:q,width:a.width,height:W},Math.abs(ne)>0&&Math.abs(F)<Math.abs(ne)){var Ne=Qi(F||ne)*(Math.abs(ne)-Math.abs(F));F+=Ne}}return vs(vs(vs({},M),{},{x:I,y:q,width:F,height:W,value:u?O:O[1],payload:M,background:V},C&&C[z]&&C[z].props),{},{tooltipPayload:[TZ(r,M)],tooltipPosition:{x:I+F/2,y:q+W/2}})});return vs({data:T,layout:v},m)});function h0(e){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h0(e)}function pze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uX(s.key),s)}}function gze(e,t,r){return t&&l8(e.prototype,t),r&&l8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c8(Object(r),!0).forEach(function(s){G_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function G_(e,t,r){return t=uX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uX(e){var t=xze(e,"string");return h0(t)=="symbol"?t:t+""}function xze(e,t){if(h0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(h0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t3=function(t,r,s,i,a){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},m=!!Ya(u,ao);return d.reduce(function(p,v){var g=r[v],y=g.orientation,j=g.domain,_=g.padding,w=_===void 0?{}:_,A=g.mirror,S=g.reversed,P="".concat(y).concat(A?"Mirror":""),C,T,M,z,O;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=j[1]-j[0],q=1/0,F=g.categoricalDomain.sort(DNe);if(F.forEach(function(ie,me){me>0&&(q=Math.min((ie||0)-(F[me-1]||0),q))}),Number.isFinite(q)){var W=q/I,V=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(C=W*V/2),g.padding==="no-gap"){var ne=ea(t.barCategoryGap,W*V),G=W*V/2;C=G-ne-(G-ne)/V*ne}}}i==="xAxis"?T=[s.left+(w.left||0)+(C||0),s.left+s.width-(w.right||0)-(C||0)]:i==="yAxis"?T=c==="horizontal"?[s.top+s.height-(w.bottom||0),s.top+(w.top||0)]:[s.top+(w.top||0)+(C||0),s.top+s.height-(w.bottom||0)-(C||0)]:T=g.range,S&&(T=[T[1],T[0]]);var K=PZ(g,a,m),ee=K.scale,xe=K.realScaleType;ee.domain(j).range(T),CZ(ee);var B=kZ(ee,bl(bl({},g),{},{realScaleType:xe}));i==="xAxis"?(O=y==="top"&&!A||y==="bottom"&&A,M=s.left,z=h[P]-O*g.height):i==="yAxis"&&(O=y==="left"&&!A||y==="right"&&A,M=h[P]-O*g.width,z=s.top);var X=bl(bl(bl({},g),B),{},{realScaleType:xe,x:M,y:z,scale:ee,width:i==="xAxis"?s.width:g.width,height:i==="yAxis"?s.height:g.height});return X.bandSize=yw(X,B),!g.hide&&i==="xAxis"?h[P]+=(O?-1:1)*X.height:g.hide||(h[P]+=(O?-1:1)*X.width),bl(bl({},p),{},G_({},v,X))},{})},dX=function(t,r){var s=t.x,i=t.y,a=r.x,o=r.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},vze=function(t){var r=t.x1,s=t.y1,i=t.x2,a=t.y2;return dX({x:r,y:s},{x:i,y:a})},hX=function(){function e(t){pze(this,e),this.scale=t}return gze(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();G_(hX,"EPS",1e-4);var r3=function(t){var r=Object.keys(t).reduce(function(s,i){return bl(bl({},s),{},G_({},i,hX.create(t[i])))},{});return bl(bl({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return $7e(i,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return aX(i,function(a,o){return r[o].isInRange(a)})}})};function yze(e){return(e%180+180)%180}var bze=function(t){var r=t.width,s=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=yze(i),o=a*Math.PI/180,l=Math.atan(s/r),c=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(c)},jze=zc,wze=H0,_ze=P_;function Nze(e){return function(t,r,s){var i=Object(t);if(!wze(t)){var a=jze(r);t=_ze(t),r=function(l){return a(i[l],l,i)}}var o=e(t,r,s);return o>-1?i[a?t[o]:o]:void 0}}var Sze=Nze,Aze=rX;function Pze(e){var t=Aze(e),r=t%1;return t===t?r?t-r:t:0}var Cze=Pze,kze=oK,Eze=zc,Tze=Cze,Oze=Math.max;function Lze(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var i=r==null?0:Tze(r);return i<0&&(i=Oze(s+i,0)),kze(e,Eze(t),i)}var Mze=Lze,Ize=Sze,Rze=Mze,Dze=Ize(Rze),$ze=Dze;const Fze=Er($ze);var zze=$_e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),n3=x.createContext(void 0),s3=x.createContext(void 0),fX=x.createContext(void 0),mX=x.createContext({}),pX=x.createContext(void 0),gX=x.createContext(0),xX=x.createContext(0),u8=function(t){var r=t.state,s=r.xAxisMap,i=r.yAxisMap,a=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=zze(a);return we.createElement(n3.Provider,{value:s},we.createElement(s3.Provider,{value:i},we.createElement(mX.Provider,{value:a},we.createElement(fX.Provider,{value:d},we.createElement(pX.Provider,{value:o},we.createElement(gX.Provider,{value:u},we.createElement(xX.Provider,{value:c},l)))))))},Bze=function(){return x.useContext(pX)},vX=function(t){var r=x.useContext(n3);r==null&&lm(!1);var s=r[t];return s==null&&lm(!1),s},qze=function(){var t=x.useContext(n3);return qd(t)},Vze=function(){var t=x.useContext(s3),r=Fze(t,function(s){return aX(s.domain,Number.isFinite)});return r||qd(t)},yX=function(t){var r=x.useContext(s3);r==null&&lm(!1);var s=r[t];return s==null&&lm(!1),s},Uze=function(){var t=x.useContext(fX);return t},Hze=function(){return x.useContext(mX)},i3=function(){return x.useContext(xX)},a3=function(){return x.useContext(gX)};function Vg(e){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function Wze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,jX(s.key),s)}}function Gze(e,t,r){return t&&d8(e.prototype,t),r&&d8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kze(e,t,r){return t=Rw(t),Zze(e,bX()?Reflect.construct(t,r||[],Rw(e).constructor):t.apply(e,r))}function Zze(e,t){if(t&&(Vg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xze(e)}function Xze(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bX=function(){return!!e})()}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rw(e)}function Yze(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EC(e,t)}function EC(e,t){return EC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},EC(e,t)}function h8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function f8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h8(Object(r),!0).forEach(function(s){o3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function o3(e,t,r){return t=jX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jX(e){var t=Jze(e,"string");return Vg(t)=="symbol"?t:t+""}function Jze(e,t){if(Vg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Vg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qze(e,t){return nBe(e)||rBe(e,t)||tBe(e,t)||eBe()}function eBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tBe(e,t){if(e){if(typeof e=="string")return m8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(e,t)}}function m8(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function rBe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function nBe(e){if(Array.isArray(e))return e}function TC(){return TC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},TC.apply(this,arguments)}var sBe=function(t,r){var s;return we.isValidElement(t)?s=we.cloneElement(t,r):Xt(t)?s=t(r):s=we.createElement("line",TC({},r,{className:"recharts-reference-line-line"})),s},iBe=function(t,r,s,i,a,o,l,c,u){var d=a.x,h=a.y,m=a.width,p=a.height;if(s){var v=u.y,g=t.y.apply(v,{position:o});if(_c(u,"discard")&&!t.y.isInRange(g))return null;var y=[{x:d+m,y:g},{x:d,y:g}];return c==="left"?y.reverse():y}if(r){var j=u.x,_=t.x.apply(j,{position:o});if(_c(u,"discard")&&!t.x.isInRange(_))return null;var w=[{x:_,y:h+p},{x:_,y:h}];return l==="top"?w.reverse():w}if(i){var A=u.segment,S=A.map(function(P){return t.apply(P,{position:o})});return _c(u,"discard")&&E7e(S,function(P){return!t.isInRange(P)})?null:S}return null};function aBe(e){var t=e.x,r=e.y,s=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=Bze(),d=vX(i),h=yX(a),m=Uze();if(!u||!m)return null;Cl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=r3({x:d.scale,y:h.scale}),v=Rs(t),g=Rs(r),y=s&&s.length===2,j=iBe(p,v,g,y,m,e.position,d.orientation,h.orientation,e);if(!j)return null;var _=Qze(j,2),w=_[0],A=w.x,S=w.y,P=_[1],C=P.x,T=P.y,M=_c(e,"hidden")?"url(#".concat(u,")"):void 0,z=f8(f8({clipPath:M},Bt(e,!0)),{},{x1:A,y1:S,x2:C,y2:T});return we.createElement(br,{className:cr("recharts-reference-line",l)},sBe(o,z),Ks.renderCallByParent(e,vze({x1:A,y1:S,x2:C,y2:T})))}var l3=function(e){function t(){return Wze(this,t),Kze(this,t,arguments)}return Yze(t,e),Gze(t,[{key:"render",value:function(){return we.createElement(aBe,this.props)}}])}(we.Component);o3(l3,"displayName","ReferenceLine");o3(l3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function OC(){return OC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},OC.apply(this,arguments)}function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function p8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function g8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p8(Object(r),!0).forEach(function(s){K_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function oBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_X(s.key),s)}}function lBe(e,t,r){return t&&x8(e.prototype,t),r&&x8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cBe(e,t,r){return t=Dw(t),uBe(e,wX()?Reflect.construct(t,r||[],Dw(e).constructor):t.apply(e,r))}function uBe(e,t){if(t&&(Ug(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dBe(e)}function dBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wX=function(){return!!e})()}function Dw(e){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dw(e)}function hBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LC(e,t)}function LC(e,t){return LC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},LC(e,t)}function K_(e,t,r){return t=_X(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _X(e){var t=fBe(e,"string");return Ug(t)=="symbol"?t:t+""}function fBe(e,t){if(Ug(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ug(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mBe=function(t){var r=t.x,s=t.y,i=t.xAxis,a=t.yAxis,o=r3({x:i.scale,y:a.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return _c(t,"discard")&&!o.isInRange(l)?null:l},Z_=function(e){function t(){return oBe(this,t),cBe(this,t,arguments)}return hBe(t,e),lBe(t,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,u=Rs(i),d=Rs(a);if(Cl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=mBe(this.props);if(!h)return null;var m=h.x,p=h.y,v=this.props,g=v.shape,y=v.className,j=_c(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=g8(g8({clipPath:j},Bt(this.props,!0)),{},{cx:m,cy:p});return we.createElement(br,{className:cr("recharts-reference-dot",y)},t.renderDot(g,_),Ks.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])}(we.Component);K_(Z_,"displayName","ReferenceDot");K_(Z_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});K_(Z_,"renderDot",function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):Xt(e)?r=e(t):r=we.createElement(Y0,OC({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function MC(){return MC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},MC.apply(this,arguments)}function Hg(e){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hg(e)}function v8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function y8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v8(Object(r),!0).forEach(function(s){X_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,SX(s.key),s)}}function gBe(e,t,r){return t&&b8(e.prototype,t),r&&b8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xBe(e,t,r){return t=$w(t),vBe(e,NX()?Reflect.construct(t,r||[],$w(e).constructor):t.apply(e,r))}function vBe(e,t){if(t&&(Hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yBe(e)}function yBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NX=function(){return!!e})()}function $w(e){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$w(e)}function bBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IC(e,t)}function IC(e,t){return IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},IC(e,t)}function X_(e,t,r){return t=SX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SX(e){var t=jBe(e,"string");return Hg(t)=="symbol"?t:t+""}function jBe(e,t){if(Hg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Hg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wBe=function(t,r,s,i,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var m=r3({x:d.scale,y:h.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:s?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return _c(a,"discard")&&(!m.isInRange(p)||!m.isInRange(v))?null:dX(p,v)},Y_=function(e){function t(){return pBe(this,t),xBe(this,t,arguments)}return bBe(t,e),gBe(t,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,u=s.alwaysShow,d=s.clipPathId;Cl(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Rs(i),m=Rs(a),p=Rs(o),v=Rs(l),g=this.props.shape;if(!h&&!m&&!p&&!v&&!g)return null;var y=wBe(h,m,p,v,this.props);if(!y&&!g)return null;var j=_c(this.props,"hidden")?"url(#".concat(d,")"):void 0;return we.createElement(br,{className:cr("recharts-reference-area",c)},t.renderRect(g,y8(y8({clipPath:j},Bt(this.props,!0)),y)),Ks.renderCallByParent(this.props,y))}}])}(we.Component);X_(Y_,"displayName","ReferenceArea");X_(Y_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});X_(Y_,"renderRect",function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):Xt(e)?r=e(t):r=we.createElement(e3,MC({},t,{className:"recharts-reference-area-rect"})),r});function AX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],i=0;i<e.length;i+=t)if(r===void 0||r(e[i])===!0)s.push(e[i]);else return;return s}function _Be(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return bze(s,r)}function NBe(e,t,r){var s=r==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function Fw(e,t,r,s,i){if(e*t<e*s||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-s)>=0&&e*(t+e*a/2-i)<=0}function SBe(e,t){return AX(e,t+1)}function ABe(e,t,r,s,i){for(var a=(s||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var v=s==null?void 0:s[c];if(v===void 0)return{v:AX(s,u)};var g=c,y,j=function(){return y===void 0&&(y=r(v,g)),y},_=v.coordinate,w=c===0||Fw(e,_,j,d,l);w||(c=0,d=o,u+=1),w&&(d=_+e*(j()/2+i),c+=u)},m;u<=a.length;)if(m=h(),m)return m.v;return[]}function f0(e){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f0(e)}function j8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j8(Object(r),!0).forEach(function(s){PBe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function PBe(e,t,r){return t=CBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CBe(e){var t=kBe(e,"string");return f0(t)=="symbol"?t:t+""}function kBe(e,t){if(f0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(f0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EBe(e,t,r,s,i){for(var a=(s||[]).slice(),o=a.length,l=t.start,c=t.end,u=function(m){var p=a[m],v,g=function(){return v===void 0&&(v=r(p,m)),v};if(m===o-1){var y=e*(p.coordinate+e*g()/2-c);a[m]=p=Pi(Pi({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else a[m]=p=Pi(Pi({},p),{},{tickCoord:p.coordinate});var j=Fw(e,p.tickCoord,g,l,c);j&&(c=p.tickCoord-e*(g()/2+i),a[m]=Pi(Pi({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function TBe(e,t,r,s,i,a){var o=(s||[]).slice(),l=o.length,c=t.start,u=t.end;if(a){var d=s[l-1],h=r(d,l-1),m=e*(d.coordinate+e*h/2-u);o[l-1]=d=Pi(Pi({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=Fw(e,d.tickCoord,function(){return h},c,u);p&&(u=d.tickCoord-e*(h/2+i),o[l-1]=Pi(Pi({},d),{},{isShow:!0}))}for(var v=a?l-1:l,g=function(_){var w=o[_],A,S=function(){return A===void 0&&(A=r(w,_)),A};if(_===0){var P=e*(w.coordinate-e*S()/2-c);o[_]=w=Pi(Pi({},w),{},{tickCoord:P<0?w.coordinate-P*e:w.coordinate})}else o[_]=w=Pi(Pi({},w),{},{tickCoord:w.coordinate});var C=Fw(e,w.tickCoord,S,c,u);C&&(c=w.tickCoord+e*(S()/2+i),o[_]=Pi(Pi({},w),{},{isShow:!0}))},y=0;y<v;y++)g(y);return o}function c3(e,t,r){var s=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!i||!i.length||!s)return[];if(gt(c)||kl.isSsr)return SBe(i,typeof c=="number"&&gt(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",v=d&&p==="width"?Zv(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(w,A){var S=Xt(u)?u(w.value,A):w.value;return p==="width"?_Be(Zv(S,{fontSize:t,letterSpacing:r}),v,h):Zv(S,{fontSize:t,letterSpacing:r})[p]},y=i.length>=2?Qi(i[1].coordinate-i[0].coordinate):1,j=NBe(a,y,p);return c==="equidistantPreserveStart"?ABe(y,j,g,i,o):(c==="preserveStart"||c==="preserveStartEnd"?m=TBe(y,j,g,i,o,c==="preserveStartEnd"):m=EBe(y,j,g,i,o),m.filter(function(_){return _.isShow}))}var OBe=["viewBox"],LBe=["viewBox"],MBe=["ticks"];function Wg(e){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wg(e)}function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fp.apply(this,arguments)}function w8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w8(Object(r),!0).forEach(function(s){u3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nS(e,t){if(e==null)return{};var r=IBe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function IBe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function RBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,CX(s.key),s)}}function DBe(e,t,r){return t&&_8(e.prototype,t),r&&_8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Be(e,t,r){return t=zw(t),FBe(e,PX()?Reflect.construct(t,r||[],zw(e).constructor):t.apply(e,r))}function FBe(e,t){if(t&&(Wg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zBe(e)}function zBe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PX=function(){return!!e})()}function zw(e){return zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zw(e)}function BBe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RC(e,t)}function RC(e,t){return RC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},RC(e,t)}function u3(e,t,r){return t=CX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=qBe(e,"string");return Wg(t)=="symbol"?t:t+""}function qBe(e,t){if(Wg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Wg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lx=function(e){function t(r){var s;return RBe(this,t),s=$Be(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return BBe(t,e),DBe(t,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=nS(s,OBe),l=this.props,c=l.viewBox,u=nS(l,LBe);return!eg(a,c)||!eg(o,u)||!eg(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,h=i.mirror,m=i.tickMargin,p,v,g,y,j,_,w=h?-1:1,A=s.tickSize||d,S=gt(s.tickCoord)?s.tickCoord:s.coordinate;switch(u){case"top":p=v=s.coordinate,y=o+ +!h*c,g=y-w*A,_=g-w*m,j=S;break;case"left":g=y=s.coordinate,v=a+ +!h*l,p=v-w*A,j=p-w*m,_=S;break;case"right":g=y=s.coordinate,v=a+ +h*l,p=v+w*A,j=p+w*m,_=S;break;default:p=v=s.coordinate,y=o+ +h*c,g=y+w*A,_=g+w*m,j=S;break}return{line:{x1:p,y1:g,x2:v,y2:y},tick:{x:j,y:_}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,u=s.mirror,d=s.axisLine,h=ks(ks(ks({},Bt(this.props,!1)),Bt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);h=ks(ks({},h),{},{x1:i,y1:a+m*l,x2:i+o,y2:a+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);h=ks(ks({},h),{},{x1:i+p*o,y1:a,x2:i+p*o,y2:a+l})}return we.createElement("line",Fp({},h,{className:cr("recharts-cartesian-axis-line",so(d,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,m=l.unit,p=c3(ks(ks({},this.props),{},{ticks:s}),i,a),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=Bt(this.props,!1),j=Bt(d,!1),_=ks(ks({},y),{},{fill:"none"},Bt(c,!1)),w=p.map(function(A,S){var P=o.getTickLineCoord(A),C=P.line,T=P.tick,M=ks(ks(ks(ks({textAnchor:v,verticalAnchor:g},y),{},{stroke:"none",fill:u},j),T),{},{index:S,payload:A,visibleTicksCount:p.length,tickFormatter:h});return we.createElement(br,Fp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},sm(o.props,A,S)),c&&we.createElement("line",Fp({},_,C,{className:cr("recharts-cartesian-axis-tick-line",so(c,"className"))})),d&&t.renderTickItem(d,M,"".concat(Xt(h)?h(A.value,S):A.value).concat(m||"")))});return we.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var h=this.props,m=h.ticks,p=nS(h,MBe),v=m;return Xt(c)&&(v=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!v||!v.length?null:we.createElement(br,{className:cr("recharts-cartesian-axis",u),ref:function(y){s.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Ks.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o,l=cr(i.className,"recharts-cartesian-axis-tick-value");return we.isValidElement(s)?o=we.cloneElement(s,ks(ks({},i),{},{className:l})):Xt(s)?o=s(ks(ks({},i),{},{className:l})):o=we.createElement(im,Fp({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(x.Component);u3(Lx,"displayName","CartesianAxis");u3(Lx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var VBe=["x1","y1","x2","y2","key"],UBe=["offset"];function cm(e){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(e)}function N8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N8(Object(r),!0).forEach(function(s){HBe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function HBe(e,t,r){return t=WBe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WBe(e){var t=GBe(e,"string");return cm(t)=="symbol"?t:t+""}function GBe(e,t){if(cm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(cm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lf.apply(this,arguments)}function S8(e,t){if(e==null)return{};var r=KBe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function KBe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var ZBe=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return we.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function kX(e,t){var r;if(we.isValidElement(e))r=we.cloneElement(e,t);else if(Xt(e))r=e(t);else{var s=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=S8(t,VBe),u=Bt(c,!1);u.offset;var d=S8(u,UBe);r=we.createElement("line",Lf({},d,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return r}function XBe(e){var t=e.x,r=e.width,s=e.horizontal,i=s===void 0?!0:s,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var u=ki(ki({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return kX(i,u)});return we.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function YBe(e){var t=e.y,r=e.height,s=e.vertical,i=s===void 0?!0:s,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var u=ki(ki({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return kX(i,u)});return we.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function JBe(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==d[0]&&d.unshift(0);var h=d.map(function(m,p){var v=!d[p+1],g=v?i+o-m:d[p+1]-m;if(g<=0)return null;var y=p%t.length;return we.createElement("rect",{key:"react-".concat(p),y:m,x:s,height:g,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function QBe(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!s||!s.length)return null;var d=u.map(function(m){return Math.round(m+a-a)}).sort(function(m,p){return m-p});a!==d[0]&&d.unshift(0);var h=d.map(function(m,p){var v=!d[p+1],g=v?a+l-m:d[p+1]-m;if(g<=0)return null;var y=p%s.length;return we.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:g,height:c,stroke:"none",fill:s[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var eqe=function(t,r){var s=t.xAxis,i=t.width,a=t.height,o=t.offset;return AZ(c3(ki(ki(ki({},Lx.defaultProps),s),{},{ticks:wu(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,r)},tqe=function(t,r){var s=t.yAxis,i=t.width,a=t.height,o=t.offset;return AZ(c3(ki(ki(ki({},Lx.defaultProps),s),{},{ticks:wu(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,r)},cp={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function um(e){var t,r,s,i,a,o,l=i3(),c=a3(),u=Hze(),d=ki(ki({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:cp.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:cp.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:cp.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:cp.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:cp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:cp.verticalFill,x:gt(e.x)?e.x:u.left,y:gt(e.y)?e.y:u.top,width:gt(e.width)?e.width:u.width,height:gt(e.height)?e.height:u.height}),h=d.x,m=d.y,p=d.width,v=d.height,g=d.syncWithTicks,y=d.horizontalValues,j=d.verticalValues,_=qze(),w=Vze();if(!gt(p)||p<=0||!gt(v)||v<=0||!gt(h)||h!==+h||!gt(m)||m!==+m)return null;var A=d.verticalCoordinatesGenerator||eqe,S=d.horizontalCoordinatesGenerator||tqe,P=d.horizontalPoints,C=d.verticalPoints;if((!P||!P.length)&&Xt(S)){var T=y&&y.length,M=S({yAxis:w?ki(ki({},w),{},{ticks:T?y:w.ticks}):void 0,width:l,height:c,offset:u},T?!0:g);Cl(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(cm(M),"]")),Array.isArray(M)&&(P=M)}if((!C||!C.length)&&Xt(A)){var z=j&&j.length,O=A({xAxis:_?ki(ki({},_),{},{ticks:z?j:_.ticks}):void 0,width:l,height:c,offset:u},z?!0:g);Cl(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(cm(O),"]")),Array.isArray(O)&&(C=O)}return we.createElement("g",{className:"recharts-cartesian-grid"},we.createElement(ZBe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),we.createElement(XBe,Lf({},d,{offset:u,horizontalPoints:P,xAxis:_,yAxis:w})),we.createElement(YBe,Lf({},d,{offset:u,verticalPoints:C,xAxis:_,yAxis:w})),we.createElement(JBe,Lf({},d,{horizontalPoints:P})),we.createElement(QBe,Lf({},d,{verticalPoints:C})))}um.displayName="CartesianGrid";var rqe=["type","layout","connectNulls","ref"],nqe=["key"];function Gg(e){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(e)}function A8(e,t){if(e==null)return{};var r=sqe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function sqe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ty.apply(this,arguments)}function P8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P8(Object(r),!0).forEach(function(s){jl(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function up(e){return lqe(e)||oqe(e)||aqe(e)||iqe()}function iqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aqe(e,t){if(e){if(typeof e=="string")return DC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DC(e,t)}}function oqe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lqe(e){if(Array.isArray(e))return DC(e)}function DC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function cqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,TX(s.key),s)}}function uqe(e,t,r){return t&&C8(e.prototype,t),r&&C8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function dqe(e,t,r){return t=Bw(t),hqe(e,EX()?Reflect.construct(t,r||[],Bw(e).constructor):t.apply(e,r))}function hqe(e,t){if(t&&(Gg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fqe(e)}function fqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!e})()}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bw(e)}function mqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$C(e,t)}function $C(e,t){return $C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},$C(e,t)}function jl(e,t,r){return t=TX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TX(e){var t=pqe(e,"string");return Gg(t)=="symbol"?t:t+""}function pqe(e,t){if(Gg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Gg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kc=function(e){function t(){var r;cqe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=dqe(this,t,[].concat(i)),jl(r,"state",{isAnimationFinished:!0,totalLength:0}),jl(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),jl(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(j,_){return j+_});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,m=l-o,p=[],v=0,g=0;v<c.length;g+=c[v],++v)if(g+c[v]>h){p=[].concat(up(c.slice(0,v)),[h-g]);break}var y=p.length%2===0?[0,m]:[m];return[].concat(up(t.repeat(c,d)),up(p),y).map(function(j){return"".concat(j,"px")}).join(", ")}),jl(r,"id",wm("recharts-line-")),jl(r,"pathRef",function(o){r.mainCurve=o}),jl(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),jl(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return mqe(t,e),uqe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=io(d,X0);if(!h)return null;var m=function(g,y){return{x:g.x,y:g.y,value:g.value,errorVal:hs(g.payload,y)}},p={clipPath:s?"url(#clipPath-".concat(i,")"):null};return we.createElement(br,p,h.map(function(v){return we.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=Bt(this.props,!1),m=Bt(c,!0),p=u.map(function(g,y){var j=Ka(Ka(Ka({key:"dot-".concat(y),r:3},h),m),{},{index:y,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(c,j)}),v={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return we.createElement(br,ty({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=A8(l,rqe),m=Ka(Ka(Ka({},Bt(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:u,connectNulls:d});return we.createElement(Bf,ty({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,p=o.animationId,v=o.animateNewValues,g=o.width,y=o.height,j=this.state,_=j.prevPoints,w=j.totalLength;return we.createElement(gh,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var S=A.t;if(_){var P=_.length/l.length,C=l.map(function(I,q){var F=Math.floor(q*P);if(_[F]){var W=_[F],V=Ms(W.x,I.x),ne=Ms(W.y,I.y);return Ka(Ka({},I),{},{x:V(S),y:ne(S)})}if(v){var G=Ms(g*2,I.x),K=Ms(y/2,I.y);return Ka(Ka({},I),{},{x:G(S),y:K(S)})}return Ka(Ka({},I),{},{x:I.x,y:I.y})});return a.renderCurveStatically(C,s,i)}var T=Ms(0,w),M=T(S),z;if(c){var O="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});z=a.getStrokeDasharray(M,w,O)}else z=a.generateSimpleStrokeDasharray(w,M);return a.renderCurveStatically(l,s,i,{strokeDasharray:z})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!am(u,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,h=i.top,m=i.left,p=i.width,v=i.height,g=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var j=this.state.isAnimationFinished,_=l.length===1,w=cr("recharts-line",c),A=u&&u.allowDataOverflow,S=d&&d.allowDataOverflow,P=A||S,C=ir(y)?this.id:y,T=(s=Bt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=T.r,z=M===void 0?3:M,O=T.strokeWidth,I=O===void 0?2:O,q=vG(o)?o:{},F=q.clipDot,W=F===void 0?!0:F,V=z*2+I;return we.createElement(br,{className:w},A||S?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(C)},we.createElement("rect",{x:A?m:m-p/2,y:S?h:h-v/2,width:A?p:p*2,height:S?v:v*2})),!W&&we.createElement("clipPath",{id:"clipPath-dots-".concat(C)},we.createElement("rect",{x:m-V/2,y:h-V/2,width:p+V,height:v+V}))):null,!_&&this.renderCurve(P,C),this.renderErrorBar(P,C),(_||o)&&this.renderDots(P,W,C),(!g||j)&&wc.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(up(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(up(o),up(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(we.isValidElement(s))a=we.cloneElement(s,i);else if(Xt(s))a=s(i);else{var o=i.key,l=A8(i,nqe),c=cr("recharts-line-dot",typeof s!="boolean"?s.className:"");a=we.createElement(Y0,ty({key:o},l,{className:c}))}return a}}])}(x.PureComponent);jl(kc,"displayName","Line");jl(kc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!kl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});jl(kc,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,h=c.map(function(m,p){var v=hs(m,o);return d==="horizontal"?{x:vw({axis:r,ticks:i,bandSize:l,entry:m,index:p}),y:ir(v)?null:s.scale(v),value:v,payload:m}:{x:ir(v)?null:r.scale(v),y:vw({axis:s,ticks:a,bandSize:l,entry:m,index:p}),value:v,payload:m}});return Ka({points:h,layout:d},u)});var gqe=["layout","type","stroke","connectNulls","isRange","ref"],xqe=["key"],OX;function Kg(e){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kg(e)}function LX(e,t){if(e==null)return{};var r=vqe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function vqe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Mf(){return Mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mf.apply(this,arguments)}function k8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Md(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(r),!0).forEach(function(s){fc(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,IX(s.key),s)}}function bqe(e,t,r){return t&&E8(e.prototype,t),r&&E8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jqe(e,t,r){return t=qw(t),wqe(e,MX()?Reflect.construct(t,r||[],qw(e).constructor):t.apply(e,r))}function wqe(e,t){if(t&&(Kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _qe(e)}function _qe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MX=function(){return!!e})()}function qw(e){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qw(e)}function Nqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FC(e,t)}function FC(e,t){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},FC(e,t)}function fc(e,t,r){return t=IX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){var t=Sqe(e,"string");return Kg(t)=="symbol"?t:t+""}function Sqe(e,t){if(Kg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Kg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ed=function(e){function t(){var r;yqe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r=jqe(this,t,[].concat(i)),fc(r,"state",{isAnimationFinished:!0}),fc(r,"id",wm("recharts-area-")),fc(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Xt(o)&&o()}),fc(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Xt(o)&&o()}),r}return Nqe(t,e),bqe(t,[{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,m=Bt(this.props,!1),p=Bt(u,!0),v=d.map(function(y,j){var _=Md(Md(Md({key:"dot-".concat(j),r:3},m),p),{},{index:j,cx:y.x,cy:y.y,dataKey:h,value:y.value,payload:y.payload,points:d});return t.renderDotItem(u,_)}),g={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return we.createElement(br,Mf({className:"recharts-area-dots"},g),v)}},{key:"renderHorizontalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=s*Math.abs(c-u),h=Wd(o.map(function(m){return m.y||0}));return gt(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Wd(a.map(function(m){return m.y||0})),h)),gt(h)?we.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var i=this.props,a=i.baseLine,o=i.points,l=i.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=s*Math.abs(c-u),h=Wd(o.map(function(m){return m.x||0}));return gt(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Wd(a.map(function(m){return m.x||0})),h)),gt(h)?we.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(s){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,i,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var p=LX(l,gqe);return we.createElement(br,{clipPath:a?"url(#clipPath-".concat(o,")"):null},we.createElement(Bf,Mf({},Bt(p,!0),{points:s,connectNulls:h,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&we.createElement(Bf,Mf({},Bt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:s})),d!=="none"&&m&&we.createElement(Bf,Mf({},Bt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,p=o.animationId,v=this.state,g=v.prevPoints,y=v.prevBaseLine;return we.createElement(gh,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var _=j.t;if(g){var w=g.length/l.length,A=l.map(function(T,M){var z=Math.floor(M*w);if(g[z]){var O=g[z],I=Ms(O.x,T.x),q=Ms(O.y,T.y);return Md(Md({},T),{},{x:I(_),y:q(_)})}return T}),S;if(gt(c)&&typeof c=="number"){var P=Ms(y,c);S=P(_)}else if(ir(c)||Ax(c)){var C=Ms(y,0);S=C(_)}else S=c.map(function(T,M){var z=Math.floor(M*w);if(y[z]){var O=y[z],I=Ms(O.x,T.x),q=Ms(O.y,T.y);return Md(Md({},T),{},{x:I(_),y:q(_)})}return T});return a.renderAreaStatically(A,S,s,i)}return we.createElement(br,null,we.createElement("defs",null,we.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(_))),we.createElement(br,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(l,c,s,i)))})}},{key:"renderArea",value:function(s,i){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!am(d,o)||!am(h,l))?this.renderAreaWithAnimation(s,i):this.renderAreaStatically(o,l,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,h=i.xAxis,m=i.yAxis,p=i.width,v=i.height,g=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var j=this.state.isAnimationFinished,_=l.length===1,w=cr("recharts-area",c),A=h&&h.allowDataOverflow,S=m&&m.allowDataOverflow,P=A||S,C=ir(y)?this.id:y,T=(s=Bt(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=T.r,z=M===void 0?3:M,O=T.strokeWidth,I=O===void 0?2:O,q=vG(o)?o:{},F=q.clipDot,W=F===void 0?!0:F,V=z*2+I;return we.createElement(br,{className:w},A||S?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(C)},we.createElement("rect",{x:A?d:d-p/2,y:S?u:u-v/2,width:A?p:p*2,height:S?v:v*2})),!W&&we.createElement("clipPath",{id:"clipPath-dots-".concat(C)},we.createElement("rect",{x:d-V/2,y:u-V/2,width:p+V,height:v+V}))):null,_?null:this.renderArea(P,C),(o||_)&&this.renderDots(P,W,C),(!g||j)&&wc.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:s.points!==i.curPoints||s.baseLine!==i.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(x.PureComponent);OX=ed;fc(ed,"displayName","Area");fc(ed,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!kl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});fc(ed,"getBaseValue",function(e,t,r,s){var i=e.layout,a=e.baseValue,o=t.props.baseValue,l=o??a;if(gt(l)&&typeof l=="number")return l;var c=i==="horizontal"?s:r,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});fc(ed,"getComposedData",function(e){var t=e.props,r=e.item,s=e.xAxis,i=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,p=t.layout,v=u&&u.length,g=OX.getBaseValue(t,r,s,i),y=p==="horizontal",j=!1,_=h.map(function(A,S){var P;v?P=u[d+S]:(P=hs(A,c),Array.isArray(P)?j=!0:P=[g,P]);var C=P[1]==null||v&&hs(A,c)==null;return y?{x:vw({axis:s,ticks:a,bandSize:l,entry:A,index:S}),y:C?null:i.scale(P[1]),value:P,payload:A}:{x:C?null:s.scale(P[1]),y:vw({axis:i,ticks:o,bandSize:l,entry:A,index:S}),value:P,payload:A}}),w;return v||j?w=_.map(function(A){var S=Array.isArray(A.value)?A.value[0]:null;return y?{x:A.x,y:S!=null&&A.y!=null?i.scale(S):null}:{x:S!=null?s.scale(S):null,y:A.y}}):w=y?i.scale(g):s.scale(g),Md({points:_,baseLine:w,layout:p,isRange:j},m)});fc(ed,"renderDotItem",function(e,t){var r;if(we.isValidElement(e))r=we.cloneElement(e,t);else if(Xt(e))r=e(t);else{var s=cr("recharts-area-dot",typeof e!="boolean"?e.className:""),i=t.key,a=LX(t,xqe);r=we.createElement(Y0,Mf({},a,{key:i,className:s}))}return r});function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zg(e)}function Aqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$X(s.key),s)}}function Pqe(e,t,r){return t&&T8(e.prototype,t),r&&T8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cqe(e,t,r){return t=Vw(t),kqe(e,RX()?Reflect.construct(t,r||[],Vw(e).constructor):t.apply(e,r))}function kqe(e,t){if(t&&(Zg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eqe(e)}function Eqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RX=function(){return!!e})()}function Vw(e){return Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vw(e)}function Tqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zC(e,t)}function zC(e,t){return zC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},zC(e,t)}function DX(e,t,r){return t=$X(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $X(e){var t=Oqe(e,"string");return Zg(t)=="symbol"?t:t+""}function Oqe(e,t){if(Zg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Zg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BC(){return BC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},BC.apply(this,arguments)}function Lqe(e){var t=e.xAxisId,r=i3(),s=a3(),i=vX(t);return i==null?null:x.createElement(Lx,BC({},i,{className:cr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return wu(o,!0)}}))}var La=function(e){function t(){return Aqe(this,t),Cqe(this,t,arguments)}return Tqe(t,e),Pqe(t,[{key:"render",value:function(){return x.createElement(Lqe,this.props)}}])}(x.Component);DX(La,"displayName","XAxis");DX(La,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xg(e){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xg(e)}function Mqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,BX(s.key),s)}}function Iqe(e,t,r){return t&&O8(e.prototype,t),r&&O8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rqe(e,t,r){return t=Uw(t),Dqe(e,FX()?Reflect.construct(t,r||[],Uw(e).constructor):t.apply(e,r))}function Dqe(e,t){if(t&&(Xg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $qe(e)}function $qe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FX=function(){return!!e})()}function Uw(e){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uw(e)}function Fqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qC(e,t)}function qC(e,t){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},qC(e,t)}function zX(e,t,r){return t=BX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BX(e){var t=zqe(e,"string");return Xg(t)=="symbol"?t:t+""}function zqe(e,t){if(Xg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Xg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VC(){return VC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},VC.apply(this,arguments)}var Bqe=function(t){var r=t.yAxisId,s=i3(),i=a3(),a=yX(r);return a==null?null:x.createElement(Lx,VC({},a,{className:cr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return wu(l,!0)}}))},Li=function(e){function t(){return Mqe(this,t),Rqe(this,t,arguments)}return Fqe(t,e),Iqe(t,[{key:"render",value:function(){return x.createElement(Bqe,this.props)}}])}(x.Component);zX(Li,"displayName","YAxis");zX(Li,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function L8(e){return Hqe(e)||Uqe(e)||Vqe(e)||qqe()}function qqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vqe(e,t){if(e){if(typeof e=="string")return UC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UC(e,t)}}function Uqe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hqe(e){if(Array.isArray(e))return UC(e)}function UC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var HC=function(t,r,s,i,a){var o=io(t,l3),l=io(t,Z_),c=[].concat(L8(o),L8(l)),u=io(t,Y_),d="".concat(i,"Id"),h=i[0],m=r;if(c.length&&(m=c.reduce(function(g,y){if(y.props[d]===s&&_c(y.props,"extendDomain")&&gt(y.props[h])){var j=y.props[h];return[Math.min(g[0],j),Math.max(g[1],j)]}return g},m)),u.length){var p="".concat(h,"1"),v="".concat(h,"2");m=u.reduce(function(g,y){if(y.props[d]===s&&_c(y.props,"extendDomain")&&gt(y.props[p])&&gt(y.props[v])){var j=y.props[p],_=y.props[v];return[Math.min(g[0],j,_),Math.max(g[1],j,_)]}return g},m)}return a&&a.length&&(m=a.reduce(function(g,y){return gt(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},m)),m},qX={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,h||c,m),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new s:delete c._events[u]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,v=new Array(p);m<p;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,m,p,v){var g=r?r+u:u;if(!this._events[g])return!1;var y=this._events[g],j=arguments.length,_,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),j){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,h),!0;case 4:return y.fn.call(y.context,d,h,m),!0;case 5:return y.fn.call(y.context,d,h,m,p),!0;case 6:return y.fn.call(y.context,d,h,m,p,v),!0}for(w=1,_=new Array(j-1);w<j;w++)_[w-1]=arguments[w];y.fn.apply(y.context,_)}else{var A=y.length,S;for(w=0;w<A;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),j){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,h);break;case 4:y[w].fn.call(y[w].context,d,h,m);break;default:if(!_)for(S=1,_=new Array(j-1);S<j;S++)_[S-1]=arguments[S];y[w].fn.apply(y[w].context,_)}}return!0},l.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&o(this,p);else{for(var g=0,y=[],j=v.length;g<j;g++)(v[g].fn!==d||m&&!v[g].once||h&&v[g].context!==h)&&y.push(v[g]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(qX);var Wqe=qX.exports;const Gqe=Er(Wqe);var sS=new Gqe,iS="recharts.syncMouseEvents";function m0(e){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m0(e)}function Kqe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,VX(s.key),s)}}function Zqe(e,t,r){return t&&M8(e.prototype,t),r&&M8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aS(e,t,r){return t=VX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VX(e){var t=Xqe(e,"string");return m0(t)=="symbol"?t:t+""}function Xqe(e,t){if(m0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(m0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yqe=function(){function e(){Kqe(this,e),aS(this,"activeIndex",0),aS(this,"coordinateList",[]),aS(this,"layout","horizontal")}return Zqe(e,[{key:"setDetails",value:function(r){var s,i=r.coordinateList,a=i===void 0?null:i,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,h=d===void 0?null:d,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=a+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])}();function Jqe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],i=e==null?void 0:e[1];if(s&&i&&gt(s)&&gt(i))return!0}return!1}function Qqe(e,t,r,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function UX(e){var t=e.cx,r=e.cy,s=e.radius,i=e.startAngle,a=e.endAngle,o=bn(t,r,s,i),l=bn(t,r,s,a);return{points:[o,l],cx:t,cy:r,radius:s,startAngle:i,endAngle:a}}function e9e(e,t,r){var s,i,a,o;if(e==="horizontal")s=t.x,a=s,i=r.top,o=r.top+r.height;else if(e==="vertical")i=t.y,o=i,s=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,m=bn(l,c,u,h),p=bn(l,c,d,h);s=m.x,i=m.y,a=p.x,o=p.y}else return UX(t);return[{x:s,y:i},{x:a,y:o}]}function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}function I8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function o1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I8(Object(r),!0).forEach(function(s){t9e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function t9e(e,t,r){return t=r9e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r9e(e){var t=n9e(e,"string");return p0(t)=="symbol"?t:t+""}function n9e(e,t){if(p0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(p0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s9e(e){var t,r,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,p=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!p||!a||!o||m!=="ScatterChart"&&i!=="axis")return null;var v,g=Bf;if(m==="ScatterChart")v=o,g=v$e;else if(m==="BarChart")v=Qqe(h,o,c,d),g=e3;else if(h==="radial"){var y=UX(o),j=y.cx,_=y.cy,w=y.radius,A=y.startAngle,S=y.endAngle;v={cx:j,cy:_,startAngle:A,endAngle:S,innerRadius:w,outerRadius:w},g=DZ}else v={points:e9e(h,o,c)},g=Bf;var P=o1(o1(o1(o1({stroke:"#ccc",pointerEvents:"none"},c),v),Bt(p,!1)),{},{payload:l,payloadIndex:u,className:cr("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,P):x.createElement(g,P)}var i9e=["item"],a9e=["children","className","width","height","style","compact","title","desc"];function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(e)}function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},zp.apply(this,arguments)}function R8(e,t){return c9e(e)||l9e(e,t)||WX(e,t)||o9e()}function o9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l9e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,i,a,o,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=a.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function c9e(e){if(Array.isArray(e))return e}function D8(e,t){if(e==null)return{};var r=u9e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function u9e(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function d9e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $8(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,GX(s.key),s)}}function h9e(e,t,r){return t&&$8(e.prototype,t),r&&$8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f9e(e,t,r){return t=Hw(t),m9e(e,HX()?Reflect.construct(t,r||[],Hw(e).constructor):t.apply(e,r))}function m9e(e,t){if(t&&(Yg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p9e(e)}function p9e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HX=function(){return!!e})()}function Hw(e){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hw(e)}function g9e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WC(e,t)}function WC(e,t){return WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},WC(e,t)}function Jg(e){return y9e(e)||v9e(e)||WX(e)||x9e()}function x9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WX(e,t){if(e){if(typeof e=="string")return GC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GC(e,t)}}function v9e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function y9e(e){if(Array.isArray(e))return GC(e)}function GC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function F8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F8(Object(r),!0).forEach(function(s){Kt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F8(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Kt(e,t,r){return t=GX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GX(e){var t=b9e(e,"string");return Yg(t)=="symbol"?t:t+""}function b9e(e,t){if(Yg(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Yg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j9e={xAxis:["bottom","top"],yAxis:["left","right"]},w9e={width:"100%",height:"100%"},KX={x:0,y:0};function l1(e){return e}var _9e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},N9e=function(t,r,s,i){var a=r.find(function(d){return d&&d.index===s});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return tt(tt(tt({},i),bn(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=i.angle;return tt(tt(tt({},i),bn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return KX},J_=function(t,r){var s=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,o=(s??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Jg(l),Jg(u)):l},[]);return o.length>0?o:t&&t.length&&gt(i)&&gt(a)?t.slice(i,a+1):[]};function ZX(e){return e==="number"?[0,"auto"]:void 0}var KC=function(t,r,s,i){var a=t.graphicalItems,o=t.tooltipAxis,l=J_(r,t);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:r;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=h===void 0?l:h;m=Uj(p,o.dataKey,i)}else m=h&&h[s]||l[s];return m?[].concat(Jg(c),[TZ(u,m)]):c},[])},z8=function(t,r,s,i){var a=i||{x:t.chartX,y:t.chartY},o=_9e(a,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=VIe(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,m=KC(t,r,d,h),p=N9e(s,l,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:m,activeCoordinate:p}}return null},S9e=function(t,r){var s=r.axes,i=r.graphicalItems,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,h=t.children,m=t.stackOffset,p=SZ(d,a);return s.reduce(function(v,g){var y,j=g.type.defaultProps!==void 0?tt(tt({},g.type.defaultProps),g.props):g.props,_=j.type,w=j.dataKey,A=j.allowDataOverflow,S=j.allowDuplicatedCategory,P=j.scale,C=j.ticks,T=j.includeHidden,M=j[o];if(v[M])return v;var z=J_(t.data,{graphicalItems:i.filter(function(B){var X,ie=o in B.props?B.props[o]:(X=B.type.defaultProps)===null||X===void 0?void 0:X[o];return ie===M}),dataStartIndex:c,dataEndIndex:u}),O=z.length,I,q,F;Jqe(j.domain,A,_)&&(I=oC(j.domain,null,A),p&&(_==="number"||P!=="auto")&&(F=Yv(z,w,"category")));var W=ZX(_);if(!I||I.length===0){var V,ne=(V=j.domain)!==null&&V!==void 0?V:W;if(w){if(I=Yv(z,w,_),_==="category"&&p){var G=RNe(I);S&&G?(q=I,I=Tw(0,O)):S||(I=JR(ne,I,g).reduce(function(B,X){return B.indexOf(X)>=0?B:[].concat(Jg(B),[X])},[]))}else if(_==="category")S?I=I.filter(function(B){return B!==""&&!ir(B)}):I=JR(ne,I,g).reduce(function(B,X){return B.indexOf(X)>=0||X===""||ir(X)?B:[].concat(Jg(B),[X])},[]);else if(_==="number"){var K=KIe(z,i.filter(function(B){var X,ie,me=o in B.props?B.props[o]:(X=B.type.defaultProps)===null||X===void 0?void 0:X[o],ye="hide"in B.props?B.props.hide:(ie=B.type.defaultProps)===null||ie===void 0?void 0:ie.hide;return me===M&&(T||!ye)}),w,a,d);K&&(I=K)}p&&(_==="number"||P!=="auto")&&(F=Yv(z,w,"category"))}else p?I=Tw(0,O):l&&l[M]&&l[M].hasStack&&_==="number"?I=m==="expand"?[0,1]:EZ(l[M].stackGroups,c,u):I=NZ(z,i.filter(function(B){var X=o in B.props?B.props[o]:B.type.defaultProps[o],ie="hide"in B.props?B.props.hide:B.type.defaultProps.hide;return X===M&&(T||!ie)}),_,d,!0);if(_==="number")I=HC(h,I,M,a,C),ne&&(I=oC(ne,I,A));else if(_==="category"&&ne){var ee=ne,xe=I.every(function(B){return ee.indexOf(B)>=0});xe&&(I=ee)}}return tt(tt({},v),{},Kt({},M,tt(tt({},j),{},{axisType:a,domain:I,categoricalDomain:F,duplicateDomain:q,originalDomain:(y=j.domain)!==null&&y!==void 0?y:W,isCategorical:p,layout:d})))},{})},A9e=function(t,r){var s=r.graphicalItems,i=r.Axis,a=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,h=t.children,m=J_(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:u}),p=m.length,v=SZ(d,a),g=-1;return s.reduce(function(y,j){var _=j.type.defaultProps!==void 0?tt(tt({},j.type.defaultProps),j.props):j.props,w=_[o],A=ZX("number");if(!y[w]){g++;var S;return v?S=Tw(0,p):l&&l[w]&&l[w].hasStack?(S=EZ(l[w].stackGroups,c,u),S=HC(h,S,w,a)):(S=oC(A,NZ(m,s.filter(function(P){var C,T,M=o in P.props?P.props[o]:(C=P.type.defaultProps)===null||C===void 0?void 0:C[o],z="hide"in P.props?P.props.hide:(T=P.type.defaultProps)===null||T===void 0?void 0:T.hide;return M===w&&!z}),"number",d),i.defaultProps.allowDataOverflow),S=HC(h,S,w,a)),tt(tt({},y),{},Kt({},w,tt(tt({axisType:a},i.defaultProps),{},{hide:!0,orientation:so(j9e,"".concat(a,".").concat(g%2),null),domain:S,originalDomain:A,isCategorical:v,layout:d})))}return y},{})},P9e=function(t,r){var s=r.axisType,i=s===void 0?"xAxis":s,a=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,h="".concat(i,"Id"),m=io(d,a),p={};return m&&m.length?p=S9e(t,{axes:m,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=A9e(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},C9e=function(t){var r=qd(t),s=wu(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:PT(s,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:yw(r,s)}},B8=function(t){var r=t.children,s=t.defaultShowTooltip,i=Ya(r,Bg),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},k9e=function(t){return!t||!t.length?!1:t.some(function(r){var s=Cu(r&&r.type);return s&&s.indexOf("Bar")>=0})},q8=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},E9e=function(t,r){var s=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,u=s.width,d=s.height,h=s.children,m=s.margin||{},p=Ya(h,Bg),v=Ya(h,bc),g=Object.keys(c).reduce(function(S,P){var C=c[P],T=C.orientation;return!C.mirror&&!C.hide?tt(tt({},S),{},Kt({},T,S[T]+C.width)):S},{left:m.left||0,right:m.right||0}),y=Object.keys(o).reduce(function(S,P){var C=o[P],T=C.orientation;return!C.mirror&&!C.hide?tt(tt({},S),{},Kt({},T,so(S,"".concat(T))+C.height)):S},{top:m.top||0,bottom:m.bottom||0}),j=tt(tt({},y),g),_=j.bottom;p&&(j.bottom+=p.props.height||Bg.defaultProps.height),v&&r&&(j=WIe(j,i,s,r));var w=u-j.left-j.right,A=d-j.top-j.bottom;return tt(tt({brushBottom:_},j),{},{width:Math.max(w,0),height:Math.max(A,0)})},T9e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Q_=function(t){var r=t.chartName,s=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,m=function(j,_){var w=_.graphicalItems,A=_.stackGroups,S=_.offset,P=_.updateId,C=_.dataStartIndex,T=_.dataEndIndex,M=j.barSize,z=j.layout,O=j.barGap,I=j.barCategoryGap,q=j.maxBarSize,F=q8(z),W=F.numericAxisName,V=F.cateAxisName,ne=k9e(w),G=[];return w.forEach(function(K,ee){var xe=J_(j.data,{graphicalItems:[K],dataStartIndex:C,dataEndIndex:T}),B=K.type.defaultProps!==void 0?tt(tt({},K.type.defaultProps),K.props):K.props,X=B.dataKey,ie=B.maxBarSize,me=B["".concat(W,"Id")],ye=B["".concat(V,"Id")],Ne={},le=c.reduce(function(et,ge){var Oe=_["".concat(ge.axisType,"Map")],it=B["".concat(ge.axisType,"Id")];Oe&&Oe[it]||ge.axisType==="zAxis"||lm(!1);var nt=Oe[it];return tt(tt({},et),{},Kt(Kt({},ge.axisType,nt),"".concat(ge.axisType,"Ticks"),wu(nt)))},Ne),Q=le[V],J=le["".concat(V,"Ticks")],se=A&&A[me]&&A[me].hasStack&&nRe(K,A[me].stackGroups),Z=Cu(K.type).indexOf("Bar")>=0,je=yw(Q,J),Ee=[],Pe=ne&&UIe({barSize:M,stackGroups:A,totalSize:T9e(le,V)});if(Z){var de,be,Ve=ir(ie)?q:ie,ze=(de=(be=yw(Q,J,!0))!==null&&be!==void 0?be:Ve)!==null&&de!==void 0?de:0;Ee=HIe({barGap:O,barCategoryGap:I,bandSize:ze!==je?ze:je,sizeList:Pe[ye],maxBarSize:Ve}),ze!==je&&(Ee=Ee.map(function(et){return tt(tt({},et),{},{position:tt(tt({},et.position),{},{offset:et.position.offset-ze/2})})}))}var Xe=K&&K.type&&K.type.getComposedData;Xe&&G.push({props:tt(tt({},Xe(tt(tt({},le),{},{displayedData:xe,props:j,dataKey:X,item:K,bandSize:je,barPosition:Ee,offset:S,stackedData:se,layout:z,dataStartIndex:C,dataEndIndex:T}))),{},Kt(Kt(Kt({key:K.key||"item-".concat(ee)},W,le[W]),V,le[V]),"animationId",P)),childIndex:KNe(K,j.children),item:K})}),G},p=function(j,_){var w=j.props,A=j.dataStartIndex,S=j.dataEndIndex,P=j.updateId;if(!qM({props:w}))return null;var C=w.children,T=w.layout,M=w.stackOffset,z=w.data,O=w.reverseStackOrder,I=q8(T),q=I.numericAxisName,F=I.cateAxisName,W=io(C,s),V=tRe(z,W,"".concat(q,"Id"),"".concat(F,"Id"),M,O),ne=c.reduce(function(B,X){var ie="".concat(X.axisType,"Map");return tt(tt({},B),{},Kt({},ie,P9e(w,tt(tt({},X),{},{graphicalItems:W,stackGroups:X.axisType===q&&V,dataStartIndex:A,dataEndIndex:S}))))},{}),G=E9e(tt(tt({},ne),{},{props:w,graphicalItems:W}),_==null?void 0:_.legendBBox);Object.keys(ne).forEach(function(B){ne[B]=d(w,ne[B],G,B.replace("Map",""),r)});var K=ne["".concat(F,"Map")],ee=C9e(K),xe=m(w,tt(tt({},ne),{},{dataStartIndex:A,dataEndIndex:S,updateId:P,graphicalItems:W,stackGroups:V,offset:G}));return tt(tt({formattedGraphicalItems:xe,graphicalItems:W,offset:G,stackGroups:V},ee),ne)},v=function(y){function j(_){var w,A,S;return d9e(this,j),S=f9e(this,j,[_]),Kt(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kt(S,"accessibilityManager",new Yqe),Kt(S,"handleLegendBBoxUpdate",function(P){if(P){var C=S.state,T=C.dataStartIndex,M=C.dataEndIndex,z=C.updateId;S.setState(tt({legendBBox:P},p({props:S.props,dataStartIndex:T,dataEndIndex:M,updateId:z},tt(tt({},S.state),{},{legendBBox:P}))))}}),Kt(S,"handleReceiveSyncEvent",function(P,C,T){if(S.props.syncId===P){if(T===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(C)}}),Kt(S,"handleBrushChange",function(P){var C=P.startIndex,T=P.endIndex;if(C!==S.state.dataStartIndex||T!==S.state.dataEndIndex){var M=S.state.updateId;S.setState(function(){return tt({dataStartIndex:C,dataEndIndex:T},p({props:S.props,dataStartIndex:C,dataEndIndex:T,updateId:M},S.state))}),S.triggerSyncEvent({dataStartIndex:C,dataEndIndex:T})}}),Kt(S,"handleMouseEnter",function(P){var C=S.getMouseInfo(P);if(C){var T=tt(tt({},C),{},{isTooltipActive:!0});S.setState(T),S.triggerSyncEvent(T);var M=S.props.onMouseEnter;Xt(M)&&M(T,P)}}),Kt(S,"triggeredAfterMouseMove",function(P){var C=S.getMouseInfo(P),T=C?tt(tt({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(T),S.triggerSyncEvent(T);var M=S.props.onMouseMove;Xt(M)&&M(T,P)}),Kt(S,"handleItemMouseEnter",function(P){S.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Kt(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Kt(S,"handleMouseMove",function(P){P.persist(),S.throttleTriggeredAfterMouseMove(P)}),Kt(S,"handleMouseLeave",function(P){S.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};S.setState(C),S.triggerSyncEvent(C);var T=S.props.onMouseLeave;Xt(T)&&T(C,P)}),Kt(S,"handleOuterEvent",function(P){var C=GNe(P),T=so(S.props,"".concat(C));if(C&&Xt(T)){var M,z;/.*touch.*/i.test(C)?z=S.getMouseInfo(P.changedTouches[0]):z=S.getMouseInfo(P),T((M=z)!==null&&M!==void 0?M:{},P)}}),Kt(S,"handleClick",function(P){var C=S.getMouseInfo(P);if(C){var T=tt(tt({},C),{},{isTooltipActive:!0});S.setState(T),S.triggerSyncEvent(T);var M=S.props.onClick;Xt(M)&&M(T,P)}}),Kt(S,"handleMouseDown",function(P){var C=S.props.onMouseDown;if(Xt(C)){var T=S.getMouseInfo(P);C(T,P)}}),Kt(S,"handleMouseUp",function(P){var C=S.props.onMouseUp;if(Xt(C)){var T=S.getMouseInfo(P);C(T,P)}}),Kt(S,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Kt(S,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseDown(P.changedTouches[0])}),Kt(S,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseUp(P.changedTouches[0])}),Kt(S,"handleDoubleClick",function(P){var C=S.props.onDoubleClick;if(Xt(C)){var T=S.getMouseInfo(P);C(T,P)}}),Kt(S,"handleContextMenu",function(P){var C=S.props.onContextMenu;if(Xt(C)){var T=S.getMouseInfo(P);C(T,P)}}),Kt(S,"triggerSyncEvent",function(P){S.props.syncId!==void 0&&sS.emit(iS,S.props.syncId,P,S.eventEmitterSymbol)}),Kt(S,"applySyncEvent",function(P){var C=S.props,T=C.layout,M=C.syncMethod,z=S.state.updateId,O=P.dataStartIndex,I=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)S.setState(tt({dataStartIndex:O,dataEndIndex:I},p({props:S.props,dataStartIndex:O,dataEndIndex:I,updateId:z},S.state)));else if(P.activeTooltipIndex!==void 0){var q=P.chartX,F=P.chartY,W=P.activeTooltipIndex,V=S.state,ne=V.offset,G=V.tooltipTicks;if(!ne)return;if(typeof M=="function")W=M(G,P);else if(M==="value"){W=-1;for(var K=0;K<G.length;K++)if(G[K].value===P.activeLabel){W=K;break}}var ee=tt(tt({},ne),{},{x:ne.left,y:ne.top}),xe=Math.min(q,ee.x+ee.width),B=Math.min(F,ee.y+ee.height),X=G[W]&&G[W].value,ie=KC(S.state,S.props.data,W),me=G[W]?{x:T==="horizontal"?G[W].coordinate:xe,y:T==="horizontal"?B:G[W].coordinate}:KX;S.setState(tt(tt({},P),{},{activeLabel:X,activeCoordinate:me,activePayload:ie,activeTooltipIndex:W}))}else S.setState(P)}),Kt(S,"renderCursor",function(P){var C,T=S.state,M=T.isTooltipActive,z=T.activeCoordinate,O=T.activePayload,I=T.offset,q=T.activeTooltipIndex,F=T.tooltipAxisBandSize,W=S.getTooltipEventType(),V=(C=P.props.active)!==null&&C!==void 0?C:M,ne=S.props.layout,G=P.key||"_recharts-cursor";return we.createElement(s9e,{key:G,activeCoordinate:z,activePayload:O,activeTooltipIndex:q,chartName:r,element:P,isActive:V,layout:ne,offset:I,tooltipAxisBandSize:F,tooltipEventType:W})}),Kt(S,"renderPolarAxis",function(P,C,T){var M=so(P,"type.axisType"),z=so(S.state,"".concat(M,"Map")),O=P.type.defaultProps,I=O!==void 0?tt(tt({},O),P.props):P.props,q=z&&z[I["".concat(M,"Id")]];return x.cloneElement(P,tt(tt({},q),{},{className:cr(M,q.className),key:P.key||"".concat(C,"-").concat(T),ticks:wu(q,!0)}))}),Kt(S,"renderPolarGrid",function(P){var C=P.props,T=C.radialLines,M=C.polarAngles,z=C.polarRadius,O=S.state,I=O.radiusAxisMap,q=O.angleAxisMap,F=qd(I),W=qd(q),V=W.cx,ne=W.cy,G=W.innerRadius,K=W.outerRadius;return x.cloneElement(P,{polarAngles:Array.isArray(M)?M:wu(W,!0).map(function(ee){return ee.coordinate}),polarRadius:Array.isArray(z)?z:wu(F,!0).map(function(ee){return ee.coordinate}),cx:V,cy:ne,innerRadius:G,outerRadius:K,key:P.key||"polar-grid",radialLines:T})}),Kt(S,"renderLegend",function(){var P=S.state.formattedGraphicalItems,C=S.props,T=C.children,M=C.width,z=C.height,O=S.props.margin||{},I=M-(O.left||0)-(O.right||0),q=wZ({children:T,formattedGraphicalItems:P,legendWidth:I,legendContent:u});if(!q)return null;var F=q.item,W=D8(q,i9e);return x.cloneElement(F,tt(tt({},W),{},{chartWidth:M,chartHeight:z,margin:O,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Kt(S,"renderTooltip",function(){var P,C=S.props,T=C.children,M=C.accessibilityLayer,z=Ya(T,es);if(!z)return null;var O=S.state,I=O.isTooltipActive,q=O.activeCoordinate,F=O.activePayload,W=O.activeLabel,V=O.offset,ne=(P=z.props.active)!==null&&P!==void 0?P:I;return x.cloneElement(z,{viewBox:tt(tt({},V),{},{x:V.left,y:V.top}),active:ne,label:W,payload:ne?F:[],coordinate:q,accessibilityLayer:M})}),Kt(S,"renderBrush",function(P){var C=S.props,T=C.margin,M=C.data,z=S.state,O=z.offset,I=z.dataStartIndex,q=z.dataEndIndex,F=z.updateId;return x.cloneElement(P,{key:P.key||"_recharts-brush",onChange:n1(S.handleBrushChange,P.props.onChange),data:M,x:gt(P.props.x)?P.props.x:O.left,y:gt(P.props.y)?P.props.y:O.top+O.height+O.brushBottom-(T.bottom||0),width:gt(P.props.width)?P.props.width:O.width,startIndex:I,endIndex:q,updateId:"brush-".concat(F)})}),Kt(S,"renderReferenceElement",function(P,C,T){if(!P)return null;var M=S,z=M.clipPathId,O=S.state,I=O.xAxisMap,q=O.yAxisMap,F=O.offset,W=P.type.defaultProps||{},V=P.props,ne=V.xAxisId,G=ne===void 0?W.xAxisId:ne,K=V.yAxisId,ee=K===void 0?W.yAxisId:K;return x.cloneElement(P,{key:P.key||"".concat(C,"-").concat(T),xAxis:I[G],yAxis:q[ee],viewBox:{x:F.left,y:F.top,width:F.width,height:F.height},clipPathId:z})}),Kt(S,"renderActivePoints",function(P){var C=P.item,T=P.activePoint,M=P.basePoint,z=P.childIndex,O=P.isRange,I=[],q=C.props.key,F=C.item.type.defaultProps!==void 0?tt(tt({},C.item.type.defaultProps),C.item.props):C.item.props,W=F.activeDot,V=F.dataKey,ne=tt(tt({index:z,dataKey:V,cx:T.x,cy:T.y,r:4,fill:QT(C.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Bt(W,!1)),Hj(W));return I.push(j.renderActiveDot(W,ne,"".concat(q,"-activePoint-").concat(z))),M?I.push(j.renderActiveDot(W,tt(tt({},ne),{},{cx:M.x,cy:M.y}),"".concat(q,"-basePoint-").concat(z))):O&&I.push(null),I}),Kt(S,"renderGraphicChild",function(P,C,T){var M=S.filterFormatItem(P,C,T);if(!M)return null;var z=S.getTooltipEventType(),O=S.state,I=O.isTooltipActive,q=O.tooltipAxis,F=O.activeTooltipIndex,W=O.activeLabel,V=S.props.children,ne=Ya(V,es),G=M.props,K=G.points,ee=G.isRange,xe=G.baseLine,B=M.item.type.defaultProps!==void 0?tt(tt({},M.item.type.defaultProps),M.item.props):M.item.props,X=B.activeDot,ie=B.hide,me=B.activeBar,ye=B.activeShape,Ne=!!(!ie&&I&&ne&&(X||me||ye)),le={};z!=="axis"&&ne&&ne.props.trigger==="click"?le={onClick:n1(S.handleItemMouseEnter,P.props.onClick)}:z!=="axis"&&(le={onMouseLeave:n1(S.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:n1(S.handleItemMouseEnter,P.props.onMouseEnter)});var Q=x.cloneElement(P,tt(tt({},M.props),le));function J(ge){return typeof q.dataKey=="function"?q.dataKey(ge.payload):null}if(Ne)if(F>=0){var se,Z;if(q.dataKey&&!q.allowDuplicatedCategory){var je=typeof q.dataKey=="function"?J:"payload.".concat(q.dataKey.toString());se=Uj(K,je,W),Z=ee&&xe&&Uj(xe,je,W)}else se=K==null?void 0:K[F],Z=ee&&xe&&xe[F];if(ye||me){var Ee=P.props.activeIndex!==void 0?P.props.activeIndex:F;return[x.cloneElement(P,tt(tt(tt({},M.props),le),{},{activeIndex:Ee})),null,null]}if(!ir(se))return[Q].concat(Jg(S.renderActivePoints({item:M,activePoint:se,basePoint:Z,childIndex:F,isRange:ee})))}else{var Pe,de=(Pe=S.getItemByXY(S.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:Q},be=de.graphicalItem,Ve=be.item,ze=Ve===void 0?P:Ve,Xe=be.childIndex,et=tt(tt(tt({},M.props),le),{},{activeIndex:Xe});return[x.cloneElement(ze,et),null,null]}return ee?[Q,null,null]:[Q,null]}),Kt(S,"renderCustomized",function(P,C,T){return x.cloneElement(P,tt(tt({key:"recharts-customized-".concat(T)},S.props),S.state))}),Kt(S,"renderMap",{CartesianGrid:{handler:l1,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:l1},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:l1},YAxis:{handler:l1},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=_.id)!==null&&w!==void 0?w:wm("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=jK(S.triggeredAfterMouseMove,(A=_.throttleDelay)!==null&&A!==void 0?A:1e3/60),S.state={},S}return g9e(j,y),h9e(j,[{key:"componentDidMount",value:function(){var w,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,A=w.children,S=w.data,P=w.height,C=w.layout,T=Ya(A,es);if(T){var M=T.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,O=KC(this.state,S,M,z),I=this.state.tooltipTicks[M].coordinate,q=(this.state.offset.top+P)/2,F=C==="horizontal",W=F?{x:I,y:q}:{y:I,x:q},V=this.state.formattedGraphicalItems.find(function(G){var K=G.item;return K.type.name==="Scatter"});V&&(W=tt(tt({},W),V.props.points[M].tooltipPosition),O=V.props.points[M].tooltipPayload);var ne={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:z,activePayload:O,activeCoordinate:W};this.setState(ne),this.renderCursor(T),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,P;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(w){wP([Ya(w.children,es)],[Ya(this.props.children,es)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ya(this.props.children,es);if(w&&typeof w.props.shared=="boolean"){var A=w.props.shared?"axis":"item";return l.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var A=this.container,S=A.getBoundingClientRect(),P=xOe(S),C={chartX:Math.round(w.pageX-P.left),chartY:Math.round(w.pageY-P.top)},T=S.width/A.offsetWidth||1,M=this.inRange(C.chartX,C.chartY,T);if(!M)return null;var z=this.state,O=z.xAxisMap,I=z.yAxisMap,q=this.getTooltipEventType(),F=z8(this.state,this.props.data,this.props.layout,M);if(q!=="axis"&&O&&I){var W=qd(O).scale,V=qd(I).scale,ne=W&&W.invert?W.invert(C.chartX):null,G=V&&V.invert?V.invert(C.chartY):null;return tt(tt({},C),{},{xValue:ne,yValue:G},F)}return F?tt(tt({},C),F):null}},{key:"inRange",value:function(w,A){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,C=w/S,T=A/S;if(P==="horizontal"||P==="vertical"){var M=this.state.offset,z=C>=M.left&&C<=M.left+M.width&&T>=M.top&&T<=M.top+M.height;return z?{x:C,y:T}:null}var O=this.state,I=O.angleAxisMap,q=O.radiusAxisMap;if(I&&q){var F=qd(I);return tD({x:C,y:T},F)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,A=this.getTooltipEventType(),S=Ya(w,es),P={};S&&A==="axis"&&(S.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Hj(this.props,this.handleOuterEvent);return tt(tt({},C),P)}},{key:"addListener",value:function(){sS.on(iS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){sS.removeListener(iS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,A,S){for(var P=this.state.formattedGraphicalItems,C=0,T=P.length;C<T;C++){var M=P[C];if(M.item===w||M.props.key===w.key||A===Cu(M.item.type)&&S===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,A=this.state.offset,S=A.left,P=A.top,C=A.height,T=A.width;return we.createElement("defs",null,we.createElement("clipPath",{id:w},we.createElement("rect",{x:S,y:P,height:C,width:T})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(A,S){var P=R8(S,2),C=P[0],T=P[1];return tt(tt({},A),{},Kt({},C,T.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(A,S){var P=R8(S,2),C=P[0],T=P[1];return tt(tt({},A),{},Kt({},C,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(w){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[w])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(w){var A=this.state,S=A.formattedGraphicalItems,P=A.activeItem;if(S&&S.length)for(var C=0,T=S.length;C<T;C++){var M=S[C],z=M.props,O=M.item,I=O.type.defaultProps!==void 0?tt(tt({},O.type.defaultProps),O.props):O.props,q=Cu(O.type);if(q==="Bar"){var F=(z.data||[]).find(function(G){return J8e(w,G)});if(F)return{graphicalItem:M,payload:F}}else if(q==="RadialBar"){var W=(z.data||[]).find(function(G){return tD(w,G)});if(W)return{graphicalItem:M,payload:W}}else if(H_(M,P)||W_(M,P)||c0(M,P)){var V=zFe({graphicalItem:M,activeTooltipItem:P,itemData:I.data}),ne=I.activeIndex===void 0?V:I.activeIndex;return{graphicalItem:tt(tt({},M),{},{childIndex:ne}),payload:c0(M,P)?I.data[V]:M.props.data[V]}}}return null}},{key:"render",value:function(){var w=this;if(!qM(this))return null;var A=this.props,S=A.children,P=A.className,C=A.width,T=A.height,M=A.style,z=A.compact,O=A.title,I=A.desc,q=D8(A,a9e),F=Bt(q,!1);if(z)return we.createElement(u8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement(NP,zp({},F,{width:C,height:T,title:O,desc:I}),this.renderClipPath(),UM(S,this.renderMap)));if(this.props.accessibilityLayer){var W,V;F.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,F.role=(V=this.props.role)!==null&&V!==void 0?V:"application",F.onKeyDown=function(G){w.accessibilityManager.keyboardEvent(G)},F.onFocus=function(){w.accessibilityManager.focus()}}var ne=this.parseEventsOfWrapper();return we.createElement(u8,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement("div",zp({className:cr("recharts-wrapper",P),style:tt({position:"relative",cursor:"default",width:C,height:T},M)},ne,{ref:function(K){w.container=K}}),we.createElement(NP,zp({},F,{width:C,height:T,title:O,desc:I,style:w9e}),this.renderClipPath(),UM(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);Kt(v,"displayName",r),Kt(v,"defaultProps",tt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Kt(v,"getDerivedStateFromProps",function(y,j){var _=y.dataKey,w=y.data,A=y.children,S=y.width,P=y.height,C=y.layout,T=y.stackOffset,M=y.margin,z=j.dataStartIndex,O=j.dataEndIndex;if(j.updateId===void 0){var I=B8(y);return tt(tt(tt({},I),{},{updateId:0},p(tt(tt({props:y},I),{},{updateId:0}),j)),{},{prevDataKey:_,prevData:w,prevWidth:S,prevHeight:P,prevLayout:C,prevStackOffset:T,prevMargin:M,prevChildren:A})}if(_!==j.prevDataKey||w!==j.prevData||S!==j.prevWidth||P!==j.prevHeight||C!==j.prevLayout||T!==j.prevStackOffset||!eg(M,j.prevMargin)){var q=B8(y),F={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},W=tt(tt({},z8(j,w,C)),{},{updateId:j.updateId+1}),V=tt(tt(tt({},q),F),W);return tt(tt(tt({},V),p(tt({props:y},V),j)),{},{prevDataKey:_,prevData:w,prevWidth:S,prevHeight:P,prevLayout:C,prevStackOffset:T,prevMargin:M,prevChildren:A})}if(!wP(A,j.prevChildren)){var ne,G,K,ee,xe=Ya(A,Bg),B=xe&&(ne=(G=xe.props)===null||G===void 0?void 0:G.startIndex)!==null&&ne!==void 0?ne:z,X=xe&&(K=(ee=xe.props)===null||ee===void 0?void 0:ee.endIndex)!==null&&K!==void 0?K:O,ie=B!==z||X!==O,me=!ir(w),ye=me&&!ie?j.updateId:j.updateId+1;return tt(tt({updateId:ye},p(tt(tt({props:y},j),{},{updateId:ye,dataStartIndex:B,dataEndIndex:X}),j)),{},{prevChildren:A,dataStartIndex:B,dataEndIndex:X})}return null}),Kt(v,"renderActiveDot",function(y,j,_){var w;return x.isValidElement(y)?w=x.cloneElement(y,j):Xt(y)?w=y(j):w=we.createElement(Y0,j),we.createElement(br,{className:"recharts-active-dot",key:_},w)});var g=x.forwardRef(function(j,_){return we.createElement(v,zp({},j,{ref:_}))});return g.displayName=v.displayName,g},d3=Q_({chartName:"LineChart",GraphicalChild:kc,axisComponents:[{axisType:"xAxis",AxisComp:La},{axisType:"yAxis",AxisComp:Li}],formatAxisMap:t3}),h3=Q_({chartName:"BarChart",GraphicalChild:ao,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:La},{axisType:"yAxis",AxisComp:Li}],formatAxisMap:t3}),Ww=Q_({chartName:"PieChart",GraphicalChild:zl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:U_},{axisType:"radiusAxis",AxisComp:q_}],formatAxisMap:fRe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),XX=Q_({chartName:"AreaChart",GraphicalChild:ed,axisComponents:[{axisType:"xAxis",AxisComp:La},{axisType:"yAxis",AxisComp:Li}],formatAxisMap:t3});const O9e=()=>{var Q;const{user:e,profile:t}=yx(),r=kn(),[s,i]=x.useState(!0),[a,o]=x.useState({totalProperties:0,averagePrice:0,priceGrowth:0,bestROI:0,hotZones:[],marketTrends:[],riskLevel:"Modr"}),[l,c]=x.useState({totalInvestments:0,currentValue:0,totalROI:0,monthlyReturn:0,activeInvestments:[],performanceHistory:[],diversificationScore:0}),[u,d]=x.useState([]),[h,m]=x.useState(null),[p,v]=x.useState(null);x.useState(null),x.useState([]);const[g,y]=x.useState([]),[j,_]=x.useState([]),[w,A]=x.useState({sharpeRatio:0,volatility:0,maxDrawdown:0,beta:0}),S=[{month:"Jan",price:25e5,growth:2.1,volume:156,sentiment:.7},{month:"Fv",price:258e4,growth:3.2,volume:189,sentiment:.8},{month:"Mar",price:265e4,growth:2.7,volume:234,sentiment:.6},{month:"Avr",price:272e4,growth:2.6,volume:198,sentiment:.7},{month:"Mai",price:28e5,growth:2.9,volume:267,sentiment:.9},{month:"Jun",price:289e4,growth:3.2,volume:312,sentiment:.8}],P=[{name:"Rsidentiel",value:45,color:"#3B82F6",performance:12.5},{name:"Commercial",value:30,color:"#10B981",performance:18.3},{name:"Terrain",value:20,color:"#F59E0B",performance:15.7},{name:"Agricole",value:5,color:"#EF4444",performance:8.9}],C=[{zone:"Dakar Plateau",roi:12.5,risk:"Faible",volume:45,appreciation:8.2},{zone:"Almadies",roi:15.2,risk:"Modr",volume:67,appreciation:12.1},{zone:"Rufisque",roi:18.7,risk:"lev",volume:89,appreciation:15.6},{zone:"This",roi:14.3,risk:"Modr",volume:34,appreciation:11.4},{zone:"Mbour",roi:16.8,risk:"Modr",volume:56,appreciation:13.9}],T=[{metric:"Volatilit",value:15.2,benchmark:12.8,status:"attention"},{metric:"Sharpe Ratio",value:1.85,benchmark:1.5,status:"excellent"},{metric:"Max Drawdown",value:-8.5,benchmark:-10,status:"bon"},{metric:"Corrlation March",value:.72,benchmark:.8,status:"bon"}];x.useEffect(()=>{e&&t&&(M(),xe(),B())},[e,t]);const M=async()=>{var J,se;try{i(!0);const{data:Z,error:je}=await pe.from("parcels").select(`
          *,
          transactions(
            price,
            transaction_date,
            status,
            buyer_id,
            seller_id
          ),
          evaluations(
            estimated_value,
            market_value,
            evaluation_date
          )
        `).order("created_at",{ascending:!1}).limit(1e3);if(je)throw je;const{data:Ee,error:Pe}=await pe.from("user_investments").select(`
          *,
          parcels(
            reference,
            location,
            title,
            area,
            price_per_sqm
          ),
          investment_returns(
            monthly_return,
            annual_return,
            calculation_date
          )
        `).eq("investor_id",e.id);if(Pe)throw Pe;const{data:de,error:be}=await pe.from("user_favorites").select(`
          *,
          parcels(
            reference,
            title,
            location,
            price_per_sqm,
            area,
            status
          )
        `).eq("user_id",e.id);if(be)throw be;const{data:Ve,error:ze}=await pe.from("price_alerts").select("*").eq("user_id",e.id).eq("is_active",!0);if(ze)throw ze;const Xe=(Z==null?void 0:Z.length)||0,et=Xe>0?Z.reduce((Dr,ur)=>Dr+(ur.price_per_sqm||0),0)/Xe:0,ge=((se=(J=Z==null?void 0:Z.filter(Dr=>{var ur;return((ur=Dr.transactions)==null?void 0:ur.length)>0}))==null?void 0:J.map(Dr=>{var ur,Wr;return{price:((ur=Dr.transactions[0])==null?void 0:ur.price)||0,date:new Date(((Wr=Dr.transactions[0])==null?void 0:Wr.transaction_date)||Dr.created_at)}}))==null?void 0:se.sort((Dr,ur)=>Dr.date-ur.date))||[],Oe=z(ge),it=O(Z),nt=(Ee==null?void 0:Ee.length)||0,wt=(Ee==null?void 0:Ee.reduce((Dr,ur)=>Dr+(ur.current_value||0),0))||0,mt=(Ee==null?void 0:Ee.reduce((Dr,ur)=>Dr+(ur.initial_investment||0),0))||0,or=mt>0?(wt-mt)/mt*100:0,It=I(Ee),Ut=q(Ee),bt=F(It),cn=W(It),xr=V(It);o({totalProperties:Xe,averagePrice:et,priceGrowth:Oe,bestROI:Math.max(...C.map(Dr=>Dr.roi)),hotZones:it,marketTrends:ge,riskLevel:K(ge,cn)}),c({totalInvestments:nt,currentValue:wt,totalROI:or,monthlyReturn:G(Ee),activeInvestments:Ee||[],performanceHistory:It,diversificationScore:Ut}),A({sharpeRatio:bt,volatility:cn,maxDrawdown:xr,beta:ne(It,ge)}),_(de||[]),y(Ve||[]),await ee(Z,Ee)}catch(Z){console.error("Erreur lors du chargement des donnes:",Z),o({totalProperties:1247,averagePrice:289e4,priceGrowth:3.2,bestROI:18.7,hotZones:["Dakar Plateau","Almadies","Rufisque"],marketTrends:S,riskLevel:"Modr"}),c({totalInvestments:8,currentValue:45e6,totalROI:15.8,monthlyReturn:2.3,activeInvestments:[],performanceHistory:S,diversificationScore:75}),A({sharpeRatio:1.85,volatility:15.2,maxDrawdown:-8.5,beta:.72}),d([{id:1,title:"Terrain Commercial - Dakar Plateau",type:"Terrain",price:5e6,expectedROI:15.2,risk:"Modr",location:"Dakar Plateau",aiScore:87,marketSentiment:"Positif",liquidityScore:8.5},{id:2,title:"Appartement - Almadies",type:"Rsidentiel",price:12e6,expectedROI:12.8,risk:"Faible",location:"Almadies",aiScore:91,marketSentiment:"Trs Positif",liquidityScore:9.2},{id:3,title:"Local Commercial - Rufisque",type:"Commercial",price:85e5,expectedROI:18.5,risk:"lev",location:"Rufisque",aiScore:76,marketSentiment:"Neutre",liquidityScore:6.8}])}finally{i(!1)}},z=J=>{var Ee,Pe;if(!J||J.length<2)return 0;const se=J.slice(-6),Z=((Ee=se[0])==null?void 0:Ee.price)||0,je=((Pe=se[se.length-1])==null?void 0:Pe.price)||0;return Z>0?(je-Z)/Z*100:0},O=J=>{if(!J)return[];const se={};return J.forEach(Z=>{const je=Z.location||"Autre";se[je]||(se[je]={count:0,avgPrice:0,totalPrice:0}),se[je].count++,se[je].totalPrice+=Z.price_per_sqm||0}),Object.entries(se).map(([Z,je])=>({zone:Z,activity:je.count,avgPrice:je.totalPrice/je.count})).sort((Z,je)=>je.activity-Z.activity).slice(0,5).map(Z=>Z.zone)},I=J=>!J||J.length===0?[]:J.map(se=>({date:new Date(se.created_at),value:se.current_value||0,roi:se.current_value&&se.initial_investment?(se.current_value-se.initial_investment)/se.initial_investment*100:0})).sort((se,Z)=>se.date-Z.date),q=J=>{if(!J||J.length===0)return 0;const se=new Set(J.map(Pe=>{var de;return((de=Pe.parcels)==null?void 0:de.type)||"Autre"})),Z=new Set(J.map(Pe=>{var de;return((de=Pe.parcels)==null?void 0:de.location)||"Autre"})),je=Math.min(se.size*25,75),Ee=Math.min(Z.size*5,25);return je+Ee},F=J=>{if(!J||J.length<2)return 0;const se=J.map(de=>de.roi),Z=se.reduce((de,be)=>de+be,0)/se.length,je=se.reduce((de,be)=>de+Math.pow(be-Z,2),0)/se.length,Ee=Math.sqrt(je),Pe=3.5;return Ee>0?(Z-Pe)/Ee:0},W=J=>{if(!J||J.length<2)return 0;const se=J.map(Ee=>Ee.roi),Z=se.reduce((Ee,Pe)=>Ee+Pe,0)/se.length,je=se.reduce((Ee,Pe)=>Ee+Math.pow(Pe-Z,2),0)/se.length;return Math.sqrt(je)},V=J=>{if(!J||J.length===0)return 0;let se=0,Z=0;return J.forEach(je=>{je.value>se&&(se=je.value);const Ee=se>0?(je.value-se)/se*100:0;Ee<Z&&(Z=Ee)}),Z},ne=(J,se)=>{if(!J||!se||J.length<2)return 1;const Z=J.map(ze=>ze.roi),je=se.map(ze=>ze.growth||0),Ee=Math.min(Z.length,je.length);if(Ee<2)return 1;const Pe=Z.slice(0,Ee).reduce((ze,Xe)=>ze+Xe,0)/Ee,de=je.slice(0,Ee).reduce((ze,Xe)=>ze+Xe,0)/Ee;let be=0,Ve=0;for(let ze=0;ze<Ee;ze++)be+=(Z[ze]-Pe)*(je[ze]-de),Ve+=Math.pow(je[ze]-de,2);return Ve>0?be/Ve:1},G=J=>{if(!J||J.length===0)return 0;const se=new Date,Z=new Date(se.getFullYear(),se.getMonth(),1),je=J.filter(de=>new Date(de.created_at)>=Z);if(je.length===0)return 2.3;const Ee=je.reduce((de,be)=>de+(be.current_value||0),0),Pe=je.reduce((de,be)=>de+(be.initial_investment||0),0);return Pe>0?(Ee-Pe)/Pe*100:0},K=(J,se)=>se>20?"lev":se>15?"Modr":"Faible",ee=async(J,se)=>{try{const Z={userInvestments:(se==null?void 0:se.length)||0,portfolioValue:l.currentValue,riskTolerance:w.volatility<15?"conservative":"aggressive",preferredZones:(se==null?void 0:se.map(Pe=>{var de;return(de=Pe.parcels)==null?void 0:de.location}).filter(Boolean))||[],budget:5e7},je=`En tant qu'expert en investissement immobilier au Sngal, analyse ces ${(J==null?void 0:J.length)||0} proprits disponibles et recommande les 5 meilleures opportunits d'investissement pour un investisseur avec:
      - Portfolio actuel: ${Z.portfolioValue.toLocaleString()} XOF
      - ${Z.userInvestments} investissements existants
      - Profil de risque: ${Z.riskTolerance}
      - Budget disponible: ${Z.budget.toLocaleString()} XOF
      
      Pour chaque opportunit, fournis:
      1. Score d'attractivit (0-100)
      2. ROI estim
      3. Niveau de risque
      4. Potentiel d'apprciation
      5. Liquidit du march`,Ee=await Il.generateResponse(je,[],{role:"investment_advisor",domain:"real_estate_investment",context:Z});m(Ee)}catch(Z){console.error("Erreur gnration opportunits IA:",Z)}},xe=async()=>{try{const J={portfolioROI:l.totalROI,diversificationScore:l.diversificationScore,marketGrowth:a.priceGrowth,volatility:w.volatility,totalInvestments:l.totalInvestments},se=`Analyse mon portfolio d'investissement immobilier au Sngal:
      - ROI total: ${J.portfolioROI}%
      - Score de diversification: ${J.diversificationScore}/100
      - Croissance du march: ${J.marketGrowth}%
      - Volatilit: ${J.volatility}%
      - ${J.totalInvestments} investissements actifs
      
      Fournis 3 recommandations stratgiques pour optimiser mes investissements et 2 alertes de risque potentiels.`,Z=await Il.generateResponse(se,[],{role:"investment_advisor",domain:"portfolio_optimization"});m(Z)}catch(J){console.error("Erreur gnration insights IA:",J)}},B=async()=>{try{const J={opportunities:u.slice(0,3),marketData:a,userProfile:{id:e==null?void 0:e.id,investmentHistory:l.totalInvestments,riskProfile:w.volatility>15?"high":"moderate"}},se=await $f.analyzeInvestmentOpportunities(J);v(se)}catch(J){console.error("Erreur analyse anti-fraude:",J)}},X=J=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(J),ie=J=>`${J>0?"+":""}${J.toFixed(1)}%`,me=J=>{const se={Faible:{color:"bg-green-100 text-green-800"},Modr:{color:"bg-yellow-100 text-yellow-800"},lev:{color:"bg-red-100 text-red-800"}},Z=se[J]||se.Modr;return n.jsx(Ge,{className:Z.color,children:J})},ye=J=>J>0?n.jsx(Vne,{className:"h-4 w-4 text-green-500"}):J<0?n.jsx(Fne,{className:"h-4 w-4 text-red-500"}):n.jsx(hae,{className:"h-4 w-4 text-gray-500"}),Ne=(J,se)=>{const Z=J-se;return Z>.5?n.jsx(Ge,{className:"bg-green-100 text-green-800",children:"Excellent"}):Z>0?n.jsx(Ge,{className:"bg-blue-100 text-blue-800",children:"Bon"}):Z>-.5?n.jsx(Ge,{className:"bg-yellow-100 text-yellow-800",children:"Attention"}):n.jsx(Ge,{className:"bg-red-100 text-red-800",children:"Critique"})},le=async(J,se)=>{switch(J){case"ANALYZE_OPPORTUNITY":await ee();break;case"RISK_ASSESSMENT":await B();break;case"OPTIMIZE_PORTFOLIO":await xe();break;default:console.log("Action IA:",J,se)}};return s?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse space-y-6",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((J,se)=>n.jsx("div",{className:"h-32 bg-gray-200 rounded"},se))})]})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(fo,{className:"h-8 w-8"}),"Dashboard Investisseur"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Analysez le march et grez vos investissements immobiliers"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>r("/dashboard/investisseur/market-analysis"),children:[n.jsx(na,{className:"h-4 w-4 mr-2"}),"Analyse de march"]}),n.jsxs(Y,{onClick:()=>r("/dashboard/investisseur/opportunities"),children:[n.jsx(wr,{className:"h-4 w-4 mr-2"}),"Opportunits"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Valeur du Portfolio"}),n.jsx(gg,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:X(l.currentValue)}),n.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[ye(l.totalROI),n.jsxs("span",{className:"ml-1",children:[ie(l.totalROI)," total"]})]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"ROI Moyen"}),n.jsx(Br,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:ie(l.totalROI)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[ie(l.monthlyReturn)," ce mois"]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Investissements Actifs"}),n.jsx(_y,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:l.totalInvestments}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dans ",P.length," catgories"]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Meilleur ROI March"}),n.jsx(jy,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:ie(a.bestROI)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Zone: Rufisque"})]})]})]}),h&&n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs(he,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zs,{className:"h-5 w-5 text-blue-600"}),n.jsxs(ke,{className:"text-blue-900",children:["Recommandations IA - ",(Q=h.modelUsed)==null?void 0:Q.toUpperCase()]}),n.jsxs(Ge,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Confiance: ",Math.round((h.confidence||.8)*100),"%"]})]})}),n.jsxs(ve,{children:[n.jsx("p",{className:"text-blue-800 mb-4",children:h.text}),h.suggestions&&h.suggestions.length>0&&n.jsx("div",{className:"space-y-2",children:h.suggestions.map((J,se)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[n.jsx(Ru,{className:"h-4 w-4"}),n.jsx("span",{children:J})]},se))})]})]})}),p&&n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs(he,{className:`border-2 ${p.riskLevel==="high"?"border-red-200 bg-red-50":p.riskLevel==="medium"?"border-yellow-200 bg-yellow-50":"border-green-200 bg-green-50"}`,children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ns,{className:"h-5 w-5 text-gray-600"}),n.jsx(ke,{children:"Analyse de Scurit des Investissements"}),n.jsx(Ge,{className:p.riskLevel==="high"?"bg-red-100 text-red-800":p.riskLevel==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",children:p.riskLevel==="high"?"Risque lev":p.riskLevel==="medium"?"Attention":"Scuris"})]})}),n.jsxs(ve,{children:[n.jsx("p",{className:"mb-4",children:p.summary}),p.recommendations&&n.jsx("div",{className:"space-y-2",children:p.recommendations.map((J,se)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(ds,{className:"h-4 w-4"}),n.jsx("span",{children:J})]},se))})]})]})}),n.jsx(V0,{userRole:"investisseur"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(pj,{className:"h-5 w-5"}),"Mtriques de Performance Avances"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:T.map((J,se)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:J.metric}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Benchmark: ",J.benchmark]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-bold",children:J.value}),Ne(J.value,J.benchmark)]})]},se))})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Hr,{className:"h-5 w-5"}),"Watchlist & Alertes (",j.length,")"]})}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-3",children:[j.slice(0,5).map((J,se)=>{var Z,je,Ee,Pe;return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:((Z=J.parcels)==null?void 0:Z.title)||`Parcelle ${J.parcel_id}`}),n.jsx("p",{className:"text-xs text-gray-500",children:(je=J.parcels)==null?void 0:je.location})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-sm",children:X(((Ee=J.parcels)==null?void 0:Ee.price_per_sqm)*((Pe=J.parcels)==null?void 0:Pe.area)||0)}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(yj,{className:"h-3 w-3 text-yellow-500"}),n.jsx("span",{className:"text-xs",children:"Favoris"})]})]})]},se)}),g.length>0&&n.jsxs(Bu,{children:[n.jsx(ds,{className:"h-4 w-4"}),n.jsxs(qu,{children:[g.length," alerte(s) de prix active(s)"]})]}),n.jsx(Y,{variant:"outline",className:"w-full",onClick:()=>r("/dashboard/investisseur/watchlist"),children:"Grer la watchlist"})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5"}),"volution March & Volume"]})}),n.jsx(ve,{children:n.jsx(co,{width:"100%",height:300,children:n.jsxs(XX,{data:S,children:[n.jsx(um,{strokeDasharray:"3 3"}),n.jsx(La,{dataKey:"month"}),n.jsx(Li,{yAxisId:"left",tickFormatter:J=>`${J/1e6}M`}),n.jsx(Li,{yAxisId:"right",orientation:"right"}),n.jsx(es,{formatter:(J,se)=>[se==="price"?X(J):J,se==="price"?"Prix moyen":se==="volume"?"Volume":"Sentiment"]}),n.jsx(ed,{yAxisId:"left",type:"monotone",dataKey:"price",stackId:"1",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.3}),n.jsx(ao,{yAxisId:"right",dataKey:"volume",fill:"#10B981",fillOpacity:.6})]})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Br,{className:"h-5 w-5"}),"Performance Portfolio"]})}),n.jsxs(ve,{children:[n.jsx(co,{width:"100%",height:300,children:n.jsxs(d3,{data:l.performanceHistory,children:[n.jsx(um,{strokeDasharray:"3 3"}),n.jsx(La,{dataKey:"month"}),n.jsx(Li,{}),n.jsx(es,{formatter:J=>[ie(J),"ROI"]}),n.jsx(kc,{type:"monotone",dataKey:"roi",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:2,r:4}})]})}),n.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Sharpe Ratio"}),n.jsx("p",{className:"font-bold",children:w.sharpeRatio.toFixed(2)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Volatilit"}),n.jsx("p",{className:"font-bold",children:ie(w.volatility)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Max Drawdown"}),n.jsx("p",{className:"font-bold",children:ie(w.maxDrawdown)})]})]})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5"}),"ROI par Zone Gographique"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:C.map((J,se)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:J.zone}),n.jsxs("div",{className:"flex items-center gap-2",children:[me(J.risk),n.jsxs(Ge,{variant:"outline",className:"text-xs",children:["Vol: ",J.volume]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-bold text-green-600",children:ie(J.roi)}),n.jsx("p",{className:"text-xs text-gray-500",children:"ROI attendu"}),n.jsxs("p",{className:"text-xs text-blue-500",children:["+",ie(J.appreciation)," apprciation"]})]})]},se))})})]})}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Outils d'Analyse Avancs"})}),n.jsx(ve,{children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/investisseur/roi-calculator"),children:[n.jsx(jy,{className:"h-6 w-6 mb-2"}),"Calculateur ROI"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/investisseur/market-analysis"),children:[n.jsx(na,{className:"h-6 w-6 mb-2"}),"Analyse de March"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/investisseur/due-diligence"),children:[n.jsx(Xf,{className:"h-6 w-6 mb-2"}),"Due Diligence"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/investisseur/investissements"),children:[n.jsx(gg,{className:"h-6 w-6 mb-2"}),"Mon Portfolio"]})]})})]}),n.jsx(bx,{dashboardContext:{role:"investisseur",portfolioValue:l.currentValue,totalInvestments:l.totalInvestments,roi:l.totalROI,diversificationScore:l.diversificationScore,riskMetrics:w,marketData:a,aiInsights:h,fraudAnalysis:p,watchlistCount:j.length},onAction:le,aiService:"hybrid"})]})},L9e=()=>{var xe;const{user:e,profile:t}=yx(),r=kn(),[s,i]=x.useState(!0),[a,o]=x.useState([]),[l,c]=x.useState({totalProjects:0,activeProjects:0,completedProjects:0,totalRevenue:0,averageMargin:0,totalUnits:0,soldUnits:0,pendingSales:0,constructionProgress:0,teamMembers:0}),[u,d]=x.useState(null),[h,m]=x.useState([]),[p,v]=x.useState({conversionRate:0,averageSaleTime:0,customerSatisfaction:0,leadGeneration:0}),[g,y]=x.useState([]),[j,_]=x.useState([]);x.useState([]);const w=[{status:"Planification",count:3,color:"#F59E0B",budget:24e8,completion:15},{status:"En cours",count:5,color:"#3B82F6",budget:89e8,completion:45},{status:"Livraison",count:2,color:"#10B981",budget:18e8,completion:90},{status:"Termin",count:8,color:"#6B7280",budget:12e9,completion:100}],A=[{month:"Jan",vendu:12,prevision:15,revenue:85e7,leads:45},{month:"Fv",vendu:18,prevision:20,revenue:12e8,leads:67},{month:"Mar",vendu:22,prevision:25,revenue:158e7,leads:89},{month:"Avr",vendu:28,prevision:30,revenue:189e7,leads:112},{month:"Mai",vendu:35,prevision:35,revenue:24e8,leads:134},{month:"Jun",vendu:42,prevision:40,revenue:295e7,leads:156}],S=[{type:"Rsidentiel",revenue:25e8,margin:18.5,units:45,avgPrice:55e6},{type:"Commercial",revenue:18e8,margin:22.3,units:12,avgPrice:15e7},{type:"Mixte",revenue:32e8,margin:16.8,units:28,avgPrice:114e6},{type:"Luxe",revenue:12e8,margin:25.2,units:8,avgPrice:15e7}],P=[{phase:"Fondations",completion:100,onTime:!0,budget:95},{phase:"Structure",completion:85,onTime:!0,budget:92},{phase:"Toiture",completion:70,onTime:!1,budget:88},{phase:"Finitions",completion:45,onTime:!0,budget:91},{phase:"Amnagements",completion:20,onTime:!0,budget:96}],C=[{category:"Budget",risk:"Moyen",impact:"lev",probability:.3,mitigation:"Rvision budgtaire"},{category:"Dlais",risk:"Faible",impact:"Moyen",probability:.15,mitigation:"Planning renforc"},{category:"Qualit",risk:"Faible",impact:"lev",probability:.1,mitigation:"Contrles qualit"},{category:"Rglementaire",risk:"Moyen",impact:"Trs lev",probability:.2,mitigation:"Veille juridique"}],T=[{id:1,name:"Rsidence Les Almadies",type:"Rsidentiel",status:"En cours",progress:65,totalUnits:48,soldUnits:32,budget:24e8,spent:156e7,location:"Almadies, Dakar",completion_date:"2024-12-15",riskLevel:"Faible",teamSize:25,nextMilestone:"Toiture - 15 Nov",contractor:"BTP Solutions",architecte:"Design Plus"},{id:2,name:"Centre Commercial Plateau",type:"Commercial",status:"Planification",progress:15,totalUnits:24,soldUnits:8,budget:18e8,spent:27e7,location:"Plateau, Dakar",completion_date:"2025-06-30",riskLevel:"Moyen",teamSize:12,nextMilestone:"Permis construction - 30 Oct",contractor:"Construction Elite",architecte:"Arch Studio"},{id:3,name:"Villa Premium Saly",type:"Luxe",status:"Livraison",progress:90,totalUnits:12,soldUnits:11,budget:96e7,spent:864e6,location:"Saly, Mbour",completion_date:"2024-08-30",riskLevel:"Faible",teamSize:18,nextMilestone:"Livraison finale - 20 Oct",contractor:"Premium Build",architecte:"Luxury Design"}];x.useEffect(()=>{e&&t&&(M(),z(),O())},[e,t]);const M=async()=>{var B;try{i(!0);const{data:X,error:ie}=await pe.from("development_projects").select(`
          *,
          project_sales(count),
          construction_phases(
            phase_name,
            completion_percentage,
            budget_allocated,
            budget_spent
          ),
          project_team(
            user_id,
            role,
            profiles(full_name)
          )
        `).eq("developer_id",e.id);if(ie)throw ie;const{data:me,error:ye}=await pe.from("project_sales").select(`
          *,
          development_projects(name, type),
          buyers:profiles!project_sales_buyer_id_fkey(full_name, email)
        `).in("project_id",(X==null?void 0:X.map(Oe=>Oe.id))||[]);if(ye)throw ye;const{data:Ne,error:le}=await pe.from("construction_phases").select("*").in("project_id",(X==null?void 0:X.map(Oe=>Oe.id))||[]);if(le)throw le;const{data:Q,error:J}=await pe.from("project_suppliers").select(`
          *,
          suppliers(name, category, rating)
        `).in("project_id",(X==null?void 0:X.map(Oe=>Oe.id))||[]);if(J)throw J;const se=(X==null?void 0:X.length)||0,Z=(X==null?void 0:X.filter(Oe=>Oe.status==="active"||Oe.status==="En cours").length)||0,je=(X==null?void 0:X.filter(Oe=>Oe.status==="completed"||Oe.status==="Termin").length)||0,Ee=(me==null?void 0:me.reduce((Oe,it)=>Oe+(it.amount||0),0))||0,Pe=(X==null?void 0:X.reduce((Oe,it)=>Oe+(it.total_units||0),0))||0,de=(me==null?void 0:me.length)||0,be=(X==null?void 0:X.reduce((Oe,it)=>Oe+(it.budget||0),0))||0,Ve=(Ne==null?void 0:Ne.reduce((Oe,it)=>Oe+(it.budget_spent||0),0))||0,ze=be>0?(Ee-Ve)/Ee*100:0,Xe=(Ne==null?void 0:Ne.length)||0,et=Xe>0?Ne.reduce((Oe,it)=>Oe+(it.completion_percentage||0),0)/Xe:0,ge=(X==null?void 0:X.reduce((Oe,it)=>{var nt;return Oe+(((nt=it.project_team)==null?void 0:nt.length)||0)},0))||0;c({totalProjects:se,activeProjects:Z,completedProjects:je,totalRevenue:Ee,averageMargin:ze,totalUnits:Pe,soldUnits:de,pendingSales:Math.floor(de*.1),constructionProgress:et,teamMembers:ge}),v({conversionRate:Pe>0?de/Pe*100:0,averageSaleTime:45,customerSatisfaction:4.2,leadGeneration:((B=A[A.length-1])==null?void 0:B.leads)||0}),o(X||T),_(Q||[]),await I(X,Ne)}catch(X){console.error("Erreur lors du chargement des donnes:",X),c({totalProjects:18,activeProjects:7,completedProjects:8,totalRevenue:87e8,averageMargin:19.2,totalUnits:156,soldUnits:128,pendingSales:12,constructionProgress:67,teamMembers:85}),v({conversionRate:82.1,averageSaleTime:45,customerSatisfaction:4.2,leadGeneration:156}),o(T)}finally{i(!1)}},z=async()=>{try{const B={totalProjects:l.totalProjects,activeProjects:l.activeProjects,averageMargin:l.averageMargin,constructionProgress:l.constructionProgress,salesConversion:p.conversionRate},X=`En tant qu'expert en promotion immobilire au Sngal, analyse ma performance:
      - ${B.totalProjects} projets au total, ${B.activeProjects} actifs
      - Marge moyenne: ${B.averageMargin}%
      - Progression construction: ${B.constructionProgress}%
      - Taux de conversion ventes: ${B.salesConversion}%
      
      Fournis 3 recommandations stratgiques pour optimiser mes projets et identifier 2 risques potentiels  surveiller.`,ie=await Il.generateResponse(X,[],{role:"real_estate_developer",domain:"project_management"});d(ie)}catch(B){console.error("Erreur gnration insights IA:",B)}},O=async()=>{try{const B=[];T.forEach(X=>{const ie=q(X.completion_date);X.progress<ie-10&&B.push({type:"delay",severity:"high",project:X.name,message:`Retard potentiel dtect - Progression: ${X.progress}% vs attendu: ${ie}%`});const me=X.spent/X.budget*100;me>X.progress+15&&B.push({type:"budget",severity:"medium",project:X.name,message:`Dpassement budgtaire potentiel - Dpens: ${me.toFixed(1)}% vs progression: ${X.progress}%`})}),m(B)}catch(B){console.error("Erreur vrification alertes:",B)}},I=async(B,X)=>{try{const ie=(B==null?void 0:B.map(me=>{let ye=0;const Ne=[];(me.spent?me.spent/me.budget*100:0)>80&&(ye+=30,Ne.push("Budget lev"));const Q=q(me.completion_date);return me.progress<Q-10&&(ye+=25,Ne.push("Retard calendaire")),(me.totalUnits>0?me.soldUnits/me.totalUnits*100:0)<50&&me.progress>70&&(ye+=20,Ne.push("Ventes insuffisantes")),(me.type==="Commercial"||me.type==="Mixte")&&(ye+=15,Ne.push("Complexit technique")),{projectId:me.id,projectName:me.name,riskScore:Math.min(ye,100),riskLevel:ye>70?"lev":ye>40?"Moyen":"Faible",factors:Ne}}))||[];y(ie)}catch(ie){console.error("Erreur analyse risques:",ie)}},q=B=>{const X=new Date,ie=new Date(B),me=new Date(ie);me.setMonth(ie.getMonth()-18);const ye=ie-me,Ne=X-me;return Math.max(0,Math.min(100,Ne/ye*100))},F=B=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(B),W=B=>`${B.toFixed(1)}%`,V=B=>{const X={Planification:{color:"bg-yellow-100 text-yellow-800",icon:ln},"En cours":{color:"bg-blue-100 text-blue-800",icon:Uv},Livraison:{color:"bg-green-100 text-green-800",icon:Qt},Termin:{color:"bg-gray-100 text-gray-800",icon:Qt},active:{color:"bg-blue-100 text-blue-800",icon:Uv},completed:{color:"bg-gray-100 text-gray-800",icon:Qt},delayed:{color:"bg-red-100 text-red-800",icon:ds}},ie=X[B]||X.Planification;return n.jsx(Ge,{className:ie.color,children:B})},ne=B=>{const X={Faible:{color:"bg-green-100 text-green-800"},Moyen:{color:"bg-yellow-100 text-yellow-800"},lev:{color:"bg-red-100 text-red-800"}},ie=X[B]||X.Moyen;return n.jsx(Ge,{className:ie.color,children:B})},G=B=>B>=80?"bg-green-500":B>=50?"bg-blue-500":B>=25?"bg-yellow-500":"bg-red-500",K=B=>{const X={high:{color:"bg-red-100 text-red-800",icon:ds},medium:{color:"bg-yellow-100 text-yellow-800",icon:ds},low:{color:"bg-blue-100 text-blue-800",icon:ds}},ie=X[B]||X.medium;return n.jsx(Ge,{className:ie.color,children:B})},ee=async(B,X)=>{switch(B){case"ANALYZE_PROJECT":await I();break;case"OPTIMIZE_CONSTRUCTION":await O();break;case"SALES_FORECAST":await z();break;default:console.log("Action IA:",B,X)}};return s?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse space-y-6",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((B,X)=>n.jsx("div",{className:"h-32 bg-gray-200 rounded"},X))})]})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(fo,{className:"h-8 w-8"}),"Dashboard Promoteur"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Grez vos projets immobiliers et suivez vos performances"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>r("/dashboard/promoteur/construction-tracking"),children:[n.jsx(Xf,{className:"h-4 w-4 mr-2"}),"Suivi Construction"]}),n.jsxs(Y,{onClick:()=>r("/dashboard/promoteur/projects"),children:[n.jsx(vj,{className:"h-4 w-4 mr-2"}),"Nouveau Projet"]})]})]}),h.length>0&&n.jsxs(Bu,{className:"border-orange-200 bg-orange-50",children:[n.jsx(ds,{className:"h-4 w-4 text-orange-600"}),n.jsx(qu,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("strong",{className:"text-orange-800",children:["Alertes de Construction (",h.length,")"]}),h.slice(0,2).map((B,X)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-orange-700",children:B.message}),K(B.severity)]},X))]})})]}),u&&n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs(he,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zs,{className:"h-5 w-5 text-blue-600"}),n.jsxs(ke,{className:"text-blue-900",children:["Insights IA Promotion - ",(xe=u.modelUsed)==null?void 0:xe.toUpperCase()]}),n.jsxs(Ge,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Confiance: ",Math.round((u.confidence||.8)*100),"%"]})]})}),n.jsxs(ve,{children:[n.jsx("p",{className:"text-blue-800 mb-4",children:u.text}),u.suggestions&&u.suggestions.length>0&&n.jsx("div",{className:"space-y-2",children:u.suggestions.map((B,X)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[n.jsx(Ru,{className:"h-4 w-4"}),n.jsx("span",{children:B})]},X))})]})]})}),n.jsx(V0,{userRole:"promoteur"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Projets Totaux"}),n.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:l.totalProjects}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.activeProjects," en cours"]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Chiffre d'Affaires"}),n.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:F(l.totalRevenue)}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Marge: ",W(l.averageMargin)]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Units Vendues"}),n.jsx(_y,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[l.soldUnits,"/",l.totalUnits]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[W(l.soldUnits/l.totalUnits*100)," de russite"]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Progression Construction"}),n.jsx(A1,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:W(l.constructionProgress)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Moyenne gnrale"})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"quipe"}),n.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:l.teamMembers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Collaborateurs actifs"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(he,{children:[n.jsx(Ce,{className:"pb-2",children:n.jsx(ke,{className:"text-sm",children:"Taux de Conversion"})}),n.jsx(ve,{children:n.jsx("div",{className:"text-xl font-bold text-green-600",children:W(p.conversionRate)})})]}),n.jsxs(he,{children:[n.jsx(Ce,{className:"pb-2",children:n.jsx(ke,{className:"text-sm",children:"Temps de Vente Moyen"})}),n.jsx(ve,{children:n.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[p.averageSaleTime," jours"]})})]}),n.jsxs(he,{children:[n.jsx(Ce,{className:"pb-2",children:n.jsx(ke,{className:"text-sm",children:"Satisfaction Client"})}),n.jsx(ve,{children:n.jsxs("div",{className:"text-xl font-bold text-yellow-600",children:[p.customerSatisfaction,"/5"]})})]}),n.jsxs(he,{children:[n.jsx(Ce,{className:"pb-2",children:n.jsx(ke,{className:"text-sm",children:"Leads Gnrs"})}),n.jsx(ve,{children:n.jsx("div",{className:"text-xl font-bold text-purple-600",children:p.leadGeneration})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5"}),"Ventes & Revenus"]})}),n.jsx(ve,{children:n.jsx(co,{width:"100%",height:300,children:n.jsxs(XX,{data:A,children:[n.jsx(um,{strokeDasharray:"3 3"}),n.jsx(La,{dataKey:"month"}),n.jsx(Li,{yAxisId:"left"}),n.jsx(Li,{yAxisId:"right",orientation:"right",tickFormatter:B=>`${B/1e9}Md`}),n.jsx(es,{formatter:(B,X)=>[X==="revenue"?F(B):B,X==="vendu"?"Vendues":X==="prevision"?"Prvision":X==="revenue"?"Revenus":"Leads"]}),n.jsx(ed,{yAxisId:"right",type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.3}),n.jsx(kc,{yAxisId:"left",type:"monotone",dataKey:"vendu",stroke:"#3B82F6",strokeWidth:3,name:"Vendues"}),n.jsx(kc,{yAxisId:"left",type:"monotone",dataKey:"prevision",stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"5 5",name:"Prvision"})]})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(wy,{className:"h-5 w-5"}),"Projets par Statut"]})}),n.jsxs(ve,{children:[n.jsx(co,{width:"100%",height:300,children:n.jsxs(Ww,{children:[n.jsx(es,{formatter:(B,X)=>[B,X],labelFormatter:B=>{const X=w.find(ie=>ie.status===B);return`${B} - Budget: ${F((X==null?void 0:X.budget)||0)}`}}),n.jsx(Ww,{data:w,cx:"50%",cy:"50%",outerRadius:80,children:w.map((B,X)=>n.jsx(_m,{fill:B.color},`cell-${X}`))})]})}),n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:w.map(B=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:B.color}}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("span",{className:"text-sm",children:[B.status," (",B.count,")"]}),n.jsx("p",{className:"text-xs text-gray-500",children:F(B.budget)})]})]},B.status))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(ns,{className:"h-5 w-5"}),"Analyse des Risques"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:C.map((B,X)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:B.category}),n.jsx("p",{className:"text-sm text-gray-500",children:B.mitigation}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs(Ge,{className:`text-xs ${B.impact==="Trs lev"?"bg-red-100 text-red-800":B.impact==="lev"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:["Impact: ",B.impact]}),n.jsx(Ge,{variant:"outline",className:"text-xs",children:W(B.probability*100)})]})]}),n.jsx("div",{className:"text-right",children:ne(B.risk)})]},X))})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(A1,{className:"h-5 w-5"}),"Suivi Construction"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:P.map((B,X)=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-medium",children:B.phase}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ge,{className:B.onTime?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:B.onTime?" temps":"Retard"}),n.jsx("span",{className:"text-sm",children:W(B.completion)})]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${G(B.completion)}`,style:{width:`${B.completion}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{children:["Budget: ",W(B.budget)]})]})]},X))})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Vn,{className:"h-5 w-5"}),"Projets en Cours (",T.length,")"]})}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-4",children:[T.map(B=>n.jsxs(Ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:B.name}),n.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[n.jsx(jr,{className:"h-3 w-3"}),B.location]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(Ge,{variant:"outline",children:B.type}),V(B.status),ne(B.riskLevel)]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(bs,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs",children:B.teamSize})]})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{children:[B.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${G(B.progress)}`,style:{width:`${B.progress}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Units vendues"}),n.jsxs("p",{className:"font-semibold",children:[B.soldUnits,"/",B.totalUnits]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Budget utilis"}),n.jsxs("p",{className:"font-semibold",children:[F(B.spent),"/",F(B.budget)]})]})]}),n.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sc,{className:"h-3 w-3"}),n.jsxs("span",{children:["Prochaine tape: ",B.nextMilestone]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(kz,{className:"h-3 w-3"}),n.jsxs("span",{children:["Contractant: ",B.contractor]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Yf,{className:"h-3 w-3"}),n.jsxs("span",{children:["Architecte: ",B.architecte]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>r(`/dashboard/promoteur/project/${B.id}`),children:[n.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Dtails"]}),n.jsxs(Y,{size:"sm",onClick:()=>r(`/dashboard/promoteur/construction/${B.id}`),children:[n.jsx(A1,{className:"h-3 w-3 mr-1"}),"Suivi"]})]})]},B.id)),n.jsx(Y,{variant:"outline",className:"w-full",onClick:()=>r("/dashboard/promoteur/projects"),children:"Voir tous les projets"})]})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Br,{className:"h-5 w-5"}),"Performance par Type"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:S.map((B,X)=>n.jsxs(Ae.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:X*.1},className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:B.type}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[n.jsxs("span",{children:["Marge: ",W(B.margin)]}),n.jsx("span",{children:""}),n.jsxs("span",{children:[B.units," units"]})]}),n.jsxs("p",{className:"text-xs text-blue-600",children:["Prix moyen: ",F(B.avgPrice)]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"font-semibold text-blue-600",children:F(B.revenue)}),n.jsx("p",{className:"text-xs text-gray-500",children:"Revenus totaux"})]})]},X))})})]})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Outils de Gestion"})}),n.jsx(ve,{children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/promoteur/projects"),children:[n.jsx(vj,{className:"h-6 w-6 mb-2"}),"Nouveau Projet"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/promoteur/construction-tracking"),children:[n.jsx(Xf,{className:"h-6 w-6 mb-2"}),"Suivi Construction"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/promoteur/sales"),children:[n.jsx(bs,{className:"h-6 w-6 mb-2"}),"Gestion Ventes"]}),n.jsxs(Y,{variant:"outline",className:"h-20 flex-col",onClick:()=>r("/dashboard/promoteur/analytics"),children:[n.jsx(na,{className:"h-6 w-6 mb-2"}),"Analytics Avancs"]})]})})]}),n.jsx(bx,{dashboardContext:{role:"promoteur",totalProjects:l.totalProjects,activeProjects:l.activeProjects,averageMargin:l.averageMargin,constructionProgress:l.constructionProgress,salesMetrics:p,projectRisks:g,constructionAlerts:h,aiInsights:u},onAction:ee,aiService:"hybrid"})]})},M9e=()=>{const{user:e,profile:t}=yx();kn();const[r,s]=x.useState(!0),[i,a]=x.useState([]),[o,l]=x.useState({temperature:28,humidity:65,rainfall:12,forecast:"Ensoleill",windSpeed:15,uvIndex:8,soilMoisture:45}),[c,u]=x.useState({totalLands:0,totalArea:0,activeCrops:0,harvestReady:0,soilQuality:"Bon",irrigation:85,productivity:92,revenue:0,expenses:0,profit:0,waterUsage:0}),[d,h]=x.useState(null),[m,p]=x.useState([]),[v,g]=x.useState([]),[y,j]=x.useState([]),[_,w]=x.useState({carbonFootprint:0,waterEfficiency:0,biodiversityScore:0,sustainabilityRating:"A"}),A=[{crop:"Mil",currentPrice:450,weekChange:5.2,monthChange:12.8,demand:"leve"},{crop:"Mas",currentPrice:380,weekChange:-2.1,monthChange:8.4,demand:"Moyenne"},{crop:"Arachide",currentPrice:650,weekChange:8.7,monthChange:18.9,demand:"Trs leve"},{crop:"Riz",currentPrice:420,weekChange:1.8,monthChange:6.2,demand:"leve"}];x.useEffect(()=>{e&&t&&(S(),T(),P())},[e,t]);const S=async()=>{var le,Q;try{s(!0);const{data:J,error:se}=await pe.from("agricultural_lands").select(`
          *,
          crops(
            id,
            crop_type,
            planting_date,
            expected_harvest,
            growth_stage,
            yield_estimate,
            status
          ),
          soil_analyses(
            ph_level,
            nitrogen_level,
            phosphorus_level,
            potassium_level,
            organic_matter,
            analysis_date
          )
        `).eq("farmer_id",e.id);if(se)throw se;const{data:Z,error:je}=await pe.from("crops").select(`
          *,
          agricultural_lands(area, location),
          harvest_records(quantity, harvest_date, quality_grade)
        `).eq("farmer_id",e.id).eq("status","active");if(je)throw je;const{data:Ee,error:Pe}=await pe.from("agricultural_equipment").select("*").eq("owner_id",e.id);if(Pe)throw Pe;const{data:de,error:be}=await pe.from("agricultural_finances").select("*").eq("farmer_id",e.id).gte("transaction_date",new Date(new Date().getFullYear(),0,1).toISOString());if(be)throw be;const{data:Ve,error:ze}=await pe.from("weather_data").select("*").order("recorded_at",{ascending:!1}).limit(30);if(ze)throw ze;const Xe=(J==null?void 0:J.length)||0,et=(J==null?void 0:J.reduce((bt,cn)=>bt+(cn.area||0),0))||0,ge=(Z==null?void 0:Z.length)||0,Oe=(Z==null?void 0:Z.filter(bt=>bt.growth_stage==="harvest_ready").length)||0,it=((le=de==null?void 0:de.filter(bt=>bt.transaction_type==="income"))==null?void 0:le.reduce((bt,cn)=>bt+(cn.amount||0),0))||0,nt=((Q=de==null?void 0:de.filter(bt=>bt.transaction_type==="expense"))==null?void 0:Q.reduce((bt,cn)=>bt+(cn.amount||0),0))||0,wt=it-nt,mt=z(J,Z),or=O(J,mt),It=I(J),Ut=q(Z,J);u({totalLands:Xe,totalArea:et,activeCrops:ge,harvestReady:Oe,soilQuality:It,irrigation:or,productivity:Ut,revenue:it,expenses:nt,profit:wt,waterUsage:mt}),a(J||[]),await C(J,Z,Ve),await M()}catch(J){console.error("Erreur lors du chargement des donnes:",J),u({totalLands:8,totalArea:120,activeCrops:15,harvestReady:3,soilQuality:"Bon",irrigation:85,productivity:92,revenue:25e6,expenses:15e6,profit:1e7,waterUsage:2450}),w({carbonFootprint:2.8,waterEfficiency:85,biodiversityScore:78,sustainabilityRating:"A"})}finally{s(!1)}},P=async()=>{try{const le=[];o.temperature>35&&le.push({type:"heat",severity:"high",message:"Alerte canicule - Protection des cultures recommande"}),o.rainfall<10&&le.push({type:"drought",severity:"medium",message:"Niveau de prcipitations faible - Irrigation ncessaire"}),g(le)}catch(le){console.error("Erreur donnes mto:",le)}},C=async(le,Q,J)=>{try{const se={landArea:(le==null?void 0:le.reduce((Ee,Pe)=>Ee+Pe.area,0))||0,currentCrops:(Q==null?void 0:Q.map(Ee=>Ee.crop_type))||[],soilTypes:(le==null?void 0:le.map(Ee=>Ee.soil_type))||[],climateData:(J==null?void 0:J.slice(0,7))||[],season:ne()},Z=`En tant qu'expert agronome au Sngal, analyse mes ${se.landArea} hectares de terres agricoles:
      - Cultures actuelles: ${se.currentCrops.join(", ")}
      - Types de sol: ${se.soilTypes.join(", ")}
      - Saison: ${se.season}
      
      Recommande 3 cultures optimales pour maximiser le rendement et la durabilit, en tenant compte du climat local et de la rotation des cultures.`,je=await Il.generateResponse(Z,[],{role:"agricultural_expert",domain:"crop_optimization",context:se});p(je.suggestions||[])}catch(se){console.error("Erreur recommandations IA:",se)}},T=async()=>{try{const le={productivity:c.productivity,profitMargin:c.revenue>0?c.profit/c.revenue*100:0,waterEfficiency:_.waterEfficiency,activeCrops:c.activeCrops,totalArea:c.totalArea},Q=`Analyse ma ferme agricole au Sngal:
      - Productivit: ${le.productivity}%
      - Marge bnficiaire: ${le.profitMargin.toFixed(1)}%
      - Efficacit hydrique: ${le.waterEfficiency}%
      - ${le.activeCrops} cultures sur ${le.totalArea} hectares
      
      Fournis 3 recommandations pour optimiser la production et 2 alertes importantes  surveiller.`,J=await Il.generateResponse(Q,[],{role:"agricultural_advisor",domain:"farm_optimization"});h(J)}catch(le){console.error("Erreur gnration insights IA:",le)}},M=async()=>{try{const{data:le,error:Q}=await pe.from("market_prices").select("*").order("price_date",{ascending:!1}).limit(20);j(!Q&&le?le:A)}catch(le){console.error("Erreur prix march:",le),j(A)}},z=(le,Q)=>(le==null?void 0:le.reduce((J,se)=>{var je;const Z=((je=Q==null?void 0:Q.filter(Ee=>Ee.land_id===se.id))==null?void 0:je.reduce((Ee,Pe)=>Ee+F(Pe.crop_type),0))||0;return J+se.area*Z},0))||2450,O=(le,Q)=>{const J=(le==null?void 0:le.reduce((se,Z)=>{const je=W(Z.irrigation_system);return se+je},0))||0;return(le==null?void 0:le.length)>0?J/le.length:85},I=le=>{if(!le||le.length===0)return"Bon";const Q=le.map(se=>{var Ee;const Z=(Ee=se.soil_analyses)==null?void 0:Ee[0];if(!Z)return 3;let je=0;return Z.ph_level>=6&&Z.ph_level<=7&&(je+=1),Z.nitrogen_level>70&&(je+=1),Z.phosphorus_level>60&&(je+=1),Z.potassium_level>70&&(je+=1),Z.organic_matter>3&&(je+=1),je}),J=Q.reduce((se,Z)=>se+Z,0)/Q.length;return J>=4?"Excellent":J>=3?"Bon":J>=2?"Moyen":"Faible"},q=(le,Q)=>{if(!le||le.length===0)return 92;const J=le.reduce((Z,je)=>{var de;const Ee=((de=je.agricultural_lands)==null?void 0:de.area)||0,Pe=je.yield_estimate||0;return Z+Ee*Pe},0),se=(Q==null?void 0:Q.reduce((Z,je)=>Z+je.area*V(je.soil_type),0))||1;return se>0?J/se*100:92},F=le=>({mil:.8,mais:1.2,arachide:.9,riz:2.5,legumes:1.5})[le==null?void 0:le.toLowerCase()]||1,W=le=>({drip:95,sprinkler:85,flood:65,none:40})[le]||70,V=le=>({clay:1500,loam:1800,sandy:1200,silt:1600})[le]||1400,ne=()=>{const le=new Date().getMonth();return le>=5&&le<=10?"Hivernage":"Saison sche"},G=le=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(le),K=le=>new Intl.NumberFormat("fr-FR").format(le),ee=le=>`${le.toFixed(1)}%`,xe=le=>{const Q={Oprationnel:{color:"bg-green-100 text-green-800",icon:Qt},Maintenance:{color:"bg-yellow-100 text-yellow-800",icon:kr},Panne:{color:"bg-red-100 text-red-800",icon:kr},Termin:{color:"bg-green-100 text-green-800",icon:Qt},"En cours":{color:"bg-blue-100 text-blue-800",icon:pj},Planifi:{color:"bg-gray-100 text-gray-800",icon:Sc}},J=Q[le]||Q.Planifi;return n.jsx(Ge,{className:J.color,children:le})},B=le=>{const Q=le.level,J=le.optimal,se=Q/J;return se>=.9&&se<=1.1?"text-green-600":se>=.7&&se<=1.3?"text-yellow-600":"text-red-600"},X=le=>{switch(le.toLowerCase()){case"ensoleill":return n.jsx(Tp,{className:"h-8 w-8 text-yellow-500"});case"nuageux":return n.jsx(Tp,{className:"h-8 w-8 text-gray-500"});case"pluvieux":return n.jsx(dk,{className:"h-8 w-8 text-blue-500"});default:return n.jsx(Tp,{className:"h-8 w-8 text-yellow-500"})}},ie=le=>le>0?n.jsx(Br,{className:"h-3 w-3 text-green-500"}):n.jsx(Br,{className:"h-3 w-3 text-red-500 rotate-180"}),me=le=>le>5?{text:"Trs positif",color:"text-green-600"}:le>0?{text:"Positif",color:"text-blue-600"}:le>-5?{text:"Stable",color:"text-gray-600"}:{text:"Ngatif",color:"text-red-600"},ye=le=>{const Q={A:{color:"bg-green-100 text-green-800"},B:{color:"bg-blue-100 text-blue-800"},C:{color:"bg-yellow-100 text-yellow-800"},D:{color:"bg-red-100 text-red-800"}},J=Q[le]||Q.C;return n.jsxs(Ge,{className:J.color,children:["Durabilit ",le]})},Ne=async(le,Q)=>{switch(le){case"CROP_RECOMMENDATION":await C();break;case"WEATHER_ANALYSIS":await P();break;case"MARKET_FORECAST":await M();break;default:console.log("Action IA:",le,Q)}};return r?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse space-y-6",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((le,Q)=>n.jsx("div",{className:"h-32 bg-gray-200 rounded"},Q))})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-emerald-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[n.jsxs(Ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-4",children:"Tableau de Bord Agriculteur"}),n.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Grez vos exploitations avec des insights IA avancs et un suivi en temps rel"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{title:"Revenus Totaux",value:G(dashboardData.totalRevenue),change:dashboardData.revenueGrowth,icon:Br,color:"from-green-500 to-emerald-600"},{title:"Surface Cultive",value:`${K(dashboardData.totalArea)} ha`,change:dashboardData.areaGrowth,icon:TreePine,color:"from-blue-500 to-cyan-600"},{title:"Rendement Moyen",value:`${dashboardData.averageYield} T/ha`,change:dashboardData.yieldGrowth,icon:na,color:"from-purple-500 to-pink-600"},{title:"Durabilit",value:dashboardData.sustainabilityScore,change:dashboardData.sustainabilityGrowth,icon:vg,color:"from-emerald-500 to-green-600"}].map((le,Q)=>n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Q*.1},children:n.jsxs(he,{className:"relative overflow-hidden hover:shadow-xl transition-all duration-300 border-0",children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${le.color} opacity-5`}),n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:le.title}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.value}),n.jsxs("div",{className:"flex items-center mt-2",children:[ie(le.change),n.jsxs("span",{className:`text-sm ml-1 ${le.change>0?"text-green-600":"text-red-600"}`,children:[Math.abs(le.change),"% ce mois"]})]})]}),n.jsx("div",{className:`p-3 rounded-full bg-gradient-to-r ${le.color}`,children:n.jsx(le.icon,{className:"h-6 w-6 text-white"})})]})})]})},Q))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:n.jsxs(he,{className:"h-full",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Tp,{className:"h-5 w-5"}),"Conditions Mtorologiques"]})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-2 gap-4",children:dashboardData.weatherData.map((le,Q)=>n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[X(le.forecast),n.jsx("p",{className:"font-medium mt-2",children:le.day}),n.jsx("p",{className:"text-sm text-gray-600",children:le.forecast}),n.jsxs("p",{className:"text-lg font-bold",children:[le.temperature,"C"]}),n.jsxs("p",{className:"text-xs text-blue-600",children:[le.rainfall,"mm"]})]},Q))})})]})}),n.jsx(Ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:n.jsxs(he,{className:"h-full",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Zs,{className:"h-5 w-5"}),"Insights IA"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:dashboardData.aiInsights.map((le,Q)=>n.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border-l-4 border-blue-500",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(le.icon,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:le.title}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:le.description}),n.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Confiance: ",le.confidence,"%"]})]})]})},Q))})})]})})]}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Az,{className:"h-5 w-5"}),"Gestion des Cultures"]})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:dashboardData.crops.map((le,Q)=>n.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:le.name}),xe(le.status)]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Surface:"}),n.jsxs("span",{className:"text-sm font-medium",children:[le.area," ha"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Rendement prvu:"}),n.jsxs("span",{className:"text-sm font-medium",children:[le.expectedYield," T/ha"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Valeur estime:"}),n.jsx("span",{className:"text-sm font-medium",children:G(le.estimatedValue)})]}),n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{children:[le.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${le.progress}%`}})})]})]})]},Q))})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(FlaskConical,{className:"h-5 w-5"}),"Analyse du Sol"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:dashboardData.soilAnalysis.map((le,Q)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(le.icon,{className:`h-5 w-5 ${B(le)}`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:le.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Optimal: ",le.optimal," ppm"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`font-bold ${B(le)}`,children:[le.level," ppm"]}),n.jsx("p",{className:"text-xs text-gray-500",children:le.recommendation})]})]},Q))})})]})}),n.jsx(Ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(kz,{className:"h-5 w-5"}),"tat des quipements"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:dashboardData.equipment.map((le,Q)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(le.icon,{className:"h-5 w-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:le.name}),n.jsx("p",{className:"text-sm text-gray-600",children:le.type})]})]}),n.jsxs("div",{className:"text-right",children:[xe(le.status),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Dernire maintenance: ",le.lastMaintenance]})]})]},Q))})})]})})]}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(DollarSign,{className:"h-5 w-5"}),"Prix du March"]})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:dashboardData.marketPrices.map((le,Q)=>n.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:le.name}),ie(le.weekChange)]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G(le.currentPrice)}),n.jsx("p",{className:"text-sm text-gray-600",children:"par tonne"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-gray-500",children:"7 jours:"}),n.jsxs("span",{className:`text-xs font-medium ${le.weekChange>0?"text-green-600":"text-red-600"}`,children:[le.weekChange>0?"+":"",ee(le.weekChange)]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:`text-xs ${me(le.weekChange).color}`,children:me(le.weekChange).text})})]})]},Q))})})]})}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(vg,{className:"h-5 w-5"}),"Mtriques de Durabilit"]})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:dashboardData.sustainabilityMetrics.map((le,Q)=>n.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border",children:[n.jsx(le.icon,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:le.name}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:le.value}),n.jsx("p",{className:"text-sm text-gray-600",children:le.unit}),ye(le.rating)]},Q))})})]})}),n.jsx(GlobalChatbot,{onActionRequest:Ne,contextData:{userType:"agriculteur",dashboardData,currentWeather:dashboardData.weatherData[0],marketTrends:dashboardData.marketPrices}})]})})},I9e=[{title:"Dashboard",icon:na,href:"/dashboard/banque",description:"Vue d'ensemble banque"},{title:"Garanties",icon:Ys,href:"/dashboard/banque/guarantees",description:"Garanties bancaires"},{title:"Financements",icon:fs,href:"/dashboard/banque/financements",description:"Demandes de financement"},{title:"valuations",icon:lx,href:"/dashboard/banque/evaluations",description:"valuations foncires"},{title:"Documents",icon:Cr,href:"/dashboard/banque/documents",description:"Gestion des documents"},{title:"Clients",icon:bs,href:"/dashboard/banque/clients",description:"Liste des clients"},{title:"Dossiers",icon:hk,href:"/dashboard/banque/dossiers",description:"Dossiers en cours"}],R9e=({isCollapsed:e,onToggle:t})=>{const r=Di();return n.jsxs("div",{className:`fixed left-0 top-0 h-full bg-white border-r border-gray-200 transition-all duration-300 z-50 ${e?"w-16":"w-64"}`,children:[n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:`font-bold text-lg ${e?"hidden":"block"}`,children:"Banque"}),n.jsx(Y,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(gk,{className:"h-4 w-4"})})]})}),n.jsx(nT,{}),n.jsx("div",{className:"p-2",children:n.jsx("nav",{className:"space-y-1",children:I9e.map(s=>n.jsxs(dt,{to:s.href,className:`flex items-center gap-3 px-3 py-2 text-sm rounded-lg hover:bg-gray-100 transition-colors ${r.pathname.startsWith(s.href)?"bg-gray-100 font-semibold":""}`,children:[n.jsx(s.icon,{className:"h-4 w-4 flex-shrink-0"}),!e&&n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:s.title}),n.jsx("span",{className:"text-xs text-gray-500",children:s.description})]})]},s.href))})})]})},D9e=()=>{x.useEffect(()=>{const o=[];try{const l=supabase.channel("financing_requests_changes").on("postgres_changes",{event:"*",schema:"public",table:"financing_requests",filter:`bank_id=eq.${(user==null?void 0:user.id)||"000"}`},()=>e()),c=supabase.channel("bank_guarantees_changes").on("postgres_changes",{event:"*",schema:"public",table:"bank_guarantees",filter:`bank_id=eq.${(user==null?void 0:user.id)||"000"}`},()=>e()),u=supabase.channel("land_evaluations_changes").on("postgres_changes",{event:"*",schema:"public",table:"land_evaluations",filter:`evaluator_id=eq.${(user==null?void 0:user.id)||"000"}`},()=>e());o.push(l,c,u),o.forEach(d=>d.subscribe())}catch{}return()=>{o.forEach(l=>{try{supabase.removeChannel(l)}catch{}})}},[user]);const e=async()=>{setLoading(!0);try{const{data:{user:o}}=await supabase.auth.getUser(),{data:l}=await supabase.from("bank_guarantees").select(`
          *,
          users(full_name, email),
          parcels(reference, location, price)
        `).eq("bank_id",o.id),{data:c}=await supabase.from("land_evaluations").select(`
          *,
          parcels(reference, location, price),
          users(full_name, email)
        `).eq("evaluator_id",o.id),{data:u}=await supabase.from("financing_requests").select(`
          *,
          users(full_name, email),
          parcels(reference, location, price)
        `).eq("bank_id",o.id),{data:d}=await supabase.from("compliance_checks").select("*").eq("entity_type","bank").eq("entity_id",o.id),h=(l==null?void 0:l.filter(A=>A.status==="active").length)||0,m=(c==null?void 0:c.filter(A=>A.status==="pending").length)||0,p=(u==null?void 0:u.filter(A=>A.status==="pending").length)||0,v=(d==null?void 0:d.filter(A=>A.status==="conforme").length)||0,g=(d==null?void 0:d.length)||1,y=Math.round(v/g*100),j=(l==null?void 0:l.reduce((A,S)=>A+(S.guarantee_amount||0),0))||0,_=await t(l,u),w=await r();setStats({activeGuarantees:h,pendingEvaluations:m,fundingRequests:p,complianceRate:y,totalExposure:j,securityScore:stats.securityScore}),setGuarantees(l||[]),setEvaluations(c||[]),setFundingRequests(u||[]),setRiskAnalysis(_),setMarketTrends(w)}catch(o){console.error("Erreur chargement dashboard banque:",o)}finally{setLoading(!1)}},t=async(o,l)=>{try{const c=[];if(o&&o.length>0){const d=o.map(p=>{var v;return(v=p.parcels)==null?void 0:v.location}).filter(Boolean).reduce((p,v)=>{const g=v.split(",")[0];return p[g]=(p[g]||0)+1,p},{}),m=Math.max(...Object.values(d))/o.length;m>.3&&c.push({type:"geographic",level:"medium",title:"Concentration gographique leve",description:`${Math.round(m*100)}% des garanties dans une mme zone`,recommendation:"Diversifiez votre portefeuille gographique"})}if(o&&o.length>0){const u=o.map(m=>m.guarantee_amount).filter(Boolean),d=u.reduce((m,p)=>m+p,0)/u.length,h=u.filter(m=>m>d*2).length;h>u.length*.2&&c.push({type:"financial",level:"high",title:"Exposition aux gros montants",description:`${h} garanties dpassent 200% de la moyenne`,recommendation:"Rvaluez les limites d'exposition"})}if(l&&l.length>0){const u=l.filter(d=>{const h=new Date(d.created_at),p=(new Date-h)/(1e3*60*60*24);return d.status==="pending"&&p>30});u.length>0&&c.push({type:"operational",level:"medium",title:"Dlais de traitement longs",description:`${u.length} demandes en attente depuis plus de 30 jours`,recommendation:"Acclrez le processus de traitement"})}return c}catch(c){return console.error("Erreur analyse des risques:",c),[]}},r=async()=>{try{const{data:o}=await supabase.from("transactions").select("amount, created_at").gte("created_at",new Date(Date.now()-7776e6).toISOString()).eq("status","completed");if(!o||o.length===0)return[{type:"info",title:"March stable",description:"Donnes insuffisantes pour analyse de tendance",trend:"stable"}];const l=o.reduce((d,h)=>{const m=new Date(h.created_at).toISOString().slice(0,7);return d[m]||(d[m]={total:0,count:0}),d[m].total+=h.amount,d[m].count+=1,d},{}),c=Object.keys(l).sort(),u=[];if(c.length>=2){const d=l[c[c.length-1]],h=l[c[c.length-2]],m=(d.count-h.count)/h.count*100,p=(d.total-h.total)/h.total*100;u.push({type:"volume",title:"Volume des transactions",description:`${m>0?"+":""}${m.toFixed(1)}% ce mois`,trend:m>0?"up":"down"}),u.push({type:"value",title:"Valeur des transactions",description:`${p>0?"+":""}${p.toFixed(1)}% ce mois`,trend:p>0?"up":"down"})}return u}catch(o){return console.error("Erreur analyse tendances:",o),[]}},s=o=>{switch(o){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-orange-100 text-orange-800 border-orange-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},i=o=>{switch(o){case"up":return TrendingUp;case"down":return Target;default:return BarChart3}},a=async(o,l,c={})=>{if(!user)return;const u=`${o}-${l}`;try{setActionBusy(u);let d;o==="financing-approve"&&(d=await SupabaseDataService.updateFinancingRequestStatus(l,"approved",user.id,c.note||null)),o==="financing-reject"&&(d=await SupabaseDataService.updateFinancingRequestStatus(l,"rejected",user.id,c.note||null)),o==="guarantee-activate"&&(d=await SupabaseDataService.updateBankGuaranteeStatus(l,"active",user.id)),o==="guarantee-close"&&(d=await SupabaseDataService.updateBankGuaranteeStatus(l,"closed",user.id)),o==="evaluation-complete"&&(d=await SupabaseDataService.completeLandEvaluation(l,user.id,c.value||null,c.report||null)),d&&((d.guarantee_amount!==void 0||o.startsWith("guarantee"))&&setGuarantees(h=>h.map(m=>m.id===l?{...m,...d}:m)),(d.decision_note!==void 0||o.startsWith("financing"))&&setFundingRequests(h=>h.map(m=>m.id===l?{...m,...d}:m)),(d.estimated_value!==void 0||o.startsWith("evaluation"))&&setEvaluations(h=>h.map(m=>m.id===l?{...m,...d}:m))),toast({title:"Action effectue",description:u})}catch(d){console.error(d),toast({variant:"destructive",title:"Erreur",description:"Action impossible"})}finally{setActionBusy(null)}};return n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(R9e,{isCollapsed:sidebarCollapsed,onToggle:()=>setSidebarCollapsed(!sidebarCollapsed)}),n.jsx("div",{className:`flex-1 transition-all duration-300 ${sidebarCollapsed?"ml-16":"ml-64"}`,children:n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsx(Dialog,{open:isTimelineOpen,onOpenChange:setIsTimelineOpen,children:n.jsxs(DialogContent,{className:"max-w-2xl",children:[n.jsxs(DialogHeader,{children:[n.jsx(DialogTitle,{children:"Timeline de la parcelle"}),n.jsx(DialogDescription,{children:"Suivi complet des vnements de la parcelle"})]}),timelineParcelId&&n.jsx(ParcelTimeline,{parcelId:timelineParcelId})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(AlertTriangle,{className:"h-5 w-5 text-red-500"}),"Analyse des Risques IA"]})}),n.jsx(ve,{children:riskAnalysis.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(CheckCircle,{className:"h-12 w-12 mx-auto mb-4 text-green-400"}),n.jsx("p",{className:"text-gray-500",children:"Aucun risque majeur dtect"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Portefeuille bien diversifi"})]}):n.jsx("div",{className:"space-y-3",children:riskAnalysis.map((o,l)=>n.jsx(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-3 rounded-lg border ${s(o.level)}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:o.title}),n.jsx("p",{className:"text-sm opacity-80 mt-1",children:o.description}),n.jsxs("p",{className:"text-xs mt-2 font-medium",children:["Recommandation: ",o.recommendation]})]}),n.jsx(Ge,{variant:"outline",className:"text-xs",children:o.level})]})},l))})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(BarChart3,{className:"h-5 w-5 text-blue-500"}),"Tendances du March"]})}),n.jsx(ve,{children:marketTrends.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(BarChart3,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-gray-500",children:"Analyse en cours..."})]}):n.jsx("div",{className:"space-y-4",children:marketTrends.map((o,l)=>{const c=i(o.trend);return n.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(c,{className:`h-5 w-5 ${o.trend==="up"?"text-green-500":o.trend==="down"?"text-red-500":"text-blue-500"}`}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:o.title}),n.jsx("p",{className:"text-sm text-gray-600",children:o.description})]})]}),n.jsx(Ge,{className:o.trend==="up"?"bg-green-100 text-green-800":o.trend==="down"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",children:o.trend})]},l)})})})]})]}),n.jsx(AntiFraudDashboard,{userRole:"banque",dashboardContext:{userId:user==null?void 0:user.id,userType:"banque",securityLevel:"maximum",guaranteesCount:stats.activeGuarantees,totalExposure:stats.totalExposure}}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Demandes de Financement"})}),n.jsx(ve,{children:fundingRequests.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune demande"}):n.jsx("div",{className:"space-y-3",children:fundingRequests.slice(0,6).map(o=>{var l,c;return n.jsxs("div",{className:"border rounded p-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"font-medium",children:["#",o.id]}),n.jsx(Ge,{variant:o.status==="approved"?"success":o.status==="rejected"?"destructive":"secondary",children:o.status})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(l=o.parcels)==null?void 0:l.reference,"  ",(c=o.amount)==null?void 0:c.toLocaleString()," XOF"]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>{var u;setTimelineParcelId(((u=o.parcels)==null?void 0:u.id)||o.parcel_id),setIsTimelineOpen(!0)},children:"Timeline"}),o.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{size:"xs",disabled:actionBusy===`financing-approve-${o.id}`,onClick:()=>a("financing-approve",o.id),children:"Approuver"}),n.jsx(Y,{size:"xs",variant:"destructive",disabled:actionBusy===`financing-reject-${o.id}`,onClick:()=>a("financing-reject",o.id),children:"Refuser"})]})]})]},o.id)})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Garanties"})}),n.jsx(ve,{children:guarantees.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune garantie"}):n.jsx("div",{className:"space-y-3",children:guarantees.slice(0,6).map(o=>{var l,c;return n.jsxs("div",{className:"border rounded p-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["#",o.id]}),n.jsx(Ge,{variant:o.status==="active"?"success":o.status==="closed"?"secondary":"outline",children:o.status})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(l=o.parcels)==null?void 0:l.reference,"  ",(c=o.guarantee_amount)==null?void 0:c.toLocaleString()," XOF"]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>{var u;setTimelineParcelId(((u=o.parcels)==null?void 0:u.id)||o.parcel_id),setIsTimelineOpen(!0)},children:"Timeline"}),o.status!=="closed"&&n.jsxs(n.Fragment,{children:[o.status!=="active"&&n.jsx(Y,{size:"xs",disabled:actionBusy===`guarantee-activate-${o.id}`,onClick:()=>a("guarantee-activate",o.id),children:"Activer"}),n.jsx(Y,{size:"xs",variant:"outline",disabled:actionBusy===`guarantee-close-${o.id}`,onClick:()=>a("guarantee-close",o.id),children:"Clore"})]})]})]},o.id)})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"valuations Foncires"})}),n.jsx(ve,{children:evaluations.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune valuation"}):n.jsx("div",{className:"space-y-3",children:evaluations.slice(0,6).map(o=>{var l;return n.jsxs("div",{className:"border rounded p-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["#",o.id]}),n.jsx(Ge,{variant:o.status==="completed"?"success":"secondary",children:o.status})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(l=o.parcels)==null?void 0:l.reference,"  ",o.estimated_value?o.estimated_value.toLocaleString()+" XOF":""]}),o.status==="pending"&&n.jsx("div",{className:"mt-2",children:n.jsx(Y,{size:"xs",disabled:actionBusy===`evaluation-complete-${o.id}`,onClick:()=>a("evaluation-complete",o.id),children:"Clturer"})})]},o.id)})})})]})]}),n.jsx(AIAssistantWidget,{userRole:"banque",context:{userId:user==null?void 0:user.id,bankingData:{guarantees:stats.activeGuarantees,evaluations:stats.pendingEvaluations,requests:stats.fundingRequests,compliance:stats.complianceRate},riskProfile:riskAnalysis}})]})})]})};var eN="Tabs",[$9e,qHe]=ws(eN,[px]),YX=px(),[F9e,f3]=$9e(eN),JX=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Ch(l),[h,m]=Ri({prop:s,onChange:i,defaultProp:a??"",caller:eN});return n.jsx(F9e,{scope:r,baseId:ka(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:n.jsx(_t.div,{dir:d,"data-orientation":o,...u,ref:t})})});JX.displayName=eN;var QX="TabsList",eY=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...i}=e,a=f3(QX,r),o=YX(r);return n.jsx(Uk,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:n.jsx(_t.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});eY.displayName=QX;var tY="TabsTrigger",rY=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:i=!1,...a}=e,o=f3(tY,r),l=YX(r),c=iY(o.baseId,s),u=aY(o.baseId,s),d=s===o.value;return n.jsx(Hk,{asChild:!0,...l,focusable:!i,active:d,children:n.jsx(_t.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:ft(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:ft(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:ft(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(s)})})})});rY.displayName=tY;var nY="TabsContent",sY=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:i,children:a,...o}=e,l=f3(nY,r),c=iY(l.baseId,s),u=aY(l.baseId,s),d=s===l.value,h=x.useRef(d);return x.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),n.jsx(hi,{present:i||d,children:({present:m})=>n.jsx(_t.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});sY.displayName=nY;function iY(e,t){return`${e}-trigger-${t}`}function aY(e,t){return`${e}-content-${t}`}var z9e=JX,oY=eY,lY=rY,cY=sY;const uY=z9e,m3=x.forwardRef(({className:e,...t},r)=>n.jsx(oY,{ref:r,className:st("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));m3.displayName=oY.displayName;const _u=x.forwardRef(({className:e,...t},r)=>n.jsx(lY,{ref:r,className:st("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));_u.displayName=lY.displayName;const dY=x.forwardRef(({className:e,...t},r)=>n.jsx(cY,{ref:r,className:st("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));dY.displayName=cY.displayName;const p3=({documents:e=[]})=>e.length?n.jsxs(he,{className:"mt-8",children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Portefeuille documentaire communal"})}),n.jsx(ve,{children:n.jsx("ul",{className:"divide-y",children:e.map((t,r)=>n.jsxs("li",{className:"flex items-center justify-between py-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:t.name||t.filename||`Document ${r+1}`}),t.type&&n.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",t.type,")"]})]}),n.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[n.jsx(Tl,{className:"h-4 w-4"})," Tlcharger"]})]},t.id||r))})})]}):n.jsx("div",{className:"text-muted-foreground text-sm",children:"Aucun document disponible."});function en(e){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(e)}var Ei=Uint8Array,to=Uint16Array,g3=Int32Array,tN=new Ei([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rN=new Ei([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ZC=new Ei([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hY=function(e,t){for(var r=new to(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var i=new g3(r[30]),s=1;s<30;++s)for(var a=r[s];a<r[s+1];++a)i[a]=a-r[s]<<5|s;return{b:r,r:i}},fY=hY(tN,2),mY=fY.b,XC=fY.r;mY[28]=258,XC[258]=28;var pY=hY(rN,0),B9e=pY.b,V8=pY.r,YC=new to(32768);for(var Pn=0;Pn<32768;++Pn){var kd=(Pn&43690)>>1|(Pn&21845)<<1;kd=(kd&52428)>>2|(kd&13107)<<2,kd=(kd&61680)>>4|(kd&3855)<<4,YC[Pn]=((kd&65280)>>8|(kd&255)<<8)>>1}var Nc=function(e,t,r){for(var s=e.length,i=0,a=new to(t);i<s;++i)e[i]&&++a[e[i]-1];var o=new to(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(r){l=new to(1<<t);var c=15-t;for(i=0;i<s;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],h=o[e[i]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)l[YC[h]>>c]=u}else for(l=new to(s),i=0;i<s;++i)e[i]&&(l[i]=YC[o[e[i]-1]++]>>15-e[i]);return l},xh=new Ei(288);for(var Pn=0;Pn<144;++Pn)xh[Pn]=8;for(var Pn=144;Pn<256;++Pn)xh[Pn]=9;for(var Pn=256;Pn<280;++Pn)xh[Pn]=7;for(var Pn=280;Pn<288;++Pn)xh[Pn]=8;var g0=new Ei(32);for(var Pn=0;Pn<32;++Pn)g0[Pn]=5;var q9e=Nc(xh,9,0),V9e=Nc(xh,9,1),U9e=Nc(g0,5,0),H9e=Nc(g0,5,1),oS=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},dl=function(e,t,r){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&r},lS=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},x3=function(e){return(e+7)/8|0},gY=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new Ei(e.subarray(t,r))},W9e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gl=function(e,t,r){var s=new Error(t||W9e[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,gl),!r)throw s;return s},G9e=function(e,t,r,s){var i=e.length,a=s?s.length:0;if(!i||t.f&&!t.l)return r||new Ei(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Ei(i*3));var u=function(se){var Z=r.length;if(se>Z){var je=new Ei(Math.max(Z*2,se));je.set(r),r=je}},d=t.f||0,h=t.p||0,m=t.b||0,p=t.l,v=t.d,g=t.m,y=t.n,j=i*8;do{if(!p){d=dl(e,h,1);var _=dl(e,h+1,3);if(h+=3,_)if(_==1)p=V9e,v=H9e,g=9,y=5;else if(_==2){var P=dl(e,h,31)+257,C=dl(e,h+10,15)+4,T=P+dl(e,h+5,31)+1;h+=14;for(var M=new Ei(T),z=new Ei(19),O=0;O<C;++O)z[ZC[O]]=dl(e,h+O*3,7);h+=C*3;for(var I=oS(z),q=(1<<I)-1,F=Nc(z,I,1),O=0;O<T;){var W=F[dl(e,h,q)];h+=W&15;var w=W>>4;if(w<16)M[O++]=w;else{var V=0,ne=0;for(w==16?(ne=3+dl(e,h,3),h+=2,V=M[O-1]):w==17?(ne=3+dl(e,h,7),h+=3):w==18&&(ne=11+dl(e,h,127),h+=7);ne--;)M[O++]=V}}var G=M.subarray(0,P),K=M.subarray(P);g=oS(G),y=oS(K),p=Nc(G,g,1),v=Nc(K,y,1)}else gl(1);else{var w=x3(h)+4,A=e[w-4]|e[w-3]<<8,S=w+A;if(S>i){c&&gl(0);break}l&&u(m+A),r.set(e.subarray(w,S),m),t.b=m+=A,t.p=h=S*8,t.f=d;continue}if(h>j){c&&gl(0);break}}l&&u(m+131072);for(var ee=(1<<g)-1,xe=(1<<y)-1,B=h;;B=h){var V=p[lS(e,h)&ee],X=V>>4;if(h+=V&15,h>j){c&&gl(0);break}if(V||gl(2),X<256)r[m++]=X;else if(X==256){B=h,p=null;break}else{var ie=X-254;if(X>264){var O=X-257,me=tN[O];ie=dl(e,h,(1<<me)-1)+mY[O],h+=me}var ye=v[lS(e,h)&xe],Ne=ye>>4;ye||gl(3),h+=ye&15;var K=B9e[Ne];if(Ne>3){var me=rN[Ne];K+=lS(e,h)&(1<<me)-1,h+=me}if(h>j){c&&gl(0);break}l&&u(m+131072);var le=m+ie;if(m<K){var Q=a-K,J=Math.min(K,le);for(Q+m<0&&gl(3);m<J;++m)r[m]=s[Q+m]}for(;m<le;++m)r[m]=r[m-K]}}t.l=p,t.p=B,t.b=m,t.f=d,p&&(d=1,t.m=g,t.d=v,t.n=y)}while(!d);return m!=r.length&&o?gY(r,0,m):r.subarray(0,m)},cu=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8},bv=function(e,t,r){r<<=t&7;var s=t/8|0;e[s]|=r,e[s+1]|=r>>8,e[s+2]|=r>>16},cS=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var i=r.length,a=r.slice();if(!i)return{t:vY,l:0};if(i==1){var o=new Ei(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,P){return S.f-P.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=i-1;)l=r[r[u].f<r[h].f?u++:h++],c=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var m=a[0].s,s=1;s<i;++s)a[s].s>m&&(m=a[s].s);var p=new to(m+1),v=JC(r[d-1],p,0);if(v>t){var s=0,g=0,y=v-t,j=1<<y;for(a.sort(function(P,C){return p[C.s]-p[P.s]||P.f-C.f});s<i;++s){var _=a[s].s;if(p[_]>t)g+=j-(1<<v-p[_]),p[_]=t;else break}for(g>>=y;g>0;){var w=a[s].s;p[w]<t?g-=1<<t-p[w]++-1:++s}for(;s>=0&&g;--s){var A=a[s].s;p[A]==t&&(--p[A],++g)}v=t}return{t:new Ei(p),l:v}},JC=function(e,t,r){return e.s==-1?Math.max(JC(e.l,t,r+1),JC(e.r,t,r+1)):t[e.s]=r},U8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new to(++t),s=0,i=e[0],a=1,o=function(c){r[s++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:r.subarray(0,s),n:t}},jv=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},xY=function(e,t,r){var s=r.length,i=x3(t+2);e[i]=s&255,e[i+1]=s>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<s;++a)e[i+a+4]=r[a];return(i+4+s)*8},H8=function(e,t,r,s,i,a,o,l,c,u,d){cu(t,d++,r),++i[256];for(var h=cS(i,15),m=h.t,p=h.l,v=cS(a,15),g=v.t,y=v.l,j=U8(m),_=j.c,w=j.n,A=U8(g),S=A.c,P=A.n,C=new to(19),T=0;T<_.length;++T)++C[_[T]&31];for(var T=0;T<S.length;++T)++C[S[T]&31];for(var M=cS(C,7),z=M.t,O=M.l,I=19;I>4&&!z[ZC[I-1]];--I);var q=u+5<<3,F=jv(i,xh)+jv(a,g0)+o,W=jv(i,m)+jv(a,g)+o+14+3*I+jv(C,z)+2*C[16]+3*C[17]+7*C[18];if(c>=0&&q<=F&&q<=W)return xY(t,d,e.subarray(c,c+u));var V,ne,G,K;if(cu(t,d,1+(W<F)),d+=2,W<F){V=Nc(m,p,0),ne=m,G=Nc(g,y,0),K=g;var ee=Nc(z,O,0);cu(t,d,w-257),cu(t,d+5,P-1),cu(t,d+10,I-4),d+=14;for(var T=0;T<I;++T)cu(t,d+3*T,z[ZC[T]]);d+=3*I;for(var xe=[_,S],B=0;B<2;++B)for(var X=xe[B],T=0;T<X.length;++T){var ie=X[T]&31;cu(t,d,ee[ie]),d+=z[ie],ie>15&&(cu(t,d,X[T]>>5&127),d+=X[T]>>12)}}else V=q9e,ne=xh,G=U9e,K=g0;for(var T=0;T<l;++T){var me=s[T];if(me>255){var ie=me>>18&31;bv(t,d,V[ie+257]),d+=ne[ie+257],ie>7&&(cu(t,d,me>>23&31),d+=tN[ie]);var ye=me&31;bv(t,d,G[ye]),d+=K[ye],ye>3&&(bv(t,d,me>>5&8191),d+=rN[ye])}else bv(t,d,V[me]),d+=ne[me]}return bv(t,d,V[256]),d+ne[256]},K9e=new g3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vY=new Ei(0),Z9e=function(e,t,r,s,i,a){var o=a.z||e.length,l=new Ei(s+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(s,l.length-i),u=a.l,d=(a.r||0)&7;if(t){d&&(c[0]=a.r>>3);for(var h=K9e[t-1],m=h>>13,p=h&8191,v=(1<<r)-1,g=a.p||new to(32768),y=a.h||new to(v+1),j=Math.ceil(r/3),_=2*j,w=function(Ee){return(e[Ee]^e[Ee+1]<<j^e[Ee+2]<<_)&v},A=new g3(25e3),S=new to(288),P=new to(32),C=0,T=0,M=a.i||0,z=0,O=a.w||0,I=0;M+2<o;++M){var q=w(M),F=M&32767,W=y[q];if(g[F]=W,y[q]=F,O<=M){var V=o-M;if((C>7e3||z>24576)&&(V>423||!u)){d=H8(e,c,0,A,S,P,T,z,I,M-I,d),z=C=T=0,I=M;for(var ne=0;ne<286;++ne)S[ne]=0;for(var ne=0;ne<30;++ne)P[ne]=0}var G=2,K=0,ee=p,xe=F-W&32767;if(V>2&&q==w(M-xe))for(var B=Math.min(m,V)-1,X=Math.min(32767,M),ie=Math.min(258,V);xe<=X&&--ee&&F!=W;){if(e[M+G]==e[M+G-xe]){for(var me=0;me<ie&&e[M+me]==e[M+me-xe];++me);if(me>G){if(G=me,K=xe,me>B)break;for(var ye=Math.min(xe,me-2),Ne=0,ne=0;ne<ye;++ne){var le=M-xe+ne&32767,Q=g[le],J=le-Q&32767;J>Ne&&(Ne=J,W=le)}}}F=W,W=g[F],xe+=F-W&32767}if(K){A[z++]=268435456|XC[G]<<18|V8[K];var se=XC[G]&31,Z=V8[K]&31;T+=tN[se]+rN[Z],++S[257+se],++P[Z],O=M+G,++C}else A[z++]=e[M],++S[e[M]]}}for(M=Math.max(M,O);M<o;++M)A[z++]=e[M],++S[e[M]];d=H8(e,c,u,A,S,P,T,z,I,M-I,d),u||(a.r=d&7|c[d/8|0]<<3,d-=7,a.h=y,a.p=g,a.i=M,a.w=O)}else{for(var M=a.w||0;M<o+u;M+=65535){var je=M+65535;je>=o&&(c[d/8|0]=u,je=o),d=xY(c,d+1,e.subarray(M,je))}a.i=o}return gY(l,0,s+x3(d)+i)},yY=function(){var e=1,t=0;return{p:function(r){for(var s=e,i=t,a=r.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=s+=r[o];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}e=s,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},X9e=function(e,t,r,s,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new Ei(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return Z9e(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,s,i)},bY=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Y9e=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=yY();i.p(t.dictionary),bY(e,2,i.d())}},J9e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&gl(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&gl(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function QC(e,t){t||(t={});var r=yY();r.p(e);var s=X9e(e,t,t.dictionary?6:2,4);return Y9e(s,t),bY(s,s.length-4,r.d()),s}function Q9e(e,t){return G9e(e.subarray(J9e(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var eVe=typeof TextDecoder<"u"&&new TextDecoder,tVe=0;try{eVe.decode(vY,{stream:!0}),tVe=1}catch{}var Jt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uS(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var hn={log:uS,warn:function(e){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):uS.call(null,arguments))},error:function(e){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):uS(e))}};function dS(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){bf(s.response,t,r)},s.onerror=function(){hn.error("could not download file")},s.send()}function W8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function c1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ry,e4,bf=Jt.saveAs||((typeof window>"u"?"undefined":en(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Jt.URL||Jt.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?W8(i.href)?dS(e,t,r):c1(i,i.target="_blank"):c1(i)):(i.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){c1(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(W8(e))dS(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){c1(s)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:en(a)!=="object"&&(hn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return dS(e,t,r);var i=e.type==="application/octet-stream",a=/constructor/i.test(Jt.HTMLElement)||Jt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":en(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=d:location=d,s=null},l.readAsDataURL(e)}else{var c=Jt.URL||Jt.webkitURL,u=c.createObjectURL(e);s?s.location=u:location.href=u,s=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jY(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<r.length;s++){var i=r[s].re,a=r[s].process,o=i.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hS(e,t){var r=e[0],s=e[1],i=e[2],a=e[3];r=wi(r,s,i,a,t[0],7,-680876936),a=wi(a,r,s,i,t[1],12,-389564586),i=wi(i,a,r,s,t[2],17,606105819),s=wi(s,i,a,r,t[3],22,-1044525330),r=wi(r,s,i,a,t[4],7,-176418897),a=wi(a,r,s,i,t[5],12,1200080426),i=wi(i,a,r,s,t[6],17,-1473231341),s=wi(s,i,a,r,t[7],22,-45705983),r=wi(r,s,i,a,t[8],7,1770035416),a=wi(a,r,s,i,t[9],12,-1958414417),i=wi(i,a,r,s,t[10],17,-42063),s=wi(s,i,a,r,t[11],22,-1990404162),r=wi(r,s,i,a,t[12],7,1804603682),a=wi(a,r,s,i,t[13],12,-40341101),i=wi(i,a,r,s,t[14],17,-1502002290),r=_i(r,s=wi(s,i,a,r,t[15],22,1236535329),i,a,t[1],5,-165796510),a=_i(a,r,s,i,t[6],9,-1069501632),i=_i(i,a,r,s,t[11],14,643717713),s=_i(s,i,a,r,t[0],20,-373897302),r=_i(r,s,i,a,t[5],5,-701558691),a=_i(a,r,s,i,t[10],9,38016083),i=_i(i,a,r,s,t[15],14,-660478335),s=_i(s,i,a,r,t[4],20,-405537848),r=_i(r,s,i,a,t[9],5,568446438),a=_i(a,r,s,i,t[14],9,-1019803690),i=_i(i,a,r,s,t[3],14,-187363961),s=_i(s,i,a,r,t[8],20,1163531501),r=_i(r,s,i,a,t[13],5,-1444681467),a=_i(a,r,s,i,t[2],9,-51403784),i=_i(i,a,r,s,t[7],14,1735328473),r=Ni(r,s=_i(s,i,a,r,t[12],20,-1926607734),i,a,t[5],4,-378558),a=Ni(a,r,s,i,t[8],11,-2022574463),i=Ni(i,a,r,s,t[11],16,1839030562),s=Ni(s,i,a,r,t[14],23,-35309556),r=Ni(r,s,i,a,t[1],4,-1530992060),a=Ni(a,r,s,i,t[4],11,1272893353),i=Ni(i,a,r,s,t[7],16,-155497632),s=Ni(s,i,a,r,t[10],23,-1094730640),r=Ni(r,s,i,a,t[13],4,681279174),a=Ni(a,r,s,i,t[0],11,-358537222),i=Ni(i,a,r,s,t[3],16,-722521979),s=Ni(s,i,a,r,t[6],23,76029189),r=Ni(r,s,i,a,t[9],4,-640364487),a=Ni(a,r,s,i,t[12],11,-421815835),i=Ni(i,a,r,s,t[15],16,530742520),r=Si(r,s=Ni(s,i,a,r,t[2],23,-995338651),i,a,t[0],6,-198630844),a=Si(a,r,s,i,t[7],10,1126891415),i=Si(i,a,r,s,t[14],15,-1416354905),s=Si(s,i,a,r,t[5],21,-57434055),r=Si(r,s,i,a,t[12],6,1700485571),a=Si(a,r,s,i,t[3],10,-1894986606),i=Si(i,a,r,s,t[10],15,-1051523),s=Si(s,i,a,r,t[1],21,-2054922799),r=Si(r,s,i,a,t[8],6,1873313359),a=Si(a,r,s,i,t[15],10,-30611744),i=Si(i,a,r,s,t[6],15,-1560198380),s=Si(s,i,a,r,t[13],21,1309151649),r=Si(r,s,i,a,t[4],6,-145523070),a=Si(a,r,s,i,t[11],10,-1120210379),i=Si(i,a,r,s,t[2],15,718787259),s=Si(s,i,a,r,t[9],21,-343485551),e[0]=Kd(r,e[0]),e[1]=Kd(s,e[1]),e[2]=Kd(i,e[2]),e[3]=Kd(a,e[3])}function nN(e,t,r,s,i,a){return t=Kd(Kd(t,e),Kd(s,a)),Kd(t<<i|t>>>32-i,r)}function wi(e,t,r,s,i,a,o){return nN(t&r|~t&s,e,t,i,a,o)}function _i(e,t,r,s,i,a,o){return nN(t&s|r&~s,e,t,i,a,o)}function Ni(e,t,r,s,i,a,o){return nN(t^r^s,e,t,i,a,o)}function Si(e,t,r,s,i,a,o){return nN(r^(t|~s),e,t,i,a,o)}function wY(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)hS(s,rVe(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(hS(s,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,hS(s,i),s}function rVe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}ry=Jt.atob.bind(Jt),e4=Jt.btoa.bind(Jt);var G8="0123456789abcdef".split("");function nVe(e){for(var t="",r=0;r<4;r++)t+=G8[e>>8*r+4&15]+G8[e>>8*r&15];return t}function sVe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function t4(e){return wY(e).map(sVe).join("")}var iVe=function(e){for(var t=0;t<e.length;t++)e[t]=nVe(e[t]);return e.join("")}(wY("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kd(e,t){if(iVe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function r4(e,t){var r,s,i,a;if(e!==r){for(var o=(i=e,a=1+(256/e.length>>0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=e,s=l}else l=s;var h=t.length,m=0,p=0,v="";for(c=0;c<h;c++)p=(p+(d=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=d,o=l[(l[m]+l[p])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var K8={print:4,modify:8,copy:16,"annot-forms":32};function gp(e,t,r,s){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(K8.perm!==void 0)throw new Error("Invalid permission: "+l);i+=K8[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=t4(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=r4(this.encryptionKey,this.padding)}function xp(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var i=e.charCodeAt(s);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[s]}return t}function Z8(e){if(en(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,i){if(i=i||!1,typeof r!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[s,!!i],a},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[r]){var o=t[r][a];try{o[0].apply(e,s)}catch(l){Jt.console&&hn.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Gw(e){if(!(this instanceof Gw))return new Gw(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function _Y(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Nf(e,t,r,s,i){if(!(this instanceof Nf))return new Nf(e,t,r,s,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,_Y.call(this,s,i)}function Bp(e,t,r,s,i){if(!(this instanceof Bp))return new Bp(e,t,r,s,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,_Y.call(this,s,i)}function Zt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,u="S",d=null;en(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,i=e.format||i,a=e.compress||e.compressPdf||a,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(a===!0?["FlateEncode"]:o),s=s||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Z8;var v="1.3",g=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(R){v=R};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return y};var j=p.__private__.getPageFormat=function(R){return y[R]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},w=_.COMPAT;function A(){this.saveGraphicsState(),de(new Ht(bt,0,0,-bt,0,Xl()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",w=_.ADVANCED}function S(){this.restoreGraphicsState(),u="S",w=_.COMPAT}var P=p.__private__.combineFontStyleAndFontWeight=function(R,re){if(R=="bold"&&re=="normal"||R=="bold"&&re==400||R=="normal"&&re=="italic"||R=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(R=re==400||re==="normal"?R==="italic"?"italic":"normal":re!=700&&re!=="bold"||R!=="normal"?(re==700?"bold":re)+""+R:"bold"),R};p.advancedAPI=function(R){var re=w===_.COMPAT;return re&&A.call(this),typeof R!="function"||(R(this),re&&S.call(this)),this},p.compatAPI=function(R){var re=w===_.ADVANCED;return re&&S.call(this),typeof R!="function"||(R(this),re&&A.call(this)),this},p.isAdvancedAPI=function(){return w===_.ADVANCED};var C,T=function(R){if(w!==_.ADVANCED)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=p.roundToPrecision=p.__private__.roundToPrecision=function(R,re){var Se=t||re;if(isNaN(R)||isNaN(Se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(Se).replace(/0+$/,"")};C=p.hpf=p.__private__.hpf=typeof c=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return M(R,c)}:c==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return M(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return M(R,16)};var z=p.f2=p.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return M(R,2)},O=p.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return M(R,3)},I=p.scale=p.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return w===_.COMPAT?R*bt:w===_.ADVANCED?R:void 0},q=function(R){return w===_.COMPAT?Xl()-R:w===_.ADVANCED?R:void 0},F=function(R){return I(q(R))};p.__private__.setPrecision=p.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(t=parseInt(R,10))};var W,V="00000000000000000000000000000000",ne=p.__private__.getFileId=function(){return V},G=p.__private__.setFileId=function(R){return V=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ss=new gp(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};p.setFileId=function(R){return G(R),this},p.getFileId=function(){return ne()};var K=p.__private__.convertDateToPDFDate=function(R){var re=R.getTimezoneOffset(),Se=re<0?"+":"-",Le=Math.floor(Math.abs(re/60)),Be=Math.abs(re%60),Ye=[Se,ie(Le),"'",ie(Be),"'"].join("");return["D:",R.getFullYear(),ie(R.getMonth()+1),ie(R.getDate()),ie(R.getHours()),ie(R.getMinutes()),ie(R.getSeconds()),Ye].join("")},ee=p.__private__.convertPDFDateToDate=function(R){var re=parseInt(R.substr(2,4),10),Se=parseInt(R.substr(6,2),10)-1,Le=parseInt(R.substr(8,2),10),Be=parseInt(R.substr(10,2),10),Ye=parseInt(R.substr(12,2),10),ht=parseInt(R.substr(14,2),10);return new Date(re,Se,Le,Be,Ye,ht,0)},xe=p.__private__.setCreationDate=function(R){var re;if(R===void 0&&(R=new Date),R instanceof Date)re=K(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=R}return W=re},B=p.__private__.getCreationDate=function(R){var re=W;return R==="jsDate"&&(re=ee(W)),re};p.setCreationDate=function(R){return xe(R),this},p.getCreationDate=function(R){return B(R)};var X,ie=p.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},me=p.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},ye=0,Ne=[],le=[],Q=0,J=[],se=[],Z=!1,je=le,Ee=function(){ye=0,Q=0,le=[],Ne=[],J=[],xo=St(),da=St()};p.__private__.setCustomOutputDestination=function(R){Z=!0,je=R};var Pe=function(R){Z||(je=R)};p.__private__.resetCustomOutputDestination=function(){Z=!1,je=le};var de=p.__private__.out=function(R){return R=R.toString(),Q+=R.length+1,je.push(R),je},be=p.__private__.write=function(R){return de(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},Ve=p.__private__.getArrayBuffer=function(R){for(var re=R.length,Se=new ArrayBuffer(re),Le=new Uint8Array(Se);re--;)Le[re]=R.charCodeAt(re);return Se},ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ze};var Xe=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(R){return Xe=w===_.ADVANCED?R/bt:R,this};var et,ge=p.__private__.getFontSize=p.getFontSize=function(){return w===_.COMPAT?Xe:Xe*bt},Oe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(R){return Oe=R,this},p.__private__.getR2L=p.getR2L=function(){return Oe};var it,nt=p.__private__.setZoomMode=function(R){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))et=R;else if(isNaN(R)){if(re.indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');et=R}else et=parseInt(R,10)};p.__private__.getZoomMode=function(){return et};var wt,mt=p.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');it=R};p.__private__.getPageMode=function(){return it};var or=p.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');wt=R};p.__private__.getLayoutMode=function(){return wt},p.__private__.setDisplayMode=p.setDisplayMode=function(R,re,Se){return nt(R),or(re),mt(Se),this};var It={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(R){if(Object.keys(It).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return It[R]},p.__private__.getDocumentProperties=function(){return It},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(R){for(var re in It)It.hasOwnProperty(re)&&R[re]&&(It[re]=R[re]);return this},p.__private__.setDocumentProperty=function(R,re){if(Object.keys(It).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return It[R]=re};var Ut,bt,cn,xr,Dr,ur={},Wr={},fi=[],Mr={},qc={},jn={},ca={},mo=null,En=0,rr=[],Ir=new Z8(p),Vc=e.hotfixes||[],_s={},po={},ua=[],Ht=function R(re,Se,Le,Be,Ye,ht){if(!(this instanceof R))return new R(re,Se,Le,Be,Ye,ht);isNaN(re)&&(re=1),isNaN(Se)&&(Se=0),isNaN(Le)&&(Le=0),isNaN(Be)&&(Be=1),isNaN(Ye)&&(Ye=0),isNaN(ht)&&(ht=0),this._matrix=[re,Se,Le,Be,Ye,ht]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ht.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(R)},Ht.prototype.multiply=function(R){var re=R.sx*this.sx+R.shy*this.shx,Se=R.sx*this.shy+R.shy*this.sy,Le=R.shx*this.sx+R.sy*this.shx,Be=R.shx*this.shy+R.sy*this.sy,Ye=R.tx*this.sx+R.ty*this.shx+this.tx,ht=R.tx*this.shy+R.ty*this.sy+this.ty;return new Ht(re,Se,Le,Be,Ye,ht)},Ht.prototype.decompose=function(){var R=this.sx,re=this.shy,Se=this.shx,Le=this.sy,Be=this.tx,Ye=this.ty,ht=Math.sqrt(R*R+re*re),At=(R/=ht)*Se+(re/=ht)*Le;Se-=R*At,Le-=re*At;var Ot=Math.sqrt(Se*Se+Le*Le);return At/=Ot,R*(Le/=Ot)<re*(Se/=Ot)&&(R=-R,re=-re,At=-At,ht=-ht),{scale:new Ht(ht,0,0,Ot,0,0),translate:new Ht(1,0,0,1,Be,Ye),rotate:new Ht(R,re,-re,R,0,0),skew:new Ht(1,0,At,1,0,0)}},Ht.prototype.toString=function(R){return this.join(" ")},Ht.prototype.inversed=function(){var R=this.sx,re=this.shy,Se=this.shx,Le=this.sy,Be=this.tx,Ye=this.ty,ht=1/(R*Le-re*Se),At=Le*ht,Ot=-re*ht,sr=-Se*ht,tr=R*ht;return new Ht(At,Ot,sr,tr,-At*Be-sr*Ye,-Ot*Be-tr*Ye)},Ht.prototype.applyToPoint=function(R){var re=R.x*this.sx+R.y*this.shx+this.tx,Se=R.x*this.shy+R.y*this.sy+this.ty;return new nu(re,Se)},Ht.prototype.applyToRectangle=function(R){var re=this.applyToPoint(R),Se=this.applyToPoint(new nu(R.x+R.w,R.y+R.h));return new ma(re.x,re.y,Se.x-re.x,Se.y-re.y)},Ht.prototype.clone=function(){var R=this.sx,re=this.shy,Se=this.shx,Le=this.sy,Be=this.tx,Ye=this.ty;return new Ht(R,re,Se,Le,Be,Ye)},p.Matrix=Ht;var Fa=p.matrixMult=function(R,re){return re.multiply(R)},go=new Ht(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=go;var mi=function(R,re){if(!qc[R]){var Se=(re instanceof Nf?"Sh":"P")+(Object.keys(Mr).length+1).toString(10);re.id=Se,qc[R]=Se,Mr[Se]=re,Ir.publish("addPattern",re)}};p.ShadingPattern=Nf,p.TilingPattern=Bp,p.addShadingPattern=function(R,re){return T("addShadingPattern()"),mi(R,re),this},p.beginTilingPattern=function(R){T("beginTilingPattern()"),Hh(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},p.endTilingPattern=function(R,re){T("endTilingPattern()"),re.stream=se[X].join(`
`),mi(R,re),Ir.publish("endTilingPattern",re),ua.pop().restore()};var Fr=p.__private__.newObject=function(){var R=St();return pi(R,!0),R},St=p.__private__.newObjectDeferred=function(){return ye++,Ne[ye]=function(){return Q},ye},pi=function(R,re){return re=typeof re=="boolean"&&re,Ne[R]=Q,re&&de(R+" 0 obj"),R},Uc=p.__private__.newAdditionalObject=function(){var R={objId:St(),content:""};return J.push(R),R},xo=St(),da=St(),$i=p.__private__.decodeColorString=function(R){var re=R.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var Se=parseFloat(re[0]);re=[Se,Se,Se,"r"]}for(var Le="#",Be=0;Be<3;Be++)Le+=("0"+Math.floor(255*parseFloat(re[Be])).toString(16)).slice(-2);return Le},ha=p.__private__.encodeColorString=function(R){var re;typeof R=="string"&&(R={ch1:R});var Se=R.ch1,Le=R.ch2,Be=R.ch3,Ye=R.ch4,ht=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Se=="string"&&Se.charAt(0)!=="#"){var At=new jY(Se);if(At.ok)Se=At.toHex();else if(!/^\d*\.?\d*$/.test(Se))throw new Error('Invalid color "'+Se+'" passed to jsPDF.encodeColorString.')}if(typeof Se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Se)&&(Se="#"+Se[1]+Se[1]+Se[2]+Se[2]+Se[3]+Se[3]),typeof Se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Se)){var Ot=parseInt(Se.substr(1),16);Se=Ot>>16&255,Le=Ot>>8&255,Be=255&Ot}if(Le===void 0||Ye===void 0&&Se===Le&&Le===Be)if(typeof Se=="string")re=Se+" "+ht[0];else switch(R.precision){case 2:re=z(Se/255)+" "+ht[0];break;case 3:default:re=O(Se/255)+" "+ht[0]}else if(Ye===void 0||en(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return re=["1.","1.","1.",ht[1]].join(" ");if(typeof Se=="string")re=[Se,Le,Be,ht[1]].join(" ");else switch(R.precision){case 2:re=[z(Se/255),z(Le/255),z(Be/255),ht[1]].join(" ");break;default:case 3:re=[O(Se/255),O(Le/255),O(Be/255),ht[1]].join(" ")}}else if(typeof Se=="string")re=[Se,Le,Be,Ye,ht[2]].join(" ");else switch(R.precision){case 2:re=[z(Se),z(Le),z(Be),z(Ye),ht[2]].join(" ");break;case 3:default:re=[O(Se),O(Le),O(Be),O(Ye),ht[2]].join(" ")}return re},Qs=p.__private__.getFilters=function(){return o},Fi=p.__private__.putStream=function(R){var re=(R=R||{}).data||"",Se=R.filters||Qs(),Le=R.alreadyAppliedFilters||[],Be=R.addLength1||!1,Ye=re.length,ht=R.objectId,At=function(zs){return zs};if(d!==null&&ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(At=ss.encryptor(ht,0));var Ot={};Se===!0&&(Se=["FlateEncode"]);var sr=R.additionalKeyValues||[],tr=(Ot=Zt.API.processDataByFilters!==void 0?Zt.API.processDataByFilters(re,Se):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(Ot.data.length!==0&&(sr.push({key:"Length",value:Ot.data.length}),Be===!0&&sr.push({key:"Length1",value:Ye})),tr.length!=0)if(tr.split("/").length-1==1)sr.push({key:"Filter",value:tr});else{sr.push({key:"Filter",value:"["+tr+"]"});for(var Sr=0;Sr<sr.length;Sr+=1)if(sr[Sr].key==="DecodeParms"){for(var un=[],mn=0;mn<Ot.reverseChain.split("/").length-1;mn+=1)un.push("null");un.push(sr[Sr].value),sr[Sr].value="["+un.join(" ")+"]"}}de("<<");for(var Kn=0;Kn<sr.length;Kn++)de("/"+sr[Kn].key+" "+sr[Kn].value);de(">>"),Ot.data.length!==0&&(de("stream"),de(At(Ot.data)),de("endstream"))},vo=p.__private__.putPage=function(R){var re=R.number,Se=R.data,Le=R.objId,Be=R.contentsObjId;pi(Le,!0),de("<</Type /Page"),de("/Parent "+R.rootDictionaryObjId+" 0 R"),de("/Resources "+R.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(C(R.mediaBox.bottomLeftX))+" "+parseFloat(C(R.mediaBox.bottomLeftY))+" "+C(R.mediaBox.topRightX)+" "+C(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&de("/CropBox ["+C(R.cropBox.bottomLeftX)+" "+C(R.cropBox.bottomLeftY)+" "+C(R.cropBox.topRightX)+" "+C(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&de("/BleedBox ["+C(R.bleedBox.bottomLeftX)+" "+C(R.bleedBox.bottomLeftY)+" "+C(R.bleedBox.topRightX)+" "+C(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&de("/TrimBox ["+C(R.trimBox.bottomLeftX)+" "+C(R.trimBox.bottomLeftY)+" "+C(R.trimBox.topRightX)+" "+C(R.trimBox.topRightY)+"]"),R.artBox!==null&&de("/ArtBox ["+C(R.artBox.bottomLeftX)+" "+C(R.artBox.bottomLeftY)+" "+C(R.artBox.topRightX)+" "+C(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&de("/UserUnit "+R.userUnit),Ir.publish("putPage",{objId:Le,pageContext:rr[re],pageNumber:re,page:Se}),de("/Contents "+Be+" 0 R"),de(">>"),de("endobj");var Ye=Se.join(`
`);return w===_.ADVANCED&&(Ye+=`
Q`),pi(Be,!0),Fi({data:Ye,filters:Qs(),objectId:Be}),de("endobj"),Le},Hc=p.__private__.putPages=function(){var R,re,Se=[];for(R=1;R<=En;R++)rr[R].objId=St(),rr[R].contentsObjId=St();for(R=1;R<=En;R++)Se.push(vo({number:R,data:se[R],objId:rr[R].objId,contentsObjId:rr[R].contentsObjId,mediaBox:rr[R].mediaBox,cropBox:rr[R].cropBox,bleedBox:rr[R].bleedBox,trimBox:rr[R].trimBox,artBox:rr[R].artBox,userUnit:rr[R].userUnit,rootDictionaryObjId:xo,resourceDictionaryObjId:da}));pi(xo,!0),de("<</Type /Pages");var Le="/Kids [";for(re=0;re<En;re++)Le+=Se[re]+" 0 R ";de(Le+"]"),de("/Count "+En),de(">>"),de("endobj"),Ir.publish("postPutPages")},td=function(R){Ir.publish("putFont",{font:R,out:de,newObject:Fr,putStream:Fi}),R.isAlreadyPutted!==!0&&(R.objectNumber=Fr(),de("<<"),de("/Type /Font"),de("/BaseFont /"+xp(R.postScriptName)),de("/Subtype /Type1"),typeof R.encoding=="string"&&de("/Encoding /"+R.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},rd=function(){for(var R in ur)ur.hasOwnProperty(R)&&(h===!1||h===!0&&m.hasOwnProperty(R))&&td(ur[R])},Wc=function(R){R.objectNumber=Fr();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[C(R.x),C(R.y),C(R.x+R.width),C(R.y+R.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var Se=R.pages[1].join(`
`);Fi({data:Se,additionalKeyValues:re,objectId:R.objectNumber}),de("endobj")},nd=function(){for(var R in _s)_s.hasOwnProperty(R)&&Wc(_s[R])},Gc=function(R,re){var Se,Le=[],Be=1/(re-1);for(Se=0;Se<1;Se+=Be)Le.push(Se);if(Le.push(1),R[0].offset!=0){var Ye={offset:0,color:R[0].color};R.unshift(Ye)}if(R[R.length-1].offset!=1){var ht={offset:1,color:R[R.length-1].color};R.push(ht)}for(var At="",Ot=0,sr=0;sr<Le.length;sr++){for(Se=Le[sr];Se>R[Ot+1].offset;)Ot++;var tr=R[Ot].offset,Sr=(Se-tr)/(R[Ot+1].offset-tr),un=R[Ot].color,mn=R[Ot+1].color;At+=me(Math.round((1-Sr)*un[0]+Sr*mn[0]).toString(16))+me(Math.round((1-Sr)*un[1]+Sr*mn[1]).toString(16))+me(Math.round((1-Sr)*un[2]+Sr*mn[2]).toString(16))}return At.trim()},Mx=function(R,re){re||(re=21);var Se=Fr(),Le=Gc(R.colors,re),Be=[];Be.push({key:"FunctionType",value:"0"}),Be.push({key:"Domain",value:"[0.0 1.0]"}),Be.push({key:"Size",value:"["+re+"]"}),Be.push({key:"BitsPerSample",value:"8"}),Be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fi({data:Le,additionalKeyValues:Be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Se}),de("endobj"),R.objectNumber=Fr(),de("<< /ShadingType "+R.type),de("/ColorSpace /DeviceRGB");var Ye="/Coords ["+C(parseFloat(R.coords[0]))+" "+C(parseFloat(R.coords[1]))+" ";R.type===2?Ye+=C(parseFloat(R.coords[2]))+" "+C(parseFloat(R.coords[3])):Ye+=C(parseFloat(R.coords[2]))+" "+C(parseFloat(R.coords[3]))+" "+C(parseFloat(R.coords[4]))+" "+C(parseFloat(R.coords[5])),de(Ye+="]"),R.matrix&&de("/Matrix ["+R.matrix.toString()+"]"),de("/Function "+Se+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Ix=function(R,re){var Se=St(),Le=Fr();re.push({resourcesOid:Se,objectOid:Le}),R.objectNumber=Le;var Be=[];Be.push({key:"Type",value:"/Pattern"}),Be.push({key:"PatternType",value:"1"}),Be.push({key:"PaintType",value:"1"}),Be.push({key:"TilingType",value:"1"}),Be.push({key:"BBox",value:"["+R.boundingBox.map(C).join(" ")+"]"}),Be.push({key:"XStep",value:C(R.xStep)}),Be.push({key:"YStep",value:C(R.yStep)}),Be.push({key:"Resources",value:Se+" 0 R"}),R.matrix&&Be.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),Fi({data:R.stream,additionalKeyValues:Be,objectId:R.objectNumber}),de("endobj")},sd=function(R){var re;for(re in Mr)Mr.hasOwnProperty(re)&&(Mr[re]instanceof Nf?Mx(Mr[re]):Mr[re]instanceof Bp&&Ix(Mr[re],R))},Cm=function(R){for(var re in R.objectNumber=Fr(),de("<<"),R)switch(re){case"opacity":de("/ca "+z(R[re]));break;case"stroke-opacity":de("/CA "+z(R[re]))}de(">>"),de("endobj")},Rx=function(){var R;for(R in jn)jn.hasOwnProperty(R)&&Cm(jn[R])},Kc=function(){for(var R in de("/XObject <<"),_s)_s.hasOwnProperty(R)&&_s[R].objectNumber>=0&&de("/"+R+" "+_s[R].objectNumber+" 0 R");Ir.publish("putXobjectDict"),de(">>")},Zc=function(){ss.oid=Fr(),de("<<"),de("/Filter /Standard"),de("/V "+ss.v),de("/R "+ss.r),de("/U <"+ss.toHexString(ss.U)+">"),de("/O <"+ss.toHexString(ss.O)+">"),de("/P "+ss.P),de(">>"),de("endobj")},Rh=function(){for(var R in de("/Font <<"),ur)ur.hasOwnProperty(R)&&(h===!1||h===!0&&m.hasOwnProperty(R))&&de("/"+R+" "+ur[R].objectNumber+" 0 R");de(">>")},km=function(){if(Object.keys(Mr).length>0){for(var R in de("/Shading <<"),Mr)Mr.hasOwnProperty(R)&&Mr[R]instanceof Nf&&Mr[R].objectNumber>=0&&de("/"+R+" "+Mr[R].objectNumber+" 0 R");Ir.publish("putShadingPatternDict"),de(">>")}},yo=function(R){if(Object.keys(Mr).length>0){for(var re in de("/Pattern <<"),Mr)Mr.hasOwnProperty(re)&&Mr[re]instanceof p.TilingPattern&&Mr[re].objectNumber>=0&&Mr[re].objectNumber<R&&de("/"+re+" "+Mr[re].objectNumber+" 0 R");Ir.publish("putTilingPatternDict"),de(">>")}},Nr=function(){if(Object.keys(jn).length>0){var R;for(R in de("/ExtGState <<"),jn)jn.hasOwnProperty(R)&&jn[R].objectNumber>=0&&de("/"+R+" "+jn[R].objectNumber+" 0 R");Ir.publish("putGStateDict"),de(">>")}},lr=function(R){pi(R.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Rh(),km(),yo(R.objectOid),Nr(),Kc(),de(">>"),de("endobj")},Xc=function(){var R=[];rd(),Rx(),nd(),sd(R),Ir.publish("putResources"),R.forEach(lr),lr({resourcesOid:da,objectOid:Number.MAX_SAFE_INTEGER}),Ir.publish("postPutResources")},Xo=function(){Ir.publish("putAdditionalObjects");for(var R=0;R<J.length;R++){var re=J[R];pi(re.objId,!0),de(re.content),de("endobj")}Ir.publish("postPutAdditionalObjects")},Yo=function(R){Wr[R.fontName]=Wr[R.fontName]||{},Wr[R.fontName][R.fontStyle]=R.id},Yc=function(R,re,Se,Le,Be){var Ye={id:"F"+(Object.keys(ur).length+1).toString(10),postScriptName:R,fontName:re,fontStyle:Se,encoding:Le,isStandardFont:Be||!1,metadata:{}};return Ir.publish("addFont",{font:Ye,instance:this}),ur[Ye.id]=Ye,Yo(Ye),Ye.id},dr=function(R){for(var re=0,Se=ze.length;re<Se;re++){var Le=Yc.call(this,R[re][0],R[re][1],R[re][2],ze[re][3],!0);h===!1&&(m[Le]=!0);var Be=R[re][0].split("-");Yo({id:Le,fontName:Be[0],fontStyle:Be[1]||""})}Ir.publish("addFonts",{fonts:ur,dictionary:Wr})},Tr=function(R){return R.foo=function(){try{return R.apply(this,arguments)}catch(Le){var re=Le.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var Se="Error in function "+re.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Jt.console)throw new Error(Se);Jt.console.error(Se,Le),Jt.alert&&alert(Se)}},R.foo.bar=R,R.foo},Vl=function(R,re){var Se,Le,Be,Ye,ht,At,Ot,sr,tr;if(Be=(re=re||{}).sourceEncoding||"Unicode",ht=re.outputEncoding,(re.autoencode||ht)&&ur[Ut].metadata&&ur[Ut].metadata[Be]&&ur[Ut].metadata[Be].encoding&&(Ye=ur[Ut].metadata[Be].encoding,!ht&&ur[Ut].encoding&&(ht=ur[Ut].encoding),!ht&&Ye.codePages&&(ht=Ye.codePages[0]),typeof ht=="string"&&(ht=Ye[ht]),ht)){for(Ot=!1,At=[],Se=0,Le=R.length;Se<Le;Se++)(sr=ht[R.charCodeAt(Se)])?At.push(String.fromCharCode(sr)):At.push(R[Se]),At[Se].charCodeAt(0)>>8&&(Ot=!0);R=At.join("")}for(Se=R.length;Ot===void 0&&Se!==0;)R.charCodeAt(Se-1)>>8&&(Ot=!0),Se--;if(!Ot)return R;for(At=re.noBOM?[]:[254,255],Se=0,Le=R.length;Se<Le;Se++){if((tr=(sr=R.charCodeAt(Se))>>8)>>8)throw new Error("Character at position "+Se+" of string '"+R+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(tr),At.push(sr-(tr<<8))}return String.fromCharCode.apply(void 0,At)},Ns=p.__private__.pdfEscape=p.pdfEscape=function(R,re){return Vl(R,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fs=p.__private__.beginPage=function(R){se[++En]=[],rr[En]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},bo(En),Pe(se[X])},Em=function(R,re){var Se,Le,Be;switch(r=re||r,typeof R=="string"&&(Se=j(R.toLowerCase()),Array.isArray(Se)&&(Le=Se[0],Be=Se[1])),Array.isArray(R)&&(Le=R[0]*bt,Be=R[1]*bt),isNaN(Le)&&(Le=i[0],Be=i[1]),(Le>14400||Be>14400)&&(hn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Be=Math.min(14400,Be)),i=[Le,Be],r.substr(0,1)){case"l":Be>Le&&(i=[Be,Le]);break;case"p":Le>Be&&(i=[Be,Le])}Fs(i),Lm(cd),de(qi),Uh!==0&&de(Uh+" J"),gi!==0&&de(gi+" j"),Ir.publish("addPage",{pageNumber:En})},id=function(R){R>0&&R<=En&&(se.splice(R,1),rr.splice(R,1),En--,X>En&&(X=En),this.setPage(X))},bo=function(R){R>0&&R<=En&&(X=R)},Tn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return se.length-1},jo=function(R,re,Se){var Le,Be=void 0;return Se=Se||{},R=R!==void 0?R:ur[Ut].fontName,re=re!==void 0?re:ur[Ut].fontStyle,Le=R.toLowerCase(),Wr[Le]!==void 0&&Wr[Le][re]!==void 0?Be=Wr[Le][re]:Wr[R]!==void 0&&Wr[R][re]!==void 0?Be=Wr[R][re]:Se.disableWarning===!1&&hn.warn("Unable to look up font label for font '"+R+"', '"+re+"'. Refer to getFontList() for available fonts."),Be||Se.noFallback||(Be=Wr.times[re])==null&&(Be=Wr.times.normal),Be},Jc=p.__private__.putInfo=function(){var R=Fr(),re=function(Le){return Le};for(var Se in d!==null&&(re=ss.encryptor(R,0)),de("<<"),de("/Producer ("+Ns(re("jsPDF "+Zt.version))+")"),It)It.hasOwnProperty(Se)&&It[Se]&&de("/"+Se.substr(0,1).toUpperCase()+Se.substr(1)+" ("+Ns(re(It[Se]))+")");de("/CreationDate ("+Ns(re(W))+")"),de(">>"),de("endobj")},Jo=p.__private__.putCatalog=function(R){var re=(R=R||{}).rootDictionaryObjId||xo;switch(Fr(),de("<<"),de("/Type /Catalog"),de("/Pages "+re+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Se=""+et;Se.substr(Se.length-1)==="%"&&(et=parseInt(et)/100),typeof et=="number"&&de("/OpenAction [3 0 R /XYZ null null "+z(et)+"]")}switch(wt||(wt="continuous"),wt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}it&&de("/PageMode /"+it),Ir.publish("putCatalog"),de(">>"),de("endobj")},Dh=p.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ye+1)),de("/Root "+ye+" 0 R"),de("/Info "+(ye-1)+" 0 R"),d!==null&&de("/Encrypt "+ss.oid+" 0 R"),de("/ID [ <"+V+"> <"+V+"> ]"),de(">>")},Qc=p.__private__.putHeader=function(){de("%PDF-"+v),de("%")},$h=p.__private__.putXRef=function(){var R="0000000000";de("xref"),de("0 "+(ye+1)),de("0000000000 65535 f ");for(var re=1;re<=ye;re++)typeof Ne[re]=="function"?de((R+Ne[re]()).slice(-10)+" 00000 n "):Ne[re]!==void 0?de((R+Ne[re]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},za=p.__private__.buildDocument=function(){Ee(),Pe(le),Ir.publish("buildDocument"),Qc(),Hc(),Xo(),Xc(),d!==null&&Zc(),Jc(),Jo();var R=Q;return $h(),Dh(),de("startxref"),de(""+R),de("%%EOF"),Pe(se[X]),le.join(`
`)},Qo=p.__private__.getBlob=function(R){return new Blob([Ve(R)],{type:"application/pdf"})},Ul=p.output=p.__private__.output=Tr(function(R,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",R){case void 0:return za();case"save":p.save(re.filename);break;case"arraybuffer":return Ve(za());case"blob":return Qo(za());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(Qo(za()))||void 0;hn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Se="",Le=za();try{Se=e4(Le)}catch{Se=e4(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+re.filename+";base64,"+Se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(Be=re.pdfObjectUrl,Ye="");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Be+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",At=Jt.open();return At!==null&&At.document.write(ht),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',sr=Jt.open();if(sr!==null){sr.document.write(Ot);var tr=this;sr.document.documentElement.querySelector("#pdfViewer").onload=function(){sr.document.title=re.filename,sr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tr.output("bloburl"))}}return sr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',un=Jt.open();if(un!==null&&(un.document.write(Sr),un.document.title=re.filename),un||typeof safari>"u")return un;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",re);default:return null}}),ad=function(R){return Array.isArray(Vc)===!0&&Vc.indexOf(R)>-1};switch(s){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=ad("px_scaling")==1?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);bt=s}var ss=null;xe(),G();var Tm=function(R){return d!==null?ss.encryptor(R,0):function(re){return re}},od=p.__private__.getPageInfo=p.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:rr[R].objId,pageNumber:R,pageContext:rr[R]}},er=p.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in rr)if(rr[re].objId===R)break;return od(re)},nr=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:rr[X].objId,pageNumber:X,pageContext:rr[X]}};p.addPage=function(){return Em.apply(this,arguments),this},p.setPage=function(){return bo.apply(this,arguments),Pe.call(this,se[X]),this},p.insertPage=function(R){return this.addPage(),this.movePage(X,R),this},p.movePage=function(R,re){var Se,Le;if(R>re){Se=se[R],Le=rr[R];for(var Be=R;Be>re;Be--)se[Be]=se[Be-1],rr[Be]=rr[Be-1];se[re]=Se,rr[re]=Le,this.setPage(re)}else if(R<re){Se=se[R],Le=rr[R];for(var Ye=R;Ye<re;Ye++)se[Ye]=se[Ye+1],rr[Ye]=rr[Ye+1];se[re]=Se,rr[re]=Le,this.setPage(re)}return this},p.deletePage=function(){return id.apply(this,arguments),this},p.__private__.text=p.text=function(R,re,Se,Le,Be){var Ye,ht,At,Ot,sr,tr,Sr,un,mn,Kn=(Le=Le||{}).scope||this;if(typeof R=="number"&&typeof re=="number"&&(typeof Se=="string"||Array.isArray(Se))){var zs=Se;Se=re,re=R,R=zs}if(arguments[3]instanceof Ht?(T("The transform parameter of text() with a Matrix value"),mn=Be):(At=arguments[4],Ot=arguments[5],en(Sr=arguments[3])==="object"&&Sr!==null||(typeof At=="string"&&(Ot=At,At=null),typeof Sr=="string"&&(Ot=Sr,Sr=null),typeof Sr=="number"&&(At=Sr,Sr=null),Le={flags:Sr,angle:At,align:Ot})),isNaN(re)||isNaN(Se)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return Kn;var is="",Ba=!1,wn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:ru,ei=Kn.internal.scaleFactor;function Dm(Gr){return Gr=Gr.split("	").join(Array(Le.TabLen||9).join(" ")),Ns(Gr,Sr)}function Vi(Gr){for(var Kr,Dn=Gr.concat(),Zr=[],So=Dn.length;So--;)typeof(Kr=Dn.shift())=="string"?Zr.push(Kr):Array.isArray(Gr)&&(Kr.length===1||Kr[1]===void 0&&Kr[2]===void 0)?Zr.push(Kr[0]):Zr.push([Kr[0],Kr[1],Kr[2]]);return Zr}function Kh(Gr,Kr){var Dn;if(typeof Gr=="string")Dn=Kr(Gr)[0];else if(Array.isArray(Gr)){for(var Zr,So,vd=Gr.concat(),Ao=[],Fm=vd.length;Fm--;)typeof(Zr=vd.shift())=="string"?Ao.push(Kr(Zr)[0]):Array.isArray(Zr)&&typeof Zr[0]=="string"&&(So=Kr(Zr[0],Zr[1],Zr[2]),Ao.push([So[0],So[1],So[2]]));Dn=Ao}return Dn}var qa=!1,Zh=!0;if(typeof R=="string")qa=!0;else if(Array.isArray(R)){var rl=R.concat();ht=[];for(var su,Zn=rl.length;Zn--;)(typeof(su=rl.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(Zh=!1);qa=Zh}if(qa===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var md=Xe/Kn.internal.scaleFactor,Ui=md*(wn-1);switch(Le.baseline){case"bottom":Se-=Ui;break;case"top":Se+=md-Ui;break;case"hanging":Se+=md-2*Ui;break;case"middle":Se+=md/2-Ui}if((tr=Le.maxWidth||0)>0&&(typeof R=="string"?R=Kn.splitTextToSize(R,tr):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Gr,Kr){return Gr.concat(Kn.splitTextToSize(Kr,tr))},[]))),Ye={text:R,x:re,y:Se,options:Le,mutex:{pdfEscape:Ns,activeFontKey:Ut,fonts:ur,activeFontSize:Xe}},Ir.publish("preProcessText",Ye),R=Ye.text,At=(Le=Ye.options).angle,!(mn instanceof Ht)&&At&&typeof At=="number"){At*=Math.PI/180,Le.rotationDirection===0&&(At=-At),w===_.ADVANCED&&(At=-At);var nl=Math.cos(At),Xh=Math.sin(At);mn=new Ht(nl,Xh,-Xh,nl,0,0)}else At&&At instanceof Ht&&(mn=At);w!==_.ADVANCED||mn||(mn=go),(sr=Le.charSpace||ud)!==void 0&&(is+=C(I(sr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(un=Le.horizontalScale)!==void 0&&(is+=C(100*un)+` Tz
`),Le.lang;var Bs=-1,$x=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Hi=Kn.internal.getCurrentPageInfo().pageContext;switch($x){case 0:case!1:case"fill":Bs=0;break;case 1:case!0:case"stroke":Bs=1;break;case 2:case"fillThenStroke":Bs=2;break;case 3:case"invisible":Bs=3;break;case 4:case"fillAndAddForClipping":Bs=4;break;case 5:case"strokeAndAddPathForClipping":Bs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bs=6;break;case 7:case"addToPathForClipping":Bs=7}var $m=Hi.usedRenderingMode!==void 0?Hi.usedRenderingMode:-1;Bs!==-1?is+=Bs+` Tr
`:$m!==-1&&(is+=`0 Tr
`),Bs!==-1&&(Hi.usedRenderingMode=Bs),Ot=Le.align||"left";var Ss,pd=Xe*wn,pa=Kn.internal.pageSize.getWidth(),iu=ur[Ut];sr=Le.charSpace||ud,tr=Le.maxWidth||0,Sr=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var sl=[],il=function(Gr){return Kn.getStringUnitWidth(Gr,{font:iu,charSpace:sr,fontSize:Xe,doKerning:!1})*Xe/ei};if(Object.prototype.toString.call(R)==="[object Array]"){var As;ht=Vi(R),Ot!=="left"&&(Ss=ht.map(il));var Ps,Va=0;if(Ot==="right"){re-=Ss[0],R=[],Zn=ht.length;for(var xi=0;xi<Zn;xi++)xi===0?(Ps=Gn(re),As=Bi(Se)):(Ps=I(Va-Ss[xi]),As=-pd),R.push([ht[xi],Ps,As]),Va=Ss[xi]}else if(Ot==="center"){re-=Ss[0]/2,R=[],Zn=ht.length;for(var ga=0;ga<Zn;ga++)ga===0?(Ps=Gn(re),As=Bi(Se)):(Ps=I((Va-Ss[ga])/2),As=-pd),R.push([ht[ga],Ps,As]),Va=Ss[ga]}else if(Ot==="left"){R=[],Zn=ht.length;for(var Yl=0;Yl<Zn;Yl++)R.push(ht[Yl])}else if(Ot==="justify"&&iu.encoding==="Identity-H"){R=[],Zn=ht.length,tr=tr!==0?tr:pa;for(var wo=0,Rn=0;Rn<Zn;Rn++)if(As=Rn===0?Bi(Se):-pd,Ps=Rn===0?Gn(re):wo,Rn<Zn-1){var Jl=I((tr-Ss[Rn])/(ht[Rn].split(" ").length-1)),ti=ht[Rn].split(" ");R.push([ti[0]+" ",Ps,As]),wo=0;for(var Wi=1;Wi<ti.length;Wi++){var gd=(il(ti[Wi-1]+" "+ti[Wi])-il(ti[Wi]))*ei+Jl;Wi==ti.length-1?R.push([ti[Wi],gd,0]):R.push([ti[Wi]+" ",gd,0]),wo-=gd}}else R.push([ht[Rn],Ps,As]);R.push(["",wo,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Zn=ht.length,tr=tr!==0?tr:pa,Rn=0;Rn<Zn;Rn++)As=Rn===0?Bi(Se):-pd,Ps=Rn===0?Gn(re):0,Rn<Zn-1?sl.push(C(I((tr-Ss[Rn])/(ht[Rn].split(" ").length-1)))):sl.push(0),R.push([ht[Rn],Ps,As])}}var Yh=typeof Le.R2L=="boolean"?Le.R2L:Oe;Yh===!0&&(R=Kh(R,function(Gr,Kr,Dn){return[Gr.split("").reverse().join(""),Kr,Dn]})),Ye={text:R,x:re,y:Se,options:Le,mutex:{pdfEscape:Ns,activeFontKey:Ut,fonts:ur,activeFontSize:Xe}},Ir.publish("postProcessText",Ye),R=Ye.text,Ba=Ye.mutex.isHex||!1;var Jh=ur[Ut].encoding;Jh!=="WinAnsiEncoding"&&Jh!=="StandardEncoding"||(R=Kh(R,function(Gr,Kr,Dn){return[Dm(Gr),Kr,Dn]})),ht=Vi(R),R=[];for(var qs,_o,Ql,No=0,xd=1,ec=Array.isArray(ht[0])?xd:No,tc="",al=function(Gr,Kr,Dn){var Zr="";return Dn instanceof Ht?(Dn=typeof Le.angle=="number"?Fa(Dn,new Ht(1,0,0,1,Gr,Kr)):Fa(new Ht(1,0,0,1,Gr,Kr),Dn),w===_.ADVANCED&&(Dn=Fa(new Ht(1,0,0,-1,0,0),Dn)),Zr=Dn.join(" ")+` Tm
`):Zr=C(Gr)+" "+C(Kr)+` Td
`,Zr},xa=0;xa<ht.length;xa++){switch(tc="",ec){case xd:Ql=(Ba?"<":"(")+ht[xa][0]+(Ba?">":")"),qs=parseFloat(ht[xa][1]),_o=parseFloat(ht[xa][2]);break;case No:Ql=(Ba?"<":"(")+ht[xa]+(Ba?">":")"),qs=Gn(re),_o=Bi(Se)}sl!==void 0&&sl[xa]!==void 0&&(tc=sl[xa]+` Tw
`),xa===0?R.push(tc+al(qs,_o,mn)+Ql):ec===No?R.push(tc+Ql):ec===xd&&R.push(tc+al(qs,_o,mn)+Ql)}R=ec===No?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Cs=`BT
/`;return Cs+=Ut+" "+Xe+` Tf
`,Cs+=C(Xe*wn)+` TL
`,Cs+=Kl+`
`,Cs+=is,Cs+=R,de(Cs+="ET"),m[Ut]=!0,Kn};var fa=p.__private__.clip=p.clip=function(R){return de(R==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return fa("evenodd")},p.__private__.discardPath=p.discardPath=function(){return de("n"),this};var vr=p.__private__.isValidStyle=function(R){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(re=!0),re};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(R){return vr(R)&&(u=R),this};var Fh=p.__private__.getStyle=p.getStyle=function(R){var re=u;switch(R){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=R}return re},ld=p.close=function(){return de("h"),this};p.stroke=function(){return de("S"),this},p.fill=function(R){return Hl("f",R),this},p.fillEvenOdd=function(R){return Hl("f*",R),this},p.fillStroke=function(R){return Hl("B",R),this},p.fillStrokeEvenOdd=function(R){return Hl("B*",R),this};var Hl=function(R,re){en(re)==="object"?zh(re,R):de(R)},eu=function(R){R===null||w===_.ADVANCED&&R===void 0||(R=Fh(R),de(R))};function el(R,re,Se,Le,Be){var Ye=new Bp(re||this.boundingBox,Se||this.xStep,Le||this.yStep,this.gState,Be||this.matrix);Ye.stream=this.stream;var ht=R+"$$"+this.cloneIndex+++"$$";return mi(ht,Ye),Ye}var zh=function(R,re){var Se=qc[R.key],Le=Mr[Se];if(Le instanceof Nf)de("q"),de(tu(re)),Le.gState&&p.setGState(Le.gState),de(R.matrix.toString()+" cm"),de("/"+Se+" sh"),de("Q");else if(Le instanceof Bp){var Be=new Ht(1,0,0,-1,0,Xl());R.matrix&&(Be=Be.multiply(R.matrix||go),Se=el.call(Le,R.key,R.boundingBox,R.xStep,R.yStep,Be).id),de("q"),de("/Pattern cs"),de("/"+Se+" scn"),Le.gState&&p.setGState(Le.gState),de(re),de("Q")}},tu=function(R){switch(R){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},In=p.moveTo=function(R,re){return de(C(I(R))+" "+C(F(re))+" m"),this},zi=p.lineTo=function(R,re){return de(C(I(R))+" "+C(F(re))+" l"),this},tl=p.curveTo=function(R,re,Se,Le,Be,Ye){return de([C(I(R)),C(F(re)),C(I(Se)),C(F(Le)),C(I(Be)),C(F(Ye)),"c"].join(" ")),this};p.__private__.line=p.line=function(R,re,Se,Le,Be){if(isNaN(R)||isNaN(re)||isNaN(Se)||isNaN(Le)||!vr(Be))throw new Error("Invalid arguments passed to jsPDF.line");return w===_.COMPAT?this.lines([[Se-R,Le-re]],R,re,[1,1],Be||"S"):this.lines([[Se-R,Le-re]],R,re,[1,1]).stroke()},p.__private__.lines=p.lines=function(R,re,Se,Le,Be,Ye){var ht,At,Ot,sr,tr,Sr,un,mn,Kn,zs,is,Ba;if(typeof R=="number"&&(Ba=Se,Se=re,re=R,R=Ba),Le=Le||[1,1],Ye=Ye||!1,isNaN(re)||isNaN(Se)||!Array.isArray(R)||!Array.isArray(Le)||!vr(Be)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(In(re,Se),ht=Le[0],At=Le[1],sr=R.length,zs=re,is=Se,Ot=0;Ot<sr;Ot++)(tr=R[Ot]).length===2?(zs=tr[0]*ht+zs,is=tr[1]*At+is,zi(zs,is)):(Sr=tr[0]*ht+zs,un=tr[1]*At+is,mn=tr[2]*ht+zs,Kn=tr[3]*At+is,zs=tr[4]*ht+zs,is=tr[5]*At+is,tl(Sr,un,mn,Kn,zs,is));return Ye&&ld(),eu(Be),this},p.path=function(R){for(var re=0;re<R.length;re++){var Se=R[re],Le=Se.c;switch(Se.op){case"m":In(Le[0],Le[1]);break;case"l":zi(Le[0],Le[1]);break;case"c":tl.apply(this,Le);break;case"h":ld()}}return this},p.__private__.rect=p.rect=function(R,re,Se,Le,Be){if(isNaN(R)||isNaN(re)||isNaN(Se)||isNaN(Le)||!vr(Be))throw new Error("Invalid arguments passed to jsPDF.rect");return w===_.COMPAT&&(Le=-Le),de([C(I(R)),C(F(re)),C(I(Se)),C(I(Le)),"re"].join(" ")),eu(Be),this},p.__private__.triangle=p.triangle=function(R,re,Se,Le,Be,Ye,ht){if(isNaN(R)||isNaN(re)||isNaN(Se)||isNaN(Le)||isNaN(Be)||isNaN(Ye)||!vr(ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Se-R,Le-re],[Be-Se,Ye-Le],[R-Be,re-Ye]],R,re,[1,1],ht,!0),this},p.__private__.roundedRect=p.roundedRect=function(R,re,Se,Le,Be,Ye,ht){if(isNaN(R)||isNaN(re)||isNaN(Se)||isNaN(Le)||isNaN(Be)||isNaN(Ye)||!vr(ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Be=Math.min(Be,.5*Se),Ye=Math.min(Ye,.5*Le),this.lines([[Se-2*Be,0],[Be*At,0,Be,Ye-Ye*At,Be,Ye],[0,Le-2*Ye],[0,Ye*At,-Be*At,Ye,-Be,Ye],[2*Be-Se,0],[-Be*At,0,-Be,-Ye*At,-Be,-Ye],[0,2*Ye-Le],[0,-Ye*At,Be*At,-Ye,Be,-Ye]],R+Be,re,[1,1],ht,!0),this},p.__private__.ellipse=p.ellipse=function(R,re,Se,Le,Be){if(isNaN(R)||isNaN(re)||isNaN(Se)||isNaN(Le)||!vr(Be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*Se,ht=4/3*(Math.SQRT2-1)*Le;return In(R+Se,re),tl(R+Se,re-ht,R+Ye,re-Le,R,re-Le),tl(R-Ye,re-Le,R-Se,re-ht,R-Se,re),tl(R-Se,re+ht,R-Ye,re+Le,R,re+Le),tl(R+Ye,re+Le,R+Se,re+ht,R+Se,re),eu(Be),this},p.__private__.circle=p.circle=function(R,re,Se,Le){if(isNaN(R)||isNaN(re)||isNaN(Se)||!vr(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,re,Se,Se,Le)},p.setFont=function(R,re,Se){return Se&&(re=P(re,Se)),Ut=jo(R,re,{disableWarning:!1}),this};var Om=p.__private__.getFont=p.getFont=function(){return ur[jo.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var R,re,Se={};for(R in Wr)if(Wr.hasOwnProperty(R))for(re in Se[R]=[],Wr[R])Wr[R].hasOwnProperty(re)&&Se[R].push(re);return Se},p.addFont=function(R,re,Se,Le,Be){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?Be=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(Se=P(Se,Le)),Be=Be||"Identity-H",Yc.call(this,R,re,Se,Be)};var ru,cd=e.lineWidth||.200025,Wl=p.__private__.getLineWidth=p.getLineWidth=function(){return cd},Lm=p.__private__.setLineWidth=p.setLineWidth=function(R){return cd=R,de(C(I(R))+" w"),this};p.__private__.setLineDash=Zt.API.setLineDash=Zt.API.setLineDashPattern=function(R,re){if(R=R||[],re=re||0,isNaN(re)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(Se){return C(I(Se))}).join(" "),re=C(I(re)),de("["+R+"] "+re+" d"),this};var Bh=p.__private__.getLineHeight=p.getLineHeight=function(){return Xe*ru};p.__private__.getLineHeight=p.getLineHeight=function(){return Xe*ru};var gr=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(ru=R),this},Mm=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ru};gr(e.lineHeight);var Gn=p.__private__.getHorizontalCoordinate=function(R){return I(R)},Bi=p.__private__.getVerticalCoordinate=function(R){return w===_.ADVANCED?R:rr[X].mediaBox.topRightY-rr[X].mediaBox.bottomLeftY-I(R)},Im=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(R){return C(Gn(R))},Gl=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(R){return C(Bi(R))},qi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return $i(qi)},p.__private__.setStrokeColor=p.setDrawColor=function(R,re,Se,Le){return qi=ha({ch1:R,ch2:re,ch3:Se,ch4:Le,pdfColorType:"draw",precision:2}),de(qi),this};var qh=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return $i(qh)},p.__private__.setFillColor=p.setFillColor=function(R,re,Se,Le){return qh=ha({ch1:R,ch2:re,ch3:Se,ch4:Le,pdfColorType:"fill",precision:2}),de(qh),this};var Kl=e.textColor||"0 g",Dx=p.__private__.getTextColor=p.getTextColor=function(){return $i(Kl)};p.__private__.setTextColor=p.setTextColor=function(R,re,Se,Le){return Kl=ha({ch1:R,ch2:re,ch3:Se,ch4:Le,pdfColorType:"text",precision:3}),this};var ud=e.charSpace,Vh=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ud||0)};p.__private__.setCharSpace=p.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ud=R,this};var Uh=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(R){var re=p.CapJoinStyles[R];if(re===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Uh=re,de(re+" J"),this};var gi=0;p.__private__.setLineJoin=p.setLineJoin=function(R){var re=p.CapJoinStyles[R];if(re===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gi=re,de(re+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(C(I(R))+" M"),this},p.GState=Gw,p.setGState=function(R){(R=typeof R=="string"?jn[ca[R]]:Rm(null,R)).equals(mo)||(de("/"+R.id+" gs"),mo=R)};var Rm=function(R,re){if(!R||!ca[R]){var Se=!1;for(var Le in jn)if(jn.hasOwnProperty(Le)&&jn[Le].equals(re)){Se=!0;break}if(Se)re=jn[Le];else{var Be="GS"+(Object.keys(jn).length+1).toString(10);jn[Be]=re,re.id=Be}return R&&(ca[R]=re.id),Ir.publish("addGState",re),re}};p.addGState=function(R,re){return Rm(R,re),this},p.saveGraphicsState=function(){return de("q"),fi.push({key:Ut,size:Xe,color:Kl}),this},p.restoreGraphicsState=function(){de("Q");var R=fi.pop();return Ut=R.key,Xe=R.size,Kl=R.color,mo=null,this},p.setCurrentTransformationMatrix=function(R){return de(R.toString()+" cm"),this},p.comment=function(R){return de("#"+R),this};var nu=function(R,re){var Se=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Se},set:function(Ye){isNaN(Ye)||(Se=parseFloat(Ye))}});var Le=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(Ye){isNaN(Ye)||(Le=parseFloat(Ye))}});var Be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Be},set:function(Ye){Be=Ye.toString()}}),this},ma=function(R,re,Se,Le){nu.call(this,R,re),this.type="rect";var Be=Se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Be},set:function(ht){isNaN(ht)||(Be=parseFloat(ht))}});var Ye=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(ht){isNaN(ht)||(Ye=parseFloat(ht))}}),this},dd=function(){this.page=En,this.currentPage=X,this.pages=se.slice(0),this.pagesContext=rr.slice(0),this.x=cn,this.y=xr,this.matrix=Dr,this.width=Zl(X),this.height=Xl(X),this.outputDestination=je,this.id="",this.objectNumber=-1};dd.prototype.restore=function(){En=this.page,X=this.currentPage,rr=this.pagesContext,se=this.pages,cn=this.x,xr=this.y,Dr=this.matrix,fd(X,this.width),Gh(X,this.height),je=this.outputDestination};var Hh=function(R,re,Se,Le,Be){ua.push(new dd),En=X=0,se=[],cn=R,xr=re,Dr=Be,Fs([Se,Le])},Wh=function(R){if(po[R])ua.pop().restore();else{var re=new dd,Se="Xo"+(Object.keys(_s).length+1).toString(10);re.id=Se,po[R]=Se,_s[Se]=re,Ir.publish("addFormObject",re),ua.pop().restore()}};for(var hd in p.beginFormObject=function(R,re,Se,Le,Be){return Hh(R,re,Se,Le,Be),this},p.endFormObject=function(R){return Wh(R),this},p.doFormObject=function(R,re){var Se=_s[po[R]];return de("q"),de(re.toString()+" cm"),de("/"+Se.id+" Do"),de("Q"),this},p.getFormObject=function(R){var re=_s[po[R]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},p.save=function(R,re){return R=R||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(bf(Qo(za()),R),typeof bf.unload=="function"&&Jt.setTimeout&&setTimeout(bf.unload,911),this):new Promise(function(Se,Le){try{var Be=bf(Qo(za()),R);typeof bf.unload=="function"&&Jt.setTimeout&&setTimeout(bf.unload,911),Se(Be)}catch(Ye){Le(Ye.message)}})},Zt.API)Zt.API.hasOwnProperty(hd)&&(hd==="events"&&Zt.API.events.length?function(R,re){var Se,Le,Be;for(Be=re.length-1;Be!==-1;Be--)Se=re[Be][0],Le=re[Be][1],R.subscribe.apply(R,[Se].concat(typeof Le=="function"?[Le]:Le))}(Ir,Zt.API.events):p[hd]=Zt.API[hd]);var Zl=p.getPageWidth=function(R){return(rr[R=R||X].mediaBox.topRightX-rr[R].mediaBox.bottomLeftX)/bt},fd=p.setPageWidth=function(R,re){rr[R].mediaBox.topRightX=re*bt+rr[R].mediaBox.bottomLeftX},Xl=p.getPageHeight=function(R){return(rr[R=R||X].mediaBox.topRightY-rr[R].mediaBox.bottomLeftY)/bt},Gh=p.setPageHeight=function(R,re){rr[R].mediaBox.topRightY=re*bt+rr[R].mediaBox.bottomLeftY};return p.internal={pdfEscape:Ns,getStyle:Fh,getFont:Om,getFontSize:ge,getCharSpace:Vh,getTextColor:Dx,getLineHeight:Bh,getLineHeightFactor:Mm,getLineWidth:Wl,write:be,getHorizontalCoordinate:Gn,getVerticalCoordinate:Bi,getCoordinateString:Im,getVerticalCoordinateString:Gl,collections:{},newObject:Fr,newAdditionalObject:Uc,newObjectDeferred:St,newObjectDeferredBegin:pi,getFilters:Qs,putStream:Fi,events:Ir,scaleFactor:bt,pageSize:{getWidth:function(){return Zl(X)},setWidth:function(R){fd(X,R)},getHeight:function(){return Xl(X)},setHeight:function(R){Gh(X,R)}},encryptionOptions:d,encryption:ss,getEncryptor:Tm,output:Ul,getNumberOfPages:Tn,pages:se,out:de,f2:z,f3:O,getPageInfo:od,getPageInfoByObjId:er,getCurrentPageInfo:nr,getPDFVersion:g,Point:nu,Rectangle:ma,Matrix:Ht,hasHotfix:ad},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Zl(X)},set:function(R){fd(X,R)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Xl(X)},set:function(R){Gh(X,R)},enumerable:!0,configurable:!0}),dr.call(p,ze),Ut="F1",Em(i,r),Ir.publish("initialized"),p}gp.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},gp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},gp.prototype.processOwnerPassword=function(e,t){return r4(t4(t).substr(0,5),e)},gp.prototype.encryptor=function(e,t){var r=t4(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return r4(r,s)}},Gw.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||en(e)!==en(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Zt.API={events:[]},Zt.version="2.5.2";var Yn=Zt.API,v3=1,Pm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},dp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},hr=function(e){return e.toFixed(2)},Ed=function(e){return e.toFixed(5)};Yn.__acroform__={};var $a=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},X8=function(e){return e*v3},ac=function(e){var t=new SY,r=Rt.internal.getHeight(e)||0,s=Rt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(hr(s)),Number(hr(r))],t},aVe=Yn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},oVe=Yn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},lVe=Yn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ls=Yn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lVe(e,t-1)},cs=Yn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aVe(e,t-1)},us=Yn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return oVe(e,t-1)},cVe=Yn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,i=e[0],a=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(i)||0,c.lowerLeft_Y=s(a+l)||0,c.upperRight_X=r(i+o)||0,c.upperRight_Y=s(a)||0,[Number(hr(c.lowerLeft_X)),Number(hr(c.lowerLeft_Y)),Number(hr(c.upperRight_X)),Number(hr(c.upperRight_Y))]},uVe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=n4(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+hr(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=ac(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},n4=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var a=r,o=Rt.internal.getHeight(e)||0;o=o<0?-o:o;var l=Rt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(O,I,q){if(O+1<i.length){var F=I+" "+i[O+1][0];return u1(F,e,q).width<=l-4}return!1};a++;e:for(;a>0;){t="",a--;var u,d,h=u1("3",e,a).height,m=e.multiline?o-a:(o-h)/2,p=m+=2,v=0,g=0,y=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+u1(t,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var j="",_=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var A=!1;if(i[w].length!==1&&y!==i[w].length-1){if((h+2)*(_+2)+2>o)continue e;j+=i[w][y],A=!0,g=w,w--}else{j=(j+=i[w][y]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var S=parseInt(w),P=c(S,j,a),C=w>=i.length-1;if(P&&!C){j+=" ",y=0;continue}if(P||C){if(C)g=S;else if(e.multiline&&(h+2)*(_+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(_+2)+2>o)continue e;g=S}}for(var T="",M=v;M<=g;M++){var z=i[M];if(e.multiline){if(M===g){T+=z[y]+" ",y=(y+1)%z.length;continue}if(M===v){T+=z[z.length-1]+" ";continue}}T+=z[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,d=u1(T,e,a).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=hr(u)+" "+hr(p)+` Td
`,t+="("+Pm(T)+`) Tj
`,t+=-hr(u)+` 0 Td
`,p=-(a+2),d=0,v=A?g:g+1,_++,j=""}break}return s.text=t,s.fontSize=a,s},u1=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},dVe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},hVe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},fVe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,i=e[r];t.internal.newObjectDeferredBegin(i.objId,!0),en(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[s]}},mVe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Bl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(dVe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");v3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new AY,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];a.objId=void 0,a.hasAnnotation&&hVe(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,i){var a=!s;for(var o in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=cVe(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Rt.createDefaultAppearanceStream(l),en(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=uVe(l);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(i,l)),h+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(i,l)),h+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&fVe(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},NY=Yn.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(o){return o};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),en(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),i+="("+Pm(s(e[a].toString()))+")"):i+=e[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fS=function(e,t,r){var s=function(i){return i};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Pm(s(e))+")"},mc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mc.prototype.toString=function(){return this.objId+" 0 R"},mc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},mc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],i=this[s];i&&(Array.isArray(i)?e.push({key:s,value:NY(i,this.objId,this.scope)}):i instanceof mc?(i.scope=this.scope,e.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:s,value:i}))}return e};var SY=function(){mc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};$a(SY,mc);var AY=function(){mc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Pm(r(e))+")"}},set:function(r){e=r}})};$a(AY,mc);var Bl=function e(){mc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ls(t,3)},set:function(j){j?this.F=cs(t,3):this.F=us(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(j){s=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(j){s[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(j){s[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(j){s[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(j){s[3]=j}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Kw)return;a="FieldObject"+e.FieldNum++}var j=function(_){return _};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Pm(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(j){o=j}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/v3:u},set:function(j){u=j}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(j){d=j}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Kw||this instanceof qf))return fS(h,this.objId,this.scope)},set:function(j){j=j.toString(),h=j}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Gs?m:fS(m,this.objId,this.scope)},set:function(j){j=j.toString(),m=this instanceof Gs?j:j.substr(0,1)==="("?dp(j.substr(1,j.length-2)):dp(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gs?dp(m.substr(1,m.length-1)):m},set:function(j){j=j.toString(),m=this instanceof Gs?"/"+j:j}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Gs?p:fS(p,this.objId,this.scope)},set:function(j){j=j.toString(),p=this instanceof Gs?j:j.substr(0,1)==="("?dp(j.substr(1,j.length-2)):dp(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gs?dp(p.substr(1,p.length-1)):p},set:function(j){j=j.toString(),p=this instanceof Gs?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(j){j=!!j,g=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(j){v=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,1)},set:function(j){j?this.Ff=cs(this.Ff,1):this.Ff=us(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,2)},set:function(j){j?this.Ff=cs(this.Ff,2):this.Ff=us(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,3)},set:function(j){j?this.Ff=cs(this.Ff,3):this.Ff=us(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');y=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(y){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};$a(Bl,mc);var ng=function(){Bl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return NY(t,this.objId,this.scope)},set:function(r){var s,i;i=[],typeof(s=r)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,u=[];c=o.exec(a);)u.push(c[l]);return u}(s,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,18)},set:function(r){r?this.Ff=cs(this.Ff,18):this.Ff=us(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=cs(this.Ff,19):this.Ff=us(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,20)},set:function(r){r?(this.Ff=cs(this.Ff,20),t.sort()):this.Ff=us(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,22)},set:function(r){r?this.Ff=cs(this.Ff,22):this.Ff=us(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,23)},set:function(r){r?this.Ff=cs(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,27)},set:function(r){r?this.Ff=cs(this.Ff,27):this.Ff=us(this.Ff,27)}}),this.hasAppearanceStream=!1};$a(ng,Bl);var sg=function(){ng.call(this),this.fontName="helvetica",this.combo=!1};$a(sg,ng);var ig=function(){sg.call(this),this.combo=!0};$a(ig,sg);var F1=function(){ig.call(this),this.edit=!0};$a(F1,ig);var Gs=function(){Bl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,15)},set:function(r){r?this.Ff=cs(this.Ff,15):this.Ff=us(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,16)},set:function(r){r?this.Ff=cs(this.Ff,16):this.Ff=us(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,17)},set:function(r){r?this.Ff=cs(this.Ff,17):this.Ff=us(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,26)},set:function(r){r?this.Ff=cs(this.Ff,26):this.Ff=us(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,i=[];for(s in i.push("<<"),t)i.push("/"+s+" ("+Pm(r(t[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){en(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};$a(Gs,Bl);var z1=function(){Gs.call(this),this.pushButton=!0};$a(z1,Gs);var ag=function(){Gs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};$a(ag,Gs);var Kw=function(){var e,t;Bl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),s)o.push("/"+a+" ("+Pm(i(s[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){en(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$a(Kw,Bl),ag.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},ag.prototype.createOption=function(e){var t=new Kw;return t.Parent=this,t.optionName=e,this.Kids.push(t),pVe.call(this.scope,t),t};var B1=function(){Gs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};$a(B1,Gs);var qf=function(){Bl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,13)},set:function(t){t?this.Ff=cs(this.Ff,13):this.Ff=us(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,21)},set:function(t){t?this.Ff=cs(this.Ff,21):this.Ff=us(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,23)},set:function(t){t?this.Ff=cs(this.Ff,23):this.Ff=us(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,24)},set:function(t){t?this.Ff=cs(this.Ff,24):this.Ff=us(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,25)},set:function(t){t?this.Ff=cs(this.Ff,25):this.Ff=us(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,26)},set:function(t){t?this.Ff=cs(this.Ff,26):this.Ff=us(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$a(qf,Bl);var q1=function(){qf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ls(this.Ff,14)},set:function(e){e?this.Ff=cs(this.Ff,14):this.Ff=us(this.Ff,14)}}),this.password=!0};$a(q1,qf);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ac(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=n4(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+hr(Rt.internal.getWidth(e))+" "+hr(Rt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+hr(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ac(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=[],a=Rt.internal.getHeight(e),o=Rt.internal.getWidth(e),l=n4(e,e.caption);return i.push("1 g"),i.push("0 0 "+hr(o)+" "+hr(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+hr(o-1)+" "+hr(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+hr(l.fontSize)+" Tf "+s),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=ac(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+hr(Rt.internal.getWidth(e))+" "+hr(Rt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Rt.RadioButton.Circle.YesNormal,t.D[e]=Rt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ac(e);t.scope=e.scope;var r=[],s=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Rt.internal.Bezier_C,a=Number((s*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ed(Rt.internal.getWidth(e)/2)+" "+Ed(Rt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ac(e);t.scope=e.scope;var r=[],s=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),a=Number((i*Rt.internal.Bezier_C).toFixed(5)),o=Number((s*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ed(Rt.internal.getWidth(e)/2)+" "+Ed(Rt.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ed(Rt.internal.getWidth(e)/2)+" "+Ed(Rt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ac(e);t.scope=e.scope;var r=[],s=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),a=Number((i*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ed(Rt.internal.getWidth(e)/2)+" "+Ed(Rt.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Rt.RadioButton.Cross.YesNormal,t.D[e]=Rt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ac(e);t.scope=e.scope;var r=[],s=Rt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+hr(Rt.internal.getWidth(e)-2)+" "+hr(Rt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(hr(s.x1.x)+" "+hr(s.x1.y)+" m"),r.push(hr(s.x2.x)+" "+hr(s.x2.y)+" l"),r.push(hr(s.x4.x)+" "+hr(s.x4.y)+" m"),r.push(hr(s.x3.x)+" "+hr(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ac(e);t.scope=e.scope;var r=Rt.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+hr(Rt.internal.getWidth(e))+" "+hr(Rt.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+hr(Rt.internal.getWidth(e)-2)+" "+hr(Rt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(hr(r.x1.x)+" "+hr(r.x1.y)+" m"),s.push(hr(r.x2.x)+" "+hr(r.x2.y)+" l"),s.push(hr(r.x4.x)+" "+hr(r.x4.y)+" m"),s.push(hr(r.x3.x)+" "+hr(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=ac(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+hr(Rt.internal.getWidth(e))+" "+hr(Rt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Rt.internal.getWidth(e),r=Rt.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},Rt.internal.getWidth=function(e){var t=0;return en(e)==="object"&&(t=X8(e.Rect[2])),t},Rt.internal.getHeight=function(e){var t=0;return en(e)==="object"&&(t=X8(e.Rect[3])),t};var pVe=Yn.addField=function(e){if(mVe(this,e),!(e instanceof Bl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Yn.AcroFormChoiceField=ng,Yn.AcroFormListBox=sg,Yn.AcroFormComboBox=ig,Yn.AcroFormEditBox=F1,Yn.AcroFormButton=Gs,Yn.AcroFormPushButton=z1,Yn.AcroFormRadioButton=ag,Yn.AcroFormCheckBox=B1,Yn.AcroFormTextField=qf,Yn.AcroFormPasswordField=q1,Yn.AcroFormAppearance=Rt,Yn.AcroForm={ChoiceField:ng,ListBox:sg,ComboBox:ig,EditBox:F1,Button:Gs,PushButton:z1,RadioButton:ag,CheckBox:B1,TextField:qf,PasswordField:q1,Appearance:Rt},Zt.AcroForm={ChoiceField:ng,ListBox:sg,ComboBox:ig,EditBox:F1,Button:Gs,PushButton:z1,RadioButton:ag,CheckBox:B1,TextField:qf,PasswordField:q1,Appearance:Rt};function PY(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(O,I){var q,F,W,V,ne,G=t;if((I=I||t)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(P(O))for(ne in r)for(W=r[ne],q=0;q<W.length;q+=1){for(V=!0,F=0;F<W[q].length;F+=1)if(W[q][F]!==void 0&&W[q][F]!==O[F]){V=!1;break}if(V===!0){G=ne;break}}else for(ne in r)for(W=r[ne],q=0;q<W.length;q+=1){for(V=!0,F=0;F<W[q].length;F+=1)if(W[q][F]!==void 0&&W[q][F]!==O.charCodeAt(F)){V=!1;break}if(V===!0){G=ne;break}}return G===t&&I!==t&&(G=I),G},i=function O(I){for(var q=this.internal.write,F=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:I.width}),V.push({key:"Height",value:I.height}),I.colorSpace===y.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===y.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var ne="",G=0,K=I.transparency.length;G<K;G++)ne+=I.transparency[G]+" "+I.transparency[G]+" ";V.push({key:"Mask",value:"["+ne+"]"})}I.sMask!==void 0&&V.push({key:"SMask",value:I.objectId+1+" 0 R"});var ee=I.filter!==void 0?["/"+I.filter]:void 0;if(F({data:I.data,additionalKeyValues:V,alreadyAppliedFilters:ee,objectId:I.objectId}),q("endobj"),"sMask"in I&&I.sMask!==void 0){var xe="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,B={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:xe,data:I.sMask};"filter"in I&&(B.filter=I.filter),O.call(this,B)}if(I.colorSpace===y.INDEXED){var X=this.internal.newObject();F({data:T(new Uint8Array(I.palette)),objectId:X}),q("endobj")}},a=function(){var O=this.internal.collections.addImage_images;for(var I in O)i.call(this,O[I])},o=function(){var O,I=this.internal.collections.addImage_images,q=this.internal.write;for(var F in I)q("/I"+(O=I[F]).index,O.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var O=this.internal.collections.addImage_images;return l.call(this),O},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(O){return typeof e["process"+O.toUpperCase()]=="function"},h=function(O){return en(O)==="object"&&O.nodeType===1},m=function(O,I){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var q=""+O.getAttribute("src");if(q.indexOf("data:image/")===0)return ry(unescape(q).split("base64,").pop());var F=e.loadFile(q,!0);if(F!==void 0)return F}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var W;switch(I){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return ry(O.toDataURL(W,1).split("base64,").pop())}},p=function(O){var I=this.internal.collections.addImage_images;if(I){for(var q in I)if(O===I[q].alias)return I[q]}},v=function(O,I,q){return O||I||(O=-96,I=-96),O<0&&(O=-1*q.width*72/O/this.internal.scaleFactor),I<0&&(I=-1*q.height*72/I/this.internal.scaleFactor),O===0&&(O=I*q.width/q.height),I===0&&(I=O*q.height/q.width),[O,I]},g=function(O,I,q,F,W,V){var ne=v.call(this,q,F,W),G=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,ee=c.call(this);if(q=ne[0],F=ne[1],ee[W.index]=W,V){V*=Math.PI/180;var xe=Math.cos(V),B=Math.sin(V),X=function(me){return me.toFixed(4)},ie=[X(xe),X(B),X(-1*B),X(xe),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,G(O),K(I+F),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([G(q),"0","0",G(F),"0","0","cm"].join(" "))):this.internal.write([G(q),"0","0",G(F),G(O),K(I+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=e.__addimage__.sHashCode=function(O){var I,q,F=0;if(typeof O=="string")for(q=O.length,I=0;I<q;I++)F=(F<<5)-F+O.charCodeAt(I),F|=0;else if(P(O))for(q=O.byteLength/2,I=0;I<q;I++)F=(F<<5)-F+O[I],F|=0;return F},w=e.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var I=!0;return O.length===0&&(I=!1),O.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(I=!1),I},A=e.__addimage__.extractImageFromDataUrl=function(O){var I=(O=O||"").split("base64,"),q=null;if(I.length===2){var F=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(F)&&(q={mimeType:F[1],charset:F[2],data:I[1]})}return q},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(O){return S()&&O instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(O){return S()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(O){for(var I=O.length,q=new Uint8Array(I),F=0;F<I;F++)q[F]=O.charCodeAt(F);return q},T=e.__addimage__.arrayBufferToBinaryString=function(O){for(var I="",q=P(O)?O:new Uint8Array(O),F=0;F<q.length;F+=8192)I+=String.fromCharCode.apply(null,q.subarray(F,F+8192));return I};e.addImage=function(){var O,I,q,F,W,V,ne,G,K;if(typeof arguments[1]=="number"?(I=t,q=arguments[1],F=arguments[2],W=arguments[3],V=arguments[4],ne=arguments[5],G=arguments[6],K=arguments[7]):(I=arguments[1],q=arguments[2],F=arguments[3],W=arguments[4],V=arguments[5],ne=arguments[6],G=arguments[7],K=arguments[8]),en(O=arguments[0])==="object"&&!h(O)&&"imageData"in O){var ee=O;O=ee.imageData,I=ee.format||I||t,q=ee.x||q||0,F=ee.y||F||0,W=ee.w||ee.width||W,V=ee.h||ee.height||V,ne=ee.alias||ne,G=ee.compression||G,K=ee.rotation||ee.angle||K}var xe=this.internal.getFilters();if(G===void 0&&xe.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(q)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var B=M.call(this,O,I,ne,G);return g.call(this,q,F,W,V,B,K),this};var M=function(O,I,q,F){var W,V,ne;if(typeof O=="string"&&s(O)===t){O=unescape(O);var G=z(O,!1);(G!==""||(G=e.loadFile(O,!0))!==void 0)&&(O=G)}if(h(O)&&(O=m(O,I)),I=s(O,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((ne=q)==null||ne.length===0)&&(q=function(K){return typeof K=="string"||P(K)?_(K):P(K.data)?_(K.data):null}(O)),(W=p.call(this,q))||(S()&&(O instanceof Uint8Array||I==="RGBA"||(V=O,O=C(O))),W=this["process"+I.toUpperCase()](O,u.call(this),q,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in e.image_compression?K:j.NONE}(F),V)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},z=e.__addimage__.convertBase64ToBinaryString=function(O,I){var q;I=typeof I!="boolean"||I;var F,W="";if(typeof O=="string"){F=(q=A(O))!==null?q.data:O;try{W=ry(F)}catch(V){if(I)throw w(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(O){var I,q,F="";if(h(O)&&(O=m(O)),typeof O=="string"&&s(O)===t&&((F=z(O,!1))===""&&(F=e.loadFile(O)||""),O=F),q=s(O),!d(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!S()||O instanceof Uint8Array||(O=C(O)),!(I=this["process"+q.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=q,I}})(Zt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Zt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((s=u[h]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){s=u[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(g.objId),_=s.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+p(j(s.contents))+")",a+=" /Popup "+y.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+p(j(_))+") >>",g.content=a;var w=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+w,s.open&&(a+=" /Open true"),a+=" >>",y.content=a,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var A=s.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(v(s.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(s.options.name){var S=this.annotations._nameMap[s.options.name];s.options.pageNumber=S.page,s.options.top=S.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",a="",s.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(s.options.url))+") >>";else if(s.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,a+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var P=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),a+=" /XYZ "+s.options.left+" "+P+" "+s.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(s),w:c(r+i),h:u(s+a)},options:o,type:"link"})},e.textWithLink=function(r,s,i,a){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,s,i,a),i+=.2*u,a.align==="center"&&(s-=c/2),a.align==="right"&&(s-=c),this.link(s,i-u,l,o,a),c},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Zt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var y=0,j=r,_="",w=0;for(y=0;y<g.length;y+=1)j[g.charCodeAt(y)]!==void 0?(w++,typeof(j=j[g.charCodeAt(y)])=="number"&&(_+=String.fromCharCode(j),j=r,w=0),y===g.length-1&&(j=r,_+=g.charAt(y-(w-1)),y-=w-1,w=0)):(j=r,_+=g.charAt(y-w),y-=w,w=0);return _};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&s[g.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(g,y,j){return o(g)?a(g)===!1?-1:!u(g)||!o(y)&&!o(j)||!o(j)&&l(y)||l(g)&&!o(y)||l(g)&&c(y)||l(g)&&l(y)?0:d(g)&&o(y)&&!l(y)&&o(j)&&u(j)?3:l(g)||!o(j)?1:2:-1},p=function(g){var y=0,j=0,_=0,w="",A="",S="",P=(g=g||"").split("\\s+"),C=[];for(y=0;y<P.length;y+=1){for(C.push(""),j=0;j<P[y].length;j+=1)w=P[y][j],A=P[y][j-1],S=P[y][j+1],o(w)?(_=m(w,A,S),C[y]+=_!==-1?String.fromCharCode(t[w.charCodeAt(0)][_]):w):C[y]+=w;C[y]=h(C[y])}return C.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(y)){var _=0;for(j=[],_=0;_<y.length;_+=1)Array.isArray(y[_])?j.push([p(y[_][0]),y[_][1],y[_][2]]):j.push([p(y[_])]);g=j}else g=p(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(Zt.API),Zt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var i;if((r=r||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Zt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){s.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,v=0,g=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var j=u.maxWidth;j>0?typeof c=="string"?c=this.splitTextToSize(c,j):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,A){return w.concat(y.splitTextToSize(A,j))},[])):c=Array.isArray(c)?c:[c];for(var _=0;_<c.length;_++)p<(g=this.getStringUnitWidth(c[_],{font:h})*d)&&(p=g);return p!==0&&(v=c.length),{w:p/=m,h:Math.max((v*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,h,m){if(s.call(this),!d)throw new Error("No data for PDF table.");var p,v,g,y,j=[],_=[],w=[],A={},S={},P=[],C=[],T=(m=m||{}).autoSize||!1,M=m.printHeaders!==!1,z=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,O=m.margins||Object.assign({width:this.getPageWidth()},t),I=typeof m.padding=="number"?m.padding:3,q=m.headerBackgroundColor||"#c8c8c8",F=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=F,this.setFontSize(z),h==null)_=j=Object.keys(d[0]),w=j.map(function(){return"left"});else if(Array.isArray(h)&&en(h[0])==="object")for(j=h.map(function(ee){return ee.name}),_=h.map(function(ee){return ee.prompt||ee.name||""}),w=h.map(function(ee){return ee.align||"left"}),p=0;p<h.length;p+=1)S[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(_=j=h,w=j.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<j.length;p+=1){for(A[y=j[p]]=d.map(function(ee){return ee[y]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(_[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=A[y],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)P.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[y]=Math.max.apply(null,P)+I+I,P=[]}if(M){var W={};for(p=0;p<j.length;p+=1)W[j[p]]={},W[j[p]].text=_[p],W[j[p]].align=w[p];var V=l.call(this,W,S);C=j.map(function(ee){return new a(c,u,S[ee],V,W[ee].text,void 0,W[ee].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var ne=h.reduce(function(ee,xe){return ee[xe.name]=xe.align,ee},{});for(p=0;p<d.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:d[p]},this);var G=l.call(this,d[p],S);for(g=0;g<j.length;g+=1){var K=d[p][j[g]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:g,data:K},this),o.call(this,new a(c,u,S[j[g]],G,K,p+2,ne[j[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+d+d},this).reduce(function(p,v){return Math.max(p,v)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(Zt.API);var CY={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kY=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],s4=PY(kY),EY=[100,200,300,400,500,600,700,800,900],gVe=PY(EY);function i4(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return CY[a=a||"normal"]?a:"normal"}(e.style),s=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(a){return typeof s4[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,s].join(" ")}}}function Y8(e,t,r,s){var i;for(i=r;i>=0&&i<t.length;i+=s)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=s)if(e[t[i]])return e[t[i]]}var xVe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},J8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Q8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function vVe(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},xVe,r.genericFontFamilies||{}),a=null,o=null,l=0;l<t.length;++l)if(i[(a=i4(t[l])).family]&&(a.family=i[a.family]),e.hasOwnProperty(a.family)){o=e[a.family];break}if(!(o=o||e[s]))throw new Error("Could not find a font-family for the rule '"+Q8(a)+"' and default family '"+s+"'.");if(o=function(c,u){if(u[c])return u[c];var d=s4[c],h=d<=s4.normal?-1:1,m=Y8(u,kY,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(a.stretch,o),o=function(c,u){if(u[c])return u[c];for(var d=CY[c],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=gVe[c],h=Y8(u,EY,d,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Q8(a)+"'.");return o}function e$(e){return e.trimLeft()}function yVe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function bVe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var d1,t$,r$,mS=["times"];(function(e){var t,r,s,i,a,o,l,c,u,d=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new c,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=B;Object.defineProperty(this,"pdf",{get:function(){return X}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(Pe){ie=!!Pe}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(Pe){me=!!Pe}});var ye=0;Object.defineProperty(this,"posX",{get:function(){return ye},set:function(Pe){isNaN(Pe)||(ye=Pe)}});var Ne=0;Object.defineProperty(this,"posY",{get:function(){return Ne},set:function(Pe){isNaN(Pe)||(Ne=Pe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Pe){var de;typeof Pe=="number"?de=[Pe,Pe,Pe,Pe]:((de=new Array(4))[0]=Pe[0],de[1]=Pe.length>=2?Pe[1]:de[0],de[2]=Pe.length>=3?Pe[2]:de[0],de[3]=Pe.length>=4?Pe[3]:de[1]),u.margin=de}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(Pe){le=Pe}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(Pe){Q=Pe}});var J=[];Object.defineProperty(this,"pageBreaks",{get:function(){return J},set:function(Pe){J=Pe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Pe){Pe instanceof d&&(u=Pe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Pe){u.path=Pe}});var se=[];Object.defineProperty(this,"ctxStack",{get:function(){return se},set:function(Pe){se=Pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pe){var de;de=m(Pe),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pe){var de=m(Pe);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pe){["butt","round","square"].indexOf(Pe)!==-1&&(this.ctx.lineCap=Pe,this.pdf.setLineCap(Pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pe){isNaN(Pe)||(this.ctx.lineWidth=Pe,this.pdf.setLineWidth(Pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pe){["bevel","round","miter"].indexOf(Pe)!==-1&&(this.ctx.lineJoin=Pe,this.pdf.setLineJoin(Pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pe){isNaN(Pe)||(this.ctx.miterLimit=Pe,this.pdf.setMiterLimit(Pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pe){this.ctx.textBaseline=Pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pe){["right","end","center","left","start"].indexOf(Pe)!==-1&&(this.ctx.textAlign=Pe)}});var Z=null;function je(Pe,de){if(Z===null){var be=function(Ve){var ze=[];return Object.keys(Ve).forEach(function(Xe){Ve[Xe].forEach(function(et){var ge=null;switch(et){case"bold":ge={family:Xe,weight:"bold"};break;case"italic":ge={family:Xe,style:"italic"};break;case"bolditalic":ge={family:Xe,weight:"bold",style:"italic"};break;case"":case"normal":ge={family:Xe}}ge!==null&&(ge.ref={name:Xe,style:et},ze.push(ge))})}),ze}(Pe.getFontList());Z=function(Ve){for(var ze={},Xe=0;Xe<Ve.length;++Xe){var et=i4(Ve[Xe]),ge=et.family,Oe=et.stretch,it=et.style,nt=et.weight;ze[ge]=ze[ge]||{},ze[ge][Oe]=ze[ge][Oe]||{},ze[ge][Oe][it]=ze[ge][Oe][it]||{},ze[ge][Oe][it][nt]=et}return ze}(be.concat(de))}return Z}var Ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ee},set:function(Pe){Z=null,Ee=Pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pe){var de;if(this.ctx.font=Pe,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pe))!==null){var be=de[1],Ve=(de[2],de[3]),ze=de[4],Xe=(de[5],de[6]),et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ze)[2];ze=Math.floor(et==="px"?parseFloat(ze)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(ze)*this.pdf.getFontSize():parseFloat(ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ze);var ge=function(It){var Ut,bt,cn=[],xr=It.trim();if(xr==="")return mS;if(xr in J8)return[J8[xr]];for(;xr!=="";){switch(bt=null,Ut=(xr=e$(xr)).charAt(0)){case'"':case"'":bt=yVe(xr.substring(1),Ut);break;default:bt=bVe(xr)}if(bt===null||(cn.push(bt[0]),(xr=e$(bt[1]))!==""&&xr.charAt(0)!==","))return mS;xr=xr.replace(/^,/,"")}return cn}(Xe);if(this.fontFaces){var Oe=vVe(je(this.pdf,this.fontFaces),ge.map(function(It){return{family:It,stretch:"normal",weight:Ve,style:be}}));this.pdf.setFont(Oe.ref.name,Oe.ref.style)}else{var it="";(Ve==="bold"||parseInt(Ve,10)>=700||be==="bold")&&(it="bold"),be==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var nt="",wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<ge.length;mt++){if(this.pdf.internal.getFont(ge[mt],it,{noFallback:!0,disableWarning:!0})!==void 0){nt=ge[mt];break}if(it==="bolditalic"&&this.pdf.internal.getFont(ge[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=ge[mt],it="bold";else if(this.pdf.internal.getFont(ge[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=ge[mt],it="normal";break}}if(nt===""){for(var or=0;or<ge.length;or++)if(wt[ge[or]]){nt=wt[ge[or]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pe){this.ctx.globalCompositeOperation=Pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pe){this.ctx.globalAlpha=Pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pe){this.ctx.lineDashOffset=Pe,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pe){this.ctx.lineDash=Pe,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pe){this.ctx.ignoreClearRect=!!Pe}})};h.prototype.setLineDash=function(B){this.lineDash=B},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){A.call(this,"fill",!1)},h.prototype.stroke=function(){A.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(B,X){if(isNaN(B)||isNaN(X))throw hn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new o(B,X));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(B,X)},h.prototype.closePath=function(){var B=new o(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&en(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){B=new o(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},h.prototype.lineTo=function(B,X){if(isNaN(B)||isNaN(X))throw hn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new o(B,X));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},h.prototype.quadraticCurveTo=function(B,X,ie,me){if(isNaN(ie)||isNaN(me)||isNaN(B)||isNaN(X))throw hn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ye=this.ctx.transform.applyToPoint(new o(ie,me)),Ne=this.ctx.transform.applyToPoint(new o(B,X));this.path.push({type:"qct",x1:Ne.x,y1:Ne.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},h.prototype.bezierCurveTo=function(B,X,ie,me,ye,Ne){if(isNaN(ye)||isNaN(Ne)||isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me))throw hn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new o(ye,Ne)),Q=this.ctx.transform.applyToPoint(new o(B,X)),J=this.ctx.transform.applyToPoint(new o(ie,me));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:J.x,y2:J.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},h.prototype.arc=function(B,X,ie,me,ye,Ne){if(isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me)||isNaN(ye))throw hn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ne=!!Ne,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new o(B,X));B=le.x,X=le.y;var Q=this.ctx.transform.applyToPoint(new o(0,ie)),J=this.ctx.transform.applyToPoint(new o(0,0));ie=Math.sqrt(Math.pow(Q.x-J.x,2)+Math.pow(Q.y-J.y,2))}Math.abs(ye-me)>=2*Math.PI&&(me=0,ye=2*Math.PI),this.path.push({type:"arc",x:B,y:X,radius:ie,startAngle:me,endAngle:ye,counterclockwise:Ne})},h.prototype.arcTo=function(B,X,ie,me,ye){throw new Error("arcTo not implemented.")},h.prototype.rect=function(B,X,ie,me){if(isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me))throw hn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,X),this.lineTo(B+ie,X),this.lineTo(B+ie,X+me),this.lineTo(B,X+me),this.lineTo(B,X),this.lineTo(B+ie,X),this.lineTo(B,X)},h.prototype.fillRect=function(B,X,ie,me){if(isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me))throw hn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ye={};this.lineCap!=="butt"&&(ye.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ye.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,X,ie,me),this.fill(),ye.hasOwnProperty("lineCap")&&(this.lineCap=ye.lineCap),ye.hasOwnProperty("lineJoin")&&(this.lineJoin=ye.lineJoin)}},h.prototype.strokeRect=function(B,X,ie,me){if(isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me))throw hn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(B,X,ie,me),this.stroke())},h.prototype.clearRect=function(B,X,ie,me){if(isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me))throw hn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,X,ie,me))},h.prototype.save=function(B){B=typeof B!="boolean"||B;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},h.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(X),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(B){var X,ie,me,ye;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))X=0,ie=0,me=0,ye=0;else{var Ne=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(Ne!==null)X=parseInt(Ne[1]),ie=parseInt(Ne[2]),me=parseInt(Ne[3]),ye=1;else if((Ne=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)X=parseInt(Ne[1]),ie=parseInt(Ne[2]),me=parseInt(Ne[3]),ye=parseFloat(Ne[4]);else{if(ye=1,typeof B=="string"&&B.charAt(0)!=="#"){var le=new jY(B);B=le.ok?le.toHex():"#000000"}B.length===4?(X=B.substring(1,2),X+=X,ie=B.substring(2,3),ie+=ie,me=B.substring(3,4),me+=me):(X=B.substring(1,3),ie=B.substring(3,5),me=B.substring(5,7)),X=parseInt(X,16),ie=parseInt(ie,16),me=parseInt(me,16)}}return{r:X,g:ie,b:me,a:ye,style:B}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(B,X,ie,me){if(isNaN(X)||isNaN(ie)||typeof B!="string")throw hn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!p.call(this)){var ye=G(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;I.call(this,{text:B,x:X,y:ie,scale:Ne,angle:ye,align:this.textAlign,maxWidth:me})}},h.prototype.strokeText=function(B,X,ie,me){if(isNaN(X)||isNaN(ie)||typeof B!="string")throw hn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){me=isNaN(me)?void 0:me;var ye=G(this.ctx.transform.rotation),Ne=this.ctx.transform.scaleX;I.call(this,{text:B,x:X,y:ie,scale:Ne,renderingMode:"stroke",angle:ye,align:this.textAlign,maxWidth:me})}},h.prototype.measureText=function(B){if(typeof B!="string")throw hn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,ie=this.pdf.internal.scaleFactor,me=X.internal.getFontSize(),ye=X.getStringUnitWidth(B)*me/X.internal.scaleFactor,Ne=function(le){var Q=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Q}}),this};return new Ne({width:ye*=Math.round(96*ie/72*1e4)/1e4})},h.prototype.scale=function(B,X){if(isNaN(B)||isNaN(X))throw hn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new c(B,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},h.prototype.rotate=function(B){if(isNaN(B))throw hn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new c(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.translate=function(B,X){if(isNaN(B)||isNaN(X))throw hn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new c(1,0,0,1,B,X);this.ctx.transform=this.ctx.transform.multiply(ie)},h.prototype.transform=function(B,X,ie,me,ye,Ne){if(isNaN(B)||isNaN(X)||isNaN(ie)||isNaN(me)||isNaN(ye)||isNaN(Ne))throw hn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(B,X,ie,me,ye,Ne);this.ctx.transform=this.ctx.transform.multiply(le)},h.prototype.setTransform=function(B,X,ie,me,ye,Ne){B=isNaN(B)?1:B,X=isNaN(X)?0:X,ie=isNaN(ie)?0:ie,me=isNaN(me)?1:me,ye=isNaN(ye)?0:ye,Ne=isNaN(Ne)?0:Ne,this.ctx.transform=new c(B,X,ie,me,ye,Ne)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(B,X,ie,me,ye,Ne,le,Q,J){var se=this.pdf.getImageProperties(B),Z=1,je=1,Ee=1,Pe=1;me!==void 0&&Q!==void 0&&(Ee=Q/me,Pe=J/ye,Z=se.width/me*Q/me,je=se.height/ye*J/ye),Ne===void 0&&(Ne=X,le=ie,X=0,ie=0),me!==void 0&&Q===void 0&&(Q=me,J=ye),me===void 0&&Q===void 0&&(Q=se.width,J=se.height);for(var de,be=this.ctx.transform.decompose(),Ve=G(be.rotate.shx),ze=new c,Xe=(ze=(ze=(ze=ze.multiply(be.translate)).multiply(be.skew)).multiply(be.scale)).applyToRectangle(new l(Ne-X*Ee,le-ie*Pe,me*Z,ye*je)),et=y.call(this,Xe),ge=[],Oe=0;Oe<et.length;Oe+=1)ge.indexOf(et[Oe])===-1&&ge.push(et[Oe]);if(w(ge),this.autoPaging)for(var it=ge[0],nt=ge[ge.length-1],wt=it;wt<nt+1;wt++){this.pdf.setPage(wt);var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],or=wt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=wt===1?0:It+(wt-2)*Ut;if(this.ctx.clip_path.length!==0){var cn=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(de,this.posX+this.margin[3],-bt+or+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=cn}var xr=JSON.parse(JSON.stringify(Xe));xr=_([xr],this.posX+this.margin[3],-bt+or+this.ctx.prevPageLastElemOffset)[0];var Dr=(wt>it||wt<nt)&&g.call(this);Dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ut,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",xr.x,xr.y,xr.w,xr.h,null,null,Ve),Dr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,Ve)};var y=function(B,X,ie){var me=[];X=X||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ye=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":me.push(Math.floor((B.y+ye)/ie)+1);break;case"arc":me.push(Math.floor((B.y+ye-B.radius)/ie)+1),me.push(Math.floor((B.y+ye+B.radius)/ie)+1);break;case"qct":var Ne=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);me.push(Math.floor((Ne.y+ye)/ie)+1),me.push(Math.floor((Ne.y+Ne.h+ye)/ie)+1);break;case"bct":var le=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);me.push(Math.floor((le.y+ye)/ie)+1),me.push(Math.floor((le.y+le.h+ye)/ie)+1);break;case"rect":me.push(Math.floor((B.y+ye)/ie)+1),me.push(Math.floor((B.y+B.h+ye)/ie)+1)}for(var Q=0;Q<me.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<me[Q];)j.call(this);return me},j=function(){var B=this.fillStyle,X=this.strokeStyle,ie=this.font,me=this.lineCap,ye=this.lineWidth,Ne=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=X,this.font=ie,this.lineCap=me,this.lineWidth=ye,this.lineJoin=Ne},_=function(B,X,ie){for(var me=0;me<B.length;me++)switch(B[me].type){case"bct":B[me].x2+=X,B[me].y2+=ie;case"qct":B[me].x1+=X,B[me].y1+=ie;case"mt":case"lt":case"arc":default:B[me].x+=X,B[me].y+=ie}return B},w=function(B){return B.sort(function(X,ie){return X-ie})},A=function(B,X){for(var ie,me,ye=this.fillStyle,Ne=this.strokeStyle,le=this.lineCap,Q=this.lineWidth,J=Math.abs(Q*this.ctx.transform.scaleX),se=this.lineJoin,Z=JSON.parse(JSON.stringify(this.path)),je=JSON.parse(JSON.stringify(this.path)),Ee=[],Pe=0;Pe<je.length;Pe++)if(je[Pe].x!==void 0)for(var de=y.call(this,je[Pe]),be=0;be<de.length;be+=1)Ee.indexOf(de[be])===-1&&Ee.push(de[be]);for(var Ve=0;Ve<Ee.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<Ee[Ve];)j.call(this);if(w(Ee),this.autoPaging)for(var ze=Ee[0],Xe=Ee[Ee.length-1],et=ze;et<Xe+1;et++){this.pdf.setPage(et),this.fillStyle=ye,this.strokeStyle=Ne,this.lineCap=le,this.lineWidth=J,this.lineJoin=se;var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=et===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=et===1?0:it+(et-2)*nt;if(this.ctx.clip_path.length!==0){var mt=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ie,this.posX+this.margin[3],-wt+Oe+this.ctx.prevPageLastElemOffset),S.call(this,B,!0),this.path=mt}if(me=JSON.parse(JSON.stringify(Z)),this.path=_(me,this.posX+this.margin[3],-wt+Oe+this.ctx.prevPageLastElemOffset),X===!1||et===0){var or=(et>ze||et<Xe)&&g.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,nt,null).clip().discardPath()),S.call(this,B,X),or&&this.pdf.restoreGraphicsState()}this.lineWidth=Q}else this.lineWidth=J,S.call(this,B,X),this.lineWidth=Q;this.path=Z},S=function(B,X){if((B!=="stroke"||X||!v.call(this))&&(B==="stroke"||X||!p.call(this))){for(var ie,me,ye=[],Ne=this.path,le=0;le<Ne.length;le++){var Q=Ne[le];switch(Q.type){case"begin":ye.push({begin:!0});break;case"close":ye.push({close:!0});break;case"mt":ye.push({start:Q,deltas:[],abs:[]});break;case"lt":var J=ye.length;if(Ne[le-1]&&!isNaN(Ne[le-1].x)&&(ie=[Q.x-Ne[le-1].x,Q.y-Ne[le-1].y],J>0)){for(;J>=0;J--)if(ye[J-1].close!==!0&&ye[J-1].begin!==!0){ye[J-1].deltas.push(ie),ye[J-1].abs.push(Q);break}}break;case"bct":ie=[Q.x1-Ne[le-1].x,Q.y1-Ne[le-1].y,Q.x2-Ne[le-1].x,Q.y2-Ne[le-1].y,Q.x-Ne[le-1].x,Q.y-Ne[le-1].y],ye[ye.length-1].deltas.push(ie);break;case"qct":var se=Ne[le-1].x+2/3*(Q.x1-Ne[le-1].x),Z=Ne[le-1].y+2/3*(Q.y1-Ne[le-1].y),je=Q.x+2/3*(Q.x1-Q.x),Ee=Q.y+2/3*(Q.y1-Q.y),Pe=Q.x,de=Q.y;ie=[se-Ne[le-1].x,Z-Ne[le-1].y,je-Ne[le-1].x,Ee-Ne[le-1].y,Pe-Ne[le-1].x,de-Ne[le-1].y],ye[ye.length-1].deltas.push(ie);break;case"arc":ye.push({deltas:[],abs:[],arc:!0}),Array.isArray(ye[ye.length-1].abs)&&ye[ye.length-1].abs.push(Q)}}me=X?null:B==="stroke"?"stroke":"fill";for(var be=!1,Ve=0;Ve<ye.length;Ve++)if(ye[Ve].arc)for(var ze=ye[Ve].abs,Xe=0;Xe<ze.length;Xe++){var et=ze[Xe];et.type==="arc"?T.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,X,!be):q.call(this,et.x,et.y),be=!0}else if(ye[Ve].close===!0)this.pdf.internal.out("h"),be=!1;else if(ye[Ve].begin!==!0){var ge=ye[Ve].start.x,Oe=ye[Ve].start.y;F.call(this,ye[Ve].deltas,ge,Oe),be=!0}me&&M.call(this,me),X&&z.call(this)}},P=function(B){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-ie;case"top":return B+X-ie;case"hanging":return B+X-2*ie;case"middle":return B+X/2-ie;case"ideographic":return B;case"alphabetic":default:return B}},C=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(X,ie){this.colorStops.push([X,ie])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(B,X,ie,me,ye,Ne,le,Q,J){for(var se=V.call(this,ie,me,ye,Ne),Z=0;Z<se.length;Z++){var je=se[Z];Z===0&&(J?O.call(this,je.x1+B,je.y1+X):q.call(this,je.x1+B,je.y1+X)),W.call(this,B,X,je.x2,je.y2,je.x3,je.y3,je.x4,je.y4)}Q?z.call(this):M.call(this,le)},M=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(B,X){this.pdf.internal.out(r(B)+" "+s(X)+" m")},I=function(B){var X;switch(B.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var ie=this.pdf.getTextDimensions(B.text),me=P.call(this,B.y),ye=C.call(this,me)-ie.h,Ne=this.ctx.transform.applyToPoint(new o(B.x,me)),le=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var J,se,Z,je=this.ctx.transform.applyToRectangle(new l(B.x,me,ie.w,ie.h)),Ee=Q.applyToRectangle(new l(B.x,ye,ie.w,ie.h)),Pe=y.call(this,Ee),de=[],be=0;be<Pe.length;be+=1)de.indexOf(Pe[be])===-1&&de.push(Pe[be]);if(w(de),this.autoPaging)for(var Ve=de[0],ze=de[de.length-1],Xe=Ve;Xe<ze+1;Xe++){this.pdf.setPage(Xe);var et=Xe===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[2],it=Oe-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],wt=nt-this.margin[3],mt=Xe===1?0:ge+(Xe-2)*it;if(this.ctx.clip_path.length!==0){var or=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(J,this.posX+this.margin[3],-1*mt+et),S.call(this,"fill",!0),this.path=or}var It=_([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-mt+et+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(se*B.scale),Z=this.lineWidth,this.lineWidth=Z*B.scale);var Ut=this.autoPaging!=="text";if(Ut||It.y+It.h<=Oe){if(Ut||It.y>=et&&It.x<=nt){var bt=Ut?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||nt-It.x)[0],cn=_([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-mt+et+this.ctx.prevPageLastElemOffset)[0],xr=Ut&&(Xe>Ve||Xe<ze)&&g.call(this);xr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,it,null).clip().discardPath()),this.pdf.text(bt,cn.x,cn.y,{angle:B.angle,align:X,renderingMode:B.renderingMode}),xr&&this.pdf.restoreGraphicsState()}}else It.y<Oe&&(this.ctx.prevPageLastElemOffset+=Oe-It.y);B.scale>=.01&&(this.pdf.setFontSize(se),this.lineWidth=Z)}else B.scale>=.01&&(se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(se*B.scale),Z=this.lineWidth,this.lineWidth=Z*B.scale),this.pdf.text(B.text,Ne.x+this.posX,Ne.y+this.posY,{angle:B.angle,align:X,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(se),this.lineWidth=Z)},q=function(B,X,ie,me){ie=ie||0,me=me||0,this.pdf.internal.out(r(B+ie)+" "+s(X+me)+" l")},F=function(B,X,ie){return this.pdf.lines(B,X,ie,null,null)},W=function(B,X,ie,me,ye,Ne,le,Q){this.pdf.internal.out([t(i(ie+B)),t(a(me+X)),t(i(ye+B)),t(a(Ne+X)),t(i(le+B)),t(a(Q+X)),"c"].join(" "))},V=function(B,X,ie,me){for(var ye=2*Math.PI,Ne=Math.PI/2;X>ie;)X-=ye;var le=Math.abs(ie-X);le<ye&&me&&(le=ye-le);for(var Q=[],J=me?-1:1,se=X;le>1e-5;){var Z=se+J*Math.min(le,Ne);Q.push(ne.call(this,B,se,Z)),le-=Math.abs(Z-se),se=Z}return Q},ne=function(B,X,ie){var me=(ie-X)/2,ye=B*Math.cos(me),Ne=B*Math.sin(me),le=ye,Q=-Ne,J=le*le+Q*Q,se=J+le*ye+Q*Ne,Z=4/3*(Math.sqrt(2*J*se)-se)/(le*Ne-Q*ye),je=le-Z*Q,Ee=Q+Z*le,Pe=je,de=-Ee,be=me+X,Ve=Math.cos(be),ze=Math.sin(be);return{x1:B*Math.cos(X),y1:B*Math.sin(X),x2:je*Ve-Ee*ze,y2:je*ze+Ee*Ve,x3:Pe*Ve-de*ze,y3:Pe*ze+de*Ve,x4:B*Math.cos(ie),y4:B*Math.sin(ie)}},G=function(B){return 180*B/Math.PI},K=function(B,X,ie,me,ye,Ne){var le=B+.5*(ie-B),Q=X+.5*(me-X),J=ye+.5*(ie-ye),se=Ne+.5*(me-Ne),Z=Math.min(B,ye,le,J),je=Math.max(B,ye,le,J),Ee=Math.min(X,Ne,Q,se),Pe=Math.max(X,Ne,Q,se);return new l(Z,Ee,je-Z,Pe-Ee)},ee=function(B,X,ie,me,ye,Ne,le,Q){var J,se,Z,je,Ee,Pe,de,be,Ve,ze,Xe,et,ge,Oe,it=ie-B,nt=me-X,wt=ye-ie,mt=Ne-me,or=le-ye,It=Q-Ne;for(se=0;se<41;se++)Ve=(de=(Z=B+(J=se/40)*it)+J*((Ee=ie+J*wt)-Z))+J*(Ee+J*(ye+J*or-Ee)-de),ze=(be=(je=X+J*nt)+J*((Pe=me+J*mt)-je))+J*(Pe+J*(Ne+J*It-Pe)-be),se==0?(Xe=Ve,et=ze,ge=Ve,Oe=ze):(Xe=Math.min(Xe,Ve),et=Math.min(et,ze),ge=Math.max(ge,Ve),Oe=Math.max(Oe,ze));return new l(Math.round(Xe),Math.round(et),Math.round(ge-Xe),Math.round(Oe-et))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,X,ie=(B=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:X}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(Zt.API),function(e){var t=function(a){var o,l,c,u,d,h,m,p,v,g;for(l=[],c=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>c;c+=4)(d=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(d=((d=((d=((d=(d-(g=d%85))/85)-(v=d%85))/85)-(p=d%85))/85)-(m=d%85))/85)%85,l.push(h+33,m+33,p+33,v+33,g+33)):l.push(122);return function(y,j){for(var _=j;_>0;_--)y.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(a){var o,l,c,u,d,h=String,m="length",p=255,v="charCodeAt",g="slice",y="replace";for(a[g](-2),a=a[g](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),c=[],u=0,d=(a+=o="uuuuu"[g](a[m]%5||5))[m];d>u;u+=5)l=52200625*(a[v](u)-33)+614125*(a[v](u+1)-33)+7225*(a[v](u+2)-33)+85*(a[v](u+3)-33)+(a[v](u+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(j,_){for(var w=_;w>0;w--)j.pop()}(c,o[m]),h.fromCharCode.apply(h,c)},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},i=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return a=(o=QC(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(a,o){var l=0,c=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=s(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Zt.API),function(e){e.loadFile=function(t,r,s){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var h=new XMLHttpRequest,m=0,p=function(v){var g=v.length,y=[],j=String.fromCharCode;for(m=0;m<g;m+=1)y.push(j(255&v.charCodeAt(m)));return y.join("")};if(h.open("GET",c,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(p(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return p(h.responseText)}(i,a,o)}catch{}return l}(t,r,s)},e.loadImageFile=e.loadFile}(Zt.API),function(e){function t(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):uh(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):uh(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var s=function(o){var l=en(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(s(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(c(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],v=p.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(s(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(s(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||Zt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,u),h}).then(u,d).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=c.call(u,o,l);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Zt.getPageSize=function(o,l,c){if(en(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var d,h=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var p,v=0,g=0;if(m.hasOwnProperty(h))v=m[h][1]/d,g=m[h][0]/d;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(p=g,g=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(p=g,g=v,v=p)}return{width:g,height:v,unit:l,k:d,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(i4):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(Zt.API),Zt.API.addJS=function(e){return r$=e,this.internal.events.subscribe("postPutResources",function(){d1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(d1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),t$=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r$+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){d1!==void 0&&t$!==void 0&&this.internal.out("/Names <</JavaScript "+d1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=s.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,i,a){var o={title:i,options:a,children:[]};return s==null&&(s=this.root),s.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<s.children.length;a++){var o=s.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),a>0&&this.line("/Prev "+this.makeRef(s.children[a-1])),a<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<s.children.length;u++)this.renderItems(s.children[u])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,i){for(var a=0;a<i.children.length;a++)s.count++,this.count_r(s,i.children[a]);return s.count}}])}(Zt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,i,a,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,g={width:0,height:0,numcomponents:1},y=4;y<v;y+=2){if(y+=p,t.indexOf(h.charCodeAt(y+1))!==-1){m=256*h.charCodeAt(y+5)+h.charCodeAt(y+6),g={width:256*h.charCodeAt(y+7)+h.charCodeAt(y+8),height:m,numcomponents:h.charCodeAt(y+9)};break}p=256*h.charCodeAt(y+2)+h.charCodeAt(y+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:s,alias:i}}return d}}(Zt.API);var hp,h1,n$,s$,i$,jVe=function(){var e,t,r;function s(a){var o,l,c,u,d,h,m,p,v,g,y,j,_,w;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=(function(){var A,S;for(S=[],A=0;A<4;++A)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),a=(h!=null?h.data:void 0)||this.imgData,j=0;0<=o?j<o:j>o;0<=o?++j:--j)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(_=0;0<=g?_<g:_>g;0<=g?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(y=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,y.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,y.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(a){var o,l;for(l=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)l.push(this.data[this.pos++]);return l},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,m,p,v){var g,y,j,_,w,A,S,P,C,T,M,z,O,I,q,F,W,V,ne,G,K,ee=Math.ceil((u.width-h)/p),xe=Math.ceil((u.height-m)/v),B=u.width==ee&&u.height==xe;for(I=o*ee,z=B?l:new Uint8Array(I*xe),A=a.length,O=0,y=0;O<xe&&c<A;){switch(a[c++]){case 0:for(_=W=0;W<I;_=W+=1)z[y++]=a[c++];break;case 1:for(_=V=0;V<I;_=V+=1)g=a[c++],w=_<o?0:z[y-o],z[y++]=(g+w)%256;break;case 2:for(_=ne=0;ne<I;_=ne+=1)g=a[c++],j=(_-_%o)/o,q=O&&z[(O-1)*I+j*o+_%o],z[y++]=(q+g)%256;break;case 3:for(_=G=0;G<I;_=G+=1)g=a[c++],j=(_-_%o)/o,w=_<o?0:z[y-o],q=O&&z[(O-1)*I+j*o+_%o],z[y++]=(g+Math.floor((w+q)/2))%256;break;case 4:for(_=K=0;K<I;_=K+=1)g=a[c++],j=(_-_%o)/o,w=_<o?0:z[y-o],O===0?q=F=0:(q=z[(O-1)*I+j*o+_%o],F=j&&z[(O-1)*I+(j-1)*o+_%o]),S=w+q-F,P=Math.abs(S-w),T=Math.abs(S-q),M=Math.abs(S-F),C=P<=T&&P<=M?w:T<=M?q:F,z[y++]=(g+C)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!B){var X=((m+O*v)*u.width+h)*o,ie=O*I;for(_=0;_<ee;_+=1){for(var me=0;me<o;me+=1)l[X++]=z[ie++];X+=(p-1)*o}}O++}}return a=Q9e(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},s.prototype.decodePalette=function(){var a,o,l,c,u,d,h,m,p;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),c=0,a=0,o=h=0,m=l.length;h<m;o=h+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(p=d[a++])!=null?p:255;return u},s.prototype.copyToImageData=function(a,o){var l,c,u,d,h,m,p,v,g,y,j;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(u=a.data||a).length,h=g||o,d=m=0,c===1)for(;d<v;)p=g?4*o[d/4]:m,y=h[p++],u[d++]=y,u[d++]=y,u[d++]=y,u[d++]=l?h[p++]:255,m=p;else for(;d<v;)p=g?4*o[d/4]:m,u[d++]=h[p++],u[d++]=h[p++],u[d++]=h[p++],u[d++]=l?h[p++]:255,m=p},s.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Jt)==="[object Window]"){try{t=Jt.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(a){var o;if(i()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(a){var o,l,c,u,d,h,m,p;if(this.animation){for(p=[],l=d=0,h=(m=this.animation.frames).length;d<h;l=++d)o=m[l],c=a.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,p.push(o.image=e(c));return p}},s.prototype.renderFrame=function(a,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},s.prototype.animate=function(a){var o,l,c,u,d,h,m=this;return l=0,h=this.animation,u=h.numFrames,c=h.frames,d=h.numPlays,(o=function(){var p,v;if(p=l++%u,v=c[p],m.renderFrame(a,p),u>1&&l/u<d)return m.animation._timeout=setTimeout(o,v.delay)})()},s.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},s.prototype.render=function(a){var o,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function wVe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,o=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;a&&(l=t,c=o,t+=3*o);var u=!0,d=[],h=0,m=null,p=0,v=null;for(this.width=r,this.height=s;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],!(1&g)&&(m=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,A=e[t++],S=A>>6&1,P=1<<(7&A)+1,C=l,T=c,M=!1;A>>7&&(M=!0,C=t,T=P,t+=3*P);var z=t;for(t++;;){var O;if(!((O=e[t++])>=0))throw Error("Invalid block size");if(O===0)break;t+=O}d.push({x:y,y:j,width:_,height:w,has_local_palette:M,palette_offset:C,palette_size:T,data_offset:z,data_length:t-z,transparent_index:m,interlaced:!!S,delay:h,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return v},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,q){var F=this.frameInfo(I),W=F.width*F.height,V=new Uint8Array(W);a$(e,F.data_offset,V,W);var ne=F.palette_offset,G=F.transparent_index;G===null&&(G=256);var K=F.width,ee=r-K,xe=K,B=4*(F.y*r+F.x),X=4*((F.y+F.height)*r+F.x),ie=B,me=4*ee;F.interlaced===!0&&(me+=4*r*7);for(var ye=8,Ne=0,le=V.length;Ne<le;++Ne){var Q=V[Ne];if(xe===0&&(xe=K,(ie+=me)>=X&&(me=4*ee+4*r*(ye-1),ie=B+(K+ee)*(ye<<1),ye>>=1)),Q===G)ie+=4;else{var J=e[ne+3*Q],se=e[ne+3*Q+1],Z=e[ne+3*Q+2];q[ie++]=Z,q[ie++]=se,q[ie++]=J,q[ie++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(I,q){var F=this.frameInfo(I),W=F.width*F.height,V=new Uint8Array(W);a$(e,F.data_offset,V,W);var ne=F.palette_offset,G=F.transparent_index;G===null&&(G=256);var K=F.width,ee=r-K,xe=K,B=4*(F.y*r+F.x),X=4*((F.y+F.height)*r+F.x),ie=B,me=4*ee;F.interlaced===!0&&(me+=4*r*7);for(var ye=8,Ne=0,le=V.length;Ne<le;++Ne){var Q=V[Ne];if(xe===0&&(xe=K,(ie+=me)>=X&&(me=4*ee+4*r*(ye-1),ie=B+(K+ee)*(ye<<1),ye>>=1)),Q===G)ie+=4;else{var J=e[ne+3*Q],se=e[ne+3*Q+1],Z=e[ne+3*Q+2];q[ie++]=J,q[ie++]=se,q[ie++]=Z,q[ie++]=255}--xe}}}function a$(e,t,r,s){for(var i=e[t++],a=1<<i,o=a+1,l=o+1,c=i+1,u=(1<<c)-1,d=0,h=0,m=0,p=e[t++],v=new Int32Array(4096),g=null;;){for(;d<16&&p!==0;)h|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var y=h&u;if(h>>=c,d-=c,y!==a){if(y===o)break;for(var j=y<l?y:g,_=0,w=j;w>a;)w=v[w]>>8,++_;var A=w;if(m+_+(j!==y?1:0)>s)return void hn.log("Warning, gif stream longer than expected.");r[m++]=A;var S=m+=_;for(j!==y&&(r[m++]=A),w=j;_--;)w=v[w],r[--S]=255&w,w>>=8;g!==null&&l<4096&&(v[l++]=g<<8|A,l>=u+1&&c<12&&(++c,u=u<<1|1)),g=y}else l=o+1,u=(1<<(c=i+1))-1,g=null}return m!==s&&hn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pS(e){var t,r,s,i,a,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),g=[],y=0,j=7,_=new Array(64),w=new Array(64),A=new Array(64),S=new Array(256),P=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(B,X){for(var ie=0,me=0,ye=new Array,Ne=1;Ne<=16;Ne++){for(var le=1;le<=B[Ne];le++)ye[X[me]]=[],ye[X[me]][0]=ie,ye[X[me]][1]=Ne,me++,ie++;ie*=2}return ye}function ne(B){for(var X=B[0],ie=B[1]-1;ie>=0;)X&1<<ie&&(y|=1<<j),ie--,--j<0&&(y==255?(G(255),G(0)):G(y),j=7,y=0)}function G(B){g.push(B)}function K(B){G(B>>8&255),G(255&B)}function ee(B,X,ie,me,ye){for(var Ne,le=ye[0],Q=ye[240],J=function(ze,Xe){var et,ge,Oe,it,nt,wt,mt,or,It,Ut,bt=0;for(It=0;It<8;++It){et=ze[bt],ge=ze[bt+1],Oe=ze[bt+2],it=ze[bt+3],nt=ze[bt+4],wt=ze[bt+5],mt=ze[bt+6];var cn=et+(or=ze[bt+7]),xr=et-or,Dr=ge+mt,ur=ge-mt,Wr=Oe+wt,fi=Oe-wt,Mr=it+nt,qc=it-nt,jn=cn+Mr,ca=cn-Mr,mo=Dr+Wr,En=Dr-Wr;ze[bt]=jn+mo,ze[bt+4]=jn-mo;var rr=.707106781*(En+ca);ze[bt+2]=ca+rr,ze[bt+6]=ca-rr;var Ir=.382683433*((jn=qc+fi)-(En=ur+xr)),Vc=.5411961*jn+Ir,_s=1.306562965*En+Ir,po=.707106781*(mo=fi+ur),ua=xr+po,Ht=xr-po;ze[bt+5]=Ht+Vc,ze[bt+3]=Ht-Vc,ze[bt+1]=ua+_s,ze[bt+7]=ua-_s,bt+=8}for(bt=0,It=0;It<8;++It){et=ze[bt],ge=ze[bt+8],Oe=ze[bt+16],it=ze[bt+24],nt=ze[bt+32],wt=ze[bt+40],mt=ze[bt+48];var Fa=et+(or=ze[bt+56]),go=et-or,mi=ge+mt,Fr=ge-mt,St=Oe+wt,pi=Oe-wt,Uc=it+nt,xo=it-nt,da=Fa+Uc,$i=Fa-Uc,ha=mi+St,Qs=mi-St;ze[bt]=da+ha,ze[bt+32]=da-ha;var Fi=.707106781*(Qs+$i);ze[bt+16]=$i+Fi,ze[bt+48]=$i-Fi;var vo=.382683433*((da=xo+pi)-(Qs=Fr+go)),Hc=.5411961*da+vo,td=1.306562965*Qs+vo,rd=.707106781*(ha=pi+Fr),Wc=go+rd,nd=go-rd;ze[bt+40]=nd+Hc,ze[bt+24]=nd-Hc,ze[bt+8]=Wc+td,ze[bt+56]=Wc-td,bt++}for(It=0;It<64;++It)Ut=ze[It]*Xe[It],p[It]=Ut>0?Ut+.5|0:Ut-.5|0;return p}(B,X),se=0;se<64;++se)v[C[se]]=J[se];var Z=v[0]-ie;ie=v[0],Z==0?ne(me[0]):(ne(me[m[Ne=32767+Z]]),ne(h[Ne]));for(var je=63;je>0&&v[je]==0;)je--;if(je==0)return ne(le),ie;for(var Ee,Pe=1;Pe<=je;){for(var de=Pe;v[Pe]==0&&Pe<=je;)++Pe;var be=Pe-de;if(be>=16){Ee=be>>4;for(var Ve=1;Ve<=Ee;++Ve)ne(Q);be&=15}Ne=32767+v[Pe],ne(ye[(be<<4)+m[Ne]]),ne(h[Ne]),Pe++}return je!=63&&ne(le),ie}function xe(B){B=Math.min(Math.max(B,1),100),a!=B&&(function(X){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var ye=o((ie[me]*X+50)/100);ye=Math.min(Math.max(ye,1),255),l[C[me]]=ye}for(var Ne=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var Q=o((Ne[le]*X+50)/100);Q=Math.min(Math.max(Q,1),255),c[C[le]]=Q}for(var J=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],se=0,Z=0;Z<8;Z++)for(var je=0;je<8;je++)u[se]=1/(l[C[se]]*J[Z]*J[je]*8),d[se]=1/(c[C[se]]*J[Z]*J[je]*8),se++}(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),a=B)}this.encode=function(B,X){X&&xe(X),g=new Array,y=0,j=7,K(65496),K(65504),K(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),K(1),K(1),G(0),G(0),function(){K(65499),K(132),G(0);for(var ge=0;ge<64;ge++)G(l[ge]);G(1);for(var Oe=0;Oe<64;Oe++)G(c[Oe])}(),function(ge,Oe){K(65472),K(17),G(8),K(Oe),K(ge),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(B.width,B.height),function(){K(65476),K(418),G(0);for(var ge=0;ge<16;ge++)G(T[ge+1]);for(var Oe=0;Oe<=11;Oe++)G(M[Oe]);G(16);for(var it=0;it<16;it++)G(z[it+1]);for(var nt=0;nt<=161;nt++)G(O[nt]);G(1);for(var wt=0;wt<16;wt++)G(I[wt+1]);for(var mt=0;mt<=11;mt++)G(q[mt]);G(17);for(var or=0;or<16;or++)G(F[or+1]);for(var It=0;It<=161;It++)G(W[It])}(),K(65498),K(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var ie=0,me=0,ye=0;y=0,j=7,this.encode.displayName="_encode_";for(var Ne,le,Q,J,se,Z,je,Ee,Pe,de=B.data,be=B.width,Ve=B.height,ze=4*be,Xe=0;Xe<Ve;){for(Ne=0;Ne<ze;){for(se=ze*Xe+Ne,je=-1,Ee=0,Pe=0;Pe<64;Pe++)Z=se+(Ee=Pe>>3)*ze+(je=4*(7&Pe)),Xe+Ee>=Ve&&(Z-=ze*(Xe+1+Ee-Ve)),Ne+je>=ze&&(Z-=Ne+je-ze+4),le=de[Z++],Q=de[Z++],J=de[Z++],_[Pe]=(P[le]+P[Q+256>>0]+P[J+512>>0]>>16)-128,w[Pe]=(P[le+768>>0]+P[Q+1024>>0]+P[J+1280>>0]>>16)-128,A[Pe]=(P[le+1280>>0]+P[Q+1536>>0]+P[J+1792>>0]>>16)-128;ie=ee(_,u,ie,t,s),me=ee(w,d,me,r,i),ye=ee(A,d,ye,r,i),Ne+=32}Xe+=8}if(j>=0){var et=[];et[1]=j+1,et[0]=(1<<j+1)-1,ne(et)}return K(65497),new Uint8Array(g)},e=e||50,function(){for(var B=String.fromCharCode,X=0;X<256;X++)S[X]=B(X)}(),t=V(T,M),r=V(I,q),s=V(z,O),i=V(F,W),function(){for(var B=1,X=2,ie=1;ie<=15;ie++){for(var me=B;me<X;me++)m[32767+me]=ie,h[32767+me]=[],h[32767+me][1]=ie,h[32767+me][0]=me;for(var ye=-(X-1);ye<=-B;ye++)m[32767+ye]=ie,h[32767+ye]=[],h[32767+ye][1]=ie,h[32767+ye][0]=X-1+ye;B<<=1,X<<=1}}(),function(){for(var B=0;B<256;B++)P[B]=19595*B,P[B+256>>0]=38470*B,P[B+512>>0]=7471*B+32768,P[B+768>>0]=-11059*B,P[B+1024>>0]=-21709*B,P[B+1280>>0]=32768*B+8421375,P[B+1536>>0]=-27439*B,P[B+1792>>0]=-5329*B}(),xe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function o$(e){function t(T){if(!T)throw Error("assert :P")}function r(T,M,z){for(var O=0;4>O;O++)if(T[M+O]!=z.charCodeAt(O))return!0;return!1}function s(T,M,z,O,I){for(var q=0;q<I;q++)T[M+q]=z[O+q]}function i(T,M,z,O){for(var I=0;I<O;I++)T[M+I]=z}function a(T){return new Int32Array(T)}function o(T,M){for(var z=[],O=0;O<T;O++)z.push(new M);return z}function l(T,M){var z=[];return function O(I,q,F){for(var W=F[q],V=0;V<W&&(I.push(F.length>q+1?[]:new M),!(F.length<q+1));V++)O(I[V],q+1,F)}(z,0,T),z}var c=function(){var T=this;function M(N,E){for(var $=1<<E-1>>>0;N&$;)$>>>=1;return $?(N&$-1)+$:N}function z(N,E,$,U,te){t(!(U%$));do N[E+(U-=$)]=te;while(0<U)}function O(N,E,$,U,te){if(t(2328>=te),512>=te)var ae=a(512);else if((ae=a(te))==null)return 0;return function(oe,ue,fe,_e,Me,He){var We,Fe,lt=ue,Qe=1<<fe,Ie=a(16),Re=a(16);for(t(Me!=0),t(_e!=null),t(oe!=null),t(0<fe),Fe=0;Fe<Me;++Fe){if(15<_e[Fe])return 0;++Ie[_e[Fe]]}if(Ie[0]==Me)return 0;for(Re[1]=0,We=1;15>We;++We){if(Ie[We]>1<<We)return 0;Re[We+1]=Re[We]+Ie[We]}for(Fe=0;Fe<Me;++Fe)We=_e[Fe],0<_e[Fe]&&(He[Re[We]++]=Fe);if(Re[15]==1)return(_e=new I).g=0,_e.value=He[0],z(oe,lt,1,Qe,_e),Qe;var at,ut=-1,ot=Qe-1,Et=0,Nt=1,Wt=1,Pt=1<<fe;for(Fe=0,We=1,Me=2;We<=fe;++We,Me<<=1){if(Nt+=Wt<<=1,0>(Wt-=Ie[We]))return 0;for(;0<Ie[We];--Ie[We])(_e=new I).g=We,_e.value=He[Fe++],z(oe,lt+Et,Me,Pt,_e),Et=M(Et,We)}for(We=fe+1,Me=2;15>=We;++We,Me<<=1){if(Nt+=Wt<<=1,0>(Wt-=Ie[We]))return 0;for(;0<Ie[We];--Ie[We]){if(_e=new I,(Et&ot)!=ut){for(lt+=Pt,at=1<<(ut=We)-fe;15>ut&&!(0>=(at-=Ie[ut]));)++ut,at<<=1;Qe+=Pt=1<<(at=ut-fe),oe[ue+(ut=Et&ot)].g=at+fe,oe[ue+ut].value=lt-ue-ut}_e.g=We-fe,_e.value=He[Fe++],z(oe,lt+(Et>>fe),Me,Pt,_e),Et=M(Et,We)}}return Nt!=2*Re[15]-1?0:Qe}(N,E,$,U,te,ae)}function I(){this.value=this.g=0}function q(){this.value=this.g=0}function F(){this.G=o(5,I),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Zn,q)}function W(N,E,$,U){t(N!=null),t(E!=null),t(2147483648>U),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=E,N.pa=$,N.Jd=E,N.Yc=$+U,N.Zc=4<=U?$+U-4+1:$,Ne(N)}function V(N,E){for(var $=0;0<E--;)$|=Q(N,128)<<E;return $}function ne(N,E){var $=V(N,E);return le(N)?-$:$}function G(N,E,$,U){var te,ae=0;for(t(N!=null),t(E!=null),t(4294967288>U),N.Sb=U,N.Ra=0,N.u=0,N.h=0,4<U&&(U=4),te=0;te<U;++te)ae+=E[$+te]<<8*te;N.Ra=ae,N.bb=U,N.oa=E,N.pa=$}function K(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<nl-8>>>0,++N.bb,N.u-=8;ie(N)&&(N.h=1,N.u=0)}function ee(N,E){if(t(0<=E),!N.h&&E<=Ui){var $=X(N)&md[E];return N.u+=E,K(N),$}return N.h=1,N.u=0}function xe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function B(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(N){return N.Ra>>>(N.u&nl-1)>>>0}function ie(N){return t(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>nl}function me(N,E){N.u=E,N.h=ie(N)}function ye(N){N.u>=Xh&&(t(N.u>=Xh),K(N))}function Ne(N){t(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(t(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function le(N){return V(N,1)}function Q(N,E){var $=N.Ca;0>N.b&&Ne(N);var U=N.b,te=$*E>>>8,ae=(N.I>>>U>te)+0;for(ae?($-=te,N.I-=te+1<<U>>>0):$=te+1,U=$,te=0;256<=U;)te+=8,U>>=8;return U=7^te+Bs[U],N.b-=U,N.Ca=($<<U)-1,ae}function J(N,E,$){N[E+0]=$>>24&255,N[E+1]=$>>16&255,N[E+2]=$>>8&255,N[E+3]=$>>0&255}function se(N,E){return N[E+0]<<0|N[E+1]<<8}function Z(N,E){return se(N,E)|N[E+2]<<16}function je(N,E){return se(N,E)|se(N,E+2)<<16}function Ee(N,E){var $=1<<E;return t(N!=null),t(0<E),N.X=a($),N.X==null?0:(N.Mb=32-E,N.Xa=E,1)}function Pe(N,E){t(N!=null),t(E!=null),t(N.Xa==E.Xa),s(E.X,0,N.X,0,1<<E.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function be(N,E,$,U){t($!=null),t(U!=null);var te=$[0],ae=U[0];return te==0&&(te=(N*ae+E/2)/E),ae==0&&(ae=(E*te+N/2)/N),0>=te||0>=ae?0:($[0]=te,U[0]=ae,1)}function Ve(N,E){return N+(1<<E)-1>>>E}function ze(N,E){return((4278255360&N)+(4278255360&E)>>>0&4278255360)+((16711935&N)+(16711935&E)>>>0&16711935)>>>0}function Xe(N,E){T[E]=function($,U,te,ae,oe,ue,fe){var _e;for(_e=0;_e<oe;++_e){var Me=T[N](ue[fe+_e-1],te,ae+_e);ue[fe+_e]=ze($[U+_e],Me)}}}function et(){this.ud=this.hd=this.jd=0}function ge(N,E){return((4278124286&(N^E))>>>1)+(N&E)>>>0}function Oe(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function it(N,E){return Oe(N+(N-E+.5>>1))}function nt(N,E,$){return Math.abs(E-$)-Math.abs(N-$)}function wt(N,E,$,U,te,ae,oe){for(U=ae[oe-1],$=0;$<te;++$)ae[oe+$]=U=ze(N[E+$],U)}function mt(N,E,$,U,te){var ae;for(ae=0;ae<$;++ae){var oe=N[E+ae],ue=oe>>8&255,fe=16711935&(fe=(fe=16711935&oe)+((ue<<16)+ue));U[te+ae]=(4278255360&oe)+fe>>>0}}function or(N,E){E.jd=N>>0&255,E.hd=N>>8&255,E.ud=N>>16&255}function It(N,E,$,U,te,ae){var oe;for(oe=0;oe<U;++oe){var ue=E[$+oe],fe=ue>>>8,_e=ue,Me=255&(Me=(Me=ue>>>16)+((N.jd<<24>>24)*(fe<<24>>24)>>>5));_e=255&(_e=(_e=_e+((N.hd<<24>>24)*(fe<<24>>24)>>>5))+((N.ud<<24>>24)*(Me<<24>>24)>>>5)),te[ae+oe]=(4278255360&ue)+(Me<<16)+_e}}function Ut(N,E,$,U,te){T[E]=function(ae,oe,ue,fe,_e,Me,He,We,Fe){for(fe=He;fe<We;++fe)for(He=0;He<Fe;++He)_e[Me++]=te(ue[U(ae[oe++])])},T[N]=function(ae,oe,ue,fe,_e,Me,He){var We=8>>ae.b,Fe=ae.Ea,lt=ae.K[0],Qe=ae.w;if(8>We)for(ae=(1<<ae.b)-1,Qe=(1<<We)-1;oe<ue;++oe){var Ie,Re=0;for(Ie=0;Ie<Fe;++Ie)Ie&ae||(Re=U(fe[_e++])),Me[He++]=te(lt[Re&Qe]),Re>>=We}else T["VP8LMapColor"+$](fe,_e,lt,Qe,Me,He,oe,ue,Fe)}}function bt(N,E,$,U,te){for($=E+$;E<$;){var ae=N[E++];U[te++]=ae>>16&255,U[te++]=ae>>8&255,U[te++]=ae>>0&255}}function cn(N,E,$,U,te){for($=E+$;E<$;){var ae=N[E++];U[te++]=ae>>16&255,U[te++]=ae>>8&255,U[te++]=ae>>0&255,U[te++]=ae>>24&255}}function xr(N,E,$,U,te){for($=E+$;E<$;){var ae=(oe=N[E++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;U[te++]=ae,U[te++]=oe}}function Dr(N,E,$,U,te){for($=E+$;E<$;){var ae=(oe=N[E++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;U[te++]=ae,U[te++]=oe}}function ur(N,E,$,U,te){for($=E+$;E<$;){var ae=N[E++];U[te++]=ae>>0&255,U[te++]=ae>>8&255,U[te++]=ae>>16&255}}function Wr(N,E,$,U,te,ae){if(ae==0)for($=E+$;E<$;)J(U,((ae=N[E++])[0]>>24|ae[1]>>8&65280|ae[2]<<8&16711680|ae[3]<<24)>>>0),te+=32;else s(U,te,N,E,$)}function fi(N,E){T[E][0]=T[N+"0"],T[E][1]=T[N+"1"],T[E][2]=T[N+"2"],T[E][3]=T[N+"3"],T[E][4]=T[N+"4"],T[E][5]=T[N+"5"],T[E][6]=T[N+"6"],T[E][7]=T[N+"7"],T[E][8]=T[N+"8"],T[E][9]=T[N+"9"],T[E][10]=T[N+"10"],T[E][11]=T[N+"11"],T[E][12]=T[N+"12"],T[E][13]=T[N+"13"],T[E][14]=T[N+"0"],T[E][15]=T[N+"0"]}function Mr(N){return N==qm||N==Vm||N==Um||N==f}function qc(){this.eb=[],this.size=this.A=this.fb=0}function jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ca(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qc,this.f.kb=new jn,this.sd=null}function mo(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function En(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function rr(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Ir(N,E){var $=N.T,U=E.ba.f.RGBA,te=U.eb,ae=U.fb+N.ka*U.A,oe=ni[E.ba.S],ue=N.y,fe=N.O,_e=N.f,Me=N.N,He=N.ea,We=N.W,Fe=E.cc,lt=E.dc,Qe=E.Mc,Ie=E.Nc,Re=N.ka,at=N.ka+N.T,ut=N.U,ot=ut+1>>1;for(Re==0?oe(ue,fe,null,null,_e,Me,He,We,_e,Me,He,We,te,ae,null,null,ut):(oe(E.ec,E.fc,ue,fe,Fe,lt,Qe,Ie,_e,Me,He,We,te,ae-U.A,te,ae,ut),++$);Re+2<at;Re+=2)Fe=_e,lt=Me,Qe=He,Ie=We,Me+=N.Rc,We+=N.Rc,ae+=2*U.A,oe(ue,(fe+=2*N.fa)-N.fa,ue,fe,Fe,lt,Qe,Ie,_e,Me,He,We,te,ae-U.A,te,ae,ut);return fe+=N.fa,N.j+at<N.o?(s(E.ec,E.fc,ue,fe,ut),s(E.cc,E.dc,_e,Me,ot),s(E.Mc,E.Nc,He,We,ot),$--):1&at||oe(ue,fe,null,null,_e,Me,He,We,_e,Me,He,We,te,ae+U.A,null,null,ut),$}function Vc(N,E,$){var U=N.F,te=[N.J];if(U!=null){var ae=N.U,oe=E.ba.S,ue=oe==tf||oe==Um;E=E.ba.f.RGBA;var fe=[0],_e=N.ka;fe[0]=N.T,N.Kb&&(_e==0?--fe[0]:(--_e,te[0]-=N.width),N.j+N.ka+N.T==N.o&&(fe[0]=N.o-N.j-_e));var Me=E.eb;_e=E.fb+_e*E.A,N=Kr(U,te[0],N.width,ae,fe,Me,_e+(ue?0:3),E.A),t($==fe),N&&Mr(oe)&&Cs(Me,_e,ue,ae,fe,E.A)}return 0}function _s(N){var E=N.ma,$=E.ba.S,U=11>$,te=$==Qh||$==ef||$==tf||$==Bm||$==12||Mr($);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Zh(E.Oa,N,te?11:12))return 0;if(te&&Mr($)&&ht(),N.da)alert("todo:use_scaling");else{if(U){if(E.Ib=rr,N.Kb){if($=N.U+1>>1,E.memory=a(N.U+2*$),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+N.U,E.Mc=E.cc,E.Nc=E.dc+$,E.Ib=Ir,ht()}}else alert("todo:EmitYUV");te&&(E.Jb=Vc,U&&Be())}if(U&&!w3){for(N=0;256>N;++N)qY[N]=89858*(N-128)+rb>>tb,HY[N]=-22014*(N-128)+rb,UY[N]=-45773*(N-128),VY[N]=113618*(N-128)+rb>>tb;for(N=qx;N<lN;++N)E=76283*(N-16)+rb>>tb,WY[N-qx]=wn(E,255),GY[N-qx]=wn(E+8>>4,15);w3=1}return 1}function po(N){var E=N.ma,$=N.U,U=N.T;return t(!(1&N.ka)),0>=$||0>=U?0:($=E.Ib(N,E),E.Jb!=null&&E.Jb(N,E,$),E.Dc+=$,1)}function ua(N){N.ma.memory=null}function Ht(N,E,$,U){return ee(N,8)!=47?0:(E[0]=ee(N,14)+1,$[0]=ee(N,14)+1,U[0]=ee(N,1),ee(N,3)!=0?0:!N.h)}function Fa(N,E){if(4>N)return N+1;var $=N-2>>1;return(2+(1&N)<<$)+ee(E,$)+1}function go(N,E){return 120<E?E-120:1<=($=(($=Te[E-1])>>4)*N+(8-(15&$)))?$:1;var $}function mi(N,E,$){var U=X($),te=N[E+=255&U].g-8;return 0<te&&(me($,$.u+8),U=X($),E+=N[E].value,E+=U&(1<<te)-1),me($,$.u+N[E].g),N[E].value}function Fr(N,E,$){return $.g+=N.g,$.value+=N.value<<E>>>0,t(8>=$.g),N.g}function St(N,E,$){var U=N.xc;return t((E=U==0?0:N.vc[N.md*($>>U)+(E>>U)])<N.Wb),N.Ya[E]}function pi(N,E,$,U){var te=N.ab,ae=N.c*E,oe=N.C;E=oe+E;var ue=$,fe=U;for(U=N.Ta,$=N.Ua;0<te--;){var _e=N.gc[te],Me=oe,He=E,We=ue,Fe=fe,lt=(fe=U,ue=$,_e.Ea);switch(t(Me<He),t(He<=_e.nc),_e.hc){case 2:$m(We,Fe,(He-Me)*lt,fe,ue);break;case 0:var Qe=Me,Ie=He,Re=fe,at=ue,ut=(Pt=_e).Ea;Qe==0&&($x(We,Fe,null,null,1,Re,at),wt(We,Fe+1,0,0,ut-1,Re,at+1),Fe+=ut,at+=ut,++Qe);for(var ot=1<<Pt.b,Et=ot-1,Nt=Ve(ut,Pt.b),Wt=Pt.K,Pt=Pt.w+(Qe>>Pt.b)*Nt;Qe<Ie;){var $r=Wt,Yr=Pt,Or=1;for(Hi(We,Fe,Re,at-ut,1,Re,at);Or<ut;){var Ar=(Or&~Et)+ot;Ar>ut&&(Ar=ut),(0,sl[$r[Yr++]>>8&15])(We,Fe+ +Or,Re,at+Or-ut,Ar-Or,Re,at+Or),Or=Ar}Fe+=ut,at+=ut,++Qe&Et||(Pt+=Nt)}He!=_e.nc&&s(fe,ue-lt,fe,ue+(He-Me-1)*lt,lt);break;case 1:for(lt=We,Ie=Fe,ut=(We=_e.Ea)-(at=We&~(Re=(Fe=1<<_e.b)-1)),Qe=Ve(We,_e.b),ot=_e.K,_e=_e.w+(Me>>_e.b)*Qe;Me<He;){for(Et=ot,Nt=_e,Wt=new et,Pt=Ie+at,$r=Ie+We;Ie<Pt;)or(Et[Nt++],Wt),il(Wt,lt,Ie,Fe,fe,ue),Ie+=Fe,ue+=Fe;Ie<$r&&(or(Et[Nt++],Wt),il(Wt,lt,Ie,ut,fe,ue),Ie+=ut,ue+=ut),++Me&Re||(_e+=Qe)}break;case 3:if(We==fe&&Fe==ue&&0<_e.b){for(Ie=fe,We=lt=ue+(He-Me)*lt-(at=(He-Me)*Ve(_e.Ea,_e.b)),Fe=fe,Re=ue,Qe=[],at=(ut=at)-1;0<=at;--at)Qe[at]=Fe[Re+at];for(at=ut-1;0<=at;--at)Ie[We+at]=Qe[at];Ss(_e,Me,He,fe,lt,fe,ue)}else Ss(_e,Me,He,We,Fe,fe,ue)}ue=U,fe=$}fe!=$&&s(U,$,ue,fe,ae)}function Uc(N,E){var $=N.V,U=N.Ba+N.c*N.C,te=E-N.C;if(t(E<=N.l.o),t(16>=te),0<te){var ae=N.l,oe=N.Ta,ue=N.Ua,fe=ae.width;if(pi(N,te,$,U),te=ue=[ue],t(($=N.C)<(U=E)),t(ae.v<ae.va),U>ae.o&&(U=ae.o),$<ae.j){var _e=ae.j-$;$=ae.j,te[0]+=_e*fe}if($>=U?$=0:(te[0]+=4*ae.v,ae.ka=$-ae.j,ae.U=ae.va-ae.v,ae.T=U-$,$=1),$){if(ue=ue[0],11>($=N.ca).S){var Me=$.f.RGBA,He=(U=$.S,te=ae.U,ae=ae.T,_e=Me.eb,Me.A),We=ae;for(Me=Me.fb+N.Ma*Me.A;0<We--;){var Fe=oe,lt=ue,Qe=te,Ie=_e,Re=Me;switch(U){case zm:As(Fe,lt,Qe,Ie,Re);break;case Qh:Ps(Fe,lt,Qe,Ie,Re);break;case qm:Ps(Fe,lt,Qe,Ie,Re),Cs(Ie,Re,0,Qe,1,0);break;case Fx:ga(Fe,lt,Qe,Ie,Re);break;case ef:Wr(Fe,lt,Qe,Ie,Re,1);break;case Vm:Wr(Fe,lt,Qe,Ie,Re,1),Cs(Ie,Re,0,Qe,1,0);break;case tf:Wr(Fe,lt,Qe,Ie,Re,0);break;case Um:Wr(Fe,lt,Qe,Ie,Re,0),Cs(Ie,Re,1,Qe,1,0);break;case Bm:Va(Fe,lt,Qe,Ie,Re);break;case f:Va(Fe,lt,Qe,Ie,Re),Gr(Ie,Re,Qe,1,0);break;case J0:xi(Fe,lt,Qe,Ie,Re);break;default:t(0)}ue+=fe,Me+=He}N.Ma+=ae}else alert("todo:EmitRescaledRowsYUVA");t(N.Ma<=$.height)}}N.C=E,t(N.C<=N.i)}function xo(N){var E;if(0<N.ua)return 0;for(E=0;E<N.Wb;++E){var $=N.Ya[E].G,U=N.Ya[E].H;if(0<$[1][U[1]+0].g||0<$[2][U[2]+0].g||0<$[3][U[3]+0].g)return 0}return 1}function da(N,E,$,U,te,ae){if(N.Z!=0){var oe=N.qd,ue=N.rd;for(t(Xr[N.Z]!=null);E<$;++E)Xr[N.Z](oe,ue,U,te,U,te,ae),oe=U,ue=te,te+=ae;N.qd=oe,N.rd=ue}}function $i(N,E){var $=N.l.ma,U=$.Z==0||$.Z==1?N.l.j:N.C;if(U=N.C<U?U:N.C,t(E<=N.l.o),E>U){var te=N.l.width,ae=$.ca,oe=$.tb+te*U,ue=N.V,fe=N.Ba+N.c*U,_e=N.gc;t(N.ab==1),t(_e[0].hc==3),pa(_e[0],U,E,ue,fe,ae,oe),da($,U,E,ae,oe,te)}N.C=N.Ma=E}function ha(N,E,$,U,te,ae,oe){var ue=N.$/U,fe=N.$%U,_e=N.m,Me=N.s,He=$+N.$,We=He;te=$+U*te;var Fe=$+U*ae,lt=280+Me.ua,Qe=N.Pb?ue:16777216,Ie=0<Me.ua?Me.Wa:null,Re=Me.wc,at=He<Fe?St(Me,fe,ue):null;t(N.C<ae),t(Fe<=te);var ut=!1;e:for(;;){for(;ut||He<Fe;){var ot=0;if(ue>=Qe){var Et=He-$;t((Qe=N).Pb),Qe.wd=Qe.m,Qe.xd=Et,0<Qe.s.ua&&Pe(Qe.s.Wa,Qe.s.vb),Qe=ue+Ze}if(fe&Re||(at=St(Me,fe,ue)),t(at!=null),at.Qb&&(E[He]=at.qb,ut=!0),!ut)if(ye(_e),at.jc){ot=_e,Et=E;var Nt=He,Wt=at.pd[X(ot)&Zn-1];t(at.jc),256>Wt.g?(me(ot,ot.u+Wt.g),Et[Nt]=Wt.value,ot=0):(me(ot,ot.u+Wt.g-256),t(256<=Wt.value),ot=Wt.value),ot==0&&(ut=!0)}else ot=mi(at.G[0],at.H[0],_e);if(_e.h)break;if(ut||256>ot){if(!ut)if(at.nd)E[He]=(at.qb|ot<<8)>>>0;else{if(ye(_e),ut=mi(at.G[1],at.H[1],_e),ye(_e),Et=mi(at.G[2],at.H[2],_e),Nt=mi(at.G[3],at.H[3],_e),_e.h)break;E[He]=(Nt<<24|ut<<16|ot<<8|Et)>>>0}if(ut=!1,++He,++fe>=U&&(fe=0,++ue,oe!=null&&ue<=ae&&!(ue%16)&&oe(N,ue),Ie!=null))for(;We<He;)ot=E[We++],Ie.X[(506832829*ot&4294967295)>>>Ie.Mb]=ot}else if(280>ot){if(ot=Fa(ot-256,_e),Et=mi(at.G[4],at.H[4],_e),ye(_e),Et=go(U,Et=Fa(Et,_e)),_e.h)break;if(He-$<Et||te-He<ot)break e;for(Nt=0;Nt<ot;++Nt)E[He+Nt]=E[He+Nt-Et];for(He+=ot,fe+=ot;fe>=U;)fe-=U,++ue,oe!=null&&ue<=ae&&!(ue%16)&&oe(N,ue);if(t(He<=te),fe&Re&&(at=St(Me,fe,ue)),Ie!=null)for(;We<He;)ot=E[We++],Ie.X[(506832829*ot&4294967295)>>>Ie.Mb]=ot}else{if(!(ot<lt))break e;for(ut=ot-280,t(Ie!=null);We<He;)ot=E[We++],Ie.X[(506832829*ot&4294967295)>>>Ie.Mb]=ot;ot=He,t(!(ut>>>(Et=Ie).Xa)),E[ot]=Et.X[ut],ut=!0}ut||t(_e.h==ie(_e))}if(N.Pb&&_e.h&&He<te)t(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Pe(N.s.vb,N.s.Wa);else{if(_e.h)break e;oe!=null&&oe(N,ue>ae?ae:ue),N.a=0,N.$=He-$}return 1}return N.a=3,0}function Qs(N){t(N!=null),N.vc=null,N.yc=null,N.Ya=null;var E=N.Wa;E!=null&&(E.X=null),N.vb=null,t(N!=null)}function Fi(){var N=new Wh;return N==null?null:(N.a=0,N.xb=zx,fi("Predictor","VP8LPredictors"),fi("Predictor","VP8LPredictors_C"),fi("PredictorAdd","VP8LPredictorsAdd"),fi("PredictorAdd","VP8LPredictorsAdd_C"),$m=mt,il=It,As=bt,Ps=cn,Va=xr,xi=Dr,ga=ur,T.VP8LMapColor32b=pd,T.VP8LMapColor8b=iu,N)}function vo(N,E,$,U,te){var ae=1,oe=[N],ue=[E],fe=U.m,_e=U.s,Me=null,He=0;e:for(;;){if($)for(;ae&&ee(fe,1);){var We=oe,Fe=ue,lt=U,Qe=1,Ie=lt.m,Re=lt.gc[lt.ab],at=ee(Ie,2);if(lt.Oc&1<<at)ae=0;else{switch(lt.Oc|=1<<at,Re.hc=at,Re.Ea=We[0],Re.nc=Fe[0],Re.K=[null],++lt.ab,t(4>=lt.ab),at){case 0:case 1:Re.b=ee(Ie,3)+2,Qe=vo(Ve(Re.Ea,Re.b),Ve(Re.nc,Re.b),0,lt,Re.K),Re.K=Re.K[0];break;case 3:var ut,ot=ee(Ie,8)+1,Et=16<ot?0:4<ot?1:2<ot?2:3;if(We[0]=Ve(Re.Ea,Et),Re.b=Et,ut=Qe=vo(ot,1,0,lt,Re.K)){var Nt,Wt=ot,Pt=Re,$r=1<<(8>>Pt.b),Yr=a($r);if(Yr==null)ut=0;else{var Or=Pt.K[0],Ar=Pt.w;for(Yr[0]=Pt.K[0][0],Nt=1;Nt<1*Wt;++Nt)Yr[Nt]=ze(Or[Ar+Nt],Yr[Nt-1]);for(;Nt<4*$r;++Nt)Yr[Nt]=0;Pt.K[0]=null,Pt.K[0]=Yr,ut=1}}Qe=ut;break;case 2:break;default:t(0)}ae=Qe}}if(oe=oe[0],ue=ue[0],ae&&ee(fe,1)&&!(ae=1<=(He=ee(fe,4))&&11>=He)){U.a=3;break e}var dn;if(dn=ae)t:{var sn,fr,ps,ya=U,gs=oe,ba=ue,Jr=He,Ha=$,Wa=ya.m,Vs=ya.s,si=[null],Ki=1,Co=0,sc=Ue[Jr];r:for(;;){if(Ha&&ee(Wa,1)){var Us=ee(Wa,3)+2,au=Ve(gs,Us),rf=Ve(ba,Us),Wm=au*rf;if(!vo(au,rf,0,ya,si))break r;for(si=si[0],Vs.xc=Us,sn=0;sn<Wm;++sn){var jd=si[sn]>>8&65535;si[sn]=jd,jd>=Ki&&(Ki=jd+1)}}if(Wa.h)break r;for(fr=0;5>fr;++fr){var Xn=D[fr];!fr&&0<Jr&&(Xn+=1<<Jr),Co<Xn&&(Co=Xn)}var cN=o(Ki*sc,I),S3=Ki,A3=o(S3,F);if(A3==null)var sb=null;else t(65536>=S3),sb=A3;var Vx=a(Co);if(sb==null||Vx==null||cN==null){ya.a=1;break r}var ib=cN;for(sn=ps=0;sn<Ki;++sn){var ol=sb[sn],Gm=ol.G,Km=ol.H,P3=0,ab=1,C3=0;for(fr=0;5>fr;++fr){Xn=D[fr],Gm[fr]=ib,Km[fr]=ps,!fr&&0<Jr&&(Xn+=1<<Jr);s:{var ob,uN=Xn,lb=ya,Ux=Vx,XY=ib,YY=ps,dN=0,wd=lb.m,JY=ee(wd,1);if(i(Ux,0,0,uN),JY){var QY=ee(wd,1)+1,eJ=ee(wd,1),k3=ee(wd,eJ==0?1:8);Ux[k3]=1,QY==2&&(Ux[k3=ee(wd,8)]=1);var cb=1}else{var E3=a(19),T3=ee(wd,4)+4;if(19<T3){lb.a=3;var ub=0;break s}for(ob=0;ob<T3;++ob)E3[ce[ob]]=ee(wd,3);var hN=void 0,Hx=void 0,O3=lb,tJ=E3,db=uN,L3=Ux,fN=0,_d=O3.m,M3=8,I3=o(128,I);n:for(;O(I3,0,7,tJ,19);){if(ee(_d,1)){var rJ=2+2*ee(_d,3);if((hN=2+ee(_d,rJ))>db)break n}else hN=db;for(Hx=0;Hx<db&&hN--;){ye(_d);var R3=I3[0+(127&X(_d))];me(_d,_d.u+R3.g);var Zm=R3.value;if(16>Zm)L3[Hx++]=Zm,Zm!=0&&(M3=Zm);else{var nJ=Zm==16,D3=Zm-16,sJ=k[D3],$3=ee(_d,b[D3])+sJ;if(Hx+$3>db)break n;for(var iJ=nJ?M3:0;0<$3--;)L3[Hx++]=iJ}}fN=1;break n}fN||(O3.a=3),cb=fN}(cb=cb&&!wd.h)&&(dN=O(XY,YY,8,Ux,uN)),cb&&dN!=0?ub=dN:(lb.a=3,ub=0)}if(ub==0)break r;if(ab&&H[fr]==1&&(ab=ib[ps].g==0),P3+=ib[ps].g,ps+=ub,3>=fr){var Wx,mN=Vx[0];for(Wx=1;Wx<Xn;++Wx)Vx[Wx]>mN&&(mN=Vx[Wx]);C3+=mN}}if(ol.nd=ab,ol.Qb=0,ab&&(ol.qb=(Gm[3][Km[3]+0].value<<24|Gm[1][Km[1]+0].value<<16|Gm[2][Km[2]+0].value)>>>0,P3==0&&256>Gm[0][Km[0]+0].value&&(ol.Qb=1,ol.qb+=Gm[0][Km[0]+0].value<<8)),ol.jc=!ol.Qb&&6>C3,ol.jc){var hb,ou=ol;for(hb=0;hb<Zn;++hb){var Nd=hb,Sd=ou.pd[Nd],fb=ou.G[0][ou.H[0]+Nd];256<=fb.value?(Sd.g=fb.g+256,Sd.value=fb.value):(Sd.g=0,Sd.value=0,Nd>>=Fr(fb,8,Sd),Nd>>=Fr(ou.G[1][ou.H[1]+Nd],16,Sd),Nd>>=Fr(ou.G[2][ou.H[2]+Nd],0,Sd),Fr(ou.G[3][ou.H[3]+Nd],24,Sd))}}}Vs.vc=si,Vs.Wb=Ki,Vs.Ya=sb,Vs.yc=cN,dn=1;break t}dn=0}if(!(ae=dn)){U.a=3;break e}if(0<He){if(_e.ua=1<<He,!Ee(_e.Wa,He)){U.a=1,ae=0;break e}}else _e.ua=0;var pN=U,F3=oe,aJ=ue,gN=pN.s,xN=gN.xc;if(pN.c=F3,pN.i=aJ,gN.md=Ve(F3,xN),gN.wc=xN==0?-1:(1<<xN)-1,$){U.xb=iN;break e}if((Me=a(oe*ue))==null){U.a=1,ae=0;break e}ae=(ae=ha(U,Me,0,oe,ue,ue,null))&&!fe.h;break e}return ae?(te!=null?te[0]=Me:(t(Me==null),t($)),U.$=0,$||Qs(_e)):Qs(_e),ae}function Hc(N,E){var $=N.c*N.i,U=$+E+16*E;return t(N.c<=E),N.V=a(U),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+$+E,1)}function td(N,E){var $=N.C,U=E-$,te=N.V,ae=N.Ba+N.c*$;for(t(E<=N.l.o);0<U;){var oe=16<U?16:U,ue=N.l.ma,fe=N.l.width,_e=fe*oe,Me=ue.ca,He=ue.tb+fe*$,We=N.Ta,Fe=N.Ua;pi(N,oe,te,ae),Dn(We,Fe,Me,He,_e),da(ue,$,$+oe,Me,He,fe),U-=oe,te+=oe*N.c,$+=oe}t($==E),N.C=N.Ma=E}function rd(){this.ub=this.yd=this.td=this.Rb=0}function Wc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nd(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Gc(){this.Yb=function(){var N=[];return function E($,U,te){for(var ae=te[U],oe=0;oe<ae&&($.push(te.length>U+1?[]:0),!(te.length<U+1));oe++)E($[oe],U+1,te)}(N,0,[3,11]),N}()}function Mx(){this.jb=a(3),this.Wc=l([4,8],Gc),this.Xc=l([4,17],Gc)}function Ix(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function sd(){this.ld=this.La=this.dd=this.tc=0}function Cm(){this.Na=this.la=0}function Rx(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Kc(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zc(){this.uc=this.M=this.Nb=0,this.wa=Array(new sd),this.Y=0,this.ya=Array(new Kc),this.aa=0,this.l=new yo}function Rh(){this.y=a(16),this.f=a(8),this.ea=a(8)}function km(){this.cb=this.a=0,this.sc="",this.m=new xe,this.Od=new rd,this.Kc=new Wc,this.ed=new Ix,this.Qa=new nd,this.Ic=this.$c=this.Aa=0,this.D=new Zc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,xe),this.ia=0,this.pb=o(4,Rx),this.Pa=new Mx,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Rh),this.Hd=0,this.rb=Array(new Cm),this.sb=0,this.wa=Array(new sd),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Kc),this.L=this.aa=0,this.gd=l([4,2],sd),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function yo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Nr(){var N=new km;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,qt||(qt=Yo)),N}function lr(N,E,$){return N.a==0&&(N.a=E,N.sc=$,N.cb=0),0}function Xc(N,E,$){return 3<=$&&N[E+0]==157&&N[E+1]==1&&N[E+2]==42}function Xo(N,E){if(N==null)return 0;if(N.a=0,N.sc="OK",E==null)return lr(N,2,"null VP8Io passed to VP8GetHeaders()");var $=E.data,U=E.w,te=E.ha;if(4>te)return lr(N,7,"Truncated header.");var ae=$[U+0]|$[U+1]<<8|$[U+2]<<16,oe=N.Od;if(oe.Rb=!(1&ae),oe.td=ae>>1&7,oe.yd=ae>>4&1,oe.ub=ae>>5,3<oe.td)return lr(N,3,"Incorrect keyframe parameters.");if(!oe.yd)return lr(N,4,"Frame not displayable.");U+=3,te-=3;var ue=N.Kc;if(oe.Rb){if(7>te)return lr(N,7,"cannot parse picture header");if(!Xc($,U,te))return lr(N,3,"Bad code word");ue.c=16383&($[U+4]<<8|$[U+3]),ue.Td=$[U+4]>>6,ue.i=16383&($[U+6]<<8|$[U+5]),ue.Ud=$[U+6]>>6,U+=7,te-=7,N.za=ue.c+15>>4,N.Ub=ue.i+15>>4,E.width=ue.c,E.height=ue.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((ae=N.Pa).jb,0,255,ae.jb.length),t((ae=N.Qa)!=null),ae.Cb=0,ae.Bb=0,ae.Fb=1,i(ae.Zb,0,0,ae.Zb.length),i(ae.Lb,0,0,ae.Lb)}if(oe.ub>te)return lr(N,7,"bad partition length");W(ae=N.m,$,U,oe.ub),U+=oe.ub,te-=oe.ub,oe.Rb&&(ue.Ld=le(ae),ue.Kd=le(ae)),ue=N.Qa;var fe,_e=N.Pa;if(t(ae!=null),t(ue!=null),ue.Cb=le(ae),ue.Cb){if(ue.Bb=le(ae),le(ae)){for(ue.Fb=le(ae),fe=0;4>fe;++fe)ue.Zb[fe]=le(ae)?ne(ae,7):0;for(fe=0;4>fe;++fe)ue.Lb[fe]=le(ae)?ne(ae,6):0}if(ue.Bb)for(fe=0;3>fe;++fe)_e.jb[fe]=le(ae)?V(ae,8):255}else ue.Bb=0;if(ae.Ka)return lr(N,3,"cannot parse segment header");if((ue=N.ed).zd=le(ae),ue.Tb=V(ae,6),ue.wb=V(ae,3),ue.Pc=le(ae),ue.Pc&&le(ae)){for(_e=0;4>_e;++_e)le(ae)&&(ue.vd[_e]=ne(ae,6));for(_e=0;4>_e;++_e)le(ae)&&(ue.od[_e]=ne(ae,6))}if(N.L=ue.Tb==0?0:ue.zd?1:2,ae.Ka)return lr(N,3,"cannot parse filter header");var Me=te;if(te=fe=U,U=fe+Me,ue=Me,N.Xb=(1<<V(N.m,2))-1,Me<3*(_e=N.Xb))$=7;else{for(fe+=3*_e,ue-=3*_e,Me=0;Me<_e;++Me){var He=$[te+0]|$[te+1]<<8|$[te+2]<<16;He>ue&&(He=ue),W(N.Jc[+Me],$,fe,He),fe+=He,ue-=He,te+=3}W(N.Jc[+_e],$,fe,ue),$=fe<U?0:5}if($!=0)return lr(N,$,"cannot parse partitions");for($=V(fe=N.m,7),te=le(fe)?ne(fe,4):0,U=le(fe)?ne(fe,4):0,ue=le(fe)?ne(fe,4):0,_e=le(fe)?ne(fe,4):0,fe=le(fe)?ne(fe,4):0,Me=N.Qa,He=0;4>He;++He){if(Me.Cb){var We=Me.Zb[He];Me.Fb||(We+=$)}else{if(0<He){N.pb[He]=N.pb[0];continue}We=$}var Fe=N.pb[He];Fe.Sc[0]=ct[wn(We+te,127)],Fe.Sc[1]=kt[wn(We+0,127)],Fe.Eb[0]=2*ct[wn(We+U,127)],Fe.Eb[1]=101581*kt[wn(We+ue,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=ct[wn(We+_e,117)],Fe.Qc[1]=kt[wn(We+fe,127)],Fe.lc=We+fe}if(!oe.Rb)return lr(N,4,"Not a key frame.");for(le(ae),oe=N.Pa,$=0;4>$;++$){for(te=0;8>te;++te)for(U=0;3>U;++U)for(ue=0;11>ue;++ue)_e=Q(ae,bd[$][te][U][ue])?V(ae,8):va[$][te][U][ue],oe.Wc[$][te].Yb[U][ue]=_e;for(te=0;17>te;++te)oe.Xc[$][te]=oe.Wc[$][sN[te]]}return N.kc=le(ae),N.kc&&(N.Bd=V(ae,8)),N.cb=1}function Yo(N,E,$,U,te,ae,oe){var ue=E[te].Yb[$];for($=0;16>te;++te){if(!Q(N,ue[$+0]))return te;for(;!Q(N,ue[$+1]);)if(ue=E[++te].Yb[0],$=0,te==16)return 16;var fe=E[te+1].Yb;if(Q(N,ue[$+2])){var _e=N,Me=0;if(Q(_e,(We=ue)[(He=$)+3]))if(Q(_e,We[He+6])){for(ue=0,He=2*(Me=Q(_e,We[He+8]))+(We=Q(_e,We[He+9+Me])),Me=0,We=pr[He];We[ue];++ue)Me+=Me+Q(_e,We[ue]);Me+=3+(8<<He)}else Q(_e,We[He+7])?(Me=7+2*Q(_e,165),Me+=Q(_e,145)):Me=5+Q(_e,159);else Me=Q(_e,We[He+4])?3+Q(_e,We[He+5]):2;ue=fe[2]}else Me=1,ue=fe[1];fe=oe+ri[te],0>(_e=N).b&&Ne(_e);var He,We=_e.b,Fe=(He=_e.Ca>>1)-(_e.I>>We)>>31;--_e.b,_e.Ca+=Fe,_e.Ca|=1,_e.I-=(He+1&Fe)<<We,ae[fe]=((Me^Fe)-Fe)*U[(0<te)+0]}return 16}function Yc(N){var E=N.rb[N.sb-1];E.la=0,E.Na=0,i(N.zc,0,0,N.zc.length),N.ja=0}function dr(N,E){if(N==null)return 0;if(E==null)return lr(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!Xo(N,E))return 0;if(t(N.cb),E.ac==null||E.ac(E)){E.ob&&(N.L=0);var $=nb[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=E.v-$>>4,N.zb=E.j-$>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=E.o+15+$>>4,N.Hb=E.va+15+$>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var U=N.ed;for($=0;4>$;++$){var te;if(N.Qa.Cb){var ae=N.Qa.Lb[$];N.Qa.Fb||(ae+=U.Tb)}else ae=U.Tb;for(te=0;1>=te;++te){var oe=N.gd[$][te],ue=ae;if(U.Pc&&(ue+=U.vd[0],te&&(ue+=U.od[0])),0<(ue=0>ue?0:63<ue?63:ue)){var fe=ue;0<U.wb&&(fe=4<U.wb?fe>>2:fe>>1)>9-U.wb&&(fe=9-U.wb),1>fe&&(fe=1),oe.dd=fe,oe.tc=2*ue+fe,oe.ld=40<=ue?2:15<=ue?1:0}else oe.tc=0;oe.La=te}}}$=0}else lr(N,6,"Frame setup failed"),$=N.a;if($=$==0){if($){N.$c=0,0<N.Aa||(N.Ic=ZY);e:{$=N.Ic,U=4*(fe=N.za);var _e=32*fe,Me=fe+1,He=0<N.L?fe*(0<N.Aa?2:1):0,We=(N.Aa==2?2:1)*fe;if((oe=U+832+(te=3*(16*$+nb[N.L])/2*_e)+(ae=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=oe)$=0;else{if(oe>N.Vb){if(N.Vb=0,N.Ec=a(oe),N.Fc=0,N.Ec==null){$=lr(N,1,"no memory during frame initialization.");break e}N.Vb=oe}oe=N.Ec,ue=N.Fc,N.Ac=oe,N.Bc=ue,ue+=U,N.Gd=o(_e,Rh),N.Hd=0,N.rb=o(Me+1,Cm),N.sb=1,N.wa=He?o(He,sd):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=fe),t(!0),N.oc=oe,N.pc=ue,ue+=832,N.ya=o(We,Kc),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=fe),N.R=16*fe,N.B=8*fe,fe=(_e=nb[N.L])*N.R,_e=_e/2*N.B,N.sa=oe,N.ta=ue+fe,N.qa=N.sa,N.ra=N.ta+16*$*N.R+_e,N.Ha=N.qa,N.Ia=N.ra+8*$*N.B+_e,N.$c=0,ue+=te,N.mb=ae?oe:null,N.nb=ae?ue:null,t(ue+ae<=N.Fc+N.Vb),Yc(N),i(N.Ac,N.Bc,0,U),$=1}}if($){if(E.ka=0,E.y=N.sa,E.O=N.ta,E.f=N.qa,E.N=N.ra,E.ea=N.Ha,E.Vd=N.Ia,E.fa=N.R,E.Rc=N.B,E.F=null,E.J=0,!Fm){for($=-255;255>=$;++$)Zr[255+$]=0>$?-$:$;for($=-1020;1020>=$;++$)So[1020+$]=-128>$?-128:127<$?127:$;for($=-112;112>=$;++$)vd[112+$]=-16>$?-16:15<$?15:$;for($=-255;510>=$;++$)Ao[255+$]=0>$?0:255<$?255:$;Fm=1}Yl=Jc,wo=id,Jl=bo,ti=Tn,Wi=jo,Rn=Em,gd=qh,Yh=Kl,Jh=Vh,qs=Uh,_o=Dx,Ql=ud,No=gi,xd=Rm,ec=Mm,tc=Gn,al=Bi,xa=Im,Ua[0]=vr,Ua[1]=Dh,Ua[2]=nr,Ua[3]=fa,Ua[4]=Fh,Ua[5]=Hl,Ua[6]=ld,Ua[7]=eu,Ua[8]=zh,Ua[9]=el,nc[0]=ad,nc[1]=$h,nc[2]=za,nc[3]=Qo,nc[4]=ss,nc[5]=Tm,nc[6]=od,Po[0]=tl,Po[1]=Qc,Po[2]=tu,Po[3]=In,Po[4]=ru,Po[5]=Om,Po[6]=cd,$=1}else $=0}$&&($=function(Fe,lt){for(Fe.M=0;Fe.M<Fe.Va;++Fe.M){var Qe,Ie=Fe.Jc[Fe.M&Fe.Xb],Re=Fe.m,at=Fe;for(Qe=0;Qe<at.za;++Qe){var ut=Re,ot=at,Et=ot.Ac,Nt=ot.Bc+4*Qe,Wt=ot.zc,Pt=ot.ya[ot.aa+Qe];if(ot.Qa.Bb?Pt.$b=Q(ut,ot.Pa.jb[0])?2+Q(ut,ot.Pa.jb[2]):Q(ut,ot.Pa.jb[1]):Pt.$b=0,ot.kc&&(Pt.Ad=Q(ut,ot.Bd)),Pt.Za=!Q(ut,145)+0,Pt.Za){var $r=Pt.Ob,Yr=0;for(ot=0;4>ot;++ot){var Or,Ar=Wt[0+ot];for(Or=0;4>Or;++Or){Ar=yi[Et[Nt+Or]][Ar];for(var dn=as[Q(ut,Ar[0])];0<dn;)dn=as[2*dn+Q(ut,Ar[dn])];Ar=-dn,Et[Nt+Or]=Ar}s($r,Yr,Et,Nt,4),Yr+=4,Wt[0+ot]=Ar}}else Ar=Q(ut,156)?Q(ut,128)?1:3:Q(ut,163)?2:0,Pt.Ob[0]=Ar,i(Et,Nt,Ar,4),i(Wt,0,Ar,4);Pt.Dd=Q(ut,142)?Q(ut,114)?Q(ut,183)?1:3:2:0}if(at.m.Ka)return lr(Fe,7,"Premature end-of-partition0 encountered.");for(;Fe.ja<Fe.za;++Fe.ja){if(at=Ie,ut=(Re=Fe).rb[Re.sb-1],Et=Re.rb[Re.sb+Re.ja],Qe=Re.ya[Re.aa+Re.ja],Nt=Re.kc?Qe.Ad:0)ut.la=Et.la=0,Qe.Za||(ut.Na=Et.Na=0),Qe.Hc=0,Qe.Gc=0,Qe.ia=0;else{var sn,fr;if(ut=Et,Et=at,Nt=Re.Pa.Xc,Wt=Re.ya[Re.aa+Re.ja],Pt=Re.pb[Wt.$b],ot=Wt.ad,$r=0,Yr=Re.rb[Re.sb-1],Ar=Or=0,i(ot,$r,0,384),Wt.Za)var ps=0,ya=Nt[3];else{dn=a(16);var gs=ut.Na+Yr.Na;if(gs=qt(Et,Nt[1],gs,Pt.Eb,0,dn,0),ut.Na=Yr.Na=(0<gs)+0,1<gs)Yl(dn,0,ot,$r);else{var ba=dn[0]+3>>3;for(dn=0;256>dn;dn+=16)ot[$r+dn]=ba}ps=1,ya=Nt[0]}var Jr=15&ut.la,Ha=15&Yr.la;for(dn=0;4>dn;++dn){var Wa=1&Ha;for(ba=fr=0;4>ba;++ba)Jr=Jr>>1|(Wa=(gs=qt(Et,ya,gs=Wa+(1&Jr),Pt.Sc,ps,ot,$r))>ps)<<7,fr=fr<<2|(3<gs?3:1<gs?2:ot[$r+0]!=0),$r+=16;Jr>>=4,Ha=Ha>>1|Wa<<7,Or=(Or<<8|fr)>>>0}for(ya=Jr,ps=Ha>>4,sn=0;4>sn;sn+=2){for(fr=0,Jr=ut.la>>4+sn,Ha=Yr.la>>4+sn,dn=0;2>dn;++dn){for(Wa=1&Ha,ba=0;2>ba;++ba)gs=Wa+(1&Jr),Jr=Jr>>1|(Wa=0<(gs=qt(Et,Nt[2],gs,Pt.Qc,0,ot,$r)))<<3,fr=fr<<2|(3<gs?3:1<gs?2:ot[$r+0]!=0),$r+=16;Jr>>=2,Ha=Ha>>1|Wa<<5}Ar|=fr<<4*sn,ya|=Jr<<4<<sn,ps|=(240&Ha)<<sn}ut.la=ya,Yr.la=ps,Wt.Hc=Or,Wt.Gc=Ar,Wt.ia=43690&Ar?0:Pt.ia,Nt=!(Or|Ar)}if(0<Re.L&&(Re.wa[Re.Y+Re.ja]=Re.gd[Qe.$b][Qe.Za],Re.wa[Re.Y+Re.ja].La|=!Nt),at.Ka)return lr(Fe,7,"Premature end-of-file encountered.")}if(Yc(Fe),Re=lt,at=1,Qe=(Ie=Fe).D,ut=0<Ie.L&&Ie.M>=Ie.zb&&Ie.M<=Ie.Va,Ie.Aa==0)e:{if(Qe.M=Ie.M,Qe.uc=ut,Kh(Ie,Qe),at=1,Qe=(fr=Ie.D).Nb,ut=(Ar=nb[Ie.L])*Ie.R,Et=Ar/2*Ie.B,dn=16*Qe*Ie.R,ba=8*Qe*Ie.B,Nt=Ie.sa,Wt=Ie.ta-ut+dn,Pt=Ie.qa,ot=Ie.ra-Et+ba,$r=Ie.Ha,Yr=Ie.Ia-Et+ba,Ha=(Jr=fr.M)==0,Or=Jr>=Ie.Va-1,Ie.Aa==2&&Kh(Ie,fr),fr.uc)for(Wa=(gs=Ie).D.M,t(gs.D.uc),fr=gs.yb;fr<gs.Hb;++fr){ps=fr,ya=Wa;var Vs=(si=(Xn=gs).D).Nb;sn=Xn.R;var si=si.wa[si.Y+ps],Ki=Xn.sa,Co=Xn.ta+16*Vs*sn+16*ps,sc=si.dd,Us=si.tc;if(Us!=0)if(t(3<=Us),Xn.L==1)0<ps&&tc(Ki,Co,sn,Us+4),si.La&&xa(Ki,Co,sn,Us),0<ya&&ec(Ki,Co,sn,Us+4),si.La&&al(Ki,Co,sn,Us);else{var au=Xn.B,rf=Xn.qa,Wm=Xn.ra+8*Vs*au+8*ps,jd=Xn.Ha,Xn=Xn.Ia+8*Vs*au+8*ps;Vs=si.ld,0<ps&&(Yh(Ki,Co,sn,Us+4,sc,Vs),qs(rf,Wm,jd,Xn,au,Us+4,sc,Vs)),si.La&&(Ql(Ki,Co,sn,Us,sc,Vs),xd(rf,Wm,jd,Xn,au,Us,sc,Vs)),0<ya&&(gd(Ki,Co,sn,Us+4,sc,Vs),Jh(rf,Wm,jd,Xn,au,Us+4,sc,Vs)),si.La&&(_o(Ki,Co,sn,Us,sc,Vs),No(rf,Wm,jd,Xn,au,Us,sc,Vs))}}if(Ie.ia&&alert("todo:DitherRow"),Re.put!=null){if(fr=16*Jr,Jr=16*(Jr+1),Ha?(Re.y=Ie.sa,Re.O=Ie.ta+dn,Re.f=Ie.qa,Re.N=Ie.ra+ba,Re.ea=Ie.Ha,Re.W=Ie.Ia+ba):(fr-=Ar,Re.y=Nt,Re.O=Wt,Re.f=Pt,Re.N=ot,Re.ea=$r,Re.W=Yr),Or||(Jr-=Ar),Jr>Re.o&&(Jr=Re.o),Re.F=null,Re.J=null,Ie.Fa!=null&&0<Ie.Fa.length&&fr<Jr&&(Re.J=Gh(Ie,Re,fr,Jr-fr),Re.F=Ie.mb,Re.F==null&&Re.F.length==0)){at=lr(Ie,3,"Could not decode alpha data.");break e}fr<Re.j&&(Ar=Re.j-fr,fr=Re.j,t(!(1&Ar)),Re.O+=Ie.R*Ar,Re.N+=Ie.B*(Ar>>1),Re.W+=Ie.B*(Ar>>1),Re.F!=null&&(Re.J+=Re.width*Ar)),fr<Jr&&(Re.O+=Re.v,Re.N+=Re.v>>1,Re.W+=Re.v>>1,Re.F!=null&&(Re.J+=Re.v),Re.ka=fr-Re.j,Re.U=Re.va-Re.v,Re.T=Jr-fr,at=Re.put(Re))}Qe+1!=Ie.Ic||Or||(s(Ie.sa,Ie.ta-ut,Nt,Wt+16*Ie.R,ut),s(Ie.qa,Ie.ra-Et,Pt,ot+8*Ie.B,Et),s(Ie.Ha,Ie.Ia-Et,$r,Yr+8*Ie.B,Et))}if(!at)return lr(Fe,6,"Output aborted.")}return 1}(N,E)),E.bc!=null&&E.bc(E),$&=1}return $?(N.cb=0,$):0}function Tr(N,E,$,U,te){te=N[E+$+32*U]+(te>>3),N[E+$+32*U]=-256&te?0>te?0:255:te}function Vl(N,E,$,U,te,ae){Tr(N,E,0,$,U+te),Tr(N,E,1,$,U+ae),Tr(N,E,2,$,U-ae),Tr(N,E,3,$,U-te)}function Ns(N){return(20091*N>>16)+N}function Fs(N,E,$,U){var te,ae=0,oe=a(16);for(te=0;4>te;++te){var ue=N[E+0]+N[E+8],fe=N[E+0]-N[E+8],_e=(35468*N[E+4]>>16)-Ns(N[E+12]),Me=Ns(N[E+4])+(35468*N[E+12]>>16);oe[ae+0]=ue+Me,oe[ae+1]=fe+_e,oe[ae+2]=fe-_e,oe[ae+3]=ue-Me,ae+=4,E++}for(te=ae=0;4>te;++te)ue=(N=oe[ae+0]+4)+oe[ae+8],fe=N-oe[ae+8],_e=(35468*oe[ae+4]>>16)-Ns(oe[ae+12]),Tr($,U,0,0,ue+(Me=Ns(oe[ae+4])+(35468*oe[ae+12]>>16))),Tr($,U,1,0,fe+_e),Tr($,U,2,0,fe-_e),Tr($,U,3,0,ue-Me),ae++,U+=32}function Em(N,E,$,U){var te=N[E+0]+4,ae=35468*N[E+4]>>16,oe=Ns(N[E+4]),ue=35468*N[E+1]>>16;Vl($,U,0,te+oe,N=Ns(N[E+1]),ue),Vl($,U,1,te+ae,N,ue),Vl($,U,2,te-ae,N,ue),Vl($,U,3,te-oe,N,ue)}function id(N,E,$,U,te){Fs(N,E,$,U),te&&Fs(N,E+16,$,U+4)}function bo(N,E,$,U){wo(N,E+0,$,U,1),wo(N,E+32,$,U+128,1)}function Tn(N,E,$,U){var te;for(N=N[E+0]+4,te=0;4>te;++te)for(E=0;4>E;++E)Tr($,U,E,te,N)}function jo(N,E,$,U){N[E+0]&&ti(N,E+0,$,U),N[E+16]&&ti(N,E+16,$,U+4),N[E+32]&&ti(N,E+32,$,U+128),N[E+48]&&ti(N,E+48,$,U+128+4)}function Jc(N,E,$,U){var te,ae=a(16);for(te=0;4>te;++te){var oe=N[E+0+te]+N[E+12+te],ue=N[E+4+te]+N[E+8+te],fe=N[E+4+te]-N[E+8+te],_e=N[E+0+te]-N[E+12+te];ae[0+te]=oe+ue,ae[8+te]=oe-ue,ae[4+te]=_e+fe,ae[12+te]=_e-fe}for(te=0;4>te;++te)oe=(N=ae[0+4*te]+3)+ae[3+4*te],ue=ae[1+4*te]+ae[2+4*te],fe=ae[1+4*te]-ae[2+4*te],_e=N-ae[3+4*te],$[U+0]=oe+ue>>3,$[U+16]=_e+fe>>3,$[U+32]=oe-ue>>3,$[U+48]=_e-fe>>3,U+=64}function Jo(N,E,$){var U,te=E-32,ae=vi,oe=255-N[te-1];for(U=0;U<$;++U){var ue,fe=ae,_e=oe+N[E-1];for(ue=0;ue<$;++ue)N[E+ue]=fe[_e+N[te+ue]];E+=32}}function Dh(N,E){Jo(N,E,4)}function Qc(N,E){Jo(N,E,8)}function $h(N,E){Jo(N,E,16)}function za(N,E){var $;for($=0;16>$;++$)s(N,E+32*$,N,E-32,16)}function Qo(N,E){var $;for($=16;0<$;--$)i(N,E,N[E-1],16),E+=32}function Ul(N,E,$){var U;for(U=0;16>U;++U)i(E,$+32*U,N,16)}function ad(N,E){var $,U=16;for($=0;16>$;++$)U+=N[E-1+32*$]+N[E+$-32];Ul(U>>5,N,E)}function ss(N,E){var $,U=8;for($=0;16>$;++$)U+=N[E-1+32*$];Ul(U>>4,N,E)}function Tm(N,E){var $,U=8;for($=0;16>$;++$)U+=N[E+$-32];Ul(U>>4,N,E)}function od(N,E){Ul(128,N,E)}function er(N,E,$){return N+2*E+$+2>>2}function nr(N,E){var $,U=E-32;for(U=new Uint8Array([er(N[U-1],N[U+0],N[U+1]),er(N[U+0],N[U+1],N[U+2]),er(N[U+1],N[U+2],N[U+3]),er(N[U+2],N[U+3],N[U+4])]),$=0;4>$;++$)s(N,E+32*$,U,0,U.length)}function fa(N,E){var $=N[E-1],U=N[E-1+32],te=N[E-1+64],ae=N[E-1+96];J(N,E+0,16843009*er(N[E-1-32],$,U)),J(N,E+32,16843009*er($,U,te)),J(N,E+64,16843009*er(U,te,ae)),J(N,E+96,16843009*er(te,ae,ae))}function vr(N,E){var $,U=4;for($=0;4>$;++$)U+=N[E+$-32]+N[E-1+32*$];for(U>>=3,$=0;4>$;++$)i(N,E+32*$,U,4)}function Fh(N,E){var $=N[E-1+0],U=N[E-1+32],te=N[E-1+64],ae=N[E-1-32],oe=N[E+0-32],ue=N[E+1-32],fe=N[E+2-32],_e=N[E+3-32];N[E+0+96]=er(U,te,N[E-1+96]),N[E+1+96]=N[E+0+64]=er($,U,te),N[E+2+96]=N[E+1+64]=N[E+0+32]=er(ae,$,U),N[E+3+96]=N[E+2+64]=N[E+1+32]=N[E+0+0]=er(oe,ae,$),N[E+3+64]=N[E+2+32]=N[E+1+0]=er(ue,oe,ae),N[E+3+32]=N[E+2+0]=er(fe,ue,oe),N[E+3+0]=er(_e,fe,ue)}function ld(N,E){var $=N[E+1-32],U=N[E+2-32],te=N[E+3-32],ae=N[E+4-32],oe=N[E+5-32],ue=N[E+6-32],fe=N[E+7-32];N[E+0+0]=er(N[E+0-32],$,U),N[E+1+0]=N[E+0+32]=er($,U,te),N[E+2+0]=N[E+1+32]=N[E+0+64]=er(U,te,ae),N[E+3+0]=N[E+2+32]=N[E+1+64]=N[E+0+96]=er(te,ae,oe),N[E+3+32]=N[E+2+64]=N[E+1+96]=er(ae,oe,ue),N[E+3+64]=N[E+2+96]=er(oe,ue,fe),N[E+3+96]=er(ue,fe,fe)}function Hl(N,E){var $=N[E-1+0],U=N[E-1+32],te=N[E-1+64],ae=N[E-1-32],oe=N[E+0-32],ue=N[E+1-32],fe=N[E+2-32],_e=N[E+3-32];N[E+0+0]=N[E+1+64]=ae+oe+1>>1,N[E+1+0]=N[E+2+64]=oe+ue+1>>1,N[E+2+0]=N[E+3+64]=ue+fe+1>>1,N[E+3+0]=fe+_e+1>>1,N[E+0+96]=er(te,U,$),N[E+0+64]=er(U,$,ae),N[E+0+32]=N[E+1+96]=er($,ae,oe),N[E+1+32]=N[E+2+96]=er(ae,oe,ue),N[E+2+32]=N[E+3+96]=er(oe,ue,fe),N[E+3+32]=er(ue,fe,_e)}function eu(N,E){var $=N[E+0-32],U=N[E+1-32],te=N[E+2-32],ae=N[E+3-32],oe=N[E+4-32],ue=N[E+5-32],fe=N[E+6-32],_e=N[E+7-32];N[E+0+0]=$+U+1>>1,N[E+1+0]=N[E+0+64]=U+te+1>>1,N[E+2+0]=N[E+1+64]=te+ae+1>>1,N[E+3+0]=N[E+2+64]=ae+oe+1>>1,N[E+0+32]=er($,U,te),N[E+1+32]=N[E+0+96]=er(U,te,ae),N[E+2+32]=N[E+1+96]=er(te,ae,oe),N[E+3+32]=N[E+2+96]=er(ae,oe,ue),N[E+3+64]=er(oe,ue,fe),N[E+3+96]=er(ue,fe,_e)}function el(N,E){var $=N[E-1+0],U=N[E-1+32],te=N[E-1+64],ae=N[E-1+96];N[E+0+0]=$+U+1>>1,N[E+2+0]=N[E+0+32]=U+te+1>>1,N[E+2+32]=N[E+0+64]=te+ae+1>>1,N[E+1+0]=er($,U,te),N[E+3+0]=N[E+1+32]=er(U,te,ae),N[E+3+32]=N[E+1+64]=er(te,ae,ae),N[E+3+64]=N[E+2+64]=N[E+0+96]=N[E+1+96]=N[E+2+96]=N[E+3+96]=ae}function zh(N,E){var $=N[E-1+0],U=N[E-1+32],te=N[E-1+64],ae=N[E-1+96],oe=N[E-1-32],ue=N[E+0-32],fe=N[E+1-32],_e=N[E+2-32];N[E+0+0]=N[E+2+32]=$+oe+1>>1,N[E+0+32]=N[E+2+64]=U+$+1>>1,N[E+0+64]=N[E+2+96]=te+U+1>>1,N[E+0+96]=ae+te+1>>1,N[E+3+0]=er(ue,fe,_e),N[E+2+0]=er(oe,ue,fe),N[E+1+0]=N[E+3+32]=er($,oe,ue),N[E+1+32]=N[E+3+64]=er(U,$,oe),N[E+1+64]=N[E+3+96]=er(te,U,$),N[E+1+96]=er(ae,te,U)}function tu(N,E){var $;for($=0;8>$;++$)s(N,E+32*$,N,E-32,8)}function In(N,E){var $;for($=0;8>$;++$)i(N,E,N[E-1],8),E+=32}function zi(N,E,$){var U;for(U=0;8>U;++U)i(E,$+32*U,N,8)}function tl(N,E){var $,U=8;for($=0;8>$;++$)U+=N[E+$-32]+N[E-1+32*$];zi(U>>4,N,E)}function Om(N,E){var $,U=4;for($=0;8>$;++$)U+=N[E+$-32];zi(U>>3,N,E)}function ru(N,E){var $,U=4;for($=0;8>$;++$)U+=N[E-1+32*$];zi(U>>3,N,E)}function cd(N,E){zi(128,N,E)}function Wl(N,E,$){var U=N[E-$],te=N[E+0],ae=3*(te-U)+yd[1020+N[E-2*$]-N[E+$]],oe=rc[112+(ae+4>>3)];N[E-$]=vi[255+U+rc[112+(ae+3>>3)]],N[E+0]=vi[255+te-oe]}function Lm(N,E,$,U){var te=N[E+0],ae=N[E+$];return Gi[255+N[E-2*$]-N[E-$]]>U||Gi[255+ae-te]>U}function Bh(N,E,$,U){return 4*Gi[255+N[E-$]-N[E+0]]+Gi[255+N[E-2*$]-N[E+$]]<=U}function gr(N,E,$,U,te){var ae=N[E-3*$],oe=N[E-2*$],ue=N[E-$],fe=N[E+0],_e=N[E+$],Me=N[E+2*$],He=N[E+3*$];return 4*Gi[255+ue-fe]+Gi[255+oe-_e]>U?0:Gi[255+N[E-4*$]-ae]<=te&&Gi[255+ae-oe]<=te&&Gi[255+oe-ue]<=te&&Gi[255+He-Me]<=te&&Gi[255+Me-_e]<=te&&Gi[255+_e-fe]<=te}function Mm(N,E,$,U){var te=2*U+1;for(U=0;16>U;++U)Bh(N,E+U,$,te)&&Wl(N,E+U,$)}function Gn(N,E,$,U){var te=2*U+1;for(U=0;16>U;++U)Bh(N,E+U*$,1,te)&&Wl(N,E+U*$,1)}function Bi(N,E,$,U){var te;for(te=3;0<te;--te)Mm(N,E+=4*$,$,U)}function Im(N,E,$,U){var te;for(te=3;0<te;--te)Gn(N,E+=4,$,U)}function Gl(N,E,$,U,te,ae,oe,ue){for(ae=2*ae+1;0<te--;){if(gr(N,E,$,ae,oe))if(Lm(N,E,$,ue))Wl(N,E,$);else{var fe=N,_e=E,Me=$,He=fe[_e-2*Me],We=fe[_e-Me],Fe=fe[_e+0],lt=fe[_e+Me],Qe=fe[_e+2*Me],Ie=27*(at=yd[1020+3*(Fe-We)+yd[1020+He-lt]])+63>>7,Re=18*at+63>>7,at=9*at+63>>7;fe[_e-3*Me]=vi[255+fe[_e-3*Me]+at],fe[_e-2*Me]=vi[255+He+Re],fe[_e-Me]=vi[255+We+Ie],fe[_e+0]=vi[255+Fe-Ie],fe[_e+Me]=vi[255+lt-Re],fe[_e+2*Me]=vi[255+Qe-at]}E+=U}}function qi(N,E,$,U,te,ae,oe,ue){for(ae=2*ae+1;0<te--;){if(gr(N,E,$,ae,oe))if(Lm(N,E,$,ue))Wl(N,E,$);else{var fe=N,_e=E,Me=$,He=fe[_e-Me],We=fe[_e+0],Fe=fe[_e+Me],lt=rc[112+((Qe=3*(We-He))+4>>3)],Qe=rc[112+(Qe+3>>3)],Ie=lt+1>>1;fe[_e-2*Me]=vi[255+fe[_e-2*Me]+Ie],fe[_e-Me]=vi[255+He+Qe],fe[_e+0]=vi[255+We-lt],fe[_e+Me]=vi[255+Fe-Ie]}E+=U}}function qh(N,E,$,U,te,ae){Gl(N,E,$,1,16,U,te,ae)}function Kl(N,E,$,U,te,ae){Gl(N,E,1,$,16,U,te,ae)}function Dx(N,E,$,U,te,ae){var oe;for(oe=3;0<oe;--oe)qi(N,E+=4*$,$,1,16,U,te,ae)}function ud(N,E,$,U,te,ae){var oe;for(oe=3;0<oe;--oe)qi(N,E+=4,1,$,16,U,te,ae)}function Vh(N,E,$,U,te,ae,oe,ue){Gl(N,E,te,1,8,ae,oe,ue),Gl($,U,te,1,8,ae,oe,ue)}function Uh(N,E,$,U,te,ae,oe,ue){Gl(N,E,1,te,8,ae,oe,ue),Gl($,U,1,te,8,ae,oe,ue)}function gi(N,E,$,U,te,ae,oe,ue){qi(N,E+4*te,te,1,8,ae,oe,ue),qi($,U+4*te,te,1,8,ae,oe,ue)}function Rm(N,E,$,U,te,ae,oe,ue){qi(N,E+4,1,te,8,ae,oe,ue),qi($,U+4,1,te,8,ae,oe,ue)}function nu(){this.ba=new ca,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new En,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ma(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hh(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new F,this.yc=new I}function Wh(){this.xb=this.a=0,this.l=new yo,this.ca=new ca,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new B,this.Pb=0,this.wd=new B,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hh,this.ab=0,this.gc=o(4,dd),this.Oc=0}function hd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new yo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zl(N,E,$,U,te,ae,oe){for(N=N==null?0:N[E+0],E=0;E<oe;++E)te[ae+E]=N+$[U+E]&255,N=te[ae+E]}function fd(N,E,$,U,te,ae,oe){var ue;if(N==null)Zl(null,null,$,U,te,ae,oe);else for(ue=0;ue<oe;++ue)te[ae+ue]=N[E+ue]+$[U+ue]&255}function Xl(N,E,$,U,te,ae,oe){if(N==null)Zl(null,null,$,U,te,ae,oe);else{var ue,fe=N[E+0],_e=fe,Me=fe;for(ue=0;ue<oe;++ue)_e=Me+(fe=N[E+ue])-_e,Me=$[U+ue]+(-256&_e?0>_e?0:255:_e)&255,_e=fe,te[ae+ue]=Me}}function Gh(N,E,$,U){var te=E.width,ae=E.o;if(t(N!=null&&E!=null),0>$||0>=U||$+U>ae)return null;if(!N.Cc){if(N.ga==null){var oe;if(N.ga=new hd,(oe=N.ga==null)||(oe=E.width*E.o,t(N.Gb.length==0),N.Gb=a(oe),N.Uc=0,N.Gb==null?oe=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,oe=1),oe=!oe),!oe){oe=N.ga;var ue=N.Fa,fe=N.P,_e=N.qc,Me=N.mb,He=N.nb,We=fe+1,Fe=_e-1,lt=oe.l;if(t(ue!=null&&Me!=null&&E!=null),Xr[0]=null,Xr[1]=Zl,Xr[2]=fd,Xr[3]=Xl,oe.ca=Me,oe.tb=He,oe.c=E.width,oe.i=E.height,t(0<oe.c&&0<oe.i),1>=_e)E=0;else if(oe.$a=ue[fe+0]>>0&3,oe.Z=ue[fe+0]>>2&3,oe.Lc=ue[fe+0]>>4&3,fe=ue[fe+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||fe)E=0;else if(lt.put=po,lt.ac=_s,lt.bc=ua,lt.ma=oe,lt.width=E.width,lt.height=E.height,lt.Da=E.Da,lt.v=E.v,lt.va=E.va,lt.j=E.j,lt.o=E.o,oe.$a)e:{t(oe.$a==1),E=Fi();t:for(;;){if(E==null){E=0;break e}if(t(oe!=null),oe.mc=E,E.c=oe.c,E.i=oe.i,E.l=oe.l,E.l.ma=oe,E.l.width=oe.c,E.l.height=oe.i,E.a=0,G(E.m,ue,We,Fe),!vo(oe.c,oe.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&xo(E.s)?(oe.ic=1,ue=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(ue),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(oe.ic=0,E=Hc(E,oe.c)),!E))break t;E=1;break e}oe.mc=null,E=0}else E=Fe>=oe.c*oe.i;oe=!E}if(oe)return null;N.ga.Lc!=1?N.Ga=0:U=ae-$}t(N.ga!=null),t($+U<=ae);e:{if(E=(ue=N.ga).c,ae=ue.l.o,ue.$a==0){if(We=N.rc,Fe=N.Vc,lt=N.Fa,fe=N.P+1+$*E,_e=N.mb,Me=N.nb+$*E,t(fe<=N.P+N.qc),ue.Z!=0)for(t(Xr[ue.Z]!=null),oe=0;oe<U;++oe)Xr[ue.Z](We,Fe,lt,fe,_e,Me,E),We=_e,Fe=Me,Me+=E,fe+=E;else for(oe=0;oe<U;++oe)s(_e,Me,lt,fe,E),We=_e,Fe=Me,Me+=E,fe+=E;N.rc=We,N.Vc=Fe}else{if(t(ue.mc!=null),E=$+U,t((oe=ue.mc)!=null),t(E<=oe.i),oe.C>=E)E=1;else if(ue.ic||Be(),ue.ic){ue=oe.V,We=oe.Ba,Fe=oe.c;var Qe=oe.i,Ie=(lt=1,fe=oe.$/Fe,_e=oe.$%Fe,Me=oe.m,He=oe.s,oe.$),Re=Fe*Qe,at=Fe*E,ut=He.wc,ot=Ie<at?St(He,_e,fe):null;t(Ie<=Re),t(E<=Qe),t(xo(He));t:for(;;){for(;!Me.h&&Ie<at;){if(_e&ut||(ot=St(He,_e,fe)),t(ot!=null),ye(Me),256>(Qe=mi(ot.G[0],ot.H[0],Me)))ue[We+Ie]=Qe,++Ie,++_e>=Fe&&(_e=0,++fe<=E&&!(fe%16)&&$i(oe,fe));else{if(!(280>Qe)){lt=0;break t}Qe=Fa(Qe-256,Me);var Et,Nt=mi(ot.G[4],ot.H[4],Me);if(ye(Me),!(Ie>=(Nt=go(Fe,Nt=Fa(Nt,Me)))&&Re-Ie>=Qe)){lt=0;break t}for(Et=0;Et<Qe;++Et)ue[We+Ie+Et]=ue[We+Ie+Et-Nt];for(Ie+=Qe,_e+=Qe;_e>=Fe;)_e-=Fe,++fe<=E&&!(fe%16)&&$i(oe,fe);Ie<at&&_e&ut&&(ot=St(He,_e,fe))}t(Me.h==ie(Me))}$i(oe,fe>E?E:fe);break t}!lt||Me.h&&Ie<Re?(lt=0,oe.a=Me.h?5:3):oe.$=Ie,E=lt}else E=ha(oe,oe.V,oe.Ba,oe.c,oe.i,E,td);if(!E){U=0;break e}}$+U>=ae&&(N.Cc=1),U=1}if(!U)return null;if(N.Cc&&((U=N.ga)!=null&&(U.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+$*te}function R(N,E,$,U,te,ae){for(;0<te--;){var oe,ue=N,fe=E+($?1:0),_e=N,Me=E+($?0:3);for(oe=0;oe<U;++oe){var He=_e[Me+4*oe];He!=255&&(He*=32897,ue[fe+4*oe+0]=ue[fe+4*oe+0]*He>>23,ue[fe+4*oe+1]=ue[fe+4*oe+1]*He>>23,ue[fe+4*oe+2]=ue[fe+4*oe+2]*He>>23)}E+=ae}}function re(N,E,$,U,te){for(;0<U--;){var ae;for(ae=0;ae<$;++ae){var oe=N[E+2*ae+0],ue=15&(_e=N[E+2*ae+1]),fe=4369*ue,_e=(240&_e|_e>>4)*fe>>16;N[E+2*ae+0]=(240&oe|oe>>4)*fe>>16&240|(15&oe|oe<<4)*fe>>16>>4&15,N[E+2*ae+1]=240&_e|ue}E+=te}}function Se(N,E,$,U,te,ae,oe,ue){var fe,_e,Me=255;for(_e=0;_e<te;++_e){for(fe=0;fe<U;++fe){var He=N[E+fe];ae[oe+4*fe]=He,Me&=He}E+=$,oe+=ue}return Me!=255}function Le(N,E,$,U,te){var ae;for(ae=0;ae<te;++ae)$[U+ae]=N[E+ae]>>8}function Be(){Cs=R,Gr=re,Kr=Se,Dn=Le}function Ye(N,E,$){T[N]=function(U,te,ae,oe,ue,fe,_e,Me,He,We,Fe,lt,Qe,Ie,Re,at,ut){var ot,Et=ut-1>>1,Nt=ue[fe+0]|_e[Me+0]<<16,Wt=He[We+0]|Fe[lt+0]<<16;t(U!=null);var Pt=3*Nt+Wt+131074>>2;for(E(U[te+0],255&Pt,Pt>>16,Qe,Ie),ae!=null&&(Pt=3*Wt+Nt+131074>>2,E(ae[oe+0],255&Pt,Pt>>16,Re,at)),ot=1;ot<=Et;++ot){var $r=ue[fe+ot]|_e[Me+ot]<<16,Yr=He[We+ot]|Fe[lt+ot]<<16,Or=Nt+$r+Wt+Yr+524296,Ar=Or+2*($r+Wt)>>3;Pt=Ar+Nt>>1,Nt=(Or=Or+2*(Nt+Yr)>>3)+$r>>1,E(U[te+2*ot-1],255&Pt,Pt>>16,Qe,Ie+(2*ot-1)*$),E(U[te+2*ot-0],255&Nt,Nt>>16,Qe,Ie+(2*ot-0)*$),ae!=null&&(Pt=Or+Wt>>1,Nt=Ar+Yr>>1,E(ae[oe+2*ot-1],255&Pt,Pt>>16,Re,at+(2*ot-1)*$),E(ae[oe+2*ot+0],255&Nt,Nt>>16,Re,at+(2*ot+0)*$)),Nt=$r,Wt=Yr}1&ut||(Pt=3*Nt+Wt+131074>>2,E(U[te+ut-1],255&Pt,Pt>>16,Qe,Ie+(ut-1)*$),ae!=null&&(Pt=3*Wt+Nt+131074>>2,E(ae[oe+ut-1],255&Pt,Pt>>16,Re,at+(ut-1)*$)))}}function ht(){ni[zm]=aN,ni[Qh]=Q0,ni[Fx]=oN,ni[ef]=Hm,ni[tf]=Bx,ni[Bm]=eb,ni[J0]=zY,ni[qm]=Q0,ni[Vm]=Hm,ni[Um]=Bx,ni[f]=eb}function At(N){return N&~BY?0>N?0:255:N>>j3}function Ot(N,E){return At((19077*N>>8)+(26149*E>>8)-14234)}function sr(N,E,$){return At((19077*N>>8)-(6419*E>>8)-(13320*$>>8)+8708)}function tr(N,E){return At((19077*N>>8)+(33050*E>>8)-17685)}function Sr(N,E,$,U,te){U[te+0]=Ot(N,$),U[te+1]=sr(N,E,$),U[te+2]=tr(N,E)}function un(N,E,$,U,te){U[te+0]=tr(N,E),U[te+1]=sr(N,E,$),U[te+2]=Ot(N,$)}function mn(N,E,$,U,te){var ae=sr(N,E,$);E=ae<<3&224|tr(N,E)>>3,U[te+0]=248&Ot(N,$)|ae>>5,U[te+1]=E}function Kn(N,E,$,U,te){var ae=240&tr(N,E)|15;U[te+0]=240&Ot(N,$)|sr(N,E,$)>>4,U[te+1]=ae}function zs(N,E,$,U,te){U[te+0]=255,Sr(N,E,$,U,te+1)}function is(N,E,$,U,te){un(N,E,$,U,te),U[te+3]=255}function Ba(N,E,$,U,te){Sr(N,E,$,U,te),U[te+3]=255}function wn(N,E){return 0>N?0:N>E?E:N}function ei(N,E,$){T[N]=function(U,te,ae,oe,ue,fe,_e,Me,He){for(var We=Me+(-2&He)*$;Me!=We;)E(U[te+0],ae[oe+0],ue[fe+0],_e,Me),E(U[te+1],ae[oe+0],ue[fe+0],_e,Me+$),te+=2,++oe,++fe,Me+=2*$;1&He&&E(U[te+0],ae[oe+0],ue[fe+0],_e,Me)}}function Dm(N,E,$){return $==0?N==0?E==0?6:5:E==0?4:0:$}function Vi(N,E,$,U,te){switch(N>>>30){case 3:wo(E,$,U,te,0);break;case 2:Rn(E,$,U,te);break;case 1:ti(E,$,U,te)}}function Kh(N,E){var $,U,te=E.M,ae=E.Nb,oe=N.oc,ue=N.pc+40,fe=N.oc,_e=N.pc+584,Me=N.oc,He=N.pc+600;for($=0;16>$;++$)oe[ue+32*$-1]=129;for($=0;8>$;++$)fe[_e+32*$-1]=129,Me[He+32*$-1]=129;for(0<te?oe[ue-1-32]=fe[_e-1-32]=Me[He-1-32]=129:(i(oe,ue-32-1,127,21),i(fe,_e-32-1,127,9),i(Me,He-32-1,127,9)),U=0;U<N.za;++U){var We=E.ya[E.aa+U];if(0<U){for($=-1;16>$;++$)s(oe,ue+32*$-4,oe,ue+32*$+12,4);for($=-1;8>$;++$)s(fe,_e+32*$-4,fe,_e+32*$+4,4),s(Me,He+32*$-4,Me,He+32*$+4,4)}var Fe=N.Gd,lt=N.Hd+U,Qe=We.ad,Ie=We.Hc;if(0<te&&(s(oe,ue-32,Fe[lt].y,0,16),s(fe,_e-32,Fe[lt].f,0,8),s(Me,He-32,Fe[lt].ea,0,8)),We.Za){var Re=oe,at=ue-32+16;for(0<te&&(U>=N.za-1?i(Re,at,Fe[lt].y[15],4):s(Re,at,Fe[lt+1].y,0,4)),$=0;4>$;$++)Re[at+128+$]=Re[at+256+$]=Re[at+384+$]=Re[at+0+$];for($=0;16>$;++$,Ie<<=2)Re=oe,at=ue+_3[$],Ua[We.Ob[$]](Re,at),Vi(Ie,Qe,16*+$,Re,at)}else if(Re=Dm(U,te,We.Ob[0]),nc[Re](oe,ue),Ie!=0)for($=0;16>$;++$,Ie<<=2)Vi(Ie,Qe,16*+$,oe,ue+_3[$]);for($=We.Gc,Re=Dm(U,te,We.Dd),Po[Re](fe,_e),Po[Re](Me,He),Ie=Qe,Re=fe,at=_e,255&(We=$>>0)&&(170&We?Jl(Ie,256,Re,at):Wi(Ie,256,Re,at)),We=Me,Ie=He,255&($>>=8)&&(170&$?Jl(Qe,320,We,Ie):Wi(Qe,320,We,Ie)),te<N.Ub-1&&(s(Fe[lt].y,0,oe,ue+480,16),s(Fe[lt].f,0,fe,_e+224,8),s(Fe[lt].ea,0,Me,He+224,8)),$=8*ae*N.B,Fe=N.sa,lt=N.ta+16*U+16*ae*N.R,Qe=N.qa,We=N.ra+8*U+$,Ie=N.Ha,Re=N.Ia+8*U+$,$=0;16>$;++$)s(Fe,lt+$*N.R,oe,ue+32*$,16);for($=0;8>$;++$)s(Qe,We+$*N.B,fe,_e+32*$,8),s(Ie,Re+$*N.B,Me,He+32*$,8)}}function qa(N,E,$,U,te,ae,oe,ue,fe){var _e=[0],Me=[0],He=0,We=fe!=null?fe.kd:0,Fe=fe??new ma;if(N==null||12>$)return 7;Fe.data=N,Fe.w=E,Fe.ha=$,E=[E],$=[$],Fe.gb=[Fe.gb];e:{var lt=E,Qe=$,Ie=Fe.gb;if(t(N!=null),t(Qe!=null),t(Ie!=null),Ie[0]=0,12<=Qe[0]&&!r(N,lt[0],"RIFF")){if(r(N,lt[0]+8,"WEBP")){Ie=3;break e}var Re=je(N,lt[0]+4);if(12>Re||4294967286<Re){Ie=3;break e}if(We&&Re>Qe[0]-8){Ie=7;break e}Ie[0]=Re,lt[0]+=12,Qe[0]-=12}Ie=0}if(Ie!=0)return Ie;for(Re=0<Fe.gb[0],$=$[0];;){e:{var at=N;Qe=E,Ie=$;var ut=_e,ot=Me,Et=lt=[0];if((Pt=He=[He])[0]=0,8>Ie[0])Ie=7;else{if(!r(at,Qe[0],"VP8X")){if(je(at,Qe[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var Nt=je(at,Qe[0]+8),Wt=1+Z(at,Qe[0]+12);if(2147483648<=Wt*(at=1+Z(at,Qe[0]+15))){Ie=3;break e}Et!=null&&(Et[0]=Nt),ut!=null&&(ut[0]=Wt),ot!=null&&(ot[0]=at),Qe[0]+=18,Ie[0]-=18,Pt[0]=1}Ie=0}}if(He=He[0],lt=lt[0],Ie!=0)return Ie;if(Qe=!!(2&lt),!Re&&He)return 3;if(ae!=null&&(ae[0]=!!(16&lt)),oe!=null&&(oe[0]=Qe),ue!=null&&(ue[0]=0),oe=_e[0],lt=Me[0],He&&Qe&&fe==null){Ie=0;break}if(4>$){Ie=7;break}if(Re&&He||!Re&&!He&&!r(N,E[0],"ALPH")){$=[$],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{Nt=N,Ie=E,Re=$;var Pt=Fe.gb;ut=Fe.na,ot=Fe.P,Et=Fe.Sa,Wt=22,t(Nt!=null),t(Re!=null),at=Ie[0];var $r=Re[0];for(t(ut!=null),t(Et!=null),ut[0]=null,ot[0]=null,Et[0]=0;;){if(Ie[0]=at,Re[0]=$r,8>$r){Ie=7;break e}var Yr=je(Nt,at+4);if(4294967286<Yr){Ie=3;break e}var Or=8+Yr+1&-2;if(Wt+=Or,0<Pt&&Wt>Pt){Ie=3;break e}if(!r(Nt,at,"VP8 ")||!r(Nt,at,"VP8L")){Ie=0;break e}if($r[0]<Or){Ie=7;break e}r(Nt,at,"ALPH")||(ut[0]=Nt,ot[0]=at+8,Et[0]=Yr),at+=Or,$r-=Or}}if($=$[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],Ie!=0)break}$=[$],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(Pt=N,Ie=E,Re=$,ut=Fe.gb[0],ot=Fe.Ja,Et=Fe.xa,Nt=Ie[0],at=!r(Pt,Nt,"VP8 "),Wt=!r(Pt,Nt,"VP8L"),t(Pt!=null),t(Re!=null),t(ot!=null),t(Et!=null),8>Re[0])Ie=7;else{if(at||Wt){if(Pt=je(Pt,Nt+4),12<=ut&&Pt>ut-12){Ie=3;break e}if(We&&Pt>Re[0]-8){Ie=7;break e}ot[0]=Pt,Ie[0]+=8,Re[0]-=8,Et[0]=Wt}else Et[0]=5<=Re[0]&&Pt[Nt+0]==47&&!(Pt[Nt+4]>>5),ot[0]=Re[0];Ie=0}if($=$[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],E=E[0],Ie!=0)break;if(4294967286<Fe.Ja)return 3;if(ue==null||Qe||(ue[0]=Fe.xa?2:1),oe=[oe],lt=[lt],Fe.xa){if(5>$){Ie=7;break}ue=oe,We=lt,Qe=ae,N==null||5>$?N=0:5<=$&&N[E+0]==47&&!(N[E+4]>>5)?(Re=[0],Pt=[0],ut=[0],G(ot=new B,N,E,$),Ht(ot,Re,Pt,ut)?(ue!=null&&(ue[0]=Re[0]),We!=null&&(We[0]=Pt[0]),Qe!=null&&(Qe[0]=ut[0]),N=1):N=0):N=0}else{if(10>$){Ie=7;break}ue=lt,N==null||10>$||!Xc(N,E+3,$-3)?N=0:(We=N[E+0]|N[E+1]<<8|N[E+2]<<16,Qe=16383&(N[E+7]<<8|N[E+6]),N=16383&(N[E+9]<<8|N[E+8]),1&We||3<(We>>1&7)||!(We>>4&1)||We>>5>=Fe.Ja||!Qe||!N?N=0:(oe&&(oe[0]=Qe),ue&&(ue[0]=N),N=1))}if(!N||(oe=oe[0],lt=lt[0],He&&(_e[0]!=oe||Me[0]!=lt)))return 3;fe!=null&&(fe[0]=Fe,fe.offset=E-fe.w,t(4294967286>E-fe.w),t(fe.offset==fe.ha-$));break}return Ie==0||Ie==7&&He&&fe==null?(ae!=null&&(ae[0]|=Fe.na!=null&&0<Fe.na.length),U!=null&&(U[0]=oe),te!=null&&(te[0]=lt),0):Ie}function Zh(N,E,$){var U=E.width,te=E.height,ae=0,oe=0,ue=U,fe=te;if(E.Da=N!=null&&0<N.Da,E.Da&&(ue=N.cd,fe=N.bd,ae=N.v,oe=N.j,11>$||(ae&=-2,oe&=-2),0>ae||0>oe||0>=ue||0>=fe||ae+ue>U||oe+fe>te))return 0;if(E.v=ae,E.j=oe,E.va=ae+ue,E.o=oe+fe,E.U=ue,E.T=fe,E.da=N!=null&&0<N.da,E.da){if(!be(ue,fe,$=[N.ib],ae=[N.hb]))return 0;E.ib=$[0],E.hb=ae[0]}return E.ob=N!=null&&N.ob,E.Kb=N==null||!N.Sd,E.da&&(E.ob=E.ib<3*U/4&&E.hb<3*te/4,E.Kb=0),1}function rl(N){if(N==null)return 2;if(11>N.S){var E=N.f.RGBA;E.fb+=(N.height-1)*E.A,E.A=-E.A}else E=N.f.kb,N=N.height,E.O+=(N-1)*E.fa,E.fa=-E.fa,E.N+=(N-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(N-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(N-1)*E.lb,E.lb=-E.lb);return 0}function su(N,E,$,U){if(U==null||0>=N||0>=E)return 2;if($!=null){if($.Da){var te=$.cd,ae=$.bd,oe=-2&$.v,ue=-2&$.j;if(0>oe||0>ue||0>=te||0>=ae||oe+te>N||ue+ae>E)return 2;N=te,E=ae}if($.da){if(!be(N,E,te=[$.ib],ae=[$.hb]))return 2;N=te[0],E=ae[0]}}U.width=N,U.height=E;e:{var fe=U.width,_e=U.height;if(N=U.S,0>=fe||0>=_e||!(N>=zm&&13>N))N=2;else{if(0>=U.Rd&&U.sd==null){oe=ae=te=E=0;var Me=(ue=fe*N3[N])*_e;if(11>N||(ae=(_e+1)/2*(E=(fe+1)/2),N==12&&(oe=(te=fe)*_e)),(_e=a(Me+2*ae+oe))==null){N=1;break e}U.sd=_e,11>N?((fe=U.f.RGBA).eb=_e,fe.fb=0,fe.A=ue,fe.size=Me):((fe=U.f.kb).y=_e,fe.O=0,fe.fa=ue,fe.Fd=Me,fe.f=_e,fe.N=0+Me,fe.Ab=E,fe.Cd=ae,fe.ea=_e,fe.W=0+Me+ae,fe.Db=E,fe.Ed=ae,N==12&&(fe.F=_e,fe.J=0+Me+2*ae),fe.Tc=oe,fe.lb=te)}if(E=1,te=U.S,ae=U.width,oe=U.height,te>=zm&&13>te)if(11>te)N=U.f.RGBA,E&=(ue=Math.abs(N.A))*(oe-1)+ae<=N.size,E&=ue>=ae*N3[te],E&=N.eb!=null;else{N=U.f.kb,ue=(ae+1)/2,Me=(oe+1)/2,fe=Math.abs(N.fa),_e=Math.abs(N.Ab);var He=Math.abs(N.Db),We=Math.abs(N.lb),Fe=We*(oe-1)+ae;E&=fe*(oe-1)+ae<=N.Fd,E&=_e*(Me-1)+ue<=N.Cd,E=(E&=He*(Me-1)+ue<=N.Ed)&fe>=ae&_e>=ue&He>=ue,E&=N.y!=null,E&=N.f!=null,E&=N.ea!=null,te==12&&(E&=We>=ae,E&=Fe<=N.Tc,E&=N.F!=null)}else E=0;N=E?0:2}}return N!=0||$!=null&&$.fd&&(N=rl(U)),N}var Zn=64,md=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ui=24,nl=32,Xh=8,Bs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Xe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(N){return N},T.Predictor2=function(N,E,$){return E[$+0]},T.Predictor3=function(N,E,$){return E[$+1]},T.Predictor4=function(N,E,$){return E[$-1]},T.Predictor5=function(N,E,$){return ge(ge(N,E[$+1]),E[$+0])},T.Predictor6=function(N,E,$){return ge(N,E[$-1])},T.Predictor7=function(N,E,$){return ge(N,E[$+0])},T.Predictor8=function(N,E,$){return ge(E[$-1],E[$+0])},T.Predictor9=function(N,E,$){return ge(E[$+0],E[$+1])},T.Predictor10=function(N,E,$){return ge(ge(N,E[$-1]),ge(E[$+0],E[$+1]))},T.Predictor11=function(N,E,$){var U=E[$+0];return 0>=nt(U>>24&255,N>>24&255,(E=E[$-1])>>24&255)+nt(U>>16&255,N>>16&255,E>>16&255)+nt(U>>8&255,N>>8&255,E>>8&255)+nt(255&U,255&N,255&E)?U:N},T.Predictor12=function(N,E,$){var U=E[$+0];return(Oe((N>>24&255)+(U>>24&255)-((E=E[$-1])>>24&255))<<24|Oe((N>>16&255)+(U>>16&255)-(E>>16&255))<<16|Oe((N>>8&255)+(U>>8&255)-(E>>8&255))<<8|Oe((255&N)+(255&U)-(255&E)))>>>0},T.Predictor13=function(N,E,$){var U=E[$-1];return(it((N=ge(N,E[$+0]))>>24&255,U>>24&255)<<24|it(N>>16&255,U>>16&255)<<16|it(N>>8&255,U>>8&255)<<8|it(N>>0&255,U>>0&255))>>>0};var $x=T.PredictorAdd0;T.PredictorAdd1=wt,Xe("Predictor2","PredictorAdd2"),Xe("Predictor3","PredictorAdd3"),Xe("Predictor4","PredictorAdd4"),Xe("Predictor5","PredictorAdd5"),Xe("Predictor6","PredictorAdd6"),Xe("Predictor7","PredictorAdd7"),Xe("Predictor8","PredictorAdd8"),Xe("Predictor9","PredictorAdd9"),Xe("Predictor10","PredictorAdd10"),Xe("Predictor11","PredictorAdd11"),Xe("Predictor12","PredictorAdd12"),Xe("Predictor13","PredictorAdd13");var Hi=T.PredictorAdd2;Ut("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),Ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var $m,Ss=T.ColorIndexInverseTransform,pd=T.MapARGB,pa=T.VP8LColorIndexInverseTransformAlpha,iu=T.MapAlpha,sl=T.VP8LPredictorsAdd=[];sl.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var il,As,Ps,Va,xi,ga,Yl,wo,Rn,Jl,ti,Wi,gd,Yh,Jh,qs,_o,Ql,No,xd,ec,tc,al,xa,Cs,Gr,Kr,Dn,Zr=a(511),So=a(2041),vd=a(225),Ao=a(767),Fm=0,yd=So,rc=vd,vi=Ao,Gi=Zr,zm=0,Qh=1,Fx=2,ef=3,tf=4,Bm=5,J0=6,qm=7,Vm=8,Um=9,f=10,b=[2,3,7],k=[3,3,11],D=[280,256,256,256,40],H=[0,1,1,1,0],ce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Te=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ue=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ze=8,ct=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qt=null,pr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ri=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],as=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],va=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],bd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sN=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],nc=[],Ua=[],Po=[],iN=1,zx=2,Xr=[],ni=[];Ye("UpsampleRgbLinePair",Sr,3),Ye("UpsampleBgrLinePair",un,3),Ye("UpsampleRgbaLinePair",Ba,4),Ye("UpsampleBgraLinePair",is,4),Ye("UpsampleArgbLinePair",zs,4),Ye("UpsampleRgba4444LinePair",Kn,2),Ye("UpsampleRgb565LinePair",mn,2);var aN=T.UpsampleRgbLinePair,oN=T.UpsampleBgrLinePair,Q0=T.UpsampleRgbaLinePair,Hm=T.UpsampleBgraLinePair,Bx=T.UpsampleArgbLinePair,eb=T.UpsampleRgba4444LinePair,zY=T.UpsampleRgb565LinePair,tb=16,rb=1<<tb-1,qx=-227,lN=482,j3=6,BY=(256<<j3)-1,w3=0,qY=a(256),VY=a(256),UY=a(256),HY=a(256),WY=a(lN-qx),GY=a(lN-qx);ei("YuvToRgbRow",Sr,3),ei("YuvToBgrRow",un,3),ei("YuvToRgbaRow",Ba,4),ei("YuvToBgraRow",is,4),ei("YuvToArgbRow",zs,4),ei("YuvToRgba4444Row",Kn,2),ei("YuvToRgb565Row",mn,2);var _3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nb=[0,2,8],KY=[8,7,6,4,4,2,2,2,1,1,1,1],ZY=1;this.WebPDecodeRGBA=function(N,E,$,U,te){var ae=Qh,oe=new nu,ue=new ca;oe.ba=ue,ue.S=ae,ue.width=[ue.width],ue.height=[ue.height];var fe=ue.width,_e=ue.height,Me=new mo;if(Me==null||N==null)var He=2;else t(Me!=null),He=qa(N,E,$,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(He!=0?fe=0:(fe!=null&&(fe[0]=Me.width[0]),_e!=null&&(_e[0]=Me.height[0]),fe=1),fe){ue.width=ue.width[0],ue.height=ue.height[0],U!=null&&(U[0]=ue.width),te!=null&&(te[0]=ue.height);e:{if(U=new yo,(te=new ma).data=N,te.w=E,te.ha=$,te.kd=1,E=[0],t(te!=null),((N=qa(te.data,te.w,te.ha,null,null,null,E,null,te))==0||N==7)&&E[0]&&(N=4),(E=N)==0){if(t(oe!=null),U.data=te.data,U.w=te.w+te.offset,U.ha=te.ha-te.offset,U.put=po,U.ac=_s,U.bc=ua,U.ma=oe,te.xa){if((N=Fi())==null){oe=1;break e}if(function(We,Fe){var lt=[0],Qe=[0],Ie=[0];t:for(;;){if(We==null)return 0;if(Fe==null)return We.a=2,0;if(We.l=Fe,We.a=0,G(We.m,Fe.data,Fe.w,Fe.ha),!Ht(We.m,lt,Qe,Ie)){We.a=3;break t}if(We.xb=zx,Fe.width=lt[0],Fe.height=Qe[0],!vo(lt[0],Qe[0],1,We,null))break t;return 1}return t(We.a!=0),0}(N,U)){if(U=(E=su(U.width,U.height,oe.Oa,oe.ba))==0){t:{U=N;r:for(;;){if(U==null){U=0;break t}if(t(U.s.yc!=null),t(U.s.Ya!=null),t(0<U.s.Wb),t(($=U.l)!=null),t((te=$.ma)!=null),U.xb!=0){if(U.ca=te.ba,U.tb=te.tb,t(U.ca!=null),!Zh(te.Oa,$,ef)){U.a=2;break r}if(!Hc(U,$.width)||$.da)break r;if(($.da||Mr(U.ca.S))&&Be(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&Be()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!Ee(U.s.vb,U.s.Wa.Xa)){U.a=1;break r}U.xb=0}if(!ha(U,U.V,U.Ba,U.c,U.i,$.o,Uc))break r;te.Dc=U.Ma,U=1;break t}t(U.a!=0),U=0}U=!U}U&&(E=N.a)}else E=N.a}else{if((N=new Nr)==null){oe=1;break e}if(N.Fa=te.na,N.P=te.P,N.qc=te.Sa,Xo(N,U)){if((E=su(U.width,U.height,oe.Oa,oe.ba))==0){if(N.Aa=0,$=oe.Oa,t((te=N)!=null),$!=null){if(0<(fe=0>(fe=$.Md)?0:100<fe?255:255*fe/100)){for(_e=Me=0;4>_e;++_e)12>(He=te.pb[_e]).lc&&(He.ia=fe*KY[0>He.lc?0:He.lc]>>3),Me|=He.ia;Me&&(alert("todo:VP8InitRandom"),te.ia=1)}te.Ga=$.Id,100<te.Ga?te.Ga=100:0>te.Ga&&(te.Ga=0)}dr(N,U)||(E=N.a)}}else E=N.a}E==0&&oe.Oa!=null&&oe.Oa.fd&&(E=rl(oe.ba))}oe=E}ae=oe!=0?null:11>ae?ue.f.RGBA.eb:ue.f.kb.y}else ae=null;return ae};var N3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,M){for(var z="",O=0;O<4;O++)z+=String.fromCharCode(T[M++]);return z}function d(T,M){return(T[M+0]<<0|T[M+1]<<8|T[M+2]<<16)>>>0}function h(T,M){return(T[M+0]<<0|T[M+1]<<8|T[M+2]<<16|T[M+3]<<24)>>>0}new c;var m=[0],p=[0],v=[],g=new c,y=e,j=function(T,M){var z={},O=0,I=!1,q=0,F=0;if(z.frames=[],!function(X,ie,me,ye){for(var Ne=0;Ne<ye;Ne++)if(X[ie+Ne]!=me.charCodeAt(Ne))return!0;return!1}(T,M,"RIFF",4)){var W,V;for(h(T,M+=4),M+=8;M<T.length;){var ne=u(T,M),G=h(T,M+=4);M+=4;var K=G+(1&G);switch(ne){case"VP8 ":case"VP8L":z.frames[O]===void 0&&(z.frames[O]={}),(B=z.frames[O]).src_off=I?F:M-8,B.src_size=q+G+8,O++,I&&(I=!1,q=0,F=0);break;case"VP8X":(B=z.header={}).feature_flags=T[M];var ee=M+4;B.canvas_width=1+d(T,ee),ee+=3,B.canvas_height=1+d(T,ee),ee+=3;break;case"ALPH":I=!0,q=K+8,F=M-8;break;case"ANIM":(B=z.header).bgcolor=h(T,M),ee=M+4,B.loop_count=(W=T)[(V=ee)+0]<<0|W[V+1]<<8,ee+=2;break;case"ANMF":var xe,B;(B=z.frames[O]={}).offset_x=2*d(T,M),M+=3,B.offset_y=2*d(T,M),M+=3,B.width=1+d(T,M),M+=3,B.height=1+d(T,M),M+=3,B.duration=d(T,M),M+=3,xe=T[M++],B.dispose=1&xe,B.blend=xe>>1&1}ne!="ANMF"&&(M+=K)}return z}}(y,0);j.response=y,j.rgbaoutput=!0,j.dataurl=!1;var _=j.header?j.header:null,w=j.frames?j.frames:null;if(_){_.loop_counter=_.loop_count,m=[_.canvas_height],p=[_.canvas_width];for(var A=0;A<w.length&&w[A].blend!=0;A++);}var S=w[0],P=g.WebPDecodeRGBA(y,S.src_off,S.src_size,p,m);S.rgba=P,S.imgwidth=p[0],S.imgheight=m[0];for(var C=0;C<p[0]*m[0]*4;C++)v[C]=P[C];return this.width=p,this.height=m,this.data=v,this}(function(e){var t=function(){return typeof QC=="function"},r=function(m,p,v,g){var y=4,j=o;switch(g){case e.image_compression.FAST:y=1,j=a;break;case e.image_compression.MEDIUM:y=6,j=l;break;case e.image_compression.SLOW:y=9,j=c}m=s(m,p,v,j);var _=QC(m,{level:y});return e.__addimage__.arrayBufferToBinaryString(_)},s=function(m,p,v,g){for(var y,j,_,w=m.length/p,A=new Uint8Array(m.length+w),S=d(),P=0;P<w;P+=1){if(_=P*p,y=m.subarray(_,_+p),g)A.set(g(y,v,j),_+P);else{for(var C,T=S.length,M=[];C<T;C+=1)M[C]=S[C](y,v,j);var z=h(M.concat());A.set(M[z],_+P)}j=y}return A},i=function(m){var p=Array.apply([],m);return p.unshift(0),p},a=function(m,p){var v,g=[],y=m.length;g[0]=1;for(var j=0;j<y;j+=1)v=m[j-p]||0,g[j+1]=m[j]-v+256&255;return g},o=function(m,p,v){var g,y=[],j=m.length;y[0]=2;for(var _=0;_<j;_+=1)g=v&&v[_]||0,y[_+1]=m[_]-g+256&255;return y},l=function(m,p,v){var g,y,j=[],_=m.length;j[0]=3;for(var w=0;w<_;w+=1)g=m[w-p]||0,y=v&&v[w]||0,j[w+1]=m[w]+256-(g+y>>>1)&255;return j},c=function(m,p,v){var g,y,j,_,w=[],A=m.length;w[0]=4;for(var S=0;S<A;S+=1)g=m[S-p]||0,y=v&&v[S]||0,j=v&&v[S-p]||0,_=u(g,y,j),w[S+1]=m[S]-_+256&255;return w},u=function(m,p,v){if(m===p&&p===v)return m;var g=Math.abs(p-v),y=Math.abs(m-v),j=Math.abs(m+p-v-v);return g<=y&&g<=j?m:y<=j?p:v},d=function(){return[i,a,o,l,c]},h=function(m){var p=m.map(function(v){return v.reduce(function(g,y){return g+Math.abs(y)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,v,g){var y,j,_,w,A,S,P,C,T,M,z,O,I,q,F,W=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(_=new jVe(m)).imgData,j=_.bits,y=_.colorSpace,A=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){T=(C=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,z=new Uint8Array(T*_.colors),M=new Uint8Array(T);var ne,G=_.pixelBitlength-_.bits;for(q=0,F=0;q<T;q++){for(I=C[q],ne=0;ne<G;)z[F++]=I>>>ne&255,ne+=_.bits;M[q]=I>>>ne&255}}if(_.bits===16){T=(C=new Uint32Array(_.decodePixels().buffer)).length,z=new Uint8Array(T*(32/_.pixelBitlength)*_.colors),M=new Uint8Array(T*(32/_.pixelBitlength)),O=_.colors>1,q=0,F=0;for(var K=0;q<T;)I=C[q++],z[F++]=I>>>0&255,O&&(z[F++]=I>>>16&255,I=C[q++],z[F++]=I>>>0&255),M[K++]=I>>>16&255;j=8}g!==e.image_compression.NONE&&t()?(m=r(z,_.width*_.colors,_.colors,g),P=r(M,_.width,1,g)):(m=z,P=M,W=void 0)}if(_.colorType===3&&(y=this.color_spaces.INDEXED,S=_.palette,_.transparency.indexed)){var ee=_.transparency.indexed,xe=0;for(q=0,T=ee.length;q<T;++q)xe+=ee[q];if((xe/=255)===T-1&&ee.indexOf(0)!==-1)w=[ee.indexOf(0)];else if(xe!==T){for(C=_.decodePixels(),M=new Uint8Array(C.length),q=0,T=C.length;q<T;q++)M[q]=ee[C[q]];P=r(M,_.width,1)}}var B=function(X){var ie;switch(X){case e.image_compression.FAST:ie=11;break;case e.image_compression.MEDIUM:ie=13;break;case e.image_compression.SLOW:ie=14;break;default:ie=12}return ie}(g);return W===this.decode.FLATE_DECODE&&(V="/Predictor "+B+" "),V+="/Colors "+A+" /BitsPerComponent "+j+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:v,data:m,index:p,filter:W,decodeParameters:V,transparency:w,palette:S,sMask:P,predictor:B,width:_.width,height:_.height,bitsPerComponent:j,colorSpace:y}}}})(Zt.API),function(e){e.processGIF89A=function(t,r,s,i){var a=new wVe(t),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new pS(100).encode(u,100);return e.processJPEG.call(this,d,r,s,i)},e.processGIF87A=e.processGIF89A}(Zt.API),hl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:s,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){hn.log("bit decode error:"+r)}},hl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},hl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*i*4,l=a>>4,c=15&a,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},hl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*s;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},hl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,u=a>>15?255:0,d=s*this.width*4+4*i;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=e}},hl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},hl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},hl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=s,this.data[l+3]=o}},hl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,i){var a=new hl(t,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},u=new pS(100).encode(c,100);return e.processJPEG.call(this,u,r,s,i)}}(Zt.API),o$.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,i){var a=new o$(t),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},u=new pS(100).encode(c,100);return e.processJPEG.call(this,u,r,s,i)}}(Zt.API),Zt.API.processRGBA=function(e,t,r){for(var s=e.data,i=s.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,u=0;u<i;u+=4){var d=s[u],h=s[u+1],m=s[u+2],p=s[u+3];a[l++]=d,a[l++]=h,a[l++]=m,o[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Zt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},hp=Zt.API,h1=hp.getCharWidthsArray=function(e,t){var r,s,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=t.doKerning!==!1,m=0,p=e.length,v=0,g=l[0]||c,y=[];for(r=0;r<p;r++)s=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+o*(1e3/a)||0)/1e3):(m=h&&en(u[s])==="object"&&!isNaN(parseInt(u[s][v],10))?u[s][v]/d:0,y.push((l[s]||g)/c+m)),v=s;return y},n$=hp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return hp.processArabic&&(e=hp.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,i)/r:h1.apply(this,arguments).reduce(function(a,o){return a+o},0)},s$=function(e,t,r,s){for(var i=[],a=0,o=e.length,l=0;a!==o&&l+t[a]<r;)l+=t[a],a++;i.push(e.slice(0,a));var c=a;for(l=0;a!==o;)l+t[a]>s&&(i.push(e.slice(c,a)),l=0,c=a),l+=t[a],a++;return c!==a&&i.push(e.slice(c,a)),i},i$=function(e,t,r){r||(r={});var s,i,a,o,l,c,u,d=[],h=[d],m=r.textIndent||0,p=0,v=0,g=e.split(" "),y=h1.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var j=Array(c).join(" "),_=[];g.map(function(A){(A=A.split(/\s*\n/)).length>1?_=_.concat(A.map(function(S,P){return(P&&S.length?`
`:"")+S})):_.push(A[0])}),g=_,c=n$.apply(this,[j,r])}for(a=0,o=g.length;a<o;a++){var w=0;if(s=g[a],c&&s[0]==`
`&&(s=s.substr(1),w=1),m+p+(v=(i=h1.apply(this,[s,r])).reduce(function(A,S){return A+S},0))>t||w){if(v>t){for(l=s$.apply(this,[s,i,t-(m+p),t]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);v=i.slice(s.length-(d[0]?d[0].length:0)).reduce(function(A,S){return A+S},0)}else d=[s];h.push(d),m=v+c,p=y}else d.push(s),m+=p+v,p=y}return u=c?function(A,S){return(S?j:"")+A.join(" ")}:function(A){return A.join(" ")},h.map(u)},hp.splitTextToSize=function(e,t,r){var s,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=s.length;l<c;l++)u=u.concat(i$.apply(this,[s[l],o,a]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},i=0;i<t.length;i++)r[t[i]]="0123456789abcdef"[i],s["0123456789abcdef"[i]]=t[i];var a=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var m,p,v,g,y=["{"];for(var j in h){if(m=h[j],isNaN(parseInt(j,10))?p="'"+j+"'":(j=parseInt(j,10),p=(p=a(j).slice(2)).slice(0,-1)+s[p.slice(-1)]),typeof m=="number")m<0?(v=a(m).slice(3),g="-"):(v=a(m).slice(2),g=""),v=g+v.slice(0,-1)+s[v.slice(-1)];else{if(en(m)!=="object")throw new Error("Don't know what to do with value type "+en(m)+".");v=o(m)}y.push(p+v)}return y.push("}"),y.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,g,y={},j=1,_=y,w=[],A="",S="",P=h.length-1,C=1;C<P;C+=1)(g=h[C])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(g):g=="{"?(w.push([_,v]),_={},v=void 0):g=="}"?((p=w.pop())[0][p[1]]=_,v=void 0,_=p[0]):g=="-"?j=-1:v===void 0?r.hasOwnProperty(g)?(A+=r[g],v=parseInt(A,16)*j,j=1,A=""):A+=g:r.hasOwnProperty(g)?(S+=r[g],_[v]=parseInt(S,16)*j,j=1,v=void 0,S=""):S+=g;return y},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,p=d.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=u.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(Zt.API),function(e){var t=function(r){for(var s=r.length,i=new Uint8Array(s),a=0;a<s;a++)i[a]=r.charCodeAt(a);return i};e.API.events.push(["addFont",function(r){var s=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(ry(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,s)}}])}(Zt),function(e){function t(){return(Jt.canvg?Promise.resolve(Jt.canvg):uh(()=>import("./index.es-e8d04927.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Zt.API.addSvgAsImage=function(r,s,i,a,o,l,c,u){if(isNaN(s)||isNaN(i))throw hn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw hn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=o;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),s,i,a,o,c,u)})}}(),Zt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(t,r);return this},Zt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,h=0;function m(v,g){var y,j=!1;for(y=0;y<v.length;y+=1)v[y]===g&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(en(e)==="object"){for(i in e)if(a=e[i],m(l,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&m(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(u=0;u<a.length;u+=1)if(s=!0,a[u].length===1&&typeof a[u][0]=="number")c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(s=!1);s===!0&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}r[i].value="["+c.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Zt.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=a.length;h<m;++h){if(l=o.metadata.characterToGlyph(a.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},s=function(a){var o,l,c,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(a).sort(function(p,v){return p-v})).length;h<m;h++)o=l[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(u=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var g=u();d({data:p,addLength1:!0,objectId:g}),c("endobj");var y=u();d({data:s(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var j=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+xp(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var _=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+xp(l.fontName)),c("/FontDescriptor "+j+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+xp(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+_+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var v=u();d({data:m,addLength1:!0,objectId:v}),c("endobj");var g=u();d({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var y=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+xp(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var j=0;j<l.metadata.hmtx.widths.length;j++)l.metadata.hmtx.widths[j]=parseInt(l.metadata.hmtx.widths[j]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+xp(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,u=a.y,d=a.options||{},h=a.mutex||{},m=h.pdfEscape,p=h.activeFontKey,v=h.fonts,g=p,y="",j=0,_="",w=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:h};for(_=l,g=p,Array.isArray(l)&&(_=l[0]),j=0;j<_.length;j+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[_[j].charCodeAt(0)]),o||_[j].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?y+=_[j]:y+="";var A="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?A=m(y,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(A=r(y,v[g])),h.isHex=!0,{text:A,x:c,y:u,options:d,mutex:h}};t.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(i(Object.assign({},c,{text:o[u]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(Zt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Zt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var i,a,o,l,c,u,d,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,w=0;this.__bidiEngine__={};var A=function(O){var I=O.charCodeAt(),q=I>>8,F=g[q];return F!==void 0?h[256*F+(255&I)]:q===252||q===253?"AL":j.test(q)?"L":q===8?"R":"N"},S=function(O){for(var I,q=0;q<O.length;q++){if((I=A(O.charAt(q)))==="L")return!1;if(I==="R")return!0}return!1},P=function(O,I,q,F){var W,V,ne,G,K=I[F];switch(K){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(K="AN");break;case"AL":_=!0,K="R";break;case"WS":K="N";break;case"CS":F<1||F+1>=I.length||(W=q[F-1])!=="EN"&&W!=="AN"||(V=I[F+1])!=="EN"&&V!=="AN"?K="N":_&&(V="AN"),K=V===W?V:"N";break;case"ES":K=(W=F>0?q[F-1]:"B")==="EN"&&F+1<I.length&&I[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&q[F-1]==="EN"){K="EN";break}if(_){K="N";break}for(ne=F+1,G=I.length;ne<G&&I[ne]==="ET";)ne++;K=ne<G&&I[ne]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(G=I.length,ne=F+1;ne<G&&I[ne]==="NSM";)ne++;if(ne<G){var ee=O[F],xe=ee>=1425&&ee<=2303||ee===64286;if(W=I[ne],xe&&(W==="R"||W==="AL")){K="R";break}}}K=F<1||(W=I[F-1])==="B"?"N":q[F-1];break;case"B":_=!1,i=!0,K=w;break;case"S":a=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":K="N"}return K},C=function(O,I,q){var F=O.split("");return q&&T(F,q,{hiLevel:w}),F.reverse(),I&&I.reverse(),F.join("")},T=function(O,I,q){var F,W,V,ne,G,K=-1,ee=O.length,xe=0,B=[],X=w?p:m,ie=[];for(_=!1,i=!1,a=!1,W=0;W<ee;W++)ie[W]=A(O[W]);for(V=0;V<ee;V++){if(G=xe,B[V]=P(O,ie,B,V),F=240&(xe=X[G][v[B[V]]]),xe&=15,I[V]=ne=X[xe][5],F>0)if(F===16){for(W=K;W<V;W++)I[W]=1;K=-1}else K=-1;if(X[xe][6])K===-1&&(K=V);else if(K>-1){for(W=K;W<V;W++)I[W]=ne;K=-1}ie[V]==="B"&&(I[V]=0),q.hiLevel|=ne}a&&function(me,ye,Ne){for(var le=0;le<Ne;le++)if(me[le]==="S"){ye[le]=w;for(var Q=le-1;Q>=0&&me[Q]==="WS";Q--)ye[Q]=w}}(ie,I,ee)},M=function(O,I,q,F,W){if(!(W.hiLevel<O)){if(O===1&&w===1&&!i)return I.reverse(),void(q&&q.reverse());for(var V,ne,G,K,ee=I.length,xe=0;xe<ee;){if(F[xe]>=O){for(G=xe+1;G<ee&&F[G]>=O;)G++;for(K=xe,ne=G-1;K<ne;K++,ne--)V=I[K],I[K]=I[ne],I[ne]=V,q&&(V=q[K],q[K]=q[ne],q[ne]=V);xe=G}xe++}}},z=function(O,I,q){var F=O.split(""),W={hiLevel:w};return q||(q=[]),T(F,q,W),function(V,ne,G){if(G.hiLevel!==0&&d)for(var K,ee=0;ee<V.length;ee++)ne[ee]===1&&(K=y.indexOf(V[ee]))>=0&&(V[ee]=y[K+1])}(F,q,W),M(2,F,I,q,W),M(1,F,I,q,W),F.join("")};return this.__bidiEngine__.doBidiReorder=function(O,I,q){if(function(W,V){if(V)for(var ne=0;ne<W.length;ne++)V[ne]=ne;l===void 0&&(l=S(W)),u===void 0&&(u=S(W))}(O,I),o||!c||u)if(o&&c&&l^u)w=l?1:0,O=C(O,I,q);else if(!o&&c&&u)w=l?1:0,O=z(O,I,q),O=C(O,I);else if(!o||l||c||u){if(o&&!c&&l^u)O=C(O,I),l?(w=0,O=z(O,I,q)):(w=1,O=z(O,I,q),O=C(O,I));else if(o&&l&&!c&&u)w=1,O=z(O,I,q),O=C(O,I);else if(!o&&!c&&l^u){var F=d;l?(w=1,O=z(O,I,q),w=0,d=!1,O=z(O,I,q),d=F):(w=0,O=z(O,I,q),O=C(O,I),w=1,d=!1,O=z(O,I,q),d=F,O=C(O,I))}}else w=0,O=z(O,I,q);else w=l?1:0,O=z(O,I,q);return O},this.__bidiEngine__.setOptions=function(O){O&&(o=O.isInputVisual,c=O.isOutputVisual,l=O.isInputRtl,u=O.isOutputRtl,d=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var i=s.text,a=(s.x,s.y,s.options||{}),o=(s.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);s.text=o}else s.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(Zt),Zt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new vh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new DVe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new _Ve(this.contents),this.head=new SVe(this),this.name=new EVe(this),this.cmap=new TY(this),this.toUnicode={},this.hhea=new AVe(this),this.maxp=new TVe(this),this.hmtx=new OVe(this),this.post=new CVe(this),this.os2=new PVe(this),this.loca=new RVe(this),this.glyf=new LVe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var i,a,o,l;for(o=0,a=0,l=(t=""+t).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var ql,vh=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,i;for(i=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,i,a,o,l,c;return t=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*i+16777216*a+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,i,a;for(a=[],s=0,i=t.length;s<i;s++)r=t[s],a.push(this.writeByte(r));return a},e}(),_Ve=function(){var e;function t(r){var s,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,i,a,o,l,c,u,d,h,m,p,v,g;for(g in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),d=16*p-h,(i=new vh).writeInt(this.scalarType),i.writeShort(p),i.writeShort(h),i.writeShort(o),i.writeShort(d),a=16*p,u=i.pos+a,l=null,v=[],r)for(m=r[g],i.writeString(g),i.writeInt(e(m)),i.writeInt(u),i.writeInt(m.length),v=v.concat(m),g==="head"&&(l=u),u+=m.length;u%4;)v.push(0),u++;return i.write(v),s=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(s),i.data},e=function(r){var s,i,a,o;for(r=OY.call(r);r.length%4;)r.push(0);for(a=new vh(r),i=0,s=0,o=r.length;s<o;s=s+=4)i+=a.readUInt32();return 4294967295&i},t}(),NVe={}.hasOwnProperty,Bc=function(e,t){for(var r in t)NVe.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};ql=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var SVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new vh).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t}(),l$=function(){function e(t,r){var s,i,a,o,l,c,u,d,h,m,p,v,g,y,j,_,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,a=function(){var A,S;for(S=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var A,S;for(S=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)S.push(t.readUInt16());return S}(),u=function(){var A,S;for(S=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)S.push(t.readUInt16());return S}(),d=function(){var A,S;for(S=[],c=A=0;0<=m?A<m:A>m;c=0<=m?++A:--A)S.push(t.readUInt16());return S}(),i=(this.length-t.pos+this.offset)/2,l=function(){var A,S;for(S=[],c=A=0;0<=i?A<i:A>i;c=0<=i?++A:--A)S.push(t.readUInt16());return S}(),c=j=0,w=a.length;j<w;c=++j)for(y=a[c],s=_=v=g[c];v<=y?_<=y:_>=y;s=v<=y?++_:--_)d[c]===0?o=s+u[c]:(o=l[d[c]/2+(s-v)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[s]=65535&o}t.pos=h}return e.encode=function(t,r){var s,i,a,o,l,c,u,d,h,m,p,v,g,y,j,_,w,A,S,P,C,T,M,z,O,I,q,F,W,V,ne,G,K,ee,xe,B,X,ie,me,ye,Ne,le,Q,J,se,Z;switch(F=new vh,o=Object.keys(t).sort(function(je,Ee){return je-Ee}),r){case"macroman":for(g=0,y=function(){var je=[];for(v=0;v<256;++v)je.push(0);return je}(),_={0:0},a={},W=0,K=o.length;W<K;W++)_[Q=t[i=o[W]]]==null&&(_[Q]=++g),a[i]={old:t[i],new:_[t[i]]},y[i]=_[t[i]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(y),{charMap:a,subtable:F.data,maxGlyphID:g+1};case"unicode":for(I=[],h=[],w=0,_={},s={},j=u=null,V=0,ee=o.length;V<ee;V++)_[S=t[i=o[V]]]==null&&(_[S]=++w),s[i]={old:S,new:_[S]},l=_[S]-i,j!=null&&l===u||(j&&h.push(j),I.push(i),u=l),j=i;for(j&&h.push(j),h.push(65535),I.push(65535),z=2*(M=I.length),T=2*Math.pow(Math.log(M)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,C=2*M-T,c=[],P=[],p=[],v=ne=0,xe=I.length;ne<xe;v=++ne){if(O=I[v],d=h[v],O===65535){c.push(0),P.push(0);break}if(O-(q=s[O].new)>=32768)for(c.push(0),P.push(2*(p.length+M-v)),i=G=O;O<=d?G<=d:G>=d;i=O<=d?++G:--G)p.push(s[i].new);else c.push(q-O),P.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*M+2*p.length),F.writeUInt16(0),F.writeUInt16(z),F.writeUInt16(T),F.writeUInt16(m),F.writeUInt16(C),Ne=0,B=h.length;Ne<B;Ne++)i=h[Ne],F.writeUInt16(i);for(F.writeUInt16(0),le=0,X=I.length;le<X;le++)i=I[le],F.writeUInt16(i);for(J=0,ie=c.length;J<ie;J++)l=c[J],F.writeUInt16(l);for(se=0,me=P.length;se<me;se++)A=P[se],F.writeUInt16(A);for(Z=0,ye=p.length;Z<ye;Z++)g=p[Z],F.writeUInt16(g);return{charMap:s,subtable:F.data,maxGlyphID:w+1}}},e}(),TY=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,i,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)s=new l$(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var i,a;return s==null&&(s="macroman"),i=l$.encode(r,s),(a=new vh).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},t}(),AVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),PVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,i;for(i=[],s=0;s<10;++s)i.push(r.readByte());return i}(),this.charRange=function(){var s,i;for(i=[],s=0;s<4;++s)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,i;for(i=[],s=0;s<2;s=++s)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),CVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="post",t.prototype.parse=function(r){var s,i,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(i=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)s=r.readByte(),a.push(this.names.push(r.readString(s)));return a;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t}(),kVe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},EVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="name",t.prototype.parse=function(r){var s,i,a,o,l,c,u,d,h,m,p;for(r.pos=this.offset,r.readShort(),s=r.readShort(),c=r.readShort(),i=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=h=0,m=i.length;h<m;o=++h)a=i[o],r.pos=a.offset,d=r.readString(a.length),l=new kVe(d,a),u[p=a.nameID]==null&&(u[p]=[]),u[a.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),TVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),OVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,i,a,o,l,c,u;for(r.pos=this.offset,this.metrics=[],s=0,c=this.file.hhea.numberOfMetrics;0<=c?s<c:s>c;s=0<=c?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],s=d=0;0<=a?d<a:d>a;s=0<=a?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,p;for(p=[],d=0,h=(m=this.metrics).length;d<h;d++)o=m[d],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],s=l=0;0<=a?l<a:l>a;s=0<=a?++l:--l)u.push(this.widths.push(i));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),OY=[].slice,LVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,i,a,o,l,c,u,d,h,m;return r in this.cache?this.cache[r]:(o=this.file.loca,s=this.file.contents,i=o.indexOf(r),(a=o.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+i,l=(c=new vh(s.read(a))).readShort(),d=c.readShort(),m=c.readShort(),u=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new IVe(c,d,m,u,h):new MVe(c,l,d,m,u,h),this.cache[r]))},t.prototype.encode=function(r,s,i){var a,o,l,c,u;for(l=[],o=[],c=0,u=s.length;c<u;c++)a=r[s[c]],o.push(l.length),a&&(l=l.concat(a.encode(i)));return o.push(l.length),{table:l,offsets:o}},t}(),MVe=function(){function e(t,r,s,i,a,o){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),IVe=function(){function e(t,r,s,i,a){var o,l;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new vh(OY.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),RVe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Bc(t,ql),t.prototype.tag="loca",t.prototype.parse=function(r){var s,i;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,l=0;l<i.length;++l)if(i[l]=a,o<s.length&&s[o]==l){++o,i[l]=a;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(a+=u)}for(var d=new Array(4*i.length),h=0;h<i.length;++h)d[4*h+3]=255&i[h],d[4*h+2]=(65280&i[h])>>8,d[4*h+1]=(16711680&i[h])>>16,d[4*h]=(4278190080&i[h])>>24;return d},t}(),DVe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,i,a;for(r in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)s=a[r],t[r]=i[s];return t},e.prototype.glyphsFor=function(t){var r,s,i,a,o,l,c;for(i={},o=0,l=t.length;o<l;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(s=i[a])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))s=c[a],i[a]=s;return i},e.prototype.encode=function(t,r){var s,i,a,o,l,c,u,d,h,m,p,v,g,y,j;for(i in s=TY.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},j=s.charMap)p[(c=j[i]).old]=c.new;for(v in m=s.maxGlyphID,o)v in p||(p[v]=m++);return d=function(_){var w,A;for(w in A={},_)A[_[w]]=w;return A}(p),h=Object.keys(d).sort(function(_,w){return _-w}),g=function(){var _,w,A;for(A=[],_=0,w=h.length;_<w;_++)l=h[_],A.push(d[l]);return A}(),a=this.font.glyf.encode(o,g,p),u=this.font.loca.encode(a.offsets,g),y={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();Zt.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,i,a,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)s=r[l],u.push(t.convert(s));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+r},t}();const $Ve=()=>{var Pe,de;const{toast:e}=pt(),{profile:t}=ar(),[r,s]=x.useState("dossiers"),[i,a]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState([]),[d,h]=x.useState(!1),[m,p]=x.useState(null),[v,g]=x.useState(""),[y,j]=x.useState("all"),[_,w]=x.useState(!0),[A,S]=x.useState([]),[P,C]=x.useState([]),[T,M]=x.useState([]),[z,O]=x.useState(null),[I,q]=x.useState(null),[F,W]=x.useState("");x.useState([]),(A||[]).filter(be=>{var ze,Xe;if(!F)return!0;const Ve=F.toLowerCase();return be.reference&&be.reference.toLowerCase().includes(Ve)||be.status&&be.status.toLowerCase().includes(Ve)||((ze=be.users)==null?void 0:ze.full_name)&&be.users.full_name.toLowerCase().includes(Ve)||be.client_name&&be.client_name.toLowerCase().includes(Ve)||((Xe=be.parcels)==null?void 0:Xe.reference)&&be.parcels.reference.toLowerCase().includes(Ve)});const[ne,G]=x.useState(null),K=["pending","pending_notary","awaiting_verification","in_progress","under_review","authenticated","notarized","completed","verified","rejected"],ee=be=>{var Ve,ze;try{const Xe=new Zt;Xe.setFontSize(14),Xe.text(`Acte / Dossier ${be.reference||be.id}`,14,18),Xe.setFontSize(10);const et=[`Statut: ${be.status}`,`Valeur: ${be.valuation?be.valuation.toLocaleString()+" XOF":"N/A"}`,`Client: ${((Ve=be.users)==null?void 0:Ve.full_name)||be.client_name||"N/A"}`,`Parcelle: ${((ze=be.parcels)==null?void 0:ze.reference)||be.parcel_reference||"N/A"}`,`Cr le: ${new Date(be.created_at).toLocaleDateString("fr-FR")}`,`Maj le: ${new Date(be.updated_at).toLocaleDateString("fr-FR")}`];let ge=28;et.forEach(Oe=>{Xe.text(Oe,14,ge),ge+=6}),Xe.save(`dossier_${be.reference||be.id}.pdf`),e({title:"PDF gnr",description:`dossier_${be.reference||be.id}.pdf`})}catch{e({variant:"destructive",title:"Erreur PDF"})}};x.useEffect(()=>{B(),me(),t!=null&&t.id&&xe()},[t]);const xe=async()=>{try{const be=await SupabaseDataService.getDocumentsByUser(t.id);u(be||[])}catch{u([])}},B=async()=>{if(t!=null&&t.id){w(!0);try{const{data:be,error:Ve}=await pe.from("transactions").select(`
          *,
          parcels(reference, location, title),
          users!transactions_buyer_id_fkey(full_name, email)
        `).or(`notary_id.eq.${t.id},assigned_notary.eq.${t.id}`).order("created_at",{ascending:!1});if(Ve){console.log("Erreur dossiers:",Ve);const{data:ge,error:Oe}=await pe.from("contracts").select("*").eq("notary_id",t.id).order("created_at",{ascending:!1});Oe||S(ge||[])}else S(be||[]);const{data:ze,error:Xe}=await pe.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(10);Xe||M(ze||[]);const et=X(be||[]);C([{title:"Dossiers  Vrifier",value:et.pending,icon:rie,color:"text-yellow-500",trend:et.pendingTrend},{title:"Actes Authentifis (Mois)",value:et.authenticated,icon:A0,color:"text-green-500",trend:et.authenticatedTrend},{title:"Procdures en Attente",value:et.inProgress,icon:AA,color:"text-blue-500",trend:et.inProgressTrend},{title:"Vrifications de Conformit",value:et.compliant,icon:lx,color:"text-indigo-500",trend:et.compliantTrend}])}catch(be){console.error("Erreur lors du chargement des donnes:",be),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les donnes du notaire"})}finally{w(!1)}}},X=be=>{if(!be||be.length===0)return{pending:0,authenticated:0,inProgress:0,compliant:0,pendingTrend:0,authenticatedTrend:0,inProgressTrend:0,compliantTrend:0};const Ve=new Date,ze=new Date(Ve.getFullYear(),Ve.getMonth(),1),Xe=new Date(Ve.getFullYear(),Ve.getMonth()-1,1),et=new Date(Ve.getFullYear(),Ve.getMonth(),0),ge=be.filter(mt=>mt.status==="pending_notary"||mt.status==="awaiting_verification"||mt.status==="pending").length,Oe=be.filter(mt=>(mt.status==="notarized"||mt.status==="authenticated"||mt.status==="completed")&&new Date(mt.updated_at)>=ze).length,it=be.filter(mt=>mt.status==="in_progress"||mt.status==="under_review").length,nt=be.filter(mt=>mt.status==="verified"||mt.status==="compliant").length,wt=be.filter(mt=>(mt.status==="notarized"||mt.status==="authenticated"||mt.status==="completed")&&new Date(mt.updated_at)>=Xe&&new Date(mt.updated_at)<=et).length;return{pending:ge,authenticated:Oe,inProgress:it,compliant:nt,pendingTrend:ie(be,"pending_notary",Xe,et,ze),authenticatedTrend:Oe-wt,inProgressTrend:ie(be,"in_progress",Xe,et,ze),compliantTrend:ie(be,"verified",Xe,et,ze)}},ie=(be,Ve,ze,Xe,et)=>{const ge=be.filter(it=>(it.status===Ve||Ve==="pending_notary"&&["pending_notary","awaiting_verification","pending"].includes(it.status))&&new Date(it.updated_at)>=et).length,Oe=be.filter(it=>(it.status===Ve||Ve==="pending_notary"&&["pending_notary","awaiting_verification","pending"].includes(it.status))&&new Date(it.updated_at)>=ze&&new Date(it.updated_at)<=Xe).length;return ge-Oe},me=async()=>{try{const be={role:"notaire",totalDossiers:A.length,dossiersEnAttente:A.filter(Xe=>Xe.status==="En attente vrification").length},Ve=`Analyse les donnes de ce notaire et donne 3 recommandations intelligentes pour optimiser son travail. ${JSON.stringify(be)}`,ze=await Il.generateResponse(Ve,[],{role:"notaire",domain:"legal_analysis"});O(ze)}catch(be){console.error("Erreur gnration insights IA:",be)}},ye=async be=>{if(t!=null&&t.id)try{G(be.id);const{data:Ve,error:ze}=await pe.from("transactions").update({status:"authenticated",authenticated_at:new Date().toISOString(),updated_at:new Date().toISOString(),assigned_notary:t.id}).eq("id",be.id).select().single();if(ze)throw ze;S(Xe=>Xe.map(et=>et.id===be.id?{...et,...Ve}:et)),e({title:"Acte authentifi",description:`Dossier ${be.reference||be.id}`})}catch(Ve){console.error(Ve),e({variant:"destructive",title:"Erreur",description:"Authentification impossible"})}finally{G(null)}},Ne=async be=>{var Ve,ze,Xe,et;try{q({loading:!0,dossierId:be.id});const ge={reference:be.reference||be.id,type:be.type,valuation:be.valuation,status:be.status,buyerInfo:(Ve=be.users)==null?void 0:Ve.full_name,parcelInfo:(ze=be.parcels)==null?void 0:ze.reference,createdAt:be.created_at,updatedAt:be.updated_at},Oe=`Analyse approfondie du dossier notarial ${ge.reference}:
      
Type: ${ge.type}
Valeur: ${ge.valuation?ge.valuation.toLocaleString()+" XOF":"Non dfinie"}
Statut: ${ge.status}
Client: ${ge.buyerInfo||"Non renseign"}
Parcelle: ${ge.parcelInfo||"Non rfrence"}
Date cration: ${new Date(ge.createdAt).toLocaleDateString("fr-FR")}

En tant qu'expert notaire, effectue une analyse complte:
1. Vrification de la cohrence des informations
2. Identification des risques potentiels
3. Conformit lgale et rglementaire
4. Recommandations d'actions prioritaires
5. Score de risque (0-100)

Fournis une rponse structure avec score et recommandations.`,it=await Il.generateResponse(Oe,[],{role:"notaire",domain:"legal_document_analysis",documentType:be.type,analysisMode:"detailed"});let nt=0;(!be.valuation||be.valuation===0)&&(nt+=25),(be.status==="pending"||be.status==="pending_notary")&&(nt+=20),(Xe=be.parcels)!=null&&Xe.reference||(nt+=15),(et=be.users)!=null&&et.full_name||(nt+=10);const wt=Math.floor((new Date-new Date(be.created_at))/(1e3*60*60*24));wt>30&&(nt+=Math.min(20,wt-30));const mt=Math.floor((new Date-new Date(be.updated_at))/(1e3*60*60*24));mt>7&&(nt+=Math.min(10,mt-7)),q({loading:!1,dossierId:be.id,result:it,riskScore:Math.min(100,nt),timestamp:new Date,analysisDetails:{completeness:be.valuation?"Complte":"Incomplte",urgency:nt>70?"leve":nt>40?"Moyenne":"Faible",recommendation:nt>70?"Action immdiate requise":"Suivi standard"}}),e({title:"Analyse IA termine",description:`Document ${be.reference||be.id} analys - Risque: ${Math.min(100,nt)}%`})}catch(ge){console.error("Erreur analyse IA:",ge),q({loading:!1,error:ge.message}),e({variant:"destructive",title:"Erreur d'analyse IA",description:ge.message})}},le=(be,Ve="")=>{switch(be){case"verify":e({title:"Vrification initie",description:`Vrification du dossier ${Ve} en cours.`});break;case"authenticate":e({title:"Authentification",description:`Processus d'authentification dmarr pour ${Ve}.`});break;case"schedule":e({title:"Rendez-vous planifi",description:"Consultation programme avec succs."});break;default:console.log("Action:",be,"ID:",Ve)}},Q=be=>{p(be),h(!0)},J=()=>{p(null),h(!1)},se=async be=>{if(m){try{const Ve=be==="approve"?"notarized":"rejected",ze=be==="approve"?"Dossier approuv par le notaire":"Dossier rejet par le notaire",{error:Xe}=await pe.from("transactions").update({status:Ve,updated_at:new Date().toISOString(),notes:ze,notary_validation_date:new Date().toISOString()}).eq("id",m.id);if(Xe){const{error:et}=await pe.from("contracts").update({status:Ve,updated_at:new Date().toISOString(),notes:ze}).eq("id",m.id);if(et)throw et}await pe.from("notifications").insert([{user_id:m.buyer_id||m.user_id,title:be==="approve"?"Dossier approuv":"Dossier rejet",message:`Votre dossier ${m.id} a t ${be==="approve"?"approuv":"rejet"} par le notaire.`,type:be==="approve"?"success":"warning",created_at:new Date().toISOString()}]),await B(),e({title:be==="approve"?"Dossier approuv":"Dossier rejet",description:`${m.id} - ${be==="approve"?"Approuv":"Rejet"} avec succs.`})}catch(Ve){console.error("Erreur lors de la mise  jour:",Ve),e({variant:"destructive",title:"Erreur",description:"Impossible de mettre  jour le dossier"})}J()}},Z=async(be,Ve)=>{switch(be){case"VALIDATE_DOCUMENT":await B();break;case"SEARCH_DATA":break;default:await B()}},je=be=>{const ze={pending:{variant:"default",color:"bg-yellow-100 text-yellow-800"},pending_notary:{variant:"default",color:"bg-orange-100 text-orange-800"},awaiting_verification:{variant:"default",color:"bg-yellow-100 text-yellow-800"},in_progress:{variant:"default",color:"bg-blue-100 text-blue-800"},under_review:{variant:"default",color:"bg-purple-100 text-purple-800"},notarized:{variant:"default",color:"bg-green-100 text-green-800"},authenticated:{variant:"default",color:"bg-green-100 text-green-800"},completed:{variant:"default",color:"bg-green-100 text-green-800"},verified:{variant:"default",color:"bg-green-100 text-green-800"},compliant:{variant:"default",color:"bg-green-100 text-green-800"},rejected:{variant:"default",color:"bg-red-100 text-red-800"},cancelled:{variant:"default",color:"bg-gray-100 text-gray-800"},"En cours":{variant:"default",color:"bg-yellow-100 text-yellow-800"},Termin:{variant:"default",color:"bg-green-100 text-green-800"},Nouveau:{variant:"default",color:"bg-blue-100 text-blue-800"},Confirme:{variant:"default",color:"bg-purple-100 text-purple-800"},"En attente vrification":{variant:"default",color:"bg-yellow-100 text-yellow-800"},"Authentification requise":{variant:"default",color:"bg-orange-100 text-orange-800"},Conforme:{variant:"default",color:"bg-green-100 text-green-800"}}[be]||{variant:"secondary",color:"bg-gray-100 text-gray-800"};return n.jsx(Ge,{className:ze.color,children:be})},Ee=()=>{switch(r){case"dossiers":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher par dossier, client, ou rfrence...",value:v,onChange:be=>g(be.target.value),className:"pl-10"})]}),n.jsxs("select",{className:"border rounded-md px-3 py-2 text-sm",value:y,onChange:be=>j(be.target.value),children:[n.jsx("option",{value:"all",children:"Tous"}),K.map(be=>n.jsx("option",{value:be,children:be},be))]})]}),n.jsx("div",{className:"grid gap-4",children:_?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(Tt,{})}):A.length===0?n.jsx(he,{children:n.jsxs(ve,{className:"p-8 text-center",children:[n.jsx(Cr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Aucun dossier trouv"})]})}):A.map(be=>{var Ve,ze,Xe;return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:n.jsxs(he,{className:"hover:shadow-md transition-shadow",children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(ke,{className:"text-lg",children:be.reference||be.id}),n.jsxs(jt,{children:[n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(oi,{className:"h-4 w-4"}),((Ve=be.profiles)==null?void 0:Ve.full_name)||be.client_name]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(jr,{className:"h-4 w-4"}),((ze=be.parcels)==null?void 0:ze.reference)||be.parcel_reference]})]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[je(be.status),n.jsx(Ge,{variant:be.priority==="high"?"destructive":be.priority==="medium"?"default":"secondary",children:be.priority==="high"?"Urgent":be.priority==="medium"?"Normal":"Faible"})]})]})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx($e,{className:"text-muted-foreground",children:"Type"}),n.jsx("p",{className:"font-medium",children:be.type})]}),n.jsxs("div",{children:[n.jsx($e,{className:"text-muted-foreground",children:"Valeur"}),n.jsx("p",{className:"font-medium",children:be.valuation?`${be.valuation.toLocaleString()} XOF`:"N/A"})]}),n.jsxs("div",{children:[n.jsx($e,{className:"text-muted-foreground",children:"Date cration"}),n.jsx("p",{className:"font-medium",children:new Date(be.created_at).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>Q(be),children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Voir"]}),n.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>{var et;l(((et=be.parcels)==null?void 0:et.id)||be.parcel_id),a(!0)},children:[n.jsx(AA,{className:"h-4 w-4 mr-1"}),"Timeline"]}),n.jsxs(Y,{size:"sm",onClick:()=>le("verify",be.id),children:[n.jsx(Cr,{className:"h-4 w-4 mr-1"}),"Vrifier"]}),n.jsx(Y,{size:"sm",variant:"secondary",disabled:ne===be.id||["authenticated","notarized","completed"].includes(be.status),onClick:()=>ye(be),children:ne===be.id?"...":"Authentifier"}),n.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>ee(be),children:[n.jsx(sie,{className:"h-4 w-4 mr-1"}),"PDF"]}),n.jsxs(Y,{size:"sm",variant:"secondary",onClick:()=>Ne(be),disabled:(I==null?void 0:I.loading)&&(I==null?void 0:I.dossierId)===be.id,children:[I!=null&&I.loading&&(I==null?void 0:I.dossierId)===be.id?n.jsx(Tt,{size:"small"}):n.jsx(Zs,{className:"h-4 w-4 mr-1"}),"Analyse IA"]})]})]}),(I==null?void 0:I.dossierId)===be.id&&(I==null?void 0:I.result)&&n.jsxs(Ae.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Zs,{className:"h-4 w-4 text-blue-600"}),n.jsxs("span",{className:"font-medium text-blue-800",children:["Analyse IA - ",(Xe=I.result.modelUsed)==null?void 0:Xe.toUpperCase()]}),n.jsxs(Ge,{variant:"secondary",className:`${I.riskScore<30?"bg-green-100 text-green-800":I.riskScore<70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Risque: ",Math.round(I.riskScore),"%"]})]}),n.jsx("p",{className:"text-blue-700 text-sm mb-2",children:I.result.text}),I.result.suggestions&&n.jsx("div",{className:"flex flex-wrap gap-1",children:I.result.suggestions.map((et,ge)=>n.jsx(Ge,{variant:"outline",className:"text-xs",children:et},ge))})]})]})]})},be.id)})})]});case"documents":return n.jsx("div",{className:"space-y-4",children:n.jsx(p3,{documents:c})});case"activites":return n.jsx("div",{className:"space-y-4",children:T.map(be=>n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:be.type}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[be.parcelRef," - ",be.client]})]}),n.jsxs("div",{className:"text-right",children:[je(be.status),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:be.date})]})]})})},be.id))});case"planning":return n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Planning des Consultations"}),n.jsx(jt,{children:"Grez vos rendez-vous et consultations"})]}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex gap-4",children:n.jsxs(Y,{onClick:()=>le("schedule"),children:[n.jsx(Sc,{className:"h-4 w-4 mr-2"}),"Programmer un RDV"]})}),n.jsx("div",{className:"border rounded-lg p-4",children:n.jsx("p",{className:"text-center text-muted-foreground",children:"Calendrier des consultations  venir"})})]})})]});default:return null}};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard Notaire"}),n.jsx("p",{className:"text-muted-foreground",children:"Gestion des actes notaris et vrifications foncires"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:P.map((be,Ve)=>n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:Ve*.1},children:n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:be.title}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-2xl font-bold",children:be.value}),be.trend!==0&&n.jsxs("div",{className:`flex items-center text-sm ${be.trend>0?"text-green-600":"text-red-600"}`,children:[n.jsx(Br,{className:`h-3 w-3 ${be.trend<0?"rotate-180":""}`}),n.jsx("span",{children:Math.abs(be.trend)})]})]})]}),n.jsx(be.icon,{className:`h-8 w-8 ${be.color}`})]})})})},Ve))}),z&&n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsxs(he,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zs,{className:"h-5 w-5 text-blue-600"}),n.jsxs(ke,{className:"text-blue-900",children:["Insights IA - ",(Pe=z.modelUsed)==null?void 0:Pe.toUpperCase()]}),n.jsxs(Ge,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Confiance: ",Math.round((z.confidence||.8)*100),"%"]})]})}),n.jsxs(ve,{children:[n.jsx("p",{className:"text-blue-800 mb-4",children:z.text}),z.suggestions&&z.suggestions.length>0&&n.jsx("div",{className:"space-y-2",children:z.suggestions.map((be,Ve)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[n.jsx(Ru,{className:"h-4 w-4"}),n.jsx("span",{children:be})]},Ve))})]})]})}),n.jsx(V0,{userRole:"notaire"}),n.jsxs(uY,{value:r,onValueChange:s,children:[n.jsxs(m3,{className:"grid w-full grid-cols-4",children:[n.jsx(_u,{value:"dossiers",children:"Dossiers"}),n.jsx(_u,{value:"documents",children:"Documents"}),n.jsx(_u,{value:"activites",children:"Activits Rcentes"}),n.jsx(_u,{value:"planning",children:"Planning"})]}),n.jsx(dY,{value:r,className:"mt-6",children:Ee()})]}),n.jsx(on,{open:i,onOpenChange:a,children:n.jsxs(Qr,{className:"max-w-2xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Timeline de la parcelle"}),n.jsx(Ur,{children:"Suivi complet des vnements de la parcelle"})]}),o&&n.jsx(QH,{parcelId:o})]})}),n.jsx(on,{open:d,onOpenChange:h,children:n.jsxs(Qr,{className:"max-w-2xl",children:[n.jsxs(qr,{children:[n.jsxs(Vr,{children:["Dtails du Dossier ",m==null?void 0:m.id]}),n.jsx(Ur,{children:"Vrification et validation du dossier notarial"})]}),m&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{className:"text-sm font-medium",children:"Client"}),n.jsx("p",{children:m.client})]}),n.jsxs("div",{children:[n.jsx($e,{className:"text-sm font-medium",children:"Rfrence Parcelle"}),n.jsx("p",{children:m.parcelRef})]}),n.jsxs("div",{children:[n.jsx($e,{className:"text-sm font-medium",children:"Type"}),n.jsx("p",{children:m.type})]}),n.jsxs("div",{children:[n.jsx($e,{className:"text-sm font-medium",children:"Valeur"}),n.jsx("p",{children:m.valeur})]})]}),n.jsxs("div",{children:[n.jsx($e,{className:"text-sm font-medium",children:"Statut actuel"}),n.jsx("div",{className:"mt-1",children:je(m.status)})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"notes",children:"Notes de vrification"}),n.jsx(ms,{id:"notes",placeholder:"Ajoutez vos observations...",className:"mt-1"})]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:J,children:"Annuler"}),n.jsxs(Y,{variant:"destructive",onClick:()=>se("reject"),children:[n.jsx(sa,{className:"h-4 w-4 mr-2"}),"Rejeter"]}),n.jsxs(Y,{onClick:()=>se("approve"),children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Approuver"]})]})]})}),n.jsx(bx,{dashboardContext:{role:"notaire",totalDossiers:A.length,dossiersEnAttente:A.filter(be=>be.status==="En attente vrification").length,actesAuthentifies:((de=P.find(be=>be.title.includes("Authentifis")))==null?void 0:de.value)||0,aiInsights:z,documentAnalysis:I},onAction:Z,aiService:"hybrid"})]})},FVe=()=>{const[e,t]=x.useState(!0),[r,s]=x.useState({totalRequests:0,approvedRequests:0,pendingRequests:0,totalRevenue:0,municipalLands:0,buildingPermits:0,disputes:0,securityScore:0,revenueGrowth:0,requestsGrowth:0,landsGrowth:0,permitsGrowth:0,aiInsights:[],recentRequests:[],landDistribution:[],monthlyRevenue:[],municipalAssets:[],digitalServices:[]});x.useState("overview"),x.useState(!1),x.useState({type:null,title:"",description:"",data:null}),x.useState("");const[i,a]=x.useState(null),{toast:o}=pt();kn();const[l,c]=x.useState("");x.useState([]),(r.recentRequests||[]).filter(w=>{if(!l)return!0;const A=l.toLowerCase();return w.type&&w.type.toLowerCase().includes(A)||w.applicant&&w.applicant.toLowerCase().includes(A)||w.status&&w.status.toLowerCase().includes(A)||w.location&&w.location.toLowerCase().includes(A)}),x.useEffect(()=>{d(),h()},[]);const d=async()=>{try{const{data:{user:w},error:A}=await pe.auth.getUser();if(A)throw A;const{data:S}=await pe.from("users").select("*").eq("id",w.id).single();a({...w,...S});const P=await $f.analyzeUserFraud(w.id,{municipalProfile:!0,administrativeIntegrity:!0,publicServiceCompliance:!0});s(C=>({...C,securityScore:Math.round((1-P.riskScore)*100)}))}catch(w){console.error("Erreur chargement utilisateur:",w)}},h=async()=>{t(!0);try{const{data:{user:w}}=await pe.auth.getUser(),[{data:A},{data:S},{data:P},{data:C},{data:T}]=await Promise.all([pe.from("municipal_requests").select(`
          *,
          users(full_name, email),
          parcels(reference, location, surface)
        `).eq("municipality_id",w.id),pe.from("parcels").select("*").eq("owner_id",w.id).eq("type","municipal"),pe.from("building_permits").select("*").eq("municipality_id",w.id),pe.from("land_disputes").select("*").eq("municipality_id",w.id).eq("status","active"),pe.from("tax_collections").select("*").eq("municipality_id",w.id).gte("collection_date",new Date(Date.now()-180*24*60*60*1e3).toISOString())]),M=(A==null?void 0:A.length)||0,z=(A==null?void 0:A.filter(ee=>ee.status==="approved").length)||0,O=(A==null?void 0:A.filter(ee=>["pending","en_attente","in_review"].includes((ee.status||"").toLowerCase())).length)||0,I=(T==null?void 0:T.reduce((ee,xe)=>ee+(xe.amount||0),0))||0,q=(S==null?void 0:S.filter(ee=>(ee.status||"").toLowerCase()==="available").length)||0,F=(P==null?void 0:P.length)||0,W=(C==null?void 0:C.length)||0;let V=[];if(S&&S.length){const ee=S.reduce((B,X)=>{const ie=(X.zone||"Inconnu").trim();return B[ie]=(B[ie]||0)+1,B},{}),xe=Object.values(ee).reduce((B,X)=>B+X,0)||1;V=Object.entries(ee).slice(0,8).map(([B,X])=>({name:B,value:Math.round(X/xe*100),color:"#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}))}let ne=[];if(T&&T.length){const ee={};T.forEach(xe=>{const B=new Date(xe.collection_date||xe.created_at||Date.now()),X=B.getFullYear()+"-"+(B.getMonth()+1).toString().padStart(2,"0");ee[X]=ee[X]||{month:B.toLocaleString("fr-FR",{month:"short"}),taxes:0,permits:0,other:0},ee[X].taxes+=xe.amount||0}),P&&P.length&&P.forEach(xe=>{const B=new Date(xe.created_at||Date.now()),X=B.getFullYear()+"-"+(B.getMonth()+1).toString().padStart(2,"0");ee[X]=ee[X]||{month:B.toLocaleString("fr-FR",{month:"short"}),taxes:0,permits:0,other:0};const ie=xe.fee||xe.amount||0;ee[X].permits+=ie}),ne=Object.keys(ee).sort().slice(-6).map(xe=>ee[xe])}const G=[{category:"Terrains disponibles",count:q,value:(S==null?void 0:S.reduce((ee,xe)=>ee+(xe.price||xe.estimated_value||0),0))||0,icon:ia,change:0},{category:"Permis de construire",count:F,value:(P==null?void 0:P.reduce((ee,xe)=>ee+(xe.fee||xe.amount||0),0))||0,icon:Vn,change:0}].filter(ee=>ee.count>0),K=[];s(ee=>({...ee,totalRequests:M,approvedRequests:z,pendingRequests:O,totalRevenue:I,municipalLands:q,buildingPermits:F,disputes:W,recentRequests:(A==null?void 0:A.slice(0,3).map(xe=>{var B;return{id:xe.id,type:xe.request_type||"Demande municipale",applicant:((B=xe.users)==null?void 0:B.full_name)||"Demandeur inconnu",status:xe.status||"En attente",surface:xe.requested_surface||"Non spcifie",priority:xe.priority||"medium",date:xe.created_at,location:xe.location||"Non spcifie"}}))||ee.recentRequests,landDistribution:V,monthlyRevenue:ne,municipalAssets:G,digitalServices:K})),await m()}catch(w){console.error("Erreur chargement donnes mairie:",w),o({variant:"destructive",title:"Erreur de chargement",description:"Certaines donnes municipales n'ont pas pu tre charges (aucune donne simule utilise)"})}finally{t(!1)}},m=async()=>{try{const w={totalRequests:r.totalRequests,approvalRate:r.totalRequests>0?r.approvedRequests/r.totalRequests*100:0,revenue:r.totalRevenue,availableLands:r.municipalLands,disputesRatio:r.totalRequests>0?r.disputes/r.totalRequests*100:0},A=`Analyse les donnes municipales suivantes:
      - ${w.totalRequests} demandes totales avec ${w.approvalRate.toFixed(1)}% d'approbation
      - Revenus municipaux: ${w.revenue.toLocaleString()} FCFA
      - ${w.availableLands} terrains disponibles
      - Taux de litiges: ${w.disputesRatio.toFixed(1)}%
      
      Fournis 3 recommandations stratgiques et 2 alertes importantes pour amliorer la gestion municipale.`,S=await Il.generateResponse(A,[],{role:"municipal_advisor",domain:"urban_planning",context:w});S.recommendations&&s(P=>({...P,aiInsights:S.recommendations.map((C,T)=>({icon:[Br,fs,ns][T]||Br,title:C.title||`Recommandation ${T+1}`,description:C.description||C,confidence:C.confidence||85,priority:C.priority||"medium"}))}))}catch(w){console.error("Erreur gnration insights IA:",w)}},p=w=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(w),v=w=>new Intl.NumberFormat("fr-FR").format(w),g=w=>{const A={"En instruction":{color:"bg-yellow-100 text-yellow-800",icon:ln},"Documents manquants":{color:"bg-orange-100 text-orange-800",icon:kr},Approuv:{color:"bg-green-100 text-green-800",icon:Qt},Rejet:{color:"bg-red-100 text-red-800",icon:sa},"En attente":{color:"bg-blue-100 text-blue-800",icon:ln},Urgent:{color:"bg-red-100 text-red-800",icon:kr},Normal:{color:"bg-blue-100 text-blue-800",icon:pj},High:{color:"bg-orange-100 text-orange-800",icon:Br}},S=A[w]||A["En attente"];return n.jsx(Ge,{className:S.color,children:w})},y=w=>{switch(w){case"urgent":return"border-l-red-500 bg-red-50";case"high":return"border-l-orange-500 bg-orange-50";case"medium":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},j=w=>w>0?n.jsx(Br,{className:"h-3 w-3 text-green-500"}):n.jsx(Br,{className:"h-3 w-3 text-red-500 rotate-180"}),_=async(w,A)=>{switch(w){case"MUNICIPAL_OPTIMIZATION":await m();break;case"LAND_ANALYSIS":await h();break;case"REVENUE_FORECAST":o({title:"Analyse IA",description:"Prvisions de revenus gnres avec succs"});break;default:console.log("Action IA municipale:",w,A)}};return e?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Chargement du Dashboard Municipal"}),n.jsx("p",{className:"text-gray-600",children:"Connexion aux services municipaux..."})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[n.jsxs(Ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Tableau de Bord Municipal"}),n.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Gestion intgre des services municipaux avec intelligence artificielle avance"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{title:"Demandes Totales",value:v(r.totalRequests),change:r.requestsGrowth,icon:Cr,color:"from-blue-500 to-cyan-600"},{title:"Revenus Municipaux",value:p(r.totalRevenue),change:r.revenueGrowth,icon:fs,color:"from-green-500 to-emerald-600"},{title:"Terrains Disponibles",value:v(r.municipalLands),change:r.landsGrowth,icon:ia,color:"from-purple-500 to-pink-600"},{title:"Permis Accords",value:v(r.buildingPermits),change:r.permitsGrowth,icon:Vn,color:"from-orange-500 to-red-600"}].map((w,A)=>n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},children:n.jsxs(he,{className:"relative overflow-hidden hover:shadow-xl transition-all duration-300 border-0",children:[n.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${w.color} opacity-5`}),n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:w.title}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.value}),n.jsxs("div",{className:"flex items-center mt-2",children:[j(w.change),n.jsxs("span",{className:`text-sm ml-1 ${w.change>0?"text-green-600":"text-red-600"}`,children:[Math.abs(w.change),"% ce mois"]})]})]}),n.jsx("div",{className:`p-3 rounded-full bg-gradient-to-r ${w.color}`,children:n.jsx(w.icon,{className:"h-6 w-6 text-white"})})]})})]})},A))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:n.jsxs(he,{className:"h-full",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Zs,{className:"h-5 w-5"}),"Insights IA Municipaux"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:r.aiInsights.map((w,A)=>n.jsx("div",{className:`p-4 rounded-lg border-l-4 ${w.priority==="high"?"border-red-500 bg-red-50":w.priority==="medium"?"border-yellow-500 bg-yellow-50":"border-green-500 bg-green-50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(w.icon,{className:`h-5 w-5 mt-0.5 ${w.priority==="high"?"text-red-600":w.priority==="medium"?"text-yellow-600":"text-green-600"}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:w.title}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.description}),n.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["Confiance: ",w.confidence,"%"]})]})]})},A))})})]})}),n.jsx(Ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:n.jsxs(he,{className:"h-full",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(ns,{className:"h-5 w-5"}),"Scurit & Analytics"]})}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[n.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",children:[n.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-200"}),n.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:351.86,strokeDashoffset:351.86-351.86*r.securityScore/100,className:"text-green-500"})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[r.securityScore,"%"]})})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Score de Scurit"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx(Qt,{className:"h-6 w-6 text-green-500 mx-auto mb-1"}),n.jsx("p",{className:"text-lg font-bold text-gray-900",children:r.approvedRequests}),n.jsx("p",{className:"text-xs text-gray-600",children:"Approuves"})]}),n.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[n.jsx(ln,{className:"h-6 w-6 text-yellow-500 mx-auto mb-1"}),n.jsx("p",{className:"text-lg font-bold text-gray-900",children:r.pendingRequests}),n.jsx("p",{className:"text-xs text-gray-600",children:"En attente"})]})]})]})})]})})]}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5"}),"Analyse des Revenus Municipaux"]})}),n.jsx(ve,{children:n.jsx(co,{width:"100%",height:300,children:n.jsxs(h3,{data:r.monthlyRevenue,children:[n.jsx(um,{strokeDasharray:"3 3"}),n.jsx(La,{dataKey:"month"}),n.jsx(Li,{}),n.jsx(es,{formatter:w=>[p(w),""]}),n.jsx(ao,{dataKey:"taxes",stackId:"a",fill:"#3B82F6",name:"Taxes"}),n.jsx(ao,{dataKey:"permits",stackId:"a",fill:"#10B981",name:"Permis"}),n.jsx(ao,{dataKey:"other",stackId:"a",fill:"#F59E0B",name:"Autres"})]})})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Ae.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(pj,{className:"h-5 w-5"}),"Demandes Rcentes"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:r.recentRequests.map((w,A)=>n.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${y(w.priority)}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:w.id}),g(w.status)]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Demandeur:"}),n.jsx("p",{className:"font-medium",children:w.applicant})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Type:"}),n.jsx("p",{className:"font-medium",children:w.type})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Surface:"}),n.jsx("p",{className:"font-medium",children:w.surface})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Localisation:"}),n.jsx("p",{className:"font-medium",children:w.location})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-3",children:[n.jsx("span",{className:"text-xs text-gray-500",children:new Date(w.date).toLocaleDateString("fr-FR")}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",children:[n.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Voir"]}),n.jsxs(Y,{size:"sm",variant:"outline",children:[n.jsx(Nh,{className:"h-3 w-3 mr-1"}),"Contact"]})]})]})]},A))})})]})}),n.jsx(Ae.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5"}),"Rpartition des Terrains"]})}),n.jsxs(ve,{children:[n.jsx(co,{width:"100%",height:250,children:n.jsxs(Ww,{children:[n.jsx(zl,{data:r.landDistribution,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:r.landDistribution.map((w,A)=>n.jsx(_m,{fill:w.color},`cell-${A}`))}),n.jsx(es,{formatter:w=>[`${w}%`,"Rpartition"]})]})}),n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:r.landDistribution.map((w,A)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:w.color}}),n.jsxs("span",{className:"text-sm",children:[w.name," (",w.value,"%)"]})]},A))})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Ea,{className:"h-5 w-5"}),"Patrimoine Municipal"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:r.municipalAssets.map((w,A)=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(w.icon,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:w.category}),n.jsxs("p",{className:"text-sm text-gray-600",children:[w.count," units"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-lg font-bold text-gray-900",children:p(w.value)}),n.jsxs("div",{className:"flex items-center",children:[j(w.change),n.jsxs("span",{className:"text-xs text-green-600 ml-1",children:["+",w.change,"%"]})]})]})]},A))})})]})}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(vz,{className:"h-5 w-5"}),"Services Numriques"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:r.digitalServices.map((w,A)=>n.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:w.service}),n.jsxs(Ge,{className:"bg-blue-100 text-blue-800",children:[w.usage,"% d'adoption"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Utilisateurs:"}),n.jsx("p",{className:"font-medium",children:v(w.totalUsers)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Satisfaction:"}),n.jsxs("p",{className:"font-medium",children:[w.satisfaction,"/5 "]})]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${w.usage}%`}})})})]},A))})})]})})]}),n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Yf,{className:"h-5 w-5"}),"Actions Rapides"]})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[{icon:vj,label:"Nouvelle Demande",color:"bg-blue-500"},{icon:Ac,label:"Permis de Construire",color:"bg-green-500"},{icon:ia,label:"Attribution Terrain",color:"bg-purple-500"},{icon:ox,label:"Cadastre",color:"bg-orange-500"},{icon:fs,label:"Gestion Fiscale",color:"bg-emerald-500"},{icon:x2,label:"Archives",color:"bg-gray-500"}].map((w,A)=>n.jsxs(Y,{variant:"outline",className:"h-20 flex-col hover:shadow-md transition-all duration-300",children:[n.jsx(w.icon,{className:`h-6 w-6 mb-2 ${w.color.replace("bg-","text-")}`}),n.jsx("span",{className:"text-xs text-center",children:w.label})]},A))})})]})}),n.jsx(zW,{onActionRequest:_,contextData:{userType:"mairie",dashboardData:r,municipalServices:r.digitalServices,securityScore:r.securityScore}})]})})},zVe=[{title:"Ajouter Utilisateur",description:"Crer un nouveau compte utilisateur",icon:oi,href:"/dashboard/admin/users?create=1",color:"bg-blue-500"},{title:"Nouvelle Institution",description:"Enregistrer une nouvelle institution",icon:Vn,href:"/dashboard/admin/institutions?create=1",color:"bg-green-500"},{title:"Rapport Analytics",description:"Gnrer un rapport dtaill",icon:ix,href:"/dashboard/admin/reports",color:"bg-purple-500"},{title:"Grer Permissions",description:"Configurer les rles et accs",icon:Ys,href:"/dashboard/admin/roles",color:"bg-orange-500"}],BVe=({data:e,dataKey:t,labelKey:r,barColorClass:s,title:i})=>{const a=s.replace("bg-","");return n.jsxs("div",{className:"h-[250px] w-full",children:[n.jsx("h3",{className:"text-sm font-semibold text-center mb-2",children:i}),n.jsx(co,{width:"100%",height:"100%",children:n.jsxs(h3,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(La,{dataKey:r}),n.jsx(Li,{}),n.jsx(es,{formatter:o=>`${o} ${t==="amount"?"XOF":""}`}),n.jsx(bc,{}),n.jsx(ao,{dataKey:t,fill:a})]})})]})},qVe=({data:e,title:t})=>{const r=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658","#d0ed57"];return n.jsxs("div",{className:"h-[250px] w-full flex flex-col items-center justify-center",children:[n.jsx("h3",{className:"text-sm font-semibold text-center mb-2",children:t}),n.jsx(co,{width:"100%",height:"100%",children:n.jsxs(Ww,{children:[n.jsx(zl,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:i})=>`${s} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((s,i)=>n.jsx(_m,{fill:r[i%r.length]},`cell-${i}`))}),n.jsx(es,{})]})})]})},VVe=()=>{var d,h,m,p,v,g,y,j,_,w;const[e,t]=x.useState({totalUsers:0,totalParcels:0,totalRequests:0,totalSalesAmount:0,userRegistrations:[],parcelStatus:[],upcomingEvents:[]}),[r,s]=x.useState({}),[i,a]=x.useState(!0),{toast:o}=pt(),l=Di(),c=x.useCallback(async()=>{try{a(!0);const{totals:A,charts:S,actorStats:P,upcomingEvents:C}=await Je.getAdminDashboardMetrics();t({totalUsers:A.totalUsers,totalParcels:A.totalParcels,totalRequests:A.totalRequests,totalSalesAmount:A.totalSalesAmount,userRegistrations:S.userRegistrations,parcelStatus:S.parcelStatus,upcomingEvents:C||[]}),s(P||{})}catch(A){console.error("Erreur lors du chargement des donnes:",A),o({title:"Erreur",description:"Impossible de charger les donnes du dashboard",variant:"destructive"})}a(!1)},[o]);x.useEffect(()=>{c()},[l.pathname]);const u=(A,S)=>{o({title:"Action IA",description:`Action ${A} excute avec succs`})};return i?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(Tt,{})}):n.jsx("div",{className:"flex min-h-screen bg-gray-50",children:n.jsx("div",{className:"flex-1 p-6 space-y-6",children:n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Administration"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Tableau de bord principal de gestion"})]}),n.jsxs(Y,{children:[n.jsx(Nl,{className:"h-4 w-4 mr-2"}),"Notifications"]})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center",children:[n.jsx(gg,{className:"h-5 w-5 mr-2"}),"Actions Rapides"]})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:zVe.map(A=>n.jsx(dt,{to:A.href,children:n.jsx(he,{className:"hover:shadow-lg transition-shadow cursor-pointer border-l-4 border-l-gray-400 hover:border-l-blue-500",children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${A.color} text-white`,children:n.jsx(A.icon,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-sm",children:A.title}),n.jsx("p",{className:"text-xs text-gray-500",children:A.description})]})]})})})},A.href))})})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-blue-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Utilisateurs Total"}),n.jsx(bs,{className:"h-5 w-5 text-blue-600"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:e.totalUsers}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tous les utilisateurs"})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-green-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Parcelles"}),n.jsx(ia,{className:"h-5 w-5 text-green-600"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:e.totalParcels}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total des parcelles"})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-purple-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Demandes"}),n.jsx(eie,{className:"h-5 w-5 text-purple-600"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:e.totalRequests}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total des requtes"})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-yellow-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:"Volume des Ventes"}),n.jsx(fs,{className:"h-5 w-5 text-yellow-600"})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-2xl font-bold",children:new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF"}).format(e.totalSalesAmount)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Montant total"})]})]})]}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(ix,{className:"mr-2 h-5 w-5 text-blue-500"}),"Inscriptions"]})}),n.jsx(ve,{children:n.jsx(BVe,{data:e.userRegistrations,dataKey:"value",labelKey:"name",barColorClass:"3b82f6",title:"Nouvelles inscriptions par mois"})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(wy,{className:"mr-2 h-5 w-5 text-orange-500"}),"Statut Parcelles"]})}),n.jsx(ve,{children:n.jsx(qVe,{data:e.parcelStatus,title:"Rpartition par statut"})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(dz,{className:"mr-2 h-5 w-5 text-red-500"}),"vnements"]})}),n.jsx(ve,{children:n.jsx("ul",{className:"space-y-3",children:e.upcomingEvents&&e.upcomingEvents.length>0?e.upcomingEvents.map(A=>n.jsxs("li",{className:"flex justify-between items-center text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:A.title}),n.jsx("div",{className:"text-muted-foreground text-xs",children:A.date.toLocaleDateString("fr-FR")})]}),n.jsx(Ge,{variant:"outline",children:A.type})]},A.id)):n.jsx("li",{className:"text-sm text-muted-foreground",children:"Aucun vnement programm"})})})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-blue-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsxs(ke,{className:"text-sm font-medium flex items-center",children:[n.jsx(dh,{className:"mr-2 h-4 w-4"}),"Agents"]}),n.jsx(dt,{to:"/dashboard/admin/users?role=agent",children:n.jsx(Y,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:"Grer"})})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((d=r.agents)==null?void 0:d.assigned)??0," ",n.jsx("span",{className:"text-sm text-muted-foreground",children:"agents actifs"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[((h=r.agents)==null?void 0:h.visits)??0," visites planifies"]})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-green-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsxs(ke,{className:"text-sm font-medium flex items-center",children:[n.jsx(bs,{className:"mr-2 h-4 w-4"}),"Utilisateurs"]}),n.jsx(dt,{to:"/dashboard/admin/users",children:n.jsx(Y,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:"Grer"})})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((m=r.users)==null?void 0:m.active)??0," ",n.jsx("span",{className:"text-sm text-muted-foreground",children:"utilisateurs actifs"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[((p=r.users)==null?void 0:p.verified)??0," vrifis"]})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-purple-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsxs(ke,{className:"text-sm font-medium flex items-center",children:[n.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Institutions"]}),n.jsx(dt,{to:"/dashboard/admin/institutions",children:n.jsx(Y,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:"Grer"})})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((v=r.institutions)==null?void 0:v.registered)??0," ",n.jsx("span",{className:"text-sm text-muted-foreground",children:"institutions"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[((g=r.institutions)==null?void 0:g.active)??0," actives"]})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-orange-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsxs(ke,{className:"text-sm font-medium flex items-center",children:[n.jsx(ia,{className:"mr-2 h-4 w-4"}),"Parcelles"]}),n.jsx(dt,{to:"/dashboard/admin/parcels",children:n.jsx(Y,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:"Grer"})})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((y=r.parcels)==null?void 0:y.listed)??0," ",n.jsx("span",{className:"text-sm text-muted-foreground",children:"disponibles"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[((j=r.parcels)==null?void 0:j.sold)??0," vendues"]})]})]}),n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-red-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsxs(ke,{className:"text-sm font-medium flex items-center",children:[n.jsx(fs,{className:"mr-2 h-4 w-4"}),"Transactions"]}),n.jsx(dt,{to:"/dashboard/admin/transactions",children:n.jsx(Y,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:"Grer"})})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[((_=r.transactions)==null?void 0:_.completed)??0," ",n.jsx("span",{className:"text-sm text-muted-foreground",children:"compltes"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[((w=r.transactions)==null?void 0:w.pending)??0," en attente"]})]})]})]}),n.jsx(bx,{dashboardContext:{role:"admin",totalUsers:e.totalUsers,totalParcels:e.totalParcels,totalRequests:e.totalRequests,userStats:r},onAction:u}),n.jsx("div",{className:"mt-8 text-center text-muted-foreground text-sm",children:n.jsx("p",{children:"Donnes mises  jour en temps rel depuis la base de donnes Supabase."})})]})})})},UVe=({isOpen:e,onClose:t,onUserCreated:r,userType:s})=>{const{toast:i}=pt(),[a,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(1),[h,m]=x.useState({email:"",password:"",confirmPassword:"",full_name:"",phone:"",type:s||"",role:"user",location:{region:"",department:"",commune:""},metadata:{maire_name:"",institution_name:"",official_email:"",office_phone:"",services_offered:[],bank_name:"",bank_code:"",branch_name:"",manager_name:"",services:[],profession:"",date_naissance:"",company:"",license_number:"",specialization:""}}),p=[{value:"particulier",label:"Particulier",description:"Citoyen recherchant des terrains ou services fonciers",icon:oi},{value:"mairie",label:"Mairie",description:"Administration municipale grant les terrains communaux",icon:Vn},{value:"banque",label:"Banque",description:"Institution financire proposant des financements",icon:Vn},{value:"agent",label:"Agent Immobilier",description:"Professionnel de l'immobilier et du foncier",icon:oi},{value:"vendeur",label:"Vendeur",description:"Propritaire vendant des terrains",icon:oi},{value:"notaire",label:"Notaire",description:"Officier public authentifiant les actes",icon:oi}],v={mairie:["Certificats d'urbanisme","Permis de construire","Attribution terrains communaux","Viabilisation","Cadastre","tat civil"],banque:["Crdit immobilier","Crdit foncier","pargne logement","Garanties hypothcaires","Conseil financier","Micro-crdit"]},g=()=>{m({email:"",password:"",confirmPassword:"",full_name:"",phone:"",type:"",role:"user",location:{region:"",department:"",commune:""},metadata:{}}),d(1)},y=(M,z)=>{m(O=>({...O,[M]:z}))},j=(M,z)=>{m(O=>({...O,metadata:{...O.metadata,[M]:z}}))},_=M=>{m(z=>({...z,location:M}))},w=M=>{const z=h.type==="mairie"?"services_offered":"services",O=h.metadata[z]||[],I=O.includes(M)?O.filter(q=>q!==M):[...O,M];j(z,I)},A=()=>h.email&&h.password&&h.confirmPassword&&h.password===h.confirmPassword&&h.full_name&&h.phone&&h.type,S=()=>!h.location.region||!h.location.department||!h.location.commune?!1:h.type==="mairie"?h.metadata.maire_name&&h.metadata.institution_name:h.type==="banque"?h.metadata.bank_name&&h.metadata.branch_name:!0,P=async()=>{if(!S()){i({variant:"destructive",title:"Erreur",description:"Veuillez remplir tous les champs obligatoires"});return}o(!0);try{const M={email:h.email,password:h.password,full_name:h.full_name,phone:h.phone,type:h.type,role:h.role,location:`${h.location.commune}, ${h.location.department}, ${h.location.region}`,metadata:{...h.metadata,geographic_data:h.location,created_via:"admin_panel",created_at:new Date().toISOString()},is_active:!0,verification_status:"verified"};console.log("Cration utilisateur:",h.type,M);let z;const O=h.type.charAt(0).toUpperCase()+h.type.slice(1).toLowerCase();M.type=O,O==="Banque"||O==="Mairie"||O==="Notaire"?z=await Je.createInstitutionUser({email:M.email,password:M.password,full_name:M.full_name,phone:M.phone,type:O,role:"institution",location:h.location,metadata:M.metadata}):z=await Je.createUser(M),i({title:"Utilisateur cr",description:`${h.full_name} (${h.type}) a t cr avec succs`,className:"bg-green-600 text-white"}),r==null||r(z),t(),g()}catch(M){console.error("Erreur cration utilisateur:",M),i({variant:"destructive",title:"Erreur",description:M.message||"Impossible de crer l'utilisateur. Vrifiez que l'email n'existe pas dj."})}finally{o(!1)}},C=()=>{var M,z;return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"full_name",className:"flex items-center gap-2",children:[n.jsx(oi,{className:"h-4 w-4"}),"Nom complet *"]}),n.jsx(De,{id:"full_name",value:h.full_name,onChange:O=>y("full_name",O.target.value),placeholder:"Prnom et nom"})]}),n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"email",className:"flex items-center gap-2",children:[n.jsx(C0,{className:"h-4 w-4"}),"Email *"]}),n.jsx(De,{id:"email",type:"email",value:h.email,onChange:O=>y("email",O.target.value),placeholder:"email@example.com"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"phone",className:"flex items-center gap-2",children:[n.jsx(Sh,{className:"h-4 w-4"}),"Tlphone *"]}),n.jsx(De,{id:"phone",value:h.phone,onChange:O=>y("phone",O.target.value),placeholder:"+221 XX XXX XX XX"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"type",children:"Type d'utilisateur *"}),n.jsxs(Ft,{value:h.type,onValueChange:O=>y("type",O),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez le type"})}),n.jsx($t,{children:p.map(O=>n.jsx(Ke,{value:O.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(O.icon,{className:"h-4 w-4"}),O.label]})},O.value))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"password",className:"flex items-center gap-2",children:[n.jsx(gj,{className:"h-4 w-4"}),"Mot de passe *"]}),n.jsxs("div",{className:"relative",children:[n.jsx(De,{id:"password",type:l?"text":"password",value:h.password,onChange:O=>y("password",O.target.value),placeholder:"Mot de passe scuris"}),n.jsx(Y,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>c(!l),children:l?n.jsx(SA,{className:"h-4 w-4"}):n.jsx(Hr,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe *"}),n.jsx(De,{id:"confirmPassword",type:"password",value:h.confirmPassword,onChange:O=>y("confirmPassword",O.target.value),placeholder:"Rptez le mot de passe"}),h.confirmPassword&&h.password!==h.confirmPassword&&n.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Les mots de passe ne correspondent pas"})]})]}),h.type&&n.jsxs("div",{className:"p-3 bg-muted/50 rounded-md",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Qt,{className:"h-4 w-4 text-green-600"}),n.jsxs("span",{className:"font-medium",children:["Type slectionn : ",(M=p.find(O=>O.value===h.type))==null?void 0:M.label]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:(z=p.find(O=>O.value===h.type))==null?void 0:z.description})]})]})},T=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5"}),"Localisation gographique"]}),n.jsx(rT,{value:h.location,onChange:_,required:!0})]}),h.type==="mairie"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informations mairie"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"maire_name",children:"Nom du maire *"}),n.jsx(De,{id:"maire_name",value:h.metadata.maire_name||"",onChange:M=>j("maire_name",M.target.value),placeholder:"Prnom et nom du maire"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"institution_name",children:"Nom officiel de la mairie *"}),n.jsx(De,{id:"institution_name",value:h.metadata.institution_name||"",onChange:M=>j("institution_name",M.target.value),placeholder:"Mairie de..."})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"official_email",children:"Email officiel"}),n.jsx(De,{id:"official_email",type:"email",value:h.metadata.official_email||"",onChange:M=>j("official_email",M.target.value),placeholder:"mairie@commune.sn"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"office_phone",children:"Tlphone bureau"}),n.jsx(De,{id:"office_phone",value:h.metadata.office_phone||"",onChange:M=>j("office_phone",M.target.value),placeholder:"+221 XX XXX XX XX"})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Services proposs"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:v.mairie.map(M=>{var z;return n.jsx(Ge,{variant:(z=h.metadata.services_offered)!=null&&z.includes(M)?"default":"outline",className:"cursor-pointer justify-center p-2",onClick:()=>w(M),children:M},M)})})]})]})]}),h.type==="banque"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informations banque"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"bank_name",children:"Nom de la banque *"}),n.jsx(De,{id:"bank_name",value:h.metadata.bank_name||"",onChange:M=>j("bank_name",M.target.value),placeholder:"Ex: CBAO, UBA, SGBS..."})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"branch_name",children:"Agence *"}),n.jsx(De,{id:"branch_name",value:h.metadata.branch_name||"",onChange:M=>j("branch_name",M.target.value),placeholder:"Ex: Agence Dakar Plateau"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"bank_code",children:"Code banque"}),n.jsx(De,{id:"bank_code",value:h.metadata.bank_code||"",onChange:M=>j("bank_code",M.target.value),placeholder:"Code BCEAO"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"manager_name",children:"Responsable agence"}),n.jsx(De,{id:"manager_name",value:h.metadata.manager_name||"",onChange:M=>j("manager_name",M.target.value),placeholder:"Nom du responsable"})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Services financiers"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:v.banque.map(M=>{var z;return n.jsx(Ge,{variant:(z=h.metadata.services)!=null&&z.includes(M)?"default":"outline",className:"cursor-pointer justify-center p-2",onClick:()=>w(M),children:M},M)})})]})]})]}),h.type==="particulier"&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informations personnelles"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"profession",children:"Profession"}),n.jsx(De,{id:"profession",value:h.metadata.profession||"",onChange:M=>j("profession",M.target.value),placeholder:"Votre profession"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"date_naissance",children:"Date de naissance"}),n.jsx(De,{id:"date_naissance",type:"date",value:h.metadata.date_naissance||"",onChange:M=>j("date_naissance",M.target.value)})]})]})]}),(h.type==="agent"||h.type==="vendeur"||h.type==="notaire")&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Informations professionnelles"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"company",children:"Entreprise/Cabinet"}),n.jsx(De,{id:"company",value:h.metadata.company||"",onChange:M=>j("company",M.target.value),placeholder:"Nom de l'entreprise"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"license_number",children:"Numro de licence"}),n.jsx(De,{id:"license_number",value:h.metadata.license_number||"",onChange:M=>j("license_number",M.target.value),placeholder:"Numro professionnel"})]})]})]})]});return n.jsx(on,{open:e,onOpenChange:t,children:n.jsxs(Qr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(qr,{children:[n.jsxs(Vr,{className:"flex items-center gap-2",children:[n.jsx(bj,{className:"h-5 w-5"}),"Crer un nouvel utilisateur"]}),n.jsxs(Ur,{children:["tape ",u," sur 2 : ",u===1?"Informations de connexion":"Localisation et dtails spcifiques"]})]}),n.jsx("div",{className:"py-4",children:u===1?C():T()}),n.jsxs(Bn,{className:"flex justify-between",children:[n.jsx("div",{className:"flex gap-2",children:u===2&&n.jsx(Y,{variant:"outline",onClick:()=>d(1),disabled:a,children:"Prcdent"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",onClick:t,disabled:a,children:"Annuler"}),u===1?n.jsx(Y,{onClick:()=>d(2),disabled:!A(),children:"Suivant"}):n.jsxs(Y,{onClick:P,disabled:!S()||a,children:[a&&n.jsx(Tt,{className:"mr-2 h-4 w-4"}),"Crer l'utilisateur"]})]})]})]})})},HVe=(e=12)=>{const t="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s="0123456789",i="!@#$%&*+=?",a=t+r+s+i;let o="";o+=t[Math.floor(Math.random()*t.length)],o+=r[Math.floor(Math.random()*r.length)],o+=s[Math.floor(Math.random()*s.length)],o+=i[Math.floor(Math.random()*i.length)];for(let l=4;l<e;l++)o+=a[Math.floor(Math.random()*a.length)];return o.split("").sort(()=>.5-Math.random()).join("")},c$=e=>{const r=/[a-z]/.test(e),s=/[A-Z]/.test(e),i=/\d/.test(e),a=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(e);return{valid:e.length>=8&&r&&s&&i&&a,criteria:{length:e.length>=8,lowercase:r,uppercase:s,numbers:i,special:a}}},WVe=({isOpen:e,onClose:t,onUserCreated:r})=>{const{toast:s}=pt(),[i,a]=x.useState(!1),[o,l]=x.useState(1),[c,u]=x.useState(!1),[d,h]=x.useState(!1),[m,p]=x.useState({email:"",password:"",confirmPassword:"",full_name:"",phone:"",type:"",role:"institution",location:{region:"",department:"",commune:""},metadata:{bank_name:"",branch_name:"",bank_code:"",manager_name:"",swift_code:"",services:[],maire_name:"",deputy_name:"",commune_type:"",population:"",services_offered:[],address:"",website:"",established_year:"",license_number:"",description:""}}),v=[{value:"banque",label:"Banque / Institution Financire",icon:Ea},{value:"mairie",label:"Mairie / Collectivit Locale",icon:NA}],g=["Crdit immobilier","Crdit foncier","pargne logement","Garanties hypothcaires","Conseil financier","Micro-crdit","Financement PME","Crdit automobile","Assurance crdit"],y=["tat civil","Certificats d'urbanisme","Permis de construire","Attribution terrains communaux","Viabilisation","Cadastre","Taxes locales","Services sociaux","Gestion dchets"],j=()=>{p({email:"",password:"",confirmPassword:"",full_name:"",phone:"",type:"",role:"institution",location:{region:"",department:"",commune:""},metadata:{bank_name:"",branch_name:"",bank_code:"",manager_name:"",swift_code:"",services:[],maire_name:"",deputy_name:"",commune_type:"",population:"",services_offered:[],address:"",website:"",established_year:"",license_number:"",description:""}}),l(1),h(!1)},_=()=>{const F=HVe(12);p(W=>({...W,password:F,confirmPassword:F})),s({title:"Mot de passe gnr",description:"Un mot de passe scuris a t gnr automatiquement",className:"bg-green-600 text-white"})},w=async()=>{try{await navigator.clipboard.writeText(m.password),h(!0),setTimeout(()=>h(!1),2e3),s({title:"Copi !",description:"Le mot de passe a t copi dans le presse-papiers"})}catch{s({variant:"destructive",title:"Erreur",description:"Impossible de copier le mot de passe"})}},A=()=>{if(o===1)return m.email&&m.full_name&&m.phone&&m.type&&m.password&&m.confirmPassword&&m.password===m.confirmPassword&&c$(m.password).valid;if(o===2)return m.location.region&&m.location.department&&m.location.commune;if(o===3){if(m.type==="banque")return m.metadata.bank_name&&m.metadata.branch_name;if(m.type==="mairie")return m.metadata.maire_name&&m.metadata.commune_type}return!0},S=(F,W)=>{p(V=>({...V,[F]:W}))},P=(F,W)=>{p(V=>({...V,metadata:{...V.metadata,[F]:W}}))},C=F=>{p(W=>({...W,location:F}))},T=F=>{const W=m.type==="mairie"?"services_offered":"services",V=m.metadata[W]||[],ne=V.includes(F)?V.filter(G=>G!==F):[...V,F];P(W,ne)},M=async()=>{try{if(a(!0),!A()){s({variant:"destructive",title:"Erreur de validation",description:"Veuillez remplir tous les champs obligatoires"});return}const F={email:m.email.trim(),password:m.password,full_name:m.full_name.trim(),phone:m.phone.trim(),type:m.type,role:"institution",metadata:{...m.metadata,location:m.location,creation_source:"admin_complete",created_by:"admin",institution_status:"active"}},W=await Je.createInstitutionUser(F);s({title:"Institution cre avec succs !",description:`${m.full_name} (${m.type}) a t cr avec succs. Mot de passe: ${m.password}`,className:"bg-green-600 text-white"}),r==null||r(W),t(),j()}catch(F){console.error("Erreur cration institution:",F),s({variant:"destructive",title:"Erreur",description:F.message||"Impossible de crer l'institution"})}finally{a(!1)}},z=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(bj,{className:"h-5 w-5"}),"Informations de base"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx($e,{children:"Type d'institution *"}),n.jsxs(Ft,{value:m.type,onValueChange:F=>S("type",F),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionnez le type d'institution"})}),n.jsx($t,{children:v.map(F=>n.jsx(Ke,{value:F.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(F.icon,{className:"h-4 w-4"}),F.label]})},F.value))})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"full_name",className:"flex items-center gap-2",children:[n.jsx(oi,{className:"h-4 w-4"}),"Nom de l'institution *"]}),n.jsx(De,{id:"full_name",value:m.full_name,onChange:F=>S("full_name",F.target.value),placeholder:m.type==="banque"?"Ex: CBAO Agence Dakar":"Ex: Mairie de Dakar"})]}),n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"email",className:"flex items-center gap-2",children:[n.jsx(C0,{className:"h-4 w-4"}),"Email institutionnel *"]}),n.jsx(De,{id:"email",type:"email",value:m.email,onChange:F=>S("email",F.target.value),placeholder:m.type==="banque"?"contact@banque.sn":"contact@mairie.sn"})]})]}),n.jsxs("div",{children:[n.jsxs($e,{htmlFor:"phone",className:"flex items-center gap-2",children:[n.jsx(Sh,{className:"h-4 w-4"}),"Tlphone *"]}),n.jsx(De,{id:"phone",value:m.phone,onChange:F=>S("phone",F.target.value),placeholder:"Ex: +221 33 123 45 67"})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-md font-medium mb-3 flex items-center gap-2",children:[n.jsx(gj,{className:"h-4 w-4"}),"Authentification"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx($e,{htmlFor:"password",children:"Mot de passe *"}),n.jsxs(Y,{type:"button",variant:"outline",size:"sm",onClick:_,className:"text-xs",children:[n.jsx(Ta,{className:"h-3 w-3 mr-1"}),"Gnrer"]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(De,{id:"password",type:c?"text":"password",value:m.password,onChange:F=>S("password",F.target.value),placeholder:"Mot de passe scuris",className:"pr-20"}),n.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:[n.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(!c),className:"h-6 w-6 p-0",children:c?n.jsx(SA,{className:"h-3 w-3"}):n.jsx(Hr,{className:"h-3 w-3"})}),m.password&&n.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:w,className:"h-6 w-6 p-0",children:d?n.jsx(v2,{className:"h-3 w-3 text-green-600"}):n.jsx(pz,{className:"h-3 w-3"})})]})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe *"}),n.jsx(De,{id:"confirmPassword",type:"password",value:m.confirmPassword,onChange:F=>S("confirmPassword",F.target.value),placeholder:"Retapez le mot de passe"})]}),m.password&&n.jsx(he,{className:"p-3",children:n.jsxs("div",{className:"text-sm",children:[n.jsx("div",{className:"font-medium mb-2",children:"Critres de scurit :"}),Object.entries(c$(m.password).criteria).map(([F,W])=>n.jsxs("div",{className:`flex items-center gap-2 ${W?"text-green-600":"text-red-500"}`,children:[W?n.jsx(Qt,{className:"h-3 w-3"}):n.jsx(ds,{className:"h-3 w-3"}),n.jsxs("span",{className:"text-xs",children:[F==="length"&&"8 caractres minimum",F==="lowercase"&&"Minuscule",F==="uppercase"&&"Majuscule",F==="numbers"&&"Chiffre",F==="special"&&"Caractre spcial"]})]},F))]})}),m.password!==m.confirmPassword&&m.confirmPassword&&n.jsxs("div",{className:"text-red-500 text-sm flex items-center gap-2",children:[n.jsx(ds,{className:"h-3 w-3"}),"Les mots de passe ne correspondent pas"]})]})]})]}),O=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5"}),"Localisation gographique"]}),n.jsx(rT,{value:m.location,onChange:C,required:!0}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slectionnez la localisation prcise de votre ",m.type==="banque"?"agence":"mairie","."]})]}),I=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Vn,{className:"h-5 w-5"}),"Informations spcifiques"]}),m.type==="banque"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"bank_name",children:"Nom de la banque *"}),n.jsx(De,{id:"bank_name",value:m.metadata.bank_name||"",onChange:F=>P("bank_name",F.target.value),placeholder:"Ex: CBAO, UBA, SGBS..."})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"branch_name",children:"Nom de l'agence *"}),n.jsx(De,{id:"branch_name",value:m.metadata.branch_name||"",onChange:F=>P("branch_name",F.target.value),placeholder:"Ex: Agence Dakar Plateau"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"bank_code",children:"Code banque (BCEAO)"}),n.jsx(De,{id:"bank_code",value:m.metadata.bank_code||"",onChange:F=>P("bank_code",F.target.value),placeholder:"Ex: SN001"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"swift_code",children:"Code SWIFT"}),n.jsx(De,{id:"swift_code",value:m.metadata.swift_code||"",onChange:F=>P("swift_code",F.target.value),placeholder:"Ex: CBAOSNDA"})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"manager_name",children:"Responsable d'agence"}),n.jsx(De,{id:"manager_name",value:m.metadata.manager_name||"",onChange:F=>P("manager_name",F.target.value),placeholder:"Nom du responsable"})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Services bancaires proposs"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:g.map(F=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rm,{id:F,checked:(m.metadata.services||[]).includes(F),onCheckedChange:()=>T(F)}),n.jsx($e,{htmlFor:F,className:"text-sm",children:F})]},F))})]})]}),m.type==="mairie"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"maire_name",children:"Nom du Maire *"}),n.jsx(De,{id:"maire_name",value:m.metadata.maire_name||"",onChange:F=>P("maire_name",F.target.value),placeholder:"Prnom et nom du maire"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"deputy_name",children:"Adjoint au maire"}),n.jsx(De,{id:"deputy_name",value:m.metadata.deputy_name||"",onChange:F=>P("deputy_name",F.target.value),placeholder:"Nom de l'adjoint"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"commune_type",children:"Type de commune *"}),n.jsxs(Ft,{value:m.metadata.commune_type||"",onValueChange:F=>P("commune_type",F),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Type de commune"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"urbaine",children:"Commune urbaine"}),n.jsx(Ke,{value:"rurale",children:"Commune rurale"})]})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"population",children:"Population (estimation)"}),n.jsx(De,{id:"population",type:"number",value:m.metadata.population||"",onChange:F=>P("population",F.target.value),placeholder:"Nombre d'habitants"})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Services municipaux proposs"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:y.map(F=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(rm,{id:F,checked:(m.metadata.services_offered||[]).includes(F),onCheckedChange:()=>T(F)}),n.jsx($e,{htmlFor:F,className:"text-sm",children:F})]},F))})]})]}),n.jsxs("div",{className:"space-y-4 border-t pt-4",children:[n.jsx("h4",{className:"font-medium",children:"Informations complmentaires"}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"address",children:"Adresse physique"}),n.jsx(ms,{id:"address",value:m.metadata.address||"",onChange:F=>P("address",F.target.value),placeholder:"Adresse complte de l'institution",rows:2})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"website",children:"Site web"}),n.jsx(De,{id:"website",value:m.metadata.website||"",onChange:F=>P("website",F.target.value),placeholder:"https://www.exemple.sn"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"established_year",children:"Anne d'tablissement"}),n.jsx(De,{id:"established_year",type:"number",value:m.metadata.established_year||"",onChange:F=>P("established_year",F.target.value),placeholder:"Ex: 1995"})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"license_number",children:"Numro de licence/agrment"}),n.jsx(De,{id:"license_number",value:m.metadata.license_number||"",onChange:F=>P("license_number",F.target.value),placeholder:"Numro officiel d'agrment"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"description",children:"Description"}),n.jsx(ms,{id:"description",value:m.metadata.description||"",onChange:F=>P("description",F.target.value),placeholder:"Description de l'institution et de ses activits",rows:3})]})]})]}),q=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-600"}),"Rcapitulatif et confirmation"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"flex items-center gap-2",children:[m.type==="banque"?n.jsx(Ea,{className:"h-5 w-5"}):n.jsx(NA,{className:"h-5 w-5"}),m.full_name]}),n.jsx(jt,{children:m.type==="banque"?"Institution Financire":"Collectivit Locale"})]}),n.jsxs(ve,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Email:"})," ",m.email]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Tlphone:"})," ",m.phone]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Localisation:"})," ",m.location.region,"  ",m.location.department,"  ",m.location.commune]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Mot de passe:"}),n.jsx("span",{className:"font-mono ml-2 bg-gray-100 px-2 py-1 rounded",children:c?m.password:""}),n.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(!c),className:"ml-2 h-6 w-6 p-0",children:c?n.jsx(SA,{className:"h-3 w-3"}):n.jsx(Hr,{className:"h-3 w-3"})})]})]}),m.type==="banque"&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("strong",{className:"block mb-2",children:"Informations bancaires:"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:["Banque: ",m.metadata.bank_name]}),n.jsxs("div",{children:["Agence: ",m.metadata.branch_name]}),m.metadata.bank_code&&n.jsxs("div",{children:["Code: ",m.metadata.bank_code]}),m.metadata.services&&m.metadata.services.length>0&&n.jsxs("div",{children:["Services: ",m.metadata.services.join(", ")]})]})]}),m.type==="mairie"&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("strong",{className:"block mb-2",children:"Informations municipales:"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:["Maire: ",m.metadata.maire_name]}),n.jsxs("div",{children:["Type: ",m.metadata.commune_type]}),m.metadata.population&&n.jsxs("div",{children:["Population: ",m.metadata.population," habitants"]}),m.metadata.services_offered&&m.metadata.services_offered.length>0&&n.jsxs("div",{children:["Services: ",m.metadata.services_offered.join(", ")]})]})]})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(ds,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("strong",{className:"text-yellow-800",children:"Important :"}),n.jsx("p",{className:"text-yellow-700 mt-1",children:"Notez bien le mot de passe gnr car il ne pourra pas tre rcupr plus tard. L'institution devra utiliser ces identifiants pour se connecter."})]})]})})]});return n.jsx(on,{open:e,onOpenChange:t,children:n.jsxs(Qr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(qr,{children:[n.jsxs(Vr,{className:"flex items-center gap-2",children:[n.jsx(bj,{className:"h-5 w-5"}),"Crer une institution complte"]}),n.jsx(Ur,{children:"Crez un profil complet pour une banque ou une mairie avec tous les dtails ncessaires"})]}),n.jsx("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[1,2,3,4].map(F=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${o>=F?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:F}),F<4&&n.jsx("div",{className:`w-8 h-0.5 ${o>F?"bg-blue-600":"bg-gray-200"}`})]},F))}),n.jsxs("div",{className:"space-y-6",children:[o===1&&z(),o===2&&O(),o===3&&I(),o===4&&q()]}),n.jsxs(Bn,{className:"flex-col sm:flex-row gap-2",children:[n.jsx("div",{className:"flex-1 flex gap-2",children:o>1&&n.jsx(Y,{variant:"outline",onClick:()=>l(o-1),disabled:i,children:"Prcdent"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",onClick:t,disabled:i,children:"Annuler"}),o<4?n.jsx(Y,{onClick:()=>l(o+1),disabled:!A()||i,children:"Suivant"}):n.jsx(Y,{onClick:M,disabled:i||!A(),className:"bg-green-600 hover:bg-green-700",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Tt,{size:"sm",className:"mr-2"}),"Cration..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Crer l'institution"]})})]})]})]})})};function GVe(){const{profile:e}=ar(),[t,r]=x.useState(!1),[s,i]=x.useState(new Set),[a,o]=x.useState(new Set),l=x.useCallback(async()=>{if(e!=null&&e.id){r(!0);try{const d=await Je.getEffectivePermissions(e.id);Array.isArray(d)&&i(new Set(d));try{const h=await Je.listUserRoles(e.id),m=new Set;(h||[]).forEach(p=>{(p.feature_flags||[]).forEach(v=>m.add(v))}),o(m)}catch{}}finally{r(!1)}}},[e==null?void 0:e.id]);x.useEffect(()=>{l()},[l]);const c=x.useCallback(d=>(e==null?void 0:e.role)==="admin"||s.has(d),[s,e==null?void 0:e.role]),u=x.useCallback(d=>a.has(d)||(e==null?void 0:e.role)==="admin",[a,e==null?void 0:e.role]);return{loading:t,permissions:s,hasPermission:c,featureFlags:a,hasFeature:u,refresh:l}}const KVe=["parcel.read","parcel.create","parcel.update","request.submit","user.verify","audit.view","feature.flags.edit","institution.manage"];function ZVe(){const{hasPermission:e}=GVe(),{toast:t}=pt(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState({key:"",label:"",description:"",permissions:[],feature_flags:[]}),[d,h]=x.useState(!1),m=async()=>{a(!0);try{const g=await Je.listRoles();s(g)}catch{}finally{a(!1)}};x.useEffect(()=>{m()},[]);const p=g=>{u(y=>({...y,permissions:y.permissions.includes(g)?y.permissions.filter(j=>j!==g):[...y.permissions,g]}))},v=async()=>{if(!c.key||!c.label){t({variant:"destructive",title:"Champs requis",description:"key et label"});return}h(!0);try{await Je.createRole({key:c.key.toLowerCase(),label:c.label,description:c.description,defaultPermissions:c.permissions,featureFlags:c.feature_flags}),t({title:"Rle cr",description:c.label}),l(!1),u({key:"",label:"",description:"",permissions:[],feature_flags:[]}),m()}catch(g){t({variant:"destructive",title:"Erreur cration",description:g.message||String(g)})}finally{h(!1)}};return e("feature.flags.edit")?n.jsxs(he,{className:"mt-6",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[n.jsx(ke,{className:"text-lg",children:"Rles & Permissions"}),n.jsx(Y,{size:"sm",onClick:()=>l(!0),children:"+ Nouveau rle"})]}),n.jsx(ve,{children:i?n.jsx("p",{className:"text-sm",children:"Chargement..."}):r.length===0?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun rle."}):n.jsx("div",{className:"space-y-3",children:r.map(g=>n.jsxs("div",{className:"border rounded p-3 flex flex-col gap-1 relative group",children:[n.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[n.jsx("span",{className:"font-medium",children:g.label}),n.jsx(Ge,{variant:"outline",children:g.key}),(g.is_system||g.is_protected)&&n.jsx(Ge,{variant:"secondary",children:"protg"}),!g.is_system&&!g.is_protected&&n.jsx("button",{onClick:async()=>{if(confirm(`Supprimer le rle ${g.label} ?`))try{await Je.deleteRole(g.key),t({title:"Rle supprim",description:g.label}),m()}catch(y){t({variant:"destructive",title:"Suppression impossible",description:y.message||String(y)})}},className:"ml-auto text-xs px-2 py-1 rounded bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",children:"Supprimer"})]}),g.description&&n.jsx("p",{className:"text-xs text-muted-foreground",children:g.description}),Array.isArray(g.default_permissions)&&g.default_permissions.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:g.default_permissions.map(y=>n.jsx(Ge,{className:"bg-blue-50 text-blue-700 border-blue-200",children:y},y))}),Array.isArray(g.feature_flags)&&g.feature_flags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:g.feature_flags.map(y=>n.jsx(Ge,{className:"bg-green-50 text-green-700 border-green-200",children:y},y))})]},g.id))})}),n.jsx(on,{open:o,onOpenChange:l,children:n.jsxs(Qr,{className:"sm:max-w-lg",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Nouveau rle"}),n.jsx(Ur,{children:"Crer un rle personnalis et dfinir ses permissions."})]}),n.jsxs("div",{className:"space-y-4 py-2 max-h-[60vh] overflow-y-auto",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Key (slug)"}),n.jsx(De,{value:c.key,onChange:g=>u(y=>({...y,key:g.target.value})),placeholder:"ex: analyste"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Label"}),n.jsx(De,{value:c.label,onChange:g=>u(y=>({...y,label:g.target.value})),placeholder:"Nom affich"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Description"}),n.jsx(De,{value:c.description,onChange:g=>u(y=>({...y,description:g.target.value})),placeholder:"Description courte"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Permissions"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:KVe.map(g=>{const y=c.permissions.includes(g);return n.jsx("button",{type:"button",onClick:()=>p(g),className:`text-xs px-2 py-1 rounded border ${y?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-blue-50"}`,children:g},g)})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Feature Flags (spars par virgule)"}),n.jsx(De,{value:c.feature_flags.join(","),onChange:g=>u(y=>({...y,feature_flags:g.target.value.split(",").map(j=>j.trim()).filter(Boolean)})),placeholder:"flag1,flag2"})]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>l(!1),children:"Annuler"}),n.jsx(Y,{disabled:d,onClick:v,children:d?"Cration...":"Crer"})]})]})})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"Accs limit (permissions insuffisantes)."})}const f1=["Particulier","Vendeur","Investisseur","Promoteur","Agriculteur","Banque","Notaire","Mairie","Agent","Administrateur"],XVe=[{value:"user",label:"Utilisateur"},{value:"agent",label:"Agent"},{value:"admin",label:"Administrateur"}],YVe=()=>{var et;const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState([]),[a,o]=x.useState({}),[l,c]=x.useState([]),[u,d]=x.useState(null),[h,m]=x.useState(!0),[p,v]=x.useState(""),g=Di(),y=kn(),[j,_]=x.useState("all"),[w,A]=x.useState("all"),[S,P]=x.useState([]);x.useState(!1);const[C,T]=x.useState(!1),[M,z]=x.useState(!1),[O,I]=x.useState(!1),[q,F]=x.useState(!1),[W,V]=x.useState(null),[ne,G]=x.useState(!1),[K,ee]=x.useState(!1),[xe,B]=x.useState(""),[X,ie]=x.useState({full_name:"",email:"",type:"",role:"",phone:"",location:""}),[me,ye]=x.useState({current_type:"",new_type:"",comment:"",documents:[]}),Ne=ge=>ge?ge.charAt(0).toUpperCase()+ge.slice(1).toLowerCase():"";x.useEffect(()=>{le()},[]),x.useEffect(()=>{const Oe=new URLSearchParams(g.search).get("type");Oe&&f1.includes(Oe)&&Oe!==j?_(Oe):!Oe&&j!=="all"&&_("all")},[g.search]),x.useEffect(()=>{const ge=new URLSearchParams(g.search),Oe=ge.get("type");j==="all"&&Oe?(ge.delete("type"),y({pathname:g.pathname,search:ge.toString()},{replace:!0})):j!=="all"&&j!==Oe&&(ge.set("type",j),y({pathname:g.pathname,search:ge.toString()},{replace:!0}))},[j]),x.useEffect(()=>{Q()},[t,p,j,w]);const le=async()=>{try{m(!0);const[ge,Oe,it]=await Promise.all([Je.getUsers(),Je.listRoles(),Je.listAllUserRoles()]),nt=ge.map(mt=>({...mt,type:Ne(mt.type)}));r(nt),c(Oe);const wt={};(it||[]).forEach(mt=>{wt[mt.user_id]||(wt[mt.user_id]=[]),wt[mt.user_id].push(mt)}),o(wt)}catch(ge){console.error("Erreur chargement utilisateurs:",ge),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les utilisateurs"})}finally{m(!1)}},Q=()=>{let ge=t;if(p&&(ge=ge.filter(Oe=>{var it,nt;return((it=Oe.full_name)==null?void 0:it.toLowerCase().includes(p.toLowerCase()))||((nt=Oe.email)==null?void 0:nt.toLowerCase().includes(p.toLowerCase()))})),j!=="all"&&(ge=ge.filter(Oe=>Ne(Oe.type)===Ne(j))),w!=="all")switch(w){case"pending":ge=ge.filter(Oe=>Oe.verification_status==="pending");break;case"verified":ge=ge.filter(Oe=>Oe.verification_status==="verified");break;case"rejected":ge=ge.filter(Oe=>Oe.verification_status==="rejected");break;case"not_verified":ge=ge.filter(Oe=>Oe.verification_status==="not_verified"||!Oe.verification_status);break}i(ge)},J=ge=>{V(ge),ie({full_name:ge.full_name||"",email:ge.email||"",type:ge.type||"",role:ge.role||"user",phone:ge.phone||"",location:ge.location||""}),T(!0)},se=ge=>{V(ge),z(!0)},Z=async(ge,Oe)=>{try{await Je.updateUser(ge.id,{verification_status:Oe}),r(it=>it.map(nt=>nt.id===ge.id?{...nt,verification_status:Oe}:nt)),await Je.createNotification({userId:ge.id,type:"status_change",title:"Statut de vrification mis  jour",body:`Votre statut de vrification est maintenant: ${Oe==="verified"?"Vrifi":Oe==="pending"?"En attente":Oe==="rejected"?"Rejet":"Non vrifi"}`,data:{status:Oe,comment:xe}}),e({title:"Statut mis  jour",description:`${ge.email}  ${Oe}${xe?" avec commentaire":""}`}),B("")}catch(it){console.error(it),e({variant:"destructive",title:"Erreur",description:"Changement de statut impossible"})}},je=async(ge,Oe)=>{try{await Je.updateUser(ge.id,{role:Oe}),r(it=>it.map(nt=>nt.id===ge.id?{...nt,role:Oe}:nt)),e({title:"Rle principal mis  jour",description:`${ge.email}  ${Oe}`})}catch(it){console.error(it),e({variant:"destructive",title:"Erreur",description:"Changement de rle impossible"})}},Ee=ge=>{V({documents:ge}),I(!0)},Pe=async(ge,Oe)=>{try{await Je.assignRole(ge,Oe),o(it=>{const nt=it[ge]?[...it[ge]]:[];return nt.push({user_id:ge,role_key:Oe}),{...it,[ge]:nt}}),e({title:"Rle assign",description:Oe})}catch(it){console.error(it),e({variant:"destructive",title:"Erreur",description:"Assignation choue"})}},de=async(ge,Oe)=>{try{await Je.revokeRole(ge,Oe),o(it=>({...it,[ge]:(it[ge]||[]).filter(nt=>nt.role_key!==Oe)})),e({title:"Rle rvoqu",description:Oe})}catch(it){console.error(it),e({variant:"destructive",title:"Erreur",description:"Rvocation choue"})}},be=async()=>{try{await Je.updateUser(W.id,X),r(ge=>ge.map(Oe=>Oe.id===W.id?{...Oe,...X}:Oe)),e({title:"Utilisateur modifi",description:`Les informations de ${X.full_name} ont t mises  jour.`}),T(!1),V(null)}catch(ge){console.error("Erreur modification utilisateur:",ge),e({variant:"destructive",title:"Erreur",description:"Impossible de modifier l'utilisateur"})}},Ve=async()=>{try{const Oe=await(await fetch("/api/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:W.id})})).json();if(!Oe.success)throw new Error(Oe.error||"Suppression choue");Oe.warning&&e({variant:"warning",title:"Attention",description:Oe.warning}),await le(),e({title:"Utilisateur supprim",description:`${W.full_name||W.email} a t supprim.`}),z(!1),V(null)}catch(ge){console.error("Erreur suppression utilisateur:",ge),e({variant:"destructive",title:"Erreur",description:ge.message?`Impossible de supprimer l'utilisateur : ${ge.message}`:"Impossible de supprimer l'utilisateur"})}},ze=ge=>{switch(ge){case"verified":return n.jsx(Ge,{className:"bg-green-100 text-green-800",children:"Vrifi"});case"pending":return n.jsx(Ge,{className:"bg-yellow-100 text-yellow-800",children:"En attente"});case"rejected":return n.jsx(Ge,{className:"bg-red-100 text-red-800",children:"Rejet"});default:return n.jsx(Ge,{variant:"secondary",children:"Non vrifi"})}},Xe=ge=>{switch(ge){case"admin":return n.jsxs(Ge,{className:"bg-red-100 text-red-800",children:[n.jsx(ns,{className:"w-3 h-3 mr-1"}),"Admin"]});case"agent":return n.jsxs(Ge,{className:"bg-blue-100 text-blue-800",children:[n.jsx(dh,{className:"w-3 h-3 mr-1"}),"Agent"]});default:return n.jsx(Ge,{variant:"outline",children:"Utilisateur"})}};return h?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(bs,{className:"h-8 w-8"}),"Gestion des Utilisateurs"]}),n.jsx("p",{className:"text-muted-foreground",children:"Grez tous les utilisateurs de la plateforme, leurs profils et leurs accs"}),n.jsxs("div",{className:"mt-3 flex gap-2",children:[n.jsxs(Y,{size:"sm",onClick:()=>G(!0),children:[n.jsx(vj,{className:"h-4 w-4 mr-2"}),"Ajout rapide"]}),n.jsxs(Y,{size:"sm",onClick:()=>ee(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[n.jsx(NA,{className:"h-4 w-4 mr-2"}),"Crer Institution Complte"]}),n.jsxs(Y,{size:"sm",variant:"outline",onClick:()=>y("/dashboard/admin/type-change-requests"),children:[n.jsx(bk,{className:"h-4 w-4 mr-2"}),"Demandes changement de type"]})]})]}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx(De,{placeholder:"Rechercher par nom ou email...",value:p,onChange:ge=>v(ge.target.value)})}),n.jsxs(Ft,{value:j,onValueChange:_,children:[n.jsx(Dt,{className:"w-48",children:n.jsx(zt,{placeholder:"Filtrer par type"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les types"}),f1.map(ge=>n.jsx(Ke,{value:ge,children:ge},ge))]})]})]})})}),n.jsx(uY,{defaultValue:"all",value:w,onValueChange:A,className:"mt-6",children:n.jsxs(m3,{children:[n.jsxs(_u,{value:"all",children:["Tous",t.filter(ge=>!ge.verification_status||ge.verification_status==="not_verified").length>0&&n.jsx(Ge,{variant:"outline",className:"ml-2",children:t.filter(ge=>!ge.verification_status||ge.verification_status==="not_verified").length})]}),n.jsxs(_u,{value:"pending",children:["En attente",t.filter(ge=>ge.verification_status==="pending").length>0&&n.jsx(Ge,{className:"ml-2 bg-yellow-100 text-yellow-800",children:t.filter(ge=>ge.verification_status==="pending").length})]}),n.jsxs(_u,{value:"verified",children:["Vrifis",t.filter(ge=>ge.verification_status==="verified").length>0&&n.jsx(Ge,{className:"ml-2 bg-green-100 text-green-800",children:t.filter(ge=>ge.verification_status==="verified").length})]}),n.jsxs(_u,{value:"rejected",children:["Rejets",t.filter(ge=>ge.verification_status==="rejected").length>0&&n.jsx(Ge,{className:"ml-2 bg-red-100 text-red-800",children:t.filter(ge=>ge.verification_status==="rejected").length})]})]})}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:["Utilisateurs (",s.length,")"]})}),n.jsx(ve,{children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:n.jsx("input",{type:"checkbox",checked:S.length===s.length&&s.length>0,onChange:()=>{S.length===s.length?P([]):P(s.map(ge=>ge.id))}})}),n.jsx(yt,{children:"Utilisateur"}),n.jsx(yt,{children:"Type"}),n.jsx(yt,{children:"Rle"}),n.jsx(yt,{children:"Rles multiples"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Date d'inscription"}),n.jsx(yt,{children:"Actions"})]})}),n.jsx(Ra,{children:s.map(ge=>n.jsxs(rn,{children:[n.jsx(vt,{children:n.jsx("input",{type:"checkbox",checked:S.includes(ge.id),onChange:()=>{P(Oe=>Oe.includes(ge.id)?Oe.filter(it=>it!==ge.id):[...Oe,ge.id])}})}),n.jsx(vt,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:ge.full_name||"Nom non dfini"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:ge.email})]})}),n.jsx(vt,{children:n.jsx(Ge,{variant:"outline",className:"font-medium",children:Ne(ge.type)||"Non dfini"})}),n.jsx(vt,{children:Xe(ge.role)}),n.jsx(vt,{children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[(a[ge.id]||[]).map(Oe=>n.jsxs("span",{className:"px-2 py-0.5 rounded bg-muted text-xs flex items-center gap-1",children:[Oe.role_key,n.jsx("button",{onClick:()=>de(ge.id,Oe.role_key),className:"text-[10px] hover:text-red-600","aria-label":`Rvoquer ${Oe.role_key}`,children:""})]},Oe.role_key)),n.jsx(Y,{size:"xs",variant:"ghost",onClick:()=>d(ge),children:"+"})]})}),n.jsx(vt,{children:ze(ge.verification_status)}),n.jsx(vt,{children:ge.created_at?new Date(ge.created_at).toLocaleDateString("fr-FR"):"Inconnue"}),n.jsx(vt,{children:n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>Ee(ge.documents||[]),children:"Voir documents"}),n.jsxs(tE,{children:[n.jsx(rE,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",children:n.jsx(Hse,{className:"h-4 w-4"})})}),n.jsxs(R2,{align:"end",children:[n.jsxs(ja,{onClick:()=>J(ge),children:[n.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Modifier"]}),n.jsxs(ja,{onClick:()=>Z(ge,"pending"),disabled:ge.verification_status==="pending",children:[n.jsx(ln,{className:"h-4 w-4 mr-2"})," Marquer En attente"]}),n.jsxs(ja,{onClick:()=>Z(ge,"verified"),disabled:ge.verification_status==="verified",children:[n.jsx(xc,{className:"h-4 w-4 mr-2 text-green-600"})," Vrifier"]}),n.jsxs(ja,{onClick:()=>Z(ge,"rejected"),disabled:ge.verification_status==="rejected",children:[n.jsx(sa,{className:"h-4 w-4 mr-2 text-red-600"})," Rejeter"]}),n.jsx(Ng,{}),n.jsxs(ja,{onClick:()=>je(ge,"admin"),disabled:ge.role==="admin",children:[n.jsx(ns,{className:"h-4 w-4 mr-2"})," Assigner Admin"]}),n.jsxs(ja,{onClick:()=>je(ge,"agent"),disabled:ge.role==="agent",children:[n.jsx(dh,{className:"h-4 w-4 mr-2"})," Assigner Agent"]}),n.jsxs(ja,{onClick:()=>je(ge,"user"),disabled:ge.role==="user",children:[n.jsx(oi,{className:"h-4 w-4 mr-2"})," Assigner Utilisateur"]}),n.jsx(Ng,{}),n.jsxs(ja,{onClick:()=>se(ge),className:"text-red-600",children:[n.jsx(di,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})]})})]},ge.id))})]})})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{onClick:()=>{const ge=window.prompt("Nouveau statut de vrification (verified, pending, rejected)");if(!ge||!["verified","pending","rejected"].includes(ge)){e({variant:"destructive",title:"Erreur",description:"Statut invalide"});return}Promise.all(S.map(Oe=>(t.find(it=>it.id===Oe),Je.updateUser(Oe,{verification_status:ge}).then(()=>Je.createNotification({userId:Oe,type:"status_change",title:"Statut de vrification mis  jour",body:`Votre statut de vrification est maintenant: ${ge==="verified"?"Vrifi":ge==="pending"?"En attente":"Rejet"}`,data:{status:ge}}))))).then(()=>{e({title:"Statuts mis  jour",description:`${S.length} utilisateurs`}),P([]),le()}).catch(Oe=>{console.error("Erreur mise  jour en masse:",Oe),e({variant:"destructive",title:"Erreur",description:"Mise  jour choue"})})},disabled:S.length===0,children:"Changer statut vrification"}),n.jsx(Y,{onClick:()=>{window.confirm("tes-vous sr de vouloir supprimer ces utilisateurs ?")&&Promise.all(S.map(ge=>fetch("/api/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:ge})}).then(Oe=>Oe.json()).then(Oe=>{if(!Oe.success)throw new Error(Oe.error||"Suppression choue");Oe.warning&&e({variant:"warning",title:"Attention",description:Oe.warning})}))).then(()=>{e({title:"Utilisateurs supprims",description:`${S.length} utilisateurs`}),P([]),le()}).catch(ge=>{console.error("Erreur suppression en masse:",ge),e({variant:"destructive",title:"Erreur",description:"Suppression choue"})})},className:"bg-red-600 hover:bg-red-700 text-white",disabled:S.length===0,children:"Supprimer utilisateurs"})]}),n.jsx(Y,{onClick:()=>{const Oe=[["Nom","Email","Type","Rle","Statut","Date inscription"],...s.filter(mt=>S.length===0||S.includes(mt.id)).map(mt=>[mt.full_name,mt.email,mt.type,mt.role,mt.verification_status,mt.created_at?new Date(mt.created_at).toLocaleDateString("fr-FR"):""])].map(mt=>mt.map(or=>'"'+(or||"")+'"').join(",")).join(`
`),it=new Blob([Oe],{type:"text/csv"}),nt=URL.createObjectURL(it),wt=document.createElement("a");wt.href=nt,wt.download="utilisateurs.csv",wt.click()},disabled:s.length===0,children:"Exporter CSV"})]}),n.jsx(on,{open:C,onOpenChange:T,children:n.jsxs(Qr,{className:"sm:max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Modifier l'utilisateur"}),n.jsx(Ur,{children:"Modifiez les informations de l'utilisateur"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"full_name",children:"Nom complet"}),n.jsx(De,{id:"full_name",value:X.full_name,onChange:ge=>ie(Oe=>({...Oe,full_name:ge.target.value}))})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"email",children:"Email"}),n.jsx(De,{id:"email",type:"email",value:X.email,onChange:ge=>ie(Oe=>({...Oe,email:ge.target.value}))})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"type",children:"Type d'utilisateur"}),n.jsxs(Ft,{value:X.type,onValueChange:ge=>ie(Oe=>({...Oe,type:ge})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionner un type"})}),n.jsx($t,{children:f1.map(ge=>n.jsx(Ke,{value:ge,children:ge},ge))})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"role",children:"Rle"}),n.jsxs(Ft,{value:X.role,onValueChange:ge=>ie(Oe=>({...Oe,role:ge})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionner un rle"})}),n.jsx($t,{children:XVe.map(ge=>n.jsx(Ke,{value:ge.value,children:ge.label},ge.value))})]})]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>T(!1),children:"Annuler"}),n.jsx(Y,{onClick:be,children:"Sauvegarder"})]})]})}),n.jsx(on,{open:M,onOpenChange:z,children:n.jsxs(Qr,{className:"sm:max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Supprimer l'utilisateur"}),n.jsxs(Ur,{children:["tes-vous sr de vouloir supprimer ",(W==null?void 0:W.full_name)||(W==null?void 0:W.email)," ? Cette action est irrversible."]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>z(!1),children:"Annuler"}),n.jsxs(Y,{variant:"destructive",onClick:Ve,children:[n.jsx(di,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})}),n.jsx(UVe,{isOpen:ne,onClose:()=>G(!1),onUserCreated:ge=>{r(Oe=>[ge,...Oe]),le()}}),n.jsx(WVe,{isOpen:K,onClose:()=>ee(!1),onUserCreated:ge=>{r(Oe=>[ge,...Oe])}}),n.jsx(on,{open:!!u,onOpenChange:ge=>{ge||d(null)},children:n.jsxs(Qr,{className:"sm:max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Grer les rles"}),n.jsx(Ur,{children:u==null?void 0:u.email})]}),n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Rles actuels"}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[(a[u==null?void 0:u.id]||[]).length===0&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aucun rle additionnel"}),(a[u==null?void 0:u.id]||[]).map(ge=>n.jsxs("span",{className:"px-2 py-0.5 rounded bg-muted text-xs flex items-center gap-1",children:[ge.role_key,n.jsx("button",{onClick:()=>de(u.id,ge.role_key),className:"text-[10px] hover:text-red-600",children:""})]},ge.role_key))]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Ajouter un rle"}),n.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[l.filter(ge=>!(a[u==null?void 0:u.id]||[]).some(Oe=>Oe.role_key===ge.key)).map(ge=>n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>Pe(u.id,ge.key),children:ge.key},ge.key)),l.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aucun rle disponible"})]})]})]}),n.jsx(Bn,{children:n.jsx(Y,{variant:"outline",onClick:()=>d(null),children:"Fermer"})})]})}),n.jsx(on,{open:O,onOpenChange:I,children:n.jsxs(Qr,{className:"sm:max-w-lg",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Documents"}),n.jsx(Ur,{children:"Vrification des documents soumis"})]}),n.jsx("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:((et=W==null?void 0:W.documents)==null?void 0:et.length)>0?W.documents.map((ge,Oe)=>n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:ge.name}),ge.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:ge.description})]}),n.jsx(Y,{variant:"ghost",size:"sm",asChild:!0,children:n.jsxs("a",{href:ge.url,target:"_blank",rel:"noopener noreferrer",children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"})," Voir"]})})]}),n.jsxs("div",{className:"flex justify-between mt-4",children:[n.jsx(Ge,{variant:ge.verified?"success":"outline",className:ge.verified?"bg-green-100 text-green-800":"",children:ge.verified?"Vrifi":"Non vrifi"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700",onClick:()=>{const it=W.documents.map((nt,wt)=>wt===Oe?{...nt,verified:!0}:nt);V(nt=>({...nt,documents:it}))},disabled:ge.verified,children:[n.jsx(xc,{className:"h-4 w-4 mr-1"})," Approuver"]}),n.jsxs(Y,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>{const it=W.documents.map((nt,wt)=>wt===Oe?{...nt,verified:!1,rejected:!0}:nt);V(nt=>({...nt,documents:it}))},disabled:ge.rejected,children:[n.jsx(sa,{className:"h-4 w-4 mr-1"})," Rejeter"]})]})]})]},ge.id||Oe)):n.jsx("p",{className:"text-center text-muted-foreground",children:"Aucun document disponible"})}),n.jsx(Bn,{children:n.jsx(Y,{onClick:()=>I(!1),children:"Fermer"})})]})}),n.jsx(on,{open:q,onOpenChange:F,children:n.jsxs(Qr,{className:"sm:max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Changer le type d'utilisateur"}),n.jsxs(Ur,{children:["Modifier le type de ",(W==null?void 0:W.full_name)||(W==null?void 0:W.email)]})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"current_type",children:"Type actuel"}),n.jsx(De,{id:"current_type",value:me.current_type,disabled:!0})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"new_type",children:"Nouveau type"}),n.jsxs(Ft,{value:me.new_type,onValueChange:ge=>ye(Oe=>({...Oe,new_type:ge})),children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Slectionner un type"})}),n.jsx($t,{children:f1.filter(ge=>ge!==me.current_type).map(ge=>n.jsx(Ke,{value:ge,children:ge},ge))})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"comment",children:"Commentaire (optionnel)"}),n.jsx(ms,{id:"comment",placeholder:"Raison du changement de type...",value:me.comment,onChange:ge=>ye(Oe=>({...Oe,comment:ge.target.value}))})]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>F(!1),children:"Annuler"}),n.jsx(Y,{onClick:async()=>{if(!me.new_type){e({variant:"destructive",title:"Erreur",description:"Veuillez slectionner un nouveau type"});return}try{await Je.updateUser(W.id,{type:me.new_type}),r(ge=>ge.map(Oe=>Oe.id===W.id?{...Oe,type:me.new_type}:Oe)),e({title:"Type modifi",description:`${W.full_name||W.email} est maintenant ${me.new_type}`}),F(!1)}catch(ge){console.error("Erreur lors du changement de type:",ge),e({variant:"destructive",title:"Erreur",description:"Impossible de changer le type d'utilisateur"})}},children:"Enregistrer"})]})]})}),n.jsx(ZVe,{})]})};function JVe(e,t,r,s){return e==="mairie"?`md${t?t.toUpperCase().replace(/\s/g,""):""}${s}`:e==="vendeur"?`${r?r.toUpperCase().replace(/\s/g,""):"VENDEUR"}${s}`:`REF${s}`}const QVe=({initialData:e={},onSubmit:t,userRole:r})=>{const[s,i]=x.useState(e.type||"mairie"),[a,o]=x.useState(e.zone||""),[l,c]=x.useState(e.vendeur||""),[u,d]=x.useState(e.name||""),[h,m]=x.useState(e.location_name||""),[p,v]=x.useState(e.coordinates||""),[g,y]=x.useState(e.area||""),[j,_]=x.useState(e.price||""),[w,A]=x.useState(e.description||""),[S,P]=x.useState(e.status||"disponible"),[C,T]=x.useState(e.images||[]),[M,z]=x.useState(e.documents||[]),[O,I]=x.useState(e.documentStatus||"En attente"),[q,F]=x.useState(e.ownerType||"Propritaire"),[W]=x.useState(e.id||Math.floor(1e3+Math.random()*9e3)),{toast:V}=pt(),ne=JVe(s,a,l,W),G=K=>{if(K.preventDefault(),!u||!a||!h||!g||!j){V({title:"Champs obligatoires manquants",description:"Veuillez remplir tous les champs requis.",variant:"destructive"});return}t&&t({type:s,zone:a,vendeur:l,name:u,location_name:h,coordinates:p,area:g,price:j,description:w,status:S,images:C,documents:M,documentStatus:O,ownerType:q,reference:ne,id:W})};return n.jsxs("form",{onSubmit:G,className:"space-y-4 max-w-2xl mx-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Type de parcelle *"}),n.jsxs(Ft,{value:s,onValueChange:i,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Type"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"mairie",children:"Mairie"}),n.jsx(Ke,{value:"vendeur",children:"Vendeur"})]})]})]}),s==="vendeur"&&n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Nom du vendeur *"}),n.jsx(De,{value:l,onChange:K=>c(K.target.value),required:s==="vendeur"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Nom *"}),n.jsx(De,{value:u,onChange:K=>d(K.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Rfrence (titre foncier)"}),n.jsx(De,{value:ne,readOnly:!0,className:"bg-gray-100"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Zone *"}),n.jsx(De,{value:a,onChange:K=>o(K.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Localisation *"}),n.jsx(De,{value:h,onChange:K=>m(K.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Coordonnes gographiques"}),n.jsx(De,{value:p,onChange:K=>v(K.target.value),placeholder:"Latitude, Longitude"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Surface (m) *"}),n.jsx(De,{type:"number",value:g,onChange:K=>y(K.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Prix *"}),n.jsx(De,{type:"number",value:j,onChange:K=>_(K.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Description"}),n.jsx(ms,{value:w,onChange:K=>A(K.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Statut"}),n.jsxs(Ft,{value:S,onValueChange:P,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"disponible",children:"Disponible"}),n.jsx(Ke,{value:"vendu",children:"Vendu"}),n.jsx(Ke,{value:"rserv",children:"Rserv"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Images"}),n.jsx(De,{type:"file",multiple:!0,onChange:K=>T([...K.target.files])})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Documents"}),n.jsx(De,{type:"file",multiple:!0,onChange:K=>z([...K.target.files])})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Statut de vrification"}),n.jsxs(Ft,{value:O,onValueChange:I,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Statut de vrification"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"Vrifi",children:"Vrifi"}),n.jsx(Ke,{value:"En attente",children:"En attente"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Type de propritaire"}),n.jsx(De,{value:q,onChange:K=>F(K.target.value)})]}),n.jsx("div",{className:"pt-4",children:n.jsx(Y,{type:"submit",children:"Enregistrer"})})]})},eUe=()=>{var Ne,le;const{user:e,profile:t}=ar(),r=((Ne=t==null?void 0:t.type)==null?void 0:Ne.toLowerCase())||((le=t==null?void 0:t.role)==null?void 0:le.toLowerCase())||"user",[s,i]=x.useState([]),[a,o]=x.useState(!0),[l,c]=x.useState(null),[u,d]=x.useState(""),[h,m]=x.useState(1),[p,v]=x.useState(20),[g,y]=x.useState(0),[j,_]=x.useState(""),[w,A]=x.useState(""),[S,P]=x.useState(""),{toast:C}=pt(),[T,M]=x.useState(!1),[z,O]=x.useState(null),[I,q]=x.useState({}),[F,W]=x.useState(!1),[V,ne]=x.useState([]),[G,K]=x.useState(!1),ee=x.useCallback(async()=>{o(!0),c(null);try{let Q=pe.from("parcels").select("*",{count:"exact"});u&&(Q=Q.or(`reference.ilike.%${u}%,location_name.ilike.%${u}%,name.ilike.%${u}%,status.ilike.%${u}%`)),j&&(Q=Q.eq("owner_type","Mairie").eq("owner_id",j)),w&&(Q=Q.eq("owner_type","Vendeur").eq("owner_id",w)),S&&(Q=Q.eq("status",S)),Q=Q.order("created_at",{ascending:!1}).range((h-1)*p,h*p-1);const{data:J,error:se,count:Z}=await Q;if(se)throw se;i(J||[]),y(Z||0)}catch(Q){c("Impossible de charger les parcelles: "+Q.message),C({variant:"destructive",title:"Erreur de chargement",description:Q.message})}finally{o(!1)}},[u,j,w,S,h,p,C]),xe=x.useCallback(async()=>{K(!0);try{const{data:Q,error:J}=await pe.from("users").select("id, full_name, email, type").in("type",["Vendeur","Mairie"]).order("full_name",{ascending:!0});if(J)throw J;ne(Q||[])}catch(Q){console.error("Error fetching owners:",Q),C({variant:"destructive",title:"Erreur",description:"Impossible de charger la liste des propritaires"})}finally{K(!1)}},[C]);x.useEffect(()=>{ee(),xe()},[ee,xe]);const B=Q=>{O(Q),q(Q),M(!0)},X=async Q=>{W(!0);try{const{error:J}=await pe.from("parcels").update(Q).eq("id",z.id);if(J)throw J;C({title:"Parcelle mise  jour",description:`La parcelle "${Q.name}" a t mise  jour avec succs.`}),M(!1),ee()}catch(J){C({variant:"destructive",title:"Erreur de mise  jour",description:J.message})}finally{W(!1)}},ie=async(Q,J)=>{try{const{error:se}=await pe.from("parcels").delete().eq("id",Q);if(se)throw se;C({title:"Parcelle supprime",description:`La parcelle "${J}" a t supprime.`}),ee()}catch(se){C({variant:"destructive",title:"Erreur de suppression",description:se.message})}},me=s,ye=Q=>{switch(Q){case"Disponible":return"success";case"En attente":return"warning";case"Vendu":return"destructive";case"Rserv":return"secondary";default:return"outline"}};return a&&s.length===0?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):l?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",l]})}):n.jsxs(n.Fragment,{children:[n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(ia,{className:"mr-3 h-8 w-8"}),"Gestion des Parcelles"]})}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Rechercher et Filtrer les Parcelles"}),n.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-4 space-y-2 md:space-y-0 mt-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Recherche rapide...",className:"pl-8",value:u,onChange:Q=>{d(Q.target.value),m(1)}})]}),n.jsxs(Ft,{value:j||"all",onValueChange:Q=>{_(Q==="all"?"":Q),m(1)},children:[n.jsx(Dt,{className:"w-[180px]",children:n.jsx(zt,{placeholder:"Filtrer Mairie"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes Mairies"}),V.filter(Q=>Q.type==="Mairie").map(Q=>n.jsx(Ke,{value:Q.id,children:Q.full_name},Q.id))]})]}),n.jsxs(Ft,{value:w||"all",onValueChange:Q=>{A(Q==="all"?"":Q),m(1)},children:[n.jsx(Dt,{className:"w-[180px]",children:n.jsx(zt,{placeholder:"Filtrer Vendeur"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous Vendeurs"}),V.filter(Q=>Q.type==="Vendeur").map(Q=>n.jsx(Ke,{value:Q.id,children:Q.full_name},Q.id))]})]}),n.jsxs(Ft,{value:S||"all",onValueChange:Q=>{P(Q==="all"?"":Q),m(1)},children:[n.jsx(Dt,{className:"w-[150px]",children:n.jsx(zt,{placeholder:"Filtrer Statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous Statuts"}),n.jsx(Ke,{value:"Disponible",children:"Disponible"}),n.jsx(Ke,{value:"En attente",children:"En attente"}),n.jsx(Ke,{value:"Vendu",children:"Vendu"}),n.jsx(Ke,{value:"Rserv",children:"Rserv"})]})]})]})]}),n.jsxs(ve,{children:[me.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune parcelle trouve."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Rfrence"}),n.jsx(yt,{children:"Nom"}),n.jsx(yt,{children:"Localisation"}),n.jsx(yt,{children:"Surface (m)"}),n.jsx(yt,{children:"Prix (FCFA)"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Propritaire"}),n.jsx(yt,{children:"Parties prenantes"}),n.jsx(yt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ra,{children:me.map(Q=>n.jsxs(rn,{children:[n.jsx(vt,{className:"font-mono",children:Q.reference||"N/A"}),n.jsx(vt,{className:"font-medium",children:Q.name||"N/A"}),n.jsx(vt,{children:Q.location_name||"N/A"}),n.jsx(vt,{children:Q.area_sqm||"N/A"}),n.jsx(vt,{children:Q.price?new Intl.NumberFormat("fr-SN").format(Q.price):"N/A"}),n.jsx(vt,{children:n.jsx(Ge,{variant:ye(Q.status),children:Q.status||"N/A"})}),n.jsx(vt,{children:Q.owner_type||Q.owner_name||"N/A"}),n.jsx(vt,{children:Q.stakeholders?Q.stakeholders.join(", "):"N/A"}),n.jsxs(vt,{className:"text-right flex justify-end space-x-2",children:[n.jsx(dt,{to:`/parcelles/${Q.id}`,children:n.jsx(Y,{variant:"ghost",size:"sm",title:"Voir Dtails",children:n.jsx(Hr,{className:"h-4 w-4"})})}),n.jsx(Y,{variant:"ghost",size:"sm",title:"Modifier",onClick:()=>B(Q),children:n.jsx(Ah,{className:"h-4 w-4"})}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",title:"Supprimer",className:"text-red-600 hover:text-red-800",children:n.jsx(di,{className:"h-4 w-4"})})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"tes-vous absolument sr ?"}),n.jsxs(Rc,{children:['Cette action ne peut pas tre annule. Cela supprimera dfinitivement la parcelle "',Q.name||Q.reference,'".']})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>ie(Q.id,Q.name||Q.reference),className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},Q.id))})]})}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:`Rsultats ${Math.min((h-1)*p+1,g)}-${Math.min(h*p,g)} sur ${g}`}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Y,{variant:"outline",size:"sm",disabled:h===1,onClick:()=>m(Q=>Math.max(1,Q-1)),children:"Prcdent"}),n.jsxs("span",{className:"text-sm",children:["Page ",h]}),n.jsx(Y,{variant:"outline",size:"sm",disabled:h*p>=g,onClick:()=>m(Q=>Q+1),children:"Suivant"}),n.jsxs(Ft,{value:String(p),onValueChange:Q=>{v(Number(Q)),m(1)},children:[n.jsx(Dt,{className:"w-[80px]",children:n.jsx(zt,{})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"10",children:"10"}),n.jsx(Ke,{value:"20",children:"20"}),n.jsx(Ke,{value:"50",children:"50"}),n.jsx(Ke,{value:"100",children:"100"})]})]})]})]})]})]})]}),n.jsx(on,{open:T,onOpenChange:M,children:n.jsxs(Qr,{className:"sm:max-w-[600px]",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Modifier la parcelle"}),n.jsx(Ur,{children:'Mettez  jour les informations de la parcelle. Cliquez sur "Enregistrer" pour sauvegarder.'})]}),n.jsx(QVe,{initialData:I,onSubmit:X,userRole:r,isEditOnly:!0})]})})]})},tUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(null),[o,l]=x.useState(""),{toast:c}=pt(),[u,d]=x.useState(!1),[h,m]=x.useState("add"),[p,v]=x.useState(null),[g,y]=x.useState({title:"",slug:"",author:"",category:"",published_at:"",image_url:"",content:"",status:"draft"}),[j,_]=x.useState(null),w=x.useCallback(async()=>{s(!0),a(null);try{const{data:q,error:F}=await pe.from("blog_posts").select("*").order("published_at",{ascending:!1});if(F)throw F;t(q||[])}catch(q){a(q.message),c({variant:"destructive",title:"Erreur de chargement des articles de blog",description:q.message})}finally{s(!1)}},[c]);x.useEffect(()=>{w()},[w]);const A=e.filter(q=>{var F,W,V;return((F=q.title)==null?void 0:F.toLowerCase().includes(o.toLowerCase()))||((W=q.author)==null?void 0:W.toLowerCase().includes(o.toLowerCase()))||((V=q.category)==null?void 0:V.toLowerCase().includes(o.toLowerCase()))}),S=()=>{m("add"),v(null),y({title:"",slug:"",author:"",category:"",published_at:new Date().toISOString().split("T")[0],image_url:"",content:"",status:"draft"}),_(null),d(!0)},P=q=>{m("edit"),v(q),y({title:q.title||"",slug:q.slug||"",author:q.author||"",category:q.category||"",published_at:q.published_at?new Date(q.published_at).toISOString().split("T")[0]:"",image_url:q.image_url||"",content:q.content||"",status:q.status||"draft"}),_(null),d(!0)},C=async(q,F)=>{try{const{error:W}=await pe.from("blog_posts").delete().eq("id",q);if(W)throw W;t(V=>V.filter(ne=>ne.id!==q)),c({title:"Article supprim",description:`L'article "${F}" a t supprim.`})}catch(W){c({variant:"destructive",title:"Erreur de suppression",description:W.message})}},T=q=>{const{id:F,value:W}=q.target;y(V=>({...V,[F]:W}))},M=(q,F)=>{y(W=>({...W,[q]:F}))},z=q=>{q.target.files&&q.target.files[0]&&_(q.target.files[0])},O=async q=>{q.preventDefault(),s(!0);let F=g.image_url;try{if(j){const V=j.name.split(".").pop(),G=`blog_images/${`${Date.now()}.${V}`}`,{data:K,error:ee}=await pe.storage.from("public_files").upload(G,j,{cacheControl:"3600",upsert:!1});if(ee)throw ee;const{data:xe}=pe.storage.from("public_files").getPublicUrl(G);F=xe.publicUrl}const W={...g,image_url:F,slug:g.slug||g.title.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),published_at:g.status==="published"?g.published_at||new Date().toISOString():null};if(h==="add"){const{error:V}=await pe.from("blog_posts").insert([W]);if(V)throw V;c({title:"Article ajout",description:`L'article "${g.title}" a t ajout.`})}else{const{error:V}=await pe.from("blog_posts").update(W).eq("id",p.id);if(V)throw V;c({title:"Article mis  jour",description:`L'article "${g.title}" a t mis  jour.`})}d(!1),w()}catch(W){c({variant:"destructive",title:`Erreur lors de l'${h==="add"?"ajout":"mise  jour"} de l'article`,description:W.message})}finally{s(!1)}},I=()=>n.jsxs("form",{onSubmit:O,className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"title",className:"text-right",children:"Titre"}),n.jsx(De,{id:"title",value:g.title,onChange:T,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"slug",className:"text-right",children:"Slug"}),n.jsx(De,{id:"slug",value:g.slug,onChange:T,className:"col-span-3",placeholder:"auto-gnr si vide"})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"author",className:"text-right",children:"Auteur"}),n.jsx(De,{id:"author",value:g.author,onChange:T,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"category",className:"text-right",children:"Catgorie"}),n.jsx(De,{id:"category",value:g.category,onChange:T,className:"col-span-3"})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"published_at",className:"text-right",children:"Date de publication"}),n.jsx(De,{id:"published_at",type:"date",value:g.published_at,onChange:T,className:"col-span-3",disabled:g.status==="draft"})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"image_file",className:"text-right",children:"Image"}),n.jsx(De,{id:"image_file",type:"file",onChange:z,className:"col-span-3"})]}),g.image_url&&!j&&n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{className:"text-right",children:"Image actuelle"}),n.jsx("img",{src:g.image_url,alt:"Aperu",className:"col-span-3 w-24 h-24 object-cover rounded"})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"content",className:"text-right",children:"Contenu"}),n.jsx(ms,{id:"content",value:g.content,onChange:T,className:"col-span-3",rows:8,required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"status",className:"text-right",children:"Statut"}),n.jsxs(Ft,{value:g.status,onValueChange:q=>M("status",q),children:[n.jsx(Dt,{className:"col-span-3",children:n.jsx(zt,{placeholder:"Slectionner un statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"draft",children:"Brouillon"}),n.jsx(Ke,{value:"published",children:"Publi"})]})]})]})]});return r&&e.length===0?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):i?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",i]})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Cr,{className:"mr-3 h-8 w-8"}),"Gestion du Blog"]}),n.jsxs(Y,{onClick:S,children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter un article"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Articles de Blog"}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par titre, auteur, catgorie...",className:"pl-8",value:o,onChange:q=>l(q.target.value)})]})]}),n.jsx(ve,{children:A.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun article trouv."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Titre"}),n.jsx(yt,{children:"Auteur"}),n.jsx(yt,{children:"Catgorie"}),n.jsx(yt,{children:"Date Pub."}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ra,{children:A.map(q=>n.jsxs(rn,{children:[n.jsx(vt,{className:"font-medium",children:q.title}),n.jsx(vt,{children:q.author}),n.jsx(vt,{children:q.category}),n.jsx(vt,{children:q.published_at?new Date(q.published_at).toLocaleDateString("fr-FR"):"N/A"}),n.jsx(vt,{children:n.jsx(Ge,{variant:q.status==="published"?"success":"secondary",children:q.status})}),n.jsxs(vt,{className:"text-right flex justify-end space-x-2",children:[n.jsx(Y,{variant:"ghost",size:"sm",title:"Lire l'article",asChild:!0,children:n.jsx(dt,{to:`/blog/${q.slug}`,children:"Lire"})}),n.jsx(Y,{variant:"ghost",size:"sm",title:"Modifier",onClick:()=>P(q),children:n.jsx(Ah,{className:"h-4 w-4"})}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",title:"Supprimer",className:"text-red-600 hover:text-red-800",children:n.jsx(di,{className:"h-4 w-4"})})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"tes-vous absolument sr ?"}),n.jsxs(Rc,{children:[`Cette action supprimera dfinitivement l'article "`,q.title,'".']})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>C(q.id,q.title),className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},q.id))})]})})})]}),n.jsx(on,{open:u,onOpenChange:d,children:n.jsxs(Qr,{className:"sm:max-w-[800px] p-6",children:[n.jsxs(qr,{children:[n.jsx(Vr,{className:"text-2xl font-bold",children:h==="add"?"Ajouter un nouvel article":`Modifier l'article: "${p==null?void 0:p.title}"`}),n.jsxs(Ur,{children:["Veuillez remplir les informations pour ",h==="add"?"ajouter":"modifier"," cet article de blog."]})]}),I(),n.jsxs(Bn,{className:"flex justify-end gap-2 mt-4",children:[n.jsx(Y,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Annuler"}),n.jsxs(Y,{type:"submit",onClick:O,disabled:r,children:[r&&n.jsx(Tt,{size:"small",className:"mr-2"}),h==="add"?"Ajouter l'article":"Enregistrer les modifications"]})]})]})})]})},rUe=[],nUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(null),[o,l]=x.useState(""),{toast:c}=pt(),u=kn(),[d,h]=x.useState(!1),[m,p]=x.useState(null),[v,g]=x.useState({full_name:"",email:"",phone:"",metadata:{}}),y=x.useCallback(async()=>{s(!0),a(null);try{const{data:M,error:z}=await pe.from("users").select("*").eq("role","agent");if(z)throw z;t(M||[])}catch(M){a(M.message),c({variant:"destructive",title:"Erreur de chargement des agents",description:M.message})}finally{s(!1)}},[c]);x.useEffect(()=>{y()},[y]);const j=e.filter(M=>{var z,O,I;return((z=M.full_name)==null?void 0:z.toLowerCase().includes(o.toLowerCase()))||((O=M.email)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))||((I=M.phone)==null?void 0:I.toLowerCase().includes(o.toLowerCase()))}),_=async(M,z)=>{try{const{error:O}=await pe.from("users").delete().eq("id",M);if(O)throw O;c({title:"Agent supprim",description:`L'agent ${z} a t supprim.`}),y()}catch(O){c({variant:"destructive",title:"Erreur de suppression",description:O.message})}},w=()=>{p(null),g({full_name:"",email:"",phone:"",metadata:{}}),h(!0)},A=M=>{p(M),g({full_name:M.full_name||"",email:M.email||"",phone:M.phone||"",metadata:M.metadata||{}}),h(!0)},S=M=>{const{id:z,value:O}=M.target;g(I=>({...I,[z]:O}))},P=M=>{const{id:z,value:O}=M.target;g(I=>({...I,metadata:{...I.metadata,[z]:O}}))},C=async M=>{M.preventDefault(),s(!0);try{const z={full_name:v.full_name,email:v.email,phone:v.phone,role:"agent",type:"Agent",metadata:v.metadata};if(m){const{error:O}=await pe.from("users").update(z).eq("id",m.id);if(O)throw O;c({title:"Agent mis  jour",description:`L'agent ${v.full_name} a t modifi.`})}else{const{data:O,error:I}=await pe.from("users").insert([z]).select();if(I)throw I;c({title:"Agent ajout",description:`L'agent ${v.full_name} a t ajout. (L'envoi d'e-mail rel ncessite une configuration serveur/Edge Function)`,duration:5e3})}h(!1),y()}catch(z){c({variant:"destructive",title:`Erreur lors de l'${m?"mise  jour":"ajout"} de l'agent`,description:z.message})}finally{s(!1)}},T=M=>{u(`/dashboard/admin/users/${M}`),c({title:"Dtails Agent",description:`Redirection vers la page de dtails de l'agent ${M}.`})};return r&&e.length===0?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):i?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",i]})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(dh,{className:"mr-3 h-8 w-8"}),"Gestion des Agents"]}),n.jsxs(Y,{onClick:w,children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter un agent"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Rechercher un Agent"}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par nom, email ou tlphone...",className:"pl-8",value:o,onChange:M=>l(M.target.value)})]})]}),n.jsx(ve,{children:j.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun agent trouv."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Nom Complet"}),n.jsx(yt,{children:"Email"}),n.jsx(yt,{children:"Tlphone"}),n.jsx(yt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ra,{children:j.map(M=>n.jsxs(rn,{children:[n.jsx(vt,{className:"font-medium",children:M.full_name}),n.jsx(vt,{children:M.email}),n.jsx(vt,{children:M.phone||"N/A"}),n.jsxs(vt,{className:"text-right flex justify-end space-x-2",children:[n.jsx(Y,{variant:"ghost",size:"sm",title:"Voir Dtails",onClick:()=>T(M.id),children:n.jsx(Hr,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm",title:"Modifier",onClick:()=>A(M),children:n.jsx(Ah,{className:"h-4 w-4"})}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",title:"Supprimer",className:"text-red-600 hover:text-red-800",children:n.jsx(di,{className:"h-4 w-4"})})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"tes-vous absolument sr ?"}),n.jsxs(Rc,{children:[`Cette action supprimera dfinitivement l'agent "`,M.email,'".']})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>_(M.id,M.email),className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},M.id))})]})})})]}),n.jsx(on,{open:d,onOpenChange:h,children:n.jsxs(Qr,{className:"sm:max-w-[425px]",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:m?"Modifier l'agent":"Ajouter un nouvel agent"}),n.jsx(Ur,{children:m?"Modifiez les informations de l'agent.":"Remplissez les informations pour ajouter un nouvel agent."})]}),n.jsxs("form",{onSubmit:C,className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"full_name",className:"text-right",children:"Nom Complet"}),n.jsx(De,{id:"full_name",value:v.full_name,onChange:S,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"email",className:"text-right",children:"Email"}),n.jsx(De,{id:"email",type:"email",value:v.email,onChange:S,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"phone",className:"text-right",children:"Tlphone"}),n.jsx(De,{id:"phone",type:"tel",value:v.phone,onChange:S,className:"col-span-3"})]}),rUe.map(M=>n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsxs($e,{htmlFor:M.id,className:"text-right",children:[M.label," ",M.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),M.type==="textarea"?n.jsx(ms,{id:M.id,value:v.metadata[M.id]||"",onChange:P,className:"col-span-3",required:M.required}):n.jsx(De,{id:M.id,type:M.type,value:v.metadata[M.id]||"",onChange:P,className:"col-span-3",required:M.required})]},M.id)),n.jsxs(Bn,{children:[n.jsx(Y,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Annuler"}),n.jsxs(Y,{type:"submit",disabled:r,children:[r&&n.jsx(Tt,{size:"small",className:"mr-2"}),m?"Enregistrer les modifications":"Ajouter l'agent"]})]})]})]})})]})},sUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(null),[o,l]=x.useState(""),[c,u]=x.useState("all"),{toast:d}=pt(),h=x.useCallback(async()=>{s(!0),a(null);try{let g=pe.from("requests").select(`
          *,
          users (full_name, email),
          parcels!parcel_id (name, reference) // <-- CORRECTION ICI : Spcifier la FK
        `);c!=="all"&&(g=g.eq("status",c)),o&&(g=g.or(`request_type.ilike.%${o}%,status.ilike.%${o}%`));const{data:y,error:j}=await g;if(j)throw j;t(y||[])}catch(g){a(g.message),d({variant:"destructive",title:"Erreur de chargement des demandes",description:g.message})}finally{s(!1)}},[c,o,d]);x.useEffect(()=>{h()},[h]);const m=async(g,y,j)=>{try{const{error:_}=await pe.from("requests").update({status:y}).eq("id",g);if(_)throw _;d({title:"Statut de la demande mis  jour",description:`La demande de type "${j}" est maintenant "${y}".`}),h()}catch(_){d({variant:"destructive",title:"Erreur de mise  jour du statut",description:_.message})}},p=async(g,y)=>{try{const{error:j}=await pe.from("requests").delete().eq("id",g);if(j)throw j;d({title:"Demande supprime",description:`La demande de type "${y}" a t supprime.`}),h()}catch(j){d({variant:"destructive",title:"Erreur de suppression",description:j.message})}},v=g=>{switch(g){case"pending":return"warning";case"approved":return"success";case"rejected":return"destructive";case"completed":return"default";default:return"secondary"}};return r&&e.length===0?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):i?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",i]})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Ac,{className:"mr-3 h-8 w-8"}),"Gestion des Demandes"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Filtrer et Rechercher les Demandes"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par type de demande ou statut...",className:"pl-8",value:o,onChange:g=>l(g.target.value)})]}),n.jsxs(Ft,{value:c,onValueChange:u,children:[n.jsx(Dt,{className:"w-full sm:w-[180px]",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"pending",children:"En attente"}),n.jsx(Ke,{value:"approved",children:"Approuve"}),n.jsx(Ke,{value:"rejected",children:"Rejete"}),n.jsx(Ke,{value:"completed",children:"Termine"})]})]})]})]}),n.jsx(ve,{children:e.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune demande trouve."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Demandeur"}),n.jsx(yt,{children:"Type de Demande"}),n.jsx(yt,{children:"Parcelle Concerne"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ra,{children:e.map(g=>{var y,j;return n.jsxs(rn,{children:[n.jsxs(vt,{className:"font-medium",children:[((y=g.users)==null?void 0:y.full_name)||"N/A",n.jsx("p",{className:"text-xs text-muted-foreground",children:(j=g.users)==null?void 0:j.email})]}),n.jsx(vt,{className:"capitalize",children:g.request_type}),n.jsx(vt,{children:g.parcels?n.jsx(dt,{to:`/parcelles/${g.parcel_id}`,className:"text-primary hover:underline",children:g.parcels.name||g.parcels.reference}):"N/A"}),n.jsx(vt,{children:n.jsx(Ge,{variant:v(g.status),children:g.status})}),n.jsxs(vt,{className:"text-right flex justify-end space-x-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",title:"Approuver",onClick:()=>m(g.id,"approved",g.request_type),disabled:g.status==="approved"||g.status==="rejected"||g.status==="completed",children:[n.jsx(Qt,{className:"h-4 w-4 mr-1"})," Approuver"]}),n.jsxs(Y,{variant:"outline",size:"sm",title:"Rejeter",onClick:()=>m(g.id,"rejected",g.request_type),disabled:g.status==="approved"||g.status==="rejected"||g.status==="completed",children:[n.jsx(sa,{className:"h-4 w-4 mr-1"})," Rejeter"]}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsxs(Y,{variant:"ghost",size:"sm",title:"Supprimer",className:"text-red-600 hover:text-red-800 ml-2",children:[n.jsx(di,{className:"h-4 w-4 mr-1"})," Supprimer"]})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"tes-vous absolument sr ?"}),n.jsxs(Rc,{children:['Cette action supprimera dfinitivement la demande de type "',g.request_type,'".']})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>p(g.id,g.request_type),className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},g.id)})})]})})})]})]})},u$=({data:e,dataKey:t,labelKey:r,barColorClass:s,title:i})=>{const a=s.replace("bg-","");return n.jsxs("div",{className:"h-[250px] w-full",children:[n.jsx("h3",{className:"text-sm font-semibold text-center mb-2",children:i}),n.jsx(co,{width:"100%",height:"100%",children:n.jsxs(h3,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(La,{dataKey:r}),n.jsx(Li,{}),n.jsx(es,{formatter:o=>`${o} ${t==="amount"?"XOF":""}`}),n.jsx(bc,{}),n.jsx(ao,{dataKey:t,fill:`#${a}`})]})})]})},d$=({data:e,title:t})=>{const r=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658","#d0ed57"];return n.jsxs("div",{className:"h-[250px] w-full flex flex-col items-center justify-center",children:[n.jsx("h3",{className:"text-sm font-semibold text-center mb-2",children:t}),n.jsx(co,{width:"100%",height:"100%",children:n.jsxs(wy,{children:[n.jsx(zl,{data:e,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:s,percent:i})=>`${s} ${(i*100).toFixed(0)}%`,children:e.map((s,i)=>n.jsx(_m,{fill:r[i%r.length]},`cell-${i}`))}),n.jsx(es,{formatter:(s,i,a)=>[`${s} ${a.payload.unit||""}`,a.payload.name]}),n.jsx(bc,{})]})})]})},iUe=()=>{const[e,t]=x.useState(!0),[r,s]=x.useState(null),[i,a]=x.useState({userRegistrations:[],parcelStatus:[],requestTypes:[],monthlySales:[],totalUsers:0,totalParcels:0,totalRequests:0,totalSalesAmount:0}),{toast:o}=pt(),l=x.useCallback(async()=>{t(!0),s(null);try{const[c,u,d,h]=await Promise.all([pe.from("users").select("created_at, role"),pe.from("parcels").select("status, area_sqm"),pe.from("requests").select("request_type, status"),pe.from("transactions").select("amount, created_at, status")]);if(c.error)throw c.error;if(u.error)throw u.error;if(d.error)throw d.error;if(h.error)throw h.error;const m=c.data||[],p=u.data||[],v=d.data||[],g=h.data||[],y=m.reduce((T,M)=>{const z=new Date(M.created_at).toLocaleString("fr-FR",{month:"short",year:"numeric"});return T[z]=(T[z]||0)+1,T},{}),j=Object.keys(y).map(T=>({name:T,value:y[T]})).sort((T,M)=>new Date(T.name)-new Date(M.name)),_=p.reduce((T,M)=>(T[M.status]=(T[M.status]||0)+1,T),{}),w=Object.keys(_).map(T=>({name:T,value:_[T],unit:"parcelles"})),A=v.reduce((T,M)=>(T[M.request_type]=(T[M.request_type]||0)+1,T),{}),S=Object.keys(A).map(T=>({name:T,value:A[T],unit:"demandes"})),P=g.filter(T=>T.status==="completed").reduce((T,M)=>{const z=new Date(M.created_at).toLocaleString("fr-FR",{month:"short",year:"numeric"});return T[z]=(T[z]||0)+M.amount,T},{}),C=Object.keys(P).map(T=>({name:T,amount:P[T]})).sort((T,M)=>new Date(T.name)-new Date(M.name));a({userRegistrations:j,parcelStatus:w,requestTypes:S,monthlySales:C,totalUsers:m.length,totalParcels:p.length,totalRequests:v.length,totalSalesAmount:g.filter(T=>T.status==="completed").reduce((T,M)=>T+M.amount,0)})}catch(c){s(c.message),o({variant:"destructive",title:"Erreur de chargement des rapports",description:c.message})}finally{t(!1)}},[o]);return x.useEffect(()=>{l()},[l]),e&&i.totalUsers===0?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):r?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",r]})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(ix,{className:"mr-3 h-8 w-8"}),"Rapports et Statistiques"]}),n.jsx("p",{className:"text-muted-foreground",children:"Analyses dtailles de l'activit de la plateforme."}),n.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(bs,{className:"mr-2 h-5 w-5"}),"Inscriptions Utilisateurs"]})}),n.jsx(ve,{children:n.jsx(u$,{data:i.userRegistrations,dataKey:"value",labelKey:"name",barColorClass:"bg-blue-500",title:"Nouvelles inscriptions"})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(wy,{className:"mr-2 h-5 w-5"})," Statut des Parcelles"]})}),n.jsx(ve,{children:n.jsx(d$,{data:i.parcelStatus,title:"Rpartition par statut"})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(wy,{className:"mr-2 h-5 w-5"})," Types de Demandes"]})}),n.jsx(ve,{children:n.jsx(d$,{data:i.requestTypes,title:"Rpartition par type"})})]})]}),n.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:n.jsxs(he,{className:"lg:col-span-2",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center text-base",children:[n.jsx(fs,{className:"mr-2 h-5 w-5"})," Ventes Mensuelles"]})}),n.jsx(ve,{children:n.jsx(u$,{data:i.monthlySales,dataKey:"amount",labelKey:"name",barColorClass:"bg-green-500",title:"Montant des ventes"})})]})})]})},aUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(null),[l,c]=x.useState(""),u=x.useCallback(async()=>{i(!0),o(null);try{const{data:p,error:v}=await pe.from("contracts").select(`
          *,
          user:users!fk_contracts_user_id(*),
          parcel:parcels!contracts_parcel_id_fkey(*)
        `).order("date",{ascending:!1});if(v)throw v;const g=p.map(y=>{var j,_,w,A;return{id:y.id,type:y.type,parcelId:((j=y.parcel)==null?void 0:j.reference)||"N/A",parcelName:((_=y.parcel)==null?void 0:_.name)||"N/A",userName:((w=y.user)==null?void 0:w.full_name)||"N/A",userEmail:((A=y.user)==null?void 0:A.email)||"N/A",date:new Date(y.date).toLocaleDateString("fr-FR"),status:y.status,rawContract:y}});r(g||[])}catch(p){o(p.message),e({variant:"destructive",title:"Erreur de chargement des contrats",description:p.message})}finally{i(!1)}},[e]);x.useEffect(()=>{u()},[u]);const d=t.filter(p=>(p.id||"").toLowerCase().includes(l.toLowerCase())||(p.type||"").toLowerCase().includes(l.toLowerCase())||(p.parcelId||"").toLowerCase().includes(l.toLowerCase())||(p.userName||"").toLowerCase().includes(l.toLowerCase())||(p.status||"").toLowerCase().includes(l.toLowerCase())),h=p=>{const v=new Zt;v.text(`Contrat ID: ${p.id}`,10,10),v.text(`Type: ${p.type}`,10,20),v.text(`Parcelle: ${p.parcelName} (${p.parcelId})`,10,30),v.text(`Client: ${p.userName} (${p.userEmail})`,10,40),v.text(`Date: ${p.date}`,10,50),v.text(`Statut: ${p.status}`,10,60),v.save(`contrat-${p.id}.pdf`)},m=p=>{e({title:"Dtails Contrat",description:`Affichage des dtails pour ${p}. ( implmenter)`})};return s?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):a?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",a]})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Cr,{className:"mr-3 h-8 w-8"}),"Gestion des Contrats"]}),n.jsx("p",{className:"text-muted-foreground",children:"Visualisez et grez tous les contrats fonciers sur la plateforme."}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Rechercher des Contrats"}),n.jsxs("div",{className:"relative mt-2",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par ID, type, parcelle, nom client ou statut...",className:"pl-8",value:l,onChange:p=>c(p.target.value)})]})]}),n.jsx(ve,{children:d.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Aucun contrat trouv."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"ID"}),n.jsx(yt,{children:"Type"}),n.jsx(yt,{children:"Parcelle"}),n.jsx(yt,{children:"Client"}),n.jsx(yt,{children:"Date"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ra,{children:d.map(p=>n.jsxs(rn,{children:[n.jsx(vt,{className:"font-mono text-xs",children:p.id}),n.jsx(vt,{children:p.type}),n.jsx(vt,{children:p.parcelId}),n.jsx(vt,{children:p.userName}),n.jsx(vt,{children:p.date}),n.jsx(vt,{children:n.jsx(Ge,{variant:p.status==="Sign"?"success":"secondary",children:p.status})}),n.jsxs(vt,{className:"text-right flex justify-end space-x-2",children:[n.jsx(Y,{variant:"ghost",size:"sm",title:"Tlcharger PDF",onClick:()=>h(p),children:n.jsx(Tl,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm",title:"Dtails",onClick:()=>m(p.id),children:n.jsx(Hr,{className:"h-4 w-4"})})]})]},p.id))})]})})})]})]})},oUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState("all"),[d,h]=x.useState("all"),[m,p]=x.useState(null),[v,g]=x.useState(""),{toast:y}=pt(),j={pending:{label:"En attente",color:"bg-yellow-500"},investigating:{label:"Enqute en cours",color:"bg-blue-500"},resolved:{label:"Rsolu",color:"bg-green-500"},closed:{label:"Ferm",color:"bg-gray-500"}},_={low:{label:"Faible",color:"bg-green-100 text-green-800"},medium:{label:"Moyen",color:"bg-yellow-100 text-yellow-800"},high:{label:"lev",color:"bg-orange-100 text-orange-800"},urgent:{label:"Urgent",color:"bg-red-100 text-red-800"}};x.useEffect(()=>{w()},[]);const w=async()=>{try{a(!0);const{data:C,error:T}=await pe.from("disputes").select("*").order("created_at",{ascending:!1});T?(t([]),s([]),y({variant:"destructive",title:"Erreur",description:"Impossible de charger les litiges (table absente ou erreur Supabase)"})):!C||C.length===0?(t([]),s([]),y({title:"Aucun litige trouv",description:"Aucune donne n'est disponible dans la table des litiges."})):(t(C),s(C))}catch(C){console.error("Erreur lors du chargement des litiges:",C),y({variant:"destructive",title:"Erreur",description:"Impossible de charger les litiges"})}finally{a(!1)}};x.useEffect(()=>{let C=e;o&&(C=C.filter(T=>T.title.toLowerCase().includes(o.toLowerCase())||T.plaintiff_name.toLowerCase().includes(o.toLowerCase())||T.defendant_name.toLowerCase().includes(o.toLowerCase())||T.parcel_id.toLowerCase().includes(o.toLowerCase()))),c!=="all"&&(C=C.filter(T=>T.status===c)),d!=="all"&&(C=C.filter(T=>T.priority===d)),s(C)},[e,o,c,d]);const A=async(C,T)=>{try{t(M=>M.map(z=>z.id===C?{...z,status:T,updated_at:new Date().toISOString()}:z)),y({title:"Statut mis  jour",description:`Le statut du litige a t chang vers "${j[T].label}"`})}catch(M){console.error("Erreur lors de la mise  jour du statut:",M),y({title:"Erreur",description:"Impossible de mettre  jour le statut",variant:"destructive"})}},S=async C=>{if(!v.trim()){y({title:"Erreur",description:"Veuillez saisir une rsolution",variant:"destructive"});return}try{t(T=>T.map(M=>M.id===C?{...M,status:"resolved",resolution:v,updated_at:new Date().toISOString()}:M)),p(null),g(""),y({title:"Litige rsolu",description:"La rsolution a t enregistre avec succs"})}catch(T){console.error("Erreur lors de la rsolution:",T),y({title:"Erreur",description:"Impossible d'enregistrer la rsolution",variant:"destructive"})}},P=C=>new Date(C).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return i?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),n.jsx("p",{className:"mt-4 text-lg text-muted-foreground",children:"Chargement des litiges..."})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestion des Litiges"}),n.jsx("p",{className:"text-muted-foreground",children:"Grez et rsolvez les conflits fonciers et les litiges"})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(Ge,{variant:"outline",className:"px-3 py-1",children:[n.jsx(kr,{className:"h-4 w-4 mr-1"}),e.filter(C=>C.status==="pending").length," en attente"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx(ln,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En attente"}),n.jsx("p",{className:"text-2xl font-bold",children:e.filter(C=>C.status==="pending").length})]})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(wr,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En enqute"}),n.jsx("p",{className:"text-2xl font-bold",children:e.filter(C=>C.status==="investigating").length})]})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(Mu,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Rsolus"}),n.jsx("p",{className:"text-2xl font-bold",children:e.filter(C=>C.status==="resolved").length})]})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx(kr,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Urgents"}),n.jsx("p",{className:"text-2xl font-bold",children:e.filter(C=>C.priority==="urgent").length})]})]})})})]}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher par titre, parties, ou parcelle...",value:o,onChange:C=>l(C.target.value),className:"pl-10"})]})}),n.jsxs(Ft,{value:c,onValueChange:u,children:[n.jsx(Dt,{className:"w-[200px]",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),Object.entries(j).map(([C,T])=>n.jsx(Ke,{value:C,children:T.label},C))]})]}),n.jsxs(Ft,{value:d,onValueChange:h,children:[n.jsx(Dt,{className:"w-[200px]",children:n.jsx(zt,{placeholder:"Filtrer par priorit"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les priorits"}),Object.entries(_).map(([C,T])=>n.jsx(Ke,{value:C,children:T.label},C))]})]})]})})}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{children:["Litiges (",r.length,")"]}),n.jsx(jt,{children:"Liste de tous les litiges fonciers et conflits"})]}),n.jsx(ve,{children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Litige"}),n.jsx(yt,{children:"Parties"}),n.jsx(yt,{children:"Parcelle"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Priorit"}),n.jsx(yt,{children:"Date"}),n.jsx(yt,{children:"Actions"})]})}),n.jsx(Ra,{children:r.map(C=>n.jsxs(rn,{children:[n.jsx(vt,{children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:C.title}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:C.description})]})}),n.jsx(vt,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Plaignant:"})," ",C.plaintiff_name]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("span",{className:"font-medium",children:"Dfendeur:"})," ",C.defendant_name]})]})}),n.jsx(vt,{children:n.jsx(Ge,{variant:"outline",children:C.parcel_id})}),n.jsx(vt,{children:n.jsx(Ge,{className:`${j[C.status].color} text-white`,children:j[C.status].label})}),n.jsx(vt,{children:n.jsx(Ge,{variant:"secondary",className:_[C.priority].color,children:_[C.priority].label})}),n.jsx(vt,{children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("p",{children:["Cr: ",P(C.created_at)]}),n.jsxs("p",{className:"text-muted-foreground",children:["MAJ: ",P(C.updated_at)]})]})}),n.jsx(vt,{children:n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs(on,{children:[n.jsx(Hye,{asChild:!0,children:n.jsx(Y,{variant:"outline",size:"sm",children:n.jsx(Hr,{className:"h-4 w-4"})})}),n.jsxs(Qr,{className:"max-w-2xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:C.title}),n.jsxs(Ur,{children:["Dtails du litige #",C.id]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Plaignant"}),n.jsx("p",{className:"text-sm",children:C.plaintiff_name})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-1",children:"Dfendeur"}),n.jsx("p",{className:"text-sm",children:C.defendant_name})]})]}),C.resolution&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Rsolution"}),n.jsx("p",{className:"text-sm text-muted-foreground bg-gray-50 p-3 rounded",children:C.resolution})]}),n.jsx("div",{className:"flex space-x-2",children:C.status!=="resolved"&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{size:"sm",onClick:()=>A(C.id,"investigating"),children:"Enquter"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>p(C),children:"Rsoudre"})]})})]})]})]})})})]},C.id))})]})})]}),m&&n.jsx(on,{open:!!m,onOpenChange:()=>p(null),children:n.jsxs(Qr,{children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Rsoudre le litige"}),n.jsxs(Ur,{children:["Saisissez la rsolution pour: ",m.title]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(ms,{placeholder:"Dcrivez la rsolution du litige...",value:v,onChange:C=>g(C.target.value),rows:4}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(Y,{variant:"outline",onClick:()=>p(null),children:"Annuler"}),n.jsx(Y,{onClick:()=>S(m.id),children:"Rsoudre le litige"})]})]})]})})]})},lUe=()=>{const[e,t]=x.useState(!0),[r,s]=x.useState(null),[i,a]=x.useState([]),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,h]=x.useState({entity_id:"",entity_type:"",check_type:"",status:"en_cours",details:"",check_date:new Date().toISOString().split("T")[0]}),{toast:m}=pt(),p=x.useCallback(async()=>{t(!0),s(null);try{const{data:S,error:P}=await pe.from("compliance_checks").select("*").order("check_date",{ascending:!1});if(P)throw P;a(S||[])}catch(S){s(S.message),m({variant:"destructive",title:"Erreur de chargement des vrifications de conformit",description:S.message})}finally{t(!1)}},[m]);x.useEffect(()=>{p()},[p]);const v=()=>{u(null),h({entity_id:"",entity_type:"",check_type:"",status:"en_cours",details:"",check_date:new Date().toISOString().split("T")[0]}),l(!0)},g=S=>{u(S),h({entity_id:S.entity_id||"",entity_type:S.entity_type||"",check_type:S.check_type||"",status:S.status||"en_cours",details:S.details?JSON.stringify(S.details,null,2):"",check_date:S.check_date?new Date(S.check_date).toISOString().split("T")[0]:""}),l(!0)},y=async S=>{try{const{error:P}=await pe.from("compliance_checks").delete().eq("id",S);if(P)throw P;a(C=>C.filter(T=>T.id!==S)),m({title:"Vrification supprime",description:"La vrification de conformit a t supprime."})}catch(P){m({variant:"destructive",title:"Erreur de suppression",description:P.message})}},j=S=>{const{id:P,value:C}=S.target;h(T=>({...T,[P]:C}))},_=(S,P)=>{h(C=>({...C,[S]:P}))},w=async S=>{S.preventDefault(),t(!0);try{let P=null;if(d.details)try{P=JSON.parse(d.details)}catch{throw new Error("Les dtails doivent tre un JSON valide.")}const C={...d,details:P};if(c){const{error:T}=await pe.from("compliance_checks").update(C).eq("id",c.id);if(T)throw T;m({title:"Vrification mise  jour",description:"La vrification de conformit a t mise  jour."})}else{const{error:T}=await pe.from("compliance_checks").insert([C]);if(T)throw T;m({title:"Vrification ajoute",description:"Une nouvelle vrification de conformit a t ajoute."})}l(!1),p()}catch(P){m({variant:"destructive",title:`Erreur lors de l'${c?"mise  jour":"ajout"} de la vrification`,description:P.message})}finally{t(!1)}},A=()=>{l(!1),u(null),h({entity_id:"",entity_type:"",check_type:"",status:"en_cours",details:"",check_date:new Date().toISOString().split("T")[0]})};return e&&i.length===0?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px]",children:n.jsx(Tt,{size:"large"})}):r?n.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] text-red-600",children:n.jsxs("p",{children:["Erreur: ",r]})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Ys,{className:"mr-3 h-8 w-8"}),"Gestion de la Conformit"]}),n.jsxs(Y,{onClick:v,children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter une vrification"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Liste des Vrifications"}),n.jsx(jt,{children:"Grez les statuts de conformit des entits."})]}),n.jsx(ve,{children:i.length===0?n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune vrification de conformit trouve."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"ID Entit"}),n.jsx(yt,{children:"Type Entit"}),n.jsx(yt,{children:"Type Vrif."}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Date"}),n.jsx(yt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ra,{children:i.map(S=>n.jsxs(rn,{children:[n.jsx(vt,{className:"font-medium",children:S.entity_id}),n.jsx(vt,{children:S.entity_type}),n.jsx(vt,{children:S.check_type}),n.jsx(vt,{children:n.jsx(Ge,{variant:S.status==="conforme"?"success":S.status==="non_conforme"?"destructive":"secondary",children:S.status})}),n.jsx(vt,{children:new Date(S.check_date).toLocaleDateString("fr-FR")}),n.jsxs(vt,{className:"text-right flex justify-end space-x-2",children:[n.jsx(Y,{variant:"ghost",size:"sm",title:"Modifier",onClick:()=>g(S),children:n.jsx(Ah,{className:"h-4 w-4"})}),n.jsxs(Zu,{children:[n.jsx(Xu,{asChild:!0,children:n.jsx(Y,{variant:"ghost",size:"sm",title:"Supprimer",className:"text-red-600 hover:text-red-800",children:n.jsx(di,{className:"h-4 w-4"})})}),n.jsxs(Oc,{children:[n.jsxs(Lc,{children:[n.jsx(Ic,{children:"tes-vous absolument sr ?"}),n.jsx(Rc,{children:"Cette action supprimera dfinitivement cette vrification de conformit."})]}),n.jsxs(Mc,{children:[n.jsx($c,{children:"Annuler"}),n.jsx(Dc,{onClick:()=>y(S.id),className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Supprimer"})]})]})]})]})]},S.id))})]})})})]}),n.jsx(on,{open:o,onOpenChange:l,children:n.jsxs(Qr,{className:"sm:max-w-[600px] p-6",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:c?"Modifier la vrification":"Ajouter une nouvelle vrification"}),n.jsx(Ur,{children:c?"Modifiez les informations de la vrification de conformit.":"Remplissez les informations pour ajouter une nouvelle vrification."})]}),n.jsxs("form",{onSubmit:w,className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"entity_id",className:"text-right",children:"ID Entit"}),n.jsx(De,{id:"entity_id",value:d.entity_id,onChange:j,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"entity_type",className:"text-right",children:"Type Entit"}),n.jsxs(Ft,{value:d.entity_type,onValueChange:S=>_("entity_type",S),children:[n.jsx(Dt,{className:"col-span-3",children:n.jsx(zt,{placeholder:"Slectionner un type d'entit"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"parcel",children:"Parcelle"}),n.jsx(Ke,{value:"user",children:"Utilisateur"}),n.jsx(Ke,{value:"contract",children:"Contrat"}),n.jsx(Ke,{value:"transaction",children:"Transaction"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"check_type",className:"text-right",children:"Type Vrification"}),n.jsx(De,{id:"check_type",value:d.check_type,onChange:j,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"check_date",className:"text-right",children:"Date Vrification"}),n.jsx(De,{id:"check_date",type:"date",value:d.check_date,onChange:j,className:"col-span-3",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"status",className:"text-right",children:"Statut"}),n.jsxs(Ft,{value:d.status,onValueChange:S=>_("status",S),children:[n.jsx(Dt,{className:"col-span-3",children:n.jsx(zt,{placeholder:"Slectionner un statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"en_cours",children:"En Cours"}),n.jsx(Ke,{value:"conforme",children:"Conforme"}),n.jsx(Ke,{value:"non_conforme",children:"Non Conforme"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[n.jsx($e,{htmlFor:"details",className:"text-right",children:"Dtails (JSON)"}),n.jsx(ms,{id:"details",value:d.details,onChange:j,placeholder:'Ex: {"reason": "Missing document", "document_id": "xyz"}',rows:5,className:"col-span-3"}),n.jsx("p",{className:"col-span-4 text-xs text-muted-foreground mt-1 text-right",children:"Doit tre un JSON valide."})]}),n.jsxs(Bn,{className:"flex justify-end gap-2 mt-4",children:[n.jsx(Y,{type:"button",variant:"outline",onClick:A,children:"Annuler"}),n.jsxs(Y,{type:"submit",disabled:e,children:[e&&n.jsx(Tt,{size:"small",className:"mr-2"}),c?"Mettre  Jour":"Ajouter"]})]})]})]})})]})},cUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(null),[o,l]=x.useState("");x.useState("all");const{toast:c}=pt(),u=x.useCallback(async()=>{s(!0),a(null);try{const{data:m,error:p}=await pe.from("transactions").select(`
          *,
          buyer:users!fk_transactions_buyer_id(*),
          seller:users!fk_transactions_seller_id(*),
          parcel:parcels!fk_transactions_parcels(*)
        `).order("created_at",{ascending:!1});if(p)throw p;const v=m.map(g=>{var y,j,_;return{id:g.id,amount:g.amount,type:g.type,status:g.status,date:new Date(g.created_at).toLocaleDateString("fr-FR"),buyerName:((y=g.buyer)==null?void 0:y.full_name)||"N/A",sellerName:((j=g.seller)==null?void 0:j.full_name)||"N/A",parcelRef:((_=g.parcel)==null?void 0:_.reference)||"N/A"}});t(v||[])}catch(m){a(m.message),c({variant:"destructive",title:"Erreur de chargement des transactions",description:m.message})}finally{s(!1)}},[c]);x.useEffect(()=>{u()},[u]);const d=e.filter(m=>(m.id||"").toLowerCase().includes(o.toLowerCase())||(m.buyerName||"").toLowerCase().includes(o.toLowerCase())||(m.sellerName||"").toLowerCase().includes(o.toLowerCase())||(m.parcelRef||"").toLowerCase().includes(o.toLowerCase())),h=m=>{switch(m){case"completed":return"success";case"pending":return"warning";case"failed":return"destructive";default:return"secondary"}};return r?n.jsx("div",{className:"flex justify-center p-8",children:n.jsx(Tt,{size:"large"})}):i?n.jsxs("div",{className:"p-8 text-red-600",children:["Erreur: ",i]}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(fs,{className:"mr-3 h-8 w-8"}),"Gestion des Transactions"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Filtres"}),n.jsx(De,{placeholder:"Rechercher par acheteur, vendeur, parcelle...",value:o,onChange:m=>l(m.target.value),className:"mt-2"})]}),n.jsx(ve,{children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"ID"}),n.jsx(yt,{children:"Montant"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Date"}),n.jsx(yt,{children:"Acheteur"}),n.jsx(yt,{children:"Vendeur"}),n.jsx(yt,{children:"Parcelle"})]})}),n.jsx(Ra,{children:d.map(m=>n.jsxs(rn,{children:[n.jsx(vt,{className:"font-mono text-xs",children:m.id}),n.jsx(vt,{children:new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF"}).format(m.amount)}),n.jsx(vt,{children:n.jsx(Ge,{variant:h(m.status),children:m.status})}),n.jsx(vt,{children:m.date}),n.jsx(vt,{children:m.buyerName}),n.jsx(vt,{children:m.sellerName}),n.jsx(vt,{children:m.parcelRef})]},m.id))})]})})]})]})},uUe=["Rdige un article de blog sur les 5 avantages d'investir dans le foncier  Dakar en 2025.","Cre une description attrayante pour une parcelle de 300m situe  Saly, idale pour une villa.","Gnre 3 exemples de rponses  un client qui demande si le prix d'un terrain est ngociable.","cris un court paragraphe pour la section ' Propos' de notre site web, mettant en avant la scurit et la transparence."],dUe=()=>{const{toast:e}=pt(),[t,r]=x.useState(""),[s,i]=x.useState(""),[a,o]=x.useState(!1),l=async u=>{var h,m,p,v;if(!u.trim())return;const d={}.VITE_GEMINI_API_KEY;if(!d){e({variant:"destructive",title:"Configuration manquante",description:"La cl API Gemini n'est pas configure. Ajoutez VITE_GEMINI_API_KEY  votre fichier .env"});return}o(!0),i("");try{const g={contents:[{role:"user",parts:[{text:u}]}]},y=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${d}`,j=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!j.ok)throw new Error(`Erreur API: ${j.status} ${j.statusText}`);const _=await j.json();if(!_.candidates||!((v=(p=(m=(h=_.candidates[0])==null?void 0:h.content)==null?void 0:m.parts)==null?void 0:p[0])!=null&&v.text))throw new Error("Rponse API invalide ou vide");const w=_.candidates[0].content.parts[0].text;i(w),e({title:"Contenu gnr avec succs!",description:"Le contenu a t gnr et est prt  tre utilis."})}catch(g){e({variant:"destructive",title:"Erreur de gnration",description:g.message||"Une erreur inattendue s'est produite lors de la gnration du contenu."})}finally{o(!1)}},c=()=>{s&&(navigator.clipboard.writeText(s),e({title:"Copi !"}))};return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Df,{className:"mr-3 h-8 w-8 text-purple-600"}),"Assistant IA"]}),n.jsx("p",{className:"text-muted-foreground",children:"Gnrez du contenu, des rponses et des ides pour acclrer votre travail."}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Gnrer du Contenu"}),n.jsx(jt,{children:"Dcrivez ce que vous souhaitez que l'IA gnre."})]}),n.jsxs(ve,{className:"space-y-4",children:[n.jsx(ms,{id:"prompt",placeholder:"Ex: Rdige un article de blog...",value:t,onChange:u=>r(u.target.value),rows:8}),n.jsxs(Y,{onClick:()=>l(t),disabled:a,className:"w-full",children:[a?n.jsx(Tt,{size:"small",className:"mr-2"}):n.jsx(Ol,{className:"mr-2 h-4 w-4"}),a?"Gnration...":"Gnrer"]})]})]}),n.jsxs(he,{className:"mt-6",children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Suggestions"}),n.jsx(jt,{children:"Cliquez pour utiliser un de ces prompts."})]}),n.jsx(ve,{className:"space-y-2",children:uUe.map((u,d)=>n.jsx(Y,{variant:"outline",className:"w-full text-left justify-start",onClick:()=>{r(u),l(u)},children:u},d))})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[n.jsx(ke,{children:"Rsultat"}),s&&n.jsxs(Y,{variant:"outline",size:"sm",onClick:c,children:[n.jsx(pz,{className:"mr-2 h-4 w-4"})," Copier"]})]}),n.jsx(ve,{children:n.jsx("div",{className:"bg-muted p-4 rounded-md whitespace-pre-wrap text-sm min-h-[300px]",children:a?n.jsx("div",{className:"flex justify-center items-center h-full",children:n.jsx(Tt,{})}):s||"Le contenu gnr par l'IA apparatra ici."})})]})]})]})},h$=({children:e,className:t=""})=>n.jsx("span",{className:`inline-block px-2 py-0.5 text-xs rounded bg-primary/10 text-primary ${t}`,children:e});function hUe(){const[e,t]=x.useState([]),[r,s]=x.useState(!1),[i,a]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState(""),[d,h]=x.useState(""),[m,p]=x.useState([]),[v,g]=x.useState(null),[y,j]=x.useState(1),[_,w]=x.useState(12),[A,S]=x.useState(0),[P,C]=x.useState("created_at"),[T,M]=x.useState("desc"),[z,O]=x.useState({pending:0,active:0,suspended:0}),[I,q]=x.useState(""),[F,W]=x.useState(""),V=async()=>{s(!0);const{data:K,total:ee}=await Je.listInstitutionsPaged({regionId:i||null,type:o||null,status:c||null,page:y,pageSize:_,sortBy:P,sortDir:T,createdAfter:I||null,createdBefore:F||null});t(K),S(ee);const xe=await Je.getInstitutionStatusCounts({regionId:i||null,type:o||null,createdAfter:I||null,createdBefore:F||null});O(xe),s(!1)};x.useEffect(()=>{V()},[i,o,c,y,_,P,T,I,F]),x.useEffect(()=>{(async()=>{const{data:K,error:ee}=await pe.from("regions").select("id,name").order("name");ee||p(K)})()},[]);const ne=async(K,ee)=>{g(K.id);try{const{error:xe}=await pe.from("institution_profiles").update({status:ee}).eq("id",K.id);if(xe)throw xe;await V()}catch(xe){console.warn("updateStatus failed",xe.message||xe)}finally{g(null)}},G=e.filter(K=>{var xe;if(!d)return!0;const ee=d.toLowerCase();return K.name.toLowerCase().includes(ee)||(((xe=K.users)==null?void 0:xe.full_name)||"").toLowerCase().includes(ee)||(K.slug||"").includes(ee)});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Institutions"}),n.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[n.jsx(De,{placeholder:"Recherche",value:d,onChange:K=>{h(K.target.value),j(1)},className:"w-48"}),n.jsxs("select",{value:i,onChange:K=>{a(K.target.value),j(1)},className:"border rounded px-2 py-1 text-sm w-40",children:[n.jsx("option",{value:"",children:"Rgion"}),m.map(K=>n.jsx("option",{value:K.id,children:K.name},K.id))]}),n.jsxs("select",{value:o,onChange:K=>{l(K.target.value),j(1)},className:"border rounded px-2 py-1 text-sm",children:[n.jsx("option",{value:"",children:"Type"}),n.jsx("option",{value:"Mairie",children:"Mairie"}),n.jsx("option",{value:"Banque",children:"Banque"}),n.jsx("option",{value:"Notaire",children:"Notaire"})]}),n.jsxs("select",{value:c,onChange:K=>{u(K.target.value),j(1)},className:"border rounded px-2 py-1 text-sm",children:[n.jsx("option",{value:"",children:"Statut"}),n.jsx("option",{value:"pending",children:"En attente"}),n.jsx("option",{value:"active",children:"Actif"}),n.jsx("option",{value:"suspended",children:"Suspendu"})]}),n.jsxs("select",{value:P,onChange:K=>{C(K.target.value),j(1)},className:"border rounded px-2 py-1 text-sm",children:[n.jsx("option",{value:"created_at",children:"Tri: Date"}),n.jsx("option",{value:"name",children:"Tri: Nom"}),n.jsx("option",{value:"status",children:"Tri: Statut"})]}),n.jsx("button",{onClick:()=>{M(K=>K==="asc"?"desc":"asc"),j(1)},className:"text-xs underline",children:T==="asc"?"Asc":"Desc"}),n.jsxs("select",{value:_,onChange:K=>{w(Number(K.target.value)),j(1)},className:"border rounded px-2 py-1 text-sm",children:[n.jsx("option",{value:6,children:"6"}),n.jsx("option",{value:12,children:"12"}),n.jsx("option",{value:24,children:"24"})]}),n.jsx("input",{type:"date",value:I,onChange:K=>{q(K.target.value),j(1)},className:"border rounded px-2 py-1 text-xs"}),n.jsx("input",{type:"date",value:F,onChange:K=>{W(K.target.value),j(1)},className:"border rounded px-2 py-1 text-xs"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>{q(""),W("")},children:"Reset Dates"}),n.jsx(Y,{onClick:V,size:"sm",disabled:r,children:r?"...":"Rafrachir"}),n.jsx(Y,{size:"sm",variant:"secondary",onClick:()=>{const K=Je.toCSV(e,[{label:"ID",accessor:ee=>ee.id},{label:"Nom",accessor:ee=>ee.name},{label:"Slug",accessor:ee=>ee.slug},{label:"Type",accessor:ee=>ee.institution_type},{label:"Statut",accessor:ee=>ee.status},{label:"Region",accessor:ee=>{var xe;return((xe=ee.regions)==null?void 0:xe.name)||""}},{label:"Departement",accessor:ee=>{var xe;return((xe=ee.departments)==null?void 0:xe.name)||""}},{label:"Commune",accessor:ee=>{var xe;return((xe=ee.communes)==null?void 0:xe.name)||""}},{label:"CreatedAt",accessor:ee=>ee.created_at}]);Je.downloadCSV("institutions.csv",K)},children:"Export CSV"})]})]}),n.jsxs("div",{className:"flex gap-4 text-xs",children:[n.jsxs("span",{children:["En attente: ",n.jsx("strong",{children:z.pending})]}),n.jsxs("span",{children:["Actifs: ",n.jsx("strong",{children:z.active})]}),n.jsxs("span",{children:["Suspendus: ",n.jsx("strong",{children:z.suspended})]}),n.jsxs("span",{children:["Total filtr: ",n.jsx("strong",{children:A})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[G.map(K=>{var ee,xe,B,X,ie;return n.jsxs(he,{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-lg",children:K.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:K.slug})]}),n.jsx(h$,{children:K.institution_type})]}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Utilisateur:"})," ",((ee=K.users)==null?void 0:ee.full_name)||""," (",(xe=K.users)==null?void 0:xe.email,")"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Rgion:"})," ",((B=K.regions)==null?void 0:B.name)||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Dpartement:"})," ",((X=K.departments)==null?void 0:X.name)||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Commune:"})," ",((ie=K.communes)==null?void 0:ie.name)||""]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Statut:"})," ",n.jsx(h$,{className:"ml-1",children:K.status})]})]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[K.status!=="active"&&n.jsx(Y,{size:"xs",variant:"outline",disabled:v===K.id,onClick:()=>ne(K,"active"),children:v===K.id?"...":"Activer"}),K.status==="active"&&n.jsx(Y,{size:"xs",variant:"destructive",disabled:v===K.id,onClick:()=>ne(K,"suspended"),children:v===K.id?"...":"Suspendre"}),K.status==="suspended"&&n.jsx(Y,{size:"xs",variant:"outline",disabled:v===K.id,onClick:()=>ne(K,"active"),children:v===K.id?"...":"Ractiver"}),n.jsx("a",{href:`/dashboard/admin/audit-logs?target=${K.user_id}`,className:"text-xs underline text-primary",children:"Voir audit"})]}),K.metadata&&Object.keys(K.metadata).length>0&&n.jsxs("details",{className:"text-xs",children:[n.jsx("summary",{className:"cursor-pointer font-medium",children:"Mtadonnes"}),n.jsx("pre",{className:"mt-1 max-h-40 overflow-auto bg-muted/30 p-2 rounded text-[10px]",children:JSON.stringify(K.metadata,null,2)})]}),n.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Cr le ",new Date(K.created_at).toLocaleString("fr-FR")]})]},K.id)}),!r&&G.length===0&&n.jsx("div",{className:"col-span-full text-center text-sm text-muted-foreground py-10",children:"Aucune institution trouve."})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4",children:[n.jsx(Y,{size:"sm",variant:"outline",disabled:y===1||r,onClick:()=>j(K=>K-1),children:"Prcdent"}),n.jsxs("div",{className:"text-xs",children:["Page ",y," / ",Math.max(1,Math.ceil(A/_))]}),n.jsx(Y,{size:"sm",variant:"outline",disabled:y*_>=A||r,onClick:()=>j(K=>K+1),children:"Suivant"})]})]})}function fUe(){const[e,t]=x.useState([]),[r,s]=x.useState(!1),[i,a]=x.useState(1),[o,l]=x.useState(50),[c,u]=x.useState(0),[d,h]=x.useState(""),[m,p]=x.useState(""),[v,g]=x.useState(""),[y,j]=x.useState("desc"),[_,w]=x.useState(""),[A,S]=x.useState(""),[P,C]=x.useState(""),T=x.useRef(null),M=async()=>{s(!0);const{data:O,total:I}=await Je.listAuditLogs({page:i,pageSize:o,eventType:d||null,actorUserId:m||null,targetUserId:v||null,sortDir:y,createdAfter:A||null,createdBefore:P||null});t(O),u(I),s(!1)};x.useEffect(()=>{M()},[i,o,d,m,v,y,A,P]),x.useEffect(()=>(T.current=pe.channel("audit_logs_live").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},O=>{t(I=>[O.new,...I].slice(0,o)),u(I=>I+1)}).subscribe(),()=>{T.current&&pe.removeChannel(T.current)}),[o]);const z=e.filter(O=>{if(!_)return!0;const I=_.toLowerCase();return(O.event_type||"").toLowerCase().includes(I)||(O.target_table||"").toLowerCase().includes(I)||(O.target_id||"").toLowerCase().includes(I)});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Audit Logs"}),n.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[n.jsx(De,{placeholder:"Recherche",value:_,onChange:O=>{w(O.target.value),a(1)},className:"w-52"}),n.jsx(De,{placeholder:"Event",value:d,onChange:O=>{h(O.target.value),a(1)},className:"w-40"}),n.jsx(De,{placeholder:"Actor UUID",value:m,onChange:O=>{p(O.target.value),a(1)},className:"w-40"}),n.jsx(De,{placeholder:"Target UUID",value:v,onChange:O=>{g(O.target.value),a(1)},className:"w-40"}),n.jsx("input",{type:"date",value:A,onChange:O=>{S(O.target.value),a(1)},className:"border rounded px-2 py-1 text-xs"}),n.jsx("input",{type:"date",value:P,onChange:O=>{C(O.target.value),a(1)},className:"border rounded px-2 py-1 text-xs"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>{S(""),C("")},children:"Reset Dates"}),n.jsxs("select",{value:o,onChange:O=>{l(Number(O.target.value)),a(1)},className:"border rounded px-2 py-1 text-sm",children:[n.jsx("option",{value:25,children:"25"}),n.jsx("option",{value:50,children:"50"}),n.jsx("option",{value:100,children:"100"})]}),n.jsx("button",{onClick:()=>j(O=>O==="asc"?"desc":"asc"),className:"text-xs underline",children:y==="asc"?"Asc":"Desc"}),n.jsx(Y,{size:"sm",onClick:M,disabled:r,children:r?"...":"Rafrachir"}),n.jsx(Y,{size:"sm",variant:"secondary",onClick:()=>{const O=Je.toCSV(e,[{label:"ID",accessor:I=>I.id},{label:"Event",accessor:I=>I.event_type},{label:"Actor",accessor:I=>I.actor_user_id},{label:"Target",accessor:I=>I.target_user_id},{label:"Table",accessor:I=>I.target_table},{label:"TargetId",accessor:I=>I.target_id},{label:"CreatedAt",accessor:I=>I.created_at}]);Je.downloadCSV("audit_logs.csv",O)},children:"Export CSV"})]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total: ",c," (affichs: ",z.length,")"]}),n.jsxs("div",{className:"space-y-3 max-h-[70vh] overflow-auto pr-2",children:[z.map(O=>n.jsxs(he,{className:"p-3 text-xs space-y-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold",children:O.event_type}),n.jsx("span",{children:new Date(O.created_at).toLocaleString("fr-FR")})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Actor:"})," ",O.actor_user_id||""," ",O.actor_user_id&&n.jsx("button",{className:"text-[10px] underline",onClick:()=>{navigator.clipboard.writeText(O.actor_user_id)},children:"Copier"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Target:"})," ",O.target_user_id||""," ",O.target_user_id&&n.jsx("button",{className:"text-[10px] underline",onClick:()=>{navigator.clipboard.writeText(O.target_user_id)},children:"Copier"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Table:"})," ",O.target_table||""]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"ID:"})," ",O.target_id||""," ",O.target_id&&n.jsx("button",{className:"text-[10px] underline",onClick:()=>{navigator.clipboard.writeText(O.target_id)},children:"Copier"})]})]}),O.metadata&&n.jsxs("details",{children:[n.jsx("summary",{className:"cursor-pointer",children:"Metadata"}),n.jsx("pre",{className:"mt-1 bg-muted/30 p-2 rounded max-h-40 overflow-auto text-[10px]",children:JSON.stringify(O.metadata,null,2)})]})]},O.id)),!r&&z.length===0&&n.jsx("div",{className:"text-center text-sm text-muted-foreground py-10",children:"Aucun log."})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsx(Y,{size:"sm",variant:"outline",disabled:i===1||r,onClick:()=>a(O=>O-1),children:"Prcdent"}),n.jsxs("div",{className:"text-xs",children:["Page ",i," / ",Math.max(1,Math.ceil(c/o))]}),n.jsx(Y,{size:"sm",variant:"outline",disabled:i*o>=c||r,onClick:()=>a(O=>O+1),children:"Suivant"})]})]})}function mUe(){const[e,t]=x.useState([]),[r,s]=x.useState(1),[i]=x.useState(50),[a,o]=x.useState(0),[l,c]=x.useState({entityType:"",entityId:"",eventType:"",importanceMin:"",source:""}),[u,d]=x.useState(!1),[h,m]=x.useState(!1);x.useEffect(()=>{p()},[r]),x.useEffect(()=>{const j=pe.channel("global-events-admin").on("postgres_changes",{event:"INSERT",schema:"public",table:"events"},_=>{const w=_.new;l.entityType&&w.entity_type!==l.entityType||l.entityId&&w.entity_id!==l.entityId||l.eventType&&w.event_type!==l.eventType||l.importanceMin!==""&&w.importance<Number(l.importanceMin)||l.source&&w.source!==l.source||(t(A=>[w,...A].slice(0,i)),o(A=>A+1),m(!0),setTimeout(()=>m(!1),5e3))}).subscribe();return()=>{pe.removeChannel(j)}},[l,i]);async function p(){d(!0);const j=await Je.listEvents({entityType:l.entityType||null,entityId:l.entityId||null,eventType:l.eventType||null,importanceMin:l.importanceMin===""?null:Number(l.importanceMin),source:l.source||null,page:r,pageSize:i});t(j.data),o(j.total),d(!1)}function v(j,_){c(w=>({...w,[j]:_}))}function g(){s(1),p()}const y=Math.max(1,Math.ceil(a/i));return n.jsx("div",{className:"p-4 space-y-4",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:["Timeline Globale ",h&&n.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded bg-red-500 text-white animate-pulse",children:"LIVE"})]})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2 mb-3",children:[n.jsx(De,{placeholder:"Entity Type",value:l.entityType,onChange:j=>v("entityType",j.target.value)}),n.jsx(De,{placeholder:"Entity ID",value:l.entityId,onChange:j=>v("entityId",j.target.value)}),n.jsx(De,{placeholder:"Event Type",value:l.eventType,onChange:j=>v("eventType",j.target.value)}),n.jsx(De,{placeholder:"Min Importance",value:l.importanceMin,onChange:j=>v("importanceMin",j.target.value)}),n.jsx(De,{placeholder:"Source",value:l.source,onChange:j=>v("source",j.target.value)}),n.jsx(Y,{variant:"outline",onClick:g,children:"Filtrer"})]}),u&&n.jsx("div",{className:"text-sm text-gray-500",children:"Chargement..."}),!u&&e.length===0&&n.jsx("div",{className:"text-sm text-gray-500",children:"Aucun vnement."}),n.jsx("ul",{className:"divide-y max-h-[60vh] overflow-y-auto text-sm",children:e.map(j=>n.jsxs("li",{className:"py-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:j.event_type}),n.jsx("span",{className:"text-xs text-gray-500",children:new Date(j.created_at).toLocaleString()})]}),n.jsxs("div",{className:"text-xs text-gray-600 flex flex-wrap gap-2 mt-1",children:[n.jsxs("span",{children:["Entity: ",j.entity_type," #",j.entity_id]}),j.importance?n.jsxs("span",{children:["Importance: ",j.importance]}):null,j.source?n.jsxs("span",{children:["Source: ",j.source]}):null,j.actor_user_id?n.jsxs("span",{children:["Actor: ",j.actor_user_id]}):null]}),j.data&&Object.keys(j.data||{}).length>0&&n.jsx("pre",{className:"mt-1 bg-gray-50 border text-[10px] p-2 rounded overflow-x-auto",children:JSON.stringify(j.data,null,2)})]},j.id))}),n.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm",children:[n.jsx(Y,{variant:"outline",size:"sm",disabled:r<=1,onClick:()=>s(j=>Math.max(1,j-1)),children:"Prcdent"}),n.jsxs("span",{children:["Page ",r," / ",y," (",a," vnements)"]}),n.jsx(Y,{variant:"outline",size:"sm",disabled:r>=y,onClick:()=>s(j=>Math.min(y,j+1)),children:"Suivant"})]})]})]})})}const pUe=()=>{var C;const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState(!1),[h,m]=x.useState(!1),[p,v]=x.useState(null),[g,y]=x.useState(""),j=t.filter(T=>{if(l!=="all"&&T.status!==l)return!1;if(a){const M=a.toLowerCase();return T.user_name&&T.user_name.toLowerCase().includes(M)||T.current_type&&T.current_type.toLowerCase().includes(M)||T.requested_type&&T.requested_type.toLowerCase().includes(M)}return!0}),_=x.useCallback(async()=>{try{i(!0);const M=(await Je.getRequests()||[]).filter(z=>z.request_type==="type_change"||z.type==="type_change"||z.type==="changement_type").map(z=>{var O;return{id:z.id,user_id:z.user_id,user_name:((O=z.users)==null?void 0:O.full_name)||z.user_name||"",current_type:z.current_type||z.previous_type||"",requested_type:z.requested_type||z.new_type||"",status:z.status,submitted_at:z.created_at,approved_at:z.approved_at,rejected_at:z.rejected_at,rejection_reason:z.rejection_reason,documents:z.documents||[]}});r(M)}catch(T){console.error("Erreur chargement demandes changement type:",T),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les demandes de changement de type"})}finally{i(!1)}},[e]);x.useEffect(()=>{_()},[_]);const w=async T=>{try{await Je.updateUser(T.user_id,{type:T.requested_type});const M=t.map(z=>z.id===T.id?{...z,status:"approved",approved_at:new Date().toISOString()}:z);r(M),await Je.createNotification({userId:T.user_id,type:"type_change_approved",title:"Demande de changement de type approuve",body:`Votre compte est maintenant de type ${T.requested_type}`,data:{previous_type:T.current_type,new_type:T.requested_type}}),e({title:"Demande approuve",description:`${T.user_name} est maintenant ${T.requested_type}`})}catch(M){console.error("Erreur lors de l'approbation:",M),e({variant:"destructive",title:"Erreur",description:"Impossible d'approuver la demande de changement de type"})}},A=T=>{v(T),y(""),m(!0)},S=async()=>{try{if(!p)return;const T=t.map(M=>M.id===p.id?{...M,status:"rejected",rejected_at:new Date().toISOString(),rejection_reason:g}:M);r(T),await Je.createNotification({userId:p.user_id,type:"type_change_rejected",title:"Demande de changement de type rejete",body:g||`Votre demande de changement vers ${p.requested_type} a t rejete`,data:{requested_type:p.requested_type,rejection_reason:g}}),e({title:"Demande rejete",description:`La demande de ${p.user_name} a t rejete`}),m(!1),v(null)}catch(T){console.error("Erreur lors du rejet:",T),e({variant:"destructive",title:"Erreur",description:"Impossible de rejeter la demande"})}},P=T=>{v(T),d(!0)};return s&&t.length===0?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(bk,{className:"h-8 w-8"}),"Demandes de Changement de Type"]}),n.jsx("p",{className:"text-muted-foreground",children:"Grez les demandes des utilisateurs pour changer leur type de compte (Particulier  Vendeur, etc.)"})]}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx(De,{placeholder:"Rechercher par nom, type actuel ou demand...",value:a,onChange:T=>o(T.target.value),className:"w-full"})}),n.jsxs(Ft,{value:l,onValueChange:c,children:[n.jsx(Dt,{className:"w-48",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"pending",children:"En attente"}),n.jsx(Ke,{value:"approved",children:"Approuv"}),n.jsx(Ke,{value:"rejected",children:"Rejet"})]})]}),n.jsx(Y,{variant:"outline",size:"icon",onClick:_,children:n.jsx(Ta,{className:"h-4 w-4"})})]})})}),n.jsxs(he,{children:[n.jsx(Ce,{className:"pb-0",children:n.jsx(ke,{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Demandes"}),l==="pending"&&n.jsxs(Ge,{className:"bg-yellow-100 text-yellow-800",children:[t.filter(T=>T.status==="pending").length," en attente"]})]})})}),n.jsx(ve,{className:"p-0 pt-4",children:n.jsx("div",{className:"rounded-md border overflow-hidden",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Utilisateur"}),n.jsx(yt,{children:"Type actuel"}),n.jsx(yt,{children:"Type demand"}),n.jsx(yt,{children:"Documents"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Date demande"}),n.jsx(yt,{children:"Actions"})]})}),n.jsx(Ra,{children:j.length>0?j.map(T=>n.jsxs(rn,{children:[n.jsx(vt,{children:n.jsx("div",{className:"font-medium",children:T.user_name})}),n.jsx(vt,{children:n.jsx(Ge,{variant:"outline",children:T.current_type})}),n.jsx(vt,{children:n.jsx(Ge,{variant:"secondary",children:T.requested_type})}),n.jsx(vt,{children:T.documents&&n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>P(T),className:"flex items-center gap-1",children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsx("span",{children:T.documents.length})]})}),n.jsxs(vt,{children:[T.status==="approved"&&n.jsx(Ge,{className:"bg-green-100 text-green-800",children:"Approuv"}),T.status==="pending"&&n.jsx(Ge,{className:"bg-yellow-100 text-yellow-800",children:"En attente"}),T.status==="rejected"&&n.jsx(Ge,{className:"bg-red-100 text-red-800",children:"Rejet"})]}),n.jsx(vt,{children:T.submitted_at?new Date(T.submitted_at).toLocaleDateString("fr-FR"):"Inconnue"}),n.jsxs(vt,{children:[T.status==="pending"&&n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>w(T),className:"text-green-600 hover:text-green-700",title:"Approuver la demande",children:n.jsx(xc,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>A(T),className:"text-red-600 hover:text-red-700",title:"Rejeter la demande",children:n.jsx(sa,{className:"h-4 w-4"})})]}),T.status!=="pending"&&n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>P(T),title:"Voir les dtails",children:n.jsx(Hr,{className:"h-4 w-4"})})]})]},T.id)):n.jsx(rn,{children:n.jsx(vt,{colSpan:7,className:"text-center py-4",children:"Aucune demande de changement de type trouve."})})})]})})})]}),n.jsx(on,{open:u,onOpenChange:d,children:n.jsxs(Qr,{className:"sm:max-w-lg",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Documents"}),n.jsx(Ur,{children:p?`Documents soumis par ${p.user_name} pour la demande de changement de type`:"Vrification des documents soumis"})]}),n.jsxs("div",{className:"space-y-4 py-4 max-h-[60vh] overflow-y-auto",children:[((C=p==null?void 0:p.documents)==null?void 0:C.length)>0?p.documents.map((T,M)=>n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:T.name}),T.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:T.description})]}),n.jsx(Y,{variant:"ghost",size:"sm",asChild:!0,children:n.jsxs("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"})," Voir"]})})]}),n.jsxs("div",{className:"flex justify-between mt-4",children:[n.jsx(Ge,{variant:T.verified?"success":"outline",className:T.verified?"bg-green-100 text-green-800":"",children:T.verified?"Vrifi":"Non vrifi"}),p.status==="pending"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700",onClick:()=>{const z=p.documents.map((O,I)=>I===M?{...O,verified:!0}:O);v(O=>({...O,documents:z}))},disabled:T.verified,children:[n.jsx(xc,{className:"h-4 w-4 mr-1"})," Approuver"]}),n.jsxs(Y,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>{const z=p.documents.map((O,I)=>I===M?{...O,verified:!1,rejected:!0}:O);v(O=>({...O,documents:z}))},disabled:T.rejected,children:[n.jsx(sa,{className:"h-4 w-4 mr-1"})," Rejeter"]})]})]})]},T.id||M)):n.jsx("p",{className:"text-center text-muted-foreground",children:"Aucun document disponible"}),(p==null?void 0:p.status)==="rejected"&&(p==null?void 0:p.rejection_reason)&&n.jsxs(he,{className:"p-4 bg-red-50",children:[n.jsx("h4",{className:"font-medium",children:"Raison du rejet"}),n.jsx("p",{className:"text-sm mt-2",children:p.rejection_reason})]})]}),n.jsx(Bn,{children:n.jsx(Y,{onClick:()=>d(!1),children:"Fermer"})})]})}),n.jsx(on,{open:h,onOpenChange:m,children:n.jsxs(Qr,{className:"sm:max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Rejeter la demande"}),n.jsxs(Ur,{children:["Veuillez fournir une raison pour le rejet de la demande de ",p==null?void 0:p.user_name]})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx($e,{htmlFor:"rejection-reason",children:"Raison du rejet"}),n.jsx(ms,{id:"rejection-reason",placeholder:"Expliquez pourquoi la demande est rejete...",value:g,onChange:T=>y(T.target.value),rows:4})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),n.jsx(Y,{variant:"destructive",onClick:S,children:"Rejeter la demande"})]})]})})]})},gUe=()=>{var C,T;const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState(!1),[h,m]=x.useState(!1),[p,v]=x.useState(null),[g,y]=x.useState(""),j=t.filter(M=>{if(l!=="all"&&M.status!==l)return!1;if(a){const z=a.toLowerCase();return M.owner_name&&M.owner_name.toLowerCase().includes(z)||M.parcel_name&&M.parcel_name.toLowerCase().includes(z)||M.location&&M.location.toLowerCase().includes(z)}return!0}),_=x.useCallback(async()=>{try{i(!0);const M=await Je.listParcelSubmissions({status:l==="all"?null:l}),z=await Promise.all((M||[]).map(async O=>{let I="";if(O.owner_id){const{data:q}=await pe.from("users").select("full_name,email").eq("id",O.owner_id).single();I=(q==null?void 0:q.full_name)||(q==null?void 0:q.email)||I}return{id:O.id,parcel_id:O.parcel_id,parcel_name:O.reference,owner_id:O.owner_id,owner_name:I,location:O.location,area:O.surface?`${O.surface} m`:"",price:O.price?`${Number(O.price).toLocaleString()} FCFA`:"",status:O.status,submitted_at:O.created_at,approved_at:O.approved_at,rejected_at:O.rejected_at,rejection_reason:O.rejection_reason,documents:Array.isArray(O.documents)?O.documents.map(q=>({id:q.key,name:q.name||q.key,url:q.url||"#",verified:!!q.verified})):[]}}));r(z)}catch(M){console.error("Erreur chargement soumissions parcelles:",M),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les soumissions de parcelles"})}finally{i(!1)}},[e,l]);x.useEffect(()=>{_()},[_]),x.useEffect(()=>{const M=pe.channel("parcel_submissions_admin").on("postgres_changes",{event:"*",schema:"public",table:"parcel_submissions"},z=>{_()}).subscribe();return()=>{pe.removeChannel(M)}},[_]);const w=async M=>{try{const z=await Je.approveParcelSubmission(M.id,{});r(O=>O.map(I=>I.id===M.id?{...I,status:"approved",approved_at:z.approved_at}:I)),e({title:"Parcelle approuve",description:M.parcel_name})}catch(z){console.error("Erreur approbation:",z),e({variant:"destructive",title:"Erreur",description:"Impossible d'approuver"})}},A=M=>{v(M),y(""),m(!0)},S=async()=>{try{if(!p)return;const M=await Je.rejectParcelSubmission(p.id,{reason:g});r(z=>z.map(O=>O.id===p.id?{...O,status:"rejected",rejected_at:M.rejected_at,rejection_reason:g}:O)),e({title:"Soumission rejete",description:p.parcel_name}),m(!1),v(null)}catch(M){console.error("Erreur rejet:",M),e({variant:"destructive",title:"Erreur",description:"Rejet impossible"})}},P=M=>{v(M),d(!0)};return s&&t.length===0?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6 lg:p-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(jr,{className:"h-8 w-8"}),"Soumissions de Parcelles"]}),n.jsx("p",{className:"text-muted-foreground",children:"Grez les soumissions de parcelles par les utilisateurs et approuvez-les pour publication"})]}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx(De,{placeholder:"Rechercher par nom, propritaire ou lieu...",value:a,onChange:M=>o(M.target.value),className:"w-full"})}),n.jsxs(Ft,{value:l,onValueChange:c,children:[n.jsx(Dt,{className:"w-48",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"pending",children:"En attente"}),n.jsx(Ke,{value:"approved",children:"Approuv"}),n.jsx(Ke,{value:"rejected",children:"Rejet"})]})]}),n.jsx(Y,{variant:"outline",size:"icon",onClick:_,children:n.jsx(Ta,{className:"h-4 w-4"})})]})})}),n.jsxs(he,{children:[n.jsx(Ce,{className:"pb-0",children:n.jsx(ke,{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Parcelles"}),l==="pending"&&n.jsxs(Ge,{className:"bg-yellow-100 text-yellow-800",children:[t.filter(M=>M.status==="pending").length," en attente"]})]})})}),n.jsx(ve,{className:"p-0 pt-4",children:n.jsx("div",{className:"rounded-md border overflow-hidden",children:n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Parcelle"}),n.jsx(yt,{children:"Propritaire"}),n.jsx(yt,{children:"Localisation"}),n.jsx(yt,{children:"Surface"}),n.jsx(yt,{children:"Prix"}),n.jsx(yt,{children:"Images"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Date soumission"}),n.jsx(yt,{children:"Actions"})]})}),n.jsx(Ra,{children:j.length>0?j.map(M=>n.jsxs(rn,{children:[n.jsx(vt,{children:n.jsx("div",{className:"font-medium",children:M.parcel_name})}),n.jsx(vt,{children:M.owner_name}),n.jsx(vt,{children:M.location}),n.jsx(vt,{children:M.area}),n.jsx(vt,{children:M.price}),n.jsx(vt,{children:M.images&&n.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>P(M),className:"flex items-center gap-1",children:[n.jsx(kie,{className:"h-4 w-4"}),n.jsx("span",{children:M.images.length})]})}),n.jsxs(vt,{children:[M.status==="approved"&&n.jsx(Ge,{className:"bg-green-100 text-green-800",children:"Approuv"}),M.status==="pending"&&n.jsx(Ge,{className:"bg-yellow-100 text-yellow-800",children:"En attente"}),M.status==="rejected"&&n.jsx(Ge,{className:"bg-red-100 text-red-800",children:"Rejet"})]}),n.jsx(vt,{children:M.submitted_at?new Date(M.submitted_at).toLocaleDateString("fr-FR"):"Inconnue"}),n.jsxs(vt,{children:[M.status==="pending"&&n.jsxs("div",{className:"flex gap-1",children:[n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>w(M),className:"text-green-600 hover:text-green-700",title:"Approuver la soumission",children:n.jsx(xc,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>A(M),className:"text-red-600 hover:text-red-700",title:"Rejeter la parcelle",children:n.jsx(sa,{className:"h-4 w-4"})})]}),M.status!=="pending"&&n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>P(M),title:"Voir les dtails",children:n.jsx(Hr,{className:"h-4 w-4"})})]})]},M.id)):n.jsx(rn,{children:n.jsx(vt,{colSpan:9,className:"text-center py-4",children:"Aucune soumission de parcelle trouve."})})})]})})})]}),n.jsx(on,{open:u,onOpenChange:d,children:n.jsxs(Qr,{className:"sm:max-w-4xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Images et Documents"}),n.jsx(Ur,{children:p?`Images et documents soumis pour la parcelle "${p.parcel_name}"`:"Dtails de la soumission"})]}),n.jsx("div",{className:"space-y-6 py-4 max-h-[70vh] overflow-y-auto",children:p&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs(he,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Dtails de la parcelle"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Nom:"})," ",p.parcel_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Localisation:"})," ",p.location]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Surface:"})," ",p.area]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Prix:"})," ",p.price]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Propritaire:"})," ",p.owner_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Date de soumission:"})," ",new Date(p.submitted_at).toLocaleDateString("fr-FR")]}),p.status==="approved"&&p.approved_at&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Date d'approbation:"})," ",new Date(p.approved_at).toLocaleDateString("fr-FR")]}),p.status==="rejected"&&p.rejected_at&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Date de rejet:"})," ",new Date(p.rejected_at).toLocaleDateString("fr-FR")]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Statut:"}),n.jsx(Ge,{className:p.status==="approved"?"ml-2 bg-green-100 text-green-800":p.status==="pending"?"ml-2 bg-yellow-100 text-yellow-800":"ml-2 bg-red-100 text-red-800",children:p.status==="approved"?"Approuv":p.status==="pending"?"En attente":"Rejet"})]})]})]}),p.status==="rejected"&&p.rejection_reason&&n.jsxs(he,{className:"p-4 bg-red-50",children:[n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Raison du rejet"}),n.jsx("p",{children:p.rejection_reason})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Images"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(C=p.images)==null?void 0:C.map((M,z)=>n.jsxs(he,{className:"overflow-hidden",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:M.url,alt:`Image ${z+1} de la parcelle`,className:"w-full h-48 object-cover"}),n.jsx(Ge,{className:`absolute top-2 right-2 ${M.verified?"bg-green-100 text-green-800":"bg-gray-100"}`,children:M.verified?"Vrifie":"Non vrifie"})]}),n.jsxs("div",{className:"p-3 flex justify-between items-center",children:[n.jsxs("p",{className:"text-sm",children:["Image ",z+1]}),p.status==="pending"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700",onClick:()=>{const O=p.images.map((I,q)=>q===z?{...I,verified:!0}:I);v(I=>({...I,images:O}))},disabled:M.verified,children:n.jsx(xc,{className:"h-4 w-4"})}),n.jsx(Y,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>{const O=p.images.map((I,q)=>q===z?{...I,verified:!1,rejected:!0}:I);v(I=>({...I,images:O}))},disabled:M.rejected,children:n.jsx(sa,{className:"h-4 w-4"})})]})]})]},M.id||z))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Documents"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(T=p.documents)==null?void 0:T.map((M,z)=>n.jsxs(he,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:M.name}),M.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:M.description})]}),n.jsx(Y,{variant:"ghost",size:"sm",asChild:!0,children:n.jsxs("a",{href:M.url,target:"_blank",rel:"noopener noreferrer",children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"})," Voir"]})})]}),n.jsxs("div",{className:"flex justify-between mt-4",children:[n.jsx(Ge,{variant:M.verified?"success":"outline",className:M.verified?"bg-green-100 text-green-800":"",children:M.verified?"Vrifi":"Non vrifi"}),p.status==="pending"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700",onClick:()=>{const O=p.documents.map((I,q)=>q===z?{...I,verified:!0}:I);v(I=>({...I,documents:O}))},disabled:M.verified,children:[n.jsx(xc,{className:"h-4 w-4 mr-1"})," Approuver"]}),n.jsxs(Y,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>{const O=p.documents.map((I,q)=>q===z?{...I,verified:!1,rejected:!0}:I);v(I=>({...I,documents:O}))},disabled:M.rejected,children:[n.jsx(sa,{className:"h-4 w-4 mr-1"})," Rejeter"]})]})]})]},M.id||z))})]})]})}),n.jsx(Bn,{children:n.jsx(Y,{onClick:()=>d(!1),children:"Fermer"})})]})}),n.jsx(on,{open:h,onOpenChange:m,children:n.jsxs(Qr,{className:"sm:max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Rejeter la soumission"}),n.jsxs(Ur,{children:['Veuillez fournir une raison pour le rejet de la parcelle "',p==null?void 0:p.parcel_name,'"']})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx($e,{htmlFor:"rejection-reason",children:"Raison du rejet"}),n.jsx(ms,{id:"rejection-reason",placeholder:"Expliquez pourquoi la soumission est rejete...",value:g,onChange:M=>y(M.target.value),rows:4})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),n.jsx(Y,{variant:"destructive",onClick:S,children:"Rejeter la soumission"})]})]})})]})},xUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(""),{toast:o}=pt();x.useEffect(()=>{(async()=>{s(!0);const{data:u,error:d}=await pe.from("roles").select("*").order("name");t(u||[]),s(!1)})()},[]);const l=async c=>{if(c.preventDefault(),!i.trim())return;const{error:u}=await pe.from("roles").insert([{name:i.trim()}]);if(u)o({title:"Erreur",description:u.message,variant:"destructive"});else{a(""),o({title:"Rle ajout"});const{data:d}=await pe.from("roles").select("*").order("name");t(d||[])}};return n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des rles"}),n.jsxs("form",{onSubmit:l,className:"flex gap-2 mb-4",children:[n.jsx("input",{value:i,onChange:c=>a(c.target.value),className:"border rounded px-2 py-1 flex-1",placeholder:"Nouveau rle..."}),n.jsx(Y,{type:"submit",children:"Ajouter"})]}),r?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-2",children:e.length===0?n.jsx("p",{children:"Aucun rle."}):e.map(c=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:c.name})}),n.jsx(ve,{children:n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",c.id]})})]},c.id))})]})},vUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(""),{toast:o}=pt();x.useEffect(()=>{(async()=>{s(!0);const{data:u,error:d}=await pe.from("permissions").select("*").order("name");t(u||[]),s(!1)})()},[]);const l=async c=>{if(c.preventDefault(),!i.trim())return;const{error:u}=await pe.from("permissions").insert([{name:i.trim()}]);if(u)o({title:"Erreur",description:u.message,variant:"destructive"});else{a(""),o({title:"Permission ajoute"});const{data:d}=await pe.from("permissions").select("*").order("name");t(d||[])}};return n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Gestion des permissions"}),n.jsxs("form",{onSubmit:l,className:"flex gap-2 mb-4",children:[n.jsx("input",{value:i,onChange:c=>a(c.target.value),className:"border rounded px-2 py-1 flex-1",placeholder:"Nouvelle permission..."}),n.jsx(Y,{type:"submit",children:"Ajouter"})]}),r?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-2",children:e.length===0?n.jsx("p",{children:"Aucune permission."}):e.map(c=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:c.name})}),n.jsx(ve,{children:n.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",c.id]})})]},c.id))})]})},yUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState([]),[i,a]=x.useState(!0),{toast:o}=pt();x.useEffect(()=>{(async()=>{a(!0);const{data:u}=await pe.from("users").select("id, full_name, email, role"),{data:d}=await pe.from("roles").select("*");t(u||[]),s(d||[]),a(!1)})()},[]);const l=async(c,u)=>{const{error:d}=await pe.from("users").update({role:u}).eq("id",c);d?o({title:"Erreur",description:d.message,variant:"destructive"}):(t(h=>h.map(m=>m.id===c?{...m,role:u}:m)),o({title:"Rle mis  jour"}))};return n.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Affectation des rles utilisateurs"}),i?n.jsx(Tt,{}):n.jsx("div",{className:"space-y-3",children:e.length===0?n.jsx("p",{children:"Aucun utilisateur."}):e.map(c=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:[c.full_name," ",n.jsxs("span",{className:"text-xs text-gray-400",children:["(",c.email,")"]})]})}),n.jsx(ve,{children:n.jsxs("select",{value:c.role||"",onChange:u=>l(c.id,u.target.value),className:"border rounded px-2 py-1",children:[n.jsx("option",{value:"",children:"Aucun"}),r.map(u=>n.jsx("option",{value:u.name,children:u.name},u.id))]})})]},c.id))})]})},bUe=[{title:"Demandes  Traiter",value:"5",icon:Cr,trend:"+2",trendColor:"text-yellow-500",unit:"nouvelles"},{title:"Parcelles Assignes",value:"12",icon:jr,trend:"Stable",trendColor:"text-neutral-500",unit:"actives"},{title:"Visites Planifies (Semaine)",value:"4",icon:dz,trend:"+1",trendColor:"text-green-500",unit:"visites"},{title:"Taux de Conversion (Mois)",value:"15%",icon:hse,trend:"+2%",trendColor:"text-green-500",unit:""}],jUe=()=>{const{toast:e}=pt(),[t,r]=x.useState("requests"),[s,i]=x.useState([]),[a,o]=x.useState([]),[l,c]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const{data:{user:p}}=await pe.auth.getUser(),{data:v}=await pe.from("parcels").select("*").eq("agent_assigned",p.id).limit(12),{data:g}=await pe.from("requests").select("*").or(`agent_assigned.eq.${p.id},agent_assigned.is.null`).limit(5);i(v||[]),o(g||[])}catch(p){console.error("Erreur chargement donnes agent:",p),i([]),o([])}finally{c(!1)}})()},[]);const u=async(m,p)=>{try{await Je.updateRequestStatus(m.id,p)&&(o(g=>g.map(y=>y.id===m.id?{...y,status:p}:y)),e({title:"Statut mis  jour",description:`Demande ${m.id} -> ${p}`}))}catch{e({variant:"destructive",title:"Erreur",description:"Impossible de mettre  jour."})}},d=m=>{switch(m){case"Valide":case"Traite":return"success";case"Rejete":return"destructive";case"Nouvelle":return"warning";case"En cours":default:return"secondary"}},h=()=>{switch(t){case"requests":return n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Mes Demandes Clients"}),n.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap items-start sm:items-center gap-2 mt-2",children:[n.jsx(De,{type:"search",placeholder:"Rechercher par client, parcelle...",className:"max-w-xs"}),n.jsxs(Ft,{children:[n.jsx(Dt,{className:"w-full sm:w-[180px]",children:n.jsx(zt,{placeholder:"Filtrer par type"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous types"}),n.jsx(Ke,{value:"info",children:"Info"}),n.jsx(Ke,{value:"visit",children:"Visite"}),n.jsx(Ke,{value:"buy",children:"Achat"})]})]}),n.jsxs(Ft,{children:[n.jsx(Dt,{className:"w-full sm:w-[180px]",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous statuts"}),n.jsx(Ke,{value:"nouvelle",children:"Nouvelle"}),n.jsx(Ke,{value:"en_cours",children:"En cours"}),n.jsx(Ke,{value:"traitee",children:"Traite"})]})]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Client"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Parcelle"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Type"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:a.map(m=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2",children:m.user_name}),n.jsx("td",{className:"p-2 text-primary hover:underline",children:n.jsx(dt,{to:`/parcelles/${m.parcel_id}`,children:m.parcel_id})}),n.jsx("td",{className:"p-2",children:m.request_type}),n.jsx("td",{className:"p-2",children:n.jsx(Ge,{variant:d(m.status),children:m.status})}),n.jsxs("td",{className:"p-2 space-x-1",children:[n.jsx(Y,{variant:"ghost",size:"icon",title:"Valider",onClick:()=>u(m,"Traite"),children:n.jsx(Mu,{className:"h-4 w-4 text-green-600"})}),n.jsx(Y,{variant:"ghost",size:"icon",title:"Rejeter",onClick:()=>u(m,"Rejete"),children:n.jsx(Ii,{className:"h-4 w-4 text-red-600"})})]})]},m.id))})]})})})]});case"parcels":return n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Mes Parcelles Assignes"})}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(m=>n.jsxs(he,{children:[n.jsxs(Ce,{className:"p-4",children:[n.jsx(ke,{className:"text-base text-primary hover:underline",children:n.jsx(dt,{to:`/parcelles/${m.id}`,children:m.name||m.location_name})}),n.jsx(jt,{children:m.zone})]}),n.jsxs(ve,{className:"p-4 pt-0 text-xs",children:[n.jsxs("p",{children:["Statut: ",n.jsx(Ge,{variant:m.status==="Disponible"?"success":"secondary",children:m.status})]}),n.jsxs("p",{children:["Surface: ",m.area_sqm," m"]}),n.jsxs("p",{children:["Prix: ",new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF"}).format(m.price)]}),n.jsx(Y,{size:"xs",variant:"outline",className:"mt-2 w-full",onClick:()=>handleSimulatedAction(`Grer la parcelle ${m.id}`),children:"Grer"})]})]},m.id))})})]});default:return null}};return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto py-8 px-4 space-y-6",children:[n.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-primary flex items-center",children:[n.jsx(dh,{className:"h-8 w-8 mr-3 text-cyan-600"}),"Tableau de Bord Agent Foncier"]}),n.jsx("p",{className:"text-muted-foreground",children:"Grez vos clients, vos parcelles et vos performances."})]})}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:bUe.map((m,p)=>n.jsxs(he,{className:"hover:shadow-lg transition-shadow border-l-4 border-cyan-500",children:[n.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(ke,{className:"text-sm font-medium",children:m.title}),n.jsx(m.icon,{className:"h-5 w-5 text-cyan-600"})]}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[m.value," ",n.jsx("span",{className:"text-sm text-muted-foreground",children:m.unit})]}),m.trend&&n.jsx("p",{className:`text-xs ${m.trendColor}`,children:m.trend})]})]},p))}),n.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:n.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:["requests","parcels"].map(m=>n.jsx("button",{onClick:()=>r(m),className:`${t===m?"border-cyan-500 text-cyan-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm capitalize`,children:m==="requests"?"Demandes Clients":"Mes Parcelles"},m))})}),n.jsx("div",{className:"mt-6",children:h()})]})},wUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(""),[l,c]=x.useState("all");x.useEffect(()=>{(async()=>{try{const{data:{user:m}}=await pe.auth.getUser(),{data:p}=await pe.from("users").select("*").eq("agent_assigned",m.id).order("created_at",{ascending:!1});r(p||[])}catch(m){console.error("Erreur chargement clients:",m),r([])}finally{i(!1)}})()},[]);const u=h=>{e({title:"Action Simule",description:h})},d=t.filter(h=>h.name.toLowerCase().includes(a.toLowerCase())&&(l==="all"||h.status.toLowerCase()===l));return s?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Mes Clients"}),n.jsxs(Y,{onClick:()=>u("Ouverture du formulaire d'ajout de client."),children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter un Client"]})]}),n.jsx(he,{children:n.jsxs(Ce,{children:[n.jsx(ke,{children:"Filtres"}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher un client...",className:"pl-8",value:a,onChange:h=>o(h.target.value)})]}),n.jsxs(Ft,{value:l,onValueChange:c,children:[n.jsx(Dt,{className:"w-[180px]",children:n.jsx(zt,{placeholder:"Statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"actif",children:"Actif"}),n.jsx(Ke,{value:"en attente",children:"En attente"}),n.jsx(Ke,{value:"archiv",children:"Archiv"})]})]})]})]})}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:d.map(h=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(ke,{children:h.name}),n.jsx(jt,{children:h.type})]}),n.jsx(Ge,{variant:h.status==="Actif"?"success":"secondary",children:h.status})]})}),n.jsxs(ve,{children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernier contact: ",h.lastContact]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Parcelles assignes: ",h.assignedParcels.join(", ")||"Aucune"]}),n.jsxs("div",{className:"flex space-x-2 mt-4",children:[n.jsx(Y,{variant:"outline",size:"icon",onClick:()=>u(`Contacter ${h.name} par message.`),children:n.jsx(Nh,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"outline",size:"icon",onClick:()=>u(`Appeler ${h.name}.`),children:n.jsx(Sh,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"outline",size:"icon",onClick:()=>u(`Modifier le profil de ${h.name}.`),children:n.jsx(Ah,{className:"h-4 w-4"})})]})]})]},h.id))}),d.length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucun client trouv."})]})},_Ue=()=>{pt();const[e,t]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState("");x.useEffect(()=>{(async()=>{try{const{data:{user:c}}=await pe.auth.getUser(),{data:u}=await pe.from("parcels").select("*").eq("agent_assigned",c.id).order("created_at",{ascending:!1});t(u||[])}catch(c){console.error("Erreur chargement parcelles:",c),t([])}finally{s(!1)}})()},[]);const o=e.filter(l=>l.name.toLowerCase().includes(i.toLowerCase())||l.id.toLowerCase().includes(i.toLowerCase()));return r?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Mes Parcelles Assignes"}),n.jsxs(Y,{disabled:!0,title:"Ajout direct dsactiv (crez via interface admin ou migration)",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter une Parcelle"]})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher une parcelle...",className:"pl-8",value:i,onChange:l=>a(l.target.value)})]})}),n.jsxs(ve,{children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"ID"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Nom"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Client Associ"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:o.map(l=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-mono",children:l.id}),n.jsx("td",{className:"p-2 font-medium",children:l.name}),n.jsx("td",{className:"p-2",children:l.client||"Aucun"}),n.jsx("td",{className:"p-2",children:n.jsx(Ge,{children:l.status})}),n.jsxs("td",{className:"p-2 text-right space-x-1",children:[n.jsx(Y,{asChild:!0,variant:"ghost",size:"icon",children:n.jsx(dt,{to:`/parcelles/${l.id}`,children:n.jsx(Hr,{className:"h-4 w-4"})})}),n.jsx(Y,{variant:"ghost",size:"icon",disabled:!0,title:"Modification bientt",children:n.jsx(Ah,{className:"h-4 w-4"})}),n.jsx(Y,{variant:"ghost",size:"icon",disabled:!0,title:"Planification bientt",children:n.jsx(ck,{className:"h-4 w-4"})})]})]},l.id))})]})}),o.length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Aucune parcelle trouve."})]})]})]})},NUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState("");x.useEffect(()=>{(async()=>{try{const{data:{user:p}}=await pe.auth.getUser(),{data:v}=await pe.from("agent_tasks").select("*").eq("agent_id",p.id).order("created_at",{ascending:!1});r(v||[])}catch(p){console.error("Erreur chargement tches:",p),r([])}finally{i(!1)}})()},[]);const l=async(m,p)=>{try{const{data:v,error:g}=await pe.from("agent_tasks").update({completed:!p,updated_at:new Date().toISOString()}).eq("id",m).select().single();if(g)throw g;r(t.map(y=>y.id===m?v:y))}catch{e({variant:"destructive",title:"Erreur",description:"Impossible de mettre  jour la tche."})}},c=async()=>{if(!a.trim()){e({variant:"destructive",title:"Erreur",description:"Le titre de la tche ne peut pas tre vide."});return}try{const{data:{user:m}}=await pe.auth.getUser(),p={agent_id:m.id,title:a.trim(),priority:"Moyenne",due_date:new Date().toISOString().split("T")[0],completed:!1,created_at:new Date().toISOString()},{data:v,error:g}=await pe.from("agent_tasks").insert([p]).select().single();if(g)throw g;r([v,...t]),o(""),e({title:"Tche ajoute",description:p.title})}catch{e({variant:"destructive",title:"Erreur",description:"Impossible d'ajouter la tche."})}},u=m=>{switch(m){case"Haute":return"destructive";case"Moyenne":return"warning";default:return"secondary"}};if(s)return n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})});const d=t.filter(m=>!m.completed),h=t.filter(m=>m.completed);return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Mes Tches"}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Ajouter une nouvelle tche"})}),n.jsx(ve,{children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(De,{placeholder:"Ex: Appeler le client pour le dossier...",value:a,onChange:m=>o(m.target.value),onKeyPress:m=>m.key==="Enter"&&c()}),n.jsxs(Y,{onClick:c,children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter"]})]})})]}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:["Tches  faire (",d.length,")"]})}),n.jsx(ve,{children:n.jsx("ul",{className:"space-y-3",children:d.map(m=>n.jsxs("li",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-muted/50",children:[n.jsx(rm,{id:`task-${m.id}`,checked:m.completed,onCheckedChange:()=>l(m.id,m.completed)}),n.jsxs("label",{htmlFor:`task-${m.id}`,className:"flex-grow cursor-pointer",children:[n.jsx("span",{className:st("font-medium",m.completed&&"line-through text-muted-foreground"),children:m.title}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["chance: ",m.dueDate]})]}),n.jsx(Ge,{variant:u(m.priority),children:m.priority})]},m.id))})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:["Tches termines (",h.length,")"]})}),n.jsx(ve,{children:n.jsx("ul",{className:"space-y-3",children:h.map(m=>n.jsxs("li",{className:"flex items-center space-x-3 p-2 rounded-md",children:[n.jsx(rm,{id:`task-${m.id}`,checked:m.completed,onCheckedChange:()=>l(m.id,m.completed)}),n.jsx("label",{htmlFor:`task-${m.id}`,className:"flex-grow cursor-pointer",children:n.jsx("span",{className:"line-through text-muted-foreground",children:m.title})}),n.jsx(Qt,{className:"h-4 w-4 text-green-500"})]},m.id))})})]})]})]})},f$={created:{label:"Cre",icon:Cr,color:"text-blue-500"},attributed:{label:"Attribue",icon:oi,color:"text-green-600"},validated:{label:"Valide par notaire",icon:Qt,color:"text-green-500"},archived:{label:"Archive",icon:ln,color:"text-gray-400"}},LY=({history:e=[]})=>e.length?n.jsx("ol",{className:"relative border-l border-gray-200 dark:border-gray-700 ml-4",children:e.map((t,r)=>{const s=f$[t.status]||f$.created,i=s.icon;return n.jsxs("li",{className:"mb-6 ml-6",children:[n.jsx("span",{className:`absolute -left-3 flex items-center justify-center w-6 h-6 rounded-full bg-white border ${s.color}`,children:n.jsx(i,{className:`h-4 w-4 ${s.color}`})}),n.jsx("h3",{className:"font-semibold leading-tight",children:s.label}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t.date?new Date(t.date).toLocaleString("fr-FR"):""}),t.description&&n.jsx("p",{className:"text-sm mt-1",children:t.description})]},r)})}):n.jsx("div",{className:"text-muted-foreground text-sm",children:"Aucune tape enregistre."}),SUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!1),[a,o]=x.useState(null),[l,c]=x.useState(null),[u,d]=x.useState({favoritesCounted:0,savedSearches:0,transactionsInProgress:0,securityScore:0}),[h,m]=x.useState([]),[p,v]=x.useState([]),[g,y]=x.useState([]),[j,_]=x.useState(!0),[w,A]=x.useState(null),[S,P]=x.useState(!1),[C,T]=x.useState({commune:"",department:"",region:"",area_sqm:"",message:""}),[M,z]=x.useState(!1),[O,I]=x.useState(!1);if(x.useEffect(()=>{q(),F()},[]),x.useEffect(()=>{(async()=>{if(l)try{const Ee=(await Je.getParcels()).filter(Pe=>Pe.beneficiary_id===l.id);r(Ee)}catch{}})()},[l]),l&&(l.type==="Particulier"||l.type==="particulier")&&l.verification_status!=="verified")return n.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen py-12",children:n.jsxs("div",{className:"bg-white rounded shadow p-8 max-w-md w-full text-center",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Votre compte est en attente de validation"}),n.jsx("p",{className:"mb-4",children:"Vous avez bien soumis vos documents. L'accs au tableau de bord sera dbloqu ds que l'administrateur aura valid votre compte."}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Statut actuel : ",n.jsx("span",{className:"font-semibold",children:l.verification_status==="pending"?"En attente":"Non vrifi"})]}),n.jsx("p",{className:"mt-4 text-xs text-gray-400",children:"Contactez le support si la validation prend trop de temps."})]})});x.useEffect(()=>{if(!l)return;const Z=pe.channel("favorites_changes").on("postgres_changes",{event:"*",schema:"public",table:"favorites",filter:`user_id=eq.${l.id}`},()=>F());return Z.subscribe(),()=>{try{pe.removeChannel(Z)}catch{}}},[l]);const q=async()=>{try{const{data:{user:Z},error:je}=await pe.auth.getUser();if(je)throw je;const{data:Ee}=await pe.from("users").select("*").eq("id",Z.id).single();c({...Z,...Ee});const Pe=await $f.analyzeUserFraud(Z.id,{loginHistory:!0,transactionHistory:!0,profileCompleteness:!0});d(de=>({...de,securityScore:Math.round((1-Pe.riskScore)*100)}))}catch(Z){console.error("Erreur chargement utilisateur:",Z)}},F=async()=>{_(!0);try{const{data:{user:Z}}=await pe.auth.getUser(),je=await Je.getUserFavorites(Z.id),{data:Ee}=await pe.from("saved_searches").select("*").eq("user_id",Z.id),{data:Pe}=await pe.from("transactions").select("*, parcels(*)").or(`buyer_id.eq.${Z.id},seller_id.eq.${Z.id}`).eq("status","in_progress"),{data:de}=await pe.from("user_activities").select("*").eq("user_id",Z.id).order("created_at",{ascending:!1}).limit(10),be=await W(Z.id,je),Ve=await ne(Z.id);d({favoritesCounted:(je==null?void 0:je.length)||0,savedSearches:(Ee==null?void 0:Ee.length)||0,transactionsInProgress:(Pe==null?void 0:Pe.length)||0,securityScore:u.securityScore}),m(de||[]),v(be),y(Ve)}catch(Z){console.error("Erreur chargement dashboard:",Z)}finally{_(!1)}},W=async(Z,je)=>{try{const Ee=je==null?void 0:je.map(be=>{var Ve,ze,Xe,et;return{location:(Ve=be.parcels)==null?void 0:Ve.location,price:(ze=be.parcels)==null?void 0:ze.price,type:(Xe=be.parcels)==null?void 0:Xe.type,surface:(et=be.parcels)==null?void 0:et.surface}});if(!Ee||Ee.length===0)return await V();const{data:Pe}=await pe.from("parcels").select("*").eq("status","available").limit(6);return Pe.map(be=>{let Ve=0;Ee.forEach(Oe=>{be.location.includes(Oe.location.split(",")[0])&&(Ve+=.3)});const ze=Ee.reduce((Oe,it)=>Oe+it.price,0)/Ee.length;Math.abs(be.price-ze)/ze<.2&&(Ve+=.3);const et=Ee.reduce((Oe,it)=>Oe+it.surface,0)/Ee.length;return Math.abs(be.surface-et)/et<.3&&(Ve+=.2),be.verification_status==="verified"&&(Ve+=.2),{...be,aiScore:Ve}}).sort((be,Ve)=>Ve.aiScore-be.aiScore).slice(0,4)}catch(Ee){return console.error("Erreur recommandations IA:",Ee),[]}},V=async()=>{const{data:Z}=await pe.from("parcels").select("*").eq("status","available").eq("verification_status","verified").order("created_at",{ascending:!1}).limit(4);return Z||[]},ne=async Z=>{try{const{data:je}=await pe.from("fraud_alerts").select("*").eq("target_id",Z).eq("status","active").order("created_at",{ascending:!1}).limit(3);return je||[]}catch(je){return console.error("Erreur alertes scurit:",je),[]}},G=Z=>{switch(Z){case"view_parcel":return Hr;case"favorite_added":return Kp;case"search_saved":return wr;case"transaction_started":return w6;case"document_uploaded":return Cr;default:return Nl}},K=Z=>{var je,Ee,Pe;switch(Z.action_type){case"view_parcel":return`Parcelle visualise: ${((je=Z.details)==null?void 0:je.parcel_reference)||"Rf. inconnue"}`;case"favorite_added":return"Parcelle ajoute aux favoris";case"search_saved":return`Recherche sauvegarde: ${((Ee=Z.details)==null?void 0:Ee.search_name)||"Sans nom"}`;case"transaction_started":return"Transaction initie";case"document_uploaded":return`Document tlcharg: ${((Pe=Z.details)==null?void 0:Pe.document_type)||"Type inconnu"}`;default:return Z.description||"Activit inconnue"}},ee=async()=>{try{const{data:{user:Z}}=await pe.auth.getUser(),je=await $f.analyzeUserFraud(Z.id,{profileAnalysis:!0,behaviorAnalysis:!0,transactionAnalysis:!0,documentAnalysis:!0});e({title:"Analyse de scurit termine",description:`Score de scurit: ${Math.round((1-je.riskScore)*100)}%`}),d(Ee=>({...Ee,securityScore:Math.round((1-je.riskScore)*100)}))}catch(Z){console.error("Erreur analyse scurit:",Z),e({variant:"destructive",title:"Erreur",description:"Impossible d'effectuer l'analyse de scurit"})}},xe=async Z=>{if(l)try{A(Z),await Je.isParcelFavorite(l.id,Z)?(await Je.removeFromFavorites(l.id,Z),e({title:"Retir des favoris"})):(await Je.addToFavorites(l.id,Z),e({title:"Ajout aux favoris"})),F()}catch(je){console.error(je),e({variant:"destructive",title:"Erreur",description:"Impossible de mettre  jour les favoris"})}finally{A(null)}},[B,X]=x.useState(""),[ie,me]=x.useState([]),ye=(Array.isArray(u.transactionsInProgress)?u.transactionsInProgress:Array.isArray(transactions)?transactions:[]).filter(Z=>{var je;return B?(((je=Z.parcels)==null?void 0:je.reference)||"").toLowerCase().includes(B.toLowerCase())||(Z.status||"").toLowerCase().includes(B.toLowerCase()):!0});function Ne(){if(!ye.length)return;const je=[["ID","Rfrence","Montant","Statut","Date"],...ye.filter(be=>ie.length===0||ie.includes(be.id)).map(be=>{var Ve;return[be.id,((Ve=be.parcels)==null?void 0:Ve.reference)||"",be.amount||"",be.status||"",be.created_at?new Date(be.created_at).toLocaleDateString("fr-FR"):""]})].map(be=>be.map(Ve=>'"'+(Ve||"")+'"').join(",")).join(`
`),Ee=new Blob([je],{type:"text/csv"}),Pe=URL.createObjectURL(Ee),de=document.createElement("a");de.href=Pe,de.download="transactions.csv",de.click()}function le(){alert("Annulation en masse non implmente (dmo)")}function Q(){alert("Relance en masse non implmente (dmo)")}function J(Z){alert("Annulation transaction "+Z+" non implmente (dmo)")}function se(Z){alert("Relance transaction "+Z+" non implmente (dmo)")}return n.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Bonjour ",(l==null?void 0:l.full_name)||"Utilisateur"," "]}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Votre tableau de bord personnel scuris par IA anti-fraude"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(Y,{onClick:ee,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(ns,{className:"h-4 w-4 mr-2"}),"Vrifier la Scurit"]}),n.jsxs(Y,{variant:"outline",onClick:()=>z(!0),children:[n.jsx(jr,{className:"h-4 w-4 mr-2"}),"Demande Terrain Mairie"]})]})]}),n.jsxs(he,{className:"mt-8",children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Mes transactions en cours"})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"mb-2 flex gap-2 items-center",children:[n.jsx("input",{type:"text",placeholder:"Recherche...",value:B||"",onChange:Z=>X(Z.target.value),className:"max-w-xs border rounded px-2 py-1 text-sm"}),n.jsx(Y,{size:"sm",onClick:()=>Ne(),disabled:ye.length===0,children:"Exporter CSV"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>me(ye.map(Z=>Z.id)),disabled:ye.length===0,children:"Tout slectionner"}),n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>me([]),disabled:ie.length===0,children:"Dslectionner"}),n.jsx(Y,{size:"sm",className:"bg-red-600 text-white",disabled:ie.length===0,onClick:()=>le(),children:"Annuler slection"}),n.jsx(Y,{size:"sm",className:"bg-blue-600 text-white",disabled:ie.length===0,onClick:()=>Q(),children:"Relancer slection"})]}),ye.length===0?n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune transaction en cours"}):n.jsx("div",{className:"space-y-3",children:ye.map(Z=>{var je,Ee;return n.jsxs("div",{className:`border rounded p-3 text-sm ${ie.includes(Z.id)?"bg-blue-50":""}`,children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("input",{type:"checkbox",checked:ie.includes(Z.id),onChange:Pe=>{me(de=>Pe.target.checked?[...de,Z.id]:de.filter(be=>be!==Z.id))}}),n.jsxs("span",{className:"font-medium",children:["#",Z.id]}),n.jsx(Ge,{variant:Z.status==="in_progress"?"secondary":Z.status==="completed"?"success":"outline",children:Z.status})]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[(je=Z.parcels)==null?void 0:je.reference,"  ",(Ee=Z.amount)==null?void 0:Ee.toLocaleString()," XOF"]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>{o(Z.parcels),i(!0)},children:"Timeline"}),Z.status==="in_progress"&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{size:"xs",variant:"destructive",onClick:()=>J(Z.id),children:"Annuler"}),n.jsx(Y,{size:"xs",variant:"outline",onClick:()=>se(Z.id),children:"Relancer"})]})]})]},Z.id)})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"mt-10",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Mes parcelles attribues"})}),n.jsx(ve,{children:t.length===0?n.jsx("div",{className:"text-muted-foreground text-sm",children:"Aucune parcelle attribue pour linstant."}):n.jsx("div",{className:"space-y-6",children:t.map(Z=>n.jsxs("div",{className:"border rounded p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:Z.reference}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[Z.location_name,"  ",Z.zone]}),n.jsxs("div",{className:"text-xs",children:["Surface : ",Z.area_sqm," m"]})]}),n.jsxs("div",{className:"flex gap-2 mt-2 md:mt-0",children:[n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>{o(Z),i(!0)},children:"Voir timeline"}),Array.isArray(Z.documents)&&Z.documents.length>0&&n.jsx(Y,{size:"sm",variant:"outline",onClick:()=>window.open(Z.documents[0].url,"_blank"),children:"Voir documents"})]})]}),Array.isArray(Z.documents)&&Z.documents.length>0&&n.jsx("div",{className:"mt-2",children:n.jsx(p3,{documents:Z.documents})})]},Z.id))})})]})}),s&&a&&n.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-lg relative p-6",children:[n.jsx("button",{className:"absolute top-2 right-2 p-1 text-muted-foreground hover:text-foreground",onClick:()=>i(!1),children:n.jsx("span",{className:"text-lg",children:""})}),n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Historique de la parcelle ",a.reference]}),n.jsx(LY,{history:(()=>{const Z=a,je=[];return Z.created_at&&je.push({status:"created",date:Z.created_at,description:"Parcelle cre"}),Z.status==="Attribue"&&Z.beneficiary_id&&je.push({status:"attributed",date:Z.updated_at,description:"Attribue  vous"}),(Z.status==="Valide"||Z.validated_by_notary)&&je.push({status:"validated",date:Z.validated_at,description:"Valide par notaire"}),(Z.status==="Archive"||Z.archived)&&je.push({status:"archived",date:Z.archived_at,description:"Parcelle archive"}),je})()})]})}),n.jsx(he,{className:"border-l-4 border-blue-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mes Favoris"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:u.favoritesCounted})]}),n.jsx(Kp,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{className:"border-l-4 border-green-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recherches"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:u.savedSearches})]}),n.jsx(wr,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{className:"border-l-4 border-orange-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Transactions"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:u.transactionsInProgress})]}),n.jsx(w6,{className:"h-8 w-8 text-orange-500"})]})})}),n.jsx(he,{className:"border-l-4 border-purple-500",children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Scurit"}),n.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[u.securityScore,"%"]})]}),n.jsx(ns,{className:"h-8 w-8 text-purple-500"})]})})})]}),g.length>0&&n.jsxs(he,{className:"border-red-200 bg-red-50",children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2 text-red-700",children:[n.jsx(kr,{className:"h-5 w-5"}),"Alertes de Scurit"]})}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-3",children:g.map(Z=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-red-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(kr,{className:"h-4 w-4 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:Z.alert_type}),n.jsx("p",{className:"text-sm text-red-600",children:Z.description})]})]}),n.jsx(Ge,{className:"bg-red-100 text-red-800",children:Z.risk_level})]},Z.id))})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(yj,{className:"h-5 w-5 text-yellow-500"}),"Recommandations IA Personnalises"]})}),n.jsx(ve,{children:j?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):p.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(jr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-gray-500",children:"Aucune recommendation disponible"}),n.jsx("p",{className:"text-sm text-gray-400",children:"Ajoutez des favoris pour recevoir des suggestions"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(Z=>{var je;return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-semibold text-sm",children:Z.reference}),Z.aiScore&&n.jsxs(Ge,{className:"bg-green-100 text-green-800",children:[Math.round(Z.aiScore*100),"% match"]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Z.location}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"font-bold text-blue-600",children:[(je=Z.price)==null?void 0:je.toLocaleString()," FCFA"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[Z.surface," m"]})]}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsxs(Y,{size:"sm",variant:"outline",className:"flex-1",children:[n.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Voir"]}),n.jsx(Y,{size:"sm",variant:w===Z.id?"secondary":"outline",disabled:w===Z.id,onClick:()=>xe(Z.id),children:n.jsx(Kp,{className:`h-3 w-3 ${w===Z.id?"animate-pulse":""}`})})]})]},Z.id)})})})]})}),n.jsx("div",{children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(ln,{className:"h-5 w-5 text-blue-500"}),"Activit Rcente"]})}),n.jsx(ve,{children:h.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Nl,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune activit rcente"})]}):n.jsx("div",{className:"space-y-3",children:h.slice(0,5).map(Z=>{const je=G(Z.action_type);return n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-1 rounded-full bg-blue-100",children:n.jsx(je,{className:"h-3 w-3 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:K(Z)}),n.jsx("p",{className:"text-xs text-gray-500",children:new Date(Z.created_at).toLocaleDateString("fr-FR")})]})]},Z.id)})})})]})})]}),n.jsx(V0,{userRole:"particulier",dashboardContext:{userId:l==null?void 0:l.id,userType:"particulier",securityLevel:"standard"}}),n.jsx(bx,{userRole:"particulier",context:{userId:l==null?void 0:l.id,userPreferences:{favorites:u.favoritesCounted,searches:u.savedSearches}}})]}),n.jsx(GU,{isOpen:O,onClose:()=>I(!1),onSuccess:()=>{e({title:"Demande soumise",description:"Votre demande de transition vers vendeur a t soumise avec succs"}),I(!1)}}),M&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative",children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:()=>!S&&z(!1),children:""}),n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Nouvelle Demande Municipale"}),n.jsxs("form",{onSubmit:async Z=>{if(Z.preventDefault(),!!l)try{P(!0);const je=await Je.createMunicipalRequest({requesterId:l.id,region:C.region,department:C.department,commune:C.commune,requestType:"allocation_terrain",areaSqm:C.area_sqm?Number(C.area_sqm):null,message:C.message});e({title:"Demande soumise",description:(je==null?void 0:je.reference)||"Rfrence gnre"}),z(!1),T({commune:"",department:"",region:"",area_sqm:"",message:""})}catch(je){console.error(je),e({variant:"destructive",title:"Erreur",description:"Soumission impossible"})}finally{P(!1)}},className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Commune *"}),n.jsx("input",{className:"w-full border rounded px-2 py-2 text-sm",value:C.commune,onChange:Z=>T(je=>({...je,commune:Z.target.value})),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Dpartement"}),n.jsx("input",{className:"w-full border rounded px-2 py-2 text-sm",value:C.department,onChange:Z=>T(je=>({...je,department:Z.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Rgion"}),n.jsx("input",{className:"w-full border rounded px-2 py-2 text-sm",value:C.region,onChange:Z=>T(je=>({...je,region:Z.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Surface (m)"}),n.jsx("input",{type:"number",min:"0",className:"w-full border rounded px-2 py-2 text-sm",value:C.area_sqm,onChange:Z=>T(je=>({...je,area_sqm:Z.target.value}))})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium mb-1",children:"Message (motif)"}),n.jsx("textarea",{rows:4,className:"w-full border rounded px-2 py-2 text-sm",value:C.message,onChange:Z=>T(je=>({...je,message:Z.target.value}))})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx(Y,{type:"button",variant:"ghost",disabled:S,onClick:()=>z(!1),children:"Annuler"}),n.jsx(Y,{type:"submit",disabled:S,children:S?"Soumission...":"Soumettre"})]})]})]})})]})},AUe=({onSubmit:e,users:t=[],loading:r=!1})=>{const[s,i]=x.useState(""),[a,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,m]=x.useState(""),[p,v]=x.useState([]),[g,y]=x.useState(""),{toast:j}=pt(),_=s?`md${s.toUpperCase().replace(/\s/g,"")}${Math.floor(1e3+Math.random()*9e3)}`:"",w=A=>{if(A.preventDefault(),!s||!a||!l||!h){j({title:"Champs obligatoires manquants",description:"Veuillez remplir tous les champs requis.",variant:"destructive"});return}e&&e({reference:_,zone:s,location_name:a,area_sqm:l,description:u,beneficiary_id:h,documents:p,coordinates:g,status:"Attribue",owner_type:"Mairie",legal_status:"municipal"})};return n.jsxs("form",{onSubmit:w,className:"space-y-4 max-w-2xl mx-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Zone *"}),n.jsx(De,{value:s,onChange:A=>i(A.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Localisation *"}),n.jsx(De,{value:a,onChange:A=>o(A.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Surface (m) *"}),n.jsx(De,{type:"number",value:l,onChange:A=>c(A.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Bnficiaire *"}),n.jsxs("select",{value:h,onChange:A=>m(A.target.value),required:!0,className:"w-full border rounded px-2 py-1",children:[n.jsx("option",{value:"",children:"Slectionner un bnficiaire"}),t.map(A=>n.jsx("option",{value:A.id,children:A.full_name||A.email},A.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Description"}),n.jsx(ms,{value:u,onChange:A=>d(A.target.value)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Coordonnes gographiques"}),n.jsx(De,{value:g,onChange:A=>y(A.target.value),placeholder:"Latitude, Longitude"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Documents officiels"}),n.jsx(De,{type:"file",multiple:!0,onChange:A=>v([...A.target.files])})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium mb-1",children:"Rfrence gnre"}),n.jsx(De,{value:_,readOnly:!0,className:"bg-gray-100"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(Y,{type:"submit",disabled:r,children:"Attribuer"})})]})},PUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,m]=x.useState(!1),[p,v]=x.useState(!1),[g,y]=x.useState([]);x.useEffect(()=>{const I=async()=>{try{i(!0);const W=(await Je.getParcels()).filter(V=>V.owner_type==="Mairie"||V.owner_type==="Public"||V.legal_status==="municipal");r(W)}catch(F){console.error("Erreur chargement parcelles municipales:",F),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les terrains municipaux"})}finally{i(!1)}},q=async()=>{try{const{data:F,error:W}=await Je.listUsers({type:"Particulier"});!W&&F&&y(F)}catch{}};I(),q()},[]);const j=x.useMemo(()=>Array.from(new Set(t.map(I=>I.zone).filter(Boolean))).sort(),[t]),_=x.useMemo(()=>t.filter(I=>{const q=!a||[I.reference,I.location_name,I.zone].some(V=>(V||"").toLowerCase().includes(a.toLowerCase())),F=!l||I.status===l,W=!u||I.zone===u;return q&&F&&W}),[t,a,l,u]),w=async(I,q)=>{try{const F=await Je.updateProperty(I.id,{status:q});r(W=>W.map(V=>V.id===I.id?{...V,...F}:V)),e({title:"Statut mis  jour",description:`${I.reference||I.id} -> ${q}`})}catch{e({variant:"destructive",title:"Erreur",description:"Maj statut impossible"})}},A=async I=>{try{const q=await Je.updateProperty(I.id,{archived:!0,status:"Archiv"});r(F=>F.map(W=>W.id===I.id?{...W,...q}:W)),e({title:"Parcelle archive"})}catch{e({variant:"destructive",title:"Erreur",description:"Archive impossible"})}},S=async I=>{try{v(!0);const q=await Je.createProperty(I);r(F=>[q,...F]),e({title:"Parcelle attribue",description:`${q.reference||q.id} attribue avec succs.`}),m(!1),I.beneficiary_id&&await Je.createNotification({userId:I.beneficiary_id,type:"attribution",title:"Nouvelle parcelle attribue",body:`Une parcelle (${q.reference}) vous a t attribue par la mairie.`,data:{parcelId:q.id,reference:q.reference}})}catch(q){console.error(q),e({variant:"destructive",title:"Erreur attribution",description:"Impossible d'attribuer la parcelle"})}finally{v(!1)}};if(s)return n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})});const P=t.filter(I=>Array.isArray(I.documents)&&I.documents.length).flatMap(I=>I.documents.map(q=>({...q,parcelReference:I.reference}))),[C,T]=x.useState(!1),[M,z]=x.useState(null),O=I=>{const q=[];return I.created_at&&q.push({status:"created",date:I.created_at,description:"Parcelle cre"}),I.status==="Attribue"&&I.beneficiary_id&&q.push({status:"attributed",date:I.updated_at,description:"Attribue au bnficiaire"}),(I.status==="Valide"||I.validated_by_notary)&&q.push({status:"validated",date:I.validated_at,description:"Valide par notaire"}),(I.status==="Archive"||I.archived)&&q.push({status:"archived",date:I.archived_at,description:"Parcelle archive"}),q};return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(ia,{className:"mr-3 h-8 w-8"}),"Gestion Foncire Communale"]}),n.jsxs(Y,{onClick:()=>m(!0),children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Ajouter un Terrain"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Patrimoine Foncier de la Commune"}),n.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-2 space-y-2 md:space-y-0 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher une parcelle...",className:"pl-8",value:a,onChange:I=>o(I.target.value)})]}),n.jsxs("select",{className:"border rounded px-2 py-2 text-sm",value:l,onChange:I=>c(I.target.value),children:[n.jsx("option",{value:"",children:"Statut (Tous)"}),n.jsx("option",{value:"Disponible",children:"Disponible"}),n.jsx("option",{value:"Occup",children:"Occup"}),n.jsx("option",{value:"EnProjet",children:"EnProjet"})]}),n.jsxs("select",{className:"border rounded px-2 py-2 text-sm",value:u,onChange:I=>d(I.target.value),children:[n.jsx("option",{value:"",children:"Zone (Toutes)"}),j.map(I=>n.jsx("option",{value:I,children:I},I))]}),(a||l||u)&&n.jsxs(Y,{variant:"ghost",onClick:()=>{o(""),c(""),d("")},children:[n.jsx(Ii,{className:"mr-1 h-4 w-4"}),"Rinit."]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Rfrence"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Localisation"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Surface (m)"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsxs("tbody",{children:[_.map(I=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-mono",children:I.id}),n.jsx("td",{className:"p-2",children:I.location_name}),n.jsx("td",{className:"p-2",children:I.area_sqm}),n.jsx("td",{className:"p-2",children:n.jsxs("select",{className:"border rounded px-1 py-1 text-xs",value:I.status,onChange:q=>w(I,q.target.value),children:[n.jsx("option",{children:"Disponible"}),n.jsx("option",{children:"Occup"}),n.jsx("option",{children:"EnProjet"}),n.jsx("option",{children:"Archiv"})]})}),n.jsxs("td",{className:"p-2 text-right flex gap-2 justify-end",children:[n.jsx(Y,{asChild:!0,variant:"outline",size:"sm",children:n.jsxs(dt,{to:`/parcelles/${I.id}`,children:[n.jsx(Hr,{className:"mr-1 h-4 w-4"}),"Dtails"]})}),n.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>A(I),disabled:I.archived,children:n.jsx(x2,{className:"h-4 w-4"})}),n.jsx(Y,{size:"sm",variant:"ghost",onClick:()=>{z(I),T(!0)},children:"Timeline"})]})]},I.id)),!_.length&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground text-sm",children:"Aucune parcelle ne correspond aux filtres."})})]})]})})})]}),h&&n.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-lg relative",children:[n.jsx("button",{className:"absolute top-2 right-2 p-1 text-muted-foreground hover:text-foreground",onClick:()=>!p&&m(!1),children:n.jsx(Ii,{className:"h-5 w-5"})}),n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Attribuer une parcelle"}),n.jsx(AUe,{onSubmit:S,users:g,loading:p})]})]})}),n.jsx(p3,{documents:P}),C&&M&&n.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-lg relative p-6",children:[n.jsx("button",{className:"absolute top-2 right-2 p-1 text-muted-foreground hover:text-foreground",onClick:()=>T(!1),children:n.jsx("span",{className:"text-lg",children:""})}),n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Historique de la parcelle ",M.reference]}),n.jsx(LY,{history:O(M)})]})})]})},CUe=()=>{pt();const[e,t]=x.useState(!0);return x.useEffect(()=>{const r=setTimeout(()=>{t(!1)},500);return()=>clearTimeout(r)},[]),e?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Ea,{className:"mr-3 h-8 w-8"}),"Plan d'Urbanisme"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Plan Directeur d'Urbanisme (PDU)"}),n.jsx(jt,{children:"Consultez les zonages, les rglements et les projets d'amnagement."})]}),n.jsxs(ve,{children:[n.jsx("div",{className:"w-full h-[500px] bg-muted rounded-lg flex items-center justify-center",children:n.jsx("img",{src:"https://images.unsplash.com/photo-1614783702763-48dcc1f32a91",alt:"Carte d'urbanisme",className:"w-full h-full object-cover rounded-lg"})}),n.jsxs("div",{className:"flex space-x-2 mt-4",children:[n.jsxs(Y,{variant:"outline",disabled:!0,title:"Bientt: couches dynamiques bases sur urban_zones",children:[n.jsx(fk,{className:"mr-2 h-4 w-4"})," Afficher les Zones"]}),n.jsxs(Y,{variant:"outline",disabled:!0,title:"Bientt: tlchargement PDF rglement",children:[n.jsx(Tl,{className:"mr-2 h-4 w-4"})," Tlcharger le Rglement"]})]})]})]})]})};delete bm.Icon.Default.prototype._getIconUrl;bm.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const kUe=()=>{const{toast:e}=pt(),[t,r]=x.useState(!0),[s,i]=x.useState([]),[a,o]=x.useState([14.445,-17.035]),[l,c]=x.useState(!1);x.useEffect(()=>{(async()=>{try{r(!0);const h=await Je.getParcels();i(h||[])}catch(h){console.error("Erreur chargement donnes cadastrales:",h),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les donnes cadastrales"})}finally{r(!1)}})()},[]);const u=d=>{switch(d.properties.zone){case"Rsidentiel":return{color:"#3b82f6",weight:2,fillOpacity:.3};case"Commercial":return{color:"#f97316",weight:2,fillOpacity:.3};case"Espace Vert":return{color:"#22c55e",weight:2,fillOpacity:.3};default:return{color:"#6b7280",weight:2,fillOpacity:.3}}};return t?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(ox,{className:"mr-3 h-8 w-8"}),"Cadastre Numrique (Commune de Saly)"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Carte Interactive du Cadastre"}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher une parcelle par rfrence...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",onClick:()=>c(!l),children:[n.jsx(fk,{className:"mr-2 h-4 w-4"})," ",l?"Cacher":"Afficher"," Zonage"]}),n.jsxs(Y,{variant:"outline",onClick:()=>handleAction("Export de la vue actuelle de la carte."),children:[n.jsx(Tl,{className:"mr-2 h-4 w-4"})," Exporter Vue"]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"w-full h-[550px] bg-muted rounded-lg overflow-hidden border",children:n.jsxs(UE,{center:a,zoom:14,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[n.jsx(GE,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.filter(d=>d.location&&d.location.includes("Saly")&&d.coordinates).map(d=>n.jsx(HE,{position:[d.coordinates.lat,d.coordinates.lng],children:n.jsxs(WE,{children:[n.jsx("b",{children:d.title||d.reference}),n.jsx("br",{}),"Rfrence: ",d.reference,n.jsx("br",{}),"Statut: ",d.status,n.jsx("br",{}),"Surface: ",d.surface," m"]})},d.id)),l&&n.jsx(Y0e,{data:zoningData,style:u,onEachFeature:(d,h)=>{h.bindPopup(`Zone: ${d.properties.zone}`)}})]})})})]})]})},EUe=()=>{pt();const[e,t]=x.useState([]),[r,s]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const{data:a,error:o}=await pe.from("land_disputes").select("id,parcel_id,parties,type,status,created_at").order("created_at",{ascending:!1}).limit(200);if(o)throw o;const l=(a||[]).map(c=>({id:c.id,parcelId:c.parcel_id,parties:c.parties,type:c.type,status:c.status}));t(l)}catch{}finally{s(!1)}})()},[]),r?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(kr,{className:"mr-3 h-8 w-8"}),"Gestion des Litiges Fonciers"]}),n.jsxs(Y,{disabled:!0,title:"Cration  venir",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"})," Nouveau Litige"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Suivi des Litiges"}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par parcelle, parties...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer"]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Parcelle"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Parties Impliques"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Type de Litige"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-mono",children:i.parcelId}),n.jsx("td",{className:"p-2",children:i.parties}),n.jsx("td",{className:"p-2",children:i.type}),n.jsx("td",{className:"p-2",children:n.jsx(Ge,{variant:i.status==="Rsolu"?"success":i.status==="Nouveau"?"warning":"secondary",children:i.status})}),n.jsx("td",{className:"p-2 text-right",children:n.jsxs(Y,{variant:"outline",size:"sm",disabled:!0,title:"Mdiation  venir",children:[n.jsx(A0,{className:"mr-1 h-4 w-4"}),"Mdiation"]})})]},i.id))})]})})})]})]})},TUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState("all");x.useEffect(()=>{(async()=>{try{if(a(!0),t&&t.id){const p=await Je.getRequestsByRecipient(t.id,"mairie");s(p)}else{const v=(await Je.getRequests()).filter(g=>g.recipient_type==="Mairie"||g.category==="municipal"||g.type==="land_request");s(v)}}catch(p){console.error("Erreur chargement demandes mairie:",p),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les demandes"})}finally{a(!1)}})()},[t]);const d=async(m,p,v)=>{try{const g=await Je.updateRequestStatus(m,v);e({title:`Demande ${p}`,description:`Statut: ${g.status}`}),s(y=>y.map(j=>j.id===m?{...j,status:g.status}:j))}catch(g){e({variant:"destructive",title:"Erreur",description:`Action impossible (${g.message})`})}},h=r.filter(m=>{const p=!o||(m.user_name||m.full_name||"").toLowerCase().includes(o.toLowerCase())||(m.request_type||"").toLowerCase().includes(o.toLowerCase()),v=c==="all"||(m.status||"").toLowerCase()===c;return p&&v});return i?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Ac,{className:"mr-3 h-8 w-8"}),"Demandes Administratives"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Suivi des Demandes (Permis, DIA, etc.)"}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{value:o,onChange:m=>l(m.target.value),placeholder:"Rechercher par demandeur ou type...",className:"pl-8"})]}),n.jsxs("select",{className:"border rounded px-2 text-sm",value:c,onChange:m=>u(m.target.value),children:[n.jsx("option",{value:"all",children:"Tous statuts"}),n.jsx("option",{value:"pending",children:"En attente"}),n.jsx("option",{value:"approved",children:"Approuv"}),n.jsx("option",{value:"rejected",children:"Rejet"})]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Demandeur"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Type"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Objet"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:h.map(m=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2",children:m.user_name||m.full_name||"Utilisateur inconnu"}),n.jsx("td",{className:"p-2 capitalize",children:m.request_type||m.type}),n.jsxs("td",{className:"p-2 text-muted-foreground",children:[(m.message||m.description||"").substring(0,50),"..."]}),n.jsx("td",{className:"p-2",children:n.jsx(Ge,{variant:m.status==="pending"||m.status==="Nouvelle"?"warning":m.status==="approved"?"default":"secondary",children:m.status})}),n.jsxs("td",{className:"p-2 text-right space-x-1",children:[n.jsx(Y,{variant:"outline",size:"sm",onClick:()=>d(m.id,"Instruite","in_review"),children:"Instruire"}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>d(m.id,"Approuve","approved"),children:n.jsx(Qt,{className:"h-4 w-4 text-green-500"})}),n.jsx(Y,{variant:"ghost",size:"icon",onClick:()=>d(m.id,"Rejete","rejected"),children:n.jsx(sa,{className:"h-4 w-4 text-red-500"})})]})]},m.id))})]})})})]})]})},OUe=()=>{pt();const[e,t]=x.useState([]),[r,s]=x.useState(!0),i=async()=>{try{const{data:a,error:o}=await pe.from("bank_guarantees").select("id,parcel_id,client_name,estimated_value,risk_level").order("created_at",{ascending:!1}).limit(200);if(o)throw o;const l=(a||[]).map(c=>({id:c.id,parcelId:c.parcel_id,valeur:c.estimated_value?new Intl.NumberFormat("fr-FR").format(c.estimated_value)+" XOF":"",risque:c.risk_level||"",client:c.client_name||""}));t(l)}catch{}finally{s(!1)}};return x.useEffect(()=>{i()},[]),r?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Ys,{className:"mr-3 h-8 w-8"}),"Portefeuille de Garanties"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Suivi des Garanties Foncires"}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par parcelle, client...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer"]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Parcelle (Garantie)"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Client"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Valeur Estime"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Niveau de Risque"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:e.map(a=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-mono",children:a.parcelId}),n.jsx("td",{className:"p-2",children:a.client}),n.jsx("td",{className:"p-2",children:a.valeur}),n.jsx("td",{className:"p-2",children:n.jsx(Ge,{variant:a.risque==="Faible"?"success":"warning",children:a.risque})}),n.jsx("td",{className:"p-2 text-right",children:n.jsx(Y,{asChild:!0,variant:"outline",size:"sm",children:n.jsxs(dt,{to:`/parcelles/${a.parcelId}`,children:[n.jsx(Hr,{className:"mr-1 h-4 w-4"}),"Dtails"]})})})]},a.id))})]})})})]})]})},LUe=()=>n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"valuation Foncire"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Placeholder Land Valuation page."})]}),MUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),a=async()=>{try{const{data:o,error:l}=await pe.from("documents").select("id,title,created_at,category").eq("category","compliance_report").order("created_at",{ascending:!1}).limit(100);if(l)throw l;const c=(o||[]).map(u=>{var d;return{id:u.id,title:u.title||"Rapport",type:"Conformit",date:((d=u.created_at)==null?void 0:d.split("T")[0])||""}});r(c)}catch{e({variant:"destructive",title:"Erreur",description:"Chargement des rapports impossible."})}finally{i(!1)}};return x.useEffect(()=>{a()},[]),s?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(hk,{className:"mr-3 h-8 w-8"}),"Rapports de Conformit"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Gnrer un nouveau rapport"}),n.jsx(jt,{children:"Fonctionnalit  venir (gnration automatique)."})]}),n.jsx(ve,{children:n.jsx(Y,{disabled:!0,children:"Gnrer un Rapport"})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Historique des Rapports"}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher un rapport...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer"]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Titre du Rapport"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Type"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Date"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:t.map(o=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-medium",children:o.title}),n.jsx("td",{className:"p-2",children:o.type}),n.jsx("td",{className:"p-2",children:o.date}),n.jsx("td",{className:"p-2 text-right",children:n.jsx(Y,{variant:"outline",size:"sm",asChild:!0,disabled:!0,children:n.jsxs("span",{children:[n.jsx(Tl,{className:"mr-1 h-4 w-4"})," Tlcharger"]})})})]},o.id))})]})})})]})]})},IUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),{toast:i}=pt();return x.useEffect(()=>{(async()=>{s(!0);try{const{data:o,error:l}=await pe.from("land_evaluations").select("id, parcels(reference, location), estimated_value, status, created_at").order("created_at",{ascending:!1});if(l)throw l;t(o||[])}catch(o){i({title:"Erreur",description:o.message,variant:"destructive"})}finally{s(!1)}})()},[i]),n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"valuations Foncires"}),r?n.jsx(Tt,{}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length===0?n.jsx("p",{children:"Aucune valuation trouve."}):e.map(a=>{var o,l;return n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:["#",a.id," - ",((o=a.parcels)==null?void 0:o.reference)||"Parcelle inconnue"]})}),n.jsxs(ve,{children:[n.jsx("div",{className:"text-sm text-gray-700",children:(l=a.parcels)==null?void 0:l.location}),n.jsxs("div",{className:"text-sm",children:["Valeur estime : ",n.jsx("b",{children:a.estimated_value?a.estimated_value.toLocaleString()+" XOF":""})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Statut : ",a.status]}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Cr le ",new Date(a.created_at).toLocaleDateString()]})]})]},a.id)})})]})},RUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),{toast:i}=pt();return x.useEffect(()=>{(async()=>{s(!0);try{const{data:o,error:l}=await pe.from("documents").select("id, name, type, url, created_at").order("created_at",{ascending:!1});if(l)throw l;t(o||[])}catch(o){i({title:"Erreur",description:o.message,variant:"destructive"})}finally{s(!1)}})()},[i]),n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Documents Banque"}),r?n.jsx(Tt,{}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length===0?n.jsx("p",{children:"Aucun document trouv."}):e.map(a=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:a.name})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-sm",children:["Type : ",a.type]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Ajout le ",new Date(a.created_at).toLocaleDateString()]}),n.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs",children:"Tlcharger"})]})]},a.id))})]})},DUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(""),[i,a]=x.useState([]),[o,l]=x.useState(!1),[c,u]=x.useState(!0),{toast:d}=pt();x.useEffect(()=>{(async()=>{u(!0);try{let g=pe.from("users").select("id, full_name, email, phone, created_at").eq("role","client");r&&(g=g.ilike("full_name",`%${r}%`));const{data:y,error:j}=await g.order("created_at",{ascending:!1});if(j)throw j;t(y||[])}catch(g){d({title:"Erreur",description:g.message,variant:"destructive"})}finally{u(!1)}})()},[d,r]);const h=v=>{a(g=>g.includes(v)?g.filter(y=>y!==v):[...g,v])},m=()=>{i.length===e.length?a([]):a(e.map(v=>v.id))},p=()=>{l(!0);const g=[["Nom","Email","Tlphone","Date inscription"],...e.filter(w=>i.length===0||i.includes(w.id)).map(w=>[w.full_name,w.email,w.phone||"",new Date(w.created_at).toLocaleDateString()])].map(w=>w.map(A=>'"'+(A||"")+'"').join(",")).join(`
`),y=new Blob([g],{type:"text/csv"}),j=URL.createObjectURL(y),_=document.createElement("a");_.href=j,_.download="clients.csv",_.click(),l(!1)};return n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Clients Banque"}),n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 mb-4",children:[n.jsx("input",{value:r,onChange:v=>s(v.target.value),placeholder:"Recherche par nom...",className:"border rounded px-2 py-1 w-full md:w-64"}),n.jsx(Y,{onClick:m,variant:"outline",size:"sm",children:i.length===e.length?"Tout dslectionner":"Tout slectionner"}),n.jsx(Y,{onClick:p,disabled:o||e.length===0,size:"sm",children:"Exporter CSV"})]}),c?n.jsx(Tt,{}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full border text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{children:n.jsx("input",{type:"checkbox",checked:i.length===e.length&&e.length>0,onChange:m})}),n.jsx("th",{children:"Nom"}),n.jsx("th",{children:"Email"}),n.jsx("th",{children:"Tlphone"}),n.jsx("th",{children:"Date inscription"})]})}),n.jsx("tbody",{children:e.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4",children:"Aucun client trouv."})}):e.map(v=>n.jsxs("tr",{className:i.includes(v.id)?"bg-blue-50":"",children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:i.includes(v.id),onChange:()=>h(v.id)})}),n.jsx("td",{children:v.full_name}),n.jsx("td",{children:v.email}),n.jsx("td",{children:v.phone||""}),n.jsx("td",{children:new Date(v.created_at).toLocaleDateString()})]},v.id))})]})})]})},$Ue=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0),{toast:i}=pt();return x.useEffect(()=>{(async()=>{s(!0);try{const{data:o,error:l}=await pe.from("dossiers").select("id, title, status, created_at, updated_at").order("created_at",{ascending:!1});if(l)throw l;t(o||[])}catch(o){i({title:"Erreur",description:o.message,variant:"destructive"})}finally{s(!1)}})()},[i]),n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Dossiers Banque"}),r?n.jsx(Tt,{}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length===0?n.jsx("p",{children:"Aucun dossier trouv."}):e.map(a=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:a.title})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"text-sm",children:["Statut : ",a.status]}),n.jsxs("div",{className:"text-xs text-gray-500",children:["Cr le ",new Date(a.created_at).toLocaleDateString()]}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Mis  jour le ",new Date(a.updated_at).toLocaleDateString()]})]})]},a.id))})]})},FUe=()=>{pt();const[e,t]=x.useState([]),[r,s]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const{data:a,error:o}=await pe.from("documents").select("id,title,category,created_at,parties").in("category",["acte_vente","acte_succession","acte_autre"]).order("created_at",{ascending:!1}).limit(300);if(o)throw o;const l=u=>u==="acte_vente"?"Vente":u==="acte_succession"?"Succession":"Autre",c=(a||[]).map(u=>{var d;return{id:u.id,acteId:u.title||u.id,type:l(u.category),date:((d=u.created_at)==null?void 0:d.split("T")[0])||"",parties:u.parties||""}});t(c)}catch{}finally{s(!1)}})()},[]),r?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(x2,{className:"mr-3 h-8 w-8"}),"Archives Notariales"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Recherche dans les Archives"}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par ID, parties, date...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer"]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"ID Acte"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Type"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Date"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Parties"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsx("td",{className:"p-2 font-mono",children:i.acteId}),n.jsx("td",{className:"p-2",children:i.type}),n.jsx("td",{className:"p-2",children:i.date}),n.jsx("td",{className:"p-2",children:i.parties}),n.jsxs("td",{className:"p-2 text-right",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>handleAction(`Consultation de l'acte ${i.acteId}.`),children:[n.jsx(Tl,{className:"mr-1 h-4 w-4"})," Consulter"]}),n.jsxs(Y,{variant:"outline",size:"sm",disabled:!0,title:"Consultation  venir",children:[n.jsx(Tl,{className:"mr-1 h-4 w-4"})," Consulter"]})]})]},i.id))})]})})})]})]})},zUe=()=>{const[e,t]=x.useState(""),[r,s]=x.useState(!1),{toast:i}=pt(),a=async o=>{o.preventDefault(),s(!0);const{data:l,error:c}=await pe.from("notary_auth_codes").select("*").eq("code",e).single();s(!1),i(c||!l?{title:"Erreur",description:"Code invalide ou expir",variant:"destructive"}:{title:"Succs",description:"Authentification russie"})};return n.jsx("div",{className:"p-6 max-w-md mx-auto",children:n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Authentification Notariale"})}),n.jsx(ve,{children:n.jsxs("form",{onSubmit:a,className:"space-y-4",children:[n.jsx(De,{placeholder:"Code d'authentification notaire",value:e,onChange:o=>t(o.target.value),required:!0,disabled:r}),n.jsx(Y,{type:"submit",disabled:r||!e,children:r?"Vrification...":"Vrifier le code"})]})})]})})},BUe=()=>{const[e,t]=x.useState([]),[r,s]=x.useState(!0);return x.useEffect(()=>{(async()=>{s(!0);const{data:a,error:o}=await pe.from("transactions").select("id, reference, status, client_name, created_at").order("created_at",{ascending:!1});t(a||[]),s(!1)})()},[]),n.jsxs("div",{className:"p-6",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Dossiers Notariaux"}),r?n.jsx(Tt,{}):n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Liste des dossiers"})}),n.jsx(ve,{children:e.length===0?n.jsx("p",{className:"text-gray-500",children:"Aucun dossier trouv."}):n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left",children:"Rfrence"}),n.jsx("th",{className:"text-left",children:"Client"}),n.jsx("th",{className:"text-left",children:"Statut"}),n.jsx("th",{className:"text-left",children:"Cr le"})]})}),n.jsx("tbody",{children:e.map(i=>n.jsxs("tr",{children:[n.jsx("td",{children:i.reference||i.id}),n.jsx("td",{children:i.client_name||"-"}),n.jsx("td",{children:i.status}),n.jsx("td",{children:new Date(i.created_at).toLocaleDateString("fr-FR")})]},i.id))})]})})]})]})},qUe=()=>{const{toast:e}=pt(),[t,r]=x.useState(""),[s,i]=x.useState(null),[a,o]=x.useState(!0);x.useEffect(()=>{const c=setTimeout(()=>{o(!1)},500);return()=>clearTimeout(c)},[]);const l=async()=>{if(!t.trim()){e({variant:"destructive",title:"Erreur",description:"Veuillez entrer une rfrence de parcelle."});return}try{o(!0);const{data:c,error:u}=await pe.from("parcels").select("*").eq("reference",t.trim()).single();if(u){e({variant:"destructive",title:"Erreur",description:"Parcelle non trouve dans la base de donnes."});return}const d=c.planning_status||"verified",h=c.tax_status||"up_to_date",m=c.dispute_status||"none";let p="Conforme";d==="pending"||h==="pending"||m==="active"?p="En cours de vrification":(d==="rejected"||h==="overdue"||m==="dispute")&&(p="Non conforme"),i({parcelId:t,parcelData:c,urbanisme:d==="verified"?"Conforme":" vrifier",fiscal:h==="up_to_date"?" jour":"En retard",litiges:m==="none"?"Aucun":"Litige en cours",overall:p}),e({title:"Vrification termine",description:`Rsultats pour la parcelle ${t} affichs.`})}catch(c){console.error("Erreur vrification conformit:",c),e({variant:"destructive",title:"Erreur",description:"Impossible de vrifier la conformit."})}finally{o(!1)}};return a?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Ys,{className:"mr-3 h-8 w-8"}),"Vrification de Conformit"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Lancer une Vrification"}),n.jsx(jt,{children:"Entrez la rfrence d'une parcelle pour vrifier sa conformit (urbanisme, fiscalit, litiges)."})]}),n.jsx(ve,{children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(Cr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rf. parcelle (ex: DK-ALM-002)",className:"pl-8",value:t,onChange:c=>r(c.target.value)})]}),n.jsxs(Y,{onClick:l,children:[n.jsx(wr,{className:"mr-2 h-4 w-4"})," Vrifier"]})]})})]}),s&&n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{children:["Rsultats pour ",s.parcelId]})}),n.jsx(ve,{children:n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Conformit Urbanisme:"})," ",n.jsx(Ge,{variant:s.urbanisme==="Conforme"?"success":"destructive",children:s.urbanisme})]}),n.jsxs("li",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Situation Fiscale:"})," ",n.jsx(Ge,{variant:s.fiscal===" jour"?"success":"destructive",children:s.fiscal})]}),n.jsxs("li",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Litiges en cours:"})," ",n.jsx(Ge,{variant:s.litiges==="Aucun"?"success":"destructive",children:s.litiges})]}),n.jsxs("li",{className:"flex justify-between items-center pt-2 border-t mt-2",children:[n.jsx("strong",{children:"Verdict Global:"})," ",n.jsx(Ge,{variant:s.overall==="Conforme"?"success":"destructive",className:"text-base",children:s.overall})]})]})})]})]})},VUe=()=>{const{toast:e}=pt(),[t,r]=x.useState(!0),[s,i]=x.useState({priceTrends:[],zoneAnalysis:[],marketStats:{averagePrice:0,totalParcels:0,availableParcels:0,soldParcels:0}});x.useEffect(()=>{a()},[]);const a=async()=>{try{r(!0);const{data:d,error:h}=await pe.from("parcels").select("*").order("created_at",{ascending:!1});if(h)throw h;const m=o(d||[]),p=c(m),v=u(d||[]);i({priceTrends:p,zoneAnalysis:m,marketStats:v})}catch(d){console.error("Erreur chargement analyse march:",d),e({variant:"destructive",title:"Erreur",description:"Impossible de charger l'analyse de march"})}finally{r(!1)}},o=d=>{const h={};return d.forEach(m=>{const p=l(m.location||"");h[p]||(h[p]={name:p,parcels:[],averagePrice:0,totalSurface:0,availableCount:0}),h[p].parcels.push(m),h[p].totalSurface+=m.surface||0,m.status==="available"&&h[p].availableCount++}),Object.values(h).map(m=>({...m,averagePrice:m.parcels.reduce((p,v)=>p+(v.price||0),0)/m.parcels.length,pricePerSqm:m.parcels.reduce((p,v)=>p+(v.price||0)/(v.surface||1),0)/m.parcels.length}))},l=d=>{var m;return((m=d.split(",")[0])==null?void 0:m.trim())||"Zone inconnue"},c=d=>{const h=new Date().getFullYear();return[h-2,h-1,h,h+1].map((p,v)=>{const g={name:p.toString()};return d.slice(0,3).forEach(y=>{const j=y.pricePerSqm||5e4,_=1+v*.08;g[y.name]=Math.round(j*_)}),g})},u=d=>{const h=d.filter(p=>p.status==="available"),m=d.filter(p=>p.status==="sold");return{averagePrice:d.reduce((p,v)=>p+(v.price||0),0)/d.length||0,totalParcels:d.length,availableParcels:h.length,soldParcels:m.length}};return t?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Br,{className:"mr-3 h-8 w-8"}),"Analyse de March"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Prix Moyen"}),n.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(s.marketStats.averagePrice).toLocaleString()," FCFA"]})]}),n.jsx(fs,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Parcelles"}),n.jsx("p",{className:"text-2xl font-bold",children:s.marketStats.totalParcels})]}),n.jsx(Vn,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Disponibles"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.marketStats.availableParcels})]}),n.jsx(jr,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vendues"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.marketStats.soldParcels})]}),n.jsx(na,{className:"h-8 w-8 text-red-500"})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"volution du Prix au m par Zone"}),n.jsx(jt,{children:"Tendances bases sur les donnes du march actuel"})]}),n.jsx(ve,{children:n.jsx(co,{width:"100%",height:300,children:n.jsxs(d3,{data:s.priceTrends,children:[n.jsx(La,{dataKey:"name"}),n.jsx(Li,{tickFormatter:d=>`${Math.round(d/1e3)}k`}),n.jsx(es,{formatter:d=>[`${d.toLocaleString()} FCFA/m`,""]}),n.jsx(bc,{}),s.zoneAnalysis.slice(0,3).map((d,h)=>n.jsx(kc,{type:"monotone",dataKey:d.name,stroke:["#3b82f6","#ef4444","#10b981"][h],strokeWidth:2},d.name))]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Analyse par Zone"}),n.jsx(jt,{children:"Performance et potentiel des diffrentes zones"})]}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.zoneAnalysis.slice(0,6).map(d=>n.jsxs(Ae.div,{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",whileHover:{scale:1.02},children:[n.jsx("h3",{className:"font-semibold text-lg mb-2",children:d.name}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Prix moyen"}),n.jsxs("span",{className:"font-medium",children:[Math.round(d.averagePrice).toLocaleString()," FCFA"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Prix/m"}),n.jsxs("span",{className:"font-medium",children:[Math.round(d.pricePerSqm||0).toLocaleString()," FCFA"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Disponibles"}),n.jsx("span",{className:"font-medium text-green-600",children:d.availableCount})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total parcelles"}),n.jsx("span",{className:"font-medium",children:d.parcels.length})]})]})]},d.name))})})]})]})},UUe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(!1),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,m]=x.useState(""),p=async()=>{o(!0);try{const{data:j,error:_}=await Je.supabaseRaw("market_predictions");if(_)throw _;r(j||[])}catch(j){console.error("Erreur chargement prdictions march:",j),e({title:"Erreur",description:"Impossible de charger les opportunits."})}finally{i(!1),o(!1)}};x.useEffect(()=>{p()},[]);const v=t.filter(j=>!(l!=="all"&&j.location!==l||u!=="all"&&j.property_type!==u||h&&j.predicted_price_per_sqm&&Number(h)>j.predicted_price_per_sqm)),g=Array.from(new Set(t.map(j=>j.location))).slice(0,25),y=Array.from(new Set(t.map(j=>j.property_type).filter(Boolean))).slice(0,25);return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap justify-between gap-4 items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[n.jsx(Br,{className:"h-7 w-7 mr-2 text-primary"}),"Opportunits d'Investissement"]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-prose mt-1",children:"Suggestions bases sur les prdictions de march et signaux agrgs. Filtrez pour affiner."})]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:p,disabled:a,className:"flex items-center",children:[n.jsx(Ta,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Rafrachir"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"pb-3",children:[n.jsx(ke,{className:"text-base",children:"Filtres"}),n.jsx(jt,{children:"Affinez la liste des opportunits."})]}),n.jsxs(ve,{className:"grid md:grid-cols-5 gap-3",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Localisation"}),n.jsxs(Ft,{value:l,onValueChange:c,children:[n.jsx(Dt,{className:"h-9",children:n.jsx(zt,{placeholder:"Localisation"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes"}),g.map(j=>n.jsx(Ke,{value:j,children:j},j))]})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Type"}),n.jsxs(Ft,{value:u,onValueChange:d,children:[n.jsx(Dt,{className:"h-9",children:n.jsx(zt,{placeholder:"Type"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous"}),y.map(j=>n.jsx(Ke,{value:j,children:j||"N/A"},j))]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium mb-1 block",children:"Prix min/m (prvision)"}),n.jsx(De,{value:h,onChange:j=>m(j.target.value),placeholder:"Ex: 150000",className:"h-9"})]})]})]}),s?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(Tt,{size:"large"})}):v.length===0?n.jsx(he,{className:"border-dashed",children:n.jsx(ve,{className:"py-10 text-center text-sm text-muted-foreground",children:"Aucune opportunit ne correspond aux filtres."})}):n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-5",children:v.map(j=>n.jsxs(he,{className:"hover:shadow-md transition-shadow",children:[n.jsxs(Ce,{className:"pb-2",children:[n.jsxs(ke,{className:"text-lg flex items-center justify-between",children:[n.jsx("span",{children:j.location}),n.jsx(Ge,{variant:"secondary",className:"text-xs",children:j.property_type||"Type"})]}),n.jsxs(jt,{className:"text-xs",children:["Cr le ",new Date(j.created_at).toLocaleDateString("fr-FR")]})]}),n.jsxs(ve,{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Prix prvisionnel m"}),n.jsx("strong",{children:j.predicted_price_per_sqm?new Intl.NumberFormat("fr-FR").format(j.predicted_price_per_sqm)+" XOF":""})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Confiance"}),n.jsx("strong",{children:j.confidence_score?(j.confidence_score*100).toFixed(0)+"%":""})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Facteurs"}),n.jsx("span",{className:"truncate max-w-[140px] text-xs text-muted-foreground",children:j.factors?Object.keys(j.factors).slice(0,3).join(", "):""})]}),n.jsx(Y,{size:"sm",variant:"outline",className:"w-full mt-3",children:"Analyser"})]})]},j.id))})]})},HUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState(!0),[i,a]=x.useState(!1),[o,l]=x.useState([]),[c,u]=x.useState("simple"),[d,h]=x.useState(""),[m,p]=x.useState(""),[v,g]=x.useState(""),[y,j]=x.useState("5"),[_,w]=x.useState(""),[A,S]=x.useState(""),[P,C]=x.useState(null);x.useEffect(()=>{t&&T(),s(!1)},[t]);const T=async()=>{try{if(!(t!=null&&t.id))return;const{data:q,error:F}=await Je.supabaseClient.from("roi_calculations").select("*").eq("investor_id",t.id).order("created_at",{ascending:!1}).limit(10);F&&F.code!=="PGRST116"&&console.error("Erreur chargement calculs:",F),l(q||[])}catch(q){console.error("Erreur chargement calculs ROI:",q)}},M=async()=>{if(!d||!m){e({variant:"destructive",title:"Erreur",description:"Veuillez remplir au minimum le cot total et le revenu estim"});return}a(!0);try{const q=parseFloat(d),F=parseFloat(m),W=parseFloat(v)||1,V=parseFloat(y)/100,ne=parseFloat(_)||0;let G;if(c==="simple"){const K=F-q,ee=K/q*100,xe=W>0?ee/W:ee;G={type:"simple",roiSimple:ee.toFixed(2),roiAnnualise:xe.toFixed(2),gain:K.toFixed(2),rentabilite:ee>0?"Profitable":"Non profitable"}}else{const K=(F-ne)/W;let ee=-q;for(let X=1;X<=W;X++)ee+=K/Math.pow(1+V,X);const xe=z(q,K,W),B=ee/q*100;G={type:"advanced",van:ee.toFixed(2),tri:xe.toFixed(2),roiActualise:B.toFixed(2),fluxAnnuel:K.toFixed(2),rentabilite:ee>0?"Profitable (VAN positive)":"Non profitable (VAN ngative)"}}C(G)}catch{e({variant:"destructive",title:"Erreur de calcul",description:"Vrifiez que tous les montants sont des nombres valides"})}finally{a(!1)}},z=(q,F,W)=>{let V=-.99,ne=5,G,K;for(let ee=0;ee<100;ee++){G=(V+ne)/2,K=-q;for(let xe=1;xe<=W;xe++)K+=F/Math.pow(1+G,xe);if(Math.abs(K)<.01)break;K>0?V=G:ne=G}return G*100},O=async()=>{if(!P||!A.trim()){e({variant:"destructive",title:"Erreur",description:"Veuillez effectuer un calcul et donner un nom  votre simulation"});return}try{const q={investor_id:t.id,name:A,calculation_type:c,initial_investment:parseFloat(d),expected_return:parseFloat(m),investment_duration_years:parseFloat(v)||1,discount_rate:parseFloat(y)/100,annual_costs:parseFloat(_)||0,results:P},{error:F}=await Je.supabaseClient.from("roi_calculations").insert([q]);if(F)throw F;e({title:"Succs",description:"Calcul sauvegard avec succs"}),S(""),T()}catch(q){console.error("Erreur sauvegarde calcul:",q),e({variant:"destructive",title:"Erreur",description:"Impossible de sauvegarder le calcul"})}},I=q=>{var F;u(q.calculation_type),h(q.initial_investment.toString()),p(q.expected_return.toString()),g(q.investment_duration_years.toString()),j((q.discount_rate*100).toString()),w(((F=q.annual_costs)==null?void 0:F.toString())||"0"),C(q.results),e({title:"Calcul charg",description:`Simulation "${q.name}" charge avec succs`})};return r?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(jy,{className:"mr-3 h-8 w-8 text-primary"}),"Calculateur de ROI"]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:T,children:[n.jsx(Ta,{className:"mr-2 h-4 w-4"}),"Actualiser"]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Simulez le Retour sur Investissement"}),n.jsx(jt,{children:"Entrez les paramtres de votre investissement pour calculer le ROI"})]}),n.jsxs(ve,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"calculationType",children:"Type de calcul"}),n.jsxs(Ft,{value:c,onValueChange:u,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Choisir le type de calcul"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"simple",children:"ROI Simple"}),n.jsx(Ke,{value:"advanced",children:"ROI Actualis (VAN/TRI)"})]})]})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"coutTotal",children:"Cot Total de l'Investissement (FCFA)"}),n.jsx(De,{id:"coutTotal",type:"number",placeholder:"Ex: 50000000",value:d,onChange:q=>h(q.target.value)})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"revenuEstime",children:"Revenu/Valeur de Revente Estim (FCFA)"}),n.jsx(De,{id:"revenuEstime",type:"number",placeholder:"Ex: 65000000",value:m,onChange:q=>p(q.target.value)})]}),c==="advanced"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"dureeInvestissement",children:"Dure de l'investissement (annes)"}),n.jsx(De,{id:"dureeInvestissement",type:"number",placeholder:"Ex: 5",value:v,onChange:q=>g(q.target.value)})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"tauxActualisation",children:"Taux d'actualisation (%)"}),n.jsx(De,{id:"tauxActualisation",type:"number",step:"0.1",placeholder:"Ex: 5",value:y,onChange:q=>j(q.target.value)})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"fraisAnnuels",children:"Frais annuels (FCFA)"}),n.jsx(De,{id:"fraisAnnuels",type:"number",placeholder:"Ex: 500000",value:_,onChange:q=>w(q.target.value)})]})]}),n.jsxs(Y,{onClick:M,disabled:i,className:"w-full",children:[i?n.jsx(Ta,{className:"mr-2 h-4 w-4 animate-spin"}):n.jsx(Br,{className:"mr-2 h-4 w-4"}),"Calculer le ROI"]}),P&&n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(De,{placeholder:"Nom de la simulation",value:A,onChange:q=>S(q.target.value)}),n.jsx(Y,{onClick:O,variant:"outline",children:n.jsx(vk,{className:"h-4 w-4"})})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[P&&n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Rsultats du calcul"}),n.jsx(jt,{children:P.type==="simple"?"Calcul ROI simple":"Calcul ROI actualis"})]}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-4",children:[P.type==="simple"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-green-800 dark:text-green-200",children:"ROI Total"}),n.jsxs("p",{className:"text-4xl font-bold text-green-600",children:[P.roiSimple,"%"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"p-3 border rounded",children:[n.jsx("span",{className:"text-muted-foreground",children:"ROI Annualis:"}),n.jsxs("p",{className:"text-lg font-bold",children:[P.roiAnnualise,"%"]})]}),n.jsxs("div",{className:"p-3 border rounded",children:[n.jsx("span",{className:"text-muted-foreground",children:"Gain/Perte:"}),n.jsxs("p",{className:`text-lg font-bold ${parseFloat(P.gain)>=0?"text-green-600":"text-red-600"}`,children:[parseFloat(P.gain).toLocaleString()," FCFA"]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[n.jsx("p",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200",children:"Valeur Actuelle Nette"}),n.jsxs("p",{className:`text-4xl font-bold ${parseFloat(P.van)>=0?"text-green-600":"text-red-600"}`,children:[parseFloat(P.van).toLocaleString()," FCFA"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"p-3 border rounded",children:[n.jsx("span",{className:"text-muted-foreground",children:"TRI:"}),n.jsxs("p",{className:"text-lg font-bold",children:[P.tri,"%"]})]}),n.jsxs("div",{className:"p-3 border rounded",children:[n.jsx("span",{className:"text-muted-foreground",children:"ROI Actualis:"}),n.jsxs("p",{className:"text-lg font-bold",children:[P.roiActualise,"%"]})]})]})]}),n.jsxs("div",{className:"p-3 bg-muted rounded",children:[n.jsx("strong",{children:"Conclusion:"})," ",P.rentabilite]})]})})]}),o.length>0&&n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(AA,{className:"h-5 w-5"}),"Calculs sauvegards"]}),n.jsx(jt,{children:"Vos simulations rcentes"})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:o.map(q=>n.jsxs("div",{className:"flex justify-between items-center p-2 border rounded hover:bg-muted/50 cursor-pointer",onClick:()=>I(q),children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:q.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(q.created_at).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm font-medium",children:q.calculation_type==="simple"?"ROI Simple":"ROI Actualis"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(q.initial_investment/1e6).toFixed(1),"M FCFA"]})]})]},q.id))})})]})]})]})]})},WUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState("all");x.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{a(!0);const{data:S,error:P}=await pe.from("investments").select(`
          *,
          parcels:parcel_id(*)
        `).eq("investor_id",t.id).order("created_at",{ascending:!1});P&&P.code!=="PGRST116"&&console.error("Erreur chargement investissements:",P),s(S||[])}catch(S){console.error("Erreur chargement investissements:",S),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les investissements"})}finally{a(!1)}},h=S=>{const P=S.initial_investment||0,C=S.current_value||0;return P>0?((C-P)/P*100).toFixed(1):0},m=S=>{const P=parseFloat(h(S)),T=(S.holding_period_months||1)/12;return T>0?(P/T).toFixed(1):0},p=()=>r.reduce((S,P)=>S+(P.current_value||0),0),v=()=>r.reduce((S,P)=>S+(P.initial_investment||0),0),g=()=>p()-v(),y=S=>{switch(S){case"active":return"text-green-600 bg-green-50";case"in_progress":return"text-blue-600 bg-blue-50";case"completed":return"text-gray-600 bg-gray-50";case"sold":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},j=S=>{switch(S){case"active":return"Actif";case"in_progress":return"En cours";case"completed":return"Termin";case"sold":return"Vendu";default:return S}},_=S=>{switch(S){case"purchase":return"Achat direct";case"rental":return"Investissement locatif";case"development":return"Dveloppement";case"flip":return"Revente rapide";default:return S}},w=S=>{switch(S){case"value_appreciation":return"Plus-value";case"rental_income":return"Revenus locatifs";case"development":return"Dveloppement";case"mixed":return"Mixte";default:return S}},A=r.filter(S=>{var T,M,z,O;const P=((M=(T=S.parcels)==null?void 0:T.title)==null?void 0:M.toLowerCase().includes(o.toLowerCase()))||((O=(z=S.parcels)==null?void 0:z.location)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))||S.id.toLowerCase().includes(o.toLowerCase()),C=c==="all"||S.status===c;return P&&C});return i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(Tt,{})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[n.jsx(Br,{className:"mr-3 h-8 w-8"}),"Mes Investissements"]}),n.jsx("p",{className:"text-gray-600",children:"Suivez la performance de votre portefeuille immobilier"})]}),n.jsxs(Y,{className:"gap-2",children:[n.jsx(Ds,{className:"h-4 w-4"}),"Nouvel Investissement"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valeur Totale"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(p()/1e6).toFixed(1),"M"]})]}),n.jsx(fs,{className:"h-8 w-8 text-blue-600"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Capital Investi"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[(v()/1e6).toFixed(1),"M"]})]}),n.jsx(_y,{className:"h-8 w-8 text-purple-600"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gain/Perte"}),n.jsxs("p",{className:`text-2xl font-bold ${g()>=0?"text-green-600":"text-red-600"}`,children:[g()>=0?"+":"",(g()/1e6).toFixed(1),"M"]})]}),n.jsx(na,{className:"h-8 w-8 text-green-600"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ROI Global"}),n.jsxs("p",{className:`text-2xl font-bold ${g()>=0?"text-green-600":"text-red-600"}`,children:[v()>0?(g()/v()*100).toFixed(1):"0","%"]})]}),n.jsx(Br,{className:"h-8 w-8 text-green-600"})]})})})]}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher un investissement...",value:o,onChange:S=>l(S.target.value),className:"pl-10"})]})}),n.jsx("div",{children:n.jsxs(Ft,{value:c,onValueChange:u,children:[n.jsx(Dt,{className:"w-[180px]",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"active",children:"Actif"}),n.jsx(Ke,{value:"in_progress",children:"En cours"}),n.jsx(Ke,{value:"completed",children:"Termin"}),n.jsx(Ke,{value:"sold",children:"Vendu"})]})]})})]})})}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Portefeuille d'Investissements"}),n.jsx(jt,{children:"Dtail de vos investissements immobiliers"})]}),n.jsx(ve,{children:A.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Br,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r.length===0?"Aucun investissement":"Aucun rsultat"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.length===0?"Commencez votre premier investissement immobilier":"Essayez de modifier vos critres de recherche"})]}):n.jsx("div",{className:"space-y-4",children:A.map(S=>{var P,C;return n.jsx(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:((P=S.parcels)==null?void 0:P.title)||`Investissement ${S.id}`}),n.jsx(Ge,{className:y(S.status),children:j(S.status)}),n.jsx(Ge,{variant:"outline",children:_(S.investment_type)})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Investi:"}),n.jsxs("p",{className:"font-medium text-blue-600",children:[(S.initial_investment/1e6).toFixed(1),"M"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Valeur actuelle:"}),n.jsxs("p",{className:"font-medium text-green-600",children:[(S.current_value/1e6).toFixed(1),"M"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"ROI:"}),n.jsxs("p",{className:`font-medium ${parseFloat(h(S))>=0?"text-green-600":"text-red-600"}`,children:[h(S),"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"ROI annualis:"}),n.jsxs("p",{className:`font-medium ${parseFloat(m(S))>=0?"text-green-600":"text-red-600"}`,children:[m(S),"%"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Stratgie:"}),n.jsx("p",{className:"font-medium",children:w(S.investment_strategy)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Date achat:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sc,{className:"h-3 w-3"}),n.jsx("p",{className:"font-medium",children:new Date(S.purchase_date).toLocaleDateString("fr-FR")})]})]})]}),((C=S.parcels)==null?void 0:C.location)&&n.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[n.jsx(jr,{className:"h-3 w-3"}),S.parcels.location]}),S.notes&&n.jsx("div",{className:"mt-2",children:n.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-2 rounded",children:S.notes})})]})})},S.id)})})})]})]})},GUe=()=>{const{toast:e}=pt(),[t,r]=x.useState(!0),[s,i]=x.useState(!1),[a,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState(""),h=async()=>{i(!0);try{const{data:y,error:j}=await Je.supabaseRaw("transactions");if(j)throw j;const{data:_,error:w}=await Je.supabaseRaw("notaire_dossiers");if(w)throw w;o(y||[]),c(_||[])}catch(y){console.error("Erreur chargement diligence:",y),e({title:"Erreur",description:"Donnes diligence indisponibles."})}finally{r(!1),i(!1)}};x.useEffect(()=>{h()},[]);const m=y=>{var _;let j=80;return y.status&&y.status.toLowerCase().includes("annul")&&(j-=40),(!y.documents||((_=y.documents)==null?void 0:_.length)===0)&&(j-=15),y.workflow_step&&y.workflow_step.toLowerCase().includes("blocage")&&(j-=25),Math.max(0,Math.min(100,j))},p=y=>{var _;let j=75;return y.status&&y.status.toLowerCase().includes("verif")&&(j+=5),y.notes&&y.notes.toLowerCase().includes("litige")&&(j-=35),(!y.documents||((_=y.documents)==null?void 0:_.length)===0)&&(j-=10),Math.max(0,Math.min(100,j))},v=a.filter(y=>!u||(y.reference||"").toLowerCase().includes(u.toLowerCase())),g=l.filter(y=>!u||(y.reference||"").toLowerCase().includes(u.toLowerCase()));return n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex flex-wrap justify-between gap-4 items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[n.jsx(Ys,{className:"h-7 w-7 mr-2 text-primary"}),"Diligence Raisonnable"]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-prose mt-1",children:"Vue synthtique des transactions et dossiers notariaux avec un score indicatif de risque."})]}),n.jsxs(Y,{size:"sm",variant:"outline",onClick:h,disabled:s,children:[n.jsx(Ta,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Rafrachir"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"pb-3",children:[n.jsx(ke,{className:"text-base",children:"Recherche"}),n.jsx(jt,{children:"Filtrer par rfrence."})]}),n.jsx(ve,{className:"flex gap-3",children:n.jsxs("div",{className:"relative flex-grow max-w-sm",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rfrence...",className:"pl-8",value:u,onChange:y=>d(y.target.value)})]})})]}),t?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(Tt,{size:"large"})}):n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs(he,{className:"overflow-hidden",children:[n.jsxs(Ce,{className:"pb-2",children:[n.jsxs(ke,{className:"text-lg flex items-center gap-2",children:["Transactions (",v.length,")"]}),n.jsx(jt,{className:"text-xs",children:"Score bas sur statut, documents & workflow."})]}),n.jsxs(ve,{className:"space-y-3 max-h-[500px] overflow-auto pr-2",children:[v.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aucune transaction."}),v.map(y=>{const j=m(y);return n.jsxs("div",{className:"p-3 border rounded-md bg-card/50 hover:bg-card/70 transition-colors",children:[n.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[n.jsx("span",{children:y.reference}),n.jsxs(Ge,{variant:j>=70?"success":j>=40?"warning":"destructive",className:"text-[10px]",children:["Score ",j]})]}),n.jsxs("p",{className:"text-xs mt-1 text-muted-foreground flex items-center gap-1",children:[n.jsx(Cr,{className:"h-3 w-3"})," Statut: ",y.status||""]}),n.jsxs("p",{className:"text-[11px] mt-1 text-muted-foreground line-clamp-2",children:["Workflow: ",y.workflow_step||""]})]},y.id)})]})]}),n.jsxs(he,{className:"overflow-hidden",children:[n.jsxs(Ce,{className:"pb-2",children:[n.jsxs(ke,{className:"text-lg flex items-center gap-2",children:["Dossiers Notariaux (",g.length,")"]}),n.jsx(jt,{className:"text-xs",children:"Score bas sur statut, notes & documents."})]}),n.jsxs(ve,{className:"space-y-3 max-h-[500px] overflow-auto pr-2",children:[g.length===0&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Aucun dossier."}),g.map(y=>{const j=p(y);return n.jsxs("div",{className:"p-3 border rounded-md bg-card/50 hover:bg-card/70 transition-colors",children:[n.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[n.jsx("span",{children:y.reference}),n.jsxs(Ge,{variant:j>=70?"success":j>=40?"warning":"destructive",className:"text-[10px]",children:["Score ",j]})]}),n.jsxs("p",{className:"text-xs mt-1 text-muted-foreground flex items-center gap-1",children:[n.jsx(kr,{className:"h-3 w-3"})," Statut: ",y.status||""]}),n.jsxs("p",{className:"text-[11px] mt-1 text-muted-foreground line-clamp-2",children:["Type: ",y.type||""]})]},y.id)})]})]})]})]})},KUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(""),[c,u]=x.useState("all"),[d,h]=x.useState(null),[m,p]=x.useState(!1),[v,g]=x.useState(!1),[y,j]=x.useState(!1),[_,w]=x.useState({name:"",description:"",location:"",budget:"",status:"planning"});x.useEffect(()=>{t&&A()},[t]);const A=async()=>{try{a(!0);const{data:z,error:O}=await pe.from("parcels").select(`
          *,
          users!inner(id, full_name)
        `).eq("owner_id",t.id).eq("type","development").order("created_at",{ascending:!1});if(O)throw O;const I=z.map(q=>({id:q.id,name:q.name||`Projet ${q.reference}`,description:q.description||"Aucune description",location:q.location_name||q.location||"Non spcifi",budget:q.price||0,status:q.status||"planning",surface_area:q.surface_area,reference:q.reference,created_at:q.created_at,updated_at:q.updated_at}));s(I)}catch(z){console.error("Erreur chargement projets:",z),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les projets"})}finally{a(!1)}},S=async()=>{try{j(!0);const{error:z}=await pe.from("parcels").insert({name:_.name,description:_.description,location_name:_.location,price:parseFloat(_.budget)||0,status:_.status,type:"development",owner_id:t.id,reference:`DEV-${Date.now()}`,legal_status:"private"});if(z)throw z;e({title:"Projet cr",description:"Votre nouveau projet a t cr avec succs"}),await A(),g(!1),w({name:"",description:"",location:"",budget:"",status:"planning"})}catch(z){console.error("Erreur cration projet:",z),e({variant:"destructive",title:"Erreur",description:"Impossible de crer le projet"})}finally{j(!1)}},P=z=>({planning:"Planification",in_progress:"En cours",completed:"Termin",on_hold:"En attente",cancelled:"Annul"})[z]||z,C=z=>{const O={planning:"secondary",in_progress:"default",completed:"default",on_hold:"secondary",cancelled:"destructive"};return n.jsx(Ge,{variant:O[z]||"secondary",children:P(z)})},T=z=>({planning:10,in_progress:50,completed:100,on_hold:25,cancelled:0})[z]||0,M=r.filter(z=>{const O=z.name.toLowerCase().includes(o.toLowerCase())||z.location.toLowerCase().includes(o.toLowerCase())||z.reference.toLowerCase().includes(o.toLowerCase()),I=c==="all"||z.status===c;return O&&I});return i?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Vn,{className:"mr-3 h-8 w-8"}),"Mes Projets de Dveloppement"]}),n.jsxs(Y,{onClick:()=>g(!0),children:[n.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Nouveau Projet"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Vn,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Projets"}),n.jsx("p",{className:"text-2xl font-bold",children:r.length})]})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(ln,{className:"h-8 w-8 text-orange-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En Cours"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(z=>z.status==="in_progress").length})]})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Br,{className:"h-8 w-8 text-green-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Termins"}),n.jsx("p",{className:"text-2xl font-bold",children:r.filter(z=>z.status==="completed").length})]})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(fs,{className:"h-8 w-8 text-purple-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Budget Total"}),n.jsxs("p",{className:"text-2xl font-bold",children:[r.reduce((z,O)=>z+(O.budget||0),0).toLocaleString("fr-FR")," FCFA"]})]})]})})})]}),n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Filtres"})}),n.jsx(ve,{children:n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx(De,{placeholder:"Rechercher par nom, localisation ou rfrence...",value:o,onChange:z=>l(z.target.value),className:"max-w-md"})}),n.jsxs(Ft,{value:c,onValueChange:u,children:[n.jsx(Dt,{className:"w-48",children:n.jsx(zt,{placeholder:"Filtrer par statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"planning",children:"Planification"}),n.jsx(Ke,{value:"in_progress",children:"En cours"}),n.jsx(Ke,{value:"completed",children:"Termin"}),n.jsx(Ke,{value:"on_hold",children:"En attente"}),n.jsx(Ke,{value:"cancelled",children:"Annul"})]})]})]})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{children:["Projets (",M.length,")"]}),n.jsx(jt,{children:"Grez vos projets de dveloppement immobilier"})]}),n.jsx(ve,{children:M.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Vn,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),n.jsx("p",{children:"Aucun projet trouv"}),n.jsx(Y,{variant:"outline",className:"mt-4",onClick:()=>g(!0),children:"Crer votre premier projet"})]}):n.jsxs(Ma,{children:[n.jsx(Ia,{children:n.jsxs(rn,{children:[n.jsx(yt,{children:"Projet"}),n.jsx(yt,{children:"Localisation"}),n.jsx(yt,{children:"Budget"}),n.jsx(yt,{children:"Statut"}),n.jsx(yt,{children:"Progrs"}),n.jsx(yt,{children:"Date de cration"}),n.jsx(yt,{children:"Actions"})]})}),n.jsx(Ra,{children:M.map(z=>n.jsxs(rn,{children:[n.jsx(vt,{children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:z.name}),n.jsx("div",{className:"text-sm text-muted-foreground",children:z.reference})]})}),n.jsx(vt,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(jr,{className:"h-4 w-4 mr-1 text-muted-foreground"}),z.location]})}),n.jsxs(vt,{children:[n.jsxs("div",{className:"font-medium",children:[z.budget.toLocaleString("fr-FR")," FCFA"]}),z.surface_area&&n.jsxs("div",{className:"text-sm text-muted-foreground",children:[z.surface_area," m"]})]}),n.jsx(vt,{children:C(z.status)}),n.jsxs(vt,{children:[n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${T(z.status)}%`}})}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[T(z.status),"%"]})]}),n.jsx(vt,{children:new Date(z.created_at).toLocaleDateString("fr-FR")}),n.jsx(vt,{children:n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>{h(z),p(!0)},children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Dtails"]})})]},z.id))})]})})]}),n.jsx(on,{open:v,onOpenChange:g,children:n.jsxs(Qr,{children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Nouveau Projet de Dveloppement"}),n.jsx(Ur,{children:"Crez un nouveau projet de dveloppement immobilier"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx($e,{htmlFor:"name",children:"Nom du projet"}),n.jsx(De,{id:"name",value:_.name,onChange:z=>w({..._,name:z.target.value}),placeholder:"Ex: Rsidence Les Palmiers"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"description",children:"Description"}),n.jsx(ms,{id:"description",value:_.description,onChange:z=>w({..._,description:z.target.value}),placeholder:"Dcrivez votre projet..."})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"location",children:"Localisation"}),n.jsx(De,{id:"location",value:_.location,onChange:z=>w({..._,location:z.target.value}),placeholder:"Ex: Dakar, Almadies"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"budget",children:"Budget (FCFA)"}),n.jsx(De,{id:"budget",type:"number",value:_.budget,onChange:z=>w({..._,budget:z.target.value}),placeholder:"Ex: 50000000"})]}),n.jsxs("div",{children:[n.jsx($e,{htmlFor:"status",children:"Statut initial"}),n.jsxs(Ft,{value:_.status,onValueChange:z=>w({..._,status:z}),children:[n.jsx(Dt,{children:n.jsx(zt,{})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"planning",children:"Planification"}),n.jsx(Ke,{value:"in_progress",children:"En cours"}),n.jsx(Ke,{value:"on_hold",children:"En attente"})]})]})]})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>g(!1),disabled:y,children:"Annuler"}),n.jsx(Y,{onClick:S,disabled:y||!_.name,children:y?"Cration...":"Crer le projet"})]})]})}),n.jsx(on,{open:m,onOpenChange:p,children:n.jsxs(Qr,{className:"max-w-2xl",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Dtails du Projet"}),n.jsx(Ur,{children:"Informations compltes sur le projet de dveloppement"})]}),d&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Nom du projet"}),n.jsx("p",{className:"font-medium",children:d.name})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Rfrence"}),n.jsx("p",{className:"font-medium",children:d.reference})]})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Description"}),n.jsx("p",{className:"text-sm mt-1",children:d.description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Localisation"}),n.jsx("p",{className:"font-medium",children:d.location})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Budget"}),n.jsxs("p",{className:"font-medium text-lg",children:[d.budget.toLocaleString("fr-FR")," FCFA"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Statut"}),C(d.status)]}),n.jsxs("div",{children:[n.jsx($e,{children:"Progrs"}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${T(d.status)}%`}})}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[T(d.status),"%"]})]})]}),d.surface_area&&n.jsxs("div",{children:[n.jsx($e,{children:"Surface"}),n.jsxs("p",{className:"font-medium",children:[d.surface_area," m"]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx($e,{children:"Date de cration"}),n.jsx("p",{className:"text-sm",children:new Date(d.created_at).toLocaleDateString("fr-FR")})]}),n.jsxs("div",{children:[n.jsx($e,{children:"Dernire mise  jour"}),n.jsx("p",{className:"text-sm",children:new Date(d.updated_at).toLocaleDateString("fr-FR")})]})]})]})]})})]})},m$=e=>e!=null&&e.units_total&&e.units_total>0?Math.min(100,Math.round((e.units_sold||0)/e.units_total*100)):{Faisabilit:10,Planification:25,"En construction":60,Achev:100}[e.status]??0,ZUe=()=>{const{toast:e}=pt();ar();const[t,r]=x.useState([]),[s,i]=x.useState(!0),[a,o]=x.useState(!1),l=async()=>{try{o(!0);const h=(await Je.getPromoteurProjects()).map(m=>({id:m.id,name:m.name,status:m.status,progress:m$(m),nextMilestone:m.workflow_next_milestone||"",dueDate:m.estimated_completion||""}));r(h)}catch{e({title:"Erreur",description:"Impossible de charger les projets promoteur."})}finally{i(!1),o(!1)}};x.useEffect(()=>{l()},[]);const c=async d=>{const h=["Faisabilit","Planification","En construction","Achev"],m=h.indexOf(d.status),p=m>=0&&m<h.length-1?h[m+1]:null;if(!p){e({title:"Statut",description:"Projet dj au dernier statut."});return}try{await Je.updatePromoteurProjectStatus(d.id,p)&&(r(g=>g.map(y=>y.id===d.id?{...y,status:p,progress:m$({...y,status:p})}:y)),e({title:"Statut mis  jour",description:`${d.name}: ${p}`}))}catch{e({variant:"destructive",title:"Erreur",description:"Impossible de mettre  jour le statut."})}},u=d=>{switch(d){case"En construction":return"warning";case"Planification":return"default";case"Faisabilit":return"secondary";default:return"outline"}};return s?n.jsx("div",{className:"flex items-center justify-center h-full p-8",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(Xf,{className:"mr-3 h-8 w-8 text-primary"}),"Suivi de Construction"]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:l,disabled:a,className:"flex items-center",children:[n.jsx(Ta,{className:`mr-2 h-4 w-4 ${a?"animate-spin":""}`})," Rafrachir"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Avancement des Projets"}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher un projet...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",onClick:()=>handleAction("Filtres de projets appliqus."),children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer"]})]})]}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-4",children:[t.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground p-4 border rounded-md",children:"Aucun projet trouv. Crez un projet dans la base (table promoteur_projects) pour le voir ici."}),t.map(d=>n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[n.jsx(ke,{children:d.name}),n.jsx(Ge,{variant:u(d.status),className:"mt-2 sm:mt-0",children:d.status})]})}),n.jsxs(ve,{children:[n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{children:"Progression"}),n.jsxs("span",{children:[d.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:n.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${d.progress}%`}})})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Prochaine tape: ",d.nextMilestone," (chance: ",d.dueDate,")"]}),n.jsxs("div",{className:"flex flex-wrap space-x-2 mt-4",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>c(d),children:[n.jsx(A1,{className:"mr-1 h-4 w-4"})," Avancer statut"]}),n.jsxs(Y,{variant:"outline",size:"sm",disabled:!0,children:[n.jsx(Sc,{className:"mr-1 h-4 w-4"})," Calendrier (bientt)"]}),n.jsx(Y,{asChild:!0,variant:"link",size:"sm",className:"p-0 h-auto",children:n.jsx(dt,{to:"/dashboard/sales",children:"Voir les ventes"})})]})]})]},d.id))]})})]})]})},XUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState([]),d=y=>{const j={sold:0,reserved:0,available:0};y.forEach(_=>{switch((_.status||"").toLowerCase()){case"sold":case"vendu":j.sold++;break;case"reserved":case"rserv":case"reserve":j.reserved++;break;default:j.available++;break}}),u([{name:"Vendus",value:j.sold,fill:"hsl(var(--chart-success))"},{name:"Rservs",value:j.reserved,fill:"hsl(var(--chart-warning))"},{name:"Disponibles",value:j.available,fill:"hsl(var(--chart-info))"}])},h=async()=>{try{if(l(!0),!(t!=null&&t.id)){s([]),u([]);return}const j=(await Je.getUnitsForPromoteur(t.id)||[]).map(_=>({project:_.promoteur_projects&&_.promoteur_projects.name||"Projet",lot:_.reference||`Lot-${_.id}`,client:_.client_name||"",status:p(_.status),price:_.price?m(_.price):""}));s(j),d(j)}catch{e({title:"Erreur",description:"Impossible de charger les ventes."})}finally{a(!1),l(!1)}},m=y=>new Intl.NumberFormat("fr-FR").format(y)+" XOF",p=y=>{if(!y)return"Disponible";const j=y.toLowerCase();return["sold","vendu"].includes(j)?"Vendu":["reserved","rserv","reserve"].includes(j)?"Rserv":"Disponible"};x.useEffect(()=>{h()},[]);const v=y=>{e({title:"Gestion indisponible",description:"Mise  jour des lots  venir (backend requis)."})},g=y=>{switch(y){case"Vendu":return"success";case"Rserv":return"warning";case"Disponible":return"info";default:return"outline"}};return i?n.jsx("div",{className:"flex items-center justify-center h-full p-8",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(fs,{className:"mr-3 h-8 w-8 text-primary"}),"Ventes & Commercialisation"]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:h,disabled:o,className:"flex items-center",children:[n.jsx(Ta,{className:`mr-2 h-4 w-4 ${o?"animate-spin":""}`})," Rafrachir"]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Statut des Lots"}),n.jsx(jt,{children:"Vue d'ensemble de la commercialisation de vos projets."})]}),n.jsx(ve,{children:n.jsx(co,{width:"100%",height:250,children:n.jsxs(ix,{data:c,margin:{top:5,right:20,left:-10,bottom:5},children:[n.jsx(um,{strokeDasharray:"3 3",vertical:!1}),n.jsx(La,{dataKey:"name"}),n.jsx(Li,{}),n.jsx(es,{contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))"}}),n.jsx(ao,{dataKey:"value",radius:[4,4,0,0]})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Suivi des Ventes"}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 pt-2",children:[n.jsxs("div",{className:"relative flex-grow",children:[n.jsx(wr,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(De,{placeholder:"Rechercher par lot, client...",className:"pl-8"})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"})," Filtrer"]})]})]}),n.jsx(ve,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left p-2 font-semibold",children:"Projet / Lot"}),n.jsx("th",{className:"text-left p-2 font-semibold hidden sm:table-cell",children:"Client"}),n.jsx("th",{className:"text-left p-2 font-semibold hidden md:table-cell",children:"Prix"}),n.jsx("th",{className:"text-left p-2 font-semibold",children:"Statut"}),n.jsx("th",{className:"text-right p-2 font-semibold",children:"Actions"})]})}),n.jsxs("tbody",{children:[r.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"Aucun lot trouv. Ajoutez des entres dans la table promoteur_project_units."})}),r.map(y=>n.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[n.jsxs("td",{className:"p-2",children:[n.jsx("p",{className:"font-medium",children:y.project}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Lot ",y.lot]})]}),n.jsx("td",{className:"p-2 hidden sm:table-cell",children:y.client}),n.jsx("td",{className:"p-2 hidden md:table-cell",children:y.price}),n.jsx("td",{className:"p-2",children:n.jsx(Ge,{variant:g(y.status),children:y.status})}),n.jsx("td",{className:"p-2 text-right",children:n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>v(),disabled:!0,children:[n.jsx(bs,{className:"mr-1 h-4 w-4 hidden sm:inline-block"}),"Grer"]})})]},y.lot))]})]})})})]})]})},YUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,h]=x.useState("all"),[m,p]=x.useState("all");x.useEffect(()=>{t&&v()},[t]);const v=async()=>{try{if(l(!0),!(t!=null&&t.id)){s([]);return}const{data:S,error:P}=await Je.supabaseClient.from("parcels").select(`
          *,
          agricultural_data:agricultural_data(*)
        `).eq("owner_id",t.id).or("usage.eq.agricultural,usage.eq.farming").order("created_at",{ascending:!1});P&&P.code!=="PGRST116"&&console.error("Erreur chargement parcelles:",P),s(S||[])}catch(S){console.error("Erreur chargement mes terres:",S),e({variant:"destructive",title:"Erreur",description:"Impossible de charger vos parcelles agricoles"})}finally{a(!1),l(!1)}},g=S=>{if(!S||!S[0])return{status:"unknown",label:"Inconnu",color:"secondary"};const C=S[0].crop_health_score||0;return C>=80?{status:"excellent",label:"Excellente",color:"success"}:C>=60?{status:"good",label:"Bonne",color:"info"}:C>=40?{status:"average",label:"Moyenne",color:"warning"}:{status:"poor",label:"Proccupante",color:"destructive"}},y=S=>!S||!S[0]?"Culture non spcifie":S[0].crop_type||"Culture non spcifie",j=S=>!S||!S[0]?null:S[0].expected_yield,_=S=>!S||!S[0]?null:S[0].last_activity_date,w=r.filter(S=>{var z,O;const P=y(S.agricultural_data);g(S.agricultural_data);const C=((z=S.title)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||((O=S.location)==null?void 0:O.toLowerCase().includes(c.toLowerCase()))||P.toLowerCase().includes(c.toLowerCase()),T=d==="all"||d==="active"&&S.status==="available"||d==="inactive"&&S.status!=="available",M=m==="all"||P.toLowerCase().includes(m.toLowerCase());return C&&T&&M}),A=Array.from(new Set(r.map(S=>y(S.agricultural_data)).filter(S=>S!=="Culture non spcifie")));return i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(Tt,{})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(ia,{className:"mr-3 h-8 w-8 text-primary"}),"Mes Parcelles Agricoles"]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-prose mt-1",children:"Grez et surveillez toutes vos terres agricoles"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:v,disabled:o,children:[n.jsx(Ta,{className:`mr-2 h-4 w-4 ${o?"animate-spin":""}`}),"Rafrachir"]}),n.jsxs(Y,{size:"sm",disabled:!0,title:"Recherche de parcelles  venir",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Trouver une nouvelle parcelle"]})]})]}),r.length>0&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total parcelles"}),n.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),n.jsx(ia,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Surface totale"}),n.jsxs("p",{className:"text-2xl font-bold",children:[r.reduce((S,P)=>S+(P.surface||0),0).toFixed(1)," Ha"]})]}),n.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 bg-blue-500 rounded-full"})})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cultures saines"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(S=>{const P=g(S.agricultural_data);return P.status==="excellent"||P.status==="good"}).length})]}),n.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"})})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ncessitent attention"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(S=>{const P=g(S.agricultural_data);return P.status==="average"||P.status==="poor"}).length})]}),n.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 bg-yellow-500 rounded-full"})})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"pb-3",children:[n.jsx(ke,{className:"text-base",children:"Filtres et recherche"}),n.jsx(jt,{children:"Trouvez rapidement vos parcelles"})]}),n.jsx(ve,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher...",value:c,onChange:S=>u(S.target.value),className:"pl-10"})]}),n.jsxs(Ft,{value:d,onValueChange:h,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"active",children:"Actives"}),n.jsx(Ke,{value:"inactive",children:"Inactives"})]})]}),n.jsxs(Ft,{value:m,onValueChange:p,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Type de culture"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les cultures"}),A.map(S=>n.jsx(Ke,{value:S,children:S},S))]})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"}),"Plus de filtres"]})]})})]}),n.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w.length===0?n.jsx("div",{className:"col-span-full",children:n.jsx(he,{children:n.jsxs(ve,{className:"p-8 text-center",children:[n.jsx(ia,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r.length===0?"Aucune parcelle agricole":"Aucun rsultat"}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:r.length===0?"Commencez par acqurir votre premire parcelle":"Essayez de modifier vos critres de recherche"}),r.length===0&&n.jsxs(Y,{className:"mt-4",size:"sm",disabled:!0,children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Trouver une parcelle"]})]})})}):w.map(S=>{const P=y(S.agricultural_data),C=g(S.agricultural_data),T=j(S.agricultural_data),M=_(S.agricultural_data);return n.jsx(Ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:n.jsxs(he,{className:"hover:shadow-md transition-shadow",children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"flex items-center justify-between",children:[n.jsx("span",{children:S.title||`Parcelle ${S.reference}`}),n.jsx(Ge,{variant:C.color,children:C.label})]}),n.jsxs(jt,{children:["Culture principale: ",P]})]}),n.jsxs(ve,{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Surface:"}),n.jsxs("p",{className:"font-medium",children:[S.surface||0," Ha"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),n.jsx("p",{className:"font-medium",children:S.status==="available"?"Active":"Inactive"})]}),T&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Rendement attendu:"}),n.jsxs("p",{className:"font-medium",children:[T," tonnes/Ha"]})]}),M&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Dernire activit:"}),n.jsx("p",{className:"font-medium",children:new Date(M).toLocaleDateString("fr-FR")})]})]}),S.location&&n.jsxs("div",{className:"text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Localisation:"}),n.jsx("p",{className:"font-medium",children:S.location})]}),n.jsxs("div",{className:"flex space-x-2 pt-2",children:[n.jsx(Y,{asChild:!0,variant:"outline",size:"sm",className:"flex-1",children:n.jsxs(dt,{to:`/parcelles/${S.id}`,children:[n.jsx(ox,{className:"mr-1 h-4 w-4"}),"Carte"]})}),n.jsx(Y,{asChild:!0,variant:"outline",size:"sm",className:"flex-1",children:n.jsxs(dt,{to:"/dashboard/logbook",children:[n.jsx(Zf,{className:"mr-1 h-4 w-4"}),"Journal"]})})]})]})]})},S.id)})})]})},JUe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,h]=x.useState("all");x.useEffect(()=>{t&&m()},[t]);const m=async()=>{try{if(l(!0),!(t!=null&&t.id)){s([]);return}const{data:w,error:A}=await Je.supabaseClient.from("soil_analyses").select(`
          *,
          parcels:parcel_id(*)
        `).eq("farmer_id",t.id).order("analysis_date",{ascending:!1});A&&A.code!=="PGRST116"&&console.error("Erreur chargement analyses:",A),s(w||[])}catch(w){console.error("Erreur chargement analyses de sol:",w),e({variant:"destructive",title:"Erreur",description:"Impossible de charger les analyses de sol"})}finally{a(!1),l(!1)}},p=w=>w?w<6?{status:"acidic",label:"Acide",color:"destructive"}:w>8?{status:"alkaline",label:"Alcalin",color:"warning"}:{status:"optimal",label:"Optimal",color:"success"}:{status:"unknown",label:"Inconnu",color:"secondary"},v=(w,A,S)=>!w||!A||!S?{status:"unknown",label:"Inconnu",color:"secondary"}:w<A?{status:"low",label:"Faible",color:"destructive"}:w>S?{status:"high",label:"lev",color:"warning"}:{status:"optimal",label:"Optimal",color:"success"},g=w=>{let A=0,S=0;const P=p(w.ph);return P.status==="optimal"?A+=25:P.status!=="unknown"&&(A+=10),S++,["nitrogen","phosphorus","potassium"].forEach(C=>{const T=v(w[C],w[`${C}_optimal_min`],w[`${C}_optimal_max`]);T.status==="optimal"?A+=15:T.status!=="unknown"&&(A+=5),S++}),w.organic_matter&&(w.organic_matter>=3?A+=20:w.organic_matter>=2?A+=15:A+=5,S++),S>0?Math.round(A/S*4):0},y=w=>w>=80?"success":w>=60?"warning":"destructive",j=r.filter(w=>{var P,C,T,M,z;const A=((C=(P=w.parcels)==null?void 0:P.title)==null?void 0:C.toLowerCase().includes(c.toLowerCase()))||((M=(T=w.parcels)==null?void 0:T.location)==null?void 0:M.toLowerCase().includes(c.toLowerCase()))||((z=w.notes)==null?void 0:z.toLowerCase().includes(c.toLowerCase())),S=d==="all"||w.parcel_id===d;return A&&S}),_=Array.from(new Set(r.map(w=>w.parcel_id).filter(Boolean)));return i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(Tt,{})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(rp,{className:"mr-3 h-8 w-8 text-primary"}),"Analyse des Sols"]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-prose mt-1",children:"Surveillez la qualit de vos sols et obtenez des recommandations personnalises"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:m,disabled:o,children:[n.jsx(Ta,{className:`mr-2 h-4 w-4 ${o?"animate-spin":""}`}),"Rafrachir"]}),n.jsxs(Y,{size:"sm",children:[n.jsx(rp,{className:"mr-2 h-4 w-4"}),"Nouvelle analyse"]})]})]}),r.length>0&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Analyses totales"}),n.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),n.jsx(rp,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sols sains"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(w=>g(w)>=80).length})]}),n.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Br,{className:"h-4 w-4 text-green-600"})})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ncessitent attention"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(w=>{const A=g(w);return A>=60&&A<80}).length})]}),n.jsx(kr,{className:"h-8 w-8 text-yellow-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sols dgrads"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.filter(w=>g(w)<60).length})]}),n.jsx("div",{className:"h-8 w-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(kr,{className:"h-4 w-4 text-red-600"})})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"pb-3",children:[n.jsx(ke,{className:"text-base",children:"Filtres et recherche"}),n.jsx(jt,{children:"Trouvez rapidement vos analyses de sol"})]}),n.jsx(ve,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher...",value:c,onChange:w=>u(w.target.value),className:"pl-10"})]}),n.jsxs(Ft,{value:d,onValueChange:h,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Parcelle"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les parcelles"}),_.map(w=>{var S;const A=r.find(P=>P.parcel_id===w);return n.jsx(Ke,{value:w,children:((S=A==null?void 0:A.parcels)==null?void 0:S.title)||`Parcelle ${w}`},w)})]})]}),n.jsx(Y,{variant:"outline",disabled:!0,children:"Exporter rapport"})]})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Analyses de sol"}),n.jsxs(jt,{children:[j.length," analyse(s) disponible(s)"]})]}),n.jsx(ve,{children:j.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(rp,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r.length===0?"Aucune analyse de sol":"Aucun rsultat"}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:r.length===0?"Commencez par faire analyser vos sols":"Essayez de modifier vos critres de recherche"}),n.jsxs(Y,{className:"mt-4",size:"sm",children:[n.jsx(rp,{className:"mr-2 h-4 w-4"}),"Nouvelle analyse"]})]}):n.jsx("div",{className:"space-y-4",children:j.map(w=>{var P,C;const A=g(w),S=p(w.ph);return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border rounded-lg p-4 hover:bg-muted/30 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(rp,{className:"h-8 w-8 text-blue-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:((P=w.parcels)==null?void 0:P.title)||`Parcelle ${w.parcel_id}`}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(jr,{className:"h-3 w-3"}),((C=w.parcels)==null?void 0:C.location)||"Localisation non spcifie"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ge,{variant:y(A),children:["Score: ",A,"/100"]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(w.analysis_date).toLocaleDateString("fr-FR")})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"pH"}),n.jsx("p",{className:"text-2xl font-bold",children:w.ph||""}),n.jsx(Ge,{variant:S.color,className:"text-xs",children:S.label})]}),n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Azote (N)"}),n.jsx("p",{className:"text-lg font-bold",children:w.nitrogen||""}),n.jsx(Ge,{variant:v(w.nitrogen,w.nitrogen_optimal_min,w.nitrogen_optimal_max).color,className:"text-xs",children:v(w.nitrogen,w.nitrogen_optimal_min,w.nitrogen_optimal_max).label})]}),n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phosphore (P)"}),n.jsx("p",{className:"text-lg font-bold",children:w.phosphorus||""}),n.jsx(Ge,{variant:v(w.phosphorus,w.phosphorus_optimal_min,w.phosphorus_optimal_max).color,className:"text-xs",children:v(w.phosphorus,w.phosphorus_optimal_min,w.phosphorus_optimal_max).label})]}),n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Potassium (K)"}),n.jsx("p",{className:"text-lg font-bold",children:w.potassium||""}),n.jsx(Ge,{variant:v(w.potassium,w.potassium_optimal_min,w.potassium_optimal_max).color,className:"text-xs",children:v(w.potassium,w.potassium_optimal_min,w.potassium_optimal_max).label})]}),n.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"M.O. (%)"}),n.jsx("p",{className:"text-lg font-bold",children:w.organic_matter||""}),n.jsx(Ge,{variant:w.organic_matter>=3?"success":w.organic_matter>=2?"warning":"destructive",className:"text-xs",children:w.organic_matter>=3?"Bon":w.organic_matter>=2?"Moyen":"Faible"})]})]}),w.recommendations&&n.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Recommandations"}),n.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:w.recommendations})]}),w.notes&&n.jsxs("div",{className:"mt-3 p-2 bg-muted/50 rounded text-sm",children:[n.jsx("strong",{children:"Notes:"})," ",w.notes]})]},w.id)})})})]})]})},p$={"Champ Kagnout 1":{temp:"31C",humidity:"65%",wind:"12 km/h NE",forecast:"Ensoleill avec passages nuageux."},"Verger Anacardiers Bignona":{temp:"32C",humidity:"70%",wind:"10 km/h E",forecast:"Risque d'averses en soire."},"Marachage Niayes":{temp:"28C",humidity:"75%",wind:"20 km/h O",forecast:"Ciel voil, vent frais."}},QUe=()=>{const[e,t]=x.useState("Champ Kagnout 1"),[r,s]=x.useState(!0);x.useEffect(()=>{const a=setTimeout(()=>{s(!1)},500);return()=>clearTimeout(a)},[]);const i=p$[e];return r?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(Tt,{size:"large"})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[n.jsx(Tp,{className:"mr-3 h-8 w-8"}),"Mto Agricole"]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Prvisions par Parcelle"}),n.jsxs(Ft,{value:e,onValueChange:t,children:[n.jsx(Dt,{className:"w-[280px] mt-2",children:n.jsx(zt,{placeholder:"Slectionner une parcelle"})}),n.jsx($t,{children:Object.keys(p$).map(a=>n.jsx(Ke,{value:a,children:a},a))})]})]}),n.jsx(ve,{children:n.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("h2",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200",children:e}),n.jsx("p",{className:"text-lg text-blue-600 dark:text-blue-300",children:i.forecast}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-center",children:[n.jsxs("div",{className:"p-4 bg-white dark:bg-background rounded-lg",children:[n.jsx(ioe,{className:"h-6 w-6 mx-auto text-red-500"}),n.jsx("p",{className:"font-bold text-xl",children:i.temp}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Temprature"})]}),n.jsxs("div",{className:"p-4 bg-white dark:bg-background rounded-lg",children:[n.jsx(dk,{className:"h-6 w-6 mx-auto text-blue-500"}),n.jsx("p",{className:"font-bold text-xl",children:i.humidity}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Humidit"})]}),n.jsxs("div",{className:"p-4 bg-white dark:bg-background rounded-lg",children:[n.jsx(Noe,{className:"h-6 w-6 mx-auto text-gray-500"}),n.jsx("p",{className:"font-bold text-xl",children:i.wind}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Vent"})]})]})]})})]})]})},eHe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,h]=x.useState("all"),[m,p]=x.useState("all");x.useEffect(()=>{t&&v()},[t]);const v=async()=>{try{if(l(!0),!(t!=null&&t.id)){s([]);return}const{data:S,error:P}=await Je.supabaseClient.from("agricultural_logs").select(`
          *,
          parcels:parcel_id(*)
        `).eq("farmer_id",t.id).order("activity_date",{ascending:!1});P&&P.code!=="PGRST116"&&console.error("Erreur chargement journal:",P),s(S||[])}catch(S){console.error("Erreur chargement journal:",S),e({variant:"destructive",title:"Erreur",description:"Impossible de charger le journal d'exploitation"})}finally{a(!1),l(!1)}},g=S=>{switch(S){case"planting":return"";case"irrigation":return"";case"fertilizing":return"";case"harvesting":return"";case"treatment":return"";case"maintenance":return"";default:return""}},y=S=>{switch(S){case"planting":return"Plantation";case"irrigation":return"Irrigation";case"fertilizing":return"Fertilisation";case"harvesting":return"Rcolte";case"treatment":return"Traitement";case"maintenance":return"Maintenance";default:return"Autre"}},j=S=>{switch(S){case"completed":return"success";case"in_progress":return"warning";case"planned":return"info";default:return"outline"}},_=S=>{switch(S){case"completed":return"Termin";case"in_progress":return"En cours";case"planned":return"Planifi";default:return S}},w=r.filter(S=>{var M,z,O,I;const P=((M=S.description)==null?void 0:M.toLowerCase().includes(c.toLowerCase()))||((z=S.activity_type)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||((I=(O=S.parcels)==null?void 0:O.title)==null?void 0:I.toLowerCase().includes(c.toLowerCase())),C=d==="all"||S.activity_type===d,T=m==="all"||S.parcel_id===m;return P&&C&&T}),A=Array.from(new Set(r.map(S=>S.parcel_id).filter(Boolean)));return i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(Tt,{})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(Zf,{className:"mr-3 h-8 w-8 text-primary"}),"Journal d'Exploitation"]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-prose mt-1",children:"Suivez toutes vos activits agricoles et gardez un historique dtaill"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:v,disabled:o,children:[n.jsx(Ta,{className:`mr-2 h-4 w-4 ${o?"animate-spin":""}`}),"Rafrachir"]}),n.jsxs(Y,{size:"sm",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Nouvelle entre"]})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"pb-3",children:[n.jsx(ke,{className:"text-base",children:"Filtres et recherche"}),n.jsx(jt,{children:"Trouvez rapidement vos activits agricoles"})]}),n.jsx(ve,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher...",value:c,onChange:S=>u(S.target.value),className:"pl-10"})]}),n.jsxs(Ft,{value:d,onValueChange:h,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Type d'activit"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les activits"}),n.jsx(Ke,{value:"planting",children:"Plantation"}),n.jsx(Ke,{value:"irrigation",children:"Irrigation"}),n.jsx(Ke,{value:"fertilizing",children:"Fertilisation"}),n.jsx(Ke,{value:"harvesting",children:"Rcolte"}),n.jsx(Ke,{value:"treatment",children:"Traitement"}),n.jsx(Ke,{value:"maintenance",children:"Maintenance"})]})]}),n.jsxs(Ft,{value:m,onValueChange:p,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Parcelle"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Toutes les parcelles"}),A.map(S=>{var C;const P=r.find(T=>T.parcel_id===S);return n.jsx(Ke,{value:S,children:((C=P==null?void 0:P.parcels)==null?void 0:C.title)||`Parcelle ${S}`},S)})]})]}),n.jsxs(Y,{variant:"outline",disabled:!0,children:[n.jsx(Wo,{className:"mr-2 h-4 w-4"}),"Plus de filtres"]})]})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Historique des activits"}),n.jsxs(jt,{children:[w.length," entre(s) dans votre journal"]})]}),n.jsx(ve,{children:w.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Zf,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r.length===0?"Aucune entre dans le journal":"Aucun rsultat"}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:r.length===0?"Commencez  enregistrer vos activits agricoles":"Essayez de modifier vos critres de recherche"}),n.jsxs(Y,{className:"mt-4",size:"sm",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Ajouter une entre"]})]}):n.jsx("div",{className:"space-y-4",children:w.map(S=>{var P;return n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border rounded-lg p-4 hover:bg-muted/30 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:g(S.activity_type)}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:y(S.activity_type)}),n.jsx("p",{className:"text-sm text-muted-foreground",children:((P=S.parcels)==null?void 0:P.title)||`Parcelle ${S.parcel_id}`})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ge,{variant:j(S.status),children:_(S.status)}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Sc,{className:"h-3 w-3"}),new Date(S.activity_date).toLocaleDateString("fr-FR")]})]})]}),S.description&&n.jsx("p",{className:"text-sm text-gray-700 mb-3",children:S.description}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[S.duration_hours&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Dure:"}),n.jsxs("p",{className:"font-medium",children:[S.duration_hours,"h"]})]}),S.cost&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Cot:"}),n.jsxs("p",{className:"font-medium text-red-600",children:[S.cost.toLocaleString()," FCFA"]})]}),S.weather_conditions&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Mto:"}),n.jsx("p",{className:"font-medium",children:S.weather_conditions})]}),S.equipment_used&&n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"quipement:"}),n.jsx("p",{className:"font-medium",children:S.equipment_used})]})]}),S.notes&&n.jsxs("div",{className:"mt-3 p-2 bg-muted/50 rounded text-sm",children:[n.jsx("strong",{children:"Notes:"})," ",S.notes]})]},S.id)})})})]})]})},tHe=()=>{const{toast:e}=pt(),{user:t}=ar(),[r,s]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,h]=x.useState("all"),[m,p]=x.useState("all");x.useEffect(()=>{t&&v()},[t]);const v=async()=>{try{if(l(!0),!(t!=null&&t.id)){s([]);return}const{data:C,error:T}=await Je.supabaseClient.from("agricultural_equipment").select("*").eq("farmer_id",t.id).order("created_at",{ascending:!1});T&&T.code!=="PGRST116"&&console.error("Erreur chargement quipement:",T),s(C||[])}catch(C){console.error("Erreur chargement quipement:",C),e({variant:"destructive",title:"Erreur",description:"Impossible de charger l'inventaire d'quipement"})}finally{a(!1),l(!1)}},g=C=>{switch(C){case"tractor":return"";case"plow":return"";case"seeder":return"";case"harvester":return"";case"irrigation":return"";case"sprayer":return"";case"tools":return"";default:return""}},y=C=>{switch(C){case"tractor":return"Tracteur";case"plow":return"Charrue";case"seeder":return"Semoir";case"harvester":return"Moissonneuse";case"irrigation":return"Irrigation";case"sprayer":return"Pulvrisateur";case"tools":return"Outils";default:return"Autre"}},j=C=>{switch(C){case"operational":return"success";case"maintenance":return"warning";case"broken":return"destructive";case"retired":return"secondary";default:return"outline"}},_=C=>{switch(C){case"operational":return"Oprationnel";case"maintenance":return"En maintenance";case"broken":return"Dfaillant";case"retired":return"Retir";default:return C}},w=(C,T)=>{if(!C||!T)return"unknown";const M=new Date(C),O=Math.floor((new Date-M)/(1e3*60*60*24));return O>T?"overdue":O>T*.8?"due-soon":"ok"},A=C=>{switch(C){case"overdue":return n.jsx(kr,{className:"h-4 w-4 text-red-500"});case"due-soon":return n.jsx(kr,{className:"h-4 w-4 text-yellow-500"});case"ok":return n.jsx(Yf,{className:"h-4 w-4 text-green-500"});default:return n.jsx(Yf,{className:"h-4 w-4 text-gray-400"})}},S=r.filter(C=>{var O,I,q;const T=((O=C.name)==null?void 0:O.toLowerCase().includes(c.toLowerCase()))||((I=C.model)==null?void 0:I.toLowerCase().includes(c.toLowerCase()))||((q=C.manufacturer)==null?void 0:q.toLowerCase().includes(c.toLowerCase())),M=d==="all"||C.status===d,z=m==="all"||C.equipment_type===m;return T&&M&&z}),P=Array.from(new Set(r.map(C=>C.equipment_type).filter(Boolean)));return i?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(Tt,{})}):n.jsxs(Ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center",children:[n.jsx(Uv,{className:"mr-3 h-8 w-8 text-primary"}),"Matriel & quipement"]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-prose mt-1",children:"Grez votre inventaire et suivez la maintenance de vos quipements agricoles"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",onClick:v,disabled:o,children:[n.jsx(Ta,{className:`mr-2 h-4 w-4 ${o?"animate-spin":""}`}),"Rafrachir"]}),n.jsxs(Y,{size:"sm",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Ajouter quipement"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),n.jsx(Uv,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Oprationnels"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(C=>C.status==="operational").length})]}),n.jsx("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"})})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En maintenance"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(C=>C.status==="maintenance").length})]}),n.jsx("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"h-3 w-3 bg-yellow-500 rounded-full"})})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dfaillants"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.filter(C=>C.status==="broken").length})]}),n.jsx(kr,{className:"h-8 w-8 text-red-500"})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{className:"pb-3",children:[n.jsx(ke,{className:"text-base",children:"Filtres et recherche"}),n.jsx(jt,{children:"Trouvez rapidement vos quipements"})]}),n.jsx(ve,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx(De,{placeholder:"Rechercher...",value:c,onChange:C=>u(C.target.value),className:"pl-10"})]}),n.jsxs(Ft,{value:d,onValueChange:h,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Statut"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les statuts"}),n.jsx(Ke,{value:"operational",children:"Oprationnel"}),n.jsx(Ke,{value:"maintenance",children:"En maintenance"}),n.jsx(Ke,{value:"broken",children:"Dfaillant"}),n.jsx(Ke,{value:"retired",children:"Retir"})]})]}),n.jsxs(Ft,{value:m,onValueChange:p,children:[n.jsx(Dt,{children:n.jsx(zt,{placeholder:"Type"})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"all",children:"Tous les types"}),P.map(C=>n.jsx(Ke,{value:C,children:y(C)},C))]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(Y,{variant:"outline",size:"sm",disabled:!0,children:"Exporter"})})]})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Inventaire d'quipement"}),n.jsxs(jt,{children:[S.length," quipement(s) dans votre inventaire"]})]}),n.jsx(ve,{children:S.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Uv,{className:"mx-auto h-12 w-12 text-muted-foreground"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:r.length===0?"Aucun quipement enregistr":"Aucun rsultat"}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:r.length===0?"Commencez par ajouter votre premier quipement":"Essayez de modifier vos critres de recherche"}),n.jsxs(Y,{className:"mt-4",size:"sm",children:[n.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Ajouter un quipement"]})]}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(C=>{const T=w(C.last_maintenance,C.maintenance_interval_days);return n.jsxs(Ae.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-2xl",children:g(C.equipment_type)}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:C.name||"quipement sans nom"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:y(C.equipment_type)})]})]}),n.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[n.jsx(Ge,{variant:j(C.status),children:_(C.status)}),A(T)]})]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[C.manufacturer&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Fabricant:"}),n.jsx("span",{className:"font-medium",children:C.manufacturer})]}),C.model&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Modle:"}),n.jsx("span",{className:"font-medium",children:C.model})]}),C.year&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Anne:"}),n.jsx("span",{className:"font-medium",children:C.year})]}),C.purchase_price&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Prix d'achat:"}),n.jsxs("span",{className:"font-medium text-blue-600",children:[C.purchase_price.toLocaleString()," FCFA"]})]}),C.last_maintenance&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Dernier entretien:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sc,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:new Date(C.last_maintenance).toLocaleDateString("fr-FR")})]})]})]}),C.notes&&n.jsxs("div",{className:"mt-3 p-2 bg-muted/50 rounded text-sm",children:[n.jsx("strong",{children:"Notes:"})," ",C.notes]}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx(Y,{variant:"outline",size:"sm",className:"flex-1",children:"Modifier"}),n.jsx(Y,{variant:"outline",size:"sm",children:"Maintenance"})]})]},C.id)})})})]})]})};var y3="Progress",b3=100,[rHe,VHe]=ws(y3),[nHe,sHe]=rHe(y3),MY=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:i,getValueLabel:a=iHe,...o}=e;(i||i===0)&&!g$(i)&&console.error(aHe(`${i}`,"Progress"));const l=g$(i)?i:b3;s!==null&&!x$(s,l)&&console.error(oHe(`${s}`,"Progress"));const c=x$(s,l)?s:null,u=Zw(c)?a(c,l):void 0;return n.jsx(nHe,{scope:r,value:c,max:l,children:n.jsx(_t.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Zw(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":DY(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});MY.displayName=y3;var IY="ProgressIndicator",RY=x.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,i=sHe(IY,r);return n.jsx(_t.div,{"data-state":DY(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});RY.displayName=IY;function iHe(e,t){return`${Math.round(e/t*100)}%`}function DY(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Zw(e){return typeof e=="number"}function g$(e){return Zw(e)&&!isNaN(e)&&e>0}function x$(e,t){return Zw(e)&&!isNaN(e)&&e<=t&&e>=0}function aHe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${b3}\`.`}function oHe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${b3} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $Y=MY,lHe=RY;const FY=x.forwardRef(({className:e,value:t,...r},s)=>n.jsx($Y,{ref:s,className:st("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(lHe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));FY.displayName=$Y.displayName;const cHe=()=>{const{toast:e}=pt(),[t,r]=x.useState([]),[s,i]=x.useState(!0),{user:a}=yx();x.useEffect(()=>{(async()=>{try{i(!0);let p;a?p=await Je.getTransactionsByUser(a.id):p=await Je.getTransactions(10);const v=p.map((g,y)=>{var j;return{id:g.reference||`TXN-${String(y+1).padStart(3,"0")}`,parcelRef:g.parcel_reference||`ref-${(j=g.id)==null?void 0:j.substring(0,8)}`,type:g.type==="sale"?"Vente":"Achat",amount:g.amount||0,buyer:g.buyer_name||(g.users?g.users.full_name:"Acheteur non spcifi"),seller:g.seller_name||"Vendeur non spcifi",status:g.status==="completed"?"Finalis":g.status==="pending"?"En cours":g.status==="cancelled"?"Annul":"En attente",progress:g.status==="completed"?100:g.status==="pending"?50:25,steps:o(g.status),nextAction:l(g.status),created_at:g.created_at}});r(v)}catch(p){console.error("Erreur lors du chargement des transactions:",p),r(c()),e({variant:"destructive",title:"Erreur de chargement",description:"Impossible de charger vos transactions. Donnes de dmonstration affiches."})}finally{i(!1)}})()},[a,e]);const o=m=>{const p=[{name:"Offre accepte",completed:!0,date:"2025-01-05"},{name:"Documents vrifis",completed:!1,date:"2025-01-08"},{name:"Financement approuv",completed:!1,date:"2025-01-12"},{name:"Rendez-vous notaire",completed:!1,date:"2025-01-20"},{name:"Signature finale",completed:!1,date:"2025-01-25"}];switch(m){case"completed":return p.map(v=>({...v,completed:!0}));case"pending":return p.map((v,g)=>({...v,completed:g<3}));default:return p.map((v,g)=>({...v,completed:g<1}))}},l=m=>{switch(m){case"completed":return"Transaction termine";case"pending":return"Rendez-vous chez le notaire en attente";case"cancelled":return"Transaction annule";default:return"En attente de validation"}},c=()=>[{id:"TXN-001",parcelRef:"dk-alm-002",type:"Achat",amount:15e7,buyer:"Amadou Diallo",seller:"Fatou Ba",status:"En cours",progress:75,steps:[{name:"Offre accepte",completed:!0,date:"2025-01-05"},{name:"Documents vrifis",completed:!0,date:"2025-01-08"},{name:"Financement approuv",completed:!0,date:"2025-01-12"},{name:"Rendez-vous notaire",completed:!1,date:"2025-01-20"},{name:"Signature finale",completed:!1,date:"2025-01-25"}],nextAction:"Rendez-vous chez le notaire le 20/01/2025"},{id:"TXN-002",parcelRef:"sly-ngp-010",type:"Vente",amount:32e6,buyer:"Moussa Sow",seller:"Aissatou Diop",status:"Finalis",progress:100,steps:[{name:"Offre accepte",completed:!0,date:"2024-12-15"},{name:"Documents vrifis",completed:!0,date:"2024-12-18"},{name:"Financement approuv",completed:!0,date:"2024-12-22"},{name:"Rendez-vous notaire",completed:!0,date:"2025-01-05"},{name:"Signature finale",completed:!0,date:"2025-01-08"}],nextAction:"Transaction termine"}],u=m=>{const v={"En cours":{color:"bg-blue-100 text-blue-800",icon:ln},Finalis:{color:"bg-green-100 text-green-800",icon:Qt},"En attente":{color:"bg-yellow-100 text-yellow-800",icon:kr},Suspendu:{color:"bg-red-100 text-red-800",icon:kr}}[m]||{color:"bg-gray-100 text-gray-800",icon:ln};return n.jsxs(Ge,{className:v.color,children:[n.jsx(v.icon,{className:"h-3 w-3 mr-1"}),m]})},d=m=>new Intl.NumberFormat("fr-SN",{style:"currency",currency:"XOF",minimumFractionDigits:0}).format(m),h=m=>{e({title:"Notification envoye",description:`Toutes les parties ont t notifies pour la transaction ${m}.`})};return s?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),n.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement des transactions..."})]})}):n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Suivi des Transactions"}),n.jsx("p",{className:"text-muted-foreground",children:"Suivez l'avancement de vos transactions immobilires en temps rel"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transactions Actives"}),n.jsx("p",{className:"text-2xl font-bold",children:t.filter(m=>m.status==="En cours").length})]}),n.jsx(ln,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Finalises ce mois"}),n.jsx("p",{className:"text-2xl font-bold",children:t.filter(m=>m.status==="Finalis").length})]}),n.jsx(Qt,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valeur Totale"}),n.jsx("p",{className:"text-lg font-bold",children:d(t.reduce((m,p)=>m+p.amount,0))})]}),n.jsx(Hr,{className:"h-8 w-8 text-indigo-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Progression Moyenne"}),n.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(t.reduce((m,p)=>m+p.progress,0)/t.length),"%"]})]}),n.jsx(kr,{className:"h-8 w-8 text-yellow-500"})]})})})]}),n.jsx("div",{className:"space-y-6",children:t.map(m=>n.jsxs(he,{className:"hover:shadow-md transition-shadow",children:[n.jsx(Ce,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(ke,{className:"text-xl",children:m.id}),n.jsxs(jt,{children:[m.parcelRef," - ",m.type," de ",d(m.amount)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u(m.status),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[m.progress,"% complt"]})]})]})}),n.jsx(ve,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm border-b pb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Acheteur"}),n.jsx("p",{className:"font-medium",children:m.buyer})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-muted-foreground",children:"Vendeur"}),n.jsx("p",{className:"font-medium",children:m.seller})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[n.jsx("span",{children:"Progression globale"}),n.jsxs("span",{children:[m.progress,"%"]})]}),n.jsx(FY,{value:m.progress,className:"h-3"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-3",children:"tapes de la transaction"}),n.jsx("div",{className:"space-y-3",children:m.steps.map((p,v)=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`h-3 w-3 rounded-full ${p.completed?"bg-green-500":"bg-gray-300"}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`text-sm ${p.completed?"text-foreground":"text-muted-foreground"}`,children:p.name}),p.date&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.completed?"Termin le":"Prvu le"," ",new Date(p.date).toLocaleDateString("fr-FR")]})]}),p.completed&&n.jsx(Qt,{className:"h-4 w-4 text-green-500"})]},v))})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Prochaine action"}),n.jsx("p",{className:"text-sm text-blue-600",children:m.nextAction})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Voir dtails"]}),n.jsxs(Y,{variant:"outline",size:"sm",children:[n.jsx(Tl,{className:"h-4 w-4 mr-1"}),"Documents"]}),n.jsxs(Y,{size:"sm",onClick:()=>h(m.id),children:[n.jsx(Nl,{className:"h-4 w-4 mr-1"}),"Notifier les parties"]})]})]})})]},m.id))})]})},uHe=()=>{const[e,t]=x.useState("dakar"),[r,s]=x.useState("6months"),i={"6months":[{month:"Jan 2025",actual:98e3,predicted:102e3},{month:"Fv 2025",actual:101e3,predicted:105e3},{month:"Mar 2025",actual:null,predicted:108e3},{month:"Avr 2025",actual:null,predicted:111e3},{month:"Mai 2025",actual:null,predicted:114e3},{month:"Juin 2025",actual:null,predicted:117e3}],"1year":[{month:"Jan 2025",actual:98e3,predicted:102e3},{month:"Mar 2025",actual:null,predicted:108e3},{month:"Mai 2025",actual:null,predicted:114e3},{month:"Juil 2025",actual:null,predicted:12e4},{month:"Sep 2025",actual:null,predicted:125e3},{month:"Nov 2025",actual:null,predicted:13e4},{month:"Jan 2026",actual:null,predicted:135e3}]},a=[{name:"Urbanisation",impact:85,trend:"positive"},{name:"Infrastructures",impact:78,trend:"positive"},{name:"Dmographie",impact:92,trend:"positive"},{name:"conomie",impact:65,trend:"neutral"},{name:"Politique",impact:45,trend:"negative"}],o=[{zone:"Almadies",potential:"Trs lev",growth:"+25%",risk:"Faible",confidence:92,reasons:["Nouveau projet d'infrastructure","Zone touristique en expansion","Demande croissante"]},{zone:"Diamniadio",potential:"lev",growth:"+18%",risk:"Moyen",confidence:85,reasons:["Pole urbain en dveloppement","Aroport proche","Prix encore abordables"]},{zone:"This",potential:"Modr",growth:"+12%",risk:"Faible",confidence:78,reasons:["Croissance stable","Bonne accessibilit","March mature"]}],l=[{type:"opportunity",title:"Opportunit dtecte",message:"Les prix  Diamniadio sont 15% sous-valus selon nos modles.",confidence:87},{type:"warning",title:"Risque identifi",message:"Possible bulle spculative sur les terrains ctiers de Saly.",confidence:73},{type:"trend",title:"Tendance mergente",message:"Forte demande pour les terrains agricoles convertibles.",confidence:81}],c=d=>{const m={"Trs lev":{color:"bg-green-100 text-green-800"},lev:{color:"bg-blue-100 text-blue-800"},Modr:{color:"bg-yellow-100 text-yellow-800"},Faible:{color:"bg-red-100 text-red-800"}}[d]||{color:"bg-gray-100 text-gray-800"};return n.jsx(Ge,{className:m.color,children:d})},u=d=>{switch(d){case"opportunity":return n.jsx(Br,{className:"h-5 w-5 text-green-500"});case"warning":return n.jsx(ds,{className:"h-5 w-5 text-red-500"});case"trend":return n.jsx(Zs,{className:"h-5 w-5 text-blue-500"});default:return n.jsx(na,{className:"h-5 w-5 text-gray-500"})}};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Analyse Prdictive du March"}),n.jsx("p",{className:"text-muted-foreground",children:"Intelligence artificielle applique au march foncier sngalais"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:e==="dakar"?"default":"outline",size:"sm",onClick:()=>t("dakar"),children:"Dakar"}),n.jsx(Y,{variant:e==="thies"?"default":"outline",size:"sm",onClick:()=>t("thies"),children:"This"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:r==="6months"?"default":"outline",size:"sm",onClick:()=>s("6months"),children:"6 mois"}),n.jsx(Y,{variant:r==="1year"?"default":"outline",size:"sm",onClick:()=>s("1year"),children:"1 an"})]})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Zs,{className:"h-5 w-5"}),"Alertes Intelligence Artificielle"]}),n.jsx(jt,{children:"Insights automatiques bass sur l'analyse des donnes"})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:l.map((d,h)=>n.jsxs("div",{className:"flex items-start gap-3 p-4 border rounded-lg",children:[u(d.type),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold",children:d.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:d.message}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confiance: ",d.confidence,"%"]})]})]},h))})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsxs(ke,{children:["Prdictions de Prix - ",e]}),n.jsx(jt,{children:"volution prdite vs donnes historiques"})]}),n.jsx(ve,{children:n.jsx(co,{width:"100%",height:300,children:n.jsxs(d3,{data:i[r],children:[n.jsx(um,{strokeDasharray:"3 3"}),n.jsx(La,{dataKey:"month"}),n.jsx(Li,{}),n.jsx(es,{formatter:d=>[`${d==null?void 0:d.toLocaleString()} XOF/m`,""]}),n.jsx(kc,{type:"monotone",dataKey:"actual",stroke:"#10b981",strokeWidth:2,name:"Prix rels"}),n.jsx(kc,{type:"monotone",dataKey:"predicted",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"5 5",name:"Prdictions IA"})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Facteurs Influenant le March"}),n.jsx(jt,{children:"Impact des diffrents facteurs sur l'volution des prix"})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:a.map((d,h)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"font-medium",children:d.name}),d.trend==="positive"&&n.jsx(Br,{className:"h-4 w-4 text-green-500"}),d.trend==="negative"&&n.jsx(Cz,{className:"h-4 w-4 text-red-500"}),d.trend==="neutral"&&n.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${d.impact}%`}})}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.impact,"%"]})]})]},h))})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Recommandations d'Investissement"}),n.jsx(jt,{children:"Zones  fort potentiel identifies par l'IA"})]}),n.jsx(ve,{children:n.jsx("div",{className:"grid gap-4",children:o.map((d,h)=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-lg",children:d.zone}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Croissance prdite: ",d.growth]})]}),n.jsxs("div",{className:"text-right",children:[c(d.potential),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Confiance: ",d.confidence,"%"]})]})]}),n.jsx("div",{className:"flex items-center gap-4 mb-3 text-sm",children:n.jsxs("span",{children:["Risque: ",n.jsx("span",{className:"font-medium",children:d.risk})]})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Facteurs cls:"}),n.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:d.reasons.map((m,p)=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-1 w-1 bg-blue-500 rounded-full"}),m]},p))})]})]},h))})})]})]})},dHe=()=>{const{toast:e}=pt(),[t,r]=x.useState(!1),[s,i]=x.useState(null),[a,o]=x.useState(""),l=[{id:"DOC-001",name:"Contrat de Vente - dk-alm-002",type:"Contrat",status:"En attente signature",size:"2.4 MB",lastModified:"2025-01-15",signatories:[{name:"Amadou Diallo",role:"Acheteur",signed:!0,date:"2025-01-15"},{name:"Fatou Ba",role:"Vendeur",signed:!1,date:null},{name:"Me. Sow",role:"Notaire",signed:!1,date:null}],version:3,securityLevel:"Haute"},{id:"DOC-002",name:"Titre de Proprit - sly-ngp-010",type:"Titre",status:"Sign",size:"1.8 MB",lastModified:"2025-01-08",signatories:[{name:"Moussa Sow",role:"Propritaire",signed:!0,date:"2025-01-08"},{name:"Me. Diop",role:"Notaire",signed:!0,date:"2025-01-08"}],version:1,securityLevel:"Maximale"},{id:"DOC-003",name:"Certificat Conformit - dmn-cit-005",type:"Certificat",status:"Brouillon",size:"950 KB",lastModified:"2025-01-12",signatories:[{name:"Me. Ba",role:"Notaire",signed:!1,date:null}],version:1,securityLevel:"Standard"}],c=[{name:"Contrat de Vente Standard",description:"Modle standard pour les ventes immobilires"},{name:"Acte de Donation",description:"Transmission gratuite de proprit"},{name:"Promesse de Vente",description:"Engagement pralable  la vente"},{name:"Bail Emphytotique",description:"Contrat de bail de longue dure"}],u=p=>{const g={Sign:{color:"bg-green-100 text-green-800",icon:Qt},"En attente signature":{color:"bg-yellow-100 text-yellow-800",icon:ln},Brouillon:{color:"bg-gray-100 text-gray-800",icon:Cr},Expir:{color:"bg-red-100 text-red-800",icon:ln}}[p]||{color:"bg-gray-100 text-gray-800",icon:Cr};return n.jsxs(Ge,{className:g.color,children:[n.jsx(g.icon,{className:"h-3 w-3 mr-1"}),p]})},d=p=>{const g={Maximale:{color:"bg-red-100 text-red-800"},Haute:{color:"bg-orange-100 text-orange-800"},Standard:{color:"bg-blue-100 text-blue-800"}}[p]||{color:"bg-gray-100 text-gray-800"};return n.jsxs(Ge,{variant:"outline",className:g.color,children:[n.jsx(ns,{className:"h-3 w-3 mr-1"}),p]})},h=()=>{if(!a.trim()){e({variant:"destructive",title:"Erreur",description:"Veuillez saisir votre signature."});return}e({title:"Document sign",description:`Le document ${s==null?void 0:s.name} a t sign avec succs.`}),r(!1),o("")},m=p=>{e({title:"Lien de partage gnr",description:"Le lien scuris a t copi dans le presse-papiers."})};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Documents"}),n.jsx("p",{className:"text-muted-foreground",children:"Signatures lectroniques et gestion documentaire scurise"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",children:[n.jsx(Su,{className:"h-4 w-4 mr-2"}),"Importer"]}),n.jsxs(Y,{children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Nouveau Document"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Documents Actifs"}),n.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),n.jsx(Cr,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En attente signature"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.filter(p=>p.status==="En attente signature").length})]}),n.jsx(ln,{className:"h-8 w-8 text-yellow-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Signs ce mois"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.filter(p=>p.status==="Sign").length})]}),n.jsx(Qt,{className:"h-8 w-8 text-green-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Scurit Moyenne"}),n.jsx("p",{className:"text-2xl font-bold",children:"Haute"})]}),n.jsx(ns,{className:"h-8 w-8 text-indigo-500"})]})})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Documents Rcents"}),n.jsx(jt,{children:"Tous vos documents avec statut de signature"})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:l.map(p=>n.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:p.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.type,"  ",p.size,"  Version ",p.version]})]}),n.jsxs("div",{className:"flex gap-2",children:[u(p.status),d(p.securityLevel)]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Signataires:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:p.signatories.map((v,g)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${v.signed?"bg-green-500":"bg-gray-300"}`}),n.jsxs("span",{children:[v.name," (",v.role,")"]}),v.signed&&v.date&&n.jsxs("span",{className:"text-muted-foreground",children:["- ",new Date(v.date).toLocaleDateString("fr-FR")]})]},g))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",size:"sm",children:[n.jsx(Hr,{className:"h-4 w-4 mr-1"}),"Voir"]}),n.jsxs(Y,{variant:"outline",size:"sm",children:[n.jsx(Tl,{className:"h-4 w-4 mr-1"}),"Tlcharger"]}),p.status==="En attente signature"&&n.jsxs(Y,{size:"sm",onClick:()=>{i(p),r(!0)},children:[n.jsx(_6,{className:"h-4 w-4 mr-1"}),"Signer"]}),n.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>m(p.id),children:[n.jsx(yk,{className:"h-4 w-4 mr-1"}),"Partager"]})]})]},p.id))})})]}),n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Modles de Documents"}),n.jsx(jt,{children:"Crez rapidement des documents  partir de modles pr-dfinis"})]}),n.jsx(ve,{children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map((p,v)=>n.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[n.jsx("h4",{className:"font-semibold mb-2",children:p.name}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),n.jsx(Y,{size:"sm",variant:"outline",children:"Utiliser ce modle"})]},v))})})]}),n.jsx(on,{open:t,onOpenChange:r,children:n.jsxs(Qr,{className:"max-w-md",children:[n.jsxs(qr,{children:[n.jsx(Vr,{children:"Signature lectronique"}),n.jsxs(Ur,{children:["Signez le document: ",s==null?void 0:s.name]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium",children:"Votre signature"}),n.jsx(De,{placeholder:"Tapez votre nom complet",value:a,onChange:p=>o(p.target.value),className:"mt-1"})]}),n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx(ns,{className:"h-4 w-4 inline mr-1"}),"Cette signature sera crypte et horodate de manire scurise."]})})]}),n.jsxs(Bn,{children:[n.jsx(Y,{variant:"outline",onClick:()=>r(!1),children:"Annuler"}),n.jsxs(Y,{onClick:h,children:[n.jsx(_6,{className:"h-4 w-4 mr-2"}),"Signer le document"]})]})]})})]})},hHe=()=>{var _;const{toast:e}=pt(),[t,r]=x.useState("all"),[s,i]=x.useState(!1),[a,o]=x.useState([{id:"NOTIF-001",type:"price_alert",title:"Alerte Prix - Zone Almadies",message:"Le prix moyen dans votre zone de recherche a augment de 8% ce mois.",priority:"high",status:"unread",timestamp:"2025-01-15T10:30:00Z",action:"Voir les dtails",category:"market"},{id:"NOTIF-002",type:"document",title:"Signature Requise",message:"Le contrat pour la parcelle DK-ALM-002 attend votre signature.",priority:"urgent",status:"unread",timestamp:"2025-01-15T09:15:00Z",action:"Signer maintenant",category:"transaction"},{id:"NOTIF-003",type:"payment",title:"chance de Paiement",message:"Votre prochaine chance de 850 000 FCFA est due dans 3 jours.",priority:"medium",status:"read",timestamp:"2025-01-14T16:45:00Z",action:"Effectuer le paiement",category:"payment"},{id:"NOTIF-004",type:"regulatory",title:"Nouvelle Rglementation",message:"Nouvelles rgles fiscales pour les transactions immobilires  Dakar.",priority:"low",status:"read",timestamp:"2025-01-13T14:20:00Z",action:"Lire l'article",category:"legal"},{id:"NOTIF-005",type:"opportunity",title:"Nouvelle Opportunit",message:"Une parcelle correspondant  vos critres est disponible  Ngor.",priority:"medium",status:"unread",timestamp:"2025-01-12T11:30:00Z",action:"Voir la parcelle",category:"opportunity"}]),[l,c]=x.useState({priceAlerts:!0,documentAlerts:!0,paymentReminders:!0,marketUpdates:!1,promotionalOffers:!1,systemMaintenance:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,frequency:"immediate"}),u=[{value:"all",label:"Toutes les notifications",count:a.length},{value:"transaction",label:"Transactions",count:a.filter(w=>w.category==="transaction").length},{value:"payment",label:"Paiements",count:a.filter(w=>w.category==="payment").length},{value:"market",label:"March",count:a.filter(w=>w.category==="market").length},{value:"legal",label:"Lgal",count:a.filter(w=>w.category==="legal").length},{value:"opportunity",label:"Opportunits",count:a.filter(w=>w.category==="opportunity").length}],d=w=>{const A={urgent:"bg-red-100 text-red-800 border-red-200",high:"bg-orange-100 text-orange-800 border-orange-200",medium:"bg-yellow-100 text-yellow-800 border-yellow-200",low:"bg-blue-100 text-blue-800 border-blue-200"};return A[w]||A.medium},h=w=>({price_alert:Br,document:Qt,payment:Sc,regulatory:kr,opportunity:Nl})[w]||Nl,m=w=>{const A=new Date(w),P=new Date-A,C=Math.floor(P/(1e3*60*60)),T=Math.floor(C/24);return C<1?" l'instant":C<24?`Il y a ${C}h`:T<7?`Il y a ${T}j`:A.toLocaleDateString("fr-FR")},p=w=>{o(A=>A.map(S=>S.id===w?{...S,status:"read"}:S))},v=()=>{o(w=>w.map(A=>({...A,status:"read"}))),e({title:"Notifications marques comme lues",description:"Toutes les notifications ont t marques comme lues."})},g=t==="all"?a:a.filter(w=>w.category===t),y=a.filter(w=>w.status==="unread").length,j=(w,A)=>{c(S=>({...S,[w]:A})),e({title:"Paramtres mis  jour",description:"Vos prfrences de notification ont t sauvegardes."})};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Alertes & Notifications"}),n.jsx("p",{className:"text-muted-foreground",children:"Grez vos notifications et paramtrez vos alertes personnalises"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(Y,{variant:"outline",onClick:()=>i(!s),children:[n.jsx(Yf,{className:"h-4 w-4 mr-2"}),"Paramtres"]}),y>0&&n.jsxs(Y,{onClick:v,children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Tout marquer comme lu"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Non lues"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:y})]}),n.jsx(Nl,{className:"h-8 w-8 text-red-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cette semaine"}),n.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),n.jsx(Sc,{className:"h-8 w-8 text-blue-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Urgentes"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a.filter(w=>w.priority==="urgent").length})]}),n.jsx(kr,{className:"h-8 w-8 text-orange-500"})]})})}),n.jsx(he,{children:n.jsx(ve,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Alertes Actives"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:"12"})]}),n.jsx(Br,{className:"h-8 w-8 text-green-500"})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"lg:col-span-1",children:[n.jsxs(he,{children:[n.jsx(Ce,{children:n.jsxs(ke,{className:"flex items-center gap-2",children:[n.jsx(Wo,{className:"h-4 w-4"}),"Filtres"]})}),n.jsx(ve,{className:"space-y-2",children:u.map(w=>n.jsxs(Y,{variant:t===w.value?"default":"ghost",className:"w-full justify-between",onClick:()=>r(w.value),children:[n.jsx("span",{children:w.label}),n.jsx(Ge,{variant:"secondary",children:w.count})]},w.value))})]}),s&&n.jsxs(he,{className:"mt-4",children:[n.jsx(Ce,{children:n.jsx(ke,{children:"Paramtres d'Alertes"})}),n.jsxs(ve,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx($e,{htmlFor:"price-alerts",children:"Alertes prix"}),n.jsx(fu,{id:"price-alerts",checked:l.priceAlerts,onCheckedChange:w=>j("priceAlerts",w)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx($e,{htmlFor:"document-alerts",children:"Documents"}),n.jsx(fu,{id:"document-alerts",checked:l.documentAlerts,onCheckedChange:w=>j("documentAlerts",w)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx($e,{htmlFor:"payment-alerts",children:"Paiements"}),n.jsx(fu,{id:"payment-alerts",checked:l.paymentReminders,onCheckedChange:w=>j("paymentReminders",w)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx($e,{htmlFor:"market-alerts",children:"March"}),n.jsx(fu,{id:"market-alerts",checked:l.marketUpdates,onCheckedChange:w=>j("marketUpdates",w)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx($e,{children:"Frquence des notifications"}),n.jsxs(Ft,{value:l.frequency,onValueChange:w=>j("frequency",w),children:[n.jsx(Dt,{children:n.jsx(zt,{})}),n.jsxs($t,{children:[n.jsx(Ke,{value:"immediate",children:"Immdiate"}),n.jsx(Ke,{value:"hourly",children:"Chaque heure"}),n.jsx(Ke,{value:"daily",children:"Quotidienne"}),n.jsx(Ke,{value:"weekly",children:"Hebdomadaire"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx($e,{children:"Canaux de notification"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(C0,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Email"})]}),n.jsx(fu,{checked:l.emailNotifications,onCheckedChange:w=>j("emailNotifications",w)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nh,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"SMS"})]}),n.jsx(fu,{checked:l.smsNotifications,onCheckedChange:w=>j("smsNotifications",w)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nl,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Push"})]}),n.jsx(fu,{checked:l.pushNotifications,onCheckedChange:w=>j("pushNotifications",w)})]})]})]})]})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsxs(he,{children:[n.jsxs(Ce,{children:[n.jsx(ke,{children:"Notifications Rcentes"}),n.jsxs(jt,{children:[g.length," notification(s)",t!=="all"&&` dans la catgorie ${(_=u.find(w=>w.value===t))==null?void 0:_.label}`]})]}),n.jsx(ve,{children:n.jsx("div",{className:"space-y-4",children:g.map(w=>{const A=h(w.type);return n.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 ${w.status==="unread"?"border-l-4 border-l-blue-500 bg-blue-50/30":"hover:shadow-md"}`,children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex gap-3 flex-1",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(A,{className:`h-5 w-5 ${w.status==="unread"?"text-blue-600":"text-gray-500"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:`font-semibold ${w.status==="unread"?"text-gray-900":"text-gray-700"}`,children:w.title}),n.jsx(Ge,{className:d(w.priority),children:w.priority}),w.status==="unread"&&n.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:w.message}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:m(w.timestamp)}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Y,{variant:"outline",size:"sm",children:w.action}),w.status==="unread"&&n.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>p(w.id),children:"Marquer comme lu"})]})]})]})]})})},w.id)})})})]})})]})]})};function fHe(){const{user:e}=ar();return(e==null?void 0:e.role)==="admin"?n.jsx(Lz,{}):n.jsx(Kbe,{})}function mHe(){const{user:e}=ar();return(e==null?void 0:e.role)==="admin"?n.jsx(Oz,{}):n.jsx(X1e,{})}const pHe=()=>n.jsxs("div",{className:"flex flex-col min-h-screen",children:[n.jsx(V9,{}),n.jsx("main",{className:"flex-1 pt-20",children:n.jsx(Nk,{})}),n.jsx(pme,{})]}),v$=()=>n.jsx("div",{className:"container mx-auto text-center py-20 flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:n.jsxs(Ae.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:100},children:[n.jsx("h1",{className:"text-6xl font-bold text-primary",children:"404"}),n.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Page Non Trouve"}),n.jsx("p",{className:"text-muted-foreground mb-8 max-w-md",children:"Dsol, la page que vous recherchez semble s'tre gare dans le cadastre numrique."}),n.jsx(Y,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-green-500 to-primary hover:opacity-90 text-white",children:n.jsx(dt,{to:"/",children:"Retourner  l'Accueil"})})]})});function gHe(){return n.jsx(kH,{children:n.jsx($le,{children:n.jsxs(Mye,{children:[n.jsx(uje,{}),n.jsx(Tz,{children:n.jsx(Kve,{children:n.jsx(rme,{children:n.jsxs(Vje,{children:[n.jsxs(Ele,{children:[n.jsxs(rt,{path:"/",element:n.jsx(pHe,{}),children:[n.jsx(rt,{index:!0,element:n.jsx(Zve,{})}),n.jsx(rt,{path:"login",element:n.jsx(Qve,{})}),n.jsx(rt,{path:"register",element:n.jsx(Oye,{})}),n.jsx(rt,{path:"parcelles",element:n.jsx(T0e,{})}),n.jsx(rt,{path:"parcelles/:id",element:n.jsx(Mbe,{})}),n.jsx(rt,{path:"contact",element:n.jsx(Zbe,{})}),n.jsx(rt,{path:"about",element:n.jsx(Xbe,{})}),n.jsx(rt,{path:"how-it-works",element:n.jsx(x1e,{})}),n.jsx(rt,{path:"faq",element:n.jsx(E1e,{})}),n.jsx(rt,{path:"partners",element:n.jsx(M1e,{})}),n.jsx(rt,{path:"map",element:n.jsx(n1e,{})}),n.jsx(rt,{path:"blog",element:n.jsx(u1e,{})}),n.jsx(rt,{path:"blog/:slug",element:n.jsx(d1e,{})}),n.jsx(rt,{path:"legal",element:n.jsx(h1e,{})}),n.jsx(rt,{path:"privacy",element:n.jsx(f1e,{})}),n.jsx(rt,{path:"cookie-policy",element:n.jsx(m1e,{})}),n.jsx(rt,{path:"saved-searches",element:n.jsx(ije,{})}),n.jsx(rt,{path:"compare",element:n.jsx(lje,{})}),n.jsx(rt,{path:"municipal-land-request-info",element:n.jsx(hje,{})}),n.jsx(rt,{path:"solutions/banques",element:n.jsx(gje,{})}),n.jsx(rt,{path:"pricing",element:n.jsx(xje,{})}),n.jsx(rt,{path:"glossary",element:n.jsx(yje,{})}),n.jsx(rt,{path:"tax-guide",element:n.jsx(jje,{})}),n.jsx(rt,{path:"*",element:n.jsx(v$,{})})]}),n.jsx(rt,{path:"/verification",element:n.jsx(Zje,{})}),n.jsx(rt,{path:"/identity-verification",element:n.jsx(Kb,{children:n.jsx(Xje,{})})}),n.jsxs(rt,{element:n.jsx(Kb,{requireVerification:!0,children:n.jsx(Gve,{})}),children:[n.jsx(rt,{path:"/dashboard",element:n.jsx(Lye,{})}),n.jsx(rt,{path:"/dashboard/admin",element:n.jsx(VVe,{})}),n.jsx(rt,{path:"/dashboard/admin/users",element:n.jsx(YVe,{})}),n.jsx(rt,{path:"/dashboard/admin/parcels",element:n.jsx(eUe,{})}),n.jsx(rt,{path:"/dashboard/admin/parcel-submissions",element:n.jsx(gUe,{})}),n.jsx(rt,{path:"/dashboard/admin/blog",element:n.jsx(tUe,{})}),n.jsx(rt,{path:"/dashboard/admin/agents",element:n.jsx(nUe,{})}),n.jsx(rt,{path:"/dashboard/admin/requests",element:n.jsx(sUe,{})}),n.jsx(rt,{path:"/dashboard/admin/type-change-requests",element:n.jsx(pUe,{})}),n.jsx(rt,{path:"/dashboard/admin/reports",element:n.jsx(iUe,{})}),n.jsx(rt,{path:"/dashboard/admin/contracts",element:n.jsx(aUe,{})}),n.jsx(rt,{path:"/dashboard/admin/compliance",element:n.jsx(lUe,{})}),n.jsx(rt,{path:"/dashboard/admin/disputes",element:n.jsx(oUe,{})}),n.jsx(rt,{path:"/dashboard/admin/transactions",element:n.jsx(cUe,{})}),n.jsx(rt,{path:"/dashboard/admin/ai-assistant",element:n.jsx(dUe,{})}),n.jsx(rt,{path:"/dashboard/admin/institutions",element:n.jsx(hUe,{})}),n.jsx(rt,{path:"/dashboard/admin/audit-logs",element:n.jsx(fUe,{})}),n.jsx(rt,{path:"/dashboard/admin/global-timeline",element:n.jsx(mUe,{})}),n.jsx(rt,{path:"/dashboard/admin/profile",element:n.jsx(Lz,{})}),n.jsx(rt,{path:"/dashboard/admin/settings",element:n.jsx($oe,{})}),n.jsx(rt,{path:"/dashboard/admin/notifications",element:n.jsx(Oz,{})}),n.jsx(rt,{path:"/dashboard/admin/roles",element:n.jsx(xUe,{})}),n.jsx(rt,{path:"/dashboard/admin/permissions",element:n.jsx(vUe,{})}),n.jsx(rt,{path:"/dashboard/admin/user-roles",element:n.jsx(yUe,{})}),n.jsx(rt,{path:"/dashboard/agent",element:n.jsx(jUe,{})}),n.jsx(rt,{path:"/dashboard/agent/clients",element:n.jsx(wUe,{})}),n.jsx(rt,{path:"/dashboard/agent/parcels",element:n.jsx(_Ue,{})}),n.jsx(rt,{path:"/dashboard/agent/tasks",element:n.jsx(NUe,{})}),n.jsx(rt,{path:"/dashboard/particulier",element:n.jsx(SUe,{})}),n.jsx(rt,{path:"/dashboard/vendeur",element:n.jsx(twe,{})}),n.jsx(rt,{path:"/dashboard/investisseur",element:n.jsx(O9e,{})}),n.jsx(rt,{path:"/dashboard/promoteur",element:n.jsx(L9e,{})}),n.jsx(rt,{path:"/dashboard/agriculteur",element:n.jsx(M9e,{})}),n.jsx(rt,{path:"/dashboard/banque",element:n.jsx(D9e,{})}),n.jsx(rt,{path:"/dashboard/mairie",element:n.jsx(FVe,{})}),n.jsx(rt,{path:"/dashboard/notaire",element:n.jsx($Ve,{})}),n.jsx(rt,{path:"/dashboard/mairie/land-management",element:n.jsx(PUe,{})}),n.jsx(rt,{path:"/dashboard/mairie/urban-plan",element:n.jsx(CUe,{})}),n.jsx(rt,{path:"/dashboard/mairie/cadastre",element:n.jsx(kUe,{})}),n.jsx(rt,{path:"/dashboard/mairie/disputes",element:n.jsx(EUe,{})}),n.jsx(rt,{path:"/dashboard/mairie/requests",element:n.jsx(TUe,{})}),n.jsx(rt,{path:"/dashboard/banque/funding-requests",element:n.jsx(pje,{})}),n.jsx(rt,{path:"/dashboard/banque/guarantees",element:n.jsx(OUe,{})}),n.jsx(rt,{path:"/dashboard/banque/evaluations",element:n.jsx(IUe,{})}),n.jsx(rt,{path:"/dashboard/banque/land-valuation",element:n.jsx(LUe,{})}),n.jsx(rt,{path:"/dashboard/banque/compliance",element:n.jsx(MUe,{})}),n.jsx(rt,{path:"/dashboard/banque/documents",element:n.jsx(RUe,{})}),n.jsx(rt,{path:"/dashboard/banque/clients",element:n.jsx(DUe,{})}),n.jsx(rt,{path:"/dashboard/banque/dossiers",element:n.jsx($Ue,{})}),n.jsx(rt,{path:"/dashboard/banque/audit-logs",element:n.jsx(Foe,{})}),n.jsx(rt,{path:"/dashboard/banque/permissions",element:n.jsx(Doe,{})}),n.jsx(rt,{path:"/dashboard/banque/roles",element:n.jsx(Ioe,{})}),n.jsx(rt,{path:"/dashboard/banque/user-roles",element:n.jsx(Roe,{})}),n.jsx(rt,{path:"/dashboard/notaire/cases",element:n.jsx(BUe,{})}),n.jsx(rt,{path:"/dashboard/notaire/authentication",element:n.jsx(zUe,{})}),n.jsx(rt,{path:"/dashboard/notaire/archives",element:n.jsx(FUe,{})}),n.jsx(rt,{path:"/dashboard/notaire/compliance-check",element:n.jsx(qUe,{})}),n.jsx(rt,{path:"/dashboard/investisseur/market-analysis",element:n.jsx(VUe,{})}),n.jsx(rt,{path:"/dashboard/investisseur/opportunities",element:n.jsx(UUe,{})}),n.jsx(rt,{path:"/dashboard/investisseur/roi-calculator",element:n.jsx(HUe,{})}),n.jsx(rt,{path:"/dashboard/investisseur/investissements",element:n.jsx(WUe,{})}),n.jsx(rt,{path:"/dashboard/investisseur/due-diligence",element:n.jsx(GUe,{})}),n.jsx(rt,{path:"/dashboard/promoteur/projects",element:n.jsx(KUe,{})}),n.jsx(rt,{path:"/dashboard/promoteur/construction-tracking",element:n.jsx(ZUe,{})}),n.jsx(rt,{path:"/dashboard/promoteur/sales",element:n.jsx(XUe,{})}),n.jsx(rt,{path:"/dashboard/agriculteur/my-lands",element:n.jsx(YUe,{})}),n.jsx(rt,{path:"/dashboard/agriculteur/soil-analysis",element:n.jsx(JUe,{})}),n.jsx(rt,{path:"/dashboard/agriculteur/weather",element:n.jsx(QUe,{})}),n.jsx(rt,{path:"/dashboard/agriculteur/logbook",element:n.jsx(eHe,{})}),n.jsx(rt,{path:"/dashboard/agriculteur/equipment",element:n.jsx(tHe,{})}),n.jsx(rt,{path:"/dashboard/my-requests",element:n.jsx(c1e,{})}),n.jsx(rt,{path:"/dashboard/create-request",element:n.jsx(Bje,{})}),n.jsx(rt,{path:"/dashboard/sell-property",element:n.jsx(I1e,{})}),n.jsx(rt,{path:"/dashboard/my-listings",element:n.jsx(F1e,{})}),n.jsx(rt,{path:"/dashboard/transactions",element:n.jsx(kje,{})}),n.jsx(rt,{path:"/dashboard/payment/:transactionId",element:n.jsx(Eje,{})}),n.jsx(rt,{path:"/dashboard/favorites",element:n.jsx(W1e,{})}),n.jsx(rt,{path:"/dashboard/messaging",element:n.jsx(cje,{})}),n.jsx(rt,{path:"/dashboard/profile",element:n.jsx(Kb,{children:n.jsx(fHe,{})})}),n.jsx(rt,{path:"/dashboard/notifications",element:n.jsx(Kb,{children:n.jsx(mHe,{})})}),n.jsx(rt,{path:"/dashboard/case-tracking/:id",element:n.jsx(Sje,{})}),n.jsx(rt,{path:"/dashboard/digital-vault",element:n.jsx(Aje,{})}),n.jsx(rt,{path:"/dashboard/municipal-land-request",element:n.jsx(dje,{})}),n.jsx(rt,{path:"/dashboard/transaction-tracking",element:n.jsx(cHe,{})}),n.jsx(rt,{path:"/dashboard/market-prediction",element:n.jsx(uHe,{})}),n.jsx(rt,{path:"/dashboard/document-management",element:n.jsx(dHe,{})}),n.jsx(rt,{path:"/dashboard/alerts-notifications",element:n.jsx(hHe,{})}),n.jsx(rt,{path:"/admin",element:n.jsx(yl,{to:"/dashboard/admin",replace:!0})}),n.jsx(rt,{path:"/profile",element:n.jsx(yl,{to:"/dashboard/profile",replace:!0})}),n.jsx(rt,{path:"/my-requests",element:n.jsx(yl,{to:"/dashboard/my-requests",replace:!0})}),n.jsx(rt,{path:"/settings",element:n.jsx(yl,{to:"/dashboard/settings",replace:!0})}),n.jsx(rt,{path:"/favorites",element:n.jsx(yl,{to:"/dashboard/favorites",replace:!0})}),n.jsx(rt,{path:"/notifications",element:n.jsx(yl,{to:"/dashboard/notifications",replace:!0})}),n.jsx(rt,{path:"/messaging",element:n.jsx(yl,{to:"/dashboard/messaging",replace:!0})})]}),n.jsx(rt,{path:"*",element:n.jsx(v$,{})})]}),n.jsx(Oce,{}),n.jsx(zW,{})]})})})})]})})})}xS.createRoot(document.getElementById("root")).render(n.jsx(we.StrictMode,{children:n.jsx(Tz,{children:n.jsx(gHe,{})})}));export{en as _,li as c,Er as g};
//# sourceMappingURL=index-04d22618.js.map
